{"ast":null,"code":"var _jsxFileName = \"/usr/local/src/app/packages/craflo-frontend/src/reaction/containers/catalog/withCatalogItems.tsx\";\nvar __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport inject from \"hocs/inject\";\nimport { Query } from \"@apollo/react-components\";\nimport hoistNonReactStatic from \"hoist-non-react-statics\";\nimport { pagination, paginationVariablesFromUrlParams } from \"lib/utils/pagination\";\nimport catalogItemsQuery from \"./catalogItems.gql\";\n//import ll from \"@reactioncommerce/api-utils/lib/encodeOpaqueId\";\n//console.log(ll)\n\n/**\n * withCatalogItems higher order query component for fetching primaryShopId and catalog data\n * @name withCatalogItems\n * @param {React.Component} Component to decorate and apply\n * @returns {React.Component} - component decorated with primaryShopId and catalog as props\n */\nexport default function withCatalogItems(Component) {\n  let CatalogItems = /*#__PURE__*/function (_React$Component) {\n    _inherits(CatalogItems, _React$Component);\n\n    var _super = _createSuper(CatalogItems);\n\n    function CatalogItems() {\n      _classCallCheck(this, CatalogItems);\n\n      return _super.apply(this, arguments);\n    }\n\n    _createClass(CatalogItems, [{\n      key: \"render\",\n      value: function render() {\n        const {\n          primaryShopId,\n          routingStore,\n          uiStore,\n          tag\n        } = this.props;\n        const [sortBy, sortOrder] = uiStore.sortBy.split(\"-\");\n        let tagIds = tag && [tag._id]; //tagIds = [ll(\"reaction/tag\", \"wPSzobjkrtk8z95XH\")]\n        // if (!primaryShopId) {\n        //   return (\n        //      <Component\n        //       {...this.props}\n        //     />\n        //   );\n        // }\n\n        const variables = _objectSpread(_objectSpread({\n          shopId: \"oEsrnc9mqBDvt52TW\"\n        }, paginationVariablesFromUrlParams(routingStore.query, {\n          defaultPageLimit: uiStore.pageSize\n        })), {}, {\n          tagIds,\n          sortBy,\n          sortByPriceCurrencyCode: uiStore.sortByCurrencyCode,\n          sortOrder\n        }); // console.log(variables, \"rishbah\")\n\n\n        return /*#__PURE__*/React.createElement(Query, {\n          query: catalogItemsQuery,\n          variables: variables,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 9\n          }\n        }, ({\n          data,\n          fetchMore,\n          loading\n        }) => {\n          const {\n            catalogItems\n          } = data || {}; // console.log(catalogItems, \"items piasdpofij\")\n\n          return /*#__PURE__*/React.createElement(Component, _extends({}, this.props, {\n            catalogItemsPageInfo: pagination({\n              fetchMore,\n              routingStore,\n              data,\n              queryName: \"catalogItems\",\n              limit: uiStore.pageSize\n            }),\n            catalogItems: catalogItems && catalogItems.edges || [],\n            isLoadingCatalogItems: loading,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 60,\n              columnNumber: 15\n            }\n          }));\n        });\n      }\n    }]);\n\n    return CatalogItems;\n  }(React.Component);\n\n  _defineProperty(CatalogItems, \"propTypes\", {\n    primaryShopId: PropTypes.string,\n    routingStore: PropTypes.object.isRequired,\n    tag: PropTypes.shape({\n      _id: PropTypes.string.isRequired\n    }),\n    uiStore: PropTypes.object.isRequired\n  });\n\n  hoistNonReactStatic(CatalogItems, Component);\n  return inject(\"primaryShopId\", \"routingStore\", \"uiStore\")(CatalogItems);\n}","map":{"version":3,"sources":["/usr/local/src/app/packages/craflo-frontend/src/reaction/containers/catalog/withCatalogItems.tsx"],"names":["React","PropTypes","inject","Query","hoistNonReactStatic","pagination","paginationVariablesFromUrlParams","catalogItemsQuery","withCatalogItems","Component","CatalogItems","primaryShopId","routingStore","uiStore","tag","props","sortBy","sortOrder","split","tagIds","_id","variables","shopId","query","defaultPageLimit","pageSize","sortByPriceCurrencyCode","sortByCurrencyCode","data","fetchMore","loading","catalogItems","queryName","limit","edges","string","object","isRequired","shape"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport inject from \"hocs/inject\";\nimport { Query } from \"@apollo/react-components\";\nimport hoistNonReactStatic from \"hoist-non-react-statics\";\nimport { pagination, paginationVariablesFromUrlParams } from \"lib/utils/pagination\";\nimport catalogItemsQuery from \"./catalogItems.gql\";\nimport { decodeOpaqueId } from \"lib/utils/decoding\";\n//import ll from \"@reactioncommerce/api-utils/lib/encodeOpaqueId\";\n//console.log(ll)\n/**\n * withCatalogItems higher order query component for fetching primaryShopId and catalog data\n * @name withCatalogItems\n * @param {React.Component} Component to decorate and apply\n * @returns {React.Component} - component decorated with primaryShopId and catalog as props\n */\nexport default function withCatalogItems(Component) {\n  class CatalogItems extends React.Component {\n    static propTypes = {\n      primaryShopId: PropTypes.string,\n      routingStore: PropTypes.object.isRequired,\n      tag: PropTypes.shape({\n        _id: PropTypes.string.isRequired\n      }),\n      uiStore: PropTypes.object.isRequired\n    };\n\n    render() {\n      const { primaryShopId, routingStore, uiStore, tag } = this.props;\n      const [sortBy, sortOrder] = uiStore.sortBy.split(\"-\");\n      let tagIds = tag && [tag._id];\n      //tagIds = [ll(\"reaction/tag\", \"wPSzobjkrtk8z95XH\")]\n\n      // if (!primaryShopId) {\n      //   return (\n      //      <Component\n      //       {...this.props}\n      //     />\n      //   );\n      // }\n\n      const variables = {\n        shopId: \"oEsrnc9mqBDvt52TW\",\n        ...paginationVariablesFromUrlParams(routingStore.query, { defaultPageLimit: uiStore.pageSize }),\n        tagIds,\n        sortBy,\n        sortByPriceCurrencyCode: uiStore.sortByCurrencyCode,\n        sortOrder\n      };\n\n      // console.log(variables, \"rishbah\")\n\n      return (\n        <Query  query={catalogItemsQuery} variables={variables}>\n          {({ data, fetchMore, loading }) => {\n            const { catalogItems } = data || {};\n            // console.log(catalogItems, \"items piasdpofij\")\n\n            return (\n              <Component\n                {...this.props}\n                catalogItemsPageInfo={pagination({\n                  fetchMore,\n                  routingStore,\n                  data,\n                  queryName: \"catalogItems\",\n                  limit: uiStore.pageSize\n                })}\n                catalogItems={(catalogItems && catalogItems.edges) || []}\n                isLoadingCatalogItems={loading}\n              />\n            );\n          }}\n        </Query>\n      );\n    }\n  }\n\n  hoistNonReactStatic(CatalogItems, Component);\n  return inject(\"primaryShopId\", \"routingStore\", \"uiStore\")(CatalogItems);\n}\n"]},"metadata":{},"sourceType":"module"}