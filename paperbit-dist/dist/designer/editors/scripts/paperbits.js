/*! For license information please see paperbits.js.LICENSE.txt */
!function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=310)}([function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(n){var A=this||(0,eval)("this"),w=A.document,R=A.navigator,v=A.jQuery,H=A.JSON;v||"undefined"==typeof jQuery||(v=jQuery),function(n){__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__],void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=n)?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}((function(S,T){function K(a,c){return(null===a||typeof a in W)&&a===c}function X(b,c){var d;return function(){d||(d=a.a.setTimeout((function(){d=n,b()}),c))}}function Y(b,c){var d;return function(){clearTimeout(d),d=a.a.setTimeout(b,c)}}function Z(a,c){c&&"change"!==c?"beforeChange"===c?this.pc(a):this.gb(a,c):this.qc(a)}function aa(a,c){null!==c&&c.s&&c.s()}function ba(a,c){var d=this.qd,e=d[r];e.ra||(this.Qb&&this.mb[c]?(d.uc(c,a,this.mb[c]),this.mb[c]=null,--this.Qb):e.I[c]||d.uc(c,a,e.J?{da:a}:d.$c(a)),a.Ja&&a.gd())}var b,c,d,e,f,g,a=void 0!==S?S:{};a.b=function(b,c){for(var d=b.split("."),e=a,f=0;f<d.length-1;f++)e=e[d[f]];e[d[d.length-1]]=c},a.L=function(a,c,d){a[c]=d},a.version="3.5.1",a.b("version",a.version),a.options={deferUpdates:!1,useOnlyNativeEvents:!1,foreachHidesDestroyed:!1},a.a=function(){function b(a,b){for(var c in a)f.call(a,c)&&b(c,a[c])}function c(a,b){if(b)for(var c in b)f.call(b,c)&&(a[c]=b[c]);return a}function d(a,b){return a.__proto__=b,a}function e(b,c,d,e){var l=b[c].match(q)||[];a.a.D(d.match(q),(function(b){a.a.Na(l,b,e)})),b[c]=l.join(" ")}var f=Object.prototype.hasOwnProperty,g={__proto__:[]}instanceof Array,h="function"==typeof Symbol,m={},k={};m[R&&/Firefox\/2/i.test(R.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"],m.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" "),b(m,(function(a,b){if(b.length)for(var c=0,d=b.length;c<d;c++)k[b[c]]=a}));var t,l={propertychange:!0},p=w&&function(){for(var a=3,b=w.createElement("div"),c=b.getElementsByTagName("i");b.innerHTML="\x3c!--[if gt IE "+ ++a+"]><i></i><![endif]--\x3e",c[0];);return 4<a?a:n}(),q=/\S+/g;return{Jc:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],D:function(a,b,c){for(var d=0,e=a.length;d<e;d++)b.call(c,a[d],d,a)},A:"function"==typeof Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b)}:function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},Lb:function(a,b,c){for(var d=0,e=a.length;d<e;d++)if(b.call(c,a[d],d,a))return a[d];return n},Pa:function(b,c){var d=a.a.A(b,c);0<d?b.splice(d,1):0===d&&b.shift()},wc:function(b){var c=[];return b&&a.a.D(b,(function(b){0>a.a.A(c,b)&&c.push(b)})),c},Mb:function(a,b,c){var d=[];if(a)for(var e=0,l=a.length;e<l;e++)d.push(b.call(c,a[e],e));return d},jb:function(a,b,c){var d=[];if(a)for(var e=0,l=a.length;e<l;e++)b.call(c,a[e],e)&&d.push(a[e]);return d},Nb:function(a,b){if(b instanceof Array)a.push.apply(a,b);else for(var c=0,d=b.length;c<d;c++)a.push(b[c]);return a},Na:function(b,c,d){var e=a.a.A(a.a.bc(b),c);0>e?d&&b.push(c):d||b.splice(e,1)},Ba:g,extend:c,setPrototypeOf:d,Ab:g?d:c,P:b,Ga:function(a,b,c){if(!a)return a;var e,d={};for(e in a)f.call(a,e)&&(d[e]=b.call(c,a[e],e,a));return d},Tb:function(b){for(;b.firstChild;)a.removeNode(b.firstChild)},Yb:function(b){for(var c=((b=a.a.la(b))[0]&&b[0].ownerDocument||w).createElement("div"),d=0,e=b.length;d<e;d++)c.appendChild(a.oa(b[d]));return c},Ca:function(b,c){for(var d=0,e=b.length,l=[];d<e;d++){var k=b[d].cloneNode(!0);l.push(c?a.oa(k):k)}return l},va:function(b,c){if(a.a.Tb(b),c)for(var d=0,e=c.length;d<e;d++)b.appendChild(c[d])},Xc:function(b,c){var d=b.nodeType?[b]:b;if(0<d.length){for(var e=d[0],l=e.parentNode,k=0,f=c.length;k<f;k++)l.insertBefore(c[k],e);for(k=0,f=d.length;k<f;k++)a.removeNode(d[k])}},Ua:function(a,b){if(a.length){for(b=8===b.nodeType&&b.parentNode||b;a.length&&a[0].parentNode!==b;)a.splice(0,1);for(;1<a.length&&a[a.length-1].parentNode!==b;)a.length--;if(1<a.length){var c=a[0],d=a[a.length-1];for(a.length=0;c!==d;)a.push(c),c=c.nextSibling;a.push(d)}}return a},Zc:function(a,b){7>p?a.setAttribute("selected",b):a.selected=b},Db:function(a){return null===a||a===n?"":a.trim?a.trim():a.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},Ud:function(a,b){return a=a||"",!(b.length>a.length)&&a.substring(0,b.length)===b},vd:function(a,b){if(a===b)return!0;if(11===a.nodeType)return!1;if(b.contains)return b.contains(1!==a.nodeType?a.parentNode:a);if(b.compareDocumentPosition)return 16==(16&b.compareDocumentPosition(a));for(;a&&a!=b;)a=a.parentNode;return!!a},Sb:function(b){return a.a.vd(b,b.ownerDocument.documentElement)},kd:function(b){return!!a.a.Lb(b,a.a.Sb)},R:function(a){return a&&a.tagName&&a.tagName.toLowerCase()},Ac:function(b){return a.onError?function(){try{return b.apply(this,arguments)}catch(c){throw a.onError&&a.onError(c),c}}:b},setTimeout:function(b,c){return setTimeout(a.a.Ac(b),c)},Gc:function(b){setTimeout((function(){throw a.onError&&a.onError(b),b}),0)},B:function(b,c,d){var e=a.a.Ac(d);if(d=l[c],a.options.useOnlyNativeEvents||d||!v)if(d||"function"!=typeof b.addEventListener){if(void 0===b.attachEvent)throw Error("Browser doesn't support addEventListener or attachEvent");var k=function(a){e.call(b,a)},f="on"+c;b.attachEvent(f,k),a.a.K.za(b,(function(){b.detachEvent(f,k)}))}else b.addEventListener(c,e,!1);else t||(t="function"==typeof v(b).on?"on":"bind"),v(b)[t](c,e)},Fb:function(b,c){if(!b||!b.nodeType)throw Error("element must be a DOM node when calling triggerEvent");var d;if(d=!("input"!==a.a.R(b)||!b.type||"click"!=c.toLowerCase())&&("checkbox"==(d=b.type)||"radio"==d),a.options.useOnlyNativeEvents||!v||d)if("function"==typeof w.createEvent){if("function"!=typeof b.dispatchEvent)throw Error("The supplied element doesn't support dispatchEvent");(d=w.createEvent(k[c]||"HTMLEvents")).initEvent(c,!0,!0,A,0,0,0,0,0,!1,!1,!1,!1,0,b),b.dispatchEvent(d)}else if(d&&b.click)b.click();else{if(void 0===b.fireEvent)throw Error("Browser doesn't support triggering events");b.fireEvent("on"+c)}else v(b).trigger(c)},f:function(b){return a.O(b)?b():b},bc:function(b){return a.O(b)?b.v():b},Eb:function(b,c,d){var l;c&&("object"==typeof b.classList?(l=b.classList[d?"add":"remove"],a.a.D(c.match(q),(function(a){l.call(b.classList,a)}))):"string"==typeof b.className.baseVal?e(b.className,"baseVal",c,d):e(b,"className",c,d))},Bb:function(b,c){var d=a.a.f(c);null!==d&&d!==n||(d="");var e=a.h.firstChild(b);!e||3!=e.nodeType||a.h.nextSibling(e)?a.h.va(b,[b.ownerDocument.createTextNode(d)]):e.data=d,a.a.Ad(b)},Yc:function(a,b){if(a.name=b,7>=p)try{var c=a.name.replace(/[&<>'"]/g,(function(a){return"&#"+a.charCodeAt(0)+";"}));a.mergeAttributes(w.createElement("<input name='"+c+"'/>"),!1)}catch(d){}},Ad:function(a){9<=p&&(a=1==a.nodeType?a:a.parentNode).style&&(a.style.zoom=a.style.zoom)},wd:function(a){if(p){var b=a.style.width;a.style.width=0,a.style.width=b}},Pd:function(b,c){b=a.a.f(b),c=a.a.f(c);for(var d=[],e=b;e<=c;e++)d.push(e);return d},la:function(a){for(var b=[],c=0,d=a.length;c<d;c++)b.push(a[c]);return b},Da:function(a){return h?Symbol(a):a},Zd:6===p,$d:7===p,W:p,Lc:function(b,c){for(var d=a.a.la(b.getElementsByTagName("input")).concat(a.a.la(b.getElementsByTagName("textarea"))),e="string"==typeof c?function(a){return a.name===c}:function(a){return c.test(a.name)},l=[],k=d.length-1;0<=k;k--)e(d[k])&&l.push(d[k]);return l},Nd:function(b){return"string"==typeof b&&(b=a.a.Db(b))?H&&H.parse?H.parse(b):new Function("return "+b)():null},hc:function(b,c,d){if(!H||!H.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return H.stringify(a.a.f(b),c,d)},Od:function(c,d,e){var l=(e=e||{}).params||{},k=e.includeFields||this.Jc,f=c;if("object"==typeof c&&"form"===a.a.R(c)){f=c.action;for(var h=k.length-1;0<=h;h--)for(var g=a.a.Lc(c,k[h]),m=g.length-1;0<=m;m--)l[g[m].name]=g[m].value}d=a.a.f(d);var p=w.createElement("form");for(var q in p.style.display="none",p.action=f,p.method="post",d)(c=w.createElement("input")).type="hidden",c.name=q,c.value=a.a.hc(a.a.f(d[q])),p.appendChild(c);b(l,(function(a,b){var c=w.createElement("input");c.type="hidden",c.name=a,c.value=b,p.appendChild(c)})),w.body.appendChild(p),e.submitter?e.submitter(p):p.submit(),setTimeout((function(){p.parentNode.removeChild(p)}),0)}}}(),a.b("utils",a.a),a.b("utils.arrayForEach",a.a.D),a.b("utils.arrayFirst",a.a.Lb),a.b("utils.arrayFilter",a.a.jb),a.b("utils.arrayGetDistinctValues",a.a.wc),a.b("utils.arrayIndexOf",a.a.A),a.b("utils.arrayMap",a.a.Mb),a.b("utils.arrayPushAll",a.a.Nb),a.b("utils.arrayRemoveItem",a.a.Pa),a.b("utils.cloneNodes",a.a.Ca),a.b("utils.createSymbolOrString",a.a.Da),a.b("utils.extend",a.a.extend),a.b("utils.fieldsIncludedWithJsonPost",a.a.Jc),a.b("utils.getFormFields",a.a.Lc),a.b("utils.objectMap",a.a.Ga),a.b("utils.peekObservable",a.a.bc),a.b("utils.postJson",a.a.Od),a.b("utils.parseJson",a.a.Nd),a.b("utils.registerEventHandler",a.a.B),a.b("utils.stringifyJson",a.a.hc),a.b("utils.range",a.a.Pd),a.b("utils.toggleDomNodeCssClass",a.a.Eb),a.b("utils.triggerEvent",a.a.Fb),a.b("utils.unwrapObservable",a.a.f),a.b("utils.objectForEach",a.a.P),a.b("utils.addOrRemoveItem",a.a.Na),a.b("utils.setTextContent",a.a.Bb),a.b("unwrap",a.a.f),Function.prototype.bind||(Function.prototype.bind=function(a){var c=this;if(1===arguments.length)return function(){return c.apply(a,arguments)};var d=Array.prototype.slice.call(arguments,1);return function(){var e=d.slice(0);return e.push.apply(e,arguments),c.apply(a,e)}}),a.a.g=new function(){var e,f,b=0,c="__ko__"+(new Date).getTime(),d={};return a.a.W?(e=function(a,e){var f=a[c];if(!f||"null"===f||!d[f]){if(!e)return n;f=a[c]="ko"+b++,d[f]={}}return d[f]},f=function(a){var b=a[c];return!!b&&(delete d[b],a[c]=null,!0)}):(e=function(a,b){var d=a[c];return!d&&b&&(d=a[c]={}),d},f=function(a){return!!a[c]&&(delete a[c],!0)}),{get:function(a,b){var c=e(a,!1);return c&&c[b]},set:function(a,b,c){(a=e(a,c!==n))&&(a[b]=c)},Ub:function(a,b,c){return(a=e(a,!0))[b]||(a[b]=c)},clear:f,Z:function(){return b+++c}}},a.b("utils.domData",a.a.g),a.b("utils.domData.clear",a.a.g.clear),a.a.K=new function(){function b(b,c){var d=a.a.g.get(b,e);return d===n&&c&&(d=[],a.a.g.set(b,e,d)),d}function c(c){if(e=b(c,!1))for(var e=e.slice(0),k=0;k<e.length;k++)e[k](c);a.a.g.clear(c),a.a.K.cleanExternalData(c),g[c.nodeType]&&d(c.childNodes,!0)}function d(b,d){for(var l,e=[],f=0;f<b.length;f++)if((!d||8===b[f].nodeType)&&(c(e[e.length]=l=b[f]),b[f]!==l))for(;f--&&-1==a.a.A(e,b[f]););}var e=a.a.g.Z(),f={1:!0,8:!0,9:!0},g={1:!0,9:!0};return{za:function(a,c){if("function"!=typeof c)throw Error("Callback must be a function");b(a,!0).push(c)},yb:function(c,d){var f=b(c,!1);f&&(a.a.Pa(f,d),0==f.length&&a.a.g.set(c,e,n))},oa:function(b){return a.u.G((function(){f[b.nodeType]&&(c(b),g[b.nodeType]&&d(b.getElementsByTagName("*")))})),b},removeNode:function(b){a.oa(b),b.parentNode&&b.parentNode.removeChild(b)},cleanExternalData:function(a){v&&"function"==typeof v.cleanData&&v.cleanData([a])}}},a.oa=a.a.K.oa,a.removeNode=a.a.K.removeNode,a.b("cleanNode",a.oa),a.b("removeNode",a.removeNode),a.b("utils.domNodeDisposal",a.a.K),a.b("utils.domNodeDisposal.addDisposeCallback",a.a.K.za),a.b("utils.domNodeDisposal.removeDisposeCallback",a.a.K.yb),b=[0,"",""],f={thead:c=[1,"<table>","</table>"],tbody:c,tfoot:c,tr:[2,"<table><tbody>","</tbody></table>"],td:d=[3,"<table><tbody><tr>","</tr></tbody></table>"],th:d,option:e=[1,"<select multiple='multiple'>","</select>"],optgroup:e},g=8>=a.a.W,a.a.ua=function(c,d){var e;if(v){if(v.parseHTML)e=v.parseHTML(c,d)||[];else if((e=v.clean([c],d))&&e[0]){for(var l=e[0];l.parentNode&&11!==l.parentNode.nodeType;)l=l.parentNode;l.parentNode&&l.parentNode.removeChild(l)}}else{(e=d)||(e=w),l=e.parentWindow||e.defaultView||A;var t,p=a.a.Db(c).toLowerCase(),q=e.createElement("div");for(t=(p=p.match(/^(?:\x3c!--.*?--\x3e\s*?)*?<([a-z]+)[\s>]/))&&f[p[1]]||b,p=t[0],t="ignored<div>"+t[1]+c+t[2]+"</div>","function"==typeof l.innerShiv?q.appendChild(l.innerShiv(t)):(g&&e.body.appendChild(q),q.innerHTML=t,g&&q.parentNode.removeChild(q));p--;)q=q.lastChild;e=a.a.la(q.lastChild.childNodes)}return e},a.a.Md=function(b,c){var d=a.a.ua(b,c);return d.length&&d[0].parentElement||a.a.Yb(d)},a.a.fc=function(b,c){if(a.a.Tb(b),null!==(c=a.a.f(c))&&c!==n)if("string"!=typeof c&&(c=c.toString()),v)v(b).html(c);else for(var d=a.a.ua(c,b.ownerDocument),e=0;e<d.length;e++)b.appendChild(d[e])},a.b("utils.parseHtmlFragment",a.a.ua),a.b("utils.setHtml",a.a.fc),a.aa=function(){var c={};return{Xb:function(a){if("function"!=typeof a)throw Error("You can only pass a function to ko.memoization.memoize()");var b=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);return c[b]=a,"\x3c!--[ko_memo:"+b+"]--\x3e"},bd:function(a,b){var f=c[a];if(f===n)throw Error("Couldn't find any memo with ID "+a+". Perhaps it's already been unmemoized.");try{return f.apply(null,b||[]),!0}finally{delete c[a]}},cd:function(c,e){var f=[];!function b(c,e){if(c)if(8==c.nodeType)null!=(f=a.aa.Uc(c.nodeValue))&&e.push({ud:c,Kd:f});else if(1==c.nodeType)for(var f=0,g=c.childNodes,h=g.length;f<h;f++)b(g[f],e)}(c,f);for(var g=0,h=f.length;g<h;g++){var m=f[g].ud,k=[m];e&&a.a.Nb(k,e),a.aa.bd(f[g].Kd,k),m.nodeValue="",m.parentNode&&m.parentNode.removeChild(m)}},Uc:function(a){return(a=a.match(/^\[ko_memo\:(.*?)\]$/))?a[1]:null}}}(),a.b("memoization",a.aa),a.b("memoization.memoize",a.aa.Xb),a.b("memoization.unmemoize",a.aa.bd),a.b("memoization.parseMemoText",a.aa.Uc),a.b("memoization.unmemoizeDomNodeAndDescendants",a.aa.cd),a.na=function(){function b(){if(f)for(var d,b=f,c=0;h<f;)if(d=e[h++]){if(h>b){if(5e3<=++c){h=f,a.a.Gc(Error("'Too much recursion' after processing "+c+" task groups."));break}b=f}try{d()}catch(p){a.a.Gc(p)}}}function c(){b(),h=f=e.length=0}var e=[],f=0,g=1,h=0;return{scheduler:A.MutationObserver?function(a){var b=w.createElement("div");return new MutationObserver(a).observe(b,{attributes:!0}),function(){b.classList.toggle("foo")}}(c):w&&"onreadystatechange"in w.createElement("script")?function(a){var b=w.createElement("script");b.onreadystatechange=function(){b.onreadystatechange=null,w.documentElement.removeChild(b),b=null,a()},w.documentElement.appendChild(b)}:function(a){setTimeout(a,0)},zb:function(b){return f||a.na.scheduler(c),e[f++]=b,g++},cancel:function(a){(a-=g-f)>=h&&a<f&&(e[a]=null)},resetForTesting:function(){var a=f-h;return h=f=e.length=0,a},Sd:b}}(),a.b("tasks",a.na),a.b("tasks.schedule",a.na.zb),a.b("tasks.runEarly",a.na.Sd),a.Ta={throttle:function(b,c){b.throttleEvaluation=c;var d=null;return a.$({read:b,write:function(e){clearTimeout(d),d=a.a.setTimeout((function(){b(e)}),c)}})},rateLimit:function(a,c){var d,e,f;"number"==typeof c?d=c:(d=c.timeout,e=c.method),a.Hb=!1,f="function"==typeof e?e:"notifyWhenChangesStop"==e?Y:X,a.ub((function(a){return f(a,d,c)}))},deferred:function(b,c){if(!0!==c)throw Error("The 'deferred' extender only accepts the value 'true', because it is not supported to turn deferral off once enabled.");b.Hb||(b.Hb=!0,b.ub((function(c){var e,f=!1;return function(){if(!f){a.na.cancel(e),e=a.na.zb(c);try{f=!0,b.notifySubscribers(n,"dirty")}finally{f=!1}}}})))},notify:function(a,c){a.equalityComparer="always"==c?null:K}};var W={undefined:1,boolean:1,number:1,string:1};a.b("extenders",a.Ta),a.ic=function(b,c,d){this.da=b,this.lc=c,this.mc=d,this.Ib=!1,this.fb=this.Jb=null,a.L(this,"dispose",this.s),a.L(this,"disposeWhenNodeIsRemoved",this.l)},a.ic.prototype.s=function(){this.Ib||(this.fb&&a.a.K.yb(this.Jb,this.fb),this.Ib=!0,this.mc(),this.da=this.lc=this.mc=this.Jb=this.fb=null)},a.ic.prototype.l=function(b){this.Jb=b,a.a.K.za(b,this.fb=this.s.bind(this))},a.T=function(){a.a.Ab(this,D),D.qb(this)};var D={qb:function(a){a.U={change:[]},a.sc=1},subscribe:function(b,c,d){var e=this;d=d||"change";var f=new a.ic(e,c?b.bind(c):b,(function(){a.a.Pa(e.U[d],f),e.hb&&e.hb(d)}));return e.Qa&&e.Qa(d),e.U[d]||(e.U[d]=[]),e.U[d].push(f),f},notifySubscribers:function(b,c){if("change"===(c=c||"change")&&this.Gb(),this.Wa(c)){var d="change"===c&&this.ed||this.U[c].slice(0);try{a.u.xc();for(var f,e=0;f=d[e];++e)f.Ib||f.lc(b)}finally{a.u.end()}}},ob:function(){return this.sc},Dd:function(a){return this.ob()!==a},Gb:function(){++this.sc},ub:function(b){var e,f,g,h,m,c=this,d=a.O(c);c.gb||(c.gb=c.notifySubscribers,c.notifySubscribers=Z);var k=b((function(){c.Ja=!1,d&&h===c&&(h=c.nc?c.nc():c());var a=f||m&&c.sb(g,h);m=f=e=!1,a&&c.gb(g=h)}));c.qc=function(a,b){b&&c.Ja||(m=!b),c.ed=c.U.change.slice(0),c.Ja=e=!0,h=a,k()},c.pc=function(a){e||(g=a,c.gb(a,"beforeChange"))},c.rc=function(){m=!0},c.gd=function(){c.sb(g,c.v(!0))&&(f=!0)}},Wa:function(a){return this.U[a]&&this.U[a].length},Bd:function(b){if(b)return this.U[b]&&this.U[b].length||0;var c=0;return a.a.P(this.U,(function(a,b){"dirty"!==a&&(c+=b.length)})),c},sb:function(a,c){return!this.equalityComparer||!this.equalityComparer(a,c)},toString:function(){return"[object Object]"},extend:function(b){var c=this;return b&&a.a.P(b,(function(b,e){var f=a.Ta[b];"function"==typeof f&&(c=f(c,e)||c)})),c}};a.L(D,"init",D.qb),a.L(D,"subscribe",D.subscribe),a.L(D,"extend",D.extend),a.L(D,"getSubscriptionsCount",D.Bd),a.a.Ba&&a.a.setPrototypeOf(D,Function.prototype),a.T.fn=D,a.Qc=function(a){return null!=a&&"function"==typeof a.subscribe&&"function"==typeof a.notifySubscribers},a.b("subscribable",a.T),a.b("isSubscribable",a.Qc),a.S=a.u=function(){function b(a){d.push(e),e=a}function c(){e=d.pop()}var e,d=[],f=0;return{xc:b,end:c,cc:function(b){if(e){if(!a.Qc(b))throw Error("Only subscribable things can act as dependencies");e.od.call(e.pd,b,b.fd||(b.fd=++f))}},G:function(a,d,e){try{return b(),a.apply(d,e||[])}finally{c()}},qa:function(){if(e)return e.o.qa()},Va:function(){if(e)return e.o.Va()},Ya:function(){if(e)return e.Ya},o:function(){if(e)return e.o}}}(),a.b("computedContext",a.S),a.b("computedContext.getDependenciesCount",a.S.qa),a.b("computedContext.getDependencies",a.S.Va),a.b("computedContext.isInitial",a.S.Ya),a.b("computedContext.registerDependency",a.S.cc),a.b("ignoreDependencies",a.Yd=a.u.G);var I=a.a.Da("_latestValue");a.ta=function(b){function c(){return 0<arguments.length?(c.sb(c[I],arguments[0])&&(c.ya(),c[I]=arguments[0],c.xa()),this):(a.u.cc(c),c[I])}return c[I]=b,a.a.Ba||a.a.extend(c,a.T.fn),a.T.fn.qb(c),a.a.Ab(c,F),a.options.deferUpdates&&a.Ta.deferred(c,!0),c};var F={equalityComparer:K,v:function(){return this[I]},xa:function(){this.notifySubscribers(this[I],"spectate"),this.notifySubscribers(this[I])},ya:function(){this.notifySubscribers(this[I],"beforeChange")}};a.a.Ba&&a.a.setPrototypeOf(F,a.T.fn);var G=a.ta.Ma="__ko_proto__";F[G]=a.ta,a.O=function(b){if((b="function"==typeof b&&b[G])&&b!==F[G]&&b!==a.o.fn[G])throw Error("Invalid object that looks like an observable; possibly from another Knockout instance");return!!b},a.Za=function(b){return"function"==typeof b&&(b[G]===F[G]||b[G]===a.o.fn[G]&&b.Nc)},a.b("observable",a.ta),a.b("isObservable",a.O),a.b("isWriteableObservable",a.Za),a.b("isWritableObservable",a.Za),a.b("observable.fn",F),a.L(F,"peek",F.v),a.L(F,"valueHasMutated",F.xa),a.L(F,"valueWillMutate",F.ya),a.Ha=function(b){if("object"!=typeof(b=b||[])||!("length"in b))throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");return b=a.ta(b),a.a.Ab(b,a.Ha.fn),b.extend({trackArrayChanges:!0})},a.Ha.fn={remove:function(b){for(var c=this.v(),d=[],e="function"!=typeof b||a.O(b)?function(a){return a===b}:b,f=0;f<c.length;f++){var g=c[f];if(e(g)){if(0===d.length&&this.ya(),c[f]!==g)throw Error("Array modified during remove; cannot remove item");d.push(g),c.splice(f,1),f--}}return d.length&&this.xa(),d},removeAll:function(b){if(b===n){var c=this.v(),d=c.slice(0);return this.ya(),c.splice(0,c.length),this.xa(),d}return b?this.remove((function(c){return 0<=a.a.A(b,c)})):[]},destroy:function(b){var c=this.v(),d="function"!=typeof b||a.O(b)?function(a){return a===b}:b;this.ya();for(var e=c.length-1;0<=e;e--){var f=c[e];d(f)&&(f._destroy=!0)}this.xa()},destroyAll:function(b){return b===n?this.destroy((function(){return!0})):b?this.destroy((function(c){return 0<=a.a.A(b,c)})):[]},indexOf:function(b){var c=this();return a.a.A(c,b)},replace:function(a,c){var d=this.indexOf(a);0<=d&&(this.ya(),this.v()[d]=c,this.xa())},sorted:function(a){var c=this().slice(0);return a?c.sort(a):c.sort()},reversed:function(){return this().slice(0).reverse()}},a.a.Ba&&a.a.setPrototypeOf(a.Ha.fn,a.ta.fn),a.a.D("pop push reverse shift sort splice unshift".split(" "),(function(b){a.Ha.fn[b]=function(){var a=this.v();this.ya(),this.zc(a,b,arguments);var d=a[b].apply(a,arguments);return this.xa(),d===a?this:d}})),a.a.D(["slice"],(function(b){a.Ha.fn[b]=function(){var a=this();return a[b].apply(a,arguments)}})),a.Pc=function(b){return a.O(b)&&"function"==typeof b.remove&&"function"==typeof b.push},a.b("observableArray",a.Ha),a.b("isObservableArray",a.Pc),a.Ta.trackArrayChanges=function(b,c){function d(){function c(){if(m){var e,d=[].concat(b.v()||[]);b.Wa("arrayChange")&&((!f||1<m)&&(f=a.a.Pb(k,d,b.Ob)),e=f),k=d,f=null,m=0,e&&e.length&&b.notifySubscribers(e,"arrayChange")}}e?c():(e=!0,h=b.subscribe((function(){++m}),null,"spectate"),k=[].concat(b.v()||[]),f=null,g=b.subscribe(c))}if(b.Ob={},c&&"object"==typeof c&&a.a.extend(b.Ob,c),b.Ob.sparse=!0,!b.zc){var g,h,k,e=!1,f=null,m=0,l=b.Qa,p=b.hb;b.Qa=function(a){l&&l.call(b,a),"arrayChange"===a&&d()},b.hb=function(a){p&&p.call(b,a),"arrayChange"!==a||b.Wa("arrayChange")||(g&&g.s(),h&&h.s(),h=g=null,e=!1,k=n)},b.zc=function(b,c,d){function l(a,b,c){return k[k.length]={status:a,value:b,index:c}}if(e&&!m){var k=[],p=b.length,g=d.length,h=0;switch(c){case"push":h=p;case"unshift":for(c=0;c<g;c++)l("added",d[c],h+c);break;case"pop":h=p-1;case"shift":p&&l("deleted",b[h],h);break;case"splice":c=Math.min(Math.max(0,0>d[0]?p+d[0]:d[0]),p),p=1===g?p:Math.min(c+(d[1]||0),p),g=c+g-2,h=Math.max(p,g);for(var U=[],L=[],n=2;c<h;++c,++n)c<p&&L.push(l("deleted",b[c],c)),c<g&&U.push(l("added",d[n],c));a.a.Kc(L,U);break;default:return}f=k}}}};var r=a.a.Da("_state");a.o=a.$=function(b,c,d){function e(){if(0<arguments.length){if("function"!=typeof f)throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return f.apply(g.nb,arguments),this}return g.ra||a.u.cc(e),(g.ka||g.J&&e.Xa())&&e.ha(),g.X}if("object"==typeof b?d=b:(d=d||{},b&&(d.read=b)),"function"!=typeof d.read)throw Error("Pass a function that returns the value of the ko.computed");var f=d.write,g={X:n,sa:!0,ka:!0,rb:!1,jc:!1,ra:!1,wb:!1,J:!1,Wc:d.read,nb:c||d.owner,l:d.disposeWhenNodeIsRemoved||d.l||null,Sa:d.disposeWhen||d.Sa,Rb:null,I:{},V:0,Ic:null};return e[r]=g,e.Nc="function"==typeof f,a.a.Ba||a.a.extend(e,a.T.fn),a.T.fn.qb(e),a.a.Ab(e,C),d.pure?(g.wb=!0,g.J=!0,a.a.extend(e,da)):d.deferEvaluation&&a.a.extend(e,ea),a.options.deferUpdates&&a.Ta.deferred(e,!0),g.l&&(g.jc=!0,g.l.nodeType||(g.l=null)),g.J||d.deferEvaluation||e.ha(),g.l&&e.ja()&&a.a.K.za(g.l,g.Rb=function(){e.s()}),e};var C={equalityComparer:K,qa:function(){return this[r].V},Va:function(){var b=[];return a.a.P(this[r].I,(function(a,d){b[d.Ka]=d.da})),b},Vb:function(b){if(!this[r].V)return!1;var c=this.Va();return-1!==a.a.A(c,b)||!!a.a.Lb(c,(function(a){return a.Vb&&a.Vb(b)}))},uc:function(a,c,d){if(this[r].wb&&c===this)throw Error("A 'pure' computed must not be called recursively");this[r].I[a]=d,d.Ka=this[r].V++,d.La=c.ob()},Xa:function(){var a,c,d=this[r].I;for(a in d)if(Object.prototype.hasOwnProperty.call(d,a)&&(c=d[a],this.Ia&&c.da.Ja||c.da.Dd(c.La)))return!0},Jd:function(){this.Ia&&!this[r].rb&&this.Ia(!1)},ja:function(){var a=this[r];return a.ka||0<a.V},Rd:function(){this.Ja?this[r].ka&&(this[r].sa=!0):this.Hc()},$c:function(a){if(a.Hb){var c=a.subscribe(this.Jd,this,"dirty"),d=a.subscribe(this.Rd,this);return{da:a,s:function(){c.s(),d.s()}}}return a.subscribe(this.Hc,this)},Hc:function(){var b=this,c=b.throttleEvaluation;c&&0<=c?(clearTimeout(this[r].Ic),this[r].Ic=a.a.setTimeout((function(){b.ha(!0)}),c)):b.Ia?b.Ia(!0):b.ha(!0)},ha:function(b){var c=this[r],d=c.Sa,e=!1;if(!c.rb&&!c.ra){if(c.l&&!a.a.Sb(c.l)||d&&d()){if(!c.jc)return void this.s()}else c.jc=!1;c.rb=!0;try{e=this.zd(b)}finally{c.rb=!1}return e}},zd:function(b){var c=this[r],d=!1,e=c.wb?n:!c.V;d={qd:this,mb:c.I,Qb:c.V},a.u.xc({pd:d,od:ba,o:this,Ya:e}),c.I={},c.V=0;var f=this.yd(c,d);return c.V?d=this.sb(c.X,f):(this.s(),d=!0),d&&(c.J?this.Gb():this.notifySubscribers(c.X,"beforeChange"),c.X=f,this.notifySubscribers(c.X,"spectate"),!c.J&&b&&this.notifySubscribers(c.X),this.rc&&this.rc()),e&&this.notifySubscribers(c.X,"awake"),d},yd:function(b,c){try{var d=b.Wc;return b.nb?d.call(b.nb):d()}finally{a.u.end(),c.Qb&&!b.J&&a.a.P(c.mb,aa),b.sa=b.ka=!1}},v:function(a){var c=this[r];return(c.ka&&(a||!c.V)||c.J&&this.Xa())&&this.ha(),c.X},ub:function(b){a.T.fn.ub.call(this,b),this.nc=function(){return this[r].J||(this[r].sa?this.ha():this[r].ka=!1),this[r].X},this.Ia=function(a){this.pc(this[r].X),this[r].ka=!0,a&&(this[r].sa=!0),this.qc(this,!a)}},s:function(){var b=this[r];!b.J&&b.I&&a.a.P(b.I,(function(a,b){b.s&&b.s()})),b.l&&b.Rb&&a.a.K.yb(b.l,b.Rb),b.I=n,b.V=0,b.ra=!0,b.sa=!1,b.ka=!1,b.J=!1,b.l=n,b.Sa=n,b.Wc=n,this.Nc||(b.nb=n)}},da={Qa:function(b){var c=this,d=c[r];if(!d.ra&&d.J&&"change"==b){if(d.J=!1,d.sa||c.Xa())d.I=null,d.V=0,c.ha()&&c.Gb();else{var e=[];a.a.P(d.I,(function(a,b){e[b.Ka]=a})),a.a.D(e,(function(a,b){var e=d.I[a],m=c.$c(e.da);m.Ka=b,m.La=e.La,d.I[a]=m})),c.Xa()&&c.ha()&&c.Gb()}d.ra||c.notifySubscribers(d.X,"awake")}},hb:function(b){var c=this[r];c.ra||"change"!=b||this.Wa("change")||(a.a.P(c.I,(function(a,b){b.s&&(c.I[a]={da:b.da,Ka:b.Ka,La:b.La},b.s())})),c.J=!0,this.notifySubscribers(n,"asleep"))},ob:function(){var b=this[r];return b.J&&(b.sa||this.Xa())&&this.ha(),a.T.fn.ob.call(this)}},ea={Qa:function(a){"change"!=a&&"beforeChange"!=a||this.v()}};a.a.Ba&&a.a.setPrototypeOf(C,a.T.fn);var N=a.ta.Ma;C[N]=a.o,a.Oc=function(a){return"function"==typeof a&&a[N]===C[N]},a.Fd=function(b){return a.Oc(b)&&b[r]&&b[r].wb},a.b("computed",a.o),a.b("dependentObservable",a.o),a.b("isComputed",a.Oc),a.b("isPureComputed",a.Fd),a.b("computed.fn",C),a.L(C,"peek",C.v),a.L(C,"dispose",C.s),a.L(C,"isActive",C.ja),a.L(C,"getDependenciesCount",C.qa),a.L(C,"getDependencies",C.Va),a.xb=function(b,c){return"function"==typeof b?a.o(b,c,{pure:!0}):((b=a.a.extend({},b)).pure=!0,a.o(b,c))},a.b("pureComputed",a.xb),function(){function b(a,f,g){if(g=g||new d,"object"!=typeof(a=f(a))||null===a||a===n||a instanceof RegExp||a instanceof Date||a instanceof String||a instanceof Number||a instanceof Boolean)return a;var h=a instanceof Array?[]:{};return g.save(a,h),function(a,b){if(a instanceof Array){for(var c=0;c<a.length;c++)b(c);"function"==typeof a.toJSON&&b("toJSON")}else for(c in a)b(c)}(a,(function(c){var d=f(a[c]);switch(typeof d){case"boolean":case"number":case"string":case"function":h[c]=d;break;case"object":case"undefined":var l=g.get(d);h[c]=l!==n?l:b(d,f,g)}})),h}function d(){this.keys=[],this.values=[]}a.ad=function(c){if(0==arguments.length)throw Error("When calling ko.toJS, pass the object you want to convert.");return b(c,(function(b){for(var c=0;a.O(b)&&10>c;c++)b=b();return b}))},a.toJSON=function(b,c,d){return b=a.ad(b),a.a.hc(b,c,d)},d.prototype={constructor:d,save:function(b,c){var d=a.a.A(this.keys,b);0<=d?this.values[d]=c:(this.keys.push(b),this.values.push(c))},get:function(b){return 0<=(b=a.a.A(this.keys,b))?this.values[b]:n}}}(),a.b("toJS",a.ad),a.b("toJSON",a.toJSON),a.Wd=function(b,c,d){function e(c){var e=a.xb(b,d).extend({ma:"always"}),h=e.subscribe((function(a){a&&(h.s(),c(a))}));return e.notifySubscribers(e.v()),h}return"function"!=typeof Promise||c?e(c.bind(d)):new Promise(e)},a.b("when",a.Wd),a.w={M:function(b){switch(a.a.R(b)){case"option":return!0===b.__ko__hasDomDataOptionValue__?a.a.g.get(b,a.c.options.$b):7>=a.a.W?b.getAttributeNode("value")&&b.getAttributeNode("value").specified?b.value:b.text:b.value;case"select":return 0<=b.selectedIndex?a.w.M(b.options[b.selectedIndex]):n;default:return b.value}},cb:function(b,c,d){switch(a.a.R(b)){case"option":"string"==typeof c?(a.a.g.set(b,a.c.options.$b,n),"__ko__hasDomDataOptionValue__"in b&&delete b.__ko__hasDomDataOptionValue__,b.value=c):(a.a.g.set(b,a.c.options.$b,c),b.__ko__hasDomDataOptionValue__=!0,b.value="number"==typeof c?c:"");break;case"select":""!==c&&null!==c||(c=n);for(var h,e=-1,f=0,g=b.options.length;f<g;++f)if((h=a.w.M(b.options[f]))==c||""===h&&c===n){e=f;break}(d||0<=e||c===n&&1<b.size)&&(b.selectedIndex=e,6===a.a.W&&a.a.setTimeout((function(){b.selectedIndex=e}),0));break;default:null!==c&&c!==n||(c=""),b.value=c}}},a.b("selectExtensions",a.w),a.b("selectExtensions.readValue",a.w.M),a.b("selectExtensions.writeValue",a.w.cb),a.m=function(){function b(b){123===(b=a.a.Db(b)).charCodeAt(0)&&(b=b.slice(1,-1));var p,c=[],d=(b+="\n,").match(e),q=[],h=0;if(1<d.length){for(var B,x=0;B=d[x];++x){var u=B.charCodeAt(0);if(44===u){if(0>=h){c.push(p&&q.length?{key:p,value:q.join("")}:{unknown:p||q.join("")}),p=h=0,q=[];continue}}else if(58===u){if(!h&&!p&&1===q.length){p=q.pop();continue}}else{if(47===u&&1<B.length&&(47===B.charCodeAt(1)||42===B.charCodeAt(1)))continue;47===u&&x&&1<B.length?(u=d[x-1].match(f))&&!g[u[0]]&&(d=(b=b.substr(b.indexOf(B)+1)).match(e),x=-1,B="/"):40===u||123===u||91===u?++h:41===u||125===u||93===u?--h:p||q.length||34!==u&&39!==u||(B=B.slice(1,-1))}q.push(B)}if(0<h)throw Error("Unbalanced parentheses, braces, or brackets")}return c}var c=["true","false","null","undefined"],d=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,e=RegExp("\"(?:\\\\.|[^\"])*\"|'(?:\\\\.|[^'])*'|`(?:\\\\.|[^`])*`|/\\*(?:[^*]|\\*+[^*/])*\\*+/|//.*\n|/(?:\\\\.|[^/])+/w*|[^\\s:,/][^,\"'`{}()/:[\\]]*[^\\s,\"'`{}()/:[\\]]|[^\\s]","g"),f=/[\])"'A-Za-z0-9_$]+$/,g={in:1,return:1,typeof:1},h={};return{Ra:[],wa:h,ac:b,vb:function(e,f){function l(b,e){var f;if(!x){var k=a.getBindingHandler(b);if(k&&k.preprocess&&!(e=k.preprocess(e,b,l)))return;(k=h[b])&&(f=e,0<=a.a.A(c,f)?f=!1:(k=f.match(d),f=null!==k&&(k[1]?"Object("+k[1]+")"+k[2]:f)),k=f),k&&q.push("'"+("string"==typeof h[b]?h[b]:b)+"':function(_z){"+f+"=_z}")}g&&(e="function(){return "+e+" }"),p.push("'"+b+"':"+e)}var p=[],q=[],g=(f=f||{}).valueAccessors,x=f.bindingParams,B="string"==typeof e?b(e):e;return a.a.D(B,(function(a){l(a.key||a.unknown,a.value)})),q.length&&l("_ko_property_writers","{"+q.join(",")+" }"),p.join(",")},Id:function(a,b){for(var c=0;c<a.length;c++)if(a[c].key==b)return!0;return!1},eb:function(b,c,d,e,f){b&&a.O(b)?!a.Za(b)||f&&b.v()===e||b(e):(b=c.get("_ko_property_writers"))&&b[d]&&b[d](e)}}}(),a.b("expressionRewriting",a.m),a.b("expressionRewriting.bindingRewriteValidators",a.m.Ra),a.b("expressionRewriting.parseObjectLiteral",a.m.ac),a.b("expressionRewriting.preProcessBindings",a.m.vb),a.b("expressionRewriting._twoWayBindings",a.m.wa),a.b("jsonExpressionRewriting",a.m),a.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",a.m.vb),function(){function b(a){return 8==a.nodeType&&g.test(f?a.text:a.nodeValue)}function c(a){return 8==a.nodeType&&h.test(f?a.text:a.nodeValue)}function d(d,e){for(var f=d,h=1,g=[];f=f.nextSibling;){if(c(f)&&(a.a.g.set(f,k,!0),0==--h))return g;g.push(f),b(f)&&h++}if(!e)throw Error("Cannot find closing comment tag to match: "+d.nodeValue);return null}function e(a,b){var c=d(a,b);return c?0<c.length?c[c.length-1].nextSibling:a.nextSibling:null}var f=w&&"\x3c!--test--\x3e"===w.createComment("test").text,g=f?/^\x3c!--\s*ko(?:\s+([\s\S]+))?\s*--\x3e$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,h=f?/^\x3c!--\s*\/ko\s*--\x3e$/:/^\s*\/ko\s*$/,m={ul:!0,ol:!0},k="__ko_matchedEndComment__";a.h={ea:{},childNodes:function(a){return b(a)?d(a):a.childNodes},Ea:function(c){if(b(c))for(var d=0,e=(c=a.h.childNodes(c)).length;d<e;d++)a.removeNode(c[d]);else a.a.Tb(c)},va:function(c,d){if(b(c)){a.h.Ea(c);for(var e=c.nextSibling,f=0,k=d.length;f<k;f++)e.parentNode.insertBefore(d[f],e)}else a.a.va(c,d)},Vc:function(a,c){var d;b(a)?(d=a.nextSibling,a=a.parentNode):d=a.firstChild,d?c!==d&&a.insertBefore(c,d):a.appendChild(c)},Wb:function(c,d,e){e?(e=e.nextSibling,b(c)&&(c=c.parentNode),e?d!==e&&c.insertBefore(d,e):c.appendChild(d)):a.h.Vc(c,d)},firstChild:function(a){if(b(a))return!a.nextSibling||c(a.nextSibling)?null:a.nextSibling;if(a.firstChild&&c(a.firstChild))throw Error("Found invalid end comment, as the first child of "+a);return a.firstChild},nextSibling:function(d){if(b(d)&&(d=e(d)),d.nextSibling&&c(d.nextSibling)){var f=d.nextSibling;if(c(f)&&!a.a.g.get(f,k))throw Error("Found end comment without a matching opening comment, as child of "+d);return null}return d.nextSibling},Cd:b,Vd:function(a){return(a=(f?a.text:a.nodeValue).match(g))?a[1]:null},Sc:function(d){if(m[a.a.R(d)]){var f=d.firstChild;if(f)do{if(1===f.nodeType){var k,h=null;if(k=f.firstChild)do{if(h)h.push(k);else if(b(k)){var g=e(k,!0);g?k=g:h=[k]}else c(k)&&(h=[k])}while(k=k.nextSibling);if(k=h)for(h=f.nextSibling,g=0;g<k.length;g++)h?d.insertBefore(k[g],h):d.appendChild(k[g])}}while(f=f.nextSibling)}}}}(),a.b("virtualElements",a.h),a.b("virtualElements.allowedBindings",a.h.ea),a.b("virtualElements.emptyNode",a.h.Ea),a.b("virtualElements.insertAfter",a.h.Wb),a.b("virtualElements.prepend",a.h.Vc),a.b("virtualElements.setDomNodeChildren",a.h.va),a.ga=function(){this.nd={}},a.a.extend(a.ga.prototype,{nodeHasBindings:function(b){switch(b.nodeType){case 1:return null!=b.getAttribute("data-bind")||a.j.getComponentNameForNode(b);case 8:return a.h.Cd(b);default:return!1}},getBindings:function(b,c){var d=(d=this.getBindingsString(b,c))?this.parseBindingsString(d,c,b):null;return a.j.tc(d,b,c,!1)},getBindingAccessors:function(b,c){var d=(d=this.getBindingsString(b,c))?this.parseBindingsString(d,c,b,{valueAccessors:!0}):null;return a.j.tc(d,b,c,!0)},getBindingsString:function(b){switch(b.nodeType){case 1:return b.getAttribute("data-bind");case 8:return a.h.Vd(b);default:return null}},parseBindingsString:function(b,c,d,e){try{var h,f=this.nd,g=b+(e&&e.valueAccessors||"");if(!(h=f[g])){var m,k="with($context){with($data||{}){return{"+a.m.vb(b,e)+"}}}";m=new Function("$context","$element",k),h=f[g]=m}return h(c,d)}catch(l){throw l.message="Unable to parse bindings.\nBindings value: "+b+"\nMessage: "+l.message,l}}}),a.ga.instance=new a.ga,a.b("bindingProvider",a.ga),function(){function b(b){var c=(b=a.a.g.get(b,z))&&b.N;c&&(b.N=null,c.Tc())}function c(c,d,e){this.node=c,this.yc=d,this.kb=[],this.H=!1,d.N||a.a.K.za(c,b),e&&e.N&&(e.N.kb.push(c),this.Kb=e)}function d(a){return function(){return a}}function e(a){return a()}function f(b){return a.a.Ga(a.u.G(b),(function(a,c){return function(){return b()[c]}}))}function g(b,c,e){return"function"==typeof b?f(b.bind(null,c,e)):a.a.Ga(b,d)}function h(a,b){return f(this.getBindings.bind(this,a,b))}function m(b,c){var d=a.h.firstChild(c);if(d){var e,f=a.ga.instance,l=f.preprocessNode;if(l){for(;e=d;)d=a.h.nextSibling(e),l.call(f,e);d=a.h.firstChild(c)}for(;e=d;)d=a.h.nextSibling(e),k(b,e)}a.i.ma(c,a.i.H)}function k(b,c){var d=b,e=1===c.nodeType;e&&a.h.Sc(c),(e||a.ga.instance.nodeHasBindings(c))&&(d=p(c,null,b).bindingContextForDescendants),d&&!u[a.a.R(c)]&&m(d,c)}function p(b,c,d){var g,f=a.a.g.Ub(b,z,{}),k=f.hd;if(!c){if(k)throw Error("You cannot apply bindings multiple times to the same element.");f.hd=!0}if(k||(f.context=d),f.Zb||(f.Zb={}),c&&"function"!=typeof c)g=c;else{var p=a.ga.instance,q=p.getBindingAccessors||h,m=a.$((function(){return(g=c?c(d,b):q.call(p,b,d))&&(d[t]&&d[t](),d[B]&&d[B]()),g}),null,{l:b});g&&m.ja()||(m=null)}var u,x=d;if(g){var J=function(){return a.a.Ga(m?m():g,e)},r=m?function(a){return function(){return e(m()[a])}}:function(a){return g[a]};J.get=function(a){return g[a]&&e(r(a))},J.has=function(a){return a in g},a.i.H in g&&a.i.subscribe(b,a.i.H,(function(){var c=(0,g[a.i.H])();if(c){var d=a.h.childNodes(b);d.length&&c(d,a.Ec(d[0]))}})),a.i.pa in g&&(x=a.i.Cb(b,d),a.i.subscribe(b,a.i.pa,(function(){var c=(0,g[a.i.pa])();c&&a.h.firstChild(b)&&c(b)}))),f=function(b){var c=[],d={},e=[];return a.a.P(b,(function ca(f){if(!d[f]){var k=a.getBindingHandler(f);k&&(k.after&&(e.push(f),a.a.D(k.after,(function(c){if(b[c]){if(-1!==a.a.A(e,c))throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+e.join(", "));ca(c)}})),e.length--),c.push({key:f,Mc:k})),d[f]=!0}})),c}(g),a.a.D(f,(function(c){var d=c.Mc.init,e=c.Mc.update,f=c.key;if(8===b.nodeType&&!a.h.ea[f])throw Error("The binding '"+f+"' cannot be used with virtual elements");try{"function"==typeof d&&a.u.G((function(){var a=d(b,r(f),J,x.$data,x);if(a&&a.controlsDescendantBindings){if(u!==n)throw Error("Multiple bindings ("+u+" and "+f+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");u=f}})),"function"==typeof e&&a.$((function(){e(b,r(f),J,x.$data,x)}),null,{l:b})}catch(k){throw k.message='Unable to process binding "'+f+": "+g[f]+'"\nMessage: '+k.message,k}}))}return{shouldBindDescendants:f=u===n,bindingContextForDescendants:f&&x}}function q(b,c){return b&&b instanceof a.fa?b:new a.fa(b,n,n,c)}var t=a.a.Da("_subscribable"),x=a.a.Da("_ancestorBindingInfo"),B=a.a.Da("_dataDependency");a.c={};var u={script:!0,textarea:!0,template:!0};a.getBindingHandler=function(b){return a.c[b]};var J={};a.fa=function(b,c,d,e,f){function k(){var b=p?h():h,f=a.a.f(b);return c?(a.a.extend(l,c),x in c&&(l[x]=c[x])):(l.$parents=[],l.$root=f,l.ko=a),l[t]=q,g?f=l.$data:(l.$rawData=b,l.$data=f),d&&(l[d]=f),e&&e(l,c,f),c&&c[t]&&!a.S.o().Vb(c[t])&&c[t](),m&&(l[B]=m),l.$data}var q,l=this,g=b===J,h=g?n:b,p="function"==typeof h&&!a.O(h),m=f&&f.dataDependency;f&&f.exportDependencies?k():((q=a.xb(k)).v(),q.ja()?q.equalityComparer=null:l[t]=n)},a.fa.prototype.createChildContext=function(b,c,d,e){if(!e&&c&&"object"==typeof c&&(c=(e=c).as,d=e.extend),c&&e&&e.noChildContext){var f="function"==typeof b&&!a.O(b);return new a.fa(J,this,null,(function(a){d&&d(a),a[c]=f?b():b}),e)}return new a.fa(b,this,c,(function(a,b){a.$parentContext=b,a.$parent=b.$data,a.$parents=(b.$parents||[]).slice(0),a.$parents.unshift(a.$parent),d&&d(a)}),e)},a.fa.prototype.extend=function(b,c){return new a.fa(J,this,null,(function(c){a.a.extend(c,"function"==typeof b?b(c):b)}),c)};var z=a.a.g.Z();c.prototype.Tc=function(){this.Kb&&this.Kb.N&&this.Kb.N.sd(this.node)},c.prototype.sd=function(b){a.a.Pa(this.kb,b),!this.kb.length&&this.H&&this.Cc()},c.prototype.Cc=function(){this.H=!0,this.yc.N&&!this.kb.length&&(this.yc.N=null,a.a.K.yb(this.node,b),a.i.ma(this.node,a.i.pa),this.Tc())},a.i={H:"childrenComplete",pa:"descendantsComplete",subscribe:function(b,c,d,e,f){var k=a.a.g.Ub(b,z,{});return k.Fa||(k.Fa=new a.T),f&&f.notifyImmediately&&k.Zb[c]&&a.u.G(d,e,[b]),k.Fa.subscribe(d,e,c)},ma:function(b,c){var d=a.a.g.get(b,z);if(d&&(d.Zb[c]=!0,d.Fa&&d.Fa.notifySubscribers(b,c),c==a.i.H))if(d.N)d.N.Cc();else if(d.N===n&&d.Fa&&d.Fa.Wa(a.i.pa))throw Error("descendantsComplete event not supported for bindings on this node")},Cb:function(b,d){var e=a.a.g.Ub(b,z,{});return e.N||(e.N=new c(b,e,d[x])),d[x]==e?d:d.extend((function(a){a[x]=e}))}},a.Td=function(b){return(b=a.a.g.get(b,z))&&b.context},a.ib=function(b,c,d){return 1===b.nodeType&&a.h.Sc(b),p(b,c,q(d))},a.ld=function(b,c,d){return d=q(d),a.ib(b,g(c,d,b),d)},a.Oa=function(a,b){1!==b.nodeType&&8!==b.nodeType||m(q(a),b)},a.vc=function(a,b,c){if(!v&&A.jQuery&&(v=A.jQuery),2>arguments.length){if(!(b=w.body))throw Error("ko.applyBindings: could not find document.body; has the document been loaded?")}else if(!b||1!==b.nodeType&&8!==b.nodeType)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");k(q(a,c),b)},a.Dc=function(b){return!b||1!==b.nodeType&&8!==b.nodeType?n:a.Td(b)},a.Ec=function(b){return(b=a.Dc(b))?b.$data:n},a.b("bindingHandlers",a.c),a.b("bindingEvent",a.i),a.b("bindingEvent.subscribe",a.i.subscribe),a.b("bindingEvent.startPossiblyAsyncContentBinding",a.i.Cb),a.b("applyBindings",a.vc),a.b("applyBindingsToDescendants",a.Oa),a.b("applyBindingAccessorsToNode",a.ib),a.b("applyBindingsToNode",a.ld),a.b("contextFor",a.Dc),a.b("dataFor",a.Ec)}(),function(b){function c(c,e){var l,k=Object.prototype.hasOwnProperty.call(f,c)?f[c]:b;k?k.subscribe(e):((k=f[c]=new a.T).subscribe(e),d(c,(function(b,d){var e=!(!d||!d.synchronous);g[c]={definition:b,Gd:e},delete f[c],l||e?k.notifySubscribers(b):a.na.zb((function(){k.notifySubscribers(b)}))})),l=!0)}function d(a,b){e("getConfig",[a],(function(c){c?e("loadComponent",[a,c],(function(a){b(a,c)})):b(null,null)}))}function e(c,d,f,l){l||(l=a.j.loaders.slice(0));var g=l.shift();if(g){var q=g[c];if(q){var t=!1;if(q.apply(g,d.concat((function(a){t?f(null):null!==a?f(a):e(c,d,f,l)})))!==b&&(t=!0,!g.suppressLoaderExceptions))throw Error("Component loaders must supply values by invoking the callback, not by returning values synchronously.")}else e(c,d,f,l)}else f(null)}var f={},g={};a.j={get:function(d,e){var f=Object.prototype.hasOwnProperty.call(g,d)?g[d]:b;f?f.Gd?a.u.G((function(){e(f.definition)})):a.na.zb((function(){e(f.definition)})):c(d,e)},Bc:function(a){delete g[a]},oc:e},a.j.loaders=[],a.b("components",a.j),a.b("components.get",a.j.get),a.b("components.clearCachedDefinition",a.j.Bc)}(),function(){function b(b,c,d,e){function g(){0==--B&&e(h)}var h={},B=2,u=d.template;d=d.viewModel,u?f(c,u,(function(c){a.j.oc("loadTemplate",[b,c],(function(a){h.template=a,g()}))})):g(),d?f(c,d,(function(c){a.j.oc("loadViewModel",[b,c],(function(a){h[m]=a,g()}))})):g()}function d(b){switch(a.a.R(b)){case"script":return a.a.ua(b.text);case"textarea":return a.a.ua(b.value);case"template":if(e(b.content))return a.a.Ca(b.content.childNodes)}return a.a.Ca(b.childNodes)}function e(a){return A.DocumentFragment?a instanceof DocumentFragment:a&&11===a.nodeType}function f(a,b,c){"string"==typeof b.require?T||A.require?(T||A.require)([b.require],(function(a){a&&"object"==typeof a&&a.Xd&&a.default&&(a=a.default),c(a)})):a("Uses require, but no AMD loader is present"):c(b)}function g(a){return function(b){throw Error("Component '"+a+"': "+b)}}var h={};a.j.register=function(b,c){if(!c)throw Error("Invalid configuration for "+b);if(a.j.tb(b))throw Error("Component "+b+" is already registered");h[b]=c},a.j.tb=function(a){return Object.prototype.hasOwnProperty.call(h,a)},a.j.unregister=function(b){delete h[b],a.j.Bc(b)},a.j.Fc={getConfig:function(b,c){c(a.j.tb(b)?h[b]:null)},loadComponent:function(a,c,d){var e=g(a);f(e,c,(function(c){b(a,e,c,d)}))},loadTemplate:function(b,c,f){if(b=g(b),"string"==typeof c)f(a.a.ua(c));else if(c instanceof Array)f(c);else if(e(c))f(a.a.la(c.childNodes));else if(c.element)if(c=c.element,A.HTMLElement?c instanceof HTMLElement:c&&c.tagName&&1===c.nodeType)f(d(c));else if("string"==typeof c){var h=w.getElementById(c);h?f(d(h)):b("Cannot find element with ID "+c)}else b("Unknown element type: "+c);else b("Unknown template value: "+c)},loadViewModel:function(a,b,d){!function c(a,b,d){if("function"==typeof b)d((function(a){return new b(a)}));else if("function"==typeof b[m])d(b[m]);else if("instance"in b){var e=b.instance;d((function(){return e}))}else"viewModel"in b?c(a,b.viewModel,d):a("Unknown viewModel value: "+b)}(g(a),b,d)}};var m="createViewModel";a.b("components.register",a.j.register),a.b("components.isRegistered",a.j.tb),a.b("components.unregister",a.j.unregister),a.b("components.defaultLoader",a.j.Fc),a.j.loaders.push(a.j.Fc),a.j.dd=h}(),function(){function b(b,e){if(f=b.getAttribute("params")){var f=c.parseBindingsString(f,e,b,{valueAccessors:!0,bindingParams:!0}),g=(f=a.a.Ga(f,(function(c){return a.o(c,null,{l:b})})),a.a.Ga(f,(function(c){var e=c.v();return c.ja()?a.o({read:function(){return a.a.f(c())},write:a.Za(e)&&function(a){c()(a)},l:b}):e})));return Object.prototype.hasOwnProperty.call(g,"$raw")||(g.$raw=f),g}return{$raw:{}}}a.j.getComponentNameForNode=function(b){var c=a.a.R(b);if(a.j.tb(c)&&(-1!=c.indexOf("-")||"[object HTMLUnknownElement]"==""+b||8>=a.a.W&&b.tagName===c))return c},a.j.tc=function(c,e,f,g){if(1===e.nodeType){var h=a.j.getComponentNameForNode(e);if(h){if((c=c||{}).component)throw Error('Cannot use the "component" binding on a custom element matching a component');var m={name:h,params:b(e,f)};c.component=g?function(){return m}:m}}return c};var c=new a.ga;9>a.a.W&&(a.j.register=function(a){return function(b){return a.apply(this,arguments)}}(a.j.register),w.createDocumentFragment=function(b){return function(){var g,c=b(),f=a.j.dd;for(g in f);return c}}(w.createDocumentFragment))}(),function(){var d=0;a.c.component={init:function(e,f,g,h,m){function k(){var a=l&&l.dispose;"function"==typeof a&&a.call(l),q&&q.s(),p=l=q=null}var l,p,q,t=a.a.la(a.h.childNodes(e));return a.h.Ea(e),a.a.K.za(e,k),a.o((function(){var h,u,g=a.a.f(f());if("string"==typeof g?h=g:(h=a.a.f(g.name),u=a.a.f(g.params)),!h)throw Error("No component name specified");var n=a.i.Cb(e,m),z=p=++d;a.j.get(h,(function(d){if(p===z){if(k(),!d)throw Error("Unknown component '"+h+"'");!function(b,c,d){if(!(c=c.template))throw Error("Component '"+b+"' has no template");b=a.a.Ca(c),a.h.va(d,b)}(h,d,e);var f=function(a,b,c){var d=a.createViewModel;return d?d.call(a,b,c):b}(d,u,{element:e,templateNodes:t});d=n.createChildContext(f,{extend:function(a){a.$component=f,a.$componentTemplateNodes=t}}),f&&f.koDescendantsComplete&&(q=a.i.subscribe(e,a.i.pa,f.koDescendantsComplete,f)),l=f,a.Oa(d,e)}}))}),null,{l:e}),{controlsDescendantBindings:!0}}},a.h.ea.component=!0}();var V={class:"className",for:"htmlFor"};a.c.attr={update:function(b,c){var d=a.a.f(c())||{};a.a.P(d,(function(c,d){d=a.a.f(d);var g=c.indexOf(":"),h=(g="lookupNamespaceURI"in b&&0<g&&b.lookupNamespaceURI(c.substr(0,g)),!1===d||null===d||d===n);h?g?b.removeAttributeNS(g,c):b.removeAttribute(c):d=d.toString(),8>=a.a.W&&c in V?(c=V[c],h?b.removeAttribute(c):b[c]=d):h||(g?b.setAttributeNS(g,c,d):b.setAttribute(c,d)),"name"===c&&a.a.Yc(b,h?"":d)}))}},a.c.checked={after:["value","attr"],init:function(b,c,d){function e(){var e=b.checked,f=g();if(!a.S.Ya()&&(e||!m&&!a.S.qa())){var k=a.u.G(c);if(l){var q=p?k.v():k,z=t;t=f,z!==f?e&&(a.a.Na(q,f,!0),a.a.Na(q,z,!1)):a.a.Na(q,f,e),p&&a.Za(k)&&k(q)}else h&&(f===n?f=e:e||(f=n)),a.m.eb(k,d,"checked",f,!0)}}var g=a.xb((function(){return d.has("checkedValue")?a.a.f(d.get("checkedValue")):q?d.has("value")?a.a.f(d.get("value")):b.value:void 0})),h="checkbox"==b.type,m="radio"==b.type;if(h||m){var k=c(),l=h&&a.a.f(k)instanceof Array,p=!(l&&k.push&&k.splice),q=m||l,t=l?g():n;m&&!b.name&&a.c.uniqueName.init(b,(function(){return!0})),a.o(e,null,{l:b}),a.a.B(b,"click",e),a.o((function(){var d=a.a.f(c()),e=g();l?(b.checked=0<=a.a.A(d,e),t=e):b.checked=h&&e===n?!!d:g()===d}),null,{l:b}),k=n}}},a.m.wa.checked=!0,a.c.checkedValue={update:function(b,c){b.value=a.a.f(c())}},a.c.class={update:function(b,c){var d=a.a.Db(a.a.f(c()));a.a.Eb(b,b.__ko__cssValue,!1),b.__ko__cssValue=d,a.a.Eb(b,d,!0)}},a.c.css={update:function(b,c){var d=a.a.f(c());null!==d&&"object"==typeof d?a.a.P(d,(function(c,d){d=a.a.f(d),a.a.Eb(b,c,d)})):a.c.class.update(b,c)}},a.c.enable={update:function(b,c){var d=a.a.f(c());d&&b.disabled?b.removeAttribute("disabled"):d||b.disabled||(b.disabled=!0)}},a.c.disable={update:function(b,c){a.c.enable.update(b,(function(){return!a.a.f(c())}))}},a.c.event={init:function(b,c,d,e,f){var g=c()||{};a.a.P(g,(function(g){"string"==typeof g&&a.a.B(b,g,(function(b){var k,l=c()[g];if(l){try{var p=a.a.la(arguments);e=f.$data,p.unshift(e),k=l.apply(e,p)}finally{!0!==k&&(b.preventDefault?b.preventDefault():b.returnValue=!1)}!1===d.get(g+"Bubble")&&(b.cancelBubble=!0,b.stopPropagation&&b.stopPropagation())}}))}))}},a.c.foreach={Rc:function(b){return function(){var c=b(),d=a.a.bc(c);return d&&"number"!=typeof d.length?(a.a.f(c),{foreach:d.data,as:d.as,noChildContext:d.noChildContext,includeDestroyed:d.includeDestroyed,afterAdd:d.afterAdd,beforeRemove:d.beforeRemove,afterRender:d.afterRender,beforeMove:d.beforeMove,afterMove:d.afterMove,templateEngine:a.ba.Ma}):{foreach:c,templateEngine:a.ba.Ma}}},init:function(b,c){return a.c.template.init(b,a.c.foreach.Rc(c))},update:function(b,c,d,e,f){return a.c.template.update(b,a.c.foreach.Rc(c),d,e,f)}},a.m.Ra.foreach=!1,a.h.ea.foreach=!0,a.c.hasfocus={init:function(b,c,d){function e(e){b.__ko_hasfocusUpdating=!0;var f=b.ownerDocument;if("activeElement"in f){var g;try{g=f.activeElement}catch(l){g=f.body}e=g===b}f=c(),a.m.eb(f,d,"hasfocus",e,!0),b.__ko_hasfocusLastValue=e,b.__ko_hasfocusUpdating=!1}var f=e.bind(null,!0),g=e.bind(null,!1);a.a.B(b,"focus",f),a.a.B(b,"focusin",f),a.a.B(b,"blur",g),a.a.B(b,"focusout",g),b.__ko_hasfocusLastValue=!1},update:function(b,c){var d=!!a.a.f(c());b.__ko_hasfocusUpdating||b.__ko_hasfocusLastValue===d||(d?b.focus():b.blur(),!d&&b.__ko_hasfocusLastValue&&b.ownerDocument.body.focus(),a.u.G(a.a.Fb,null,[b,d?"focusin":"focusout"]))}},a.m.wa.hasfocus=!0,a.c.hasFocus=a.c.hasfocus,a.m.wa.hasFocus="hasfocus",a.c.html={init:function(){return{controlsDescendantBindings:!0}},update:function(b,c){a.a.fc(b,c())}},function(){function b(b,d,e){a.c[b]={init:function(b,c,h,m,k){var l,p,t,x,n,q={};if(d){m=h.get("as");var u=h.get("noChildContext");q={as:m,noChildContext:u,exportDependencies:n=!(m&&u)}}return x=(t="render"==h.get("completeOn"))||h.has(a.i.pa),a.o((function(){var r,h=a.a.f(c()),m=!e!=!h,u=!p;(n||m!==l)&&(x&&(k=a.i.Cb(b,k)),m&&(d&&!n||(q.dataDependency=a.S.o()),r=d?k.createChildContext("function"==typeof h?h:c,q):a.S.qa()?k.extend(null,q):k),u&&a.S.qa()&&(p=a.a.Ca(a.h.childNodes(b),!0)),m?(u||a.h.va(b,a.a.Ca(p)),a.Oa(r,b)):(a.h.Ea(b),t||a.i.ma(b,a.i.H)),l=m)}),null,{l:b}),{controlsDescendantBindings:!0}}},a.m.Ra[b]=!1,a.h.ea[b]=!0}b("if"),b("ifnot",!1,!0),b("with",!0)}(),a.c.let={init:function(b,c,d,e,f){return c=f.extend(c),a.Oa(c,b),{controlsDescendantBindings:!0}}},a.h.ea.let=!0;var Q={};a.c.options={init:function(b){if("select"!==a.a.R(b))throw Error("options binding applies only to SELECT elements");for(;0<b.length;)b.remove(0);return{controlsDescendantBindings:!0}},update:function(b,c,d){function e(){return a.a.jb(b.options,(function(a){return a.selected}))}function f(a,b,c){var d=typeof b;return"function"==d?b(a):"string"==d?a[b]:c}function g(c,d){if(x&&l)a.i.ma(b,a.i.H);else if(t.length){var e=0<=a.a.A(t,a.w.M(d[0]));a.a.Zc(d[0],e),x&&!e&&a.u.G(a.a.Fb,null,[b,"change"])}}var h=b.multiple,m=0!=b.length&&h?b.scrollTop:null,k=a.a.f(c()),l=d.get("valueAllowUnset")&&d.has("value"),p=d.get("optionsIncludeDestroyed");c={};var q,t=[];l||(h?t=a.a.Mb(e(),a.w.M):0<=b.selectedIndex&&t.push(a.w.M(b.options[b.selectedIndex]))),k&&(void 0===k.length&&(k=[k]),q=a.a.jb(k,(function(b){return p||b===n||null===b||!a.a.f(b._destroy)})),d.has("optionsCaption")&&null!==(k=a.a.f(d.get("optionsCaption")))&&k!==n&&q.unshift(Q));var x=!1;c.beforeRemove=function(a){b.removeChild(a)},k=g,d.has("optionsAfterRender")&&"function"==typeof d.get("optionsAfterRender")&&(k=function(b,c){g(0,c),a.u.G(d.get("optionsAfterRender"),null,[c[0],b!==Q?b:n])}),a.a.ec(b,q,(function(c,e,g){return g.length&&(t=!l&&g[0].selected?[a.w.M(g[0])]:[],x=!0),e=b.ownerDocument.createElement("option"),c===Q?(a.a.Bb(e,d.get("optionsCaption")),a.w.cb(e,n)):(g=f(c,d.get("optionsValue"),c),a.w.cb(e,a.a.f(g)),c=f(c,d.get("optionsText"),g),a.a.Bb(e,c)),[e]}),c,k),l||(h?t.length&&e().length<t.length:t.length&&0<=b.selectedIndex?a.w.M(b.options[b.selectedIndex])!==t[0]:t.length||0<=b.selectedIndex)&&a.u.G(a.a.Fb,null,[b,"change"]),(l||a.S.Ya())&&a.i.ma(b,a.i.H),a.a.wd(b),m&&20<Math.abs(m-b.scrollTop)&&(b.scrollTop=m)}},a.c.options.$b=a.a.g.Z(),a.c.selectedOptions={init:function(b,c,d){function e(){var e=c(),f=[];a.a.D(b.getElementsByTagName("option"),(function(b){b.selected&&f.push(a.w.M(b))})),a.m.eb(e,d,"selectedOptions",f)}function f(){var d=a.a.f(c()),e=b.scrollTop;d&&"number"==typeof d.length&&a.a.D(b.getElementsByTagName("option"),(function(b){var c=0<=a.a.A(d,a.w.M(b));b.selected!=c&&a.a.Zc(b,c)})),b.scrollTop=e}if("select"!=a.a.R(b))throw Error("selectedOptions binding applies only to SELECT elements");var g;a.i.subscribe(b,a.i.H,(function(){g?e():(a.a.B(b,"change",e),g=a.o(f,null,{l:b}))}),null,{notifyImmediately:!0})},update:function(){}},a.m.wa.selectedOptions=!0,a.c.style={update:function(b,c){var d=a.a.f(c()||{});a.a.P(d,(function(c,d){if(null!==(d=a.a.f(d))&&d!==n&&!1!==d||(d=""),v)v(b).css(c,d);else if(/^--/.test(c))b.style.setProperty(c,d);else{c=c.replace(/-(\w)/g,(function(a,b){return b.toUpperCase()}));var g=b.style[c];b.style[c]=d,d===g||b.style[c]!=g||isNaN(d)||(b.style[c]=d+"px")}}))}},a.c.submit={init:function(b,c,d,e,f){if("function"!=typeof c())throw Error("The value for a submit binding must be a function");a.a.B(b,"submit",(function(a){var d,e=c();try{d=e.call(f.$data,b)}finally{!0!==d&&(a.preventDefault?a.preventDefault():a.returnValue=!1)}}))}},a.c.text={init:function(){return{controlsDescendantBindings:!0}},update:function(b,c){a.a.Bb(b,c())}},a.h.ea.text=!0,function(){if(A&&A.navigator){var d,e,f,g,h,b=function(a){if(a)return parseFloat(a[1])},c=A.navigator.userAgent;(d=A.opera&&A.opera.version&&parseInt(A.opera.version()))||(h=b(c.match(/Edge\/([^ ]+)$/)))||b(c.match(/Chrome\/([^ ]+)/))||(e=b(c.match(/Version\/([^ ]+) Safari/)))||(f=b(c.match(/Firefox\/([^ ]+)/)))||(g=a.a.W||b(c.match(/MSIE ([^ ]+)/)))||(g=b(c.match(/rv:([^ )]+)/)))}if(8<=g&&10>g)var m=a.a.g.Z(),k=a.a.g.Z(),l=function(b){var c=this.activeElement;(c=c&&a.a.g.get(c,k))&&c(b)},p=function(b,c){var d=b.ownerDocument;a.a.g.get(d,m)||(a.a.g.set(d,m,!0),a.a.B(d,"selectionchange",l)),a.a.g.set(b,k,c)};a.c.textInput={init:function(b,c,k){function l(c,d){a.a.B(b,c,d)}function r(){w||(L=b.value,w=a.a.setTimeout(z,4))}function z(){clearTimeout(w),L=w=n;var d=b.value;v!==d&&(v=d,a.m.eb(c(),k,"textInput",d))}var w,L,v=b.value,A=9==a.a.W?r:z,y=!1;g&&l("keypress",z),11>g&&l("propertychange",(function(a){y||"value"!==a.propertyName||A(a)})),8==g&&(l("keyup",z),l("keydown",z)),p&&(p(b,A),l("dragend",r)),(!g||9<=g)&&l("input",A),5>e&&"textarea"===a.a.R(b)?(l("keydown",r),l("paste",r),l("cut",r)):11>d?l("keydown",r):4>f?(l("DOMAutoComplete",z),l("dragdrop",z),l("drop",z)):h&&"number"===b.type&&l("keydown",r),l("change",z),l("blur",z),a.o((function m(){var d=a.a.f(c());null!==d&&d!==n||(d=""),L!==n&&d===L?a.a.setTimeout(m,4):b.value!==d&&(y=!0,b.value=d,y=!1,v=b.value)}),null,{l:b})}},a.m.wa.textInput=!0,a.c.textinput={preprocess:function(a,b,c){c("textInput",a)}}}(),a.c.uniqueName={init:function(b,c){if(c()){var d="ko_unique_"+ ++a.c.uniqueName.rd;a.a.Yc(b,d)}}},a.c.uniqueName.rd=0,a.c.using={init:function(b,c,d,e,f){var g;return d.has("as")&&(g={as:d.get("as"),noChildContext:d.get("noChildContext")}),c=f.createChildContext(c,g),a.Oa(c,b),{controlsDescendantBindings:!0}}},a.h.ea.using=!0,a.c.value={init:function(b,c,d){var e=a.a.R(b),f="input"==e;if(!f||"checkbox"!=b.type&&"radio"!=b.type){var g=[],h=d.get("valueUpdate"),m=!1,k=null;h&&(g="string"==typeof h?[h]:a.a.wc(h),a.a.Pa(g,"change"));var p,q,l=function(){k=null,m=!1;var e=c(),f=a.w.M(b);a.m.eb(e,d,"value",f)};!a.a.W||!f||"text"!=b.type||"off"==b.autocomplete||b.form&&"off"==b.form.autocomplete||-1!=a.a.A(g,"propertychange")||(a.a.B(b,"propertychange",(function(){m=!0})),a.a.B(b,"focus",(function(){m=!1})),a.a.B(b,"blur",(function(){m&&l()}))),a.a.D(g,(function(c){var d=l;a.a.Ud(c,"after")&&(d=function(){k=a.w.M(b),a.a.setTimeout(l,0)},c=c.substring(5)),a.a.B(b,c,d)})),p=f&&"file"==b.type?function(){var d=a.a.f(c());null===d||d===n||""===d?b.value="":a.u.G(l)}:function(){var f=a.a.f(c()),g=a.w.M(b);null!==k&&f===k?a.a.setTimeout(p,0):f===g&&g!==n||("select"===e?(g=d.get("valueAllowUnset"),a.w.cb(b,f,g),g||f===a.w.M(b)||a.u.G(l)):a.w.cb(b,f))},"select"===e?a.i.subscribe(b,a.i.H,(function(){q?d.get("valueAllowUnset")?p():l():(a.a.B(b,"change",l),q=a.o(p,null,{l:b}))}),null,{notifyImmediately:!0}):(a.a.B(b,"change",l),a.o(p,null,{l:b}))}else a.ib(b,{checkedValue:c})},update:function(){}},a.m.wa.value=!0,a.c.visible={update:function(b,c){var d=a.a.f(c()),e="none"!=b.style.display;d&&!e?b.style.display="":!d&&e&&(b.style.display="none")}},a.c.hidden={update:function(b,c){a.c.visible.update(b,(function(){return!a.a.f(c())}))}},function(b){a.c[b]={init:function(c,d,e,f,g){return a.c.event.init.call(this,c,(function(){var a={};return a[b]=d(),a}),e,f,g)}}}("click"),a.ca=function(){},a.ca.prototype.renderTemplateSource=function(){throw Error("Override renderTemplateSource")},a.ca.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock")},a.ca.prototype.makeTemplateSource=function(b,c){if("string"==typeof b){var d=(c=c||w).getElementById(b);if(!d)throw Error("Cannot find template with ID "+b);return new a.C.F(d)}if(1==b.nodeType||8==b.nodeType)return new a.C.ia(b);throw Error("Unknown template type: "+b)},a.ca.prototype.renderTemplate=function(a,c,d,e){return a=this.makeTemplateSource(a,e),this.renderTemplateSource(a,c,d,e)},a.ca.prototype.isTemplateRewritten=function(a,c){return!1===this.allowTemplateRewriting||this.makeTemplateSource(a,c).data("isRewritten")},a.ca.prototype.rewriteTemplate=function(a,c,d){c=c((a=this.makeTemplateSource(a,d)).text()),a.text(c),a.data("isRewritten",!0)},a.b("templateEngine",a.ca),a.kc=function(){function b(b,c,d,h){b=a.m.ac(b);for(var m=a.m.Ra,k=0;k<b.length;k++){var l=b[k].key;if(Object.prototype.hasOwnProperty.call(m,l)){var p=m[l];if("function"==typeof p){if(l=p(b[k].value))throw Error(l)}else if(!p)throw Error("This template engine does not support the '"+l+"' binding within its templates")}}return d="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+a.m.vb(b,{valueAccessors:!0})+" } })()},'"+d.toLowerCase()+"')",h.createJavaScriptEvaluatorBlock(d)+c}var c=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'|[^>]*))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,d=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;return{xd:function(b,c,d){c.isTemplateRewritten(b,d)||c.rewriteTemplate(b,(function(b){return a.kc.Ld(b,c)}),d)},Ld:function(a,f){return a.replace(c,(function(a,c,d,e,l){return b(l,c,d,f)})).replace(d,(function(a,c){return b(c,"\x3c!-- ko --\x3e","#comment",f)}))},md:function(b,c){return a.aa.Xb((function(d,h){var m=d.nextSibling;m&&m.nodeName.toLowerCase()===c&&a.ib(m,b,h)}))}}}(),a.b("__tr_ambtns",a.kc.md),function(){a.C={},a.C.F=function(b){if(this.F=b){var c=a.a.R(b);this.ab="script"===c?1:"textarea"===c?2:"template"==c&&b.content&&11===b.content.nodeType?3:4}},a.C.F.prototype.text=function(){var b=1===this.ab?"text":2===this.ab?"value":"innerHTML";if(0==arguments.length)return this.F[b];var c=arguments[0];"innerHTML"===b?a.a.fc(this.F,c):this.F[b]=c};var b=a.a.g.Z()+"_";a.C.F.prototype.data=function(c){if(1===arguments.length)return a.a.g.get(this.F,b+c);a.a.g.set(this.F,b+c,arguments[1])};var c=a.a.g.Z();a.C.F.prototype.nodes=function(){var b=this.F;if(0==arguments.length){var e=a.a.g.get(b,c)||{},f=e.lb||(3===this.ab?b.content:4===this.ab?b:n);if(!f||e.jd){var g=this.text();g&&g!==e.bb&&(f=a.a.Md(g,b.ownerDocument),a.a.g.set(b,c,{lb:f,bb:g,jd:!0}))}return f}e=arguments[0],this.ab!==n&&this.text(""),a.a.g.set(b,c,{lb:e})},a.C.ia=function(a){this.F=a},a.C.ia.prototype=new a.C.F,a.C.ia.prototype.constructor=a.C.ia,a.C.ia.prototype.text=function(){if(0==arguments.length){var b=a.a.g.get(this.F,c)||{};return b.bb===n&&b.lb&&(b.bb=b.lb.innerHTML),b.bb}a.a.g.set(this.F,c,{bb:arguments[0]})},a.b("templateSources",a.C),a.b("templateSources.domElement",a.C.F),a.b("templateSources.anonymousTemplate",a.C.ia)}(),function(){function b(b,c,d){var e;for(c=a.h.nextSibling(c);b&&(e=b)!==c;)d(e,b=a.h.nextSibling(e))}function c(c,d){if(c.length){var e=c[0],f=c[c.length-1],g=e.parentNode,h=a.ga.instance,m=h.preprocessNode;if(m){if(b(e,f,(function(a,b){var c=a.previousSibling,d=m.call(h,a);d&&(a===e&&(e=d[0]||b),a===f&&(f=d[d.length-1]||c))})),c.length=0,!e)return;e===f?c.push(e):(c.push(e,f),a.a.Ua(c,g))}b(e,f,(function(b){1!==b.nodeType&&8!==b.nodeType||a.vc(d,b)})),b(e,f,(function(b){1!==b.nodeType&&8!==b.nodeType||a.aa.cd(b,[d])})),a.a.Ua(c,g)}}function d(a){return a.nodeType?a:0<a.length?a[0]:null}function e(b,e,f,h,m){m=m||{};var n=(b&&d(b)||f||{}).ownerDocument,B=m.templateEngine||g;if(a.kc.xd(f,B,n),"number"!=typeof(f=B.renderTemplate(f,h,m,n)).length||0<f.length&&"number"!=typeof f[0].nodeType)throw Error("Template engine must return an array of DOM nodes");switch(n=!1,e){case"replaceChildren":a.h.va(b,f),n=!0;break;case"replaceNode":a.a.Xc(b,f),n=!0;break;case"ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+e)}return n&&(c(f,h),m.afterRender&&a.u.G(m.afterRender,null,[f,h[m.as||"$data"]]),"replaceChildren"==e&&a.i.ma(b,a.i.H)),f}function f(b,c,d){return a.O(b)?b():"function"==typeof b?b(c,d):b}var g;a.gc=function(b){if(b!=n&&!(b instanceof a.ca))throw Error("templateEngine must inherit from ko.templateEngine");g=b},a.dc=function(b,c,h,m,t){if(((h=h||{}).templateEngine||g)==n)throw Error("Set a template engine before calling renderTemplate");if(t=t||"replaceChildren",m){var x=d(m);return a.$((function(){var g=c&&c instanceof a.fa?c:new a.fa(c,null,null,null,{exportDependencies:!0}),n=f(b,g.$data,g);g=e(m,t,n,g,h),"replaceNode"==t&&(x=d(m=g))}),null,{Sa:function(){return!x||!a.a.Sb(x)},l:x&&"replaceNode"==t?x.parentNode:x})}return a.aa.Xb((function(d){a.dc(b,c,h,d,"replaceNode")}))},a.Qd=function(b,d,g,h,m){function x(b,c){a.u.G(a.a.ec,null,[h,b,u,g,r,c]),a.i.ma(h,a.i.H)}function r(a,b){c(b,v),g.afterRender&&g.afterRender(b,a),v=null}function u(a,c){v=m.createChildContext(a,{as:z,noChildContext:g.noChildContext,extend:function(a){a.$index=c,z&&(a[z+"Index"]=c)}});var d=f(b,a,v);return e(h,"ignoreTargetNode",d,v,g)}var v,z=g.as,w=!1===g.includeDestroyed||a.options.foreachHidesDestroyed&&!g.includeDestroyed;if(w||g.beforeRemove||!a.Pc(d))return a.$((function(){var b=a.a.f(d)||[];void 0===b.length&&(b=[b]),w&&(b=a.a.jb(b,(function(b){return b===n||null===b||!a.a.f(b._destroy)}))),x(b)}),null,{l:h});x(d.v());var A=d.subscribe((function(a){x(d(),a)}),null,"arrayChange");return A.l(h),A};var h=a.a.g.Z(),m=a.a.g.Z();a.c.template={init:function(b,c){var d=a.a.f(c());if("string"==typeof d||"name"in d)a.h.Ea(b);else if("nodes"in d){if(d=d.nodes||[],a.O(d))throw Error('The "nodes" option must be a plain, non-observable array.');var e=d[0]&&d[0].parentNode;e&&a.a.g.get(e,m)||(e=a.a.Yb(d),a.a.g.set(e,m,!0)),new a.C.ia(b).nodes(e)}else{if(!(0<(d=a.h.childNodes(b)).length))throw Error("Anonymous template defined, but no template content was provided");e=a.a.Yb(d),new a.C.ia(b).nodes(e)}return{controlsDescendantBindings:!0}},update:function(b,c,d,e,f){var g=c();d=!0,e=null,"string"==typeof(c=a.a.f(g))?c={}:(g="name"in c?c.name:b,"if"in c&&(d=a.a.f(c.if)),d&&"ifnot"in c&&(d=!a.a.f(c.ifnot)),d&&!g&&(d=!1)),"foreach"in c?e=a.Qd(g,d&&c.foreach||[],c,b,f):d?(d=f,"data"in c&&(d=f.createChildContext(c.data,{as:c.as,noChildContext:c.noChildContext,exportDependencies:!0})),e=a.dc(g,d,c,b)):a.h.Ea(b),f=e,(c=a.a.g.get(b,h))&&"function"==typeof c.s&&c.s(),a.a.g.set(b,h,!f||f.ja&&!f.ja()?n:f)}},a.m.Ra.template=function(b){return 1==(b=a.m.ac(b)).length&&b[0].unknown||a.m.Id(b,"name")?null:"This template engine does not support anonymous templates nested within its templates"},a.h.ea.template=!0}(),a.b("setTemplateEngine",a.gc),a.b("renderTemplate",a.dc),a.a.Kc=function(a,c,d){var e,f,g,h,m;if(a.length&&c.length)for(e=f=0;(!d||e<d)&&(h=a[f]);++f){for(g=0;m=c[g];++g)if(h.value===m.value){h.moved=m.index,m.moved=h.index,c.splice(g,1),e=g=0;break}e+=g}},a.a.Pb=function(){function b(b,d,e,f,g){var l,q,u,w,z,h=Math.min,m=Math.max,k=[],p=b.length,n=d.length,r=n-p||1,v=p+n+1;for(l=0;l<=p;l++)for(w=u,k.push(u=[]),z=h(n,l+r),q=m(0,l-1);q<=z;q++)u[q]=q?l?b[l-1]===d[q-1]?w[q-1]:h(w[q]||v,u[q-1]||v)+1:q+1:l+1;for(h=[],m=[],r=[],l=p,q=n;l||q;)n=k[l][q]-1,q&&n===k[l][q-1]?m.push(h[h.length]={status:e,value:d[--q],index:q}):l&&n===k[l-1][q]?r.push(h[h.length]={status:f,value:b[--l],index:l}):(--q,--l,g.sparse||h.push({status:"retained",value:d[q]}));return a.a.Kc(r,m,!g.dontLimitMoves&&10*p),h.reverse()}return function(a,d,e){return e="boolean"==typeof e?{dontLimitMoves:e}:e||{},d=d||[],(a=a||[]).length<d.length?b(a,d,"added","deleted",e):b(d,a,"deleted","added",e)}}(),a.b("utils.compareArrays",a.a.Pb),function(){function b(b,c,d,h,m){var k=[],l=a.$((function(){var l=c(d,m,a.a.Ua(k,b))||[];0<k.length&&(a.a.Xc(k,l),h&&a.u.G(h,null,[d,l,m])),k.length=0,a.a.Nb(k,l)}),null,{l:b,Sa:function(){return!a.a.kd(k)}});return{Y:k,$:l.ja()?l:n}}var c=a.a.g.Z(),d=a.a.g.Z();a.a.ec=function(e,f,g,h,m,k){function l(b){y={Aa:b,pb:a.ta(w++)},v.push(y),r||F.push(y)}function p(b){y=t[b],w!==y.pb.v()&&D.push(y),y.pb(w++),a.a.Ua(y.Y,e),v.push(y)}function q(b,c){if(b)for(var d=0,e=c.length;d<e;d++)a.a.D(c[d].Y,(function(a){b(a,d,c[d].Aa)}))}void 0===(f=f||[]).length&&(f=[f]),h=h||{};var y,M,O,P,t=a.a.g.get(e,c),r=!t,v=[],u=0,w=0,z=[],A=[],C=[],D=[],F=[],I=0;if(r)a.a.D(f,l);else{if(!k||t&&t._countWaitingForRemove){var E=a.a.Mb(t,(function(a){return a.Aa}));k=a.a.Pb(E,f,{dontLimitMoves:h.dontLimitMoves,sparse:!0})}var G,H,K;for(E=0;G=k[E];E++)switch(H=G.moved,K=G.index,G.status){case"deleted":for(;u<K;)p(u++);H===n&&((y=t[u]).$&&(y.$.s(),y.$=n),a.a.Ua(y.Y,e).length&&(h.beforeRemove&&(v.push(y),I++,y.Aa===d?y=null:C.push(y)),y&&z.push.apply(z,y.Y))),u++;break;case"added":for(;w<K;)p(u++);H!==n?(A.push(v.length),p(H)):l(G.value)}for(;w<f.length;)p(u++);v._countWaitingForRemove=I}a.a.g.set(e,c,v),q(h.beforeMove,D),a.a.D(z,h.beforeRemove?a.oa:a.removeNode);try{P=e.ownerDocument.activeElement}catch(N){}if(A.length)for(;(E=A.shift())!=n;){for(y=v[E],M=n;E;)if((O=v[--E].Y)&&O.length){M=O[O.length-1];break}for(f=0;u=y.Y[f];M=u,f++)a.h.Wb(e,u,M)}for(E=0;y=v[E];E++){for(y.Y||a.a.extend(y,b(e,g,y.Aa,m,y.pb)),f=0;u=y.Y[f];M=u,f++)a.h.Wb(e,u,M);!y.Ed&&m&&(m(y.Aa,y.Y,y.pb),y.Ed=!0,M=y.Y[y.Y.length-1])}for(P&&e.ownerDocument.activeElement!=P&&P.focus(),q(h.beforeRemove,C),E=0;E<C.length;++E)C[E].Aa=d;q(h.afterMove,D),q(h.afterAdd,F)}}(),a.b("utils.setDomNodeChildrenFromArrayMapping",a.a.ec),a.ba=function(){this.allowTemplateRewriting=!1},a.ba.prototype=new a.ca,a.ba.prototype.constructor=a.ba,a.ba.prototype.renderTemplateSource=function(b,c,d,e){return(c=9>a.a.W||!b.nodes?null:b.nodes())?a.a.la(c.cloneNode(!0).childNodes):(b=b.text(),a.a.ua(b,e))},a.ba.Ma=new a.ba,a.gc(a.ba.Ma),a.b("nativeTemplateEngine",a.ba),function(){a.$a=function(){var a=this.Hd=function(){if(!v||!v.tmpl)return 0;try{if(0<=v.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(a){}return 1}();this.renderTemplateSource=function(b,e,f,g){if(g=g||w,f=f||{},2>a)throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");var h=b.data("precompiled");return h||(h=b.text()||"",h=v.template(null,"{{ko_with $item.koBindingContext}}"+h+"{{/ko_with}}"),b.data("precompiled",h)),b=[e.$data],e=v.extend({koBindingContext:e},f.templateOptions),(e=v.tmpl(h,b,e)).appendTo(g.createElement("div")),v.fragments={},e},this.createJavaScriptEvaluatorBlock=function(a){return"{{ko_code ((function() { return "+a+" })()) }}"},this.addTemplate=function(a,b){w.write("<script type='text/html' id='"+a+"'>"+b+"<\/script>")},0<a&&(v.tmpl.tag.ko_code={open:"__.push($1 || '');"},v.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},a.$a.prototype=new a.ca,a.$a.prototype.constructor=a.$a;var b=new a.$a;0<b.Hd&&a.gc(b),a.b("jqueryTmplTemplateEngine",a.$a)}()}))}()},function(module,__webpack_exports__,__webpack_require__){"use strict";function OrderedMap(content){this.content=content}__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"ContentMatch",(function(){return ContentMatch})),__webpack_require__.d(__webpack_exports__,"DOMParser",(function(){return DOMParser})),__webpack_require__.d(__webpack_exports__,"DOMSerializer",(function(){return DOMSerializer})),__webpack_require__.d(__webpack_exports__,"Fragment",(function(){return Fragment})),__webpack_require__.d(__webpack_exports__,"Mark",(function(){return Mark})),__webpack_require__.d(__webpack_exports__,"MarkType",(function(){return MarkType})),__webpack_require__.d(__webpack_exports__,"Node",(function(){return Node})),__webpack_require__.d(__webpack_exports__,"NodeRange",(function(){return NodeRange})),__webpack_require__.d(__webpack_exports__,"NodeType",(function(){return NodeType})),__webpack_require__.d(__webpack_exports__,"ReplaceError",(function(){return ReplaceError})),__webpack_require__.d(__webpack_exports__,"ResolvedPos",(function(){return ResolvedPos})),__webpack_require__.d(__webpack_exports__,"Schema",(function(){return index_es_Schema})),__webpack_require__.d(__webpack_exports__,"Slice",(function(){return Slice})),OrderedMap.prototype={constructor:OrderedMap,find:function(key){for(var i=0;i<this.content.length;i+=2)if(this.content[i]===key)return i;return-1},get:function(key){var found=this.find(key);return-1==found?void 0:this.content[found+1]},update:function(key,value,newKey){var self=newKey&&newKey!=key?this.remove(newKey):this,found=self.find(key),content=self.content.slice();return-1==found?content.push(newKey||key,value):(content[found+1]=value,newKey&&(content[found]=newKey)),new OrderedMap(content)},remove:function(key){var found=this.find(key);if(-1==found)return this;var content=this.content.slice();return content.splice(found,2),new OrderedMap(content)},addToStart:function(key,value){return new OrderedMap([key,value].concat(this.remove(key).content))},addToEnd:function(key,value){var content=this.remove(key).content.slice();return content.push(key,value),new OrderedMap(content)},addBefore:function(place,key,value){var without=this.remove(key),content=without.content.slice(),found=without.find(place);return content.splice(-1==found?content.length:found,0,key,value),new OrderedMap(content)},forEach:function(f){for(var i=0;i<this.content.length;i+=2)f(this.content[i],this.content[i+1])},prepend:function(map){return(map=OrderedMap.from(map)).size?new OrderedMap(map.content.concat(this.subtract(map).content)):this},append:function(map){return(map=OrderedMap.from(map)).size?new OrderedMap(this.subtract(map).content.concat(map.content)):this},subtract:function(map){var result=this;map=OrderedMap.from(map);for(var i=0;i<map.content.length;i+=2)result=result.remove(map.content[i]);return result},get size(){return this.content.length>>1}},OrderedMap.from=function(value){if(value instanceof OrderedMap)return value;var content=[];if(value)for(var prop in value)content.push(prop,value[prop]);return new OrderedMap(content)};var index_es=OrderedMap;var Fragment=function(content,size){if(this.content=content,this.size=size||0,null==size)for(var i=0;i<content.length;i++)this.size+=content[i].nodeSize},prototypeAccessors={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};Fragment.prototype.nodesBetween=function(from,to,f,nodeStart,parent){void 0===nodeStart&&(nodeStart=0);for(var i=0,pos=0;pos<to;i++){var child=this.content[i],end=pos+child.nodeSize;if(end>from&&!1!==f(child,nodeStart+pos,parent,i)&&child.content.size){var start=pos+1;child.nodesBetween(Math.max(0,from-start),Math.min(child.content.size,to-start),f,nodeStart+start)}pos=end}},Fragment.prototype.descendants=function(f){this.nodesBetween(0,this.size,f)},Fragment.prototype.textBetween=function(from,to,blockSeparator,leafText){var text="",separated=!0;return this.nodesBetween(from,to,(function(node,pos){node.isText?(text+=node.text.slice(Math.max(from,pos)-pos,to-pos),separated=!blockSeparator):node.isLeaf&&leafText?(text+=leafText,separated=!blockSeparator):!separated&&node.isBlock&&(text+=blockSeparator,separated=!0)}),0),text},Fragment.prototype.append=function(other){if(!other.size)return this;if(!this.size)return other;var last=this.lastChild,first=other.firstChild,content=this.content.slice(),i=0;for(last.isText&&last.sameMarkup(first)&&(content[content.length-1]=last.withText(last.text+first.text),i=1);i<other.content.length;i++)content.push(other.content[i]);return new Fragment(content,this.size+other.size)},Fragment.prototype.cut=function(from,to){if(null==to&&(to=this.size),0==from&&to==this.size)return this;var result=[],size=0;if(to>from)for(var i=0,pos=0;pos<to;i++){var child=this.content[i],end=pos+child.nodeSize;end>from&&((pos<from||end>to)&&(child=child.isText?child.cut(Math.max(0,from-pos),Math.min(child.text.length,to-pos)):child.cut(Math.max(0,from-pos-1),Math.min(child.content.size,to-pos-1))),result.push(child),size+=child.nodeSize),pos=end}return new Fragment(result,size)},Fragment.prototype.cutByIndex=function(from,to){return from==to?Fragment.empty:0==from&&to==this.content.length?this:new Fragment(this.content.slice(from,to))},Fragment.prototype.replaceChild=function(index,node){var current=this.content[index];if(current==node)return this;var copy=this.content.slice(),size=this.size+node.nodeSize-current.nodeSize;return copy[index]=node,new Fragment(copy,size)},Fragment.prototype.addToStart=function(node){return new Fragment([node].concat(this.content),this.size+node.nodeSize)},Fragment.prototype.addToEnd=function(node){return new Fragment(this.content.concat(node),this.size+node.nodeSize)},Fragment.prototype.eq=function(other){if(this.content.length!=other.content.length)return!1;for(var i=0;i<this.content.length;i++)if(!this.content[i].eq(other.content[i]))return!1;return!0},prototypeAccessors.firstChild.get=function(){return this.content.length?this.content[0]:null},prototypeAccessors.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},prototypeAccessors.childCount.get=function(){return this.content.length},Fragment.prototype.child=function(index){var found=this.content[index];if(!found)throw new RangeError("Index "+index+" out of range for "+this);return found},Fragment.prototype.maybeChild=function(index){return this.content[index]},Fragment.prototype.forEach=function(f){for(var i=0,p=0;i<this.content.length;i++){var child=this.content[i];f(child,p,i),p+=child.nodeSize}},Fragment.prototype.findDiffStart=function(other,pos){return void 0===pos&&(pos=0),function findDiffStart(a,b,pos){for(var i=0;;i++){if(i==a.childCount||i==b.childCount)return a.childCount==b.childCount?null:pos;var childA=a.child(i),childB=b.child(i);if(childA!=childB){if(!childA.sameMarkup(childB))return pos;if(childA.isText&&childA.text!=childB.text){for(var j=0;childA.text[j]==childB.text[j];j++)pos++;return pos}if(childA.content.size||childB.content.size){var inner=findDiffStart(childA.content,childB.content,pos+1);if(null!=inner)return inner}pos+=childA.nodeSize}else pos+=childA.nodeSize}}(this,other,pos)},Fragment.prototype.findDiffEnd=function(other,pos,otherPos){return void 0===pos&&(pos=this.size),void 0===otherPos&&(otherPos=other.size),function findDiffEnd(a,b,posA,posB){for(var iA=a.childCount,iB=b.childCount;;){if(0==iA||0==iB)return iA==iB?null:{a:posA,b:posB};var childA=a.child(--iA),childB=b.child(--iB),size=childA.nodeSize;if(childA!=childB){if(!childA.sameMarkup(childB))return{a:posA,b:posB};if(childA.isText&&childA.text!=childB.text){for(var same=0,minSize=Math.min(childA.text.length,childB.text.length);same<minSize&&childA.text[childA.text.length-same-1]==childB.text[childB.text.length-same-1];)same++,posA--,posB--;return{a:posA,b:posB}}if(childA.content.size||childB.content.size){var inner=findDiffEnd(childA.content,childB.content,posA-1,posB-1);if(inner)return inner}posA-=size,posB-=size}else posA-=size,posB-=size}}(this,other,pos,otherPos)},Fragment.prototype.findIndex=function(pos,round){if(void 0===round&&(round=-1),0==pos)return retIndex(0,pos);if(pos==this.size)return retIndex(this.content.length,pos);if(pos>this.size||pos<0)throw new RangeError("Position "+pos+" outside of fragment ("+this+")");for(var i=0,curPos=0;;i++){var end=curPos+this.child(i).nodeSize;if(end>=pos)return end==pos||round>0?retIndex(i+1,end):retIndex(i,curPos);curPos=end}},Fragment.prototype.toString=function(){return"<"+this.toStringInner()+">"},Fragment.prototype.toStringInner=function(){return this.content.join(", ")},Fragment.prototype.toJSON=function(){return this.content.length?this.content.map((function(n){return n.toJSON()})):null},Fragment.fromJSON=function(schema,value){if(!value)return Fragment.empty;if(!Array.isArray(value))throw new RangeError("Invalid input for Fragment.fromJSON");return new Fragment(value.map(schema.nodeFromJSON))},Fragment.fromArray=function(array){if(!array.length)return Fragment.empty;for(var joined,size=0,i=0;i<array.length;i++){var node=array[i];size+=node.nodeSize,i&&node.isText&&array[i-1].sameMarkup(node)?(joined||(joined=array.slice(0,i)),joined[joined.length-1]=node.withText(joined[joined.length-1].text+node.text)):joined&&joined.push(node)}return new Fragment(joined||array,size)},Fragment.from=function(nodes){if(!nodes)return Fragment.empty;if(nodes instanceof Fragment)return nodes;if(Array.isArray(nodes))return this.fromArray(nodes);if(nodes.attrs)return new Fragment([nodes],nodes.nodeSize);throw new RangeError("Can not convert "+nodes+" to a Fragment"+(nodes.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(Fragment.prototype,prototypeAccessors);var found={index:0,offset:0};function retIndex(index,offset){return found.index=index,found.offset=offset,found}function compareDeep(a,b){if(a===b)return!0;if(!a||"object"!=typeof a||!b||"object"!=typeof b)return!1;var array=Array.isArray(a);if(Array.isArray(b)!=array)return!1;if(array){if(a.length!=b.length)return!1;for(var i=0;i<a.length;i++)if(!compareDeep(a[i],b[i]))return!1}else{for(var p in a)if(!(p in b)||!compareDeep(a[p],b[p]))return!1;for(var p$1 in b)if(!(p$1 in a))return!1}return!0}Fragment.empty=new Fragment([],0);var Mark=function(type,attrs){this.type=type,this.attrs=attrs};function ReplaceError(message){var err=Error.call(this,message);return err.__proto__=ReplaceError.prototype,err}Mark.prototype.addToSet=function(set){for(var copy,placed=!1,i=0;i<set.length;i++){var other=set[i];if(this.eq(other))return set;if(this.type.excludes(other.type))copy||(copy=set.slice(0,i));else{if(other.type.excludes(this.type))return set;!placed&&other.type.rank>this.type.rank&&(copy||(copy=set.slice(0,i)),copy.push(this),placed=!0),copy&&copy.push(other)}}return copy||(copy=set.slice()),placed||copy.push(this),copy},Mark.prototype.removeFromSet=function(set){for(var i=0;i<set.length;i++)if(this.eq(set[i]))return set.slice(0,i).concat(set.slice(i+1));return set},Mark.prototype.isInSet=function(set){for(var i=0;i<set.length;i++)if(this.eq(set[i]))return!0;return!1},Mark.prototype.eq=function(other){return this==other||this.type==other.type&&compareDeep(this.attrs,other.attrs)},Mark.prototype.toJSON=function(){var obj={type:this.type.name};for(var _ in this.attrs){obj.attrs=this.attrs;break}return obj},Mark.fromJSON=function(schema,json){if(!json)throw new RangeError("Invalid input for Mark.fromJSON");var type=schema.marks[json.type];if(!type)throw new RangeError("There is no mark type "+json.type+" in this schema");return type.create(json.attrs)},Mark.sameSet=function(a,b){if(a==b)return!0;if(a.length!=b.length)return!1;for(var i=0;i<a.length;i++)if(!a[i].eq(b[i]))return!1;return!0},Mark.setFrom=function(marks){if(!marks||0==marks.length)return Mark.none;if(marks instanceof Mark)return[marks];var copy=marks.slice();return copy.sort((function(a,b){return a.type.rank-b.type.rank})),copy},Mark.none=[],ReplaceError.prototype=Object.create(Error.prototype),ReplaceError.prototype.constructor=ReplaceError,ReplaceError.prototype.name="ReplaceError";var Slice=function(content,openStart,openEnd){this.content=content,this.openStart=openStart,this.openEnd=openEnd},prototypeAccessors$1={size:{configurable:!0}};function replace($from,$to,slice){if(slice.openStart>$from.depth)throw new ReplaceError("Inserted content deeper than insertion position");if($from.depth-slice.openStart!=$to.depth-slice.openEnd)throw new ReplaceError("Inconsistent open depths");return function replaceOuter($from,$to,slice,depth){var index=$from.index(depth),node=$from.node(depth);if(index==$to.index(depth)&&depth<$from.depth-slice.openStart){var inner=replaceOuter($from,$to,slice,depth+1);return node.copy(node.content.replaceChild(index,inner))}if(slice.content.size){if(slice.openStart||slice.openEnd||$from.depth!=depth||$to.depth!=depth){var ref=function(slice,$along){for(var extra=$along.depth-slice.openStart,node=$along.node(extra).copy(slice.content),i=extra-1;i>=0;i--)node=$along.node(i).copy(Fragment.from(node));return{start:node.resolveNoCache(slice.openStart+extra),end:node.resolveNoCache(node.content.size-slice.openEnd-extra)}}(slice,$from);return index_es_close(node,function replaceThreeWay($from,$start,$end,$to,depth){var openStart=$from.depth>depth&&joinable($from,$start,depth+1),openEnd=$to.depth>depth&&joinable($end,$to,depth+1),content=[];addRange(null,$from,depth,content),openStart&&openEnd&&$start.index(depth)==$end.index(depth)?(checkJoin(openStart,openEnd),addNode(index_es_close(openStart,replaceThreeWay($from,$start,$end,$to,depth+1)),content)):(openStart&&addNode(index_es_close(openStart,replaceTwoWay($from,$start,depth+1)),content),addRange($start,$end,depth,content),openEnd&&addNode(index_es_close(openEnd,replaceTwoWay($end,$to,depth+1)),content));return addRange($to,null,depth,content),new Fragment(content)}($from,ref.start,ref.end,$to,depth))}var parent=$from.parent,content=parent.content;return index_es_close(parent,content.cut(0,$from.parentOffset).append(slice.content).append(content.cut($to.parentOffset)))}return index_es_close(node,replaceTwoWay($from,$to,depth))}($from,$to,slice,0)}function checkJoin(main,sub){if(!sub.type.compatibleContent(main.type))throw new ReplaceError("Cannot join "+sub.type.name+" onto "+main.type.name)}function joinable($before,$after,depth){var node=$before.node(depth);return checkJoin(node,$after.node(depth)),node}function addNode(child,target){var last=target.length-1;last>=0&&child.isText&&child.sameMarkup(target[last])?target[last]=child.withText(target[last].text+child.text):target.push(child)}function addRange($start,$end,depth,target){var node=($end||$start).node(depth),startIndex=0,endIndex=$end?$end.index(depth):node.childCount;$start&&(startIndex=$start.index(depth),$start.depth>depth?startIndex++:$start.textOffset&&(addNode($start.nodeAfter,target),startIndex++));for(var i=startIndex;i<endIndex;i++)addNode(node.child(i),target);$end&&$end.depth==depth&&$end.textOffset&&addNode($end.nodeBefore,target)}function index_es_close(node,content){if(!node.type.validContent(content))throw new ReplaceError("Invalid content for node "+node.type.name);return node.copy(content)}function replaceTwoWay($from,$to,depth){var content=[];(addRange(null,$from,depth,content),$from.depth>depth)&&addNode(index_es_close(joinable($from,$to,depth+1),replaceTwoWay($from,$to,depth+1)),content);return addRange($to,null,depth,content),new Fragment(content)}prototypeAccessors$1.size.get=function(){return this.content.size-this.openStart-this.openEnd},Slice.prototype.insertAt=function(pos,fragment){var content=function insertInto(content,dist,insert,parent){var ref=content.findIndex(dist),index=ref.index,offset=ref.offset,child=content.maybeChild(index);if(offset==dist||child.isText)return parent&&!parent.canReplace(index,index,insert)?null:content.cut(0,dist).append(insert).append(content.cut(dist));var inner=insertInto(child.content,dist-offset-1,insert);return inner&&content.replaceChild(index,child.copy(inner))}(this.content,pos+this.openStart,fragment,null);return content&&new Slice(content,this.openStart,this.openEnd)},Slice.prototype.removeBetween=function(from,to){return new Slice(function removeRange(content,from,to){var ref=content.findIndex(from),index=ref.index,offset=ref.offset,child=content.maybeChild(index),ref$1=content.findIndex(to),indexTo=ref$1.index,offsetTo=ref$1.offset;if(offset==from||child.isText){if(offsetTo!=to&&!content.child(indexTo).isText)throw new RangeError("Removing non-flat range");return content.cut(0,from).append(content.cut(to))}if(index!=indexTo)throw new RangeError("Removing non-flat range");return content.replaceChild(index,child.copy(removeRange(child.content,from-offset-1,to-offset-1)))}(this.content,from+this.openStart,to+this.openStart),this.openStart,this.openEnd)},Slice.prototype.eq=function(other){return this.content.eq(other.content)&&this.openStart==other.openStart&&this.openEnd==other.openEnd},Slice.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},Slice.prototype.toJSON=function(){if(!this.content.size)return null;var json={content:this.content.toJSON()};return this.openStart>0&&(json.openStart=this.openStart),this.openEnd>0&&(json.openEnd=this.openEnd),json},Slice.fromJSON=function(schema,json){if(!json)return Slice.empty;var openStart=json.openStart||0,openEnd=json.openEnd||0;if("number"!=typeof openStart||"number"!=typeof openEnd)throw new RangeError("Invalid input for Slice.fromJSON");return new Slice(Fragment.fromJSON(schema,json.content),openStart,openEnd)},Slice.maxOpen=function(fragment,openIsolating){void 0===openIsolating&&(openIsolating=!0);for(var openStart=0,openEnd=0,n=fragment.firstChild;n&&!n.isLeaf&&(openIsolating||!n.type.spec.isolating);n=n.firstChild)openStart++;for(var n$1=fragment.lastChild;n$1&&!n$1.isLeaf&&(openIsolating||!n$1.type.spec.isolating);n$1=n$1.lastChild)openEnd++;return new Slice(fragment,openStart,openEnd)},Object.defineProperties(Slice.prototype,prototypeAccessors$1),Slice.empty=new Slice(Fragment.empty,0,0);var ResolvedPos=function(pos,path,parentOffset){this.pos=pos,this.path=path,this.depth=path.length/3-1,this.parentOffset=parentOffset},prototypeAccessors$2={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};ResolvedPos.prototype.resolveDepth=function(val){return null==val?this.depth:val<0?this.depth+val:val},prototypeAccessors$2.parent.get=function(){return this.node(this.depth)},prototypeAccessors$2.doc.get=function(){return this.node(0)},ResolvedPos.prototype.node=function(depth){return this.path[3*this.resolveDepth(depth)]},ResolvedPos.prototype.index=function(depth){return this.path[3*this.resolveDepth(depth)+1]},ResolvedPos.prototype.indexAfter=function(depth){return depth=this.resolveDepth(depth),this.index(depth)+(depth!=this.depth||this.textOffset?1:0)},ResolvedPos.prototype.start=function(depth){return 0==(depth=this.resolveDepth(depth))?0:this.path[3*depth-1]+1},ResolvedPos.prototype.end=function(depth){return depth=this.resolveDepth(depth),this.start(depth)+this.node(depth).content.size},ResolvedPos.prototype.before=function(depth){if(!(depth=this.resolveDepth(depth)))throw new RangeError("There is no position before the top-level node");return depth==this.depth+1?this.pos:this.path[3*depth-1]},ResolvedPos.prototype.after=function(depth){if(!(depth=this.resolveDepth(depth)))throw new RangeError("There is no position after the top-level node");return depth==this.depth+1?this.pos:this.path[3*depth-1]+this.path[3*depth].nodeSize},prototypeAccessors$2.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},prototypeAccessors$2.nodeAfter.get=function(){var parent=this.parent,index=this.index(this.depth);if(index==parent.childCount)return null;var dOff=this.pos-this.path[this.path.length-1],child=parent.child(index);return dOff?parent.child(index).cut(dOff):child},prototypeAccessors$2.nodeBefore.get=function(){var index=this.index(this.depth),dOff=this.pos-this.path[this.path.length-1];return dOff?this.parent.child(index).cut(0,dOff):0==index?null:this.parent.child(index-1)},ResolvedPos.prototype.posAtIndex=function(index,depth){depth=this.resolveDepth(depth);for(var node=this.path[3*depth],pos=0==depth?0:this.path[3*depth-1]+1,i=0;i<index;i++)pos+=node.child(i).nodeSize;return pos},ResolvedPos.prototype.marks=function(){var parent=this.parent,index=this.index();if(0==parent.content.size)return Mark.none;if(this.textOffset)return parent.child(index).marks;var main=parent.maybeChild(index-1),other=parent.maybeChild(index);if(!main){var tmp=main;main=other,other=tmp}for(var marks=main.marks,i=0;i<marks.length;i++)!1!==marks[i].type.spec.inclusive||other&&marks[i].isInSet(other.marks)||(marks=marks[i--].removeFromSet(marks));return marks},ResolvedPos.prototype.marksAcross=function($end){var after=this.parent.maybeChild(this.index());if(!after||!after.isInline)return null;for(var marks=after.marks,next=$end.parent.maybeChild($end.index()),i=0;i<marks.length;i++)!1!==marks[i].type.spec.inclusive||next&&marks[i].isInSet(next.marks)||(marks=marks[i--].removeFromSet(marks));return marks},ResolvedPos.prototype.sharedDepth=function(pos){for(var depth=this.depth;depth>0;depth--)if(this.start(depth)<=pos&&this.end(depth)>=pos)return depth;return 0},ResolvedPos.prototype.blockRange=function(other,pred){if(void 0===other&&(other=this),other.pos<this.pos)return other.blockRange(this);for(var d=this.depth-(this.parent.inlineContent||this.pos==other.pos?1:0);d>=0;d--)if(other.pos<=this.end(d)&&(!pred||pred(this.node(d))))return new NodeRange(this,other,d)},ResolvedPos.prototype.sameParent=function(other){return this.pos-this.parentOffset==other.pos-other.parentOffset},ResolvedPos.prototype.max=function(other){return other.pos>this.pos?other:this},ResolvedPos.prototype.min=function(other){return other.pos<this.pos?other:this},ResolvedPos.prototype.toString=function(){for(var str="",i=1;i<=this.depth;i++)str+=(str?"/":"")+this.node(i).type.name+"_"+this.index(i-1);return str+":"+this.parentOffset},ResolvedPos.resolve=function(doc,pos){if(!(pos>=0&&pos<=doc.content.size))throw new RangeError("Position "+pos+" out of range");for(var path=[],start=0,parentOffset=pos,node=doc;;){var ref=node.content.findIndex(parentOffset),index=ref.index,offset=ref.offset,rem=parentOffset-offset;if(path.push(node,index,start+offset),!rem)break;if((node=node.child(index)).isText)break;parentOffset=rem-1,start+=offset+1}return new ResolvedPos(pos,path,parentOffset)},ResolvedPos.resolveCached=function(doc,pos){for(var i=0;i<resolveCache.length;i++){var cached=resolveCache[i];if(cached.pos==pos&&cached.doc==doc)return cached}var result=resolveCache[resolveCachePos]=ResolvedPos.resolve(doc,pos);return resolveCachePos=(resolveCachePos+1)%resolveCacheSize,result},Object.defineProperties(ResolvedPos.prototype,prototypeAccessors$2);var resolveCache=[],resolveCachePos=0,resolveCacheSize=12,NodeRange=function($from,$to,depth){this.$from=$from,this.$to=$to,this.depth=depth},prototypeAccessors$1$1={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};prototypeAccessors$1$1.start.get=function(){return this.$from.before(this.depth+1)},prototypeAccessors$1$1.end.get=function(){return this.$to.after(this.depth+1)},prototypeAccessors$1$1.parent.get=function(){return this.$from.node(this.depth)},prototypeAccessors$1$1.startIndex.get=function(){return this.$from.index(this.depth)},prototypeAccessors$1$1.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(NodeRange.prototype,prototypeAccessors$1$1);var emptyAttrs=Object.create(null),Node=function(type,attrs,content,marks){this.type=type,this.attrs=attrs,this.content=content||Fragment.empty,this.marks=marks||Mark.none},prototypeAccessors$3={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};prototypeAccessors$3.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},prototypeAccessors$3.childCount.get=function(){return this.content.childCount},Node.prototype.child=function(index){return this.content.child(index)},Node.prototype.maybeChild=function(index){return this.content.maybeChild(index)},Node.prototype.forEach=function(f){this.content.forEach(f)},Node.prototype.nodesBetween=function(from,to,f,startPos){void 0===startPos&&(startPos=0),this.content.nodesBetween(from,to,f,startPos,this)},Node.prototype.descendants=function(f){this.nodesBetween(0,this.content.size,f)},prototypeAccessors$3.textContent.get=function(){return this.textBetween(0,this.content.size,"")},Node.prototype.textBetween=function(from,to,blockSeparator,leafText){return this.content.textBetween(from,to,blockSeparator,leafText)},prototypeAccessors$3.firstChild.get=function(){return this.content.firstChild},prototypeAccessors$3.lastChild.get=function(){return this.content.lastChild},Node.prototype.eq=function(other){return this==other||this.sameMarkup(other)&&this.content.eq(other.content)},Node.prototype.sameMarkup=function(other){return this.hasMarkup(other.type,other.attrs,other.marks)},Node.prototype.hasMarkup=function(type,attrs,marks){return this.type==type&&compareDeep(this.attrs,attrs||type.defaultAttrs||emptyAttrs)&&Mark.sameSet(this.marks,marks||Mark.none)},Node.prototype.copy=function(content){return void 0===content&&(content=null),content==this.content?this:new this.constructor(this.type,this.attrs,content,this.marks)},Node.prototype.mark=function(marks){return marks==this.marks?this:new this.constructor(this.type,this.attrs,this.content,marks)},Node.prototype.cut=function(from,to){return 0==from&&to==this.content.size?this:this.copy(this.content.cut(from,to))},Node.prototype.slice=function(from,to,includeParents){if(void 0===to&&(to=this.content.size),void 0===includeParents&&(includeParents=!1),from==to)return Slice.empty;var $from=this.resolve(from),$to=this.resolve(to),depth=includeParents?0:$from.sharedDepth(to),start=$from.start(depth),content=$from.node(depth).content.cut($from.pos-start,$to.pos-start);return new Slice(content,$from.depth-depth,$to.depth-depth)},Node.prototype.replace=function(from,to,slice){return replace(this.resolve(from),this.resolve(to),slice)},Node.prototype.nodeAt=function(pos){for(var node=this;;){var ref=node.content.findIndex(pos),index=ref.index,offset=ref.offset;if(!(node=node.maybeChild(index)))return null;if(offset==pos||node.isText)return node;pos-=offset+1}},Node.prototype.childAfter=function(pos){var ref=this.content.findIndex(pos),index=ref.index,offset=ref.offset;return{node:this.content.maybeChild(index),index:index,offset:offset}},Node.prototype.childBefore=function(pos){if(0==pos)return{node:null,index:0,offset:0};var ref=this.content.findIndex(pos),index=ref.index,offset=ref.offset;if(offset<pos)return{node:this.content.child(index),index:index,offset:offset};var node=this.content.child(index-1);return{node:node,index:index-1,offset:offset-node.nodeSize}},Node.prototype.resolve=function(pos){return ResolvedPos.resolveCached(this,pos)},Node.prototype.resolveNoCache=function(pos){return ResolvedPos.resolve(this,pos)},Node.prototype.rangeHasMark=function(from,to,type){var found=!1;return to>from&&this.nodesBetween(from,to,(function(node){return type.isInSet(node.marks)&&(found=!0),!found})),found},prototypeAccessors$3.isBlock.get=function(){return this.type.isBlock},prototypeAccessors$3.isTextblock.get=function(){return this.type.isTextblock},prototypeAccessors$3.inlineContent.get=function(){return this.type.inlineContent},prototypeAccessors$3.isInline.get=function(){return this.type.isInline},prototypeAccessors$3.isText.get=function(){return this.type.isText},prototypeAccessors$3.isLeaf.get=function(){return this.type.isLeaf},prototypeAccessors$3.isAtom.get=function(){return this.type.isAtom},Node.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var name=this.type.name;return this.content.size&&(name+="("+this.content.toStringInner()+")"),wrapMarks(this.marks,name)},Node.prototype.contentMatchAt=function(index){var match=this.type.contentMatch.matchFragment(this.content,0,index);if(!match)throw new Error("Called contentMatchAt on a node with invalid content");return match},Node.prototype.canReplace=function(from,to,replacement,start,end){void 0===replacement&&(replacement=Fragment.empty),void 0===start&&(start=0),void 0===end&&(end=replacement.childCount);var one=this.contentMatchAt(from).matchFragment(replacement,start,end),two=one&&one.matchFragment(this.content,to);if(!two||!two.validEnd)return!1;for(var i=start;i<end;i++)if(!this.type.allowsMarks(replacement.child(i).marks))return!1;return!0},Node.prototype.canReplaceWith=function(from,to,type,marks){if(marks&&!this.type.allowsMarks(marks))return!1;var start=this.contentMatchAt(from).matchType(type),end=start&&start.matchFragment(this.content,to);return!!end&&end.validEnd},Node.prototype.canAppend=function(other){return other.content.size?this.canReplace(this.childCount,this.childCount,other.content):this.type.compatibleContent(other.type)},Node.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));this.content.forEach((function(node){return node.check()}))},Node.prototype.toJSON=function(){var obj={type:this.type.name};for(var _ in this.attrs){obj.attrs=this.attrs;break}return this.content.size&&(obj.content=this.content.toJSON()),this.marks.length&&(obj.marks=this.marks.map((function(n){return n.toJSON()}))),obj},Node.fromJSON=function(schema,json){if(!json)throw new RangeError("Invalid input for Node.fromJSON");var marks=null;if(json.marks){if(!Array.isArray(json.marks))throw new RangeError("Invalid mark data for Node.fromJSON");marks=json.marks.map(schema.markFromJSON)}if("text"==json.type){if("string"!=typeof json.text)throw new RangeError("Invalid text node in JSON");return schema.text(json.text,marks)}var content=Fragment.fromJSON(schema,json.content);return schema.nodeType(json.type).create(json.attrs,content,marks)},Object.defineProperties(Node.prototype,prototypeAccessors$3);var TextNode=function(Node){function TextNode(type,attrs,content,marks){if(Node.call(this,type,attrs,null,marks),!content)throw new RangeError("Empty text nodes are not allowed");this.text=content}Node&&(TextNode.__proto__=Node),TextNode.prototype=Object.create(Node&&Node.prototype),TextNode.prototype.constructor=TextNode;var prototypeAccessors$1={textContent:{configurable:!0},nodeSize:{configurable:!0}};return TextNode.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):wrapMarks(this.marks,JSON.stringify(this.text))},prototypeAccessors$1.textContent.get=function(){return this.text},TextNode.prototype.textBetween=function(from,to){return this.text.slice(from,to)},prototypeAccessors$1.nodeSize.get=function(){return this.text.length},TextNode.prototype.mark=function(marks){return marks==this.marks?this:new TextNode(this.type,this.attrs,this.text,marks)},TextNode.prototype.withText=function(text){return text==this.text?this:new TextNode(this.type,this.attrs,text,this.marks)},TextNode.prototype.cut=function(from,to){return void 0===from&&(from=0),void 0===to&&(to=this.text.length),0==from&&to==this.text.length?this:this.withText(this.text.slice(from,to))},TextNode.prototype.eq=function(other){return this.sameMarkup(other)&&this.text==other.text},TextNode.prototype.toJSON=function(){var base=Node.prototype.toJSON.call(this);return base.text=this.text,base},Object.defineProperties(TextNode.prototype,prototypeAccessors$1),TextNode}(Node);function wrapMarks(marks,str){for(var i=marks.length-1;i>=0;i--)str=marks[i].type.name+"("+str+")";return str}var ContentMatch=function(validEnd){this.validEnd=validEnd,this.next=[],this.wrapCache=[]},prototypeAccessors$4={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};ContentMatch.parse=function(string,nodeTypes){var stream=new TokenStream(string,nodeTypes);if(null==stream.next)return ContentMatch.empty;var expr=parseExpr(stream);stream.next&&stream.err("Unexpected trailing text");var match=function(nfa){var labeled=Object.create(null);return explore(nullFrom(nfa,0));function explore(states){var out=[];states.forEach((function(node){nfa[node].forEach((function(ref){var term=ref.term,to=ref.to;if(term){var known=out.indexOf(term),set=known>-1&&out[known+1];nullFrom(nfa,to).forEach((function(node){set||out.push(term,set=[]),-1==set.indexOf(node)&&set.push(node)}))}}))}));for(var state=labeled[states.join(",")]=new ContentMatch(states.indexOf(nfa.length-1)>-1),i=0;i<out.length;i+=2){var states$1=out[i+1].sort(cmp);state.next.push(out[i],labeled[states$1.join(",")]||explore(states$1))}return state}}(function(expr){var nfa=[[]];return connect(compile(expr,0),node()),nfa;function node(){return nfa.push([])-1}function edge(from,to,term){var edge={term:term,to:to};return nfa[from].push(edge),edge}function connect(edges,to){edges.forEach((function(edge){return edge.to=to}))}function compile(expr,from){if("choice"==expr.type)return expr.exprs.reduce((function(out,expr){return out.concat(compile(expr,from))}),[]);if("seq"==expr.type)for(var i=0;;i++){var next=compile(expr.exprs[i],from);if(i==expr.exprs.length-1)return next;connect(next,from=node())}else{if("star"==expr.type){var loop=node();return edge(from,loop),connect(compile(expr.expr,loop),loop),[edge(loop)]}if("plus"==expr.type){var loop$1=node();return connect(compile(expr.expr,from),loop$1),connect(compile(expr.expr,loop$1),loop$1),[edge(loop$1)]}if("opt"==expr.type)return[edge(from)].concat(compile(expr.expr,from));if("range"==expr.type){for(var cur=from,i$1=0;i$1<expr.min;i$1++){var next$1=node();connect(compile(expr.expr,cur),next$1),cur=next$1}if(-1==expr.max)connect(compile(expr.expr,cur),cur);else for(var i$2=expr.min;i$2<expr.max;i$2++){var next$2=node();edge(cur,next$2),connect(compile(expr.expr,cur),next$2),cur=next$2}return[edge(cur)]}if("name"==expr.type)return[edge(from,null,expr.value)]}}}(expr));return function(match,stream){for(var i=0,work=[match];i<work.length;i++){for(var state=work[i],dead=!state.validEnd,nodes=[],j=0;j<state.next.length;j+=2){var node=state.next[j],next=state.next[j+1];nodes.push(node.name),!dead||node.isText||node.hasRequiredAttrs()||(dead=!1),-1==work.indexOf(next)&&work.push(next)}dead&&stream.err("Only non-generatable nodes ("+nodes.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(match,stream),match},ContentMatch.prototype.matchType=function(type){for(var i=0;i<this.next.length;i+=2)if(this.next[i]==type)return this.next[i+1];return null},ContentMatch.prototype.matchFragment=function(frag,start,end){void 0===start&&(start=0),void 0===end&&(end=frag.childCount);for(var cur=this,i=start;cur&&i<end;i++)cur=cur.matchType(frag.child(i).type);return cur},prototypeAccessors$4.inlineContent.get=function(){var first=this.next[0];return!!first&&first.isInline},prototypeAccessors$4.defaultType.get=function(){for(var i=0;i<this.next.length;i+=2){var type=this.next[i];if(!type.isText&&!type.hasRequiredAttrs())return type}},ContentMatch.prototype.compatible=function(other){for(var i=0;i<this.next.length;i+=2)for(var j=0;j<other.next.length;j+=2)if(this.next[i]==other.next[j])return!0;return!1},ContentMatch.prototype.fillBefore=function(after,toEnd,startIndex){void 0===toEnd&&(toEnd=!1),void 0===startIndex&&(startIndex=0);var seen=[this];return function search(match,types){var finished=match.matchFragment(after,startIndex);if(finished&&(!toEnd||finished.validEnd))return Fragment.from(types.map((function(tp){return tp.createAndFill()})));for(var i=0;i<match.next.length;i+=2){var type=match.next[i],next=match.next[i+1];if(!type.isText&&!type.hasRequiredAttrs()&&-1==seen.indexOf(next)){seen.push(next);var found=search(next,types.concat(type));if(found)return found}}}(this,[])},ContentMatch.prototype.findWrapping=function(target){for(var i=0;i<this.wrapCache.length;i+=2)if(this.wrapCache[i]==target)return this.wrapCache[i+1];var computed=this.computeWrapping(target);return this.wrapCache.push(target,computed),computed},ContentMatch.prototype.computeWrapping=function(target){for(var seen=Object.create(null),active=[{match:this,type:null,via:null}];active.length;){var current=active.shift(),match=current.match;if(match.matchType(target)){for(var result=[],obj=current;obj.type;obj=obj.via)result.push(obj.type);return result.reverse()}for(var i=0;i<match.next.length;i+=2){var type=match.next[i];type.isLeaf||type.hasRequiredAttrs()||type.name in seen||current.type&&!match.next[i+1].validEnd||(active.push({match:type.contentMatch,type:type,via:current}),seen[type.name]=!0)}}},prototypeAccessors$4.edgeCount.get=function(){return this.next.length>>1},ContentMatch.prototype.edge=function(n){var i=n<<1;if(i>=this.next.length)throw new RangeError("There's no "+n+"th edge in this content match");return{type:this.next[i],next:this.next[i+1]}},ContentMatch.prototype.toString=function(){var seen=[];return function scan(m){seen.push(m);for(var i=1;i<m.next.length;i+=2)-1==seen.indexOf(m.next[i])&&scan(m.next[i])}(this),seen.map((function(m,i){for(var out=i+(m.validEnd?"*":" ")+" ",i$1=0;i$1<m.next.length;i$1+=2)out+=(i$1?", ":"")+m.next[i$1].name+"->"+seen.indexOf(m.next[i$1+1]);return out})).join("\n")},Object.defineProperties(ContentMatch.prototype,prototypeAccessors$4),ContentMatch.empty=new ContentMatch(!0);var TokenStream=function(string,nodeTypes){this.string=string,this.nodeTypes=nodeTypes,this.inline=null,this.pos=0,this.tokens=string.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.unshift()},prototypeAccessors$1$2={next:{configurable:!0}};function parseExpr(stream){var exprs=[];do{exprs.push(parseExprSeq(stream))}while(stream.eat("|"));return 1==exprs.length?exprs[0]:{type:"choice",exprs:exprs}}function parseExprSeq(stream){var exprs=[];do{exprs.push(parseExprSubscript(stream))}while(stream.next&&")"!=stream.next&&"|"!=stream.next);return 1==exprs.length?exprs[0]:{type:"seq",exprs:exprs}}function parseExprSubscript(stream){for(var expr=function(stream){if(stream.eat("(")){var expr=parseExpr(stream);return stream.eat(")")||stream.err("Missing closing paren"),expr}if(!/\W/.test(stream.next)){var exprs=function(stream,name){var types=stream.nodeTypes,type=types[name];if(type)return[type];var result=[];for(var typeName in types){var type$1=types[typeName];type$1.groups.indexOf(name)>-1&&result.push(type$1)}0==result.length&&stream.err("No node type or group '"+name+"' found");return result}(stream,stream.next).map((function(type){return null==stream.inline?stream.inline=type.isInline:stream.inline!=type.isInline&&stream.err("Mixing inline and block content"),{type:"name",value:type}}));return stream.pos++,1==exprs.length?exprs[0]:{type:"choice",exprs:exprs}}stream.err("Unexpected token '"+stream.next+"'")}(stream);;)if(stream.eat("+"))expr={type:"plus",expr:expr};else if(stream.eat("*"))expr={type:"star",expr:expr};else if(stream.eat("?"))expr={type:"opt",expr:expr};else{if(!stream.eat("{"))break;expr=parseExprRange(stream,expr)}return expr}function parseNum(stream){/\D/.test(stream.next)&&stream.err("Expected number, got '"+stream.next+"'");var result=Number(stream.next);return stream.pos++,result}function parseExprRange(stream,expr){var min=parseNum(stream),max=min;return stream.eat(",")&&(max="}"!=stream.next?parseNum(stream):-1),stream.eat("}")||stream.err("Unclosed braced range"),{type:"range",min:min,max:max,expr:expr}}function cmp(a,b){return b-a}function nullFrom(nfa,node){var result=[];return function scan(node){var edges=nfa[node];if(1==edges.length&&!edges[0].term)return scan(edges[0].to);result.push(node);for(var i=0;i<edges.length;i++){var ref=edges[i],term=ref.term,to=ref.to;term||-1!=result.indexOf(to)||scan(to)}}(node),result.sort(cmp)}function defaultAttrs(attrs){var defaults=Object.create(null);for(var attrName in attrs){var attr=attrs[attrName];if(!attr.hasDefault)return null;defaults[attrName]=attr.default}return defaults}function computeAttrs(attrs,value){var built=Object.create(null);for(var name in attrs){var given=value&&value[name];if(void 0===given){var attr=attrs[name];if(!attr.hasDefault)throw new RangeError("No value supplied for attribute "+name);given=attr.default}built[name]=given}return built}function initAttrs(attrs){var result=Object.create(null);if(attrs)for(var name in attrs)result[name]=new Attribute(attrs[name]);return result}prototypeAccessors$1$2.next.get=function(){return this.tokens[this.pos]},TokenStream.prototype.eat=function(tok){return this.next==tok&&(this.pos++||!0)},TokenStream.prototype.err=function(str){throw new SyntaxError(str+" (in content expression '"+this.string+"')")},Object.defineProperties(TokenStream.prototype,prototypeAccessors$1$2);var NodeType=function(name,schema,spec){this.name=name,this.schema=schema,this.spec=spec,this.groups=spec.group?spec.group.split(" "):[],this.attrs=initAttrs(spec.attrs),this.defaultAttrs=defaultAttrs(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(spec.inline||"text"==name),this.isText="text"==name},prototypeAccessors$5={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};prototypeAccessors$5.isInline.get=function(){return!this.isBlock},prototypeAccessors$5.isTextblock.get=function(){return this.isBlock&&this.inlineContent},prototypeAccessors$5.isLeaf.get=function(){return this.contentMatch==ContentMatch.empty},prototypeAccessors$5.isAtom.get=function(){return this.isLeaf||this.spec.atom},NodeType.prototype.hasRequiredAttrs=function(){for(var n in this.attrs)if(this.attrs[n].isRequired)return!0;return!1},NodeType.prototype.compatibleContent=function(other){return this==other||this.contentMatch.compatible(other.contentMatch)},NodeType.prototype.computeAttrs=function(attrs){return!attrs&&this.defaultAttrs?this.defaultAttrs:computeAttrs(this.attrs,attrs)},NodeType.prototype.create=function(attrs,content,marks){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Node(this,this.computeAttrs(attrs),Fragment.from(content),Mark.setFrom(marks))},NodeType.prototype.createChecked=function(attrs,content,marks){if(content=Fragment.from(content),!this.validContent(content))throw new RangeError("Invalid content for node "+this.name);return new Node(this,this.computeAttrs(attrs),content,Mark.setFrom(marks))},NodeType.prototype.createAndFill=function(attrs,content,marks){if(attrs=this.computeAttrs(attrs),(content=Fragment.from(content)).size){var before=this.contentMatch.fillBefore(content);if(!before)return null;content=before.append(content)}var after=this.contentMatch.matchFragment(content).fillBefore(Fragment.empty,!0);return after?new Node(this,attrs,content.append(after),Mark.setFrom(marks)):null},NodeType.prototype.validContent=function(content){var result=this.contentMatch.matchFragment(content);if(!result||!result.validEnd)return!1;for(var i=0;i<content.childCount;i++)if(!this.allowsMarks(content.child(i).marks))return!1;return!0},NodeType.prototype.allowsMarkType=function(markType){return null==this.markSet||this.markSet.indexOf(markType)>-1},NodeType.prototype.allowsMarks=function(marks){if(null==this.markSet)return!0;for(var i=0;i<marks.length;i++)if(!this.allowsMarkType(marks[i].type))return!1;return!0},NodeType.prototype.allowedMarks=function(marks){if(null==this.markSet)return marks;for(var copy,i=0;i<marks.length;i++)this.allowsMarkType(marks[i].type)?copy&&copy.push(marks[i]):copy||(copy=marks.slice(0,i));return copy?copy.length?copy:Mark.empty:marks},NodeType.compile=function(nodes,schema){var result=Object.create(null);nodes.forEach((function(name,spec){return result[name]=new NodeType(name,schema,spec)}));var topType=schema.spec.topNode||"doc";if(!result[topType])throw new RangeError("Schema is missing its top node type ('"+topType+"')");if(!result.text)throw new RangeError("Every schema needs a 'text' type");for(var _ in result.text.attrs)throw new RangeError("The text node type should not have attributes");return result},Object.defineProperties(NodeType.prototype,prototypeAccessors$5);var Attribute=function(options){this.hasDefault=Object.prototype.hasOwnProperty.call(options,"default"),this.default=options.default},prototypeAccessors$1$3={isRequired:{configurable:!0}};prototypeAccessors$1$3.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(Attribute.prototype,prototypeAccessors$1$3);var MarkType=function(name,rank,schema,spec){this.name=name,this.schema=schema,this.spec=spec,this.attrs=initAttrs(spec.attrs),this.rank=rank,this.excluded=null;var defaults=defaultAttrs(this.attrs);this.instance=defaults&&new Mark(this,defaults)};MarkType.prototype.create=function(attrs){return!attrs&&this.instance?this.instance:new Mark(this,computeAttrs(this.attrs,attrs))},MarkType.compile=function(marks,schema){var result=Object.create(null),rank=0;return marks.forEach((function(name,spec){return result[name]=new MarkType(name,rank++,schema,spec)})),result},MarkType.prototype.removeFromSet=function(set){for(var i=0;i<set.length;i++)if(set[i].type==this)return set.slice(0,i).concat(set.slice(i+1));return set},MarkType.prototype.isInSet=function(set){for(var i=0;i<set.length;i++)if(set[i].type==this)return set[i]},MarkType.prototype.excludes=function(other){return this.excluded.indexOf(other)>-1};var index_es_Schema=function(spec){for(var prop in this.spec={},spec)this.spec[prop]=spec[prop];this.spec.nodes=index_es.from(spec.nodes),this.spec.marks=index_es.from(spec.marks),this.nodes=NodeType.compile(this.spec.nodes,this),this.marks=MarkType.compile(this.spec.marks,this);var contentExprCache=Object.create(null);for(var prop$1 in this.nodes){if(prop$1 in this.marks)throw new RangeError(prop$1+" can not be both a node and a mark");var type=this.nodes[prop$1],contentExpr=type.spec.content||"",markExpr=type.spec.marks;type.contentMatch=contentExprCache[contentExpr]||(contentExprCache[contentExpr]=ContentMatch.parse(contentExpr,this.nodes)),type.inlineContent=type.contentMatch.inlineContent,type.markSet="_"==markExpr?null:markExpr?gatherMarks(this,markExpr.split(" ")):""!=markExpr&&type.inlineContent?null:[]}for(var prop$2 in this.marks){var type$1=this.marks[prop$2],excl=type$1.spec.excludes;type$1.excluded=null==excl?[type$1]:""==excl?[]:gatherMarks(this,excl.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function gatherMarks(schema,marks){for(var found=[],i=0;i<marks.length;i++){var name=marks[i],mark=schema.marks[name],ok=mark;if(mark)found.push(mark);else for(var prop in schema.marks){var mark$1=schema.marks[prop];("_"==name||mark$1.spec.group&&mark$1.spec.group.split(" ").indexOf(name)>-1)&&found.push(ok=mark$1)}if(!ok)throw new SyntaxError("Unknown mark type: '"+marks[i]+"'")}return found}index_es_Schema.prototype.node=function(type,attrs,content,marks){if("string"==typeof type)type=this.nodeType(type);else{if(!(type instanceof NodeType))throw new RangeError("Invalid node type: "+type);if(type.schema!=this)throw new RangeError("Node type from different schema used ("+type.name+")")}return type.createChecked(attrs,content,marks)},index_es_Schema.prototype.text=function(text$1,marks){var type=this.nodes.text;return new TextNode(type,type.defaultAttrs,text$1,Mark.setFrom(marks))},index_es_Schema.prototype.mark=function(type,attrs){return"string"==typeof type&&(type=this.marks[type]),type.create(attrs)},index_es_Schema.prototype.nodeFromJSON=function(json){return Node.fromJSON(this,json)},index_es_Schema.prototype.markFromJSON=function(json){return Mark.fromJSON(this,json)},index_es_Schema.prototype.nodeType=function(name){var found=this.nodes[name];if(!found)throw new RangeError("Unknown node type: "+name);return found};var DOMParser=function(schema,rules){var this$1=this;this.schema=schema,this.rules=rules,this.tags=[],this.styles=[],rules.forEach((function(rule){rule.tag?this$1.tags.push(rule):rule.style&&this$1.styles.push(rule)})),this.normalizeLists=!this.tags.some((function(r){if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;var node=schema.nodes[r.node];return node.contentMatch.matchType(node)}))};DOMParser.prototype.parse=function(dom,options){void 0===options&&(options={});var context=new ParseContext(this,options,!1);return context.addAll(dom,null,options.from,options.to),context.finish()},DOMParser.prototype.parseSlice=function(dom,options){void 0===options&&(options={});var context=new ParseContext(this,options,!0);return context.addAll(dom,null,options.from,options.to),Slice.maxOpen(context.finish())},DOMParser.prototype.matchTag=function(dom,context){for(var i=0;i<this.tags.length;i++){var rule=this.tags[i];if(matches(dom,rule.tag)&&(void 0===rule.namespace||dom.namespaceURI==rule.namespace)&&(!rule.context||context.matchesContext(rule.context))){if(rule.getAttrs){var result=rule.getAttrs(dom);if(!1===result)continue;rule.attrs=result}return rule}}},DOMParser.prototype.matchStyle=function(prop,value,context){for(var i=0;i<this.styles.length;i++){var rule=this.styles[i];if(!(0!=rule.style.indexOf(prop)||rule.context&&!context.matchesContext(rule.context)||rule.style.length>prop.length&&(61!=rule.style.charCodeAt(prop.length)||rule.style.slice(prop.length+1)!=value))){if(rule.getAttrs){var result=rule.getAttrs(value);if(!1===result)continue;rule.attrs=result}return rule}}},DOMParser.schemaRules=function(schema){var result=[];function insert(rule){for(var priority=null==rule.priority?50:rule.priority,i=0;i<result.length;i++){var next=result[i];if((null==next.priority?50:next.priority)<priority)break}result.splice(i,0,rule)}var loop=function(name){var rules=schema.marks[name].spec.parseDOM;rules&&rules.forEach((function(rule){insert(rule=copy(rule)),rule.mark=name}))};for(var name in schema.marks)loop(name);var rules$1;for(var name$1 in schema.nodes)rules$1=void 0,(rules$1=schema.nodes[name$1].spec.parseDOM)&&rules$1.forEach((function(rule){insert(rule=copy(rule)),rule.node=name$1}));return result},DOMParser.fromSchema=function(schema){return schema.cached.domParser||(schema.cached.domParser=new DOMParser(schema,DOMParser.schemaRules(schema)))};var blockTags={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ignoreTags={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},listTags={ol:!0,ul:!0};function wsOptionsFor(preserveWhitespace){return(preserveWhitespace?1:0)|("full"===preserveWhitespace?2:0)}var NodeContext=function(type,attrs,marks,pendingMarks,solid,match,options){this.type=type,this.attrs=attrs,this.solid=solid,this.match=match||(4&options?null:type.contentMatch),this.options=options,this.content=[],this.marks=marks,this.activeMarks=Mark.none,this.pendingMarks=pendingMarks,this.stashMarks=[]};NodeContext.prototype.findWrapping=function(node){if(!this.match){if(!this.type)return[];var fill=this.type.contentMatch.fillBefore(Fragment.from(node));if(!fill){var wrap,start=this.type.contentMatch;return(wrap=start.findWrapping(node.type))?(this.match=start,wrap):null}this.match=this.type.contentMatch.matchFragment(fill)}return this.match.findWrapping(node.type)},NodeContext.prototype.finish=function(openEnd){if(!(1&this.options)){var m,last=this.content[this.content.length-1];last&&last.isText&&(m=/[ \t\r\n\u000c]+$/.exec(last.text))&&(last.text.length==m[0].length?this.content.pop():this.content[this.content.length-1]=last.withText(last.text.slice(0,last.text.length-m[0].length)))}var content=Fragment.from(this.content);return!openEnd&&this.match&&(content=content.append(this.match.fillBefore(Fragment.empty,!0))),this.type?this.type.create(this.attrs,content,this.marks):content},NodeContext.prototype.popFromStashMark=function(markType){for(var i=this.stashMarks.length-1;i>=0;i--)if(this.stashMarks[i].type==markType)return this.stashMarks.splice(i,1)[0]},NodeContext.prototype.applyPending=function(nextType){for(var i=0,pending=this.pendingMarks;i<pending.length;i++){var mark=pending[i];if((this.type?this.type.allowsMarkType(mark.type):markMayApply(mark.type,nextType))&&!mark.isInSet(this.activeMarks)){var found=findSameTypeInSet(mark,this.activeMarks);found&&this.stashMarks.push(found),this.activeMarks=mark.addToSet(this.activeMarks),this.pendingMarks=mark.removeFromSet(this.pendingMarks)}}};var ParseContext=function(parser,options,open){this.parser=parser,this.options=options,this.isOpen=open;var topContext,topNode=options.topNode,topOptions=wsOptionsFor(options.preserveWhitespace)|(open?4:0);topContext=topNode?new NodeContext(topNode.type,topNode.attrs,Mark.none,Mark.none,!0,options.topMatch||topNode.type.contentMatch,topOptions):new NodeContext(open?null:parser.schema.topNodeType,null,Mark.none,Mark.none,!0,null,topOptions),this.nodes=[topContext],this.open=0,this.find=options.findPositions,this.needsBlock=!1},prototypeAccessors$6={top:{configurable:!0},currentPos:{configurable:!0}};function matches(dom,selector){return(dom.matches||dom.msMatchesSelector||dom.webkitMatchesSelector||dom.mozMatchesSelector).call(dom,selector)}function copy(obj){var copy={};for(var prop in obj)copy[prop]=obj[prop];return copy}function markMayApply(markType,nodeType){var nodes=nodeType.schema.nodes,loop=function(name){var parent=nodes[name];if(parent.allowsMarkType(markType)){var seen=[],scan=function(match){seen.push(match);for(var i=0;i<match.edgeCount;i++){var ref=match.edge(i),type=ref.type,next=ref.next;if(type==nodeType)return!0;if(seen.indexOf(next)<0&&scan(next))return!0}};return scan(parent.contentMatch)?{v:!0}:void 0}};for(var name in nodes){var returned=loop(name);if(returned)return returned.v}}function findSameTypeInSet(mark,set){for(var i=0;i<set.length;i++)if(mark.type==set[i].type)return set[i]}prototypeAccessors$6.top.get=function(){return this.nodes[this.open]},ParseContext.prototype.addDOM=function(dom){if(3==dom.nodeType)this.addTextNode(dom);else if(1==dom.nodeType){var style=dom.getAttribute("style"),marks=style?this.readStyles(function(style){var m,re=/\s*([\w-]+)\s*:\s*([^;]+)/g,result=[];for(;m=re.exec(style);)result.push(m[1],m[2].trim());return result}(style)):null,top=this.top;if(null!=marks)for(var i=0;i<marks.length;i++)this.addPendingMark(marks[i]);if(this.addElement(dom),null!=marks)for(var i$1=0;i$1<marks.length;i$1++)this.removePendingMark(marks[i$1],top)}},ParseContext.prototype.addTextNode=function(dom){var value=dom.nodeValue,top=this.top;if((top.type?top.type.inlineContent:top.content.length&&top.content[0].isInline)||/[^ \t\r\n\u000c]/.test(value)){if(1&top.options)2&top.options||(value=value.replace(/\r?\n|\r/g," "));else if(value=value.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(value)&&this.open==this.nodes.length-1){var nodeBefore=top.content[top.content.length-1],domNodeBefore=dom.previousSibling;(!nodeBefore||domNodeBefore&&"BR"==domNodeBefore.nodeName||nodeBefore.isText&&/[ \t\r\n\u000c]$/.test(nodeBefore.text))&&(value=value.slice(1))}value&&this.insertNode(this.parser.schema.text(value)),this.findInText(dom)}else this.findInside(dom)},ParseContext.prototype.addElement=function(dom){var name=dom.nodeName.toLowerCase();listTags.hasOwnProperty(name)&&this.parser.normalizeLists&&function(dom){for(var child=dom.firstChild,prevItem=null;child;child=child.nextSibling){var name=1==child.nodeType?child.nodeName.toLowerCase():null;name&&listTags.hasOwnProperty(name)&&prevItem?(prevItem.appendChild(child),child=prevItem):"li"==name?prevItem=child:name&&(prevItem=null)}}(dom);var rule=this.options.ruleFromNode&&this.options.ruleFromNode(dom)||this.parser.matchTag(dom,this);if(rule?rule.ignore:ignoreTags.hasOwnProperty(name))this.findInside(dom);else if(!rule||rule.skip||rule.closeParent){rule&&rule.closeParent?this.open=Math.max(0,this.open-1):rule&&rule.skip.nodeType&&(dom=rule.skip);var sync,top=this.top,oldNeedsBlock=this.needsBlock;if(blockTags.hasOwnProperty(name))sync=!0,top.type||(this.needsBlock=!0);else if(!dom.firstChild)return void this.leafFallback(dom);this.addAll(dom),sync&&this.sync(top),this.needsBlock=oldNeedsBlock}else this.addElementByRule(dom,rule)},ParseContext.prototype.leafFallback=function(dom){"BR"==dom.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(dom.ownerDocument.createTextNode("\n"))},ParseContext.prototype.readStyles=function(styles){for(var marks=Mark.none,i=0;i<styles.length;i+=2){var rule=this.parser.matchStyle(styles[i],styles[i+1],this);if(rule){if(rule.ignore)return null;marks=this.parser.schema.marks[rule.mark].create(rule.attrs).addToSet(marks)}}return marks},ParseContext.prototype.addElementByRule=function(dom,rule){var sync,nodeType,mark,this$1=this;rule.node?(nodeType=this.parser.schema.nodes[rule.node]).isLeaf?this.insertNode(nodeType.create(rule.attrs))||this.leafFallback(dom):sync=this.enter(nodeType,rule.attrs,rule.preserveWhitespace):(mark=this.parser.schema.marks[rule.mark].create(rule.attrs),this.addPendingMark(mark));var startIn=this.top;if(nodeType&&nodeType.isLeaf)this.findInside(dom);else if(rule.getContent)this.findInside(dom),rule.getContent(dom,this.parser.schema).forEach((function(node){return this$1.insertNode(node)}));else{var contentDOM=rule.contentElement;"string"==typeof contentDOM?contentDOM=dom.querySelector(contentDOM):"function"==typeof contentDOM&&(contentDOM=contentDOM(dom)),contentDOM||(contentDOM=dom),this.findAround(dom,contentDOM,!0),this.addAll(contentDOM,sync)}sync&&(this.sync(startIn),this.open--),mark&&this.removePendingMark(mark,startIn)},ParseContext.prototype.addAll=function(parent,sync,startIndex,endIndex){for(var index=startIndex||0,dom=startIndex?parent.childNodes[startIndex]:parent.firstChild,end=null==endIndex?null:parent.childNodes[endIndex];dom!=end;dom=dom.nextSibling,++index)this.findAtPoint(parent,index),this.addDOM(dom),sync&&blockTags.hasOwnProperty(dom.nodeName.toLowerCase())&&this.sync(sync);this.findAtPoint(parent,index)},ParseContext.prototype.findPlace=function(node){for(var route,sync,depth=this.open;depth>=0;depth--){var cx=this.nodes[depth],found=cx.findWrapping(node);if(found&&(!route||route.length>found.length)&&(route=found,sync=cx,!found.length))break;if(cx.solid)break}if(!route)return!1;this.sync(sync);for(var i=0;i<route.length;i++)this.enterInner(route[i],null,!1);return!0},ParseContext.prototype.insertNode=function(node){if(node.isInline&&this.needsBlock&&!this.top.type){var block=this.textblockFromContext();block&&this.enterInner(block)}if(this.findPlace(node)){this.closeExtra();var top=this.top;top.applyPending(node.type),top.match&&(top.match=top.match.matchType(node.type));for(var marks=top.activeMarks,i=0;i<node.marks.length;i++)top.type&&!top.type.allowsMarkType(node.marks[i].type)||(marks=node.marks[i].addToSet(marks));return top.content.push(node.mark(marks)),!0}return!1},ParseContext.prototype.enter=function(type,attrs,preserveWS){var ok=this.findPlace(type.create(attrs));return ok&&this.enterInner(type,attrs,!0,preserveWS),ok},ParseContext.prototype.enterInner=function(type,attrs,solid,preserveWS){this.closeExtra();var top=this.top;top.applyPending(type),top.match=top.match&&top.match.matchType(type,attrs);var options=null==preserveWS?-5&top.options:wsOptionsFor(preserveWS);4&top.options&&0==top.content.length&&(options|=4),this.nodes.push(new NodeContext(type,attrs,top.activeMarks,top.pendingMarks,solid,null,options)),this.open++},ParseContext.prototype.closeExtra=function(openEnd){var i=this.nodes.length-1;if(i>this.open){for(;i>this.open;i--)this.nodes[i-1].content.push(this.nodes[i].finish(openEnd));this.nodes.length=this.open+1}},ParseContext.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},ParseContext.prototype.sync=function(to){for(var i=this.open;i>=0;i--)if(this.nodes[i]==to)return void(this.open=i)},prototypeAccessors$6.currentPos.get=function(){this.closeExtra();for(var pos=0,i=this.open;i>=0;i--){for(var content=this.nodes[i].content,j=content.length-1;j>=0;j--)pos+=content[j].nodeSize;i&&pos++}return pos},ParseContext.prototype.findAtPoint=function(parent,offset){if(this.find)for(var i=0;i<this.find.length;i++)this.find[i].node==parent&&this.find[i].offset==offset&&(this.find[i].pos=this.currentPos)},ParseContext.prototype.findInside=function(parent){if(this.find)for(var i=0;i<this.find.length;i++)null==this.find[i].pos&&1==parent.nodeType&&parent.contains(this.find[i].node)&&(this.find[i].pos=this.currentPos)},ParseContext.prototype.findAround=function(parent,content,before){if(parent!=content&&this.find)for(var i=0;i<this.find.length;i++){if(null==this.find[i].pos&&1==parent.nodeType&&parent.contains(this.find[i].node))content.compareDocumentPosition(this.find[i].node)&(before?2:4)&&(this.find[i].pos=this.currentPos)}},ParseContext.prototype.findInText=function(textNode){if(this.find)for(var i=0;i<this.find.length;i++)this.find[i].node==textNode&&(this.find[i].pos=this.currentPos-(textNode.nodeValue.length-this.find[i].offset))},ParseContext.prototype.matchesContext=function(context){var this$1=this;if(context.indexOf("|")>-1)return context.split(/\s*\|\s*/).some(this.matchesContext,this);var parts=context.split("/"),option=this.options.context,useRoot=!(this.isOpen||option&&option.parent.type!=this.nodes[0].type),minDepth=-(option?option.depth+1:0)+(useRoot?0:1),match=function(i,depth){for(;i>=0;i--){var part=parts[i];if(""==part){if(i==parts.length-1||0==i)continue;for(;depth>=minDepth;depth--)if(match(i-1,depth))return!0;return!1}var next=depth>0||0==depth&&useRoot?this$1.nodes[depth].type:option&&depth>=minDepth?option.node(depth-minDepth).type:null;if(!next||next.name!=part&&-1==next.groups.indexOf(part))return!1;depth--}return!0};return match(parts.length-1,this.open)},ParseContext.prototype.textblockFromContext=function(){var $context=this.options.context;if($context)for(var d=$context.depth;d>=0;d--){var deflt=$context.node(d).contentMatchAt($context.indexAfter(d)).defaultType;if(deflt&&deflt.isTextblock&&deflt.defaultAttrs)return deflt}for(var name in this.parser.schema.nodes){var type=this.parser.schema.nodes[name];if(type.isTextblock&&type.defaultAttrs)return type}},ParseContext.prototype.addPendingMark=function(mark){var found=findSameTypeInSet(mark,this.top.pendingMarks);found&&this.top.stashMarks.push(found),this.top.pendingMarks=mark.addToSet(this.top.pendingMarks)},ParseContext.prototype.removePendingMark=function(mark,upto){for(var depth=this.open;depth>=0;depth--){var level=this.nodes[depth];if(level.pendingMarks.lastIndexOf(mark)>-1)level.pendingMarks=mark.removeFromSet(level.pendingMarks);else{level.activeMarks=mark.removeFromSet(level.activeMarks);var stashMark=level.popFromStashMark(mark.type);stashMark&&(level.activeMarks=stashMark.addToSet(level.activeMarks))}if(level==upto)break}},Object.defineProperties(ParseContext.prototype,prototypeAccessors$6);var DOMSerializer=function(nodes,marks){this.nodes=nodes||{},this.marks=marks||{}};function gatherToDOM(obj){var result={};for(var name in obj){var toDOM=obj[name].spec.toDOM;toDOM&&(result[name]=toDOM)}return result}function doc(options){return options.document||window.document}DOMSerializer.prototype.serializeFragment=function(fragment,options,target){var this$1=this;void 0===options&&(options={}),target||(target=doc(options).createDocumentFragment());var top=target,active=null;return fragment.forEach((function(node){if(active||node.marks.length){active||(active=[]);for(var keep=0,rendered=0;keep<active.length&&rendered<node.marks.length;){var next=node.marks[rendered];if(this$1.marks[next.type.name]){if(!next.eq(active[keep])||!1===next.type.spec.spanning)break;keep+=2,rendered++}else rendered++}for(;keep<active.length;)top=active.pop(),active.pop();for(;rendered<node.marks.length;){var add=node.marks[rendered++],markDOM=this$1.serializeMark(add,node.isInline,options);markDOM&&(active.push(add,top),top.appendChild(markDOM.dom),top=markDOM.contentDOM||markDOM.dom)}}top.appendChild(this$1.serializeNode(node,options))})),target},DOMSerializer.prototype.serializeNode=function(node,options){void 0===options&&(options={});var ref=DOMSerializer.renderSpec(doc(options),this.nodes[node.type.name](node)),dom=ref.dom,contentDOM=ref.contentDOM;if(contentDOM){if(node.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");options.onContent?options.onContent(node,contentDOM,options):this.serializeFragment(node.content,options,contentDOM)}return dom},DOMSerializer.prototype.serializeNodeAndMarks=function(node,options){void 0===options&&(options={});for(var dom=this.serializeNode(node,options),i=node.marks.length-1;i>=0;i--){var wrap=this.serializeMark(node.marks[i],node.isInline,options);wrap&&((wrap.contentDOM||wrap.dom).appendChild(dom),dom=wrap.dom)}return dom},DOMSerializer.prototype.serializeMark=function(mark,inline,options){void 0===options&&(options={});var toDOM=this.marks[mark.type.name];return toDOM&&DOMSerializer.renderSpec(doc(options),toDOM(mark,inline))},DOMSerializer.renderSpec=function(doc,structure,xmlNS){if(void 0===xmlNS&&(xmlNS=null),"string"==typeof structure)return{dom:doc.createTextNode(structure)};if(null!=structure.nodeType)return{dom:structure};if(structure.dom&&null!=structure.dom.nodeType)return structure;var tagName=structure[0],space=tagName.indexOf(" ");space>0&&(xmlNS=tagName.slice(0,space),tagName=tagName.slice(space+1));var contentDOM=null,dom=xmlNS?doc.createElementNS(xmlNS,tagName):doc.createElement(tagName),attrs=structure[1],start=1;if(attrs&&"object"==typeof attrs&&null==attrs.nodeType&&!Array.isArray(attrs))for(var name in start=2,attrs)if(null!=attrs[name]){var space$1=name.indexOf(" ");space$1>0?dom.setAttributeNS(name.slice(0,space$1),name.slice(space$1+1),attrs[name]):dom.setAttribute(name,attrs[name])}for(var i=start;i<structure.length;i++){var child=structure[i];if(0===child){if(i<structure.length-1||i>start)throw new RangeError("Content hole must be the only child of its parent node");return{dom:dom,contentDOM:dom}}var ref=DOMSerializer.renderSpec(doc,child,xmlNS),inner=ref.dom,innerContent=ref.contentDOM;if(dom.appendChild(inner),innerContent){if(contentDOM)throw new RangeError("Multiple content holes");contentDOM=innerContent}}return{dom:dom,contentDOM:contentDOM}},DOMSerializer.fromSchema=function(schema){return schema.cached.domSerializer||(schema.cached.domSerializer=new DOMSerializer(this.nodesFromSchema(schema),this.marksFromSchema(schema)))},DOMSerializer.nodesFromSchema=function(schema){var result=gatherToDOM(schema.nodes);return result.text||(result.text=function(node){return node.text}),result},DOMSerializer.marksFromSchema=function(schema){return gatherToDOM(schema.marks)}},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(460),exports),__exportStar(__webpack_require__(462),exports),__exportStar(__webpack_require__(463),exports),__exportStar(__webpack_require__(464),exports),__exportStar(__webpack_require__(465),exports),__exportStar(__webpack_require__(466),exports)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"AllSelection",(function(){return AllSelection})),__webpack_require__.d(__webpack_exports__,"EditorState",(function(){return EditorState})),__webpack_require__.d(__webpack_exports__,"NodeSelection",(function(){return NodeSelection})),__webpack_require__.d(__webpack_exports__,"Plugin",(function(){return Plugin})),__webpack_require__.d(__webpack_exports__,"PluginKey",(function(){return PluginKey})),__webpack_require__.d(__webpack_exports__,"Selection",(function(){return Selection})),__webpack_require__.d(__webpack_exports__,"SelectionRange",(function(){return SelectionRange})),__webpack_require__.d(__webpack_exports__,"TextSelection",(function(){return TextSelection})),__webpack_require__.d(__webpack_exports__,"Transaction",(function(){return Transaction}));var prosemirror_model__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),prosemirror_transform__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5),classesById=Object.create(null),Selection=function($anchor,$head,ranges){this.ranges=ranges||[new SelectionRange($anchor.min($head),$anchor.max($head))],this.$anchor=$anchor,this.$head=$head},prototypeAccessors={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};prototypeAccessors.anchor.get=function(){return this.$anchor.pos},prototypeAccessors.head.get=function(){return this.$head.pos},prototypeAccessors.from.get=function(){return this.$from.pos},prototypeAccessors.to.get=function(){return this.$to.pos},prototypeAccessors.$from.get=function(){return this.ranges[0].$from},prototypeAccessors.$to.get=function(){return this.ranges[0].$to},prototypeAccessors.empty.get=function(){for(var ranges=this.ranges,i=0;i<ranges.length;i++)if(ranges[i].$from.pos!=ranges[i].$to.pos)return!1;return!0},Selection.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},Selection.prototype.replace=function(tr,content){void 0===content&&(content=prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice.empty);for(var lastNode=content.content.lastChild,lastParent=null,i=0;i<content.openEnd;i++)lastParent=lastNode,lastNode=lastNode.lastChild;for(var mapFrom=tr.steps.length,ranges=this.ranges,i$1=0;i$1<ranges.length;i$1++){var ref=ranges[i$1],$from=ref.$from,$to=ref.$to,mapping=tr.mapping.slice(mapFrom);tr.replaceRange(mapping.map($from.pos),mapping.map($to.pos),i$1?prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice.empty:content),0==i$1&&selectionToInsertionEnd(tr,mapFrom,(lastNode?lastNode.isInline:lastParent&&lastParent.isTextblock)?-1:1)}},Selection.prototype.replaceWith=function(tr,node){for(var mapFrom=tr.steps.length,ranges=this.ranges,i=0;i<ranges.length;i++){var ref=ranges[i],$from=ref.$from,$to=ref.$to,mapping=tr.mapping.slice(mapFrom),from=mapping.map($from.pos),to=mapping.map($to.pos);i?tr.deleteRange(from,to):(tr.replaceRangeWith(from,to,node),selectionToInsertionEnd(tr,mapFrom,node.isInline?-1:1))}},Selection.findFrom=function($pos,dir,textOnly){var inner=$pos.parent.inlineContent?new TextSelection($pos):findSelectionIn($pos.node(0),$pos.parent,$pos.pos,$pos.index(),dir,textOnly);if(inner)return inner;for(var depth=$pos.depth-1;depth>=0;depth--){var found=dir<0?findSelectionIn($pos.node(0),$pos.node(depth),$pos.before(depth+1),$pos.index(depth),dir,textOnly):findSelectionIn($pos.node(0),$pos.node(depth),$pos.after(depth+1),$pos.index(depth)+1,dir,textOnly);if(found)return found}},Selection.near=function($pos,bias){return void 0===bias&&(bias=1),this.findFrom($pos,bias)||this.findFrom($pos,-bias)||new AllSelection($pos.node(0))},Selection.atStart=function(doc){return findSelectionIn(doc,doc,0,0,1)||new AllSelection(doc)},Selection.atEnd=function(doc){return findSelectionIn(doc,doc,doc.content.size,doc.childCount,-1)||new AllSelection(doc)},Selection.fromJSON=function(doc,json){if(!json||!json.type)throw new RangeError("Invalid input for Selection.fromJSON");var cls=classesById[json.type];if(!cls)throw new RangeError("No selection type "+json.type+" defined");return cls.fromJSON(doc,json)},Selection.jsonID=function(id,selectionClass){if(id in classesById)throw new RangeError("Duplicate use of selection JSON ID "+id);return classesById[id]=selectionClass,selectionClass.prototype.jsonID=id,selectionClass},Selection.prototype.getBookmark=function(){return TextSelection.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(Selection.prototype,prototypeAccessors),Selection.prototype.visible=!0;var SelectionRange=function($from,$to){this.$from=$from,this.$to=$to},TextSelection=function(Selection){function TextSelection($anchor,$head){void 0===$head&&($head=$anchor),Selection.call(this,$anchor,$head)}Selection&&(TextSelection.__proto__=Selection),TextSelection.prototype=Object.create(Selection&&Selection.prototype),TextSelection.prototype.constructor=TextSelection;var prototypeAccessors$1={$cursor:{configurable:!0}};return prototypeAccessors$1.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},TextSelection.prototype.map=function(doc,mapping){var $head=doc.resolve(mapping.map(this.head));if(!$head.parent.inlineContent)return Selection.near($head);var $anchor=doc.resolve(mapping.map(this.anchor));return new TextSelection($anchor.parent.inlineContent?$anchor:$head,$head)},TextSelection.prototype.replace=function(tr,content){if(void 0===content&&(content=prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice.empty),Selection.prototype.replace.call(this,tr,content),content==prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice.empty){var marks=this.$from.marksAcross(this.$to);marks&&tr.ensureMarks(marks)}},TextSelection.prototype.eq=function(other){return other instanceof TextSelection&&other.anchor==this.anchor&&other.head==this.head},TextSelection.prototype.getBookmark=function(){return new TextBookmark(this.anchor,this.head)},TextSelection.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},TextSelection.fromJSON=function(doc,json){if("number"!=typeof json.anchor||"number"!=typeof json.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new TextSelection(doc.resolve(json.anchor),doc.resolve(json.head))},TextSelection.create=function(doc,anchor,head){void 0===head&&(head=anchor);var $anchor=doc.resolve(anchor);return new this($anchor,head==anchor?$anchor:doc.resolve(head))},TextSelection.between=function($anchor,$head,bias){var dPos=$anchor.pos-$head.pos;if(bias&&!dPos||(bias=dPos>=0?1:-1),!$head.parent.inlineContent){var found=Selection.findFrom($head,bias,!0)||Selection.findFrom($head,-bias,!0);if(!found)return Selection.near($head,bias);$head=found.$head}return $anchor.parent.inlineContent||(0==dPos||($anchor=(Selection.findFrom($anchor,-bias,!0)||Selection.findFrom($anchor,bias,!0)).$anchor).pos<$head.pos!=dPos<0)&&($anchor=$head),new TextSelection($anchor,$head)},Object.defineProperties(TextSelection.prototype,prototypeAccessors$1),TextSelection}(Selection);Selection.jsonID("text",TextSelection);var TextBookmark=function(anchor,head){this.anchor=anchor,this.head=head};TextBookmark.prototype.map=function(mapping){return new TextBookmark(mapping.map(this.anchor),mapping.map(this.head))},TextBookmark.prototype.resolve=function(doc){return TextSelection.between(doc.resolve(this.anchor),doc.resolve(this.head))};var NodeSelection=function(Selection){function NodeSelection($pos){var node=$pos.nodeAfter,$end=$pos.node(0).resolve($pos.pos+node.nodeSize);Selection.call(this,$pos,$end),this.node=node}return Selection&&(NodeSelection.__proto__=Selection),NodeSelection.prototype=Object.create(Selection&&Selection.prototype),NodeSelection.prototype.constructor=NodeSelection,NodeSelection.prototype.map=function(doc,mapping){var ref=mapping.mapResult(this.anchor),deleted=ref.deleted,pos=ref.pos,$pos=doc.resolve(pos);return deleted?Selection.near($pos):new NodeSelection($pos)},NodeSelection.prototype.content=function(){return new prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice(prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.from(this.node),0,0)},NodeSelection.prototype.eq=function(other){return other instanceof NodeSelection&&other.anchor==this.anchor},NodeSelection.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},NodeSelection.prototype.getBookmark=function(){return new NodeBookmark(this.anchor)},NodeSelection.fromJSON=function(doc,json){if("number"!=typeof json.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new NodeSelection(doc.resolve(json.anchor))},NodeSelection.create=function(doc,from){return new this(doc.resolve(from))},NodeSelection.isSelectable=function(node){return!node.isText&&!1!==node.type.spec.selectable},NodeSelection}(Selection);NodeSelection.prototype.visible=!1,Selection.jsonID("node",NodeSelection);var NodeBookmark=function(anchor){this.anchor=anchor};NodeBookmark.prototype.map=function(mapping){var ref=mapping.mapResult(this.anchor),deleted=ref.deleted,pos=ref.pos;return deleted?new TextBookmark(pos,pos):new NodeBookmark(pos)},NodeBookmark.prototype.resolve=function(doc){var $pos=doc.resolve(this.anchor),node=$pos.nodeAfter;return node&&NodeSelection.isSelectable(node)?new NodeSelection($pos):Selection.near($pos)};var AllSelection=function(Selection){function AllSelection(doc){Selection.call(this,doc.resolve(0),doc.resolve(doc.content.size))}return Selection&&(AllSelection.__proto__=Selection),AllSelection.prototype=Object.create(Selection&&Selection.prototype),AllSelection.prototype.constructor=AllSelection,AllSelection.prototype.replace=function(tr,content){if(void 0===content&&(content=prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice.empty),content==prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice.empty){tr.delete(0,tr.doc.content.size);var sel=Selection.atStart(tr.doc);sel.eq(tr.selection)||tr.setSelection(sel)}else Selection.prototype.replace.call(this,tr,content)},AllSelection.prototype.toJSON=function(){return{type:"all"}},AllSelection.fromJSON=function(doc){return new AllSelection(doc)},AllSelection.prototype.map=function(doc){return new AllSelection(doc)},AllSelection.prototype.eq=function(other){return other instanceof AllSelection},AllSelection.prototype.getBookmark=function(){return AllBookmark},AllSelection}(Selection);Selection.jsonID("all",AllSelection);var AllBookmark={map:function(){return this},resolve:function(doc){return new AllSelection(doc)}};function findSelectionIn(doc,node,pos,index,dir,text){if(node.inlineContent)return TextSelection.create(doc,pos);for(var i=index-(dir>0?0:1);dir>0?i<node.childCount:i>=0;i+=dir){var child=node.child(i);if(child.isAtom){if(!text&&NodeSelection.isSelectable(child))return NodeSelection.create(doc,pos-(dir<0?child.nodeSize:0))}else{var inner=findSelectionIn(doc,child,pos+dir,dir<0?child.childCount:0,dir,text);if(inner)return inner}pos+=child.nodeSize*dir}}function selectionToInsertionEnd(tr,startLen,bias){var last=tr.steps.length-1;if(!(last<startLen)){var end,step=tr.steps[last];if(step instanceof prosemirror_transform__WEBPACK_IMPORTED_MODULE_1__.ReplaceStep||step instanceof prosemirror_transform__WEBPACK_IMPORTED_MODULE_1__.ReplaceAroundStep)tr.mapping.maps[last].forEach((function(_from,_to,_newFrom,newTo){null==end&&(end=newTo)})),tr.setSelection(Selection.near(tr.doc.resolve(end),bias))}}var Transaction=function(Transform){function Transaction(state){Transform.call(this,state.doc),this.time=Date.now(),this.curSelection=state.selection,this.curSelectionFor=0,this.storedMarks=state.storedMarks,this.updated=0,this.meta=Object.create(null)}Transform&&(Transaction.__proto__=Transform),Transaction.prototype=Object.create(Transform&&Transform.prototype),Transaction.prototype.constructor=Transaction;var prototypeAccessors={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return prototypeAccessors.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},Transaction.prototype.setSelection=function(selection){if(selection.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=selection,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this},prototypeAccessors.selectionSet.get=function(){return(1&this.updated)>0},Transaction.prototype.setStoredMarks=function(marks){return this.storedMarks=marks,this.updated|=2,this},Transaction.prototype.ensureMarks=function(marks){return prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Mark.sameSet(this.storedMarks||this.selection.$from.marks(),marks)||this.setStoredMarks(marks),this},Transaction.prototype.addStoredMark=function(mark){return this.ensureMarks(mark.addToSet(this.storedMarks||this.selection.$head.marks()))},Transaction.prototype.removeStoredMark=function(mark){return this.ensureMarks(mark.removeFromSet(this.storedMarks||this.selection.$head.marks()))},prototypeAccessors.storedMarksSet.get=function(){return(2&this.updated)>0},Transaction.prototype.addStep=function(step,doc){Transform.prototype.addStep.call(this,step,doc),this.updated=-3&this.updated,this.storedMarks=null},Transaction.prototype.setTime=function(time){return this.time=time,this},Transaction.prototype.replaceSelection=function(slice){return this.selection.replace(this,slice),this},Transaction.prototype.replaceSelectionWith=function(node,inheritMarks){var selection=this.selection;return!1!==inheritMarks&&(node=node.mark(this.storedMarks||(selection.empty?selection.$from.marks():selection.$from.marksAcross(selection.$to)||prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Mark.none))),selection.replaceWith(this,node),this},Transaction.prototype.deleteSelection=function(){return this.selection.replace(this),this},Transaction.prototype.insertText=function(text,from,to){void 0===to&&(to=from);var schema=this.doc.type.schema;if(null==from)return text?this.replaceSelectionWith(schema.text(text),!0):this.deleteSelection();if(!text)return this.deleteRange(from,to);var marks=this.storedMarks;if(!marks){var $from=this.doc.resolve(from);marks=to==from?$from.marks():$from.marksAcross(this.doc.resolve(to))}return this.replaceRangeWith(from,to,schema.text(text,marks)),this.selection.empty||this.setSelection(Selection.near(this.selection.$to)),this},Transaction.prototype.setMeta=function(key,value){return this.meta["string"==typeof key?key:key.key]=value,this},Transaction.prototype.getMeta=function(key){return this.meta["string"==typeof key?key:key.key]},prototypeAccessors.isGeneric.get=function(){for(var _ in this.meta)return!1;return!0},Transaction.prototype.scrollIntoView=function(){return this.updated|=4,this},prototypeAccessors.scrolledIntoView.get=function(){return(4&this.updated)>0},Object.defineProperties(Transaction.prototype,prototypeAccessors),Transaction}(prosemirror_transform__WEBPACK_IMPORTED_MODULE_1__.Transform);function bind(f,self){return self&&f?f.bind(self):f}var FieldDesc=function(name,desc,self){this.name=name,this.init=bind(desc.init,self),this.apply=bind(desc.apply,self)},baseFields=[new FieldDesc("doc",{init:function(config){return config.doc||config.schema.topNodeType.createAndFill()},apply:function(tr){return tr.doc}}),new FieldDesc("selection",{init:function(config,instance){return config.selection||Selection.atStart(instance.doc)},apply:function(tr){return tr.selection}}),new FieldDesc("storedMarks",{init:function(config){return config.storedMarks||null},apply:function(tr,_marks,_old,state){return state.selection.$cursor?tr.storedMarks:null}}),new FieldDesc("scrollToSelection",{init:function(){return 0},apply:function(tr,prev){return tr.scrolledIntoView?prev+1:prev}})],Configuration=function(schema,plugins){var this$1=this;this.schema=schema,this.fields=baseFields.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),plugins&&plugins.forEach((function(plugin){if(this$1.pluginsByKey[plugin.key])throw new RangeError("Adding different instances of a keyed plugin ("+plugin.key+")");this$1.plugins.push(plugin),this$1.pluginsByKey[plugin.key]=plugin,plugin.spec.state&&this$1.fields.push(new FieldDesc(plugin.key,plugin.spec.state,plugin))}))},EditorState=function(config){this.config=config},prototypeAccessors$1={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};prototypeAccessors$1.schema.get=function(){return this.config.schema},prototypeAccessors$1.plugins.get=function(){return this.config.plugins},EditorState.prototype.apply=function(tr){return this.applyTransaction(tr).state},EditorState.prototype.filterTransaction=function(tr,ignore){void 0===ignore&&(ignore=-1);for(var i=0;i<this.config.plugins.length;i++)if(i!=ignore){var plugin=this.config.plugins[i];if(plugin.spec.filterTransaction&&!plugin.spec.filterTransaction.call(plugin,tr,this))return!1}return!0},EditorState.prototype.applyTransaction=function(rootTr){if(!this.filterTransaction(rootTr))return{state:this,transactions:[]};for(var trs=[rootTr],newState=this.applyInner(rootTr),seen=null;;){for(var haveNew=!1,i=0;i<this.config.plugins.length;i++){var plugin=this.config.plugins[i];if(plugin.spec.appendTransaction){var n=seen?seen[i].n:0,oldState=seen?seen[i].state:this,tr=n<trs.length&&plugin.spec.appendTransaction.call(plugin,n?trs.slice(n):trs,oldState,newState);if(tr&&newState.filterTransaction(tr,i)){if(tr.setMeta("appendedTransaction",rootTr),!seen){seen=[];for(var j=0;j<this.config.plugins.length;j++)seen.push(j<i?{state:newState,n:trs.length}:{state:this,n:0})}trs.push(tr),newState=newState.applyInner(tr),haveNew=!0}seen&&(seen[i]={state:newState,n:trs.length})}}if(!haveNew)return{state:newState,transactions:trs}}},EditorState.prototype.applyInner=function(tr){if(!tr.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var newInstance=new EditorState(this.config),fields=this.config.fields,i=0;i<fields.length;i++){var field=fields[i];newInstance[field.name]=field.apply(tr,this[field.name],this,newInstance)}for(var i$1=0;i$1<applyListeners.length;i$1++)applyListeners[i$1](this,tr,newInstance);return newInstance},prototypeAccessors$1.tr.get=function(){return new Transaction(this)},EditorState.create=function(config){for(var $config=new Configuration(config.schema||config.doc.type.schema,config.plugins),instance=new EditorState($config),i=0;i<$config.fields.length;i++)instance[$config.fields[i].name]=$config.fields[i].init(config,instance);return instance},EditorState.prototype.reconfigure=function(config){for(var $config=new Configuration(config.schema||this.schema,config.plugins),fields=$config.fields,instance=new EditorState($config),i=0;i<fields.length;i++){var name=fields[i].name;instance[name]=this.hasOwnProperty(name)?this[name]:fields[i].init(config,instance)}return instance},EditorState.prototype.toJSON=function(pluginFields){var result={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(result.storedMarks=this.storedMarks.map((function(m){return m.toJSON()}))),pluginFields&&"object"==typeof pluginFields)for(var prop in pluginFields){if("doc"==prop||"selection"==prop)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var plugin=pluginFields[prop],state=plugin.spec.state;state&&state.toJSON&&(result[prop]=state.toJSON.call(plugin,this[plugin.key]))}return result},EditorState.fromJSON=function(config,json,pluginFields){if(!json)throw new RangeError("Invalid input for EditorState.fromJSON");if(!config.schema)throw new RangeError("Required config field 'schema' missing");var $config=new Configuration(config.schema,config.plugins),instance=new EditorState($config);return $config.fields.forEach((function(field){if("doc"==field.name)instance.doc=prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Node.fromJSON(config.schema,json.doc);else if("selection"==field.name)instance.selection=Selection.fromJSON(instance.doc,json.selection);else if("storedMarks"==field.name)json.storedMarks&&(instance.storedMarks=json.storedMarks.map(config.schema.markFromJSON));else{if(pluginFields)for(var prop in pluginFields){var plugin=pluginFields[prop],state=plugin.spec.state;if(plugin.key==field.name&&state&&state.fromJSON&&Object.prototype.hasOwnProperty.call(json,prop))return void(instance[field.name]=state.fromJSON.call(plugin,config,json[prop],instance))}instance[field.name]=field.init(config,instance)}})),instance},EditorState.addApplyListener=function(f){applyListeners.push(f)},EditorState.removeApplyListener=function(f){var found=applyListeners.indexOf(f);found>-1&&applyListeners.splice(found,1)},Object.defineProperties(EditorState.prototype,prototypeAccessors$1);var applyListeners=[];var Plugin=function(spec){this.props={},spec.props&&function bindProps(obj,self,target){for(var prop in obj){var val=obj[prop];val instanceof Function?val=val.bind(self):"handleDOMEvents"==prop&&(val=bindProps(val,self,{})),target[prop]=val}return target}(spec.props,this,this.props),this.spec=spec,this.key=spec.key?spec.key.key:createKey("plugin")};Plugin.prototype.getState=function(state){return state[this.key]};var keys=Object.create(null);function createKey(name){return name in keys?name+"$"+ ++keys[name]:(keys[name]=0,name+"$")}var PluginKey=function(name){void 0===name&&(name="key"),this.key=createKey(name)};PluginKey.prototype.get=function(state){return state.config.pluginsByKey[this.key]},PluginKey.prototype.getState=function(state){return state[this.key]}},function(module,exports,__webpack_require__){var global=__webpack_require__(12),getOwnPropertyDescriptor=__webpack_require__(31).f,createNonEnumerableProperty=__webpack_require__(40),redefine=__webpack_require__(52),setGlobal=__webpack_require__(112),copyConstructorProperties=__webpack_require__(160),isForced=__webpack_require__(162);module.exports=function(options,source){var target,key,targetProperty,sourceProperty,descriptor,TARGET=options.target,GLOBAL=options.global,STATIC=options.stat;if(target=GLOBAL?global:STATIC?global[TARGET]||setGlobal(TARGET,{}):(global[TARGET]||{}).prototype)for(key in source){if(sourceProperty=source[key],targetProperty=options.noTargetGet?(descriptor=getOwnPropertyDescriptor(target,key))&&descriptor.value:target[key],!isForced(GLOBAL?key:TARGET+(STATIC?".":"#")+key,options.forced)&&void 0!==targetProperty){if(typeof sourceProperty==typeof targetProperty)continue;copyConstructorProperties(sourceProperty,targetProperty)}(options.sham||targetProperty&&targetProperty.sham)&&createNonEnumerableProperty(sourceProperty,"sham",!0),redefine(target,key,sourceProperty,options)}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"AddMarkStep",(function(){return AddMarkStep})),__webpack_require__.d(__webpack_exports__,"MapResult",(function(){return MapResult})),__webpack_require__.d(__webpack_exports__,"Mapping",(function(){return Mapping})),__webpack_require__.d(__webpack_exports__,"RemoveMarkStep",(function(){return RemoveMarkStep})),__webpack_require__.d(__webpack_exports__,"ReplaceAroundStep",(function(){return ReplaceAroundStep})),__webpack_require__.d(__webpack_exports__,"ReplaceStep",(function(){return ReplaceStep})),__webpack_require__.d(__webpack_exports__,"Step",(function(){return Step})),__webpack_require__.d(__webpack_exports__,"StepMap",(function(){return StepMap})),__webpack_require__.d(__webpack_exports__,"StepResult",(function(){return StepResult})),__webpack_require__.d(__webpack_exports__,"Transform",(function(){return Transform})),__webpack_require__.d(__webpack_exports__,"TransformError",(function(){return TransformError})),__webpack_require__.d(__webpack_exports__,"canJoin",(function(){return canJoin})),__webpack_require__.d(__webpack_exports__,"canSplit",(function(){return canSplit})),__webpack_require__.d(__webpack_exports__,"dropPoint",(function(){return dropPoint})),__webpack_require__.d(__webpack_exports__,"findWrapping",(function(){return findWrapping})),__webpack_require__.d(__webpack_exports__,"insertPoint",(function(){return insertPoint})),__webpack_require__.d(__webpack_exports__,"joinPoint",(function(){return joinPoint})),__webpack_require__.d(__webpack_exports__,"liftTarget",(function(){return liftTarget})),__webpack_require__.d(__webpack_exports__,"replaceStep",(function(){return replaceStep}));var prosemirror_model__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),factor16=Math.pow(2,16);function recoverIndex(value){return 65535&value}var MapResult=function(pos,deleted,recover){void 0===deleted&&(deleted=!1),void 0===recover&&(recover=null),this.pos=pos,this.deleted=deleted,this.recover=recover},StepMap=function(ranges,inverted){void 0===inverted&&(inverted=!1),this.ranges=ranges,this.inverted=inverted};StepMap.prototype.recover=function(value){var diff=0,index=recoverIndex(value);if(!this.inverted)for(var i=0;i<index;i++)diff+=this.ranges[3*i+2]-this.ranges[3*i+1];return this.ranges[3*index]+diff+function(value){return(value-(65535&value))/factor16}(value)},StepMap.prototype.mapResult=function(pos,assoc){return void 0===assoc&&(assoc=1),this._map(pos,assoc,!1)},StepMap.prototype.map=function(pos,assoc){return void 0===assoc&&(assoc=1),this._map(pos,assoc,!0)},StepMap.prototype._map=function(pos,assoc,simple){for(var diff=0,oldIndex=this.inverted?2:1,newIndex=this.inverted?1:2,i=0;i<this.ranges.length;i+=3){var start=this.ranges[i]-(this.inverted?diff:0);if(start>pos)break;var oldSize=this.ranges[i+oldIndex],newSize=this.ranges[i+newIndex],end=start+oldSize;if(pos<=end){var result=start+diff+((oldSize?pos==start?-1:pos==end?1:assoc:assoc)<0?0:newSize);if(simple)return result;var recover=pos==(assoc<0?start:end)?null:i/3+(pos-start)*factor16;return new MapResult(result,assoc<0?pos!=start:pos!=end,recover)}diff+=newSize-oldSize}return simple?pos+diff:new MapResult(pos+diff)},StepMap.prototype.touches=function(pos,recover){for(var diff=0,index=recoverIndex(recover),oldIndex=this.inverted?2:1,newIndex=this.inverted?1:2,i=0;i<this.ranges.length;i+=3){var start=this.ranges[i]-(this.inverted?diff:0);if(start>pos)break;var oldSize=this.ranges[i+oldIndex];if(pos<=start+oldSize&&i==3*index)return!0;diff+=this.ranges[i+newIndex]-oldSize}return!1},StepMap.prototype.forEach=function(f){for(var oldIndex=this.inverted?2:1,newIndex=this.inverted?1:2,i=0,diff=0;i<this.ranges.length;i+=3){var start=this.ranges[i],oldStart=start-(this.inverted?diff:0),newStart=start+(this.inverted?0:diff),oldSize=this.ranges[i+oldIndex],newSize=this.ranges[i+newIndex];f(oldStart,oldStart+oldSize,newStart,newStart+newSize),diff+=newSize-oldSize}},StepMap.prototype.invert=function(){return new StepMap(this.ranges,!this.inverted)},StepMap.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},StepMap.offset=function(n){return 0==n?StepMap.empty:new StepMap(n<0?[0,-n,0]:[0,0,n])},StepMap.empty=new StepMap([]);var Mapping=function(maps,mirror,from,to){this.maps=maps||[],this.from=from||0,this.to=null==to?this.maps.length:to,this.mirror=mirror};function TransformError(message){var err=Error.call(this,message);return err.__proto__=TransformError.prototype,err}Mapping.prototype.slice=function(from,to){return void 0===from&&(from=0),void 0===to&&(to=this.maps.length),new Mapping(this.maps,this.mirror,from,to)},Mapping.prototype.copy=function(){return new Mapping(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},Mapping.prototype.appendMap=function(map,mirrors){this.to=this.maps.push(map),null!=mirrors&&this.setMirror(this.maps.length-1,mirrors)},Mapping.prototype.appendMapping=function(mapping){for(var i=0,startSize=this.maps.length;i<mapping.maps.length;i++){var mirr=mapping.getMirror(i);this.appendMap(mapping.maps[i],null!=mirr&&mirr<i?startSize+mirr:null)}},Mapping.prototype.getMirror=function(n){if(this.mirror)for(var i=0;i<this.mirror.length;i++)if(this.mirror[i]==n)return this.mirror[i+(i%2?-1:1)]},Mapping.prototype.setMirror=function(n,m){this.mirror||(this.mirror=[]),this.mirror.push(n,m)},Mapping.prototype.appendMappingInverted=function(mapping){for(var i=mapping.maps.length-1,totalSize=this.maps.length+mapping.maps.length;i>=0;i--){var mirr=mapping.getMirror(i);this.appendMap(mapping.maps[i].invert(),null!=mirr&&mirr>i?totalSize-mirr-1:null)}},Mapping.prototype.invert=function(){var inverse=new Mapping;return inverse.appendMappingInverted(this),inverse},Mapping.prototype.map=function(pos,assoc){if(void 0===assoc&&(assoc=1),this.mirror)return this._map(pos,assoc,!0);for(var i=this.from;i<this.to;i++)pos=this.maps[i].map(pos,assoc);return pos},Mapping.prototype.mapResult=function(pos,assoc){return void 0===assoc&&(assoc=1),this._map(pos,assoc,!1)},Mapping.prototype._map=function(pos,assoc,simple){for(var deleted=!1,i=this.from;i<this.to;i++){var result=this.maps[i].mapResult(pos,assoc);if(null!=result.recover){var corr=this.getMirror(i);if(null!=corr&&corr>i&&corr<this.to){i=corr,pos=this.maps[corr].recover(result.recover);continue}}result.deleted&&(deleted=!0),pos=result.pos}return simple?pos:new MapResult(pos,deleted)},TransformError.prototype=Object.create(Error.prototype),TransformError.prototype.constructor=TransformError,TransformError.prototype.name="TransformError";var Transform=function(doc){this.doc=doc,this.steps=[],this.docs=[],this.mapping=new Mapping},prototypeAccessors={before:{configurable:!0},docChanged:{configurable:!0}};function mustOverride(){throw new Error("Override me")}prototypeAccessors.before.get=function(){return this.docs.length?this.docs[0]:this.doc},Transform.prototype.step=function(object){var result=this.maybeStep(object);if(result.failed)throw new TransformError(result.failed);return this},Transform.prototype.maybeStep=function(step){var result=step.apply(this.doc);return result.failed||this.addStep(step,result.doc),result},prototypeAccessors.docChanged.get=function(){return this.steps.length>0},Transform.prototype.addStep=function(step,doc){this.docs.push(this.doc),this.steps.push(step),this.mapping.appendMap(step.getMap()),this.doc=doc},Object.defineProperties(Transform.prototype,prototypeAccessors);var stepsByID=Object.create(null),Step=function(){};Step.prototype.apply=function(_doc){return mustOverride()},Step.prototype.getMap=function(){return StepMap.empty},Step.prototype.invert=function(_doc){return mustOverride()},Step.prototype.map=function(_mapping){return mustOverride()},Step.prototype.merge=function(_other){return null},Step.prototype.toJSON=function(){return mustOverride()},Step.fromJSON=function(schema,json){if(!json||!json.stepType)throw new RangeError("Invalid input for Step.fromJSON");var type=stepsByID[json.stepType];if(!type)throw new RangeError("No step type "+json.stepType+" defined");return type.fromJSON(schema,json)},Step.jsonID=function(id,stepClass){if(id in stepsByID)throw new RangeError("Duplicate use of step JSON ID "+id);return stepsByID[id]=stepClass,stepClass.prototype.jsonID=id,stepClass};var StepResult=function(doc,failed){this.doc=doc,this.failed=failed};StepResult.ok=function(doc){return new StepResult(doc,null)},StepResult.fail=function(message){return new StepResult(null,message)},StepResult.fromReplace=function(doc,from,to,slice){try{return StepResult.ok(doc.replace(from,to,slice))}catch(e){if(e instanceof prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.ReplaceError)return StepResult.fail(e.message);throw e}};var ReplaceStep=function(Step){function ReplaceStep(from,to,slice,structure){Step.call(this),this.from=from,this.to=to,this.slice=slice,this.structure=!!structure}return Step&&(ReplaceStep.__proto__=Step),ReplaceStep.prototype=Object.create(Step&&Step.prototype),ReplaceStep.prototype.constructor=ReplaceStep,ReplaceStep.prototype.apply=function(doc){return this.structure&&contentBetween(doc,this.from,this.to)?StepResult.fail("Structure replace would overwrite content"):StepResult.fromReplace(doc,this.from,this.to,this.slice)},ReplaceStep.prototype.getMap=function(){return new StepMap([this.from,this.to-this.from,this.slice.size])},ReplaceStep.prototype.invert=function(doc){return new ReplaceStep(this.from,this.from+this.slice.size,doc.slice(this.from,this.to))},ReplaceStep.prototype.map=function(mapping){var from=mapping.mapResult(this.from,1),to=mapping.mapResult(this.to,-1);return from.deleted&&to.deleted?null:new ReplaceStep(from.pos,Math.max(from.pos,to.pos),this.slice)},ReplaceStep.prototype.merge=function(other){if(!(other instanceof ReplaceStep)||other.structure!=this.structure)return null;if(this.from+this.slice.size!=other.from||this.slice.openEnd||other.slice.openStart){if(other.to!=this.from||this.slice.openStart||other.slice.openEnd)return null;var slice$1=this.slice.size+other.slice.size==0?prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice.empty:new prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice(other.slice.content.append(this.slice.content),other.slice.openStart,this.slice.openEnd);return new ReplaceStep(other.from,this.to,slice$1,this.structure)}var slice=this.slice.size+other.slice.size==0?prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice.empty:new prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice(this.slice.content.append(other.slice.content),this.slice.openStart,other.slice.openEnd);return new ReplaceStep(this.from,this.to+(other.to-other.from),slice,this.structure)},ReplaceStep.prototype.toJSON=function(){var json={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(json.slice=this.slice.toJSON()),this.structure&&(json.structure=!0),json},ReplaceStep.fromJSON=function(schema,json){if("number"!=typeof json.from||"number"!=typeof json.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ReplaceStep(json.from,json.to,prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice.fromJSON(schema,json.slice),!!json.structure)},ReplaceStep}(Step);Step.jsonID("replace",ReplaceStep);var ReplaceAroundStep=function(Step){function ReplaceAroundStep(from,to,gapFrom,gapTo,slice,insert,structure){Step.call(this),this.from=from,this.to=to,this.gapFrom=gapFrom,this.gapTo=gapTo,this.slice=slice,this.insert=insert,this.structure=!!structure}return Step&&(ReplaceAroundStep.__proto__=Step),ReplaceAroundStep.prototype=Object.create(Step&&Step.prototype),ReplaceAroundStep.prototype.constructor=ReplaceAroundStep,ReplaceAroundStep.prototype.apply=function(doc){if(this.structure&&(contentBetween(doc,this.from,this.gapFrom)||contentBetween(doc,this.gapTo,this.to)))return StepResult.fail("Structure gap-replace would overwrite content");var gap=doc.slice(this.gapFrom,this.gapTo);if(gap.openStart||gap.openEnd)return StepResult.fail("Gap is not a flat range");var inserted=this.slice.insertAt(this.insert,gap.content);return inserted?StepResult.fromReplace(doc,this.from,this.to,inserted):StepResult.fail("Content does not fit in gap")},ReplaceAroundStep.prototype.getMap=function(){return new StepMap([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},ReplaceAroundStep.prototype.invert=function(doc){var gap=this.gapTo-this.gapFrom;return new ReplaceAroundStep(this.from,this.from+this.slice.size+gap,this.from+this.insert,this.from+this.insert+gap,doc.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},ReplaceAroundStep.prototype.map=function(mapping){var from=mapping.mapResult(this.from,1),to=mapping.mapResult(this.to,-1),gapFrom=mapping.map(this.gapFrom,-1),gapTo=mapping.map(this.gapTo,1);return from.deleted&&to.deleted||gapFrom<from.pos||gapTo>to.pos?null:new ReplaceAroundStep(from.pos,to.pos,gapFrom,gapTo,this.slice,this.insert,this.structure)},ReplaceAroundStep.prototype.toJSON=function(){var json={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(json.slice=this.slice.toJSON()),this.structure&&(json.structure=!0),json},ReplaceAroundStep.fromJSON=function(schema,json){if("number"!=typeof json.from||"number"!=typeof json.to||"number"!=typeof json.gapFrom||"number"!=typeof json.gapTo||"number"!=typeof json.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ReplaceAroundStep(json.from,json.to,json.gapFrom,json.gapTo,prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice.fromJSON(schema,json.slice),json.insert,!!json.structure)},ReplaceAroundStep}(Step);function contentBetween(doc,from,to){for(var $from=doc.resolve(from),dist=to-from,depth=$from.depth;dist>0&&depth>0&&$from.indexAfter(depth)==$from.node(depth).childCount;)depth--,dist--;if(dist>0)for(var next=$from.node(depth).maybeChild($from.indexAfter(depth));dist>0;){if(!next||next.isLeaf)return!0;next=next.firstChild,dist--}return!1}function canCut(node,start,end){return(0==start||node.canReplace(start,node.childCount))&&(end==node.childCount||node.canReplace(0,end))}function liftTarget(range){for(var content=range.parent.content.cutByIndex(range.startIndex,range.endIndex),depth=range.depth;;--depth){var node=range.$from.node(depth),index=range.$from.index(depth),endIndex=range.$to.indexAfter(depth);if(depth<range.depth&&node.canReplace(index,endIndex,content))return depth;if(0==depth||node.type.spec.isolating||!canCut(node,index,endIndex))break}}function findWrapping(range,nodeType,attrs,innerRange){void 0===innerRange&&(innerRange=range);var around=function(range,type){var parent=range.parent,startIndex=range.startIndex,endIndex=range.endIndex,around=parent.contentMatchAt(startIndex).findWrapping(type);if(!around)return null;var outer=around.length?around[0]:type;return parent.canReplaceWith(startIndex,endIndex,outer)?around:null}(range,nodeType),inner=around&&function(range,type){var parent=range.parent,startIndex=range.startIndex,endIndex=range.endIndex,inner=parent.child(startIndex),inside=type.contentMatch.findWrapping(inner.type);if(!inside)return null;for(var innerMatch=(inside.length?inside[inside.length-1]:type).contentMatch,i=startIndex;innerMatch&&i<endIndex;i++)innerMatch=innerMatch.matchType(parent.child(i).type);if(!innerMatch||!innerMatch.validEnd)return null;return inside}(innerRange,nodeType);return inner?around.map(withAttrs).concat({type:nodeType,attrs:attrs}).concat(inner.map(withAttrs)):null}function withAttrs(type){return{type:type,attrs:null}}function canSplit(doc,pos,depth,typesAfter){void 0===depth&&(depth=1);var $pos=doc.resolve(pos),base=$pos.depth-depth,innerType=typesAfter&&typesAfter[typesAfter.length-1]||$pos.parent;if(base<0||$pos.parent.type.spec.isolating||!$pos.parent.canReplace($pos.index(),$pos.parent.childCount)||!innerType.type.validContent($pos.parent.content.cutByIndex($pos.index(),$pos.parent.childCount)))return!1;for(var d=$pos.depth-1,i=depth-2;d>base;d--,i--){var node=$pos.node(d),index$1=$pos.index(d);if(node.type.spec.isolating)return!1;var rest=node.content.cutByIndex(index$1,node.childCount),after=typesAfter&&typesAfter[i]||node;if(after!=node&&(rest=rest.replaceChild(0,after.type.create(after.attrs))),!node.canReplace(index$1+1,node.childCount)||!after.type.validContent(rest))return!1}var index=$pos.indexAfter(base),baseType=typesAfter&&typesAfter[0];return $pos.node(base).canReplaceWith(index,index,baseType?baseType.type:$pos.node(base+1).type)}function canJoin(doc,pos){var $pos=doc.resolve(pos),index=$pos.index();return joinable($pos.nodeBefore,$pos.nodeAfter)&&$pos.parent.canReplace(index,index+1)}function joinable(a,b){return a&&b&&!a.isLeaf&&a.canAppend(b)}function joinPoint(doc,pos,dir){void 0===dir&&(dir=-1);for(var $pos=doc.resolve(pos),d=$pos.depth;;d--){var before=void 0,after=void 0,index=$pos.index(d);if(d==$pos.depth?(before=$pos.nodeBefore,after=$pos.nodeAfter):dir>0?(before=$pos.node(d+1),index++,after=$pos.node(d).maybeChild(index)):(before=$pos.node(d).maybeChild(index-1),after=$pos.node(d+1)),before&&!before.isTextblock&&joinable(before,after)&&$pos.node(d).canReplace(index,index+1))return pos;if(0==d)break;pos=dir<0?$pos.before(d):$pos.after(d)}}function insertPoint(doc,pos,nodeType){var $pos=doc.resolve(pos);if($pos.parent.canReplaceWith($pos.index(),$pos.index(),nodeType))return pos;if(0==$pos.parentOffset)for(var d=$pos.depth-1;d>=0;d--){var index=$pos.index(d);if($pos.node(d).canReplaceWith(index,index,nodeType))return $pos.before(d+1);if(index>0)return null}if($pos.parentOffset==$pos.parent.content.size)for(var d$1=$pos.depth-1;d$1>=0;d$1--){var index$1=$pos.indexAfter(d$1);if($pos.node(d$1).canReplaceWith(index$1,index$1,nodeType))return $pos.after(d$1+1);if(index$1<$pos.node(d$1).childCount)return null}}function dropPoint(doc,pos,slice){var $pos=doc.resolve(pos);if(!slice.content.size)return pos;for(var content=slice.content,i=0;i<slice.openStart;i++)content=content.firstChild.content;for(var pass=1;pass<=(0==slice.openStart&&slice.size?2:1);pass++)for(var d=$pos.depth;d>=0;d--){var bias=d==$pos.depth?0:$pos.pos<=($pos.start(d+1)+$pos.end(d+1))/2?-1:1,insertPos=$pos.index(d)+(bias>0?1:0);if(1==pass?$pos.node(d).canReplace(insertPos,insertPos,content):$pos.node(d).contentMatchAt(insertPos).findWrapping(content.firstChild.type))return 0==bias?$pos.pos:bias<0?$pos.before(d+1):$pos.after(d+1)}return null}function mapFragment(fragment,f,parent){for(var mapped=[],i=0;i<fragment.childCount;i++){var child=fragment.child(i);child.content.size&&(child=child.copy(mapFragment(child.content,f,child))),child.isInline&&(child=f(child,parent,i)),mapped.push(child)}return prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.fromArray(mapped)}Step.jsonID("replaceAround",ReplaceAroundStep),Transform.prototype.lift=function(range,target){for(var $from=range.$from,$to=range.$to,depth=range.depth,gapStart=$from.before(depth+1),gapEnd=$to.after(depth+1),start=gapStart,end=gapEnd,before=prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.empty,openStart=0,d=depth,splitting=!1;d>target;d--)splitting||$from.index(d)>0?(splitting=!0,before=prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.from($from.node(d).copy(before)),openStart++):start--;for(var after=prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.empty,openEnd=0,d$1=depth,splitting$1=!1;d$1>target;d$1--)splitting$1||$to.after(d$1+1)<$to.end(d$1)?(splitting$1=!0,after=prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.from($to.node(d$1).copy(after)),openEnd++):end++;return this.step(new ReplaceAroundStep(start,end,gapStart,gapEnd,new prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice(before.append(after),openStart,openEnd),before.size-openStart,!0))},Transform.prototype.wrap=function(range,wrappers){for(var content=prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.empty,i=wrappers.length-1;i>=0;i--)content=prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.from(wrappers[i].type.create(wrappers[i].attrs,content));var start=range.start,end=range.end;return this.step(new ReplaceAroundStep(start,end,start,end,new prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice(content,0,0),wrappers.length,!0))},Transform.prototype.setBlockType=function(from,to,type,attrs){var this$1=this;if(void 0===to&&(to=from),!type.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var mapFrom=this.steps.length;return this.doc.nodesBetween(from,to,(function(node,pos){if(node.isTextblock&&!node.hasMarkup(type,attrs)&&function(doc,pos,type){var $pos=doc.resolve(pos),index=$pos.index();return $pos.parent.canReplaceWith(index,index+1,type)}(this$1.doc,this$1.mapping.slice(mapFrom).map(pos),type)){this$1.clearIncompatible(this$1.mapping.slice(mapFrom).map(pos,1),type);var mapping=this$1.mapping.slice(mapFrom),startM=mapping.map(pos,1),endM=mapping.map(pos+node.nodeSize,1);return this$1.step(new ReplaceAroundStep(startM,endM,startM+1,endM-1,new prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice(prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.from(type.create(attrs,null,node.marks)),0,0),1,!0)),!1}})),this},Transform.prototype.setNodeMarkup=function(pos,type,attrs,marks){var node=this.doc.nodeAt(pos);if(!node)throw new RangeError("No node at given position");type||(type=node.type);var newNode=type.create(attrs,null,marks||node.marks);if(node.isLeaf)return this.replaceWith(pos,pos+node.nodeSize,newNode);if(!type.validContent(node.content))throw new RangeError("Invalid content for node type "+type.name);return this.step(new ReplaceAroundStep(pos,pos+node.nodeSize,pos+1,pos+node.nodeSize-1,new prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice(prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.from(newNode),0,0),1,!0))},Transform.prototype.split=function(pos,depth,typesAfter){void 0===depth&&(depth=1);for(var $pos=this.doc.resolve(pos),before=prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.empty,after=prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.empty,d=$pos.depth,e=$pos.depth-depth,i=depth-1;d>e;d--,i--){before=prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.from($pos.node(d).copy(before));var typeAfter=typesAfter&&typesAfter[i];after=prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.from(typeAfter?typeAfter.type.create(typeAfter.attrs,after):$pos.node(d).copy(after))}return this.step(new ReplaceStep(pos,pos,new prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice(before.append(after),depth,depth),!0))},Transform.prototype.join=function(pos,depth){void 0===depth&&(depth=1);var step=new ReplaceStep(pos-depth,pos+depth,prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice.empty,!0);return this.step(step)};var AddMarkStep=function(Step){function AddMarkStep(from,to,mark){Step.call(this),this.from=from,this.to=to,this.mark=mark}return Step&&(AddMarkStep.__proto__=Step),AddMarkStep.prototype=Object.create(Step&&Step.prototype),AddMarkStep.prototype.constructor=AddMarkStep,AddMarkStep.prototype.apply=function(doc){var this$1=this,oldSlice=doc.slice(this.from,this.to),$from=doc.resolve(this.from),parent=$from.node($from.sharedDepth(this.to)),slice=new prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice(mapFragment(oldSlice.content,(function(node,parent){return parent.type.allowsMarkType(this$1.mark.type)?node.mark(this$1.mark.addToSet(node.marks)):node}),parent),oldSlice.openStart,oldSlice.openEnd);return StepResult.fromReplace(doc,this.from,this.to,slice)},AddMarkStep.prototype.invert=function(){return new RemoveMarkStep(this.from,this.to,this.mark)},AddMarkStep.prototype.map=function(mapping){var from=mapping.mapResult(this.from,1),to=mapping.mapResult(this.to,-1);return from.deleted&&to.deleted||from.pos>=to.pos?null:new AddMarkStep(from.pos,to.pos,this.mark)},AddMarkStep.prototype.merge=function(other){if(other instanceof AddMarkStep&&other.mark.eq(this.mark)&&this.from<=other.to&&this.to>=other.from)return new AddMarkStep(Math.min(this.from,other.from),Math.max(this.to,other.to),this.mark)},AddMarkStep.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},AddMarkStep.fromJSON=function(schema,json){if("number"!=typeof json.from||"number"!=typeof json.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new AddMarkStep(json.from,json.to,schema.markFromJSON(json.mark))},AddMarkStep}(Step);Step.jsonID("addMark",AddMarkStep);var RemoveMarkStep=function(Step){function RemoveMarkStep(from,to,mark){Step.call(this),this.from=from,this.to=to,this.mark=mark}return Step&&(RemoveMarkStep.__proto__=Step),RemoveMarkStep.prototype=Object.create(Step&&Step.prototype),RemoveMarkStep.prototype.constructor=RemoveMarkStep,RemoveMarkStep.prototype.apply=function(doc){var this$1=this,oldSlice=doc.slice(this.from,this.to),slice=new prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice(mapFragment(oldSlice.content,(function(node){return node.mark(this$1.mark.removeFromSet(node.marks))})),oldSlice.openStart,oldSlice.openEnd);return StepResult.fromReplace(doc,this.from,this.to,slice)},RemoveMarkStep.prototype.invert=function(){return new AddMarkStep(this.from,this.to,this.mark)},RemoveMarkStep.prototype.map=function(mapping){var from=mapping.mapResult(this.from,1),to=mapping.mapResult(this.to,-1);return from.deleted&&to.deleted||from.pos>=to.pos?null:new RemoveMarkStep(from.pos,to.pos,this.mark)},RemoveMarkStep.prototype.merge=function(other){if(other instanceof RemoveMarkStep&&other.mark.eq(this.mark)&&this.from<=other.to&&this.to>=other.from)return new RemoveMarkStep(Math.min(this.from,other.from),Math.max(this.to,other.to),this.mark)},RemoveMarkStep.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},RemoveMarkStep.fromJSON=function(schema,json){if("number"!=typeof json.from||"number"!=typeof json.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new RemoveMarkStep(json.from,json.to,schema.markFromJSON(json.mark))},RemoveMarkStep}(Step);function replaceStep(doc,from,to,slice){if(void 0===to&&(to=from),void 0===slice&&(slice=prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice.empty),from==to&&!slice.size)return null;var $from=doc.resolve(from),$to=doc.resolve(to);return fitsTrivially($from,$to,slice)?new ReplaceStep(from,to,slice):new Fitter($from,$to,slice).fit()}function fitsTrivially($from,$to,slice){return!slice.openStart&&!slice.openEnd&&$from.start()==$to.start()&&$from.parent.canReplace($from.index(),$to.index(),slice.content)}Step.jsonID("removeMark",RemoveMarkStep),Transform.prototype.addMark=function(from,to,mark){var this$1=this,removed=[],added=[],removing=null,adding=null;return this.doc.nodesBetween(from,to,(function(node,pos,parent){if(node.isInline){var marks=node.marks;if(!mark.isInSet(marks)&&parent.type.allowsMarkType(mark.type)){for(var start=Math.max(pos,from),end=Math.min(pos+node.nodeSize,to),newSet=mark.addToSet(marks),i=0;i<marks.length;i++)marks[i].isInSet(newSet)||(removing&&removing.to==start&&removing.mark.eq(marks[i])?removing.to=end:removed.push(removing=new RemoveMarkStep(start,end,marks[i])));adding&&adding.to==start?adding.to=end:added.push(adding=new AddMarkStep(start,end,mark))}}})),removed.forEach((function(s){return this$1.step(s)})),added.forEach((function(s){return this$1.step(s)})),this},Transform.prototype.removeMark=function(from,to,mark){var this$1=this;void 0===mark&&(mark=null);var matched=[],step=0;return this.doc.nodesBetween(from,to,(function(node,pos){if(node.isInline){step++;var toRemove=null;if(mark instanceof prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.MarkType){var found=mark.isInSet(node.marks);found&&(toRemove=[found])}else mark?mark.isInSet(node.marks)&&(toRemove=[mark]):toRemove=node.marks;if(toRemove&&toRemove.length)for(var end=Math.min(pos+node.nodeSize,to),i=0;i<toRemove.length;i++){for(var style=toRemove[i],found$1=void 0,j=0;j<matched.length;j++){var m=matched[j];m.step==step-1&&style.eq(matched[j].style)&&(found$1=m)}found$1?(found$1.to=end,found$1.step=step):matched.push({style:style,from:Math.max(pos,from),to:end,step:step})}}})),matched.forEach((function(m){return this$1.step(new RemoveMarkStep(m.from,m.to,m.style))})),this},Transform.prototype.clearIncompatible=function(pos,parentType,match){void 0===match&&(match=parentType.contentMatch);for(var node=this.doc.nodeAt(pos),delSteps=[],cur=pos+1,i=0;i<node.childCount;i++){var child=node.child(i),end=cur+child.nodeSize,allowed=match.matchType(child.type,child.attrs);if(allowed){match=allowed;for(var j=0;j<child.marks.length;j++)parentType.allowsMarkType(child.marks[j].type)||this.step(new RemoveMarkStep(cur,end,child.marks[j]))}else delSteps.push(new ReplaceStep(cur,end,prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice.empty));cur=end}if(!match.validEnd){var fill=match.fillBefore(prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.empty,!0);this.replace(cur,cur,new prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice(fill,0,0))}for(var i$1=delSteps.length-1;i$1>=0;i$1--)this.step(delSteps[i$1]);return this},Transform.prototype.replace=function(from,to,slice){void 0===to&&(to=from),void 0===slice&&(slice=prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice.empty);var step=replaceStep(this.doc,from,to,slice);return step&&this.step(step),this},Transform.prototype.replaceWith=function(from,to,content){return this.replace(from,to,new prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice(prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.from(content),0,0))},Transform.prototype.delete=function(from,to){return this.replace(from,to,prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice.empty)},Transform.prototype.insert=function(pos,content){return this.replaceWith(pos,pos,content)};var Fitter=function($from,$to,slice){this.$to=$to,this.$from=$from,this.unplaced=slice,this.frontier=[];for(var i=0;i<=$from.depth;i++){var node=$from.node(i);this.frontier.push({type:node.type,match:node.contentMatchAt($from.indexAfter(i))})}this.placed=prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.empty;for(var i$1=$from.depth;i$1>0;i$1--)this.placed=prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.from($from.node(i$1).copy(this.placed))},prototypeAccessors$1={depth:{configurable:!0}};function dropFromFragment(fragment,depth,count){return 0==depth?fragment.cutByIndex(count):fragment.replaceChild(0,fragment.firstChild.copy(dropFromFragment(fragment.firstChild.content,depth-1,count)))}function addToFragment(fragment,depth,content){return 0==depth?fragment.append(content):fragment.replaceChild(fragment.childCount-1,fragment.lastChild.copy(addToFragment(fragment.lastChild.content,depth-1,content)))}function contentAt(fragment,depth){for(var i=0;i<depth;i++)fragment=fragment.firstChild.content;return fragment}function closeNodeStart(node,openStart,openEnd){if(openStart<=0)return node;var frag=node.content;return openStart>1&&(frag=frag.replaceChild(0,closeNodeStart(frag.firstChild,openStart-1,1==frag.childCount?openEnd-1:0))),openStart>0&&(frag=node.type.contentMatch.fillBefore(frag).append(frag),openEnd<=0&&(frag=frag.append(node.type.contentMatch.matchFragment(frag).fillBefore(prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.empty,!0)))),node.copy(frag)}function contentAfterFits($to,depth,type,match,open){var node=$to.node(depth),index=open?$to.indexAfter(depth):$to.index(depth);if(index==node.childCount&&!type.compatibleContent(node.type))return null;var fit=match.fillBefore(node.content,!0,index);return fit&&!function(type,fragment,start){for(var i=start;i<fragment.childCount;i++)if(!type.allowsMarks(fragment.child(i).marks))return!0;return!1}(type,node.content,index)?fit:null}function closeFragment(fragment,depth,oldOpen,newOpen,parent){if(depth<oldOpen){var first=fragment.firstChild;fragment=fragment.replaceChild(0,first.copy(closeFragment(first.content,depth+1,oldOpen,newOpen,first)))}if(depth>newOpen){var match=parent.contentMatchAt(0),start=match.fillBefore(fragment).append(fragment);fragment=start.append(match.matchFragment(start).fillBefore(prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.empty,!0))}return fragment}function coveredDepths($from,$to){for(var result=[],d=Math.min($from.depth,$to.depth);d>=0;d--){var start=$from.start(d);if(start<$from.pos-($from.depth-d)||$to.end(d)>$to.pos+($to.depth-d)||$from.node(d).type.spec.isolating||$to.node(d).type.spec.isolating)break;start==$to.start(d)&&result.push(d)}return result}prototypeAccessors$1.depth.get=function(){return this.frontier.length-1},Fitter.prototype.fit=function(){for(;this.unplaced.size;){var fit=this.findFittable();fit?this.placeNodes(fit):this.openMore()||this.dropNode()}var moveInline=this.mustMoveInline(),placedSize=this.placed.size-this.depth-this.$from.depth,$from=this.$from,$to=this.close(moveInline<0?this.$to:$from.doc.resolve(moveInline));if(!$to)return null;for(var content=this.placed,openStart=$from.depth,openEnd=$to.depth;openStart&&openEnd&&1==content.childCount;)content=content.firstChild.content,openStart--,openEnd--;var slice=new prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice(content,openStart,openEnd);return moveInline>-1?new ReplaceAroundStep($from.pos,moveInline,this.$to.pos,this.$to.end(),slice,placedSize):slice.size||$from.pos!=this.$to.pos?new ReplaceStep($from.pos,$to.pos,slice):void 0},Fitter.prototype.findFittable=function(){for(var pass=1;pass<=2;pass++)for(var sliceDepth=this.unplaced.openStart;sliceDepth>=0;sliceDepth--)for(var parent=void 0,first=(sliceDepth?(parent=contentAt(this.unplaced.content,sliceDepth-1).firstChild).content:this.unplaced.content).firstChild,frontierDepth=this.depth;frontierDepth>=0;frontierDepth--){var ref=this.frontier[frontierDepth],type=ref.type,match=ref.match,wrap=void 0,inject=void 0;if(1==pass&&(first?match.matchType(first.type)||(inject=match.fillBefore(prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.from(first),!1)):type.compatibleContent(parent.type)))return{sliceDepth:sliceDepth,frontierDepth:frontierDepth,parent:parent,inject:inject};if(2==pass&&first&&(wrap=match.findWrapping(first.type)))return{sliceDepth:sliceDepth,frontierDepth:frontierDepth,parent:parent,wrap:wrap};if(parent&&match.matchType(parent.type))break}},Fitter.prototype.openMore=function(){var ref=this.unplaced,content=ref.content,openStart=ref.openStart,openEnd=ref.openEnd,inner=contentAt(content,openStart);return!(!inner.childCount||inner.firstChild.isLeaf)&&(this.unplaced=new prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice(content,openStart+1,Math.max(openEnd,inner.size+openStart>=content.size-openEnd?openStart+1:0)),!0)},Fitter.prototype.dropNode=function(){var ref=this.unplaced,content=ref.content,openStart=ref.openStart,openEnd=ref.openEnd,inner=contentAt(content,openStart);if(inner.childCount<=1&&openStart>0){var openAtEnd=content.size-openStart<=openStart+inner.size;this.unplaced=new prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice(dropFromFragment(content,openStart-1,1),openStart-1,openAtEnd?openStart-1:openEnd)}else this.unplaced=new prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice(dropFromFragment(content,openStart,1),openStart,openEnd)},Fitter.prototype.placeNodes=function(ref){for(var sliceDepth=ref.sliceDepth,frontierDepth=ref.frontierDepth,parent=ref.parent,inject=ref.inject,wrap=ref.wrap;this.depth>frontierDepth;)this.closeFrontierNode();if(wrap)for(var i=0;i<wrap.length;i++)this.openFrontierNode(wrap[i]);var slice=this.unplaced,fragment=parent?parent.content:slice.content,openStart=slice.openStart-sliceDepth,taken=0,add=[],ref$1=this.frontier[frontierDepth],match=ref$1.match,type=ref$1.type;if(inject){for(var i$1=0;i$1<inject.childCount;i$1++)add.push(inject.child(i$1));match=match.matchFragment(inject)}for(var openEndCount=fragment.size+sliceDepth-(slice.content.size-slice.openEnd);taken<fragment.childCount;){var next=fragment.child(taken),matches=match.matchType(next.type);if(!matches)break;(++taken>1||0==openStart||next.content.size)&&(match=matches,add.push(closeNodeStart(next.mark(type.allowedMarks(next.marks)),1==taken?openStart:0,taken==fragment.childCount?openEndCount:-1)))}var toEnd=taken==fragment.childCount;toEnd||(openEndCount=-1),this.placed=addToFragment(this.placed,frontierDepth,prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.from(add)),this.frontier[frontierDepth].match=match,toEnd&&openEndCount<0&&parent&&parent.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var i$2=0,cur=fragment;i$2<openEndCount;i$2++){var node=cur.lastChild;this.frontier.push({type:node.type,match:node.contentMatchAt(node.childCount)}),cur=node.content}this.unplaced=toEnd?0==sliceDepth?prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice.empty:new prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice(dropFromFragment(slice.content,sliceDepth-1,1),sliceDepth-1,openEndCount<0?slice.openEnd:sliceDepth-1):new prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice(dropFromFragment(slice.content,sliceDepth,taken),slice.openStart,slice.openEnd)},Fitter.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var level,top=this.frontier[this.depth];if(!top.type.isTextblock||!contentAfterFits(this.$to,this.$to.depth,top.type,top.match,!1)||this.$to.depth==this.depth&&(level=this.findCloseLevel(this.$to))&&level.depth==this.depth)return-1;for(var depth=this.$to.depth,after=this.$to.after(depth);depth>1&&after==this.$to.end(--depth);)++after;return after},Fitter.prototype.findCloseLevel=function($to){scan:for(var i=Math.min(this.depth,$to.depth);i>=0;i--){var ref=this.frontier[i],match=ref.match,type=ref.type,dropInner=i<$to.depth&&$to.end(i+1)==$to.pos+($to.depth-(i+1)),fit=contentAfterFits($to,i,type,match,dropInner);if(fit){for(var d=i-1;d>=0;d--){var ref$1=this.frontier[d],match$1=ref$1.match,matches=contentAfterFits($to,d,ref$1.type,match$1,!0);if(!matches||matches.childCount)continue scan}return{depth:i,fit:fit,move:dropInner?$to.doc.resolve($to.after(i+1)):$to}}}},Fitter.prototype.close=function($to){var close=this.findCloseLevel($to);if(!close)return null;for(;this.depth>close.depth;)this.closeFrontierNode();close.fit.childCount&&(this.placed=addToFragment(this.placed,close.depth,close.fit)),$to=close.move;for(var d=close.depth+1;d<=$to.depth;d++){var node=$to.node(d),add=node.type.contentMatch.fillBefore(node.content,!0,$to.index(d));this.openFrontierNode(node.type,node.attrs,add)}return $to},Fitter.prototype.openFrontierNode=function(type,attrs,content){var top=this.frontier[this.depth];top.match=top.match.matchType(type),this.placed=addToFragment(this.placed,this.depth,prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.from(type.create(attrs,content))),this.frontier.push({type:type,match:type.contentMatch})},Fitter.prototype.closeFrontierNode=function(){var add=this.frontier.pop().match.fillBefore(prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.empty,!0);add.childCount&&(this.placed=addToFragment(this.placed,this.frontier.length,add))},Object.defineProperties(Fitter.prototype,prototypeAccessors$1),Transform.prototype.replaceRange=function(from,to,slice){if(!slice.size)return this.deleteRange(from,to);var $from=this.doc.resolve(from),$to=this.doc.resolve(to);if(fitsTrivially($from,$to,slice))return this.step(new ReplaceStep(from,to,slice));var targetDepths=coveredDepths($from,this.doc.resolve(to));0==targetDepths[targetDepths.length-1]&&targetDepths.pop();var preferredTarget=-($from.depth+1);targetDepths.unshift(preferredTarget);for(var d=$from.depth,pos=$from.pos-1;d>0;d--,pos--){var spec=$from.node(d).type.spec;if(spec.defining||spec.isolating)break;targetDepths.indexOf(d)>-1?preferredTarget=d:$from.before(d)==pos&&targetDepths.splice(1,0,-d)}for(var preferredTargetIndex=targetDepths.indexOf(preferredTarget),leftNodes=[],preferredDepth=slice.openStart,content=slice.content,i=0;;i++){var node=content.firstChild;if(leftNodes.push(node),i==slice.openStart)break;content=node.content}preferredDepth>0&&leftNodes[preferredDepth-1].type.spec.defining&&$from.node(preferredTargetIndex).type!=leftNodes[preferredDepth-1].type?preferredDepth-=1:preferredDepth>=2&&leftNodes[preferredDepth-1].isTextblock&&leftNodes[preferredDepth-2].type.spec.defining&&$from.node(preferredTargetIndex).type!=leftNodes[preferredDepth-2].type&&(preferredDepth-=2);for(var j=slice.openStart;j>=0;j--){var openDepth=(j+preferredDepth+1)%(slice.openStart+1),insert=leftNodes[openDepth];if(insert)for(var i$1=0;i$1<targetDepths.length;i$1++){var targetDepth=targetDepths[(i$1+preferredTargetIndex)%targetDepths.length],expand=!0;targetDepth<0&&(expand=!1,targetDepth=-targetDepth);var parent=$from.node(targetDepth-1),index=$from.index(targetDepth-1);if(parent.canReplaceWith(index,index,insert.type,insert.marks))return this.replace($from.before(targetDepth),expand?$to.after(targetDepth):to,new prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice(closeFragment(slice.content,0,slice.openStart,openDepth),openDepth,slice.openEnd))}}for(var startSteps=this.steps.length,i$2=targetDepths.length-1;i$2>=0&&(this.replace(from,to,slice),!(this.steps.length>startSteps));i$2--){var depth=targetDepths[i$2];i$2<0||(from=$from.before(depth),to=$to.after(depth))}return this},Transform.prototype.replaceRangeWith=function(from,to,node){if(!node.isInline&&from==to&&this.doc.resolve(from).parent.content.size){var point=insertPoint(this.doc,from,node.type);null!=point&&(from=to=point)}return this.replaceRange(from,to,new prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice(prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.from(node),0,0))},Transform.prototype.deleteRange=function(from,to){for(var $from=this.doc.resolve(from),$to=this.doc.resolve(to),covered=coveredDepths($from,$to),i=0;i<covered.length;i++){var depth=covered[i],last=i==covered.length-1;if(last&&0==depth||$from.node(depth).type.contentMatch.validEnd)return this.delete($from.start(depth),$to.end(depth));if(depth>0&&(last||$from.node(depth-1).canReplace($from.index(depth-1),$to.indexAfter(depth-1))))return this.delete($from.before(depth),$to.after(depth))}for(var d=1;d<=$from.depth&&d<=$to.depth;d++)if(from-$from.start(d)==$from.depth-d&&to>$from.end(d)&&$to.end(d)-to!=$to.depth-d)return this.delete($from.before(d),to);return this.delete(from,to)}},function(module,exports,__webpack_require__){"use strict";(function(Buffer){Object.defineProperty(exports,"__esModule",{value:!0}),exports.delay=exports.localizeQuery=exports.closest=exports.matchUrl=exports.getUrlHashPart=exports.camelCaseToKebabCase=exports.getClosestBreakpoint=exports.optimizeBreakpoints=exports.pointerToClientQuadrant=exports.slugify=exports.elementsFromPoint=exports.findNodesRecursively=exports.assign=exports.replace=exports.intersectDeepMany=exports.uint8ArrayToString=exports.stringToUnit8Array=exports.getCookie=exports.isDirectUrl=exports.progressEventToProgress=exports.readDataUrlFromReader=exports.readBlobAsDataUrl=exports.readFileAsByteArray=exports.arrayBufferToBase64=exports.downloadFile=exports.randomClassName=exports.identifier=exports.guid=void 0;const deepmerge=__webpack_require__(505);function readDataUrlFromReader(read){return new Promise((resolve,reject)=>{const reader=new FileReader;reader.onload=event=>resolve(event.target.result),read(reader)})}exports.guid=function(){function s4(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return s4()+s4()+"-"+s4()+"-"+s4()+"-"+s4()+"-"+s4()+s4()+s4()},exports.identifier=function(){let result="";const possible="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let i=0;i<5;i++)result+=possible.charAt(Math.floor(Math.random()*possible.length));return result},exports.randomClassName=function(){let result="";const possible="abcdefghijklmnopqrstuvwxyz";for(let i=0;i<10;i++)result+=possible.charAt(Math.floor(Math.random()*possible.length));return result},exports.downloadFile=function(url){return new Promise((resolve,reject)=>{const xhr=new XMLHttpRequest;xhr.responseType="arraybuffer",xhr.onload=()=>resolve(new Uint8Array(xhr.response)),xhr.open("GET",url),xhr.send()})},exports.arrayBufferToBase64=function(buffer){if(Buffer)return Buffer.from(buffer).toString("base64");{let binary="";const bytes=new Uint8Array(buffer),len=bytes.byteLength;for(let i=0;i<len;i++)binary+=String.fromCharCode(bytes[i]);return btoa(binary)}},exports.readFileAsByteArray=function(file){return new Promise((resolve,reject)=>{const reader=new FileReader;reader.onload=event=>resolve(event.target.result),reader.readAsArrayBuffer(file)})},exports.readBlobAsDataUrl=function(blob){return readDataUrlFromReader(reader=>reader.readAsDataURL(blob))},exports.readDataUrlFromReader=readDataUrlFromReader,exports.progressEventToProgress=function(progress){return event=>{if(event.lengthComputable){const percentLoaded=Math.round(event.loaded/event.total*100);progress(percentLoaded)}}},exports.isDirectUrl=function(url){return url.startsWith("http://")||url.startsWith("https://")||url.startsWith("data:")||url.startsWith("blob:")},exports.getCookie=function(name){const parts=("; "+document.cookie).split("; "+name+"=");if(2===parts.length)return parts.pop().split(";").shift()},exports.stringToUnit8Array=function(content){const binstr=encodeURIComponent(content).replace(/%([0-9A-F]{2})/g,(function(match,p1){return String.fromCharCode("0x"+p1)})),bytes=new Uint8Array(binstr.length);return Array.prototype.forEach.call(binstr,(ch,i)=>{bytes[i]=ch.charCodeAt(0)}),bytes},exports.uint8ArrayToString=function(bytes){const encodedString=String.fromCharCode.apply(null,bytes);return decodeURIComponent(escape(encodedString))},exports.intersectDeepMany=function(target,nonObjectHandler,...sources){let result=target;return sources.forEach(source=>{result=this.intersectDeep(result,nonObjectHandler,source)}),result},exports.replace=function(path,target,value,delimiter="/"){target=JSON.parse(JSON.stringify(target));const segments=path.split(delimiter);let segment,segmentObject=target,parent=target;return segments.forEach(s=>{segmentObject[s]||(segmentObject[s]={}),parent=segmentObject,segmentObject=segmentObject[s],segment=s}),segment&&(parent[segment]=value),target},exports.assign=function(target,source){Object.assign(target,deepmerge(target,source))},exports.findNodesRecursively=function findNodesRecursively(predicate,source){const result=[];return predicate(source)&&result.push(source),Object.keys(source).forEach(key=>{const child=source[key];if(child instanceof Object){const childResult=findNodesRecursively(predicate,child);result.push.apply(result,childResult)}}),result},exports.elementsFromPoint=function(ownerDocument,x,y){if(!x||!y)return[];if(ownerDocument.elementsFromPoint)return Array.prototype.slice.call(ownerDocument.elementsFromPoint(Math.floor(x),Math.floor(y)));if(ownerDocument.msElementsFromPoint)return Array.prototype.slice.call(ownerDocument.msElementsFromPoint(Math.floor(x),Math.floor(y)));throw new Error('Method "elementsFromPoint" not supported by browser.')},exports.slugify=function(text){return text.toString().toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")},exports.pointerToClientQuadrant=function(pointerX,pointerY,element){const rect=element.getBoundingClientRect(),clientX=pointerX-rect.left,clientY=pointerY-rect.top;let vertical,horizontal;return horizontal=clientX>rect.width/2?"right":"left",vertical=clientY>rect.height/2?"bottom":"top",{vertical:vertical,horizontal:horizontal}},exports.optimizeBreakpoints=function(breakpoints){const result={};let lastAssigned=null;["xs","sm","md","lg","xl"].forEach(breakpoint=>{const value=breakpoints[breakpoint];value&&value!==lastAssigned&&(result[breakpoint]=value,lastAssigned=value)});const resultKeys=Object.keys(result);if(1===resultKeys.length){const singleKey=resultKeys[0];return result[singleKey]}return result},exports.getClosestBreakpoint=function(source,current){const breakpoints=["xs","sm","md","lg","xl"];let index=breakpoints.indexOf(current),breakpoint=null;do{breakpoint=breakpoints[index],index--}while(!source[breakpoint]&&index>=0);return breakpoint},exports.camelCaseToKebabCase=function(str){return str.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()},exports.getUrlHashPart=function(urlPath){if(-1!==urlPath.indexOf("#"))return urlPath.split("#")[1]},exports.matchUrl=function(urlPath,urlTemplate){"/"===urlPath.charAt(0)&&(urlPath=urlPath.slice(1)),"/"===urlTemplate.charAt(0)&&(urlTemplate=urlTemplate.slice(1)),"/"===urlPath.charAt(urlPath.length-1)&&(urlPath=urlPath.slice(0,-1)),"/"===urlTemplate.charAt(urlTemplate.length-1)&&(urlTemplate=urlTemplate.slice(0,-1));const pathSegments=urlPath.split("/"),templateSegments=urlTemplate.split("/");if(pathSegments.length!==templateSegments.length&&-1===urlTemplate.indexOf("*"))return;const tokens=[];templateSegments.filter((t,index)=>{"{"===t.charAt(0)&&tokens.push({index:index,name:t.replace(/{|}/g,"")})});for(let i=0;i<templateSegments.length;i++){const segment=pathSegments[i],token=tokens.find(t=>t.index===i);if(token||segment!==templateSegments[i]&&"*"!==templateSegments[i]){if(!token)return templateSegments.length-1-i<=1&&segment.indexOf("#")>0?(tokens.push({index:-1,name:"#",value:segment.split("#")[1]}),tokens):void 0;{const hashIndex=segment.indexOf("#");if(0===hashIndex)token.value=segment.substring(1);else{if(hashIndex>0)return;token.value=segment}}}else if("*"===templateSegments[i])return tokens}return tokens},exports.closest=function(node,predicate){do{if(predicate(node))return node}while(node=node&&node.parentNode)},exports.localizeQuery=function(query,locale){const localizedQuery=query.copy();return localizedQuery.filters.forEach(x=>x.left=`locales/${locale}/${x.left}`),localizedQuery.orderingBy&&(localizedQuery.orderingBy=`locales/${locale}/${localizedQuery.orderingBy}`),localizedQuery},exports.delay=function(ms){return new Promise(resolve=>setTimeout(resolve,ms))}}).call(this,__webpack_require__(202).Buffer)},function(module,exports){module.exports=function(exec){try{return!!exec()}catch(error){return!0}}},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(98),exports),__exportStar(__webpack_require__(609),exports),__exportStar(__webpack_require__(610),exports),__exportStar(__webpack_require__(611),exports),__exportStar(__webpack_require__(612),exports),__exportStar(__webpack_require__(613),exports),__exportStar(__webpack_require__(614),exports),__exportStar(__webpack_require__(615),exports),__exportStar(__webpack_require__(616),exports),__exportStar(__webpack_require__(617),exports),__exportStar(__webpack_require__(618),exports),__exportStar(__webpack_require__(619),exports),__exportStar(__webpack_require__(620),exports),__exportStar(__webpack_require__(621),exports),__exportStar(__webpack_require__(622),exports),__exportStar(__webpack_require__(623),exports),__exportStar(__webpack_require__(624),exports),__exportStar(__webpack_require__(625),exports),__exportStar(__webpack_require__(626),exports),__exportStar(__webpack_require__(627),exports),__exportStar(__webpack_require__(628),exports)},function(module,exports){module.exports=function(it){return"object"==typeof it?null!==it:"function"==typeof it}},function(module,exports,__webpack_require__){var fails=__webpack_require__(7);module.exports=!fails((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(module,__webpack_exports__,__webpack_require__){"use strict";function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}__webpack_require__.d(__webpack_exports__,"a",(function(){return _extends}))},function(module,exports,__webpack_require__){(function(global){var check=function(it){return it&&it.Math==Math&&it};module.exports=check("object"==typeof globalThis&&globalThis)||check("object"==typeof window&&window)||check("object"==typeof self&&self)||check("object"==typeof global&&global)||Function("return this")()}).call(this,__webpack_require__(39))},function(module,exports,__webpack_require__){var isObject=__webpack_require__(9);module.exports=function(it){if(!isObject(it))throw TypeError(String(it)+" is not an object");return it}},function(module,exports,__webpack_require__){var requireObjectCoercible=__webpack_require__(110);module.exports=function(argument){return Object(requireObjectCoercible(argument))}},function(module,exports,__webpack_require__){var global=__webpack_require__(12),shared=__webpack_require__(114),has=__webpack_require__(22),uid=__webpack_require__(90),NATIVE_SYMBOL=__webpack_require__(121),USE_SYMBOL_AS_UID=__webpack_require__(164),WellKnownSymbolsStore=shared("wks"),Symbol=global.Symbol,createWellKnownSymbol=USE_SYMBOL_AS_UID?Symbol:Symbol&&Symbol.withoutSetter||uid;module.exports=function(name){return has(WellKnownSymbolsStore,name)||(NATIVE_SYMBOL&&has(Symbol,name)?WellKnownSymbolsStore[name]=Symbol[name]:WellKnownSymbolsStore[name]=createWellKnownSymbol("Symbol."+name)),WellKnownSymbolsStore[name]}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.StylePlugin=void 0;class StylePlugin{configToStyleRules(pluginConfig){return __awaiter(this,void 0,void 0,(function*(){return[]}))}configToNestedStyles(pluginConfig){return __awaiter(this,void 0,void 0,(function*(){return[]}))}configToPseudoStyles(pluginConfig){return __awaiter(this,void 0,void 0,(function*(){return[]}))}}exports.StylePlugin=StylePlugin,StylePlugin.parseSize=(value,fallback=0)=>"auto"===value||"initial"===value||"inherit"===value?value:null!=value?parseInt(value)+"px":fallback},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ChangeRateLimit=void 0,exports.ChangeRateLimit={rateLimit:{timeout:500,method:"notifyWhenChangesStop"}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NAMED_TAG="named",exports.NAME_TAG="name",exports.UNMANAGED_TAG="unmanaged",exports.OPTIONAL_TAG="optional",exports.INJECT_TAG="inject",exports.MULTI_INJECT_TAG="multi_inject",exports.TAGGED="inversify:tagged",exports.TAGGED_PROP="inversify:tagged_props",exports.PARAM_TYPES="inversify:paramtypes",exports.DESIGN_PARAM_TYPES="design:paramtypes",exports.POST_CONSTRUCT="post_construct"},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(222),exports),__exportStar(__webpack_require__(98),exports),__exportStar(__webpack_require__(607),exports),__exportStar(__webpack_require__(608),exports),__exportStar(__webpack_require__(93),exports),__exportStar(__webpack_require__(6),exports),__exportStar(__webpack_require__(30),exports)},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.StyleService=void 0;const _=__webpack_require__(85),Utils=__webpack_require__(6),Objects=__webpack_require__(30),constants_1=__webpack_require__(225);exports.StyleService=class{constructor(objectStorage,styleHandlers){this.objectStorage=objectStorage,this.styleHandlers=styleHandlers}getStyles(){return __awaiter(this,void 0,void 0,(function*(){const stylesObject=yield this.objectStorage.getObject("styles");if(!stylesObject)throw new Error("Data doesn't contain styles.");return this.styleHandlers.forEach(styleHandler=>{styleHandler.migrate&&styleHandler.migrate(stylesObject.components[styleHandler.key]),stylesObject.components[styleHandler.key]||(stylesObject.components[styleHandler.key]=styleHandler.getDefaultStyle())}),stylesObject}))}getStyleByKey(styleKey){return __awaiter(this,void 0,void 0,(function*(){if(!styleKey)throw new Error('Parameter "styleKey" not specified.');if(!constants_1.StylePrimitives.some(x=>styleKey.startsWith(x+"/")))throw new Error(`Unknown style premitive: "${styleKey}".`);const styles=yield this.getStyles(),style=Objects.getObjectAt(styleKey,styles);if(style)return style;const defaultStyle=this.styleHandlers.map(handler=>handler.getDefaultStyle(styleKey)).find(x=>!!x);if(defaultStyle)return defaultStyle;throw new Error(`Neither style nor default can be fetched by key "${styleKey}".`)}))}addColorVariation(variationName){return __awaiter(this,void 0,void 0,(function*(){const styles=yield this.getStyles(),newVariation=Objects.clone(styles.colors.default);return newVariation.key="colors/"+variationName,newVariation.displayName="< Unnamed >",Objects.setValue("colors/"+variationName,styles,newVariation),this.updateStyles(styles),newVariation}))}addGradientVariation(variationName){return __awaiter(this,void 0,void 0,(function*(){const styles=yield this.getStyles(),gradient={key:"gradients/"+variationName,displayName:"Gradient",direction:"45deg",colorStops:[{color:"#87E0FD",length:0},{color:"#05ABE0",length:100}]};return gradient.displayName="< Unnamed >",Objects.setValue("gradients/"+variationName,styles,gradient),this.updateStyles(styles),gradient}))}addShadowVariation(variationName){return __awaiter(this,void 0,void 0,(function*(){const styles=yield this.getStyles(),newVariation={blur:1,spread:1,color:"rgba(0, 0, 0, 0.1)",inset:!1,offsetX:1,offsetY:1};return newVariation.key="shadows/"+variationName,newVariation.displayName="< Unnamed >",Objects.setValue("shadows/"+variationName,styles,newVariation),this.updateStyles(styles),newVariation}))}rewriteVariationKeysRecursively(variation,parentKey){variation.key=parentKey,variation.components&&Object.keys(variation.components).forEach(componentKey=>{const subComponent=variation.components[componentKey];Object.keys(subComponent).forEach(subComponentVariationKey=>{const subComponentVariation=subComponent[subComponentVariationKey],key=`${parentKey}/components/${componentKey}/${subComponentVariationKey}`;this.rewriteVariationKeysRecursively(subComponentVariation,key)})})}addComponentVariation(componentName,variationName,snippet){return __awaiter(this,void 0,void 0,(function*(){const styles=yield this.getStyles(),defaultVariation=snippet.variations.find(x=>x.key===`components/${componentName}/default`);if(!defaultVariation)throw new Error(`Default variation for component "${componentName}" not found.`);const variation=Objects.clone(defaultVariation),key=`components/${componentName}/${variationName}`;return this.rewriteVariationKeysRecursively(variation,key),variation.key=key,variation.displayName="< Unnamed >",variation.category="appearance",styles.components[componentName][variationName]=variation,this.updateStyles(styles),variation.key}))}addTextStyleVariation(variationName){return __awaiter(this,void 0,void 0,(function*(){const styles=yield this.getStyles(),variation={key:"globals/body/"+variationName,displayName:"< Unnamed >"};return styles.globals.body[variationName]=variation,this.updateStyles(styles),variation}))}updateStyles(updatedStyles){return __awaiter(this,void 0,void 0,(function*(){this.objectStorage.updateObject("styles",updatedStyles)}))}mergeStyles(appendStyles){return __awaiter(this,void 0,void 0,(function*(){const styles=yield this.getStyles();yield this.updateStyles(_.merge(styles,appendStyles))}))}updateStyle(style){return __awaiter(this,void 0,void 0,(function*(){if(!style)throw new Error("Style cannot be empty.");if(!style.key)throw new Error("Style doesn't have key.");const styles=yield this.getStyles();Objects.setValue(style.key,styles,style),yield this.updateStyles(styles)}))}getVariations(categoryName,subCategoryName){return __awaiter(this,void 0,void 0,(function*(){if(!categoryName)throw new Error('Parameter "categoryName" not specified.');const styles=yield this.getStyles();let categoryStyles;categoryStyles=subCategoryName?styles[categoryName][subCategoryName]:styles[categoryName];const category=Object.keys(categoryStyles),states=this.getAllowedStates(categoryStyles);return category.map(variationName=>{const variationContract=categoryStyles[variationName];return states&&"default"!==variationName&&(variationContract.allowedStates=states),variationContract})}))}getAllowedStates(styles){const states=styles.default.allowedStates;if(states)return states}getComponentVariations(componentName){return __awaiter(this,void 0,void 0,(function*(){if(!componentName)throw new Error('Parameter "componentName" not specified.');const componentStyles=(yield this.getStyles()).components[componentName],states=this.getAllowedStates(componentStyles);return Object.keys(componentStyles).map(variationName=>{const variationContract=componentStyles[variationName];return states&&"default"!==variationName&&(variationContract.allowedStates=states),variationContract})}))}removeStyle(styleKey){return __awaiter(this,void 0,void 0,(function*(){if(!styleKey)throw new Error('Parameter "styleKey" not specified.');const styles=yield this.getStyles();Objects.deleteNodeAt(""+styleKey,styles),this.objectStorage.updateObject("styles",styles)}))}checkStyleIsInUse(styleKey){return __awaiter(this,void 0,void 0,(function*(){if(!styleKey)throw new Error('Parameter "styleKey" not specified.');const styles=yield this.getStyles(),style=Objects.getObjectAt(styleKey,styles);return Utils.findNodesRecursively(node=>{let found=!1;if(node!==style&&node.displayName){Utils.findNodesRecursively(styleNode=>{let f=!1;return Object.keys(styleNode).forEach(y=>{styleNode[y]===styleKey&&(f=!0)}),f},node).length>0&&(found=!0)}return found},styles)}))}}},function(module,exports,__webpack_require__){var DESCRIPTORS=__webpack_require__(10),IE8_DOM_DEFINE=__webpack_require__(158),anObject=__webpack_require__(13),toPrimitive=__webpack_require__(50),nativeDefineProperty=Object.defineProperty;exports.f=DESCRIPTORS?nativeDefineProperty:function(O,P,Attributes){if(anObject(O),P=toPrimitive(P,!0),anObject(Attributes),IE8_DOM_DEFINE)try{return nativeDefineProperty(O,P,Attributes)}catch(error){}if("get"in Attributes||"set"in Attributes)throw TypeError("Accessors not supported");return"value"in Attributes&&(O[P]=Attributes.value),O}},function(module,exports){var hasOwnProperty={}.hasOwnProperty;module.exports=function(it,key){return hasOwnProperty.call(it,key)}},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(506),exports),__exportStar(__webpack_require__(507),exports),__exportStar(__webpack_require__(508),exports),__exportStar(__webpack_require__(509),exports),__exportStar(__webpack_require__(510),exports),__exportStar(__webpack_require__(511),exports),__exportStar(__webpack_require__(512),exports),__exportStar(__webpack_require__(513),exports),__exportStar(__webpack_require__(514),exports),__exportStar(__webpack_require__(515),exports)},function(module,exports,__webpack_require__){var toInteger=__webpack_require__(61),min=Math.min;module.exports=function(argument){return argument>0?min(toInteger(argument),9007199254740991):0}},function(module,exports,__webpack_require__){var DESCRIPTORS=__webpack_require__(10),fails=__webpack_require__(7),has=__webpack_require__(22),defineProperty=Object.defineProperty,cache={},thrower=function(it){throw it};module.exports=function(METHOD_NAME,options){if(has(cache,METHOD_NAME))return cache[METHOD_NAME];options||(options={});var method=[][METHOD_NAME],ACCESSORS=!!has(options,"ACCESSORS")&&options.ACCESSORS,argument0=has(options,0)?options[0]:thrower,argument1=has(options,1)?options[1]:void 0;return cache[METHOD_NAME]=!!method&&!fails((function(){if(ACCESSORS&&!DESCRIPTORS)return!0;var O={length:-1};ACCESSORS?defineProperty(O,1,{enumerable:!0,get:thrower}):O[1]=1,method.call(O,argument0,argument1)}))}},function(module,exports,__webpack_require__){var path=__webpack_require__(53),has=__webpack_require__(22),wrappedWellKnownSymbolModule=__webpack_require__(181),defineProperty=__webpack_require__(21).f;module.exports=function(NAME){var Symbol=path.Symbol||(path.Symbol={});has(Symbol,NAME)||defineProperty(Symbol,NAME,{value:wrappedWellKnownSymbolModule.f(NAME)})}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"RuleList",(function(){return jss_esm_RuleList})),__webpack_require__.d(__webpack_exports__,"SheetsManager",(function(){return jss_esm_SheetsManager})),__webpack_require__.d(__webpack_exports__,"SheetsRegistry",(function(){return jss_esm_SheetsRegistry})),__webpack_require__.d(__webpack_exports__,"create",(function(){return create})),__webpack_require__.d(__webpack_exports__,"createGenerateId",(function(){return createGenerateId})),__webpack_require__.d(__webpack_exports__,"createRule",(function(){return createRule})),__webpack_require__.d(__webpack_exports__,"getDynamicStyles",(function(){return getDynamicStyles})),__webpack_require__.d(__webpack_exports__,"hasCSSTOMSupport",(function(){return hasCSSTOMSupport})),__webpack_require__.d(__webpack_exports__,"sheets",(function(){return sheets})),__webpack_require__.d(__webpack_exports__,"toCssValue",(function(){return toCssValue}));var esm_extends=__webpack_require__(11),dist_module=__webpack_require__(59),tiny_warning_esm=__webpack_require__(49);function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,subClass.__proto__=superClass}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}var plainObjectConstrurctor={}.constructor;function cloneStyle(style){if(null==style||"object"!=typeof style)return style;if(Array.isArray(style))return style.map(cloneStyle);if(style.constructor!==plainObjectConstrurctor)return style;var newStyle={};for(var name in style)newStyle[name]=cloneStyle(style[name]);return newStyle}function createRule(name,decl,options){void 0===name&&(name="unnamed");var jss=options.jss,declCopy=cloneStyle(decl),rule=jss.plugins.onCreateRule(name,declCopy,options);return rule||(name[0],null)}var join=function(value,by){for(var result="",i=0;i<value.length&&"!important"!==value[i];i++)result&&(result+=by),result+=value[i];return result};function toCssValue(value,ignoreImportant){if(void 0===ignoreImportant&&(ignoreImportant=!1),!Array.isArray(value))return value;var cssValue="";if(Array.isArray(value[0]))for(var i=0;i<value.length&&"!important"!==value[i];i++)cssValue&&(cssValue+=", "),cssValue+=join(value[i]," ");else cssValue=join(value,", ");return ignoreImportant||"!important"!==value[value.length-1]||(cssValue+=" !important"),cssValue}function indentStr(str,indent){for(var result="",index=0;index<indent;index++)result+="  ";return result+str}function toCss(selector,style,options){void 0===options&&(options={});var result="";if(!style)return result;var _options$indent=options.indent,indent=void 0===_options$indent?0:_options$indent,fallbacks=style.fallbacks;if(selector&&indent++,fallbacks)if(Array.isArray(fallbacks))for(var index=0;index<fallbacks.length;index++){var fallback=fallbacks[index];for(var prop in fallback){var value=fallback[prop];null!=value&&(result&&(result+="\n"),result+=""+indentStr(prop+": "+toCssValue(value)+";",indent))}}else for(var _prop in fallbacks){var _value=fallbacks[_prop];null!=_value&&(result&&(result+="\n"),result+=""+indentStr(_prop+": "+toCssValue(_value)+";",indent))}for(var _prop2 in style){var _value2=style[_prop2];null!=_value2&&"fallbacks"!==_prop2&&(result&&(result+="\n"),result+=""+indentStr(_prop2+": "+toCssValue(_value2)+";",indent))}return(result||options.allowEmpty)&&selector?(result&&(result="\n"+result+"\n"),indentStr(selector+" {"+result,--indent)+indentStr("}",indent)):result}var escapeRegex=/([[\].#*$><+~=|^:(),"'`\s])/g,nativeEscape="undefined"!=typeof CSS&&CSS.escape,jss_esm_escape=function(str){return nativeEscape?nativeEscape(str):str.replace(escapeRegex,"\\$1")},BaseStyleRule=function(){function BaseStyleRule(key,style,options){this.type="style",this.key=void 0,this.isProcessed=!1,this.style=void 0,this.renderer=void 0,this.renderable=void 0,this.options=void 0;var sheet=options.sheet,Renderer=options.Renderer;this.key=key,this.options=options,this.style=style,sheet?this.renderer=sheet.renderer:Renderer&&(this.renderer=new Renderer)}return BaseStyleRule.prototype.prop=function(name,value,options){if(void 0===value)return this.style[name];var force=!!options&&options.force;if(!force&&this.style[name]===value)return this;var newValue=value;options&&!1===options.process||(newValue=this.options.jss.plugins.onChangeValue(value,name,this));var isEmpty=null==newValue||!1===newValue,isDefined=name in this.style;if(isEmpty&&!isDefined&&!force)return this;var remove=isEmpty&&isDefined;if(remove?delete this.style[name]:this.style[name]=newValue,this.renderable&&this.renderer)return remove?this.renderer.removeProperty(this.renderable,name):this.renderer.setProperty(this.renderable,name,newValue),this;var sheet=this.options.sheet;return sheet&&sheet.attached,this},BaseStyleRule}(),jss_esm_StyleRule=function(_BaseStyleRule){function StyleRule(key,style,options){var _this;(_this=_BaseStyleRule.call(this,key,style,options)||this).selectorText=void 0,_this.id=void 0,_this.renderable=void 0;var selector=options.selector,scoped=options.scoped,sheet=options.sheet,generateId=options.generateId;return selector?_this.selectorText=selector:!1!==scoped&&(_this.id=generateId(_assertThisInitialized(_assertThisInitialized(_this)),sheet),_this.selectorText="."+jss_esm_escape(_this.id)),_this}_inheritsLoose(StyleRule,_BaseStyleRule);var _proto2=StyleRule.prototype;return _proto2.applyTo=function(renderable){var renderer=this.renderer;if(renderer){var json=this.toJSON();for(var prop in json)renderer.setProperty(renderable,prop,json[prop])}return this},_proto2.toJSON=function(){var json={};for(var prop in this.style){var value=this.style[prop];"object"!=typeof value?json[prop]=value:Array.isArray(value)&&(json[prop]=toCssValue(value))}return json},_proto2.toString=function(options){var sheet=this.options.sheet,opts=!!sheet&&sheet.options.link?Object(esm_extends.a)({},options,{allowEmpty:!0}):options;return toCss(this.selectorText,this.style,opts)},_createClass(StyleRule,[{key:"selector",set:function(selector){if(selector!==this.selectorText){this.selectorText=selector;var renderer=this.renderer,renderable=this.renderable;if(renderable&&renderer)renderer.setSelector(renderable,selector)||renderer.replaceRule(renderable,this)}},get:function(){return this.selectorText}}]),StyleRule}(BaseStyleRule),pluginStyleRule={onCreateRule:function(name,style,options){return"@"===name[0]||options.parent&&"keyframes"===options.parent.type?null:new jss_esm_StyleRule(name,style,options)}},defaultToStringOptions={indent:1,children:!0},atRegExp=/@([\w-]+)/,jss_esm_ConditionalRule=function(){function ConditionalRule(key,styles,options){this.type="conditional",this.at=void 0,this.key=void 0,this.query=void 0,this.rules=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0,this.key=key,this.query=options.name;var atMatch=key.match(atRegExp);for(var name in this.at=atMatch?atMatch[1]:"unknown",this.options=options,this.rules=new jss_esm_RuleList(Object(esm_extends.a)({},options,{parent:this})),styles)this.rules.add(name,styles[name]);this.rules.process()}var _proto=ConditionalRule.prototype;return _proto.getRule=function(name){return this.rules.get(name)},_proto.indexOf=function(rule){return this.rules.indexOf(rule)},_proto.addRule=function(name,style,options){var rule=this.rules.add(name,style,options);return rule?(this.options.jss.plugins.onProcessRule(rule),rule):null},_proto.toString=function(options){if(void 0===options&&(options=defaultToStringOptions),null==options.indent&&(options.indent=defaultToStringOptions.indent),null==options.children&&(options.children=defaultToStringOptions.children),!1===options.children)return this.query+" {}";var children=this.rules.toString(options);return children?this.query+" {\n"+children+"\n}":""},ConditionalRule}(),keyRegExp=/@media|@supports\s+/,pluginConditionalRule={onCreateRule:function(key,styles,options){return keyRegExp.test(key)?new jss_esm_ConditionalRule(key,styles,options):null}},defaultToStringOptions$1={indent:1,children:!0},nameRegExp=/@keyframes\s+([\w-]+)/,jss_esm_KeyframesRule=function(){function KeyframesRule(key,frames,options){this.type="keyframes",this.at="@keyframes",this.key=void 0,this.name=void 0,this.id=void 0,this.rules=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0;var nameMatch=key.match(nameRegExp);nameMatch&&nameMatch[1]?this.name=nameMatch[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=options;var scoped=options.scoped,sheet=options.sheet,generateId=options.generateId;for(var name in this.id=!1===scoped?this.name:jss_esm_escape(generateId(this,sheet)),this.rules=new jss_esm_RuleList(Object(esm_extends.a)({},options,{parent:this})),frames)this.rules.add(name,frames[name],Object(esm_extends.a)({},options,{parent:this}));this.rules.process()}return KeyframesRule.prototype.toString=function(options){if(void 0===options&&(options=defaultToStringOptions$1),null==options.indent&&(options.indent=defaultToStringOptions$1.indent),null==options.children&&(options.children=defaultToStringOptions$1.children),!1===options.children)return this.at+" "+this.id+" {}";var children=this.rules.toString(options);return children&&(children="\n"+children+"\n"),this.at+" "+this.id+" {"+children+"}"},KeyframesRule}(),keyRegExp$1=/@keyframes\s+/,refRegExp=/\$([\w-]+)/g,findReferencedKeyframe=function(val,keyframes){return"string"==typeof val?val.replace(refRegExp,(function(match,name){return name in keyframes?keyframes[name]:match})):val},replaceRef=function(style,prop,keyframes){var value=style[prop],refKeyframe=findReferencedKeyframe(value,keyframes);refKeyframe!==value&&(style[prop]=refKeyframe)},jss_esm_plugin={onCreateRule:function(key,frames,options){return"string"==typeof key&&keyRegExp$1.test(key)?new jss_esm_KeyframesRule(key,frames,options):null},onProcessStyle:function(style,rule,sheet){return"style"===rule.type&&sheet?("animation-name"in style&&replaceRef(style,"animation-name",sheet.keyframes),"animation"in style&&replaceRef(style,"animation",sheet.keyframes),style):style},onChangeValue:function(val,prop,rule){var sheet=rule.options.sheet;if(!sheet)return val;switch(prop){case"animation":case"animation-name":return findReferencedKeyframe(val,sheet.keyframes);default:return val}}},jss_esm_KeyframeRule=function(_BaseStyleRule){function KeyframeRule(){for(var _this,_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_BaseStyleRule.call.apply(_BaseStyleRule,[this].concat(args))||this).renderable=void 0,_this}return _inheritsLoose(KeyframeRule,_BaseStyleRule),KeyframeRule.prototype.toString=function(options){var sheet=this.options.sheet,opts=!!sheet&&sheet.options.link?Object(esm_extends.a)({},options,{allowEmpty:!0}):options;return toCss(this.key,this.style,opts)},KeyframeRule}(BaseStyleRule),pluginKeyframeRule={onCreateRule:function(key,style,options){return options.parent&&"keyframes"===options.parent.type?new jss_esm_KeyframeRule(key,style,options):null}},FontFaceRule=function(){function FontFaceRule(key,style,options){this.type="font-face",this.at="@font-face",this.key=void 0,this.style=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0,this.key=key,this.style=style,this.options=options}return FontFaceRule.prototype.toString=function(options){if(Array.isArray(this.style)){for(var str="",index=0;index<this.style.length;index++)str+=toCss(this.at,this.style[index]),this.style[index+1]&&(str+="\n");return str}return toCss(this.at,this.style,options)},FontFaceRule}(),keyRegExp$2=/@font-face/,pluginFontFaceRule={onCreateRule:function(key,style,options){return keyRegExp$2.test(key)?new FontFaceRule(key,style,options):null}},ViewportRule=function(){function ViewportRule(key,style,options){this.type="viewport",this.at="@viewport",this.key=void 0,this.style=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0,this.key=key,this.style=style,this.options=options}return ViewportRule.prototype.toString=function(options){return toCss(this.key,this.style,options)},ViewportRule}(),pluginViewportRule={onCreateRule:function(key,style,options){return"@viewport"===key||"@-ms-viewport"===key?new ViewportRule(key,style,options):null}},SimpleRule=function(){function SimpleRule(key,value,options){this.type="simple",this.key=void 0,this.value=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0,this.key=key,this.value=value,this.options=options}return SimpleRule.prototype.toString=function(options){if(Array.isArray(this.value)){for(var str="",index=0;index<this.value.length;index++)str+=this.key+" "+this.value[index]+";",this.value[index+1]&&(str+="\n");return str}return this.key+" "+this.value+";"},SimpleRule}(),keysMap={"@charset":!0,"@import":!0,"@namespace":!0},plugins=[pluginStyleRule,pluginConditionalRule,jss_esm_plugin,pluginKeyframeRule,pluginFontFaceRule,pluginViewportRule,{onCreateRule:function(key,value,options){return key in keysMap?new SimpleRule(key,value,options):null}}],defaultUpdateOptions={process:!0},forceUpdateOptions={force:!0,process:!0},jss_esm_RuleList=function(){function RuleList(options){this.map={},this.raw={},this.index=[],this.counter=0,this.options=void 0,this.classes=void 0,this.keyframes=void 0,this.options=options,this.classes=options.classes,this.keyframes=options.keyframes}var _proto=RuleList.prototype;return _proto.add=function(name,decl,ruleOptions){var _this$options=this.options,parent=_this$options.parent,sheet=_this$options.sheet,jss=_this$options.jss,Renderer=_this$options.Renderer,generateId=_this$options.generateId,scoped=_this$options.scoped,options=Object(esm_extends.a)({classes:this.classes,parent:parent,sheet:sheet,jss:jss,Renderer:Renderer,generateId:generateId,scoped:scoped,name:name,keyframes:this.keyframes,selector:void 0},ruleOptions),key=name;name in this.raw&&(key=name+"-d"+this.counter++),this.raw[key]=decl,key in this.classes&&(options.selector="."+jss_esm_escape(this.classes[key]));var rule=createRule(key,decl,options);if(!rule)return null;this.register(rule);var index=void 0===options.index?this.index.length:options.index;return this.index.splice(index,0,rule),rule},_proto.get=function(name){return this.map[name]},_proto.remove=function(rule){this.unregister(rule),delete this.raw[rule.key],this.index.splice(this.index.indexOf(rule),1)},_proto.indexOf=function(rule){return this.index.indexOf(rule)},_proto.process=function(){var plugins=this.options.jss.plugins;this.index.slice(0).forEach(plugins.onProcessRule,plugins)},_proto.register=function(rule){this.map[rule.key]=rule,rule instanceof jss_esm_StyleRule?(this.map[rule.selector]=rule,rule.id&&(this.classes[rule.key]=rule.id)):rule instanceof jss_esm_KeyframesRule&&this.keyframes&&(this.keyframes[rule.name]=rule.id)},_proto.unregister=function(rule){delete this.map[rule.key],rule instanceof jss_esm_StyleRule?(delete this.map[rule.selector],delete this.classes[rule.key]):rule instanceof jss_esm_KeyframesRule&&delete this.keyframes[rule.name]},_proto.update=function(){var name,data,options;if("string"==typeof(arguments.length<=0?void 0:arguments[0])?(name=arguments.length<=0?void 0:arguments[0],data=arguments.length<=1?void 0:arguments[1],options=arguments.length<=2?void 0:arguments[2]):(data=arguments.length<=0?void 0:arguments[0],options=arguments.length<=1?void 0:arguments[1],name=null),name)this.updateOne(this.map[name],data,options);else for(var index=0;index<this.index.length;index++)this.updateOne(this.index[index],data,options)},_proto.updateOne=function(rule,data,options){void 0===options&&(options=defaultUpdateOptions);var _this$options2=this.options,plugins=_this$options2.jss.plugins,sheet=_this$options2.sheet;if(rule.rules instanceof RuleList)rule.rules.update(data,options);else{var styleRule=rule,style=styleRule.style;if(plugins.onUpdate(data,rule,sheet,options),options.process&&style&&style!==styleRule.style){for(var prop in plugins.onProcessStyle(styleRule.style,styleRule,sheet),styleRule.style){var nextValue=styleRule.style[prop];nextValue!==style[prop]&&styleRule.prop(prop,nextValue,forceUpdateOptions)}for(var _prop in style){var _nextValue=styleRule.style[_prop],_prevValue=style[_prop];null==_nextValue&&_nextValue!==_prevValue&&styleRule.prop(_prop,null,forceUpdateOptions)}}}},_proto.toString=function(options){for(var str="",sheet=this.options.sheet,link=!!sheet&&sheet.options.link,index=0;index<this.index.length;index++){var css=this.index[index].toString(options);(css||link)&&(str&&(str+="\n"),str+=css)}return str},RuleList}(),jss_esm_StyleSheet=function(){function StyleSheet(styles,options){for(var name in this.options=void 0,this.deployed=void 0,this.attached=void 0,this.rules=void 0,this.renderer=void 0,this.classes=void 0,this.keyframes=void 0,this.queue=void 0,this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=Object(esm_extends.a)({},options,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),options.Renderer&&(this.renderer=new options.Renderer(this)),this.rules=new jss_esm_RuleList(this.options),styles)this.rules.add(name,styles[name]);this.rules.process()}var _proto=StyleSheet.prototype;return _proto.attach=function(){return this.attached||(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy()),this},_proto.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},_proto.addRule=function(name,decl,options){var queue=this.queue;this.attached&&!queue&&(this.queue=[]);var rule=this.rules.add(name,decl,options);return rule?(this.options.jss.plugins.onProcessRule(rule),this.attached?this.deployed?(queue?queue.push(rule):(this.insertRule(rule),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0)),rule):rule:(this.deployed=!1,rule)):null},_proto.insertRule=function(rule){this.renderer&&this.renderer.insertRule(rule)},_proto.addRules=function(styles,options){var added=[];for(var name in styles){var rule=this.addRule(name,styles[name],options);rule&&added.push(rule)}return added},_proto.getRule=function(name){return this.rules.get(name)},_proto.deleteRule=function(name){var rule="object"==typeof name?name:this.rules.get(name);return!!rule&&(this.rules.remove(rule),!(this.attached&&rule.renderable&&this.renderer)||this.renderer.deleteRule(rule.renderable))},_proto.indexOf=function(rule){return this.rules.indexOf(rule)},_proto.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},_proto.update=function(){var _this$rules;return(_this$rules=this.rules).update.apply(_this$rules,arguments),this},_proto.updateOne=function(rule,data,options){return this.rules.updateOne(rule,data,options),this},_proto.toString=function(options){return this.rules.toString(options)},StyleSheet}(),PluginsRegistry=function(){function PluginsRegistry(){this.plugins={internal:[],external:[]},this.registry=void 0}var _proto=PluginsRegistry.prototype;return _proto.onCreateRule=function(name,decl,options){for(var i=0;i<this.registry.onCreateRule.length;i++){var rule=this.registry.onCreateRule[i](name,decl,options);if(rule)return rule}return null},_proto.onProcessRule=function(rule){if(!rule.isProcessed){for(var sheet=rule.options.sheet,i=0;i<this.registry.onProcessRule.length;i++)this.registry.onProcessRule[i](rule,sheet);rule.style&&this.onProcessStyle(rule.style,rule,sheet),rule.isProcessed=!0}},_proto.onProcessStyle=function(style,rule,sheet){for(var i=0;i<this.registry.onProcessStyle.length;i++)rule.style=this.registry.onProcessStyle[i](rule.style,rule,sheet)},_proto.onProcessSheet=function(sheet){for(var i=0;i<this.registry.onProcessSheet.length;i++)this.registry.onProcessSheet[i](sheet)},_proto.onUpdate=function(data,rule,sheet,options){for(var i=0;i<this.registry.onUpdate.length;i++)this.registry.onUpdate[i](data,rule,sheet,options)},_proto.onChangeValue=function(value,prop,rule){for(var processedValue=value,i=0;i<this.registry.onChangeValue.length;i++)processedValue=this.registry.onChangeValue[i](processedValue,prop,rule);return processedValue},_proto.use=function(newPlugin,options){void 0===options&&(options={queue:"external"});var plugins=this.plugins[options.queue];-1===plugins.indexOf(newPlugin)&&(plugins.push(newPlugin),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce((function(registry,plugin){for(var name in plugin)name in registry&&registry[name].push(plugin[name]);return registry}),{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},PluginsRegistry}(),jss_esm_SheetsRegistry=function(){function SheetsRegistry(){this.registry=[]}var _proto=SheetsRegistry.prototype;return _proto.add=function(sheet){var registry=this.registry,index=sheet.options.index;if(-1===registry.indexOf(sheet))if(0===registry.length||index>=this.index)registry.push(sheet);else for(var i=0;i<registry.length;i++)if(registry[i].options.index>index)return void registry.splice(i,0,sheet)},_proto.reset=function(){this.registry=[]},_proto.remove=function(sheet){var index=this.registry.indexOf(sheet);this.registry.splice(index,1)},_proto.toString=function(_temp){for(var _ref=void 0===_temp?{}:_temp,attached=_ref.attached,options=function(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(_ref,["attached"]),css="",i=0;i<this.registry.length;i++){var sheet=this.registry[i];null!=attached&&sheet.attached!==attached||(css&&(css+="\n"),css+=sheet.toString(options))}return css},_createClass(SheetsRegistry,[{key:"index",get:function(){return 0===this.registry.length?0:this.registry[this.registry.length-1].options.index}}]),SheetsRegistry}(),sheets=new jss_esm_SheetsRegistry,globalThis="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),ns="2f1acc6c3a606b082e5eef5e54414ffb";null==globalThis[ns]&&(globalThis[ns]=0);var moduleId=globalThis[ns]++,createGenerateId=function(options){void 0===options&&(options={});var ruleCounter=0;return function(rule,sheet){ruleCounter+=1;var jssId="",prefix="";return sheet&&(sheet.options.classNamePrefix&&(prefix=sheet.options.classNamePrefix),null!=sheet.options.jss.id&&(jssId=String(sheet.options.jss.id))),options.minify?""+(prefix||"c")+moduleId+jssId+ruleCounter:prefix+rule.key+"-"+moduleId+(jssId?"-"+jssId:"")+"-"+ruleCounter}},memoize=function(fn){var value;return function(){return value||(value=fn()),value}};function getPropertyValue(cssRule,prop){try{return cssRule.attributeStyleMap?cssRule.attributeStyleMap.get(prop):cssRule.style.getPropertyValue(prop)}catch(err){return""}}function setProperty(cssRule,prop,value){try{var cssValue=value;if(Array.isArray(value)&&(cssValue=toCssValue(value,!0),"!important"===value[value.length-1]))return cssRule.style.setProperty(prop,cssValue,"important"),!0;cssRule.attributeStyleMap?cssRule.attributeStyleMap.set(prop,cssValue):cssRule.style.setProperty(prop,cssValue)}catch(err){return!1}return!0}function removeProperty(cssRule,prop){try{cssRule.attributeStyleMap?cssRule.attributeStyleMap.delete(prop):cssRule.style.removeProperty(prop)}catch(err){}}function setSelector(cssRule,selectorText){return cssRule.selectorText=selectorText,cssRule.selectorText===selectorText}var getHead=memoize((function(){return document.querySelector("head")}));function findPrevNode(options){var registry=sheets.registry;if(registry.length>0){var sheet=function(registry,options){for(var i=0;i<registry.length;i++){var sheet=registry[i];if(sheet.attached&&sheet.options.index>options.index&&sheet.options.insertionPoint===options.insertionPoint)return sheet}return null}(registry,options);if(sheet&&sheet.renderer)return{parent:sheet.renderer.element.parentNode,node:sheet.renderer.element};if((sheet=function(registry,options){for(var i=registry.length-1;i>=0;i--){var sheet=registry[i];if(sheet.attached&&sheet.options.insertionPoint===options.insertionPoint)return sheet}return null}(registry,options))&&sheet.renderer)return{parent:sheet.renderer.element.parentNode,node:sheet.renderer.element.nextSibling}}var insertionPoint=options.insertionPoint;if(insertionPoint&&"string"==typeof insertionPoint){var comment=function(text){for(var head=getHead(),i=0;i<head.childNodes.length;i++){var node=head.childNodes[i];if(8===node.nodeType&&node.nodeValue.trim()===text)return node}return null}(insertionPoint);if(comment)return{parent:comment.parentNode,node:comment.nextSibling}}return!1}var getNonce=memoize((function(){var node=document.querySelector('meta[property="csp-nonce"]');return node?node.getAttribute("content"):null})),_insertRule=function(container,rule,index){var maxIndex=container.cssRules.length;(void 0===index||index>maxIndex)&&(index=maxIndex);try{if("insertRule"in container)container.insertRule(rule,index);else if("appendRule"in container){container.appendRule(rule)}}catch(err){return!1}return container.cssRules[index]},DomRenderer=function(){function DomRenderer(sheet){this.getPropertyValue=getPropertyValue,this.setProperty=setProperty,this.removeProperty=removeProperty,this.setSelector=setSelector,this.element=void 0,this.sheet=void 0,this.hasInsertedRules=!1,sheet&&sheets.add(sheet),this.sheet=sheet;var el,_ref=this.sheet?this.sheet.options:{},media=_ref.media,meta=_ref.meta,element=_ref.element;this.element=element||((el=document.createElement("style")).textContent="\n",el),this.element.setAttribute("data-jss",""),media&&this.element.setAttribute("media",media),meta&&this.element.setAttribute("data-meta",meta);var nonce=getNonce();nonce&&this.element.setAttribute("nonce",nonce)}var _proto=DomRenderer.prototype;return _proto.attach=function(){if(!this.element.parentNode&&this.sheet){!function(style,options){var insertionPoint=options.insertionPoint,nextNode=findPrevNode(options);if(!1!==nextNode&&nextNode.parent)nextNode.parent.insertBefore(style,nextNode.node);else if(insertionPoint&&"number"==typeof insertionPoint.nodeType){var insertionPointElement=insertionPoint,parentNode=insertionPointElement.parentNode;parentNode&&parentNode.insertBefore(style,insertionPointElement.nextSibling)}else getHead().appendChild(style)}(this.element,this.sheet.options);var deployed=Boolean(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&deployed&&(this.hasInsertedRules=!1,this.deploy())}},_proto.detach=function(){var parentNode=this.element.parentNode;parentNode&&parentNode.removeChild(this.element)},_proto.deploy=function(){var sheet=this.sheet;sheet&&(sheet.options.link?this.insertRules(sheet.rules):this.element.textContent="\n"+sheet.toString()+"\n")},_proto.insertRules=function(rules,nativeParent){for(var i=0;i<rules.index.length;i++)this.insertRule(rules.index[i],i,nativeParent)},_proto.insertRule=function(rule,index,nativeParent){if(void 0===nativeParent&&(nativeParent=this.element.sheet),rule.rules){var parent=rule,latestNativeParent=nativeParent;return("conditional"!==rule.type&&"keyframes"!==rule.type||!1!==(latestNativeParent=_insertRule(nativeParent,parent.toString({children:!1}),index)))&&(this.insertRules(parent.rules,latestNativeParent),latestNativeParent)}if(rule.renderable&&rule.renderable.parentStyleSheet===this.element.sheet)return rule.renderable;var ruleStr=rule.toString();if(!ruleStr)return!1;var nativeRule=_insertRule(nativeParent,ruleStr,index);return!1!==nativeRule&&(this.hasInsertedRules=!0,rule.renderable=nativeRule,nativeRule)},_proto.deleteRule=function(cssRule){var sheet=this.element.sheet,index=this.indexOf(cssRule);return-1!==index&&(sheet.deleteRule(index),!0)},_proto.indexOf=function(cssRule){for(var cssRules=this.element.sheet.cssRules,index=0;index<cssRules.length;index++)if(cssRule===cssRules[index])return index;return-1},_proto.replaceRule=function(cssRule,rule){var index=this.indexOf(cssRule);return-1!==index&&(this.element.sheet.deleteRule(index),this.insertRule(rule,index))},_proto.getRules=function(){return this.element.sheet.cssRules},DomRenderer}(),instanceCounter=0,jss_esm_Jss=function(){function Jss(options){this.id=instanceCounter++,this.version="10.4.0",this.plugins=new PluginsRegistry,this.options={id:{minify:!1},createGenerateId:createGenerateId,Renderer:dist_module.a?DomRenderer:null,plugins:[]},this.generateId=createGenerateId({minify:!1});for(var i=0;i<plugins.length;i++)this.plugins.use(plugins[i],{queue:"internal"});this.setup(options)}var _proto=Jss.prototype;return _proto.setup=function(options){return void 0===options&&(options={}),options.createGenerateId&&(this.options.createGenerateId=options.createGenerateId),options.id&&(this.options.id=Object(esm_extends.a)({},this.options.id,options.id)),(options.createGenerateId||options.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),null!=options.insertionPoint&&(this.options.insertionPoint=options.insertionPoint),"Renderer"in options&&(this.options.Renderer=options.Renderer),options.plugins&&this.use.apply(this,options.plugins),this},_proto.createStyleSheet=function(styles,options){void 0===options&&(options={});var index=options.index;"number"!=typeof index&&(index=0===sheets.index?0:sheets.index+1);var sheet=new jss_esm_StyleSheet(styles,Object(esm_extends.a)({},options,{jss:this,generateId:options.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:index}));return this.plugins.onProcessSheet(sheet),sheet},_proto.removeStyleSheet=function(sheet){return sheet.detach(),sheets.remove(sheet),this},_proto.createRule=function(name,style,options){if(void 0===style&&(style={}),void 0===options&&(options={}),"object"==typeof name)return this.createRule(void 0,name,style);var ruleOptions=Object(esm_extends.a)({},options,{name:name,jss:this,Renderer:this.options.Renderer});ruleOptions.generateId||(ruleOptions.generateId=this.generateId),ruleOptions.classes||(ruleOptions.classes={}),ruleOptions.keyframes||(ruleOptions.keyframes={});var rule=createRule(name,style,ruleOptions);return rule&&this.plugins.onProcessRule(rule),rule},_proto.use=function(){for(var _this=this,_len=arguments.length,plugins=new Array(_len),_key=0;_key<_len;_key++)plugins[_key]=arguments[_key];return plugins.forEach((function(plugin){_this.plugins.use(plugin)})),this},Jss}();function getDynamicStyles(styles){var to=null;for(var key in styles){var value=styles[key],type=typeof value;if("function"===type)to||(to={}),to[key]=value;else if("object"===type&&null!==value&&!Array.isArray(value)){var extracted=getDynamicStyles(value);extracted&&(to||(to={}),to[key]=extracted)}}return to}var jss_esm_SheetsManager=function(){function SheetsManager(){this.length=0,this.sheets=new WeakMap}var _proto=SheetsManager.prototype;return _proto.get=function(key){var entry=this.sheets.get(key);return entry&&entry.sheet},_proto.add=function(key,sheet){this.sheets.has(key)||(this.length++,this.sheets.set(key,{sheet:sheet,refs:0}))},_proto.manage=function(key){var entry=this.sheets.get(key);if(entry)return 0===entry.refs&&entry.sheet.attach(),entry.refs++,entry.sheet;Object(tiny_warning_esm.a)(!1,"[JSS] SheetsManager: can't find sheet to manage")},_proto.unmanage=function(key){var entry=this.sheets.get(key);entry?entry.refs>0&&(entry.refs--,0===entry.refs&&entry.sheet.detach()):Object(tiny_warning_esm.a)(!1,"SheetsManager: can't find sheet to unmanage")},_createClass(SheetsManager,[{key:"size",get:function(){return this.length}}]),SheetsManager}(),hasCSSTOMSupport="undefined"!=typeof CSS&&CSS&&"number"in CSS,create=function(options){return new jss_esm_Jss(options)},jss_esm_index=create();__webpack_exports__.default=jss_esm_index},function(module,exports){module.exports=function(it){if("function"!=typeof it)throw TypeError(String(it)+" is not a function");return it}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",exports.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",exports.NULL_ARGUMENT="NULL argument",exports.KEY_NOT_FOUND="Key Not Found",exports.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",exports.CANNOT_UNBIND="Could not unbind serviceIdentifier:",exports.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",exports.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",exports.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:",exports.UNDEFINED_INJECT_ANNOTATION=function(name){return"@inject called with undefined this could mean that the class "+name+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},exports.CIRCULAR_DEPENDENCY="Circular dependency found:",exports.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",exports.INVALID_BINDING_TYPE="Invalid binding type:",exports.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",exports.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",exports.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",exports.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",exports.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",exports.ARGUMENTS_LENGTH_MISMATCH=function(){for(var values=[],_i=0;_i<arguments.length;_i++)values[_i]=arguments[_i];return"The number of constructor arguments in the derived class "+values[0]+" must be >= than the number of constructor arguments of its base class."},exports.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",exports.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",exports.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",exports.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",exports.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class",exports.POST_CONSTRUCT_ERROR=function(){for(var values=[],_i=0;_i<arguments.length;_i++)values[_i]=arguments[_i];return"@postConstruct error in class "+values[0]+": "+values[1]},exports.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var values=[],_i=0;_i<arguments.length;_i++)values[_i]=arguments[_i];return"It looks like there is a circular dependency in one of the '"+values[0]+"' bindings. Please investigate bindings withservice identifier '"+values[1]+"'."},exports.STACK_OVERFLOW="Maximum call stack size exceeded"},function(module,exports,__webpack_require__){"use strict";function isObject(item){return void 0!==item&&item&&"object"==typeof item&&!Array.isArray(item)}function getObjectAt(path,source,delimiter="/"){const segments=path.split(delimiter);let segmentObject=source;for(const segment of segments)if(segmentObject=segmentObject[segment],null==segmentObject)return segmentObject;return segmentObject}function mergeDeep(target,changeset,removeNulls=!1){const reverseChangeset={};return isObject(target)&&isObject(changeset)&&Object.keys(changeset).forEach(key=>{const sourceProperty=changeset[key];isObject(sourceProperty)&&void 0!==target[key]&&null!==target[key]?reverseChangeset[key]=mergeDeep(target[key],sourceProperty,removeNulls):target[key]!==sourceProperty&&(reverseChangeset[key]=target[key]||null,target[key]=sourceProperty,removeNulls&&(null!==target[key]&&void 0!==target[key]||delete target[key]))}),reverseChangeset}function setStructure(path,target,delimiter="/"){const segments=path.split(delimiter);let segmentObject=target;return segments.forEach(segment=>{segmentObject[segment]||(segmentObject[segment]={}),segmentObject=segmentObject[segment]}),segmentObject}function setValueWithCompensation(path,target,value){const compensation=getObjectAt(path,clone(target));return setValue(path,target,value),compensation}function setValue(path,target,value){const segments=path.split("/");let segmentObject=target;for(let i=0;i<segments.length-1;i++){const segment=segments[i];segmentObject[segment]||(segmentObject[segment]={}),segmentObject=segmentObject[segment]}segmentObject[segments[segments.length-1]]=value}function clone(obj){return JSON.parse(JSON.stringify(obj))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isEmpty=exports.findObjects=exports.clone=exports.deleteNodeAt=exports.setValue=exports.setValueWithCompensation=exports.cleanupObject=exports.setStructure=exports.mergeDeepAt=exports.mergeDeep=exports.getObjectAt=exports.isObject=void 0,exports.isObject=isObject,exports.getObjectAt=getObjectAt,exports.mergeDeep=mergeDeep,exports.mergeDeepAt=function(path,target,source,removeNulls=!1){if(Array.isArray(source))setValueWithCompensation(path,target,source);else{mergeDeep(setStructure(path,target),source,removeNulls)}},exports.setStructure=setStructure,exports.cleanupObject=function cleanupObject(source,includingNulls=!1,includingEmptyString=!1){source instanceof Object&&Object.keys(source).forEach(key=>{const child=source[key];Array.isArray(child)?(child.forEach(x=>cleanupObject(x,includingNulls,includingEmptyString)),0===child.length&&(source[key]=null,includingNulls&&delete source[key])):child instanceof Object?(cleanupObject(child,includingNulls,includingEmptyString),0===Object.keys(child).length&&delete source[key]):(void 0===child||includingNulls&&null===child||includingEmptyString&&""===child)&&delete source[key]})},exports.setValueWithCompensation=setValueWithCompensation,exports.setValue=setValue,exports.deleteNodeAt=function(path,target){const segments=path.split("/");let segmentObject=target;for(let i=0;i<segments.length-1;i++){const segment=segments[i];segmentObject[segment]||(segmentObject[segment]={}),segmentObject=segmentObject[segment]}delete segmentObject[segments[segments.length-1]]},exports.clone=clone,exports.findObjects=function findObjects(source,predicate){let result=[];const keys=Object.keys(source);for(const key of keys){const node=source[key];if(predicate(node))result.push(node);else{const childResult=findObjects(node,predicate);result=result.concat(childResult)}}return result},exports.isEmpty=function(source){return!source||0===Object.keys(source).length}},function(module,exports,__webpack_require__){var DESCRIPTORS=__webpack_require__(10),propertyIsEnumerableModule=__webpack_require__(91),createPropertyDescriptor=__webpack_require__(62),toIndexedObject=__webpack_require__(32),toPrimitive=__webpack_require__(50),has=__webpack_require__(22),IE8_DOM_DEFINE=__webpack_require__(158),nativeGetOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;exports.f=DESCRIPTORS?nativeGetOwnPropertyDescriptor:function(O,P){if(O=toIndexedObject(O),P=toPrimitive(P,!0),IE8_DOM_DEFINE)try{return nativeGetOwnPropertyDescriptor(O,P)}catch(error){}if(has(O,P))return createPropertyDescriptor(!propertyIsEnumerableModule.f.call(O,P),O[P])}},function(module,exports,__webpack_require__){var IndexedObject=__webpack_require__(70),requireObjectCoercible=__webpack_require__(110);module.exports=function(it){return IndexedObject(requireObjectCoercible(it))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var METADATA_KEY=__webpack_require__(18),Metadata=function(){function Metadata(key,value){this.key=key,this.value=value}return Metadata.prototype.toString=function(){return this.key===METADATA_KEY.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},Metadata}();exports.Metadata=Metadata},function(module,exports,__webpack_require__){var path=__webpack_require__(53),global=__webpack_require__(12),aFunction=function(variable){return"function"==typeof variable?variable:void 0};module.exports=function(namespace,method){return arguments.length<2?aFunction(path[namespace])||aFunction(global[namespace]):path[namespace]&&path[namespace][method]||global[namespace]&&global[namespace][method]}},function(module,exports,__webpack_require__){"use strict";var fails=__webpack_require__(7);module.exports=function(METHOD_NAME,argument){var method=[][METHOD_NAME];return!!method&&fails((function(){method.call(null,argument||function(){throw 1},1)}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.BindingScopeEnum={Request:"Request",Singleton:"Singleton",Transient:"Transient"};exports.BindingTypeEnum={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};exports.TargetTypeEnum={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"}},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(549),exports),__exportStar(__webpack_require__(550),exports),__exportStar(__webpack_require__(551),exports),__exportStar(__webpack_require__(552),exports),__exportStar(__webpack_require__(553),exports)},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PlaceholderViewModel=void 0;const ko=__webpack_require__(0),placeholder_html_1=__webpack_require__(599),decorators_1=__webpack_require__(2);let PlaceholderViewModel=class{constructor(title){this.title=ko.observable(title)}};PlaceholderViewModel=__decorate([decorators_1.Component({selector:"paperbits-placeholder",template:placeholder_html_1.default}),__metadata("design:paramtypes",[String])],PlaceholderViewModel),exports.PlaceholderViewModel=PlaceholderViewModel},function(module,exports){var g;g=function(){return this}();try{g=g||new Function("return this")()}catch(e){"object"==typeof window&&(g=window)}module.exports=g},function(module,exports,__webpack_require__){var DESCRIPTORS=__webpack_require__(10),definePropertyModule=__webpack_require__(21),createPropertyDescriptor=__webpack_require__(62);module.exports=DESCRIPTORS?function(object,key,value){return definePropertyModule.f(object,key,createPropertyDescriptor(1,value))}:function(object,key,value){return object[key]=value,object}},function(module,exports,__webpack_require__){var has=__webpack_require__(22),toObject=__webpack_require__(14),sharedKey=__webpack_require__(89),CORRECT_PROTOTYPE_GETTER=__webpack_require__(120),IE_PROTO=sharedKey("IE_PROTO"),ObjectPrototype=Object.prototype;module.exports=CORRECT_PROTOTYPE_GETTER?Object.getPrototypeOf:function(O){return O=toObject(O),has(O,IE_PROTO)?O[IE_PROTO]:"function"==typeof O.constructor&&O instanceof O.constructor?O.constructor.prototype:O instanceof Object?ObjectPrototype:null}},function(module,exports,__webpack_require__){var wellKnownSymbol=__webpack_require__(15),create=__webpack_require__(72),definePropertyModule=__webpack_require__(21),UNSCOPABLES=wellKnownSymbol("unscopables"),ArrayPrototype=Array.prototype;null==ArrayPrototype[UNSCOPABLES]&&definePropertyModule.f(ArrayPrototype,UNSCOPABLES,{configurable:!0,value:create(null)}),module.exports=function(key){ArrayPrototype[UNSCOPABLES][key]=!0}},function(module,exports,__webpack_require__){var bind=__webpack_require__(75),IndexedObject=__webpack_require__(70),toObject=__webpack_require__(14),toLength=__webpack_require__(24),arraySpeciesCreate=__webpack_require__(76),push=[].push,createMethod=function(TYPE){var IS_MAP=1==TYPE,IS_FILTER=2==TYPE,IS_SOME=3==TYPE,IS_EVERY=4==TYPE,IS_FIND_INDEX=6==TYPE,NO_HOLES=5==TYPE||IS_FIND_INDEX;return function($this,callbackfn,that,specificCreate){for(var value,result,O=toObject($this),self=IndexedObject(O),boundFunction=bind(callbackfn,that,3),length=toLength(self.length),index=0,create=specificCreate||arraySpeciesCreate,target=IS_MAP?create($this,length):IS_FILTER?create($this,0):void 0;length>index;index++)if((NO_HOLES||index in self)&&(result=boundFunction(value=self[index],index,O),TYPE))if(IS_MAP)target[index]=result;else if(result)switch(TYPE){case 3:return!0;case 5:return value;case 6:return index;case 2:push.call(target,value)}else if(IS_EVERY)return!1;return IS_FIND_INDEX?-1:IS_SOME||IS_EVERY?IS_EVERY:target}};module.exports={forEach:createMethod(0),map:createMethod(1),filter:createMethod(2),some:createMethod(3),every:createMethod(4),find:createMethod(5),findIndex:createMethod(6)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ERROR_MSGS=__webpack_require__(29),METADATA_KEY=__webpack_require__(18);function _tagParameterOrProperty(metadataKey,annotationTarget,propertyName,metadata,parameterIndex){var paramsOrPropertiesMetadata={},isParameterDecorator="number"==typeof parameterIndex,key=void 0!==parameterIndex&&isParameterDecorator?parameterIndex.toString():propertyName;if(isParameterDecorator&&void 0!==propertyName)throw new Error(ERROR_MSGS.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(metadataKey,annotationTarget)&&(paramsOrPropertiesMetadata=Reflect.getMetadata(metadataKey,annotationTarget));var paramOrPropertyMetadata=paramsOrPropertiesMetadata[key];if(Array.isArray(paramOrPropertyMetadata))for(var _i=0,paramOrPropertyMetadata_1=paramOrPropertyMetadata;_i<paramOrPropertyMetadata_1.length;_i++){var m=paramOrPropertyMetadata_1[_i];if(m.key===metadata.key)throw new Error(ERROR_MSGS.DUPLICATED_METADATA+" "+m.key.toString())}else paramOrPropertyMetadata=[];paramOrPropertyMetadata.push(metadata),paramsOrPropertiesMetadata[key]=paramOrPropertyMetadata,Reflect.defineMetadata(metadataKey,paramsOrPropertiesMetadata,annotationTarget)}function _decorate(decorators,target){Reflect.decorate(decorators,target)}function _param(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}}exports.tagParameter=function(annotationTarget,propertyName,parameterIndex,metadata){_tagParameterOrProperty(METADATA_KEY.TAGGED,annotationTarget,propertyName,metadata,parameterIndex)},exports.tagProperty=function(annotationTarget,propertyName,metadata){_tagParameterOrProperty(METADATA_KEY.TAGGED_PROP,annotationTarget.constructor,propertyName,metadata)},exports.decorate=function(decorator,target,parameterIndex){"number"==typeof parameterIndex?_decorate([_param(parameterIndex,decorator)],target):"string"==typeof parameterIndex?Reflect.decorate([decorator],target,parameterIndex):_decorate([decorator],target)}},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(467),exports),__exportStar(__webpack_require__(468),exports),__exportStar(__webpack_require__(469),exports),__exportStar(__webpack_require__(470),exports),__exportStar(__webpack_require__(471),exports),__exportStar(__webpack_require__(472),exports),__exportStar(__webpack_require__(473),exports),__exportStar(__webpack_require__(474),exports),__exportStar(__webpack_require__(475),exports),__exportStar(__webpack_require__(476),exports),__exportStar(__webpack_require__(477),exports),__exportStar(__webpack_require__(200),exports),__exportStar(__webpack_require__(478),exports),__exportStar(__webpack_require__(479),exports),__exportStar(__webpack_require__(480),exports)},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(524),exports),__exportStar(__webpack_require__(525),exports),__exportStar(__webpack_require__(526),exports),__exportStar(__webpack_require__(527),exports)},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(97),exports),__exportStar(__webpack_require__(20),exports),__exportStar(__webpack_require__(226),exports),__exportStar(__webpack_require__(225),exports)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.JssCompiler=void 0;const jss_1=__webpack_require__(27),jss_preset_default_1=__webpack_require__(1017),Utils=__webpack_require__(6),styles_1=__webpack_require__(8),opts=jss_preset_default_1.default();opts.createGenerateId=()=>(rule,sheet)=>Utils.camelCaseToKebabCase(rule.key),jss_1.default.setup(opts);exports.JssCompiler=class{flattenMediaQueries(styles,globalStyles){const flattenNestedMediaQueries=styles.map(x=>x.nestedMediaQueries).reduce((acc,next)=>acc.concat(next),[]),flattenNestedGlobalMediaQueries=globalStyles.map(x=>x.nestedMediaQueries).reduce((acc,next)=>acc.concat(next),[]),groupedMediaQueries=[];for(const breakpointMinWidth of Object.values(styles_1.BreakpointValues)){const mediaQuery=new styles_1.StyleMediaQuery(breakpointMinWidth);flattenNestedMediaQueries.filter(x=>x.minWidth===breakpointMinWidth).forEach(x=>mediaQuery.styles.push(...x.styles)),flattenNestedGlobalMediaQueries.filter(x=>x.minWidth===breakpointMinWidth).forEach(x=>mediaQuery.globalStyles.push(...x.styles)),groupedMediaQueries.push(mediaQuery)}return groupedMediaQueries}styleSheetToCss(styleSheet){const globalJssString=`{ "@global": { ${styleSheet.globalStyles.map(style=>style.toJssString()).filter(x=>!!x).join(",")} } }`,globalJssObject=JSON.parse(globalJssString),globalCss=jss_1.default.createStyleSheet(globalJssObject).toString(),jssString=`{${[`"@font-face":[${styleSheet.fontFaces.map(x=>x.toJssString()).join(",")}]`,styleSheet.styles.map(style=>style.toJssString()).filter(x=>!!x).join(","),this.flattenMediaQueries(styleSheet.styles,styleSheet.globalStyles).map(x=>x.toJssString()).filter(x=>!!x).join(",")].filter(x=>!!x).join(",")}}`,jssObject=JSON.parse(jssString);return`${globalCss} ${jss_1.default.createStyleSheet(jssObject).toString()}`}compile(...styleSheets){return styleSheets.map(val=>this.styleSheetToCss(val)).join(" ").replace(/\n/g,"").replace(/\s\s+/g," ")}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__.a=function(condition,message){}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(9);module.exports=function(input,PREFERRED_STRING){if(!isObject(input))return input;var fn,val;if(PREFERRED_STRING&&"function"==typeof(fn=input.toString)&&!isObject(val=fn.call(input)))return val;if("function"==typeof(fn=input.valueOf)&&!isObject(val=fn.call(input)))return val;if(!PREFERRED_STRING&&"function"==typeof(fn=input.toString)&&!isObject(val=fn.call(input)))return val;throw TypeError("Can't convert object to primitive value")}},function(module,exports){module.exports=!1},function(module,exports,__webpack_require__){var global=__webpack_require__(12),createNonEnumerableProperty=__webpack_require__(40),has=__webpack_require__(22),setGlobal=__webpack_require__(112),inspectSource=__webpack_require__(111),InternalStateModule=__webpack_require__(68),getInternalState=InternalStateModule.get,enforceInternalState=InternalStateModule.enforce,TEMPLATE=String(String).split("String");(module.exports=function(O,key,value,options){var unsafe=!!options&&!!options.unsafe,simple=!!options&&!!options.enumerable,noTargetGet=!!options&&!!options.noTargetGet;"function"==typeof value&&("string"!=typeof key||has(value,"name")||createNonEnumerableProperty(value,"name",key),enforceInternalState(value).source=TEMPLATE.join("string"==typeof key?key:"")),O!==global?(unsafe?!noTargetGet&&O[key]&&(simple=!0):delete O[key],simple?O[key]=value:createNonEnumerableProperty(O,key,value)):simple?O[key]=value:setGlobal(key,value)})(Function.prototype,"toString",(function(){return"function"==typeof this&&getInternalState(this).source||inspectSource(this)}))},function(module,exports,__webpack_require__){var global=__webpack_require__(12);module.exports=global},function(module,exports,__webpack_require__){"use strict";var toPrimitive=__webpack_require__(50),definePropertyModule=__webpack_require__(21),createPropertyDescriptor=__webpack_require__(62);module.exports=function(object,key,value){var propertyKey=toPrimitive(key);propertyKey in object?definePropertyModule.f(object,propertyKey,createPropertyDescriptor(0,value)):object[propertyKey]=value}},function(module,exports,__webpack_require__){var classof=__webpack_require__(63);module.exports=Array.isArray||function(arg){return"Array"==classof(arg)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var idCounter=0;exports.id=function(){return idCounter++}},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(80),exports),__exportStar(__webpack_require__(545),exports),__exportStar(__webpack_require__(546),exports),__exportStar(__webpack_require__(209),exports),__exportStar(__webpack_require__(547),exports),__exportStar(__webpack_require__(548),exports)},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(589),exports),__exportStar(__webpack_require__(590),exports),__exportStar(__webpack_require__(591),exports),__exportStar(__webpack_require__(592),exports),__exportStar(__webpack_require__(593),exports)},function(module,__webpack_exports__,__webpack_require__){"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},isBrowser="object"===("undefined"==typeof window?"undefined":_typeof(window))&&"object"===("undefined"==typeof document?"undefined":_typeof(document))&&9===document.nodeType;__webpack_exports__.a=isBrowser},function(module,exports,__webpack_require__){(function(global){var scope=void 0!==global&&global||"undefined"!=typeof self&&self||window,apply=Function.prototype.apply;function Timeout(id,clearFn){this._id=id,this._clearFn=clearFn}exports.setTimeout=function(){return new Timeout(apply.call(setTimeout,scope,arguments),clearTimeout)},exports.setInterval=function(){return new Timeout(apply.call(setInterval,scope,arguments),clearInterval)},exports.clearTimeout=exports.clearInterval=function(timeout){timeout&&timeout.close()},Timeout.prototype.unref=Timeout.prototype.ref=function(){},Timeout.prototype.close=function(){this._clearFn.call(scope,this._id)},exports.enroll=function(item,msecs){clearTimeout(item._idleTimeoutId),item._idleTimeout=msecs},exports.unenroll=function(item){clearTimeout(item._idleTimeoutId),item._idleTimeout=-1},exports._unrefActive=exports.active=function(item){clearTimeout(item._idleTimeoutId);var msecs=item._idleTimeout;msecs>=0&&(item._idleTimeoutId=setTimeout((function(){item._onTimeout&&item._onTimeout()}),msecs))},__webpack_require__(312),exports.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==global&&global.setImmediate||this&&this.setImmediate,exports.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==global&&global.clearImmediate||this&&this.clearImmediate}).call(this,__webpack_require__(39))},function(module,exports){var ceil=Math.ceil,floor=Math.floor;module.exports=function(argument){return isNaN(argument=+argument)?0:(argument>0?floor:ceil)(argument)}},function(module,exports){module.exports=function(bitmap,value){return{enumerable:!(1&bitmap),configurable:!(2&bitmap),writable:!(4&bitmap),value:value}}},function(module,exports){var toString={}.toString;module.exports=function(it){return toString.call(it).slice(8,-1)}},function(module,exports,__webpack_require__){var defineProperty=__webpack_require__(21).f,has=__webpack_require__(22),TO_STRING_TAG=__webpack_require__(15)("toStringTag");module.exports=function(it,TAG,STATIC){it&&!has(it=STATIC?it:it.prototype,TO_STRING_TAG)&&defineProperty(it,TO_STRING_TAG,{configurable:!0,value:TAG})}},function(module,exports,__webpack_require__){(function(process,global){var Reflect;!function(Reflect){!function(factory){var root="object"==typeof global?global:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),exporter=makeExporter(Reflect);function makeExporter(target,previous){return function(key,value){"function"!=typeof target[key]&&Object.defineProperty(target,key,{configurable:!0,writable:!0,value:value}),previous&&previous(key,value)}}void 0===root.Reflect?root.Reflect=Reflect:exporter=makeExporter(root.Reflect,exporter),function(exporter){var hasOwn=Object.prototype.hasOwnProperty,supportsSymbol="function"==typeof Symbol,toPrimitiveSymbol=supportsSymbol&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",iteratorSymbol=supportsSymbol&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",supportsCreate="function"==typeof Object.create,supportsProto={__proto__:[]}instanceof Array,downLevel=!supportsCreate&&!supportsProto,HashMap={create:supportsCreate?function(){return MakeDictionary(Object.create(null))}:supportsProto?function(){return MakeDictionary({__proto__:null})}:function(){return MakeDictionary({})},has:downLevel?function(map,key){return hasOwn.call(map,key)}:function(map,key){return key in map},get:downLevel?function(map,key){return hasOwn.call(map,key)?map[key]:void 0}:function(map,key){return map[key]}},functionPrototype=Object.getPrototypeOf(Function),usePolyfill="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,_Map=usePolyfill||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?CreateMapPolyfill():Map,_Set=usePolyfill||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?CreateSetPolyfill():Set,Metadata=new(usePolyfill||"function"!=typeof WeakMap?CreateWeakMapPolyfill():WeakMap);function decorate(decorators,target,propertyKey,attributes){if(IsUndefined(propertyKey)){if(!IsArray(decorators))throw new TypeError;if(!IsConstructor(target))throw new TypeError;return DecorateConstructor(decorators,target)}if(!IsArray(decorators))throw new TypeError;if(!IsObject(target))throw new TypeError;if(!IsObject(attributes)&&!IsUndefined(attributes)&&!IsNull(attributes))throw new TypeError;return IsNull(attributes)&&(attributes=void 0),DecorateProperty(decorators,target,propertyKey=ToPropertyKey(propertyKey),attributes)}function metadata(metadataKey,metadataValue){function decorator(target,propertyKey){if(!IsObject(target))throw new TypeError;if(!IsUndefined(propertyKey)&&!IsPropertyKey(propertyKey))throw new TypeError;OrdinaryDefineOwnMetadata(metadataKey,metadataValue,target,propertyKey)}return decorator}function defineMetadata(metadataKey,metadataValue,target,propertyKey){if(!IsObject(target))throw new TypeError;return IsUndefined(propertyKey)||(propertyKey=ToPropertyKey(propertyKey)),OrdinaryDefineOwnMetadata(metadataKey,metadataValue,target,propertyKey)}function hasMetadata(metadataKey,target,propertyKey){if(!IsObject(target))throw new TypeError;return IsUndefined(propertyKey)||(propertyKey=ToPropertyKey(propertyKey)),OrdinaryHasMetadata(metadataKey,target,propertyKey)}function hasOwnMetadata(metadataKey,target,propertyKey){if(!IsObject(target))throw new TypeError;return IsUndefined(propertyKey)||(propertyKey=ToPropertyKey(propertyKey)),OrdinaryHasOwnMetadata(metadataKey,target,propertyKey)}function getMetadata(metadataKey,target,propertyKey){if(!IsObject(target))throw new TypeError;return IsUndefined(propertyKey)||(propertyKey=ToPropertyKey(propertyKey)),OrdinaryGetMetadata(metadataKey,target,propertyKey)}function getOwnMetadata(metadataKey,target,propertyKey){if(!IsObject(target))throw new TypeError;return IsUndefined(propertyKey)||(propertyKey=ToPropertyKey(propertyKey)),OrdinaryGetOwnMetadata(metadataKey,target,propertyKey)}function getMetadataKeys(target,propertyKey){if(!IsObject(target))throw new TypeError;return IsUndefined(propertyKey)||(propertyKey=ToPropertyKey(propertyKey)),OrdinaryMetadataKeys(target,propertyKey)}function getOwnMetadataKeys(target,propertyKey){if(!IsObject(target))throw new TypeError;return IsUndefined(propertyKey)||(propertyKey=ToPropertyKey(propertyKey)),OrdinaryOwnMetadataKeys(target,propertyKey)}function deleteMetadata(metadataKey,target,propertyKey){if(!IsObject(target))throw new TypeError;IsUndefined(propertyKey)||(propertyKey=ToPropertyKey(propertyKey));var metadataMap=GetOrCreateMetadataMap(target,propertyKey,!1);if(IsUndefined(metadataMap))return!1;if(!metadataMap.delete(metadataKey))return!1;if(metadataMap.size>0)return!0;var targetMetadata=Metadata.get(target);return targetMetadata.delete(propertyKey),targetMetadata.size>0||Metadata.delete(target),!0}function DecorateConstructor(decorators,target){for(var i=decorators.length-1;i>=0;--i){var decorated=(0,decorators[i])(target);if(!IsUndefined(decorated)&&!IsNull(decorated)){if(!IsConstructor(decorated))throw new TypeError;target=decorated}}return target}function DecorateProperty(decorators,target,propertyKey,descriptor){for(var i=decorators.length-1;i>=0;--i){var decorated=(0,decorators[i])(target,propertyKey,descriptor);if(!IsUndefined(decorated)&&!IsNull(decorated)){if(!IsObject(decorated))throw new TypeError;descriptor=decorated}}return descriptor}function GetOrCreateMetadataMap(O,P,Create){var targetMetadata=Metadata.get(O);if(IsUndefined(targetMetadata)){if(!Create)return;targetMetadata=new _Map,Metadata.set(O,targetMetadata)}var metadataMap=targetMetadata.get(P);if(IsUndefined(metadataMap)){if(!Create)return;metadataMap=new _Map,targetMetadata.set(P,metadataMap)}return metadataMap}function OrdinaryHasMetadata(MetadataKey,O,P){if(OrdinaryHasOwnMetadata(MetadataKey,O,P))return!0;var parent=OrdinaryGetPrototypeOf(O);return!IsNull(parent)&&OrdinaryHasMetadata(MetadataKey,parent,P)}function OrdinaryHasOwnMetadata(MetadataKey,O,P){var metadataMap=GetOrCreateMetadataMap(O,P,!1);return!IsUndefined(metadataMap)&&ToBoolean(metadataMap.has(MetadataKey))}function OrdinaryGetMetadata(MetadataKey,O,P){if(OrdinaryHasOwnMetadata(MetadataKey,O,P))return OrdinaryGetOwnMetadata(MetadataKey,O,P);var parent=OrdinaryGetPrototypeOf(O);return IsNull(parent)?void 0:OrdinaryGetMetadata(MetadataKey,parent,P)}function OrdinaryGetOwnMetadata(MetadataKey,O,P){var metadataMap=GetOrCreateMetadataMap(O,P,!1);if(!IsUndefined(metadataMap))return metadataMap.get(MetadataKey)}function OrdinaryDefineOwnMetadata(MetadataKey,MetadataValue,O,P){GetOrCreateMetadataMap(O,P,!0).set(MetadataKey,MetadataValue)}function OrdinaryMetadataKeys(O,P){var ownKeys=OrdinaryOwnMetadataKeys(O,P),parent=OrdinaryGetPrototypeOf(O);if(null===parent)return ownKeys;var parentKeys=OrdinaryMetadataKeys(parent,P);if(parentKeys.length<=0)return ownKeys;if(ownKeys.length<=0)return parentKeys;for(var set=new _Set,keys=[],_i=0,ownKeys_1=ownKeys;_i<ownKeys_1.length;_i++){var key=ownKeys_1[_i];set.has(key)||(set.add(key),keys.push(key))}for(var _a=0,parentKeys_1=parentKeys;_a<parentKeys_1.length;_a++){key=parentKeys_1[_a];set.has(key)||(set.add(key),keys.push(key))}return keys}function OrdinaryOwnMetadataKeys(O,P){var keys=[],metadataMap=GetOrCreateMetadataMap(O,P,!1);if(IsUndefined(metadataMap))return keys;for(var iterator=GetIterator(metadataMap.keys()),k=0;;){var next=IteratorStep(iterator);if(!next)return keys.length=k,keys;var nextValue=IteratorValue(next);try{keys[k]=nextValue}catch(e){try{IteratorClose(iterator)}finally{throw e}}k++}}function Type(x){if(null===x)return 1;switch(typeof x){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===x?1:6;default:return 6}}function IsUndefined(x){return void 0===x}function IsNull(x){return null===x}function IsSymbol(x){return"symbol"==typeof x}function IsObject(x){return"object"==typeof x?null!==x:"function"==typeof x}function ToPrimitive(input,PreferredType){switch(Type(input)){case 0:case 1:case 2:case 3:case 4:case 5:return input}var hint=3===PreferredType?"string":5===PreferredType?"number":"default",exoticToPrim=GetMethod(input,toPrimitiveSymbol);if(void 0!==exoticToPrim){var result=exoticToPrim.call(input,hint);if(IsObject(result))throw new TypeError;return result}return OrdinaryToPrimitive(input,"default"===hint?"number":hint)}function OrdinaryToPrimitive(O,hint){if("string"===hint){var toString_1=O.toString;if(IsCallable(toString_1))if(!IsObject(result=toString_1.call(O)))return result;if(IsCallable(valueOf=O.valueOf))if(!IsObject(result=valueOf.call(O)))return result}else{var valueOf;if(IsCallable(valueOf=O.valueOf))if(!IsObject(result=valueOf.call(O)))return result;var result,toString_2=O.toString;if(IsCallable(toString_2))if(!IsObject(result=toString_2.call(O)))return result}throw new TypeError}function ToBoolean(argument){return!!argument}function ToString(argument){return""+argument}function ToPropertyKey(argument){var key=ToPrimitive(argument,3);return IsSymbol(key)?key:ToString(key)}function IsArray(argument){return Array.isArray?Array.isArray(argument):argument instanceof Object?argument instanceof Array:"[object Array]"===Object.prototype.toString.call(argument)}function IsCallable(argument){return"function"==typeof argument}function IsConstructor(argument){return"function"==typeof argument}function IsPropertyKey(argument){switch(Type(argument)){case 3:case 4:return!0;default:return!1}}function GetMethod(V,P){var func=V[P];if(null!=func){if(!IsCallable(func))throw new TypeError;return func}}function GetIterator(obj){var method=GetMethod(obj,iteratorSymbol);if(!IsCallable(method))throw new TypeError;var iterator=method.call(obj);if(!IsObject(iterator))throw new TypeError;return iterator}function IteratorValue(iterResult){return iterResult.value}function IteratorStep(iterator){var result=iterator.next();return!result.done&&result}function IteratorClose(iterator){var f=iterator.return;f&&f.call(iterator)}function OrdinaryGetPrototypeOf(O){var proto=Object.getPrototypeOf(O);if("function"!=typeof O||O===functionPrototype)return proto;if(proto!==functionPrototype)return proto;var prototype=O.prototype,prototypeProto=prototype&&Object.getPrototypeOf(prototype);if(null==prototypeProto||prototypeProto===Object.prototype)return proto;var constructor=prototypeProto.constructor;return"function"!=typeof constructor||constructor===O?proto:constructor}function CreateMapPolyfill(){var cacheSentinel={},arraySentinel=[],MapIterator=function(){function MapIterator(keys,values,selector){this._index=0,this._keys=keys,this._values=values,this._selector=selector}return MapIterator.prototype["@@iterator"]=function(){return this},MapIterator.prototype[iteratorSymbol]=function(){return this},MapIterator.prototype.next=function(){var index=this._index;if(index>=0&&index<this._keys.length){var result=this._selector(this._keys[index],this._values[index]);return index+1>=this._keys.length?(this._index=-1,this._keys=arraySentinel,this._values=arraySentinel):this._index++,{value:result,done:!1}}return{value:void 0,done:!0}},MapIterator.prototype.throw=function(error){throw this._index>=0&&(this._index=-1,this._keys=arraySentinel,this._values=arraySentinel),error},MapIterator.prototype.return=function(value){return this._index>=0&&(this._index=-1,this._keys=arraySentinel,this._values=arraySentinel),{value:value,done:!0}},MapIterator}();return function(){function Map(){this._keys=[],this._values=[],this._cacheKey=cacheSentinel,this._cacheIndex=-2}return Object.defineProperty(Map.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Map.prototype.has=function(key){return this._find(key,!1)>=0},Map.prototype.get=function(key){var index=this._find(key,!1);return index>=0?this._values[index]:void 0},Map.prototype.set=function(key,value){var index=this._find(key,!0);return this._values[index]=value,this},Map.prototype.delete=function(key){var index=this._find(key,!1);if(index>=0){for(var size=this._keys.length,i=index+1;i<size;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,key===this._cacheKey&&(this._cacheKey=cacheSentinel,this._cacheIndex=-2),!0}return!1},Map.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=cacheSentinel,this._cacheIndex=-2},Map.prototype.keys=function(){return new MapIterator(this._keys,this._values,getKey)},Map.prototype.values=function(){return new MapIterator(this._keys,this._values,getValue)},Map.prototype.entries=function(){return new MapIterator(this._keys,this._values,getEntry)},Map.prototype["@@iterator"]=function(){return this.entries()},Map.prototype[iteratorSymbol]=function(){return this.entries()},Map.prototype._find=function(key,insert){return this._cacheKey!==key&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=key)),this._cacheIndex<0&&insert&&(this._cacheIndex=this._keys.length,this._keys.push(key),this._values.push(void 0)),this._cacheIndex},Map}();function getKey(key,_){return key}function getValue(_,value){return value}function getEntry(key,value){return[key,value]}}function CreateSetPolyfill(){return function(){function Set(){this._map=new _Map}return Object.defineProperty(Set.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),Set.prototype.has=function(value){return this._map.has(value)},Set.prototype.add=function(value){return this._map.set(value,value),this},Set.prototype.delete=function(value){return this._map.delete(value)},Set.prototype.clear=function(){this._map.clear()},Set.prototype.keys=function(){return this._map.keys()},Set.prototype.values=function(){return this._map.values()},Set.prototype.entries=function(){return this._map.entries()},Set.prototype["@@iterator"]=function(){return this.keys()},Set.prototype[iteratorSymbol]=function(){return this.keys()},Set}()}function CreateWeakMapPolyfill(){var UUID_SIZE=16,keys=HashMap.create(),rootKey=CreateUniqueKey();return function(){function WeakMap(){this._key=CreateUniqueKey()}return WeakMap.prototype.has=function(target){var table=GetOrCreateWeakMapTable(target,!1);return void 0!==table&&HashMap.has(table,this._key)},WeakMap.prototype.get=function(target){var table=GetOrCreateWeakMapTable(target,!1);return void 0!==table?HashMap.get(table,this._key):void 0},WeakMap.prototype.set=function(target,value){return GetOrCreateWeakMapTable(target,!0)[this._key]=value,this},WeakMap.prototype.delete=function(target){var table=GetOrCreateWeakMapTable(target,!1);return void 0!==table&&delete table[this._key]},WeakMap.prototype.clear=function(){this._key=CreateUniqueKey()},WeakMap}();function CreateUniqueKey(){var key;do{key="@@WeakMap@@"+CreateUUID()}while(HashMap.has(keys,key));return keys[key]=!0,key}function GetOrCreateWeakMapTable(target,create){if(!hasOwn.call(target,rootKey)){if(!create)return;Object.defineProperty(target,rootKey,{value:HashMap.create()})}return target[rootKey]}function FillRandomBytes(buffer,size){for(var i=0;i<size;++i)buffer[i]=255*Math.random()|0;return buffer}function GenRandomBytes(size){return"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(size)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(size)):FillRandomBytes(new Uint8Array(size),size):FillRandomBytes(new Array(size),size)}function CreateUUID(){var data=GenRandomBytes(UUID_SIZE);data[6]=79&data[6]|64,data[8]=191&data[8]|128;for(var result="",offset=0;offset<UUID_SIZE;++offset){var byte=data[offset];4!==offset&&6!==offset&&8!==offset||(result+="-"),byte<16&&(result+="0"),result+=byte.toString(16).toLowerCase()}return result}}function MakeDictionary(obj){return obj.__=void 0,delete obj.__,obj}exporter("decorate",decorate),exporter("metadata",metadata),exporter("defineMetadata",defineMetadata),exporter("hasMetadata",hasMetadata),exporter("hasOwnMetadata",hasOwnMetadata),exporter("getMetadata",getMetadata),exporter("getOwnMetadata",getOwnMetadata),exporter("getMetadataKeys",getMetadataKeys),exporter("getOwnMetadataKeys",getOwnMetadataKeys),exporter("deleteMetadata",deleteMetadata)}(exporter)}()}(Reflect||(Reflect={}))}).call(this,__webpack_require__(88),__webpack_require__(39))},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(481),exports),__exportStar(__webpack_require__(482),exports),__exportStar(__webpack_require__(483),exports),__exportStar(__webpack_require__(484),exports),__exportStar(__webpack_require__(485),exports),__exportStar(__webpack_require__(486),exports),__exportStar(__webpack_require__(487),exports),__exportStar(__webpack_require__(488),exports),__exportStar(__webpack_require__(489),exports),__exportStar(__webpack_require__(490),exports),__exportStar(__webpack_require__(491),exports),__exportStar(__webpack_require__(492),exports),__exportStar(__webpack_require__(493),exports),__exportStar(__webpack_require__(494),exports),__exportStar(__webpack_require__(495),exports),__exportStar(__webpack_require__(496),exports),__exportStar(__webpack_require__(497),exports),__exportStar(__webpack_require__(498),exports)},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(500),exports),__exportStar(__webpack_require__(501),exports),__exportStar(__webpack_require__(203),exports)},function(module,exports,__webpack_require__){var set,get,has,NATIVE_WEAK_MAP=__webpack_require__(317),global=__webpack_require__(12),isObject=__webpack_require__(9),createNonEnumerableProperty=__webpack_require__(40),objectHas=__webpack_require__(22),sharedKey=__webpack_require__(89),hiddenKeys=__webpack_require__(69),WeakMap=global.WeakMap;if(NATIVE_WEAK_MAP){var store=new WeakMap,wmget=store.get,wmhas=store.has,wmset=store.set;set=function(it,metadata){return wmset.call(store,it,metadata),metadata},get=function(it){return wmget.call(store,it)||{}},has=function(it){return wmhas.call(store,it)}}else{var STATE=sharedKey("state");hiddenKeys[STATE]=!0,set=function(it,metadata){return createNonEnumerableProperty(it,STATE,metadata),metadata},get=function(it){return objectHas(it,STATE)?it[STATE]:{}},has=function(it){return objectHas(it,STATE)}}module.exports={set:set,get:get,has:has,enforce:function(it){return has(it)?get(it):set(it,{})},getterFor:function(TYPE){return function(it){var state;if(!isObject(it)||(state=get(it)).type!==TYPE)throw TypeError("Incompatible receiver, "+TYPE+" required");return state}}}},function(module,exports){module.exports={}},function(module,exports,__webpack_require__){var fails=__webpack_require__(7),classof=__webpack_require__(63),split="".split;module.exports=fails((function(){return!Object("z").propertyIsEnumerable(0)}))?function(it){return"String"==classof(it)?split.call(it,""):Object(it)}:Object},function(module,exports,__webpack_require__){var toInteger=__webpack_require__(61),max=Math.max,min=Math.min;module.exports=function(index,length){var integer=toInteger(index);return integer<0?max(integer+length,0):min(integer,length)}},function(module,exports,__webpack_require__){var activeXDocument,anObject=__webpack_require__(13),defineProperties=__webpack_require__(165),enumBugKeys=__webpack_require__(118),hiddenKeys=__webpack_require__(69),html=__webpack_require__(166),documentCreateElement=__webpack_require__(113),sharedKey=__webpack_require__(89),IE_PROTO=sharedKey("IE_PROTO"),EmptyConstructor=function(){},scriptTag=function(content){return"<script>"+content+"<\/script>"},NullProtoObject=function(){try{activeXDocument=document.domain&&new ActiveXObject("htmlfile")}catch(error){}var iframeDocument,iframe;NullProtoObject=activeXDocument?function(activeXDocument){activeXDocument.write(scriptTag("")),activeXDocument.close();var temp=activeXDocument.parentWindow.Object;return activeXDocument=null,temp}(activeXDocument):((iframe=documentCreateElement("iframe")).style.display="none",html.appendChild(iframe),iframe.src=String("javascript:"),(iframeDocument=iframe.contentWindow.document).open(),iframeDocument.write(scriptTag("document.F=Object")),iframeDocument.close(),iframeDocument.F);for(var length=enumBugKeys.length;length--;)delete NullProtoObject.prototype[enumBugKeys[length]];return NullProtoObject()};hiddenKeys[IE_PROTO]=!0,module.exports=Object.create||function(O,Properties){var result;return null!==O?(EmptyConstructor.prototype=anObject(O),result=new EmptyConstructor,EmptyConstructor.prototype=null,result[IE_PROTO]=O):result=NullProtoObject(),void 0===Properties?result:defineProperties(result,Properties)}},function(module,exports,__webpack_require__){var internalObjectKeys=__webpack_require__(161),enumBugKeys=__webpack_require__(118);module.exports=Object.keys||function(O){return internalObjectKeys(O,enumBugKeys)}},function(module,exports){module.exports={}},function(module,exports,__webpack_require__){var aFunction=__webpack_require__(28);module.exports=function(fn,that,length){if(aFunction(fn),void 0===that)return fn;switch(length){case 0:return function(){return fn.call(that)};case 1:return function(a){return fn.call(that,a)};case 2:return function(a,b){return fn.call(that,a,b)};case 3:return function(a,b,c){return fn.call(that,a,b,c)}}return function(){return fn.apply(that,arguments)}}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(9),isArray=__webpack_require__(55),SPECIES=__webpack_require__(15)("species");module.exports=function(originalArray,length){var C;return isArray(originalArray)&&("function"!=typeof(C=originalArray.constructor)||C!==Array&&!isArray(C.prototype)?isObject(C)&&null===(C=C[SPECIES])&&(C=void 0):C=void 0),new(void 0===C?Array:C)(0===length?0:length)}},function(module,exports,__webpack_require__){var fails=__webpack_require__(7),wellKnownSymbol=__webpack_require__(15),V8_VERSION=__webpack_require__(124),SPECIES=wellKnownSymbol("species");module.exports=function(METHOD_NAME){return V8_VERSION>=51||!fails((function(){var array=[];return(array.constructor={})[SPECIES]=function(){return{foo:1}},1!==array[METHOD_NAME](Boolean).foo}))}},function(module,exports,__webpack_require__){var fails=__webpack_require__(7);module.exports=!fails((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ERROR_MSGS=__webpack_require__(29);function getServiceIdentifierAsString(serviceIdentifier){return"function"==typeof serviceIdentifier?serviceIdentifier.name:"symbol"==typeof serviceIdentifier?serviceIdentifier.toString():serviceIdentifier}function getFunctionName(v){if(v.name)return v.name;var name_1=v.toString(),match=name_1.match(/^function\s*([^\s(]+)/);return match?match[1]:"Anonymous function: "+name_1}exports.getServiceIdentifierAsString=getServiceIdentifierAsString,exports.listRegisteredBindingsForServiceIdentifier=function(container,serviceIdentifier,getBindings){var registeredBindingsList="",registeredBindings=getBindings(container,serviceIdentifier);return 0!==registeredBindings.length&&(registeredBindingsList="\nRegistered bindings:",registeredBindings.forEach((function(binding){var name="Object";null!==binding.implementationType&&(name=getFunctionName(binding.implementationType)),registeredBindingsList=registeredBindingsList+"\n "+name,binding.constraint.metaData&&(registeredBindingsList=registeredBindingsList+" - "+binding.constraint.metaData)}))),registeredBindingsList},exports.circularDependencyToException=function circularDependencyToException(request){request.childRequests.forEach((function(childRequest){if(function alreadyDependencyChain(request,serviceIdentifier){return null!==request.parentRequest&&(request.parentRequest.serviceIdentifier===serviceIdentifier||alreadyDependencyChain(request.parentRequest,serviceIdentifier))}(childRequest,childRequest.serviceIdentifier)){var services=function(request){return function _createStringArr(req,result){void 0===result&&(result=[]);var serviceIdentifier=getServiceIdentifierAsString(req.serviceIdentifier);return result.push(serviceIdentifier),null!==req.parentRequest?_createStringArr(req.parentRequest,result):result}(request).reverse().join(" --\x3e ")}(childRequest);throw new Error(ERROR_MSGS.CIRCULAR_DEPENDENCY+" "+services)}circularDependencyToException(childRequest)}))},exports.listMetadataForTarget=function(serviceIdentifierString,target){if(target.isTagged()||target.isNamed()){var m_1="",namedTag=target.getNamedTag(),otherTags=target.getCustomTags();return null!==namedTag&&(m_1+=namedTag.toString()+"\n"),null!==otherTags&&otherTags.forEach((function(tag){m_1+=tag.toString()+"\n"}))," "+serviceIdentifierString+"\n "+serviceIdentifierString+" - "+m_1}return" "+serviceIdentifierString},exports.getFunctionName=getFunctionName},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HyperlinkModel=void 0;exports.HyperlinkModel=class{}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ModelBinderSelector=exports.PlaceholderModelBinder=void 0;const placeholder_1=__webpack_require__(94);class PlaceholderModelBinder{constructor(message){this.message=message}contractToModel(contract){return __awaiter(this,void 0,void 0,(function*(){return new placeholder_1.PlaceholderModel(`Could not find model binder for widget type "${contract.type}".`)}))}modelToContract(model){return{type:"placeholder"}}canHandleModel(model){return model instanceof placeholder_1.PlaceholderModel}canHandleContract(contract){throw new Error("Not implemented")}}exports.PlaceholderModelBinder=PlaceholderModelBinder;exports.ModelBinderSelector=class{constructor(modelBinders){this.modelBinders=modelBinders}getModelBinderByContract(contract){const modelBinder=this.modelBinders.find(x=>!(!x||!x.canHandleContract)&&x.canHandleContract(contract));return modelBinder||new PlaceholderModelBinder}getModelBinderByModel(model){const modelBinder=this.modelBinders.find(x=>x.canHandleModel(model));return modelBinder||new PlaceholderModelBinder}}},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(212),exports),__exportStar(__webpack_require__(585),exports)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TextblockModel=void 0;exports.TextblockModel=class{constructor(state){this.type="text-block",this.state=state}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CollapsiblePanelModel=void 0;exports.CollapsiblePanelModel=class{constructor(){this.widgets=[],this.styles={}}}},function(module,exports,__webpack_require__){(function(global,module){var __WEBPACK_AMD_DEFINE_RESULT__;(function(){var FUNC_ERROR_TEXT="Expected a function",PLACEHOLDER="__lodash_placeholder__",wrapFlags=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g,reEscapedHtml=/&(?:amp|lt|gt|quot|#39);/g,reUnescapedHtml=/[&<>"']/g,reHasEscapedHtml=RegExp(reEscapedHtml.source),reHasUnescapedHtml=RegExp(reUnescapedHtml.source),reEscape=/<%-([\s\S]+?)%>/g,reEvaluate=/<%([\s\S]+?)%>/g,reInterpolate=/<%=([\s\S]+?)%>/g,reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reHasRegExpChar=RegExp(reRegExpChar.source),reTrim=/^\s+|\s+$/g,reTrimStart=/^\s+/,reTrimEnd=/\s+$/,reWrapComment=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,reWrapDetails=/\{\n\/\* \[wrapped with (.+)\] \*/,reSplitDetails=/,? & /,reAsciiWord=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,reEscapeChar=/\\(\\)?/g,reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,reFlags=/\w*$/,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsHostCtor=/^\[object .+?Constructor\]$/,reIsOctal=/^0o[0-7]+$/i,reIsUint=/^(?:0|[1-9]\d*)$/,reLatin=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,reNoMatch=/($^)/,reUnescapedString=/['\n\r\u2028\u2029\\]/g,rsComboRange="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",rsBreakRange="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",rsAstral="[\\ud800-\\udfff]",rsBreak="["+rsBreakRange+"]",rsCombo="["+rsComboRange+"]",rsDigits="\\d+",rsDingbat="[\\u2700-\\u27bf]",rsLower="[a-z\\xdf-\\xf6\\xf8-\\xff]",rsMisc="[^\\ud800-\\udfff"+rsBreakRange+rsDigits+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsNonAstral="[^\\ud800-\\udfff]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsUpper="[A-Z\\xc0-\\xd6\\xd8-\\xde]",rsMiscLower="(?:"+rsLower+"|"+rsMisc+")",rsMiscUpper="(?:"+rsUpper+"|"+rsMisc+")",reOptMod="(?:"+rsCombo+"|"+rsFitz+")"+"?",rsSeq="[\\ufe0e\\ufe0f]?"+reOptMod+("(?:\\u200d(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")[\\ufe0e\\ufe0f]?"+reOptMod+")*"),rsEmoji="(?:"+[rsDingbat,rsRegional,rsSurrPair].join("|")+")"+rsSeq,rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,rsAstral].join("|")+")",reApos=RegExp("['’]","g"),reComboMark=RegExp(rsCombo,"g"),reUnicode=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g"),reUnicodeWord=RegExp([rsUpper+"?"+rsLower+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[rsBreak,rsUpper,"$"].join("|")+")",rsMiscUpper+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[rsBreak,rsUpper+rsMiscLower,"$"].join("|")+")",rsUpper+"?"+rsMiscLower+"+(?:['’](?:d|ll|m|re|s|t|ve))?",rsUpper+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rsDigits,rsEmoji].join("|"),"g"),reHasUnicode=RegExp("[\\u200d\\ud800-\\udfff"+rsComboRange+"\\ufe0e\\ufe0f]"),reHasUnicodeWord=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,contextProps=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],templateCounter=-1,typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags["[object Uint8ClampedArray]"]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[dataViewTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[setTag]=cloneableTags[stringTag]=cloneableTags[symbolTag]=cloneableTags[uint8Tag]=cloneableTags["[object Uint8ClampedArray]"]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0,cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;var stringEscapes={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},freeParseFloat=parseFloat,freeParseInt=parseInt,freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),freeExports=exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,freeProcess=moduleExports&&freeGlobal.process,nodeUtil=function(){try{var types=freeModule&&freeModule.require&&freeModule.require("util").types;return types||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}(),nodeIsArrayBuffer=nodeUtil&&nodeUtil.isArrayBuffer,nodeIsDate=nodeUtil&&nodeUtil.isDate,nodeIsMap=nodeUtil&&nodeUtil.isMap,nodeIsRegExp=nodeUtil&&nodeUtil.isRegExp,nodeIsSet=nodeUtil&&nodeUtil.isSet,nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;function apply(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}function arrayAggregator(array,setter,iteratee,accumulator){for(var index=-1,length=null==array?0:array.length;++index<length;){var value=array[index];setter(accumulator,value,iteratee(value),array)}return accumulator}function arrayEach(array,iteratee){for(var index=-1,length=null==array?0:array.length;++index<length&&!1!==iteratee(array[index],index,array););return array}function arrayEachRight(array,iteratee){for(var length=null==array?0:array.length;length--&&!1!==iteratee(array[length],length,array););return array}function arrayEvery(array,predicate){for(var index=-1,length=null==array?0:array.length;++index<length;)if(!predicate(array[index],index,array))return!1;return!0}function arrayFilter(array,predicate){for(var index=-1,length=null==array?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];predicate(value,index,array)&&(result[resIndex++]=value)}return result}function arrayIncludes(array,value){return!!(null==array?0:array.length)&&baseIndexOf(array,value,0)>-1}function arrayIncludesWith(array,value,comparator){for(var index=-1,length=null==array?0:array.length;++index<length;)if(comparator(value,array[index]))return!0;return!1}function arrayMap(array,iteratee){for(var index=-1,length=null==array?0:array.length,result=Array(length);++index<length;)result[index]=iteratee(array[index],index,array);return result}function arrayPush(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}function arrayReduce(array,iteratee,accumulator,initAccum){var index=-1,length=null==array?0:array.length;for(initAccum&&length&&(accumulator=array[++index]);++index<length;)accumulator=iteratee(accumulator,array[index],index,array);return accumulator}function arrayReduceRight(array,iteratee,accumulator,initAccum){var length=null==array?0:array.length;for(initAccum&&length&&(accumulator=array[--length]);length--;)accumulator=iteratee(accumulator,array[length],length,array);return accumulator}function arraySome(array,predicate){for(var index=-1,length=null==array?0:array.length;++index<length;)if(predicate(array[index],index,array))return!0;return!1}var asciiSize=baseProperty("length");function baseFindKey(collection,predicate,eachFunc){var result;return eachFunc(collection,(function(value,key,collection){if(predicate(value,key,collection))return result=key,!1})),result}function baseFindIndex(array,predicate,fromIndex,fromRight){for(var length=array.length,index=fromIndex+(fromRight?1:-1);fromRight?index--:++index<length;)if(predicate(array[index],index,array))return index;return-1}function baseIndexOf(array,value,fromIndex){return value==value?function(array,value,fromIndex){var index=fromIndex-1,length=array.length;for(;++index<length;)if(array[index]===value)return index;return-1}(array,value,fromIndex):baseFindIndex(array,baseIsNaN,fromIndex)}function baseIndexOfWith(array,value,fromIndex,comparator){for(var index=fromIndex-1,length=array.length;++index<length;)if(comparator(array[index],value))return index;return-1}function baseIsNaN(value){return value!=value}function baseMean(array,iteratee){var length=null==array?0:array.length;return length?baseSum(array,iteratee)/length:NaN}function baseProperty(key){return function(object){return null==object?undefined:object[key]}}function basePropertyOf(object){return function(key){return null==object?undefined:object[key]}}function baseReduce(collection,iteratee,accumulator,initAccum,eachFunc){return eachFunc(collection,(function(value,index,collection){accumulator=initAccum?(initAccum=!1,value):iteratee(accumulator,value,index,collection)})),accumulator}function baseSum(array,iteratee){for(var result,index=-1,length=array.length;++index<length;){var current=iteratee(array[index]);undefined!==current&&(result=undefined===result?current:result+current)}return result}function baseTimes(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}function baseUnary(func){return function(value){return func(value)}}function baseValues(object,props){return arrayMap(props,(function(key){return object[key]}))}function cacheHas(cache,key){return cache.has(key)}function charsStartIndex(strSymbols,chrSymbols){for(var index=-1,length=strSymbols.length;++index<length&&baseIndexOf(chrSymbols,strSymbols[index],0)>-1;);return index}function charsEndIndex(strSymbols,chrSymbols){for(var index=strSymbols.length;index--&&baseIndexOf(chrSymbols,strSymbols[index],0)>-1;);return index}function countHolders(array,placeholder){for(var length=array.length,result=0;length--;)array[length]===placeholder&&++result;return result}var deburrLetter=basePropertyOf({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),escapeHtmlChar=basePropertyOf({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function escapeStringChar(chr){return"\\"+stringEscapes[chr]}function hasUnicode(string){return reHasUnicode.test(string)}function mapToArray(map){var index=-1,result=Array(map.size);return map.forEach((function(value,key){result[++index]=[key,value]})),result}function overArg(func,transform){return function(arg){return func(transform(arg))}}function replaceHolders(array,placeholder){for(var index=-1,length=array.length,resIndex=0,result=[];++index<length;){var value=array[index];value!==placeholder&&value!==PLACEHOLDER||(array[index]=PLACEHOLDER,result[resIndex++]=index)}return result}function setToArray(set){var index=-1,result=Array(set.size);return set.forEach((function(value){result[++index]=value})),result}function setToPairs(set){var index=-1,result=Array(set.size);return set.forEach((function(value){result[++index]=[value,value]})),result}function stringSize(string){return hasUnicode(string)?function(string){var result=reUnicode.lastIndex=0;for(;reUnicode.test(string);)++result;return result}(string):asciiSize(string)}function stringToArray(string){return hasUnicode(string)?function(string){return string.match(reUnicode)||[]}(string):function(string){return string.split("")}(string)}var unescapeHtmlChar=basePropertyOf({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var _=function runInContext(context){var uid,Array=(context=null==context?root:_.defaults(root.Object(),context,_.pick(root,contextProps))).Array,Date=context.Date,Error=context.Error,Function=context.Function,Math=context.Math,Object=context.Object,RegExp=context.RegExp,String=context.String,TypeError=context.TypeError,arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype,coreJsData=context["__core-js_shared__"],funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,idCounter=0,maskSrcKey=(uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||""))?"Symbol(src)_1."+uid:"",nativeObjectToString=objectProto.toString,objectCtorString=funcToString.call(Object),oldDash=root._,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Buffer=moduleExports?context.Buffer:undefined,Symbol=context.Symbol,Uint8Array=context.Uint8Array,allocUnsafe=Buffer?Buffer.allocUnsafe:undefined,getPrototype=overArg(Object.getPrototypeOf,Object),objectCreate=Object.create,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,spreadableSymbol=Symbol?Symbol.isConcatSpreadable:undefined,symIterator=Symbol?Symbol.iterator:undefined,symToStringTag=Symbol?Symbol.toStringTag:undefined,defineProperty=function(){try{var func=getNative(Object,"defineProperty");return func({},"",{}),func}catch(e){}}(),ctxClearTimeout=context.clearTimeout!==root.clearTimeout&&context.clearTimeout,ctxNow=Date&&Date.now!==root.Date.now&&Date.now,ctxSetTimeout=context.setTimeout!==root.setTimeout&&context.setTimeout,nativeCeil=Math.ceil,nativeFloor=Math.floor,nativeGetSymbols=Object.getOwnPropertySymbols,nativeIsBuffer=Buffer?Buffer.isBuffer:undefined,nativeIsFinite=context.isFinite,nativeJoin=arrayProto.join,nativeKeys=overArg(Object.keys,Object),nativeMax=Math.max,nativeMin=Math.min,nativeNow=Date.now,nativeParseInt=context.parseInt,nativeRandom=Math.random,nativeReverse=arrayProto.reverse,DataView=getNative(context,"DataView"),Map=getNative(context,"Map"),Promise=getNative(context,"Promise"),Set=getNative(context,"Set"),WeakMap=getNative(context,"WeakMap"),nativeCreate=getNative(Object,"create"),metaMap=WeakMap&&new WeakMap,realNames={},dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),symbolProto=Symbol?Symbol.prototype:undefined,symbolValueOf=symbolProto?symbolProto.valueOf:undefined,symbolToString=symbolProto?symbolProto.toString:undefined;function lodash(value){if(isObjectLike(value)&&!isArray(value)&&!(value instanceof LazyWrapper)){if(value instanceof LodashWrapper)return value;if(hasOwnProperty.call(value,"__wrapped__"))return wrapperClone(value)}return new LodashWrapper(value)}var baseCreate=function(){function object(){}return function(proto){if(!isObject(proto))return{};if(objectCreate)return objectCreate(proto);object.prototype=proto;var result=new object;return object.prototype=undefined,result}}();function baseLodash(){}function LodashWrapper(value,chainAll){this.__wrapped__=value,this.__actions__=[],this.__chain__=!!chainAll,this.__index__=0,this.__values__=undefined}function LazyWrapper(value){this.__wrapped__=value,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Hash(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function ListCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function MapCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function SetCache(values){var index=-1,length=null==values?0:values.length;for(this.__data__=new MapCache;++index<length;)this.add(values[index])}function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value)!inherited&&!hasOwnProperty.call(value,key)||skipIndexes&&("length"==key||isBuff&&("offset"==key||"parent"==key)||isType&&("buffer"==key||"byteLength"==key||"byteOffset"==key)||isIndex(key,length))||result.push(key);return result}function arraySample(array){var length=array.length;return length?array[baseRandom(0,length-1)]:undefined}function arraySampleSize(array,n){return shuffleSelf(copyArray(array),baseClamp(n,0,array.length))}function arrayShuffle(array){return shuffleSelf(copyArray(array))}function assignMergeValue(object,key,value){(undefined!==value&&!eq(object[key],value)||undefined===value&&!(key in object))&&baseAssignValue(object,key,value)}function assignValue(object,key,value){var objValue=object[key];hasOwnProperty.call(object,key)&&eq(objValue,value)&&(undefined!==value||key in object)||baseAssignValue(object,key,value)}function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}function baseAggregator(collection,setter,iteratee,accumulator){return baseEach(collection,(function(value,key,collection){setter(accumulator,value,iteratee(value),collection)})),accumulator}function baseAssign(object,source){return object&&copyObject(source,keys(source),object)}function baseAssignValue(object,key,value){"__proto__"==key&&defineProperty?defineProperty(object,key,{configurable:!0,enumerable:!0,value:value,writable:!0}):object[key]=value}function baseAt(object,paths){for(var index=-1,length=paths.length,result=Array(length),skip=null==object;++index<length;)result[index]=skip?undefined:get(object,paths[index]);return result}function baseClamp(number,lower,upper){return number==number&&(undefined!==upper&&(number=number<=upper?number:upper),undefined!==lower&&(number=number>=lower?number:lower)),number}function baseClone(value,bitmask,customizer,key,object,stack){var result,isDeep=1&bitmask,isFlat=2&bitmask,isFull=4&bitmask;if(customizer&&(result=object?customizer(value,key,object,stack):customizer(value)),undefined!==result)return result;if(!isObject(value))return value;var isArr=isArray(value);if(isArr){if(result=function(array){var length=array.length,result=new array.constructor(length);length&&"string"==typeof array[0]&&hasOwnProperty.call(array,"index")&&(result.index=array.index,result.input=array.input);return result}(value),!isDeep)return copyArray(value,result)}else{var tag=getTag(value),isFunc=tag==funcTag||tag==genTag;if(isBuffer(value))return cloneBuffer(value,isDeep);if(tag==objectTag||tag==argsTag||isFunc&&!object){if(result=isFlat||isFunc?{}:initCloneObject(value),!isDeep)return isFlat?function(source,object){return copyObject(source,getSymbolsIn(source),object)}(value,function(object,source){return object&&copyObject(source,keysIn(source),object)}(result,value)):function(source,object){return copyObject(source,getSymbols(source),object)}(value,baseAssign(result,value))}else{if(!cloneableTags[tag])return object?value:{};result=function(object,tag,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag:return cloneArrayBuffer(object);case boolTag:case dateTag:return new Ctor(+object);case dataViewTag:return function(dataView,isDeep){var buffer=isDeep?cloneArrayBuffer(dataView.buffer):dataView.buffer;return new dataView.constructor(buffer,dataView.byteOffset,dataView.byteLength)}(object,isDeep);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:return cloneTypedArray(object,isDeep);case mapTag:return new Ctor;case numberTag:case stringTag:return new Ctor(object);case regexpTag:return function(regexp){var result=new regexp.constructor(regexp.source,reFlags.exec(regexp));return result.lastIndex=regexp.lastIndex,result}(object);case setTag:return new Ctor;case symbolTag:return symbol=object,symbolValueOf?Object(symbolValueOf.call(symbol)):{}}var symbol}(value,tag,isDeep)}}stack||(stack=new Stack);var stacked=stack.get(value);if(stacked)return stacked;stack.set(value,result),isSet(value)?value.forEach((function(subValue){result.add(baseClone(subValue,bitmask,customizer,subValue,value,stack))})):isMap(value)&&value.forEach((function(subValue,key){result.set(key,baseClone(subValue,bitmask,customizer,key,value,stack))}));var props=isArr?undefined:(isFull?isFlat?getAllKeysIn:getAllKeys:isFlat?keysIn:keys)(value);return arrayEach(props||value,(function(subValue,key){props&&(subValue=value[key=subValue]),assignValue(result,key,baseClone(subValue,bitmask,customizer,key,value,stack))})),result}function baseConformsTo(object,source,props){var length=props.length;if(null==object)return!length;for(object=Object(object);length--;){var key=props[length],predicate=source[key],value=object[key];if(undefined===value&&!(key in object)||!predicate(value))return!1}return!0}function baseDelay(func,wait,args){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return setTimeout((function(){func.apply(undefined,args)}),wait)}function baseDifference(array,values,iteratee,comparator){var index=-1,includes=arrayIncludes,isCommon=!0,length=array.length,result=[],valuesLength=values.length;if(!length)return result;iteratee&&(values=arrayMap(values,baseUnary(iteratee))),comparator?(includes=arrayIncludesWith,isCommon=!1):values.length>=200&&(includes=cacheHas,isCommon=!1,values=new SetCache(values));outer:for(;++index<length;){var value=array[index],computed=null==iteratee?value:iteratee(value);if(value=comparator||0!==value?value:0,isCommon&&computed==computed){for(var valuesIndex=valuesLength;valuesIndex--;)if(values[valuesIndex]===computed)continue outer;result.push(value)}else includes(values,computed,comparator)||result.push(value)}return result}lodash.templateSettings={escape:reEscape,evaluate:reEvaluate,interpolate:reInterpolate,variable:"",imports:{_:lodash}},lodash.prototype=baseLodash.prototype,lodash.prototype.constructor=lodash,LodashWrapper.prototype=baseCreate(baseLodash.prototype),LodashWrapper.prototype.constructor=LodashWrapper,LazyWrapper.prototype=baseCreate(baseLodash.prototype),LazyWrapper.prototype.constructor=LazyWrapper,Hash.prototype.clear=function(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0},Hash.prototype.delete=function(key){var result=this.has(key)&&delete this.__data__[key];return this.size-=result?1:0,result},Hash.prototype.get=function(key){var data=this.__data__;if(nativeCreate){var result=data[key];return"__lodash_hash_undefined__"===result?undefined:result}return hasOwnProperty.call(data,key)?data[key]:undefined},Hash.prototype.has=function(key){var data=this.__data__;return nativeCreate?undefined!==data[key]:hasOwnProperty.call(data,key)},Hash.prototype.set=function(key,value){var data=this.__data__;return this.size+=this.has(key)?0:1,data[key]=nativeCreate&&undefined===value?"__lodash_hash_undefined__":value,this},ListCache.prototype.clear=function(){this.__data__=[],this.size=0},ListCache.prototype.delete=function(key){var data=this.__data__,index=assocIndexOf(data,key);return!(index<0)&&(index==data.length-1?data.pop():splice.call(data,index,1),--this.size,!0)},ListCache.prototype.get=function(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1]},ListCache.prototype.has=function(key){return assocIndexOf(this.__data__,key)>-1},ListCache.prototype.set=function(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?(++this.size,data.push([key,value])):data[index][1]=value,this},MapCache.prototype.clear=function(){this.size=0,this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}},MapCache.prototype.delete=function(key){var result=getMapData(this,key).delete(key);return this.size-=result?1:0,result},MapCache.prototype.get=function(key){return getMapData(this,key).get(key)},MapCache.prototype.has=function(key){return getMapData(this,key).has(key)},MapCache.prototype.set=function(key,value){var data=getMapData(this,key),size=data.size;return data.set(key,value),this.size+=data.size==size?0:1,this},SetCache.prototype.add=SetCache.prototype.push=function(value){return this.__data__.set(value,"__lodash_hash_undefined__"),this},SetCache.prototype.has=function(value){return this.__data__.has(value)},Stack.prototype.clear=function(){this.__data__=new ListCache,this.size=0},Stack.prototype.delete=function(key){var data=this.__data__,result=data.delete(key);return this.size=data.size,result},Stack.prototype.get=function(key){return this.__data__.get(key)},Stack.prototype.has=function(key){return this.__data__.has(key)},Stack.prototype.set=function(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<199)return pairs.push([key,value]),this.size=++data.size,this;data=this.__data__=new MapCache(pairs)}return data.set(key,value),this.size=data.size,this};var baseEach=createBaseEach(baseForOwn),baseEachRight=createBaseEach(baseForOwnRight,!0);function baseEvery(collection,predicate){var result=!0;return baseEach(collection,(function(value,index,collection){return result=!!predicate(value,index,collection)})),result}function baseExtremum(array,iteratee,comparator){for(var index=-1,length=array.length;++index<length;){var value=array[index],current=iteratee(value);if(null!=current&&(undefined===computed?current==current&&!isSymbol(current):comparator(current,computed)))var computed=current,result=value}return result}function baseFilter(collection,predicate){var result=[];return baseEach(collection,(function(value,index,collection){predicate(value,index,collection)&&result.push(value)})),result}function baseFlatten(array,depth,predicate,isStrict,result){var index=-1,length=array.length;for(predicate||(predicate=isFlattenable),result||(result=[]);++index<length;){var value=array[index];depth>0&&predicate(value)?depth>1?baseFlatten(value,depth-1,predicate,isStrict,result):arrayPush(result,value):isStrict||(result[result.length]=value)}return result}var baseFor=createBaseFor(),baseForRight=createBaseFor(!0);function baseForOwn(object,iteratee){return object&&baseFor(object,iteratee,keys)}function baseForOwnRight(object,iteratee){return object&&baseForRight(object,iteratee,keys)}function baseFunctions(object,props){return arrayFilter(props,(function(key){return isFunction(object[key])}))}function baseGet(object,path){for(var index=0,length=(path=castPath(path,object)).length;null!=object&&index<length;)object=object[toKey(path[index++])];return index&&index==length?object:undefined}function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object))}function baseGetTag(value){return null==value?undefined===value?"[object Undefined]":"[object Null]":symToStringTag&&symToStringTag in Object(value)?function(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=undefined;var unmasked=!0}catch(e){}var result=nativeObjectToString.call(value);unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]);return result}(value):function(value){return nativeObjectToString.call(value)}(value)}function baseGt(value,other){return value>other}function baseHas(object,key){return null!=object&&hasOwnProperty.call(object,key)}function baseHasIn(object,key){return null!=object&&key in Object(object)}function baseIntersection(arrays,iteratee,comparator){for(var includes=comparator?arrayIncludesWith:arrayIncludes,length=arrays[0].length,othLength=arrays.length,othIndex=othLength,caches=Array(othLength),maxLength=1/0,result=[];othIndex--;){var array=arrays[othIndex];othIndex&&iteratee&&(array=arrayMap(array,baseUnary(iteratee))),maxLength=nativeMin(array.length,maxLength),caches[othIndex]=!comparator&&(iteratee||length>=120&&array.length>=120)?new SetCache(othIndex&&array):undefined}array=arrays[0];var index=-1,seen=caches[0];outer:for(;++index<length&&result.length<maxLength;){var value=array[index],computed=iteratee?iteratee(value):value;if(value=comparator||0!==value?value:0,!(seen?cacheHas(seen,computed):includes(result,computed,comparator))){for(othIndex=othLength;--othIndex;){var cache=caches[othIndex];if(!(cache?cacheHas(cache,computed):includes(arrays[othIndex],computed,comparator)))continue outer}seen&&seen.push(computed),result.push(value)}}return result}function baseInvoke(object,path,args){var func=null==(object=parent(object,path=castPath(path,object)))?object:object[toKey(last(path))];return null==func?undefined:apply(func,object,args)}function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag}function baseIsEqual(value,other,bitmask,customizer,stack){return value===other||(null==value||null==other||!isObjectLike(value)&&!isObjectLike(other)?value!=value&&other!=other:function(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?arrayTag:getTag(object),othTag=othIsArr?arrayTag:getTag(other),objIsObj=(objTag=objTag==argsTag?objectTag:objTag)==objectTag,othIsObj=(othTag=othTag==argsTag?objectTag:othTag)==objectTag,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other))return!1;objIsArr=!0,objIsObj=!1}if(isSameTag&&!objIsObj)return stack||(stack=new Stack),objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):function(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case dataViewTag:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset)return!1;object=object.buffer,other=other.buffer;case arrayBufferTag:return!(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other)));case boolTag:case dateTag:case numberTag:return eq(+object,+other);case errorTag:return object.name==other.name&&object.message==other.message;case regexpTag:case stringTag:return object==other+"";case mapTag:var convert=mapToArray;case setTag:var isPartial=1&bitmask;if(convert||(convert=setToArray),object.size!=other.size&&!isPartial)return!1;var stacked=stack.get(object);if(stacked)return stacked==other;bitmask|=2,stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);return stack.delete(object),result;case symbolTag:if(symbolValueOf)return symbolValueOf.call(object)==symbolValueOf.call(other)}return!1}(object,other,objTag,bitmask,customizer,equalFunc,stack);if(!(1&bitmask)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;return stack||(stack=new Stack),equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}if(!isSameTag)return!1;return stack||(stack=new Stack),function(object,other,bitmask,customizer,equalFunc,stack){var isPartial=1&bitmask,objProps=getAllKeys(object),objLength=objProps.length,othLength=getAllKeys(other).length;if(objLength!=othLength&&!isPartial)return!1;var index=objLength;for(;index--;){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key)))return!1}var objStacked=stack.get(object),othStacked=stack.get(other);if(objStacked&&othStacked)return objStacked==other&&othStacked==object;var result=!0;stack.set(object,other),stack.set(other,object);var skipCtor=isPartial;for(;++index<objLength;){var objValue=object[key=objProps[index]],othValue=other[key];if(customizer)var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack);if(!(undefined===compared?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=!1;break}skipCtor||(skipCtor="constructor"==key)}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;objCtor==othCtor||!("constructor"in object)||!("constructor"in other)||"function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor||(result=!1)}return stack.delete(object),stack.delete(other),result}(object,other,bitmask,customizer,equalFunc,stack)}(value,other,bitmask,customizer,baseIsEqual,stack))}function baseIsMatch(object,source,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(null==object)return!length;for(object=Object(object);index--;){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object))return!1}for(;++index<length;){var key=(data=matchData[index])[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(undefined===objValue&&!(key in object))return!1}else{var stack=new Stack;if(customizer)var result=customizer(objValue,srcValue,key,object,source,stack);if(!(undefined===result?baseIsEqual(srcValue,objValue,3,customizer,stack):result))return!1}}return!0}function baseIsNative(value){return!(!isObject(value)||(func=value,maskSrcKey&&maskSrcKey in func))&&(isFunction(value)?reIsNative:reIsHostCtor).test(toSource(value));var func}function baseIteratee(value){return"function"==typeof value?value:null==value?identity:"object"==typeof value?isArray(value)?baseMatchesProperty(value[0],value[1]):baseMatches(value):property(value)}function baseKeys(object){if(!isPrototype(object))return nativeKeys(object);var result=[];for(var key in Object(object))hasOwnProperty.call(object,key)&&"constructor"!=key&&result.push(key);return result}function baseKeysIn(object){if(!isObject(object))return function(object){var result=[];if(null!=object)for(var key in Object(object))result.push(key);return result}(object);var isProto=isPrototype(object),result=[];for(var key in object)("constructor"!=key||!isProto&&hasOwnProperty.call(object,key))&&result.push(key);return result}function baseLt(value,other){return value<other}function baseMap(collection,iteratee){var index=-1,result=isArrayLike(collection)?Array(collection.length):[];return baseEach(collection,(function(value,key,collection){result[++index]=iteratee(value,key,collection)})),result}function baseMatches(source){var matchData=getMatchData(source);return 1==matchData.length&&matchData[0][2]?matchesStrictComparable(matchData[0][0],matchData[0][1]):function(object){return object===source||baseIsMatch(object,source,matchData)}}function baseMatchesProperty(path,srcValue){return isKey(path)&&isStrictComparable(srcValue)?matchesStrictComparable(toKey(path),srcValue):function(object){var objValue=get(object,path);return undefined===objValue&&objValue===srcValue?hasIn(object,path):baseIsEqual(srcValue,objValue,3)}}function baseMerge(object,source,srcIndex,customizer,stack){object!==source&&baseFor(source,(function(srcValue,key){if(stack||(stack=new Stack),isObject(srcValue))!function(object,source,key,srcIndex,mergeFunc,customizer,stack){var objValue=safeGet(object,key),srcValue=safeGet(source,key),stacked=stack.get(srcValue);if(stacked)return void assignMergeValue(object,key,stacked);var newValue=customizer?customizer(objValue,srcValue,key+"",object,source,stack):undefined,isCommon=undefined===newValue;if(isCommon){var isArr=isArray(srcValue),isBuff=!isArr&&isBuffer(srcValue),isTyped=!isArr&&!isBuff&&isTypedArray(srcValue);newValue=srcValue,isArr||isBuff||isTyped?isArray(objValue)?newValue=objValue:isArrayLikeObject(objValue)?newValue=copyArray(objValue):isBuff?(isCommon=!1,newValue=cloneBuffer(srcValue,!0)):isTyped?(isCommon=!1,newValue=cloneTypedArray(srcValue,!0)):newValue=[]:isPlainObject(srcValue)||isArguments(srcValue)?(newValue=objValue,isArguments(objValue)?newValue=toPlainObject(objValue):isObject(objValue)&&!isFunction(objValue)||(newValue=initCloneObject(srcValue))):isCommon=!1}isCommon&&(stack.set(srcValue,newValue),mergeFunc(newValue,srcValue,srcIndex,customizer,stack),stack.delete(srcValue));assignMergeValue(object,key,newValue)}(object,source,key,srcIndex,baseMerge,customizer,stack);else{var newValue=customizer?customizer(safeGet(object,key),srcValue,key+"",object,source,stack):undefined;undefined===newValue&&(newValue=srcValue),assignMergeValue(object,key,newValue)}}),keysIn)}function baseNth(array,n){var length=array.length;if(length)return isIndex(n+=n<0?length:0,length)?array[n]:undefined}function baseOrderBy(collection,iteratees,orders){iteratees=iteratees.length?arrayMap(iteratees,(function(iteratee){return isArray(iteratee)?function(value){return baseGet(value,1===iteratee.length?iteratee[0]:iteratee)}:iteratee})):[identity];var index=-1;return iteratees=arrayMap(iteratees,baseUnary(getIteratee())),function(array,comparer){var length=array.length;for(array.sort(comparer);length--;)array[length]=array[length].value;return array}(baseMap(collection,(function(value,key,collection){return{criteria:arrayMap(iteratees,(function(iteratee){return iteratee(value)})),index:++index,value:value}})),(function(object,other){return function(object,other,orders){var index=-1,objCriteria=object.criteria,othCriteria=other.criteria,length=objCriteria.length,ordersLength=orders.length;for(;++index<length;){var result=compareAscending(objCriteria[index],othCriteria[index]);if(result)return index>=ordersLength?result:result*("desc"==orders[index]?-1:1)}return object.index-other.index}(object,other,orders)}))}function basePickBy(object,paths,predicate){for(var index=-1,length=paths.length,result={};++index<length;){var path=paths[index],value=baseGet(object,path);predicate(value,path)&&baseSet(result,castPath(path,object),value)}return result}function basePullAll(array,values,iteratee,comparator){var indexOf=comparator?baseIndexOfWith:baseIndexOf,index=-1,length=values.length,seen=array;for(array===values&&(values=copyArray(values)),iteratee&&(seen=arrayMap(array,baseUnary(iteratee)));++index<length;)for(var fromIndex=0,value=values[index],computed=iteratee?iteratee(value):value;(fromIndex=indexOf(seen,computed,fromIndex,comparator))>-1;)seen!==array&&splice.call(seen,fromIndex,1),splice.call(array,fromIndex,1);return array}function basePullAt(array,indexes){for(var length=array?indexes.length:0,lastIndex=length-1;length--;){var index=indexes[length];if(length==lastIndex||index!==previous){var previous=index;isIndex(index)?splice.call(array,index,1):baseUnset(array,index)}}return array}function baseRandom(lower,upper){return lower+nativeFloor(nativeRandom()*(upper-lower+1))}function baseRepeat(string,n){var result="";if(!string||n<1||n>9007199254740991)return result;do{n%2&&(result+=string),(n=nativeFloor(n/2))&&(string+=string)}while(n);return result}function baseRest(func,start){return setToString(overRest(func,start,identity),func+"")}function baseSample(collection){return arraySample(values(collection))}function baseSampleSize(collection,n){var array=values(collection);return shuffleSelf(array,baseClamp(n,0,array.length))}function baseSet(object,path,value,customizer){if(!isObject(object))return object;for(var index=-1,length=(path=castPath(path,object)).length,lastIndex=length-1,nested=object;null!=nested&&++index<length;){var key=toKey(path[index]),newValue=value;if("__proto__"===key||"constructor"===key||"prototype"===key)return object;if(index!=lastIndex){var objValue=nested[key];undefined===(newValue=customizer?customizer(objValue,key,nested):undefined)&&(newValue=isObject(objValue)?objValue:isIndex(path[index+1])?[]:{})}assignValue(nested,key,newValue),nested=nested[key]}return object}var baseSetData=metaMap?function(func,data){return metaMap.set(func,data),func}:identity,baseSetToString=defineProperty?function(func,string){return defineProperty(func,"toString",{configurable:!0,enumerable:!1,value:constant(string),writable:!0})}:identity;function baseShuffle(collection){return shuffleSelf(values(collection))}function baseSlice(array,start,end){var index=-1,length=array.length;start<0&&(start=-start>length?0:length+start),(end=end>length?length:end)<0&&(end+=length),length=start>end?0:end-start>>>0,start>>>=0;for(var result=Array(length);++index<length;)result[index]=array[index+start];return result}function baseSome(collection,predicate){var result;return baseEach(collection,(function(value,index,collection){return!(result=predicate(value,index,collection))})),!!result}function baseSortedIndex(array,value,retHighest){var low=0,high=null==array?low:array.length;if("number"==typeof value&&value==value&&high<=2147483647){for(;low<high;){var mid=low+high>>>1,computed=array[mid];null!==computed&&!isSymbol(computed)&&(retHighest?computed<=value:computed<value)?low=mid+1:high=mid}return high}return baseSortedIndexBy(array,value,identity,retHighest)}function baseSortedIndexBy(array,value,iteratee,retHighest){var low=0,high=null==array?0:array.length;if(0===high)return 0;for(var valIsNaN=(value=iteratee(value))!=value,valIsNull=null===value,valIsSymbol=isSymbol(value),valIsUndefined=undefined===value;low<high;){var mid=nativeFloor((low+high)/2),computed=iteratee(array[mid]),othIsDefined=undefined!==computed,othIsNull=null===computed,othIsReflexive=computed==computed,othIsSymbol=isSymbol(computed);if(valIsNaN)var setLow=retHighest||othIsReflexive;else setLow=valIsUndefined?othIsReflexive&&(retHighest||othIsDefined):valIsNull?othIsReflexive&&othIsDefined&&(retHighest||!othIsNull):valIsSymbol?othIsReflexive&&othIsDefined&&!othIsNull&&(retHighest||!othIsSymbol):!othIsNull&&!othIsSymbol&&(retHighest?computed<=value:computed<value);setLow?low=mid+1:high=mid}return nativeMin(high,4294967294)}function baseSortedUniq(array,iteratee){for(var index=-1,length=array.length,resIndex=0,result=[];++index<length;){var value=array[index],computed=iteratee?iteratee(value):value;if(!index||!eq(computed,seen)){var seen=computed;result[resIndex++]=0===value?0:value}}return result}function baseToNumber(value){return"number"==typeof value?value:isSymbol(value)?NaN:+value}function baseToString(value){if("string"==typeof value)return value;if(isArray(value))return arrayMap(value,baseToString)+"";if(isSymbol(value))return symbolToString?symbolToString.call(value):"";var result=value+"";return"0"==result&&1/value==-Infinity?"-0":result}function baseUniq(array,iteratee,comparator){var index=-1,includes=arrayIncludes,length=array.length,isCommon=!0,result=[],seen=result;if(comparator)isCommon=!1,includes=arrayIncludesWith;else if(length>=200){var set=iteratee?null:createSet(array);if(set)return setToArray(set);isCommon=!1,includes=cacheHas,seen=new SetCache}else seen=iteratee?[]:result;outer:for(;++index<length;){var value=array[index],computed=iteratee?iteratee(value):value;if(value=comparator||0!==value?value:0,isCommon&&computed==computed){for(var seenIndex=seen.length;seenIndex--;)if(seen[seenIndex]===computed)continue outer;iteratee&&seen.push(computed),result.push(value)}else includes(seen,computed,comparator)||(seen!==result&&seen.push(computed),result.push(value))}return result}function baseUnset(object,path){return null==(object=parent(object,path=castPath(path,object)))||delete object[toKey(last(path))]}function baseUpdate(object,path,updater,customizer){return baseSet(object,path,updater(baseGet(object,path)),customizer)}function baseWhile(array,predicate,isDrop,fromRight){for(var length=array.length,index=fromRight?length:-1;(fromRight?index--:++index<length)&&predicate(array[index],index,array););return isDrop?baseSlice(array,fromRight?0:index,fromRight?index+1:length):baseSlice(array,fromRight?index+1:0,fromRight?length:index)}function baseWrapperValue(value,actions){var result=value;return result instanceof LazyWrapper&&(result=result.value()),arrayReduce(actions,(function(result,action){return action.func.apply(action.thisArg,arrayPush([result],action.args))}),result)}function baseXor(arrays,iteratee,comparator){var length=arrays.length;if(length<2)return length?baseUniq(arrays[0]):[];for(var index=-1,result=Array(length);++index<length;)for(var array=arrays[index],othIndex=-1;++othIndex<length;)othIndex!=index&&(result[index]=baseDifference(result[index]||array,arrays[othIndex],iteratee,comparator));return baseUniq(baseFlatten(result,1),iteratee,comparator)}function baseZipObject(props,values,assignFunc){for(var index=-1,length=props.length,valsLength=values.length,result={};++index<length;){var value=index<valsLength?values[index]:undefined;assignFunc(result,props[index],value)}return result}function castArrayLikeObject(value){return isArrayLikeObject(value)?value:[]}function castFunction(value){return"function"==typeof value?value:identity}function castPath(value,object){return isArray(value)?value:isKey(value,object)?[value]:stringToPath(toString(value))}var castRest=baseRest;function castSlice(array,start,end){var length=array.length;return end=undefined===end?length:end,!start&&end>=length?array:baseSlice(array,start,end)}var clearTimeout=ctxClearTimeout||function(id){return root.clearTimeout(id)};function cloneBuffer(buffer,isDeep){if(isDeep)return buffer.slice();var length=buffer.length,result=allocUnsafe?allocUnsafe(length):new buffer.constructor(length);return buffer.copy(result),result}function cloneArrayBuffer(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);return new Uint8Array(result).set(new Uint8Array(arrayBuffer)),result}function cloneTypedArray(typedArray,isDeep){var buffer=isDeep?cloneArrayBuffer(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length)}function compareAscending(value,other){if(value!==other){var valIsDefined=undefined!==value,valIsNull=null===value,valIsReflexive=value==value,valIsSymbol=isSymbol(value),othIsDefined=undefined!==other,othIsNull=null===other,othIsReflexive=other==other,othIsSymbol=isSymbol(other);if(!othIsNull&&!othIsSymbol&&!valIsSymbol&&value>other||valIsSymbol&&othIsDefined&&othIsReflexive&&!othIsNull&&!othIsSymbol||valIsNull&&othIsDefined&&othIsReflexive||!valIsDefined&&othIsReflexive||!valIsReflexive)return 1;if(!valIsNull&&!valIsSymbol&&!othIsSymbol&&value<other||othIsSymbol&&valIsDefined&&valIsReflexive&&!valIsNull&&!valIsSymbol||othIsNull&&valIsDefined&&valIsReflexive||!othIsDefined&&valIsReflexive||!othIsReflexive)return-1}return 0}function composeArgs(args,partials,holders,isCurried){for(var argsIndex=-1,argsLength=args.length,holdersLength=holders.length,leftIndex=-1,leftLength=partials.length,rangeLength=nativeMax(argsLength-holdersLength,0),result=Array(leftLength+rangeLength),isUncurried=!isCurried;++leftIndex<leftLength;)result[leftIndex]=partials[leftIndex];for(;++argsIndex<holdersLength;)(isUncurried||argsIndex<argsLength)&&(result[holders[argsIndex]]=args[argsIndex]);for(;rangeLength--;)result[leftIndex++]=args[argsIndex++];return result}function composeArgsRight(args,partials,holders,isCurried){for(var argsIndex=-1,argsLength=args.length,holdersIndex=-1,holdersLength=holders.length,rightIndex=-1,rightLength=partials.length,rangeLength=nativeMax(argsLength-holdersLength,0),result=Array(rangeLength+rightLength),isUncurried=!isCurried;++argsIndex<rangeLength;)result[argsIndex]=args[argsIndex];for(var offset=argsIndex;++rightIndex<rightLength;)result[offset+rightIndex]=partials[rightIndex];for(;++holdersIndex<holdersLength;)(isUncurried||argsIndex<argsLength)&&(result[offset+holders[holdersIndex]]=args[argsIndex++]);return result}function copyArray(source,array){var index=-1,length=source.length;for(array||(array=Array(length));++index<length;)array[index]=source[index];return array}function copyObject(source,props,object,customizer){var isNew=!object;object||(object={});for(var index=-1,length=props.length;++index<length;){var key=props[index],newValue=customizer?customizer(object[key],source[key],key,object,source):undefined;undefined===newValue&&(newValue=source[key]),isNew?baseAssignValue(object,key,newValue):assignValue(object,key,newValue)}return object}function createAggregator(setter,initializer){return function(collection,iteratee){var func=isArray(collection)?arrayAggregator:baseAggregator,accumulator=initializer?initializer():{};return func(collection,setter,getIteratee(iteratee,2),accumulator)}}function createAssigner(assigner){return baseRest((function(object,sources){var index=-1,length=sources.length,customizer=length>1?sources[length-1]:undefined,guard=length>2?sources[2]:undefined;for(customizer=assigner.length>3&&"function"==typeof customizer?(length--,customizer):undefined,guard&&isIterateeCall(sources[0],sources[1],guard)&&(customizer=length<3?undefined:customizer,length=1),object=Object(object);++index<length;){var source=sources[index];source&&assigner(object,source,index,customizer)}return object}))}function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){if(null==collection)return collection;if(!isArrayLike(collection))return eachFunc(collection,iteratee);for(var length=collection.length,index=fromRight?length:-1,iterable=Object(collection);(fromRight?index--:++index<length)&&!1!==iteratee(iterable[index],index,iterable););return collection}}function createBaseFor(fromRight){return function(object,iteratee,keysFunc){for(var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;length--;){var key=props[fromRight?length:++index];if(!1===iteratee(iterable[key],key,iterable))break}return object}}function createCaseFirst(methodName){return function(string){var strSymbols=hasUnicode(string=toString(string))?stringToArray(string):undefined,chr=strSymbols?strSymbols[0]:string.charAt(0),trailing=strSymbols?castSlice(strSymbols,1).join(""):string.slice(1);return chr[methodName]()+trailing}}function createCompounder(callback){return function(string){return arrayReduce(words(deburr(string).replace(reApos,"")),callback,"")}}function createCtor(Ctor){return function(){var args=arguments;switch(args.length){case 0:return new Ctor;case 1:return new Ctor(args[0]);case 2:return new Ctor(args[0],args[1]);case 3:return new Ctor(args[0],args[1],args[2]);case 4:return new Ctor(args[0],args[1],args[2],args[3]);case 5:return new Ctor(args[0],args[1],args[2],args[3],args[4]);case 6:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5]);case 7:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5],args[6])}var thisBinding=baseCreate(Ctor.prototype),result=Ctor.apply(thisBinding,args);return isObject(result)?result:thisBinding}}function createFind(findIndexFunc){return function(collection,predicate,fromIndex){var iterable=Object(collection);if(!isArrayLike(collection)){var iteratee=getIteratee(predicate,3);collection=keys(collection),predicate=function(key){return iteratee(iterable[key],key,iterable)}}var index=findIndexFunc(collection,predicate,fromIndex);return index>-1?iterable[iteratee?collection[index]:index]:undefined}}function createFlow(fromRight){return flatRest((function(funcs){var length=funcs.length,index=length,prereq=LodashWrapper.prototype.thru;for(fromRight&&funcs.reverse();index--;){var func=funcs[index];if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);if(prereq&&!wrapper&&"wrapper"==getFuncName(func))var wrapper=new LodashWrapper([],!0)}for(index=wrapper?index:length;++index<length;){var funcName=getFuncName(func=funcs[index]),data="wrapper"==funcName?getData(func):undefined;wrapper=data&&isLaziable(data[0])&&424==data[1]&&!data[4].length&&1==data[9]?wrapper[getFuncName(data[0])].apply(wrapper,data[3]):1==func.length&&isLaziable(func)?wrapper[funcName]():wrapper.thru(func)}return function(){var args=arguments,value=args[0];if(wrapper&&1==args.length&&isArray(value))return wrapper.plant(value).value();for(var index=0,result=length?funcs[index].apply(this,args):value;++index<length;)result=funcs[index].call(this,result);return result}}))}function createHybrid(func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity){var isAry=128&bitmask,isBind=1&bitmask,isBindKey=2&bitmask,isCurried=24&bitmask,isFlip=512&bitmask,Ctor=isBindKey?undefined:createCtor(func);return function wrapper(){for(var length=arguments.length,args=Array(length),index=length;index--;)args[index]=arguments[index];if(isCurried)var placeholder=getHolder(wrapper),holdersCount=countHolders(args,placeholder);if(partials&&(args=composeArgs(args,partials,holders,isCurried)),partialsRight&&(args=composeArgsRight(args,partialsRight,holdersRight,isCurried)),length-=holdersCount,isCurried&&length<arity){var newHolders=replaceHolders(args,placeholder);return createRecurry(func,bitmask,createHybrid,wrapper.placeholder,thisArg,args,newHolders,argPos,ary,arity-length)}var thisBinding=isBind?thisArg:this,fn=isBindKey?thisBinding[func]:func;return length=args.length,argPos?args=reorder(args,argPos):isFlip&&length>1&&args.reverse(),isAry&&ary<length&&(args.length=ary),this&&this!==root&&this instanceof wrapper&&(fn=Ctor||createCtor(fn)),fn.apply(thisBinding,args)}}function createInverter(setter,toIteratee){return function(object,iteratee){return function(object,setter,iteratee,accumulator){return baseForOwn(object,(function(value,key,object){setter(accumulator,iteratee(value),key,object)})),accumulator}(object,setter,toIteratee(iteratee),{})}}function createMathOperation(operator,defaultValue){return function(value,other){var result;if(undefined===value&&undefined===other)return defaultValue;if(undefined!==value&&(result=value),undefined!==other){if(undefined===result)return other;"string"==typeof value||"string"==typeof other?(value=baseToString(value),other=baseToString(other)):(value=baseToNumber(value),other=baseToNumber(other)),result=operator(value,other)}return result}}function createOver(arrayFunc){return flatRest((function(iteratees){return iteratees=arrayMap(iteratees,baseUnary(getIteratee())),baseRest((function(args){var thisArg=this;return arrayFunc(iteratees,(function(iteratee){return apply(iteratee,thisArg,args)}))}))}))}function createPadding(length,chars){var charsLength=(chars=undefined===chars?" ":baseToString(chars)).length;if(charsLength<2)return charsLength?baseRepeat(chars,length):chars;var result=baseRepeat(chars,nativeCeil(length/stringSize(chars)));return hasUnicode(chars)?castSlice(stringToArray(result),0,length).join(""):result.slice(0,length)}function createRange(fromRight){return function(start,end,step){return step&&"number"!=typeof step&&isIterateeCall(start,end,step)&&(end=step=undefined),start=toFinite(start),undefined===end?(end=start,start=0):end=toFinite(end),function(start,end,step,fromRight){for(var index=-1,length=nativeMax(nativeCeil((end-start)/(step||1)),0),result=Array(length);length--;)result[fromRight?length:++index]=start,start+=step;return result}(start,end,step=undefined===step?start<end?1:-1:toFinite(step),fromRight)}}function createRelationalOperation(operator){return function(value,other){return"string"==typeof value&&"string"==typeof other||(value=toNumber(value),other=toNumber(other)),operator(value,other)}}function createRecurry(func,bitmask,wrapFunc,placeholder,thisArg,partials,holders,argPos,ary,arity){var isCurry=8&bitmask;bitmask|=isCurry?32:64,4&(bitmask&=~(isCurry?64:32))||(bitmask&=-4);var newData=[func,bitmask,thisArg,isCurry?partials:undefined,isCurry?holders:undefined,isCurry?undefined:partials,isCurry?undefined:holders,argPos,ary,arity],result=wrapFunc.apply(undefined,newData);return isLaziable(func)&&setData(result,newData),result.placeholder=placeholder,setWrapToString(result,func,bitmask)}function createRound(methodName){var func=Math[methodName];return function(number,precision){if(number=toNumber(number),(precision=null==precision?0:nativeMin(toInteger(precision),292))&&nativeIsFinite(number)){var pair=(toString(number)+"e").split("e");return+((pair=(toString(func(pair[0]+"e"+(+pair[1]+precision)))+"e").split("e"))[0]+"e"+(+pair[1]-precision))}return func(number)}}var createSet=Set&&1/setToArray(new Set([,-0]))[1]==Infinity?function(values){return new Set(values)}:noop;function createToPairs(keysFunc){return function(object){var tag=getTag(object);return tag==mapTag?mapToArray(object):tag==setTag?setToPairs(object):function(object,props){return arrayMap(props,(function(key){return[key,object[key]]}))}(object,keysFunc(object))}}function createWrap(func,bitmask,thisArg,partials,holders,argPos,ary,arity){var isBindKey=2&bitmask;if(!isBindKey&&"function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);var length=partials?partials.length:0;if(length||(bitmask&=-97,partials=holders=undefined),ary=undefined===ary?ary:nativeMax(toInteger(ary),0),arity=undefined===arity?arity:toInteger(arity),length-=holders?holders.length:0,64&bitmask){var partialsRight=partials,holdersRight=holders;partials=holders=undefined}var data=isBindKey?undefined:getData(func),newData=[func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity];if(data&&function(data,source){var bitmask=data[1],srcBitmask=source[1],newBitmask=bitmask|srcBitmask,isCommon=newBitmask<131,isCombo=128==srcBitmask&&8==bitmask||128==srcBitmask&&256==bitmask&&data[7].length<=source[8]||384==srcBitmask&&source[7].length<=source[8]&&8==bitmask;if(!isCommon&&!isCombo)return data;1&srcBitmask&&(data[2]=source[2],newBitmask|=1&bitmask?0:4);var value=source[3];if(value){var partials=data[3];data[3]=partials?composeArgs(partials,value,source[4]):value,data[4]=partials?replaceHolders(data[3],PLACEHOLDER):source[4]}(value=source[5])&&(partials=data[5],data[5]=partials?composeArgsRight(partials,value,source[6]):value,data[6]=partials?replaceHolders(data[5],PLACEHOLDER):source[6]);(value=source[7])&&(data[7]=value);128&srcBitmask&&(data[8]=null==data[8]?source[8]:nativeMin(data[8],source[8]));null==data[9]&&(data[9]=source[9]);data[0]=source[0],data[1]=newBitmask}(newData,data),func=newData[0],bitmask=newData[1],thisArg=newData[2],partials=newData[3],holders=newData[4],!(arity=newData[9]=undefined===newData[9]?isBindKey?0:func.length:nativeMax(newData[9]-length,0))&&24&bitmask&&(bitmask&=-25),bitmask&&1!=bitmask)result=8==bitmask||16==bitmask?function(func,bitmask,arity){var Ctor=createCtor(func);return function wrapper(){for(var length=arguments.length,args=Array(length),index=length,placeholder=getHolder(wrapper);index--;)args[index]=arguments[index];var holders=length<3&&args[0]!==placeholder&&args[length-1]!==placeholder?[]:replaceHolders(args,placeholder);return(length-=holders.length)<arity?createRecurry(func,bitmask,createHybrid,wrapper.placeholder,void 0,args,holders,void 0,void 0,arity-length):apply(this&&this!==root&&this instanceof wrapper?Ctor:func,this,args)}}(func,bitmask,arity):32!=bitmask&&33!=bitmask||holders.length?createHybrid.apply(undefined,newData):function(func,bitmask,thisArg,partials){var isBind=1&bitmask,Ctor=createCtor(func);return function wrapper(){for(var argsIndex=-1,argsLength=arguments.length,leftIndex=-1,leftLength=partials.length,args=Array(leftLength+argsLength),fn=this&&this!==root&&this instanceof wrapper?Ctor:func;++leftIndex<leftLength;)args[leftIndex]=partials[leftIndex];for(;argsLength--;)args[leftIndex++]=arguments[++argsIndex];return apply(fn,isBind?thisArg:this,args)}}(func,bitmask,thisArg,partials);else var result=function(func,bitmask,thisArg){var isBind=1&bitmask,Ctor=createCtor(func);return function wrapper(){return(this&&this!==root&&this instanceof wrapper?Ctor:func).apply(isBind?thisArg:this,arguments)}}(func,bitmask,thisArg);return setWrapToString((data?baseSetData:setData)(result,newData),func,bitmask)}function customDefaultsAssignIn(objValue,srcValue,key,object){return undefined===objValue||eq(objValue,objectProto[key])&&!hasOwnProperty.call(object,key)?srcValue:objValue}function customDefaultsMerge(objValue,srcValue,key,object,source,stack){return isObject(objValue)&&isObject(srcValue)&&(stack.set(srcValue,objValue),baseMerge(objValue,srcValue,undefined,customDefaultsMerge,stack),stack.delete(srcValue)),objValue}function customOmitClone(value){return isPlainObject(value)?undefined:value}function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=1&bitmask,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength))return!1;var arrStacked=stack.get(array),othStacked=stack.get(other);if(arrStacked&&othStacked)return arrStacked==other&&othStacked==array;var index=-1,result=!0,seen=2&bitmask?new SetCache:undefined;for(stack.set(array,other),stack.set(other,array);++index<arrLength;){var arrValue=array[index],othValue=other[index];if(customizer)var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack);if(undefined!==compared){if(compared)continue;result=!1;break}if(seen){if(!arraySome(other,(function(othValue,othIndex){if(!cacheHas(seen,othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack)))return seen.push(othIndex)}))){result=!1;break}}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,bitmask,customizer,stack)){result=!1;break}}return stack.delete(array),stack.delete(other),result}function flatRest(func){return setToString(overRest(func,undefined,flatten),func+"")}function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols)}function getAllKeysIn(object){return baseGetAllKeys(object,keysIn,getSymbolsIn)}var getData=metaMap?function(func){return metaMap.get(func)}:noop;function getFuncName(func){for(var result=func.name+"",array=realNames[result],length=hasOwnProperty.call(realNames,result)?array.length:0;length--;){var data=array[length],otherFunc=data.func;if(null==otherFunc||otherFunc==func)return data.name}return result}function getHolder(func){return(hasOwnProperty.call(lodash,"placeholder")?lodash:func).placeholder}function getIteratee(){var result=lodash.iteratee||iteratee;return result=result===iteratee?baseIteratee:result,arguments.length?result(arguments[0],arguments[1]):result}function getMapData(map,key){var value,type,data=map.__data__;return("string"==(type=typeof(value=key))||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value)?data["string"==typeof key?"string":"hash"]:data.map}function getMatchData(object){for(var result=keys(object),length=result.length;length--;){var key=result[length],value=object[key];result[length]=[key,value,isStrictComparable(value)]}return result}function getNative(object,key){var value=function(object,key){return null==object?void 0:object[key]}(object,key);return baseIsNative(value)?value:undefined}var getSymbols=nativeGetSymbols?function(object){return null==object?[]:(object=Object(object),arrayFilter(nativeGetSymbols(object),(function(symbol){return propertyIsEnumerable.call(object,symbol)})))}:stubArray,getSymbolsIn=nativeGetSymbols?function(object){for(var result=[];object;)arrayPush(result,getSymbols(object)),object=getPrototype(object);return result}:stubArray,getTag=baseGetTag;function hasPath(object,path,hasFunc){for(var index=-1,length=(path=castPath(path,object)).length,result=!1;++index<length;){var key=toKey(path[index]);if(!(result=null!=object&&hasFunc(object,key)))break;object=object[key]}return result||++index!=length?result:!!(length=null==object?0:object.length)&&isLength(length)&&isIndex(key,length)&&(isArray(object)||isArguments(object))}function initCloneObject(object){return"function"!=typeof object.constructor||isPrototype(object)?{}:baseCreate(getPrototype(object))}function isFlattenable(value){return isArray(value)||isArguments(value)||!!(spreadableSymbol&&value&&value[spreadableSymbol])}function isIndex(value,length){var type=typeof value;return!!(length=null==length?9007199254740991:length)&&("number"==type||"symbol"!=type&&reIsUint.test(value))&&value>-1&&value%1==0&&value<length}function isIterateeCall(value,index,object){if(!isObject(object))return!1;var type=typeof index;return!!("number"==type?isArrayLike(object)&&isIndex(index,object.length):"string"==type&&index in object)&&eq(object[index],value)}function isKey(value,object){if(isArray(value))return!1;var type=typeof value;return!("number"!=type&&"symbol"!=type&&"boolean"!=type&&null!=value&&!isSymbol(value))||(reIsPlainProp.test(value)||!reIsDeepProp.test(value)||null!=object&&value in Object(object))}function isLaziable(func){var funcName=getFuncName(func),other=lodash[funcName];if("function"!=typeof other||!(funcName in LazyWrapper.prototype))return!1;if(func===other)return!0;var data=getData(other);return!!data&&func===data[0]}(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise&&"[object Promise]"!=getTag(Promise.resolve())||Set&&getTag(new Set)!=setTag||WeakMap&&getTag(new WeakMap)!=weakMapTag)&&(getTag=function(value){var result=baseGetTag(value),Ctor=result==objectTag?value.constructor:undefined,ctorString=Ctor?toSource(Ctor):"";if(ctorString)switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return"[object Promise]";case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}return result});var isMaskable=coreJsData?isFunction:stubFalse;function isPrototype(value){var Ctor=value&&value.constructor;return value===("function"==typeof Ctor&&Ctor.prototype||objectProto)}function isStrictComparable(value){return value==value&&!isObject(value)}function matchesStrictComparable(key,srcValue){return function(object){return null!=object&&(object[key]===srcValue&&(undefined!==srcValue||key in Object(object)))}}function overRest(func,start,transform){return start=nativeMax(undefined===start?func.length-1:start,0),function(){for(var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);++index<length;)array[index]=args[start+index];index=-1;for(var otherArgs=Array(start+1);++index<start;)otherArgs[index]=args[index];return otherArgs[start]=transform(array),apply(func,this,otherArgs)}}function parent(object,path){return path.length<2?object:baseGet(object,baseSlice(path,0,-1))}function reorder(array,indexes){for(var arrLength=array.length,length=nativeMin(indexes.length,arrLength),oldArray=copyArray(array);length--;){var index=indexes[length];array[length]=isIndex(index,arrLength)?oldArray[index]:undefined}return array}function safeGet(object,key){if(("constructor"!==key||"function"!=typeof object[key])&&"__proto__"!=key)return object[key]}var setData=shortOut(baseSetData),setTimeout=ctxSetTimeout||function(func,wait){return root.setTimeout(func,wait)},setToString=shortOut(baseSetToString);function setWrapToString(wrapper,reference,bitmask){var source=reference+"";return setToString(wrapper,function(source,details){var length=details.length;if(!length)return source;var lastIndex=length-1;return details[lastIndex]=(length>1?"& ":"")+details[lastIndex],details=details.join(length>2?", ":" "),source.replace(reWrapComment,"{\n/* [wrapped with "+details+"] */\n")}(source,function(details,bitmask){return arrayEach(wrapFlags,(function(pair){var value="_."+pair[0];bitmask&pair[1]&&!arrayIncludes(details,value)&&details.push(value)})),details.sort()}(function(source){var match=source.match(reWrapDetails);return match?match[1].split(reSplitDetails):[]}(source),bitmask)))}function shortOut(func){var count=0,lastCalled=0;return function(){var stamp=nativeNow(),remaining=16-(stamp-lastCalled);if(lastCalled=stamp,remaining>0){if(++count>=800)return arguments[0]}else count=0;return func.apply(undefined,arguments)}}function shuffleSelf(array,size){var index=-1,length=array.length,lastIndex=length-1;for(size=undefined===size?length:size;++index<size;){var rand=baseRandom(index,lastIndex),value=array[rand];array[rand]=array[index],array[index]=value}return array.length=size,array}var stringToPath=function(func){var result=memoize(func,(function(key){return 500===cache.size&&cache.clear(),key})),cache=result.cache;return result}((function(string){var result=[];return 46===string.charCodeAt(0)&&result.push(""),string.replace(rePropName,(function(match,number,quote,subString){result.push(quote?subString.replace(reEscapeChar,"$1"):number||match)})),result}));function toKey(value){if("string"==typeof value||isSymbol(value))return value;var result=value+"";return"0"==result&&1/value==-Infinity?"-0":result}function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}function wrapperClone(wrapper){if(wrapper instanceof LazyWrapper)return wrapper.clone();var result=new LodashWrapper(wrapper.__wrapped__,wrapper.__chain__);return result.__actions__=copyArray(wrapper.__actions__),result.__index__=wrapper.__index__,result.__values__=wrapper.__values__,result}var difference=baseRest((function(array,values){return isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,!0)):[]})),differenceBy=baseRest((function(array,values){var iteratee=last(values);return isArrayLikeObject(iteratee)&&(iteratee=undefined),isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,!0),getIteratee(iteratee,2)):[]})),differenceWith=baseRest((function(array,values){var comparator=last(values);return isArrayLikeObject(comparator)&&(comparator=undefined),isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,!0),undefined,comparator):[]}));function findIndex(array,predicate,fromIndex){var length=null==array?0:array.length;if(!length)return-1;var index=null==fromIndex?0:toInteger(fromIndex);return index<0&&(index=nativeMax(length+index,0)),baseFindIndex(array,getIteratee(predicate,3),index)}function findLastIndex(array,predicate,fromIndex){var length=null==array?0:array.length;if(!length)return-1;var index=length-1;return undefined!==fromIndex&&(index=toInteger(fromIndex),index=fromIndex<0?nativeMax(length+index,0):nativeMin(index,length-1)),baseFindIndex(array,getIteratee(predicate,3),index,!0)}function flatten(array){return(null==array?0:array.length)?baseFlatten(array,1):[]}function head(array){return array&&array.length?array[0]:undefined}var intersection=baseRest((function(arrays){var mapped=arrayMap(arrays,castArrayLikeObject);return mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped):[]})),intersectionBy=baseRest((function(arrays){var iteratee=last(arrays),mapped=arrayMap(arrays,castArrayLikeObject);return iteratee===last(mapped)?iteratee=undefined:mapped.pop(),mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped,getIteratee(iteratee,2)):[]})),intersectionWith=baseRest((function(arrays){var comparator=last(arrays),mapped=arrayMap(arrays,castArrayLikeObject);return(comparator="function"==typeof comparator?comparator:undefined)&&mapped.pop(),mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped,undefined,comparator):[]}));function last(array){var length=null==array?0:array.length;return length?array[length-1]:undefined}var pull=baseRest(pullAll);function pullAll(array,values){return array&&array.length&&values&&values.length?basePullAll(array,values):array}var pullAt=flatRest((function(array,indexes){var length=null==array?0:array.length,result=baseAt(array,indexes);return basePullAt(array,arrayMap(indexes,(function(index){return isIndex(index,length)?+index:index})).sort(compareAscending)),result}));function reverse(array){return null==array?array:nativeReverse.call(array)}var union=baseRest((function(arrays){return baseUniq(baseFlatten(arrays,1,isArrayLikeObject,!0))})),unionBy=baseRest((function(arrays){var iteratee=last(arrays);return isArrayLikeObject(iteratee)&&(iteratee=undefined),baseUniq(baseFlatten(arrays,1,isArrayLikeObject,!0),getIteratee(iteratee,2))})),unionWith=baseRest((function(arrays){var comparator=last(arrays);return comparator="function"==typeof comparator?comparator:undefined,baseUniq(baseFlatten(arrays,1,isArrayLikeObject,!0),undefined,comparator)}));function unzip(array){if(!array||!array.length)return[];var length=0;return array=arrayFilter(array,(function(group){if(isArrayLikeObject(group))return length=nativeMax(group.length,length),!0})),baseTimes(length,(function(index){return arrayMap(array,baseProperty(index))}))}function unzipWith(array,iteratee){if(!array||!array.length)return[];var result=unzip(array);return null==iteratee?result:arrayMap(result,(function(group){return apply(iteratee,undefined,group)}))}var without=baseRest((function(array,values){return isArrayLikeObject(array)?baseDifference(array,values):[]})),xor=baseRest((function(arrays){return baseXor(arrayFilter(arrays,isArrayLikeObject))})),xorBy=baseRest((function(arrays){var iteratee=last(arrays);return isArrayLikeObject(iteratee)&&(iteratee=undefined),baseXor(arrayFilter(arrays,isArrayLikeObject),getIteratee(iteratee,2))})),xorWith=baseRest((function(arrays){var comparator=last(arrays);return comparator="function"==typeof comparator?comparator:undefined,baseXor(arrayFilter(arrays,isArrayLikeObject),undefined,comparator)})),zip=baseRest(unzip);var zipWith=baseRest((function(arrays){var length=arrays.length,iteratee=length>1?arrays[length-1]:undefined;return iteratee="function"==typeof iteratee?(arrays.pop(),iteratee):undefined,unzipWith(arrays,iteratee)}));function chain(value){var result=lodash(value);return result.__chain__=!0,result}function thru(value,interceptor){return interceptor(value)}var wrapperAt=flatRest((function(paths){var length=paths.length,start=length?paths[0]:0,value=this.__wrapped__,interceptor=function(object){return baseAt(object,paths)};return!(length>1||this.__actions__.length)&&value instanceof LazyWrapper&&isIndex(start)?((value=value.slice(start,+start+(length?1:0))).__actions__.push({func:thru,args:[interceptor],thisArg:undefined}),new LodashWrapper(value,this.__chain__).thru((function(array){return length&&!array.length&&array.push(undefined),array}))):this.thru(interceptor)}));var countBy=createAggregator((function(result,value,key){hasOwnProperty.call(result,key)?++result[key]:baseAssignValue(result,key,1)}));var find=createFind(findIndex),findLast=createFind(findLastIndex);function forEach(collection,iteratee){return(isArray(collection)?arrayEach:baseEach)(collection,getIteratee(iteratee,3))}function forEachRight(collection,iteratee){return(isArray(collection)?arrayEachRight:baseEachRight)(collection,getIteratee(iteratee,3))}var groupBy=createAggregator((function(result,value,key){hasOwnProperty.call(result,key)?result[key].push(value):baseAssignValue(result,key,[value])}));var invokeMap=baseRest((function(collection,path,args){var index=-1,isFunc="function"==typeof path,result=isArrayLike(collection)?Array(collection.length):[];return baseEach(collection,(function(value){result[++index]=isFunc?apply(path,value,args):baseInvoke(value,path,args)})),result})),keyBy=createAggregator((function(result,value,key){baseAssignValue(result,key,value)}));function map(collection,iteratee){return(isArray(collection)?arrayMap:baseMap)(collection,getIteratee(iteratee,3))}var partition=createAggregator((function(result,value,key){result[key?0:1].push(value)}),(function(){return[[],[]]}));var sortBy=baseRest((function(collection,iteratees){if(null==collection)return[];var length=iteratees.length;return length>1&&isIterateeCall(collection,iteratees[0],iteratees[1])?iteratees=[]:length>2&&isIterateeCall(iteratees[0],iteratees[1],iteratees[2])&&(iteratees=[iteratees[0]]),baseOrderBy(collection,baseFlatten(iteratees,1),[])})),now=ctxNow||function(){return root.Date.now()};function ary(func,n,guard){return n=guard?undefined:n,createWrap(func,128,undefined,undefined,undefined,undefined,n=func&&null==n?func.length:n)}function before(n,func){var result;if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return n=toInteger(n),function(){return--n>0&&(result=func.apply(this,arguments)),n<=1&&(func=undefined),result}}var bind=baseRest((function(func,thisArg,partials){var bitmask=1;if(partials.length){var holders=replaceHolders(partials,getHolder(bind));bitmask|=32}return createWrap(func,bitmask,thisArg,partials,holders)})),bindKey=baseRest((function(object,key,partials){var bitmask=3;if(partials.length){var holders=replaceHolders(partials,getHolder(bindKey));bitmask|=32}return createWrap(key,bitmask,object,partials,holders)}));function debounce(func,wait,options){var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=!1,maxing=!1,trailing=!0;if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);function invokeFunc(time){var args=lastArgs,thisArg=lastThis;return lastArgs=lastThis=undefined,lastInvokeTime=time,result=func.apply(thisArg,args)}function leadingEdge(time){return lastInvokeTime=time,timerId=setTimeout(timerExpired,wait),leading?invokeFunc(time):result}function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime;return undefined===lastCallTime||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&time-lastInvokeTime>=maxWait}function timerExpired(){var time=now();if(shouldInvoke(time))return trailingEdge(time);timerId=setTimeout(timerExpired,function(time){var timeWaiting=wait-(time-lastCallTime);return maxing?nativeMin(timeWaiting,maxWait-(time-lastInvokeTime)):timeWaiting}(time))}function trailingEdge(time){return timerId=undefined,trailing&&lastArgs?invokeFunc(time):(lastArgs=lastThis=undefined,result)}function debounced(){var time=now(),isInvoking=shouldInvoke(time);if(lastArgs=arguments,lastThis=this,lastCallTime=time,isInvoking){if(undefined===timerId)return leadingEdge(lastCallTime);if(maxing)return clearTimeout(timerId),timerId=setTimeout(timerExpired,wait),invokeFunc(lastCallTime)}return undefined===timerId&&(timerId=setTimeout(timerExpired,wait)),result}return wait=toNumber(wait)||0,isObject(options)&&(leading=!!options.leading,maxWait=(maxing="maxWait"in options)?nativeMax(toNumber(options.maxWait)||0,wait):maxWait,trailing="trailing"in options?!!options.trailing:trailing),debounced.cancel=function(){undefined!==timerId&&clearTimeout(timerId),lastInvokeTime=0,lastArgs=lastCallTime=lastThis=timerId=undefined},debounced.flush=function(){return undefined===timerId?result:trailingEdge(now())},debounced}var defer=baseRest((function(func,args){return baseDelay(func,1,args)})),delay=baseRest((function(func,wait,args){return baseDelay(func,toNumber(wait)||0,args)}));function memoize(func,resolver){if("function"!=typeof func||null!=resolver&&"function"!=typeof resolver)throw new TypeError(FUNC_ERROR_TEXT);var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key))return cache.get(key);var result=func.apply(this,args);return memoized.cache=cache.set(key,result)||cache,result};return memoized.cache=new(memoize.Cache||MapCache),memoized}function negate(predicate){if("function"!=typeof predicate)throw new TypeError(FUNC_ERROR_TEXT);return function(){var args=arguments;switch(args.length){case 0:return!predicate.call(this);case 1:return!predicate.call(this,args[0]);case 2:return!predicate.call(this,args[0],args[1]);case 3:return!predicate.call(this,args[0],args[1],args[2])}return!predicate.apply(this,args)}}memoize.Cache=MapCache;var overArgs=castRest((function(func,transforms){var funcsLength=(transforms=1==transforms.length&&isArray(transforms[0])?arrayMap(transforms[0],baseUnary(getIteratee())):arrayMap(baseFlatten(transforms,1),baseUnary(getIteratee()))).length;return baseRest((function(args){for(var index=-1,length=nativeMin(args.length,funcsLength);++index<length;)args[index]=transforms[index].call(this,args[index]);return apply(func,this,args)}))})),partial=baseRest((function(func,partials){return createWrap(func,32,undefined,partials,replaceHolders(partials,getHolder(partial)))})),partialRight=baseRest((function(func,partials){return createWrap(func,64,undefined,partials,replaceHolders(partials,getHolder(partialRight)))})),rearg=flatRest((function(func,indexes){return createWrap(func,256,undefined,undefined,undefined,indexes)}));function eq(value,other){return value===other||value!=value&&other!=other}var gt=createRelationalOperation(baseGt),gte=createRelationalOperation((function(value,other){return value>=other})),isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")},isArray=Array.isArray,isArrayBuffer=nodeIsArrayBuffer?baseUnary(nodeIsArrayBuffer):function(value){return isObjectLike(value)&&baseGetTag(value)==arrayBufferTag};function isArrayLike(value){return null!=value&&isLength(value.length)&&!isFunction(value)}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}var isBuffer=nativeIsBuffer||stubFalse,isDate=nodeIsDate?baseUnary(nodeIsDate):function(value){return isObjectLike(value)&&baseGetTag(value)==dateTag};function isError(value){if(!isObjectLike(value))return!1;var tag=baseGetTag(value);return tag==errorTag||"[object DOMException]"==tag||"string"==typeof value.message&&"string"==typeof value.name&&!isPlainObject(value)}function isFunction(value){if(!isObject(value))return!1;var tag=baseGetTag(value);return tag==funcTag||tag==genTag||"[object AsyncFunction]"==tag||"[object Proxy]"==tag}function isInteger(value){return"number"==typeof value&&value==toInteger(value)}function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=9007199254740991}function isObject(value){var type=typeof value;return null!=value&&("object"==type||"function"==type)}function isObjectLike(value){return null!=value&&"object"==typeof value}var isMap=nodeIsMap?baseUnary(nodeIsMap):function(value){return isObjectLike(value)&&getTag(value)==mapTag};function isNumber(value){return"number"==typeof value||isObjectLike(value)&&baseGetTag(value)==numberTag}function isPlainObject(value){if(!isObjectLike(value)||baseGetTag(value)!=objectTag)return!1;var proto=getPrototype(value);if(null===proto)return!0;var Ctor=hasOwnProperty.call(proto,"constructor")&&proto.constructor;return"function"==typeof Ctor&&Ctor instanceof Ctor&&funcToString.call(Ctor)==objectCtorString}var isRegExp=nodeIsRegExp?baseUnary(nodeIsRegExp):function(value){return isObjectLike(value)&&baseGetTag(value)==regexpTag};var isSet=nodeIsSet?baseUnary(nodeIsSet):function(value){return isObjectLike(value)&&getTag(value)==setTag};function isString(value){return"string"==typeof value||!isArray(value)&&isObjectLike(value)&&baseGetTag(value)==stringTag}function isSymbol(value){return"symbol"==typeof value||isObjectLike(value)&&baseGetTag(value)==symbolTag}var isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):function(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]};var lt=createRelationalOperation(baseLt),lte=createRelationalOperation((function(value,other){return value<=other}));function toArray(value){if(!value)return[];if(isArrayLike(value))return isString(value)?stringToArray(value):copyArray(value);if(symIterator&&value[symIterator])return function(iterator){for(var data,result=[];!(data=iterator.next()).done;)result.push(data.value);return result}(value[symIterator]());var tag=getTag(value);return(tag==mapTag?mapToArray:tag==setTag?setToArray:values)(value)}function toFinite(value){return value?Infinity===(value=toNumber(value))||-Infinity===value?17976931348623157e292*(value<0?-1:1):value==value?value:0:0===value?value:0}function toInteger(value){var result=toFinite(value),remainder=result%1;return result==result?remainder?result-remainder:result:0}function toLength(value){return value?baseClamp(toInteger(value),0,4294967295):0}function toNumber(value){if("number"==typeof value)return value;if(isSymbol(value))return NaN;if(isObject(value)){var other="function"==typeof value.valueOf?value.valueOf():value;value=isObject(other)?other+"":other}if("string"!=typeof value)return 0===value?value:+value;value=value.replace(reTrim,"");var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NaN:+value}function toPlainObject(value){return copyObject(value,keysIn(value))}function toString(value){return null==value?"":baseToString(value)}var assign=createAssigner((function(object,source){if(isPrototype(source)||isArrayLike(source))copyObject(source,keys(source),object);else for(var key in source)hasOwnProperty.call(source,key)&&assignValue(object,key,source[key])})),assignIn=createAssigner((function(object,source){copyObject(source,keysIn(source),object)})),assignInWith=createAssigner((function(object,source,srcIndex,customizer){copyObject(source,keysIn(source),object,customizer)})),assignWith=createAssigner((function(object,source,srcIndex,customizer){copyObject(source,keys(source),object,customizer)})),at=flatRest(baseAt);var defaults=baseRest((function(object,sources){object=Object(object);var index=-1,length=sources.length,guard=length>2?sources[2]:undefined;for(guard&&isIterateeCall(sources[0],sources[1],guard)&&(length=1);++index<length;)for(var source=sources[index],props=keysIn(source),propsIndex=-1,propsLength=props.length;++propsIndex<propsLength;){var key=props[propsIndex],value=object[key];(undefined===value||eq(value,objectProto[key])&&!hasOwnProperty.call(object,key))&&(object[key]=source[key])}return object})),defaultsDeep=baseRest((function(args){return args.push(undefined,customDefaultsMerge),apply(mergeWith,undefined,args)}));function get(object,path,defaultValue){var result=null==object?undefined:baseGet(object,path);return undefined===result?defaultValue:result}function hasIn(object,path){return null!=object&&hasPath(object,path,baseHasIn)}var invert=createInverter((function(result,value,key){null!=value&&"function"!=typeof value.toString&&(value=nativeObjectToString.call(value)),result[value]=key}),constant(identity)),invertBy=createInverter((function(result,value,key){null!=value&&"function"!=typeof value.toString&&(value=nativeObjectToString.call(value)),hasOwnProperty.call(result,value)?result[value].push(key):result[value]=[key]}),getIteratee),invoke=baseRest(baseInvoke);function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}function keysIn(object){return isArrayLike(object)?arrayLikeKeys(object,!0):baseKeysIn(object)}var merge=createAssigner((function(object,source,srcIndex){baseMerge(object,source,srcIndex)})),mergeWith=createAssigner((function(object,source,srcIndex,customizer){baseMerge(object,source,srcIndex,customizer)})),omit=flatRest((function(object,paths){var result={};if(null==object)return result;var isDeep=!1;paths=arrayMap(paths,(function(path){return path=castPath(path,object),isDeep||(isDeep=path.length>1),path})),copyObject(object,getAllKeysIn(object),result),isDeep&&(result=baseClone(result,7,customOmitClone));for(var length=paths.length;length--;)baseUnset(result,paths[length]);return result}));var pick=flatRest((function(object,paths){return null==object?{}:function(object,paths){return basePickBy(object,paths,(function(value,path){return hasIn(object,path)}))}(object,paths)}));function pickBy(object,predicate){if(null==object)return{};var props=arrayMap(getAllKeysIn(object),(function(prop){return[prop]}));return predicate=getIteratee(predicate),basePickBy(object,props,(function(value,path){return predicate(value,path[0])}))}var toPairs=createToPairs(keys),toPairsIn=createToPairs(keysIn);function values(object){return null==object?[]:baseValues(object,keys(object))}var camelCase=createCompounder((function(result,word,index){return word=word.toLowerCase(),result+(index?capitalize(word):word)}));function capitalize(string){return upperFirst(toString(string).toLowerCase())}function deburr(string){return(string=toString(string))&&string.replace(reLatin,deburrLetter).replace(reComboMark,"")}var kebabCase=createCompounder((function(result,word,index){return result+(index?"-":"")+word.toLowerCase()})),lowerCase=createCompounder((function(result,word,index){return result+(index?" ":"")+word.toLowerCase()})),lowerFirst=createCaseFirst("toLowerCase");var snakeCase=createCompounder((function(result,word,index){return result+(index?"_":"")+word.toLowerCase()}));var startCase=createCompounder((function(result,word,index){return result+(index?" ":"")+upperFirst(word)}));var upperCase=createCompounder((function(result,word,index){return result+(index?" ":"")+word.toUpperCase()})),upperFirst=createCaseFirst("toUpperCase");function words(string,pattern,guard){return string=toString(string),undefined===(pattern=guard?undefined:pattern)?function(string){return reHasUnicodeWord.test(string)}(string)?function(string){return string.match(reUnicodeWord)||[]}(string):function(string){return string.match(reAsciiWord)||[]}(string):string.match(pattern)||[]}var attempt=baseRest((function(func,args){try{return apply(func,undefined,args)}catch(e){return isError(e)?e:new Error(e)}})),bindAll=flatRest((function(object,methodNames){return arrayEach(methodNames,(function(key){key=toKey(key),baseAssignValue(object,key,bind(object[key],object))})),object}));function constant(value){return function(){return value}}var flow=createFlow(),flowRight=createFlow(!0);function identity(value){return value}function iteratee(func){return baseIteratee("function"==typeof func?func:baseClone(func,1))}var method=baseRest((function(path,args){return function(object){return baseInvoke(object,path,args)}})),methodOf=baseRest((function(object,args){return function(path){return baseInvoke(object,path,args)}}));function mixin(object,source,options){var props=keys(source),methodNames=baseFunctions(source,props);null!=options||isObject(source)&&(methodNames.length||!props.length)||(options=source,source=object,object=this,methodNames=baseFunctions(source,keys(source)));var chain=!(isObject(options)&&"chain"in options&&!options.chain),isFunc=isFunction(object);return arrayEach(methodNames,(function(methodName){var func=source[methodName];object[methodName]=func,isFunc&&(object.prototype[methodName]=function(){var chainAll=this.__chain__;if(chain||chainAll){var result=object(this.__wrapped__),actions=result.__actions__=copyArray(this.__actions__);return actions.push({func:func,args:arguments,thisArg:object}),result.__chain__=chainAll,result}return func.apply(object,arrayPush([this.value()],arguments))})})),object}function noop(){}var over=createOver(arrayMap),overEvery=createOver(arrayEvery),overSome=createOver(arraySome);function property(path){return isKey(path)?baseProperty(toKey(path)):function(path){return function(object){return baseGet(object,path)}}(path)}var range=createRange(),rangeRight=createRange(!0);function stubArray(){return[]}function stubFalse(){return!1}var add=createMathOperation((function(augend,addend){return augend+addend}),0),ceil=createRound("ceil"),divide=createMathOperation((function(dividend,divisor){return dividend/divisor}),1),floor=createRound("floor");var source,multiply=createMathOperation((function(multiplier,multiplicand){return multiplier*multiplicand}),1),round=createRound("round"),subtract=createMathOperation((function(minuend,subtrahend){return minuend-subtrahend}),0);return lodash.after=function(n,func){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return n=toInteger(n),function(){if(--n<1)return func.apply(this,arguments)}},lodash.ary=ary,lodash.assign=assign,lodash.assignIn=assignIn,lodash.assignInWith=assignInWith,lodash.assignWith=assignWith,lodash.at=at,lodash.before=before,lodash.bind=bind,lodash.bindAll=bindAll,lodash.bindKey=bindKey,lodash.castArray=function(){if(!arguments.length)return[];var value=arguments[0];return isArray(value)?value:[value]},lodash.chain=chain,lodash.chunk=function(array,size,guard){size=(guard?isIterateeCall(array,size,guard):undefined===size)?1:nativeMax(toInteger(size),0);var length=null==array?0:array.length;if(!length||size<1)return[];for(var index=0,resIndex=0,result=Array(nativeCeil(length/size));index<length;)result[resIndex++]=baseSlice(array,index,index+=size);return result},lodash.compact=function(array){for(var index=-1,length=null==array?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];value&&(result[resIndex++]=value)}return result},lodash.concat=function(){var length=arguments.length;if(!length)return[];for(var args=Array(length-1),array=arguments[0],index=length;index--;)args[index-1]=arguments[index];return arrayPush(isArray(array)?copyArray(array):[array],baseFlatten(args,1))},lodash.cond=function(pairs){var length=null==pairs?0:pairs.length,toIteratee=getIteratee();return pairs=length?arrayMap(pairs,(function(pair){if("function"!=typeof pair[1])throw new TypeError(FUNC_ERROR_TEXT);return[toIteratee(pair[0]),pair[1]]})):[],baseRest((function(args){for(var index=-1;++index<length;){var pair=pairs[index];if(apply(pair[0],this,args))return apply(pair[1],this,args)}}))},lodash.conforms=function(source){return function(source){var props=keys(source);return function(object){return baseConformsTo(object,source,props)}}(baseClone(source,1))},lodash.constant=constant,lodash.countBy=countBy,lodash.create=function(prototype,properties){var result=baseCreate(prototype);return null==properties?result:baseAssign(result,properties)},lodash.curry=function curry(func,arity,guard){var result=createWrap(func,8,undefined,undefined,undefined,undefined,undefined,arity=guard?undefined:arity);return result.placeholder=curry.placeholder,result},lodash.curryRight=function curryRight(func,arity,guard){var result=createWrap(func,16,undefined,undefined,undefined,undefined,undefined,arity=guard?undefined:arity);return result.placeholder=curryRight.placeholder,result},lodash.debounce=debounce,lodash.defaults=defaults,lodash.defaultsDeep=defaultsDeep,lodash.defer=defer,lodash.delay=delay,lodash.difference=difference,lodash.differenceBy=differenceBy,lodash.differenceWith=differenceWith,lodash.drop=function(array,n,guard){var length=null==array?0:array.length;return length?baseSlice(array,(n=guard||undefined===n?1:toInteger(n))<0?0:n,length):[]},lodash.dropRight=function(array,n,guard){var length=null==array?0:array.length;return length?baseSlice(array,0,(n=length-(n=guard||undefined===n?1:toInteger(n)))<0?0:n):[]},lodash.dropRightWhile=function(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),!0,!0):[]},lodash.dropWhile=function(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),!0):[]},lodash.fill=function(array,value,start,end){var length=null==array?0:array.length;return length?(start&&"number"!=typeof start&&isIterateeCall(array,value,start)&&(start=0,end=length),function(array,value,start,end){var length=array.length;for((start=toInteger(start))<0&&(start=-start>length?0:length+start),(end=void 0===end||end>length?length:toInteger(end))<0&&(end+=length),end=start>end?0:toLength(end);start<end;)array[start++]=value;return array}(array,value,start,end)):[]},lodash.filter=function(collection,predicate){return(isArray(collection)?arrayFilter:baseFilter)(collection,getIteratee(predicate,3))},lodash.flatMap=function(collection,iteratee){return baseFlatten(map(collection,iteratee),1)},lodash.flatMapDeep=function(collection,iteratee){return baseFlatten(map(collection,iteratee),Infinity)},lodash.flatMapDepth=function(collection,iteratee,depth){return depth=undefined===depth?1:toInteger(depth),baseFlatten(map(collection,iteratee),depth)},lodash.flatten=flatten,lodash.flattenDeep=function(array){return(null==array?0:array.length)?baseFlatten(array,Infinity):[]},lodash.flattenDepth=function(array,depth){return(null==array?0:array.length)?baseFlatten(array,depth=undefined===depth?1:toInteger(depth)):[]},lodash.flip=function(func){return createWrap(func,512)},lodash.flow=flow,lodash.flowRight=flowRight,lodash.fromPairs=function(pairs){for(var index=-1,length=null==pairs?0:pairs.length,result={};++index<length;){var pair=pairs[index];result[pair[0]]=pair[1]}return result},lodash.functions=function(object){return null==object?[]:baseFunctions(object,keys(object))},lodash.functionsIn=function(object){return null==object?[]:baseFunctions(object,keysIn(object))},lodash.groupBy=groupBy,lodash.initial=function(array){return(null==array?0:array.length)?baseSlice(array,0,-1):[]},lodash.intersection=intersection,lodash.intersectionBy=intersectionBy,lodash.intersectionWith=intersectionWith,lodash.invert=invert,lodash.invertBy=invertBy,lodash.invokeMap=invokeMap,lodash.iteratee=iteratee,lodash.keyBy=keyBy,lodash.keys=keys,lodash.keysIn=keysIn,lodash.map=map,lodash.mapKeys=function(object,iteratee){var result={};return iteratee=getIteratee(iteratee,3),baseForOwn(object,(function(value,key,object){baseAssignValue(result,iteratee(value,key,object),value)})),result},lodash.mapValues=function(object,iteratee){var result={};return iteratee=getIteratee(iteratee,3),baseForOwn(object,(function(value,key,object){baseAssignValue(result,key,iteratee(value,key,object))})),result},lodash.matches=function(source){return baseMatches(baseClone(source,1))},lodash.matchesProperty=function(path,srcValue){return baseMatchesProperty(path,baseClone(srcValue,1))},lodash.memoize=memoize,lodash.merge=merge,lodash.mergeWith=mergeWith,lodash.method=method,lodash.methodOf=methodOf,lodash.mixin=mixin,lodash.negate=negate,lodash.nthArg=function(n){return n=toInteger(n),baseRest((function(args){return baseNth(args,n)}))},lodash.omit=omit,lodash.omitBy=function(object,predicate){return pickBy(object,negate(getIteratee(predicate)))},lodash.once=function(func){return before(2,func)},lodash.orderBy=function(collection,iteratees,orders,guard){return null==collection?[]:(isArray(iteratees)||(iteratees=null==iteratees?[]:[iteratees]),isArray(orders=guard?undefined:orders)||(orders=null==orders?[]:[orders]),baseOrderBy(collection,iteratees,orders))},lodash.over=over,lodash.overArgs=overArgs,lodash.overEvery=overEvery,lodash.overSome=overSome,lodash.partial=partial,lodash.partialRight=partialRight,lodash.partition=partition,lodash.pick=pick,lodash.pickBy=pickBy,lodash.property=property,lodash.propertyOf=function(object){return function(path){return null==object?undefined:baseGet(object,path)}},lodash.pull=pull,lodash.pullAll=pullAll,lodash.pullAllBy=function(array,values,iteratee){return array&&array.length&&values&&values.length?basePullAll(array,values,getIteratee(iteratee,2)):array},lodash.pullAllWith=function(array,values,comparator){return array&&array.length&&values&&values.length?basePullAll(array,values,undefined,comparator):array},lodash.pullAt=pullAt,lodash.range=range,lodash.rangeRight=rangeRight,lodash.rearg=rearg,lodash.reject=function(collection,predicate){return(isArray(collection)?arrayFilter:baseFilter)(collection,negate(getIteratee(predicate,3)))},lodash.remove=function(array,predicate){var result=[];if(!array||!array.length)return result;var index=-1,indexes=[],length=array.length;for(predicate=getIteratee(predicate,3);++index<length;){var value=array[index];predicate(value,index,array)&&(result.push(value),indexes.push(index))}return basePullAt(array,indexes),result},lodash.rest=function(func,start){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return baseRest(func,start=undefined===start?start:toInteger(start))},lodash.reverse=reverse,lodash.sampleSize=function(collection,n,guard){return n=(guard?isIterateeCall(collection,n,guard):undefined===n)?1:toInteger(n),(isArray(collection)?arraySampleSize:baseSampleSize)(collection,n)},lodash.set=function(object,path,value){return null==object?object:baseSet(object,path,value)},lodash.setWith=function(object,path,value,customizer){return customizer="function"==typeof customizer?customizer:undefined,null==object?object:baseSet(object,path,value,customizer)},lodash.shuffle=function(collection){return(isArray(collection)?arrayShuffle:baseShuffle)(collection)},lodash.slice=function(array,start,end){var length=null==array?0:array.length;return length?(end&&"number"!=typeof end&&isIterateeCall(array,start,end)?(start=0,end=length):(start=null==start?0:toInteger(start),end=undefined===end?length:toInteger(end)),baseSlice(array,start,end)):[]},lodash.sortBy=sortBy,lodash.sortedUniq=function(array){return array&&array.length?baseSortedUniq(array):[]},lodash.sortedUniqBy=function(array,iteratee){return array&&array.length?baseSortedUniq(array,getIteratee(iteratee,2)):[]},lodash.split=function(string,separator,limit){return limit&&"number"!=typeof limit&&isIterateeCall(string,separator,limit)&&(separator=limit=undefined),(limit=undefined===limit?4294967295:limit>>>0)?(string=toString(string))&&("string"==typeof separator||null!=separator&&!isRegExp(separator))&&!(separator=baseToString(separator))&&hasUnicode(string)?castSlice(stringToArray(string),0,limit):string.split(separator,limit):[]},lodash.spread=function(func,start){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return start=null==start?0:nativeMax(toInteger(start),0),baseRest((function(args){var array=args[start],otherArgs=castSlice(args,0,start);return array&&arrayPush(otherArgs,array),apply(func,this,otherArgs)}))},lodash.tail=function(array){var length=null==array?0:array.length;return length?baseSlice(array,1,length):[]},lodash.take=function(array,n,guard){return array&&array.length?baseSlice(array,0,(n=guard||undefined===n?1:toInteger(n))<0?0:n):[]},lodash.takeRight=function(array,n,guard){var length=null==array?0:array.length;return length?baseSlice(array,(n=length-(n=guard||undefined===n?1:toInteger(n)))<0?0:n,length):[]},lodash.takeRightWhile=function(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),!1,!0):[]},lodash.takeWhile=function(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3)):[]},lodash.tap=function(value,interceptor){return interceptor(value),value},lodash.throttle=function(func,wait,options){var leading=!0,trailing=!0;if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return isObject(options)&&(leading="leading"in options?!!options.leading:leading,trailing="trailing"in options?!!options.trailing:trailing),debounce(func,wait,{leading:leading,maxWait:wait,trailing:trailing})},lodash.thru=thru,lodash.toArray=toArray,lodash.toPairs=toPairs,lodash.toPairsIn=toPairsIn,lodash.toPath=function(value){return isArray(value)?arrayMap(value,toKey):isSymbol(value)?[value]:copyArray(stringToPath(toString(value)))},lodash.toPlainObject=toPlainObject,lodash.transform=function(object,iteratee,accumulator){var isArr=isArray(object),isArrLike=isArr||isBuffer(object)||isTypedArray(object);if(iteratee=getIteratee(iteratee,4),null==accumulator){var Ctor=object&&object.constructor;accumulator=isArrLike?isArr?new Ctor:[]:isObject(object)&&isFunction(Ctor)?baseCreate(getPrototype(object)):{}}return(isArrLike?arrayEach:baseForOwn)(object,(function(value,index,object){return iteratee(accumulator,value,index,object)})),accumulator},lodash.unary=function(func){return ary(func,1)},lodash.union=union,lodash.unionBy=unionBy,lodash.unionWith=unionWith,lodash.uniq=function(array){return array&&array.length?baseUniq(array):[]},lodash.uniqBy=function(array,iteratee){return array&&array.length?baseUniq(array,getIteratee(iteratee,2)):[]},lodash.uniqWith=function(array,comparator){return comparator="function"==typeof comparator?comparator:undefined,array&&array.length?baseUniq(array,undefined,comparator):[]},lodash.unset=function(object,path){return null==object||baseUnset(object,path)},lodash.unzip=unzip,lodash.unzipWith=unzipWith,lodash.update=function(object,path,updater){return null==object?object:baseUpdate(object,path,castFunction(updater))},lodash.updateWith=function(object,path,updater,customizer){return customizer="function"==typeof customizer?customizer:undefined,null==object?object:baseUpdate(object,path,castFunction(updater),customizer)},lodash.values=values,lodash.valuesIn=function(object){return null==object?[]:baseValues(object,keysIn(object))},lodash.without=without,lodash.words=words,lodash.wrap=function(value,wrapper){return partial(castFunction(wrapper),value)},lodash.xor=xor,lodash.xorBy=xorBy,lodash.xorWith=xorWith,lodash.zip=zip,lodash.zipObject=function(props,values){return baseZipObject(props||[],values||[],assignValue)},lodash.zipObjectDeep=function(props,values){return baseZipObject(props||[],values||[],baseSet)},lodash.zipWith=zipWith,lodash.entries=toPairs,lodash.entriesIn=toPairsIn,lodash.extend=assignIn,lodash.extendWith=assignInWith,mixin(lodash,lodash),lodash.add=add,lodash.attempt=attempt,lodash.camelCase=camelCase,lodash.capitalize=capitalize,lodash.ceil=ceil,lodash.clamp=function(number,lower,upper){return undefined===upper&&(upper=lower,lower=undefined),undefined!==upper&&(upper=(upper=toNumber(upper))==upper?upper:0),undefined!==lower&&(lower=(lower=toNumber(lower))==lower?lower:0),baseClamp(toNumber(number),lower,upper)},lodash.clone=function(value){return baseClone(value,4)},lodash.cloneDeep=function(value){return baseClone(value,5)},lodash.cloneDeepWith=function(value,customizer){return baseClone(value,5,customizer="function"==typeof customizer?customizer:undefined)},lodash.cloneWith=function(value,customizer){return baseClone(value,4,customizer="function"==typeof customizer?customizer:undefined)},lodash.conformsTo=function(object,source){return null==source||baseConformsTo(object,source,keys(source))},lodash.deburr=deburr,lodash.defaultTo=function(value,defaultValue){return null==value||value!=value?defaultValue:value},lodash.divide=divide,lodash.endsWith=function(string,target,position){string=toString(string),target=baseToString(target);var length=string.length,end=position=undefined===position?length:baseClamp(toInteger(position),0,length);return(position-=target.length)>=0&&string.slice(position,end)==target},lodash.eq=eq,lodash.escape=function(string){return(string=toString(string))&&reHasUnescapedHtml.test(string)?string.replace(reUnescapedHtml,escapeHtmlChar):string},lodash.escapeRegExp=function(string){return(string=toString(string))&&reHasRegExpChar.test(string)?string.replace(reRegExpChar,"\\$&"):string},lodash.every=function(collection,predicate,guard){var func=isArray(collection)?arrayEvery:baseEvery;return guard&&isIterateeCall(collection,predicate,guard)&&(predicate=undefined),func(collection,getIteratee(predicate,3))},lodash.find=find,lodash.findIndex=findIndex,lodash.findKey=function(object,predicate){return baseFindKey(object,getIteratee(predicate,3),baseForOwn)},lodash.findLast=findLast,lodash.findLastIndex=findLastIndex,lodash.findLastKey=function(object,predicate){return baseFindKey(object,getIteratee(predicate,3),baseForOwnRight)},lodash.floor=floor,lodash.forEach=forEach,lodash.forEachRight=forEachRight,lodash.forIn=function(object,iteratee){return null==object?object:baseFor(object,getIteratee(iteratee,3),keysIn)},lodash.forInRight=function(object,iteratee){return null==object?object:baseForRight(object,getIteratee(iteratee,3),keysIn)},lodash.forOwn=function(object,iteratee){return object&&baseForOwn(object,getIteratee(iteratee,3))},lodash.forOwnRight=function(object,iteratee){return object&&baseForOwnRight(object,getIteratee(iteratee,3))},lodash.get=get,lodash.gt=gt,lodash.gte=gte,lodash.has=function(object,path){return null!=object&&hasPath(object,path,baseHas)},lodash.hasIn=hasIn,lodash.head=head,lodash.identity=identity,lodash.includes=function(collection,value,fromIndex,guard){collection=isArrayLike(collection)?collection:values(collection),fromIndex=fromIndex&&!guard?toInteger(fromIndex):0;var length=collection.length;return fromIndex<0&&(fromIndex=nativeMax(length+fromIndex,0)),isString(collection)?fromIndex<=length&&collection.indexOf(value,fromIndex)>-1:!!length&&baseIndexOf(collection,value,fromIndex)>-1},lodash.indexOf=function(array,value,fromIndex){var length=null==array?0:array.length;if(!length)return-1;var index=null==fromIndex?0:toInteger(fromIndex);return index<0&&(index=nativeMax(length+index,0)),baseIndexOf(array,value,index)},lodash.inRange=function(number,start,end){return start=toFinite(start),undefined===end?(end=start,start=0):end=toFinite(end),function(number,start,end){return number>=nativeMin(start,end)&&number<nativeMax(start,end)}(number=toNumber(number),start,end)},lodash.invoke=invoke,lodash.isArguments=isArguments,lodash.isArray=isArray,lodash.isArrayBuffer=isArrayBuffer,lodash.isArrayLike=isArrayLike,lodash.isArrayLikeObject=isArrayLikeObject,lodash.isBoolean=function(value){return!0===value||!1===value||isObjectLike(value)&&baseGetTag(value)==boolTag},lodash.isBuffer=isBuffer,lodash.isDate=isDate,lodash.isElement=function(value){return isObjectLike(value)&&1===value.nodeType&&!isPlainObject(value)},lodash.isEmpty=function(value){if(null==value)return!0;if(isArrayLike(value)&&(isArray(value)||"string"==typeof value||"function"==typeof value.splice||isBuffer(value)||isTypedArray(value)||isArguments(value)))return!value.length;var tag=getTag(value);if(tag==mapTag||tag==setTag)return!value.size;if(isPrototype(value))return!baseKeys(value).length;for(var key in value)if(hasOwnProperty.call(value,key))return!1;return!0},lodash.isEqual=function(value,other){return baseIsEqual(value,other)},lodash.isEqualWith=function(value,other,customizer){var result=(customizer="function"==typeof customizer?customizer:undefined)?customizer(value,other):undefined;return undefined===result?baseIsEqual(value,other,undefined,customizer):!!result},lodash.isError=isError,lodash.isFinite=function(value){return"number"==typeof value&&nativeIsFinite(value)},lodash.isFunction=isFunction,lodash.isInteger=isInteger,lodash.isLength=isLength,lodash.isMap=isMap,lodash.isMatch=function(object,source){return object===source||baseIsMatch(object,source,getMatchData(source))},lodash.isMatchWith=function(object,source,customizer){return customizer="function"==typeof customizer?customizer:undefined,baseIsMatch(object,source,getMatchData(source),customizer)},lodash.isNaN=function(value){return isNumber(value)&&value!=+value},lodash.isNative=function(value){if(isMaskable(value))throw new Error("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return baseIsNative(value)},lodash.isNil=function(value){return null==value},lodash.isNull=function(value){return null===value},lodash.isNumber=isNumber,lodash.isObject=isObject,lodash.isObjectLike=isObjectLike,lodash.isPlainObject=isPlainObject,lodash.isRegExp=isRegExp,lodash.isSafeInteger=function(value){return isInteger(value)&&value>=-9007199254740991&&value<=9007199254740991},lodash.isSet=isSet,lodash.isString=isString,lodash.isSymbol=isSymbol,lodash.isTypedArray=isTypedArray,lodash.isUndefined=function(value){return undefined===value},lodash.isWeakMap=function(value){return isObjectLike(value)&&getTag(value)==weakMapTag},lodash.isWeakSet=function(value){return isObjectLike(value)&&"[object WeakSet]"==baseGetTag(value)},lodash.join=function(array,separator){return null==array?"":nativeJoin.call(array,separator)},lodash.kebabCase=kebabCase,lodash.last=last,lodash.lastIndexOf=function(array,value,fromIndex){var length=null==array?0:array.length;if(!length)return-1;var index=length;return undefined!==fromIndex&&(index=(index=toInteger(fromIndex))<0?nativeMax(length+index,0):nativeMin(index,length-1)),value==value?function(array,value,fromIndex){for(var index=fromIndex+1;index--;)if(array[index]===value)return index;return index}(array,value,index):baseFindIndex(array,baseIsNaN,index,!0)},lodash.lowerCase=lowerCase,lodash.lowerFirst=lowerFirst,lodash.lt=lt,lodash.lte=lte,lodash.max=function(array){return array&&array.length?baseExtremum(array,identity,baseGt):undefined},lodash.maxBy=function(array,iteratee){return array&&array.length?baseExtremum(array,getIteratee(iteratee,2),baseGt):undefined},lodash.mean=function(array){return baseMean(array,identity)},lodash.meanBy=function(array,iteratee){return baseMean(array,getIteratee(iteratee,2))},lodash.min=function(array){return array&&array.length?baseExtremum(array,identity,baseLt):undefined},lodash.minBy=function(array,iteratee){return array&&array.length?baseExtremum(array,getIteratee(iteratee,2),baseLt):undefined},lodash.stubArray=stubArray,lodash.stubFalse=stubFalse,lodash.stubObject=function(){return{}},lodash.stubString=function(){return""},lodash.stubTrue=function(){return!0},lodash.multiply=multiply,lodash.nth=function(array,n){return array&&array.length?baseNth(array,toInteger(n)):undefined},lodash.noConflict=function(){return root._===this&&(root._=oldDash),this},lodash.noop=noop,lodash.now=now,lodash.pad=function(string,length,chars){string=toString(string);var strLength=(length=toInteger(length))?stringSize(string):0;if(!length||strLength>=length)return string;var mid=(length-strLength)/2;return createPadding(nativeFloor(mid),chars)+string+createPadding(nativeCeil(mid),chars)},lodash.padEnd=function(string,length,chars){string=toString(string);var strLength=(length=toInteger(length))?stringSize(string):0;return length&&strLength<length?string+createPadding(length-strLength,chars):string},lodash.padStart=function(string,length,chars){string=toString(string);var strLength=(length=toInteger(length))?stringSize(string):0;return length&&strLength<length?createPadding(length-strLength,chars)+string:string},lodash.parseInt=function(string,radix,guard){return guard||null==radix?radix=0:radix&&(radix=+radix),nativeParseInt(toString(string).replace(reTrimStart,""),radix||0)},lodash.random=function(lower,upper,floating){if(floating&&"boolean"!=typeof floating&&isIterateeCall(lower,upper,floating)&&(upper=floating=undefined),undefined===floating&&("boolean"==typeof upper?(floating=upper,upper=undefined):"boolean"==typeof lower&&(floating=lower,lower=undefined)),undefined===lower&&undefined===upper?(lower=0,upper=1):(lower=toFinite(lower),undefined===upper?(upper=lower,lower=0):upper=toFinite(upper)),lower>upper){var temp=lower;lower=upper,upper=temp}if(floating||lower%1||upper%1){var rand=nativeRandom();return nativeMin(lower+rand*(upper-lower+freeParseFloat("1e-"+((rand+"").length-1))),upper)}return baseRandom(lower,upper)},lodash.reduce=function(collection,iteratee,accumulator){var func=isArray(collection)?arrayReduce:baseReduce,initAccum=arguments.length<3;return func(collection,getIteratee(iteratee,4),accumulator,initAccum,baseEach)},lodash.reduceRight=function(collection,iteratee,accumulator){var func=isArray(collection)?arrayReduceRight:baseReduce,initAccum=arguments.length<3;return func(collection,getIteratee(iteratee,4),accumulator,initAccum,baseEachRight)},lodash.repeat=function(string,n,guard){return n=(guard?isIterateeCall(string,n,guard):undefined===n)?1:toInteger(n),baseRepeat(toString(string),n)},lodash.replace=function(){var args=arguments,string=toString(args[0]);return args.length<3?string:string.replace(args[1],args[2])},lodash.result=function(object,path,defaultValue){var index=-1,length=(path=castPath(path,object)).length;for(length||(length=1,object=undefined);++index<length;){var value=null==object?undefined:object[toKey(path[index])];undefined===value&&(index=length,value=defaultValue),object=isFunction(value)?value.call(object):value}return object},lodash.round=round,lodash.runInContext=runInContext,lodash.sample=function(collection){return(isArray(collection)?arraySample:baseSample)(collection)},lodash.size=function(collection){if(null==collection)return 0;if(isArrayLike(collection))return isString(collection)?stringSize(collection):collection.length;var tag=getTag(collection);return tag==mapTag||tag==setTag?collection.size:baseKeys(collection).length},lodash.snakeCase=snakeCase,lodash.some=function(collection,predicate,guard){var func=isArray(collection)?arraySome:baseSome;return guard&&isIterateeCall(collection,predicate,guard)&&(predicate=undefined),func(collection,getIteratee(predicate,3))},lodash.sortedIndex=function(array,value){return baseSortedIndex(array,value)},lodash.sortedIndexBy=function(array,value,iteratee){return baseSortedIndexBy(array,value,getIteratee(iteratee,2))},lodash.sortedIndexOf=function(array,value){var length=null==array?0:array.length;if(length){var index=baseSortedIndex(array,value);if(index<length&&eq(array[index],value))return index}return-1},lodash.sortedLastIndex=function(array,value){return baseSortedIndex(array,value,!0)},lodash.sortedLastIndexBy=function(array,value,iteratee){return baseSortedIndexBy(array,value,getIteratee(iteratee,2),!0)},lodash.sortedLastIndexOf=function(array,value){if(null==array?0:array.length){var index=baseSortedIndex(array,value,!0)-1;if(eq(array[index],value))return index}return-1},lodash.startCase=startCase,lodash.startsWith=function(string,target,position){return string=toString(string),position=null==position?0:baseClamp(toInteger(position),0,string.length),target=baseToString(target),string.slice(position,position+target.length)==target},lodash.subtract=subtract,lodash.sum=function(array){return array&&array.length?baseSum(array,identity):0},lodash.sumBy=function(array,iteratee){return array&&array.length?baseSum(array,getIteratee(iteratee,2)):0},lodash.template=function(string,options,guard){var settings=lodash.templateSettings;guard&&isIterateeCall(string,options,guard)&&(options=undefined),string=toString(string),options=assignInWith({},options,settings,customDefaultsAssignIn);var isEscaping,isEvaluating,imports=assignInWith({},options.imports,settings.imports,customDefaultsAssignIn),importsKeys=keys(imports),importsValues=baseValues(imports,importsKeys),index=0,interpolate=options.interpolate||reNoMatch,source="__p += '",reDelimiters=RegExp((options.escape||reNoMatch).source+"|"+interpolate.source+"|"+(interpolate===reInterpolate?reEsTemplate:reNoMatch).source+"|"+(options.evaluate||reNoMatch).source+"|$","g"),sourceURL="//# sourceURL="+(hasOwnProperty.call(options,"sourceURL")?(options.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++templateCounter+"]")+"\n";string.replace(reDelimiters,(function(match,escapeValue,interpolateValue,esTemplateValue,evaluateValue,offset){return interpolateValue||(interpolateValue=esTemplateValue),source+=string.slice(index,offset).replace(reUnescapedString,escapeStringChar),escapeValue&&(isEscaping=!0,source+="' +\n__e("+escapeValue+") +\n'"),evaluateValue&&(isEvaluating=!0,source+="';\n"+evaluateValue+";\n__p += '"),interpolateValue&&(source+="' +\n((__t = ("+interpolateValue+")) == null ? '' : __t) +\n'"),index=offset+match.length,match})),source+="';\n";var variable=hasOwnProperty.call(options,"variable")&&options.variable;variable||(source="with (obj) {\n"+source+"\n}\n"),source=(isEvaluating?source.replace(reEmptyStringLeading,""):source).replace(reEmptyStringMiddle,"$1").replace(reEmptyStringTrailing,"$1;"),source="function("+(variable||"obj")+") {\n"+(variable?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(isEscaping?", __e = _.escape":"")+(isEvaluating?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+source+"return __p\n}";var result=attempt((function(){return Function(importsKeys,sourceURL+"return "+source).apply(undefined,importsValues)}));if(result.source=source,isError(result))throw result;return result},lodash.times=function(n,iteratee){if((n=toInteger(n))<1||n>9007199254740991)return[];var index=4294967295,length=nativeMin(n,4294967295);n-=4294967295;for(var result=baseTimes(length,iteratee=getIteratee(iteratee));++index<n;)iteratee(index);return result},lodash.toFinite=toFinite,lodash.toInteger=toInteger,lodash.toLength=toLength,lodash.toLower=function(value){return toString(value).toLowerCase()},lodash.toNumber=toNumber,lodash.toSafeInteger=function(value){return value?baseClamp(toInteger(value),-9007199254740991,9007199254740991):0===value?value:0},lodash.toString=toString,lodash.toUpper=function(value){return toString(value).toUpperCase()},lodash.trim=function(string,chars,guard){if((string=toString(string))&&(guard||undefined===chars))return string.replace(reTrim,"");if(!string||!(chars=baseToString(chars)))return string;var strSymbols=stringToArray(string),chrSymbols=stringToArray(chars);return castSlice(strSymbols,charsStartIndex(strSymbols,chrSymbols),charsEndIndex(strSymbols,chrSymbols)+1).join("")},lodash.trimEnd=function(string,chars,guard){if((string=toString(string))&&(guard||undefined===chars))return string.replace(reTrimEnd,"");if(!string||!(chars=baseToString(chars)))return string;var strSymbols=stringToArray(string);return castSlice(strSymbols,0,charsEndIndex(strSymbols,stringToArray(chars))+1).join("")},lodash.trimStart=function(string,chars,guard){if((string=toString(string))&&(guard||undefined===chars))return string.replace(reTrimStart,"");if(!string||!(chars=baseToString(chars)))return string;var strSymbols=stringToArray(string);return castSlice(strSymbols,charsStartIndex(strSymbols,stringToArray(chars))).join("")},lodash.truncate=function(string,options){var length=30,omission="...";if(isObject(options)){var separator="separator"in options?options.separator:separator;length="length"in options?toInteger(options.length):length,omission="omission"in options?baseToString(options.omission):omission}var strLength=(string=toString(string)).length;if(hasUnicode(string)){var strSymbols=stringToArray(string);strLength=strSymbols.length}if(length>=strLength)return string;var end=length-stringSize(omission);if(end<1)return omission;var result=strSymbols?castSlice(strSymbols,0,end).join(""):string.slice(0,end);if(undefined===separator)return result+omission;if(strSymbols&&(end+=result.length-end),isRegExp(separator)){if(string.slice(end).search(separator)){var match,substring=result;for(separator.global||(separator=RegExp(separator.source,toString(reFlags.exec(separator))+"g")),separator.lastIndex=0;match=separator.exec(substring);)var newEnd=match.index;result=result.slice(0,undefined===newEnd?end:newEnd)}}else if(string.indexOf(baseToString(separator),end)!=end){var index=result.lastIndexOf(separator);index>-1&&(result=result.slice(0,index))}return result+omission},lodash.unescape=function(string){return(string=toString(string))&&reHasEscapedHtml.test(string)?string.replace(reEscapedHtml,unescapeHtmlChar):string},lodash.uniqueId=function(prefix){var id=++idCounter;return toString(prefix)+id},lodash.upperCase=upperCase,lodash.upperFirst=upperFirst,lodash.each=forEach,lodash.eachRight=forEachRight,lodash.first=head,mixin(lodash,(source={},baseForOwn(lodash,(function(func,methodName){hasOwnProperty.call(lodash.prototype,methodName)||(source[methodName]=func)})),source),{chain:!1}),lodash.VERSION="4.17.20",arrayEach(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(methodName){lodash[methodName].placeholder=lodash})),arrayEach(["drop","take"],(function(methodName,index){LazyWrapper.prototype[methodName]=function(n){n=undefined===n?1:nativeMax(toInteger(n),0);var result=this.__filtered__&&!index?new LazyWrapper(this):this.clone();return result.__filtered__?result.__takeCount__=nativeMin(n,result.__takeCount__):result.__views__.push({size:nativeMin(n,4294967295),type:methodName+(result.__dir__<0?"Right":"")}),result},LazyWrapper.prototype[methodName+"Right"]=function(n){return this.reverse()[methodName](n).reverse()}})),arrayEach(["filter","map","takeWhile"],(function(methodName,index){var type=index+1,isFilter=1==type||3==type;LazyWrapper.prototype[methodName]=function(iteratee){var result=this.clone();return result.__iteratees__.push({iteratee:getIteratee(iteratee,3),type:type}),result.__filtered__=result.__filtered__||isFilter,result}})),arrayEach(["head","last"],(function(methodName,index){var takeName="take"+(index?"Right":"");LazyWrapper.prototype[methodName]=function(){return this[takeName](1).value()[0]}})),arrayEach(["initial","tail"],(function(methodName,index){var dropName="drop"+(index?"":"Right");LazyWrapper.prototype[methodName]=function(){return this.__filtered__?new LazyWrapper(this):this[dropName](1)}})),LazyWrapper.prototype.compact=function(){return this.filter(identity)},LazyWrapper.prototype.find=function(predicate){return this.filter(predicate).head()},LazyWrapper.prototype.findLast=function(predicate){return this.reverse().find(predicate)},LazyWrapper.prototype.invokeMap=baseRest((function(path,args){return"function"==typeof path?new LazyWrapper(this):this.map((function(value){return baseInvoke(value,path,args)}))})),LazyWrapper.prototype.reject=function(predicate){return this.filter(negate(getIteratee(predicate)))},LazyWrapper.prototype.slice=function(start,end){start=toInteger(start);var result=this;return result.__filtered__&&(start>0||end<0)?new LazyWrapper(result):(start<0?result=result.takeRight(-start):start&&(result=result.drop(start)),undefined!==end&&(result=(end=toInteger(end))<0?result.dropRight(-end):result.take(end-start)),result)},LazyWrapper.prototype.takeRightWhile=function(predicate){return this.reverse().takeWhile(predicate).reverse()},LazyWrapper.prototype.toArray=function(){return this.take(4294967295)},baseForOwn(LazyWrapper.prototype,(function(func,methodName){var checkIteratee=/^(?:filter|find|map|reject)|While$/.test(methodName),isTaker=/^(?:head|last)$/.test(methodName),lodashFunc=lodash[isTaker?"take"+("last"==methodName?"Right":""):methodName],retUnwrapped=isTaker||/^find/.test(methodName);lodashFunc&&(lodash.prototype[methodName]=function(){var value=this.__wrapped__,args=isTaker?[1]:arguments,isLazy=value instanceof LazyWrapper,iteratee=args[0],useLazy=isLazy||isArray(value),interceptor=function(value){var result=lodashFunc.apply(lodash,arrayPush([value],args));return isTaker&&chainAll?result[0]:result};useLazy&&checkIteratee&&"function"==typeof iteratee&&1!=iteratee.length&&(isLazy=useLazy=!1);var chainAll=this.__chain__,isHybrid=!!this.__actions__.length,isUnwrapped=retUnwrapped&&!chainAll,onlyLazy=isLazy&&!isHybrid;if(!retUnwrapped&&useLazy){value=onlyLazy?value:new LazyWrapper(this);var result=func.apply(value,args);return result.__actions__.push({func:thru,args:[interceptor],thisArg:undefined}),new LodashWrapper(result,chainAll)}return isUnwrapped&&onlyLazy?func.apply(this,args):(result=this.thru(interceptor),isUnwrapped?isTaker?result.value()[0]:result.value():result)})})),arrayEach(["pop","push","shift","sort","splice","unshift"],(function(methodName){var func=arrayProto[methodName],chainName=/^(?:push|sort|unshift)$/.test(methodName)?"tap":"thru",retUnwrapped=/^(?:pop|shift)$/.test(methodName);lodash.prototype[methodName]=function(){var args=arguments;if(retUnwrapped&&!this.__chain__){var value=this.value();return func.apply(isArray(value)?value:[],args)}return this[chainName]((function(value){return func.apply(isArray(value)?value:[],args)}))}})),baseForOwn(LazyWrapper.prototype,(function(func,methodName){var lodashFunc=lodash[methodName];if(lodashFunc){var key=lodashFunc.name+"";hasOwnProperty.call(realNames,key)||(realNames[key]=[]),realNames[key].push({name:methodName,func:lodashFunc})}})),realNames[createHybrid(undefined,2).name]=[{name:"wrapper",func:undefined}],LazyWrapper.prototype.clone=function(){var result=new LazyWrapper(this.__wrapped__);return result.__actions__=copyArray(this.__actions__),result.__dir__=this.__dir__,result.__filtered__=this.__filtered__,result.__iteratees__=copyArray(this.__iteratees__),result.__takeCount__=this.__takeCount__,result.__views__=copyArray(this.__views__),result},LazyWrapper.prototype.reverse=function(){if(this.__filtered__){var result=new LazyWrapper(this);result.__dir__=-1,result.__filtered__=!0}else(result=this.clone()).__dir__*=-1;return result},LazyWrapper.prototype.value=function(){var array=this.__wrapped__.value(),dir=this.__dir__,isArr=isArray(array),isRight=dir<0,arrLength=isArr?array.length:0,view=function(start,end,transforms){var index=-1,length=transforms.length;for(;++index<length;){var data=transforms[index],size=data.size;switch(data.type){case"drop":start+=size;break;case"dropRight":end-=size;break;case"take":end=nativeMin(end,start+size);break;case"takeRight":start=nativeMax(start,end-size)}}return{start:start,end:end}}(0,arrLength,this.__views__),start=view.start,end=view.end,length=end-start,index=isRight?end:start-1,iteratees=this.__iteratees__,iterLength=iteratees.length,resIndex=0,takeCount=nativeMin(length,this.__takeCount__);if(!isArr||!isRight&&arrLength==length&&takeCount==length)return baseWrapperValue(array,this.__actions__);var result=[];outer:for(;length--&&resIndex<takeCount;){for(var iterIndex=-1,value=array[index+=dir];++iterIndex<iterLength;){var data=iteratees[iterIndex],iteratee=data.iteratee,type=data.type,computed=iteratee(value);if(2==type)value=computed;else if(!computed){if(1==type)continue outer;break outer}}result[resIndex++]=value}return result},lodash.prototype.at=wrapperAt,lodash.prototype.chain=function(){return chain(this)},lodash.prototype.commit=function(){return new LodashWrapper(this.value(),this.__chain__)},lodash.prototype.next=function(){undefined===this.__values__&&(this.__values__=toArray(this.value()));var done=this.__index__>=this.__values__.length;return{done:done,value:done?undefined:this.__values__[this.__index__++]}},lodash.prototype.plant=function(value){for(var result,parent=this;parent instanceof baseLodash;){var clone=wrapperClone(parent);clone.__index__=0,clone.__values__=undefined,result?previous.__wrapped__=clone:result=clone;var previous=clone;parent=parent.__wrapped__}return previous.__wrapped__=value,result},lodash.prototype.reverse=function(){var value=this.__wrapped__;if(value instanceof LazyWrapper){var wrapped=value;return this.__actions__.length&&(wrapped=new LazyWrapper(this)),(wrapped=wrapped.reverse()).__actions__.push({func:thru,args:[reverse],thisArg:undefined}),new LodashWrapper(wrapped,this.__chain__)}return this.thru(reverse)},lodash.prototype.toJSON=lodash.prototype.valueOf=lodash.prototype.value=function(){return baseWrapperValue(this.__wrapped__,this.__actions__)},lodash.prototype.first=lodash.prototype.head,symIterator&&(lodash.prototype[symIterator]=function(){return this}),lodash}();root._=_,undefined===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return _}.call(exports,__webpack_require__,exports,module))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}).call(this)}).call(this,__webpack_require__(39),__webpack_require__(659)(module))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SectionModel=void 0;exports.SectionModel=class{constructor(){this.styles={},this.widgets=[]}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MediaItem=exports.defaultURL=exports.defaultFileName=void 0;const ko=__webpack_require__(0),MediaUtils=__webpack_require__(135),permalinks_1=__webpack_require__(57);exports.defaultFileName="media.svg",exports.defaultURL="https://cdn.paperbits.io/images/logo.svg";exports.MediaItem=class{constructor(mediaContract){this.key=mediaContract.key,this.blobKey=mediaContract.blobKey,this.fileName=ko.observable(mediaContract.fileName),this.description=ko.observable(mediaContract.description),this.keywords=ko.observable(mediaContract.keywords),this.permalink=ko.observable(mediaContract.permalink),this.contentType=ko.observable(mediaContract.mimeType),this.thumbnailUrl=ko.observable(),this.downloadUrl=ko.observable(mediaContract.downloadUrl),this.getThumbnail(mediaContract)}getThumbnail(mediaContract){var _a,_b;return __awaiter(this,void 0,void 0,(function*(){if(null===(_a=mediaContract.mimeType)||void 0===_a?void 0:_a.startsWith("video")){const dataUrl=yield MediaUtils.getVideoThumbnailAsDataUrlFromUrl(mediaContract.downloadUrl);this.thumbnailUrl(dataUrl)}else(null===(_b=mediaContract.mimeType)||void 0===_b?void 0:_b.startsWith("image"))?this.thumbnailUrl(mediaContract.downloadUrl):this.thumbnailUrl(null)}))}isDefaultFileName(){return this.fileName()===exports.defaultFileName}isDefaultUrl(){return this.downloadUrl()===exports.defaultURL}updateDefault(newName){this.fileName(newName),this.permalink(this.permalink().replace(exports.defaultFileName,newName)),this.thumbnailUrl(this.downloadUrl())}toMedia(){return{key:this.key,blobKey:this.blobKey,fileName:this.fileName(),description:this.description(),keywords:this.keywords(),mimeType:this.contentType(),downloadUrl:this.downloadUrl(),permalink:this.permalink()}}getHyperlink(){const hyperlinkModel=new permalinks_1.HyperlinkModel;return hyperlinkModel.title=this.fileName(),hyperlinkModel.targetKey=this.key,hyperlinkModel.href=this.permalink(),hyperlinkModel}}},function(module,exports){var cachedSetTimeout,cachedClearTimeout,process=module.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,function(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(marker);try{cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(name){return[]},process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},function(module,exports,__webpack_require__){var shared=__webpack_require__(114),uid=__webpack_require__(90),keys=shared("keys");module.exports=function(key){return keys[key]||(keys[key]=uid(key))}},function(module,exports){var id=0,postfix=Math.random();module.exports=function(key){return"Symbol("+String(void 0===key?"":key)+")_"+(++id+postfix).toString(36)}},function(module,exports,__webpack_require__){"use strict";var nativePropertyIsEnumerable={}.propertyIsEnumerable,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,NASHORN_BUG=getOwnPropertyDescriptor&&!nativePropertyIsEnumerable.call({1:2},1);exports.f=NASHORN_BUG?function(V){var descriptor=getOwnPropertyDescriptor(this,V);return!!descriptor&&descriptor.enumerable}:nativePropertyIsEnumerable},function(module,exports,__webpack_require__){"use strict";var IS_PURE=__webpack_require__(51),global=__webpack_require__(12),fails=__webpack_require__(7);module.exports=IS_PURE||!fails((function(){var key=Math.random();__defineSetter__.call(null,key,(function(){})),delete global[key]}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Keys=void 0,exports.Keys={Tab:9,Enter:13,Esc:27,Space:32,Delete:46,Alt:18,O:79,P:80,S:83,Y:89,Z:90}},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(583),exports)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ButtonModel=void 0;exports.ButtonModel=class{constructor(){this.label="Button",this.styles={appearance:"components/button/default"}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CardModel=void 0;exports.CardModel=class{constructor(){this.widgets=[],this.alignment={},this.styles={appearance:"components/card/default"}}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.DefaultStyleCompiler=void 0;const Utils=__webpack_require__(6),Objects=__webpack_require__(30),breakpoints_1=__webpack_require__(98),plugins_1=__webpack_require__(138),gridStylePlugin_1=__webpack_require__(656),gridCellStylePlugin_1=__webpack_require__(657),styles_1=__webpack_require__(8),jssCompiler_1=__webpack_require__(48);exports.DefaultStyleCompiler=class{constructor(styleService,mediaPermalinkResolver){this.styleService=styleService,this.mediaPermalinkResolver=mediaPermalinkResolver,this.pluginsToRefresh=["border","background","shadow","animation","typography"],this.plugins={}}isResponsive(variation){if(!variation)throw new Error('Parameter "variation" not specified.');return Object.keys(variation).some(props=>Object.keys(breakpoints_1.BreakpointValues).includes(props))}setStyles(styles){this.styles=styles}getStyles(){return __awaiter(this,void 0,void 0,(function*(){this.styles||this.styleService||console.error("Styles provider is not set!!!");return this.styles||(yield this.styleService.getStyles())}))}initializePlugins(){return __awaiter(this,void 0,void 0,(function*(){const themeContract=yield this.getStyles();Object.keys(this.plugins).length>0?themeContract&&this.pluginsToRefresh.map(pluginName=>{const plugin=this.plugins[pluginName];plugin.setThemeContract?plugin.setThemeContract(themeContract):console.error(`Plugin ${pluginName} does not support setThemeContract`)}):(this.plugins.padding=new plugins_1.PaddingStylePlugin,this.plugins.margin=new plugins_1.MarginStylePlugin,this.plugins.border=new plugins_1.BorderStylePlugin(themeContract),this.plugins.borderRadius=new plugins_1.BorderRadiusStylePlugin,this.plugins.background=new plugins_1.BackgroundStylePlugin(themeContract,this.mediaPermalinkResolver),this.plugins.shadow=new plugins_1.ShadowStylePlugin(themeContract),this.plugins.animation=new plugins_1.AnimationStylePlugin(themeContract),this.plugins.typography=new plugins_1.TypographyStylePlugin(themeContract),this.plugins.list=new plugins_1.ListStylePlugin,this.plugins.components=new plugins_1.ComponentsStylePlugin(this),this.plugins.states=new plugins_1.StatesStylePlugin(this),this.plugins.grid=new gridStylePlugin_1.GridStylePlugin,this.plugins["grid-cell"]=new gridCellStylePlugin_1.GridCellStylePlugin,this.plugins.container=new plugins_1.ContainerStylePlugin,this.plugins.size=new plugins_1.SizeStylePlugin,this.plugins.transform=new plugins_1.TransformStylePlugin,this.plugins.transition=new plugins_1.TransitionStylePlugin,this.plugins.stickTo=new plugins_1.StickToStylePlugin)}))}getStyleSheet(){return __awaiter(this,void 0,void 0,(function*(){yield this.initializePlugins();const styleSheet=new styles_1.StyleSheet("global"),themeContract=yield this.getStyles(),fontsPlugin=new plugins_1.FontsStylePlugin(this.mediaPermalinkResolver,themeContract),fontFaces=yield fontsPlugin.contractToFontFaces();if(styleSheet.fontFaces.push(...fontFaces),themeContract.components)for(const componentName of Object.keys(themeContract.components)){const componentConfig=themeContract.components[componentName],componentStyle=yield this.getVariationStyle(componentConfig.default,componentName),variations=Object.keys(componentConfig);for(const variationName of variations){if("default"===variationName)continue;const variationStyle=yield this.getVariationStyle(componentConfig[variationName],componentName,variationName);componentStyle.modifierStyles.push(variationStyle)}styleSheet.styles.push(componentStyle)}if(themeContract.utils){for(const variationName of Object.keys(themeContract.utils.text)){const textStyle=yield this.getVariationStyle(themeContract.utils.text[variationName],"text",variationName);styleSheet.styles.push(textStyle)}for(const variationName of Object.keys(themeContract.utils.content)){const contentStyle=yield this.getVariationStyle(themeContract.utils.content[variationName],"content",variationName);styleSheet.styles.push(contentStyle)}}if(themeContract.globals)for(const tagName of Object.keys(themeContract.globals)){const tagConfig=themeContract.globals[tagName],defaultComponentStyle=yield this.getVariationStyle(tagConfig.default,tagName,"default",!0),variations=Object.keys(tagConfig);if(defaultComponentStyle||!(variations.length<=1)){for(const variationName of variations){if("default"===variationName)continue;const componentName=Utils.camelCaseToKebabCase("body"===tagName?"text":tagName),variationStyle=yield this.getVariationStyle(tagConfig[variationName],componentName,variationName,!0);variationStyle&&("text"===componentName?defaultComponentStyle.nestedStyles.push(variationStyle):defaultComponentStyle.modifierStyles.push(variationStyle))}styleSheet.globalStyles.push(defaultComponentStyle)}}if(themeContract.colors)for(const colorName of Object.keys(themeContract.colors)){const colorStyleSelector="colors-"+Utils.camelCaseToKebabCase(colorName),colorStyle=new styles_1.Style(colorStyleSelector);colorStyle.addRule(new styles_1.StyleRule("color",themeContract.colors[colorName].value)),styleSheet.styles.push(colorStyle)}return styleSheet}))}compileCss(){return __awaiter(this,void 0,void 0,(function*(){const styleSheet=yield this.getStyleSheet();return(new jssCompiler_1.JssCompiler).compile(styleSheet)}))}getVariationStyle(variationConfig,componentName,variationName=null,isGlobal=!1){return __awaiter(this,void 0,void 0,(function*(){yield this.initializePlugins();const selector=variationName?`${componentName}-${variationName}`.replace("-default",""):componentName,resultStyle=new styles_1.Style(selector);variationName||(variationName="default");const mediaQueries={};for(const pluginName of Object.keys(variationConfig)){if("allowedStates"===pluginName)continue;const plugin=this.plugins[pluginName];if(!plugin)continue;const pluginConfig=variationConfig[pluginName];if(this.isResponsive(pluginConfig))for(const breakpoint of Object.keys(breakpoints_1.BreakpointValues)){const breakpointConfig=pluginConfig[breakpoint];if(!breakpointConfig)continue;if("xs"===breakpoint){const pluginRules=yield plugin.configToStyleRules(breakpointConfig);resultStyle.addRules(pluginRules);const pseudoStyles=yield plugin.configToPseudoStyles(breakpointConfig);resultStyle.pseudoStyles.push(...pseudoStyles);const nestedStyles=yield plugin.configToNestedStyles(breakpointConfig);resultStyle.nestedStyles.push(...nestedStyles);continue}const selector=isGlobal?componentName:`${componentName}-${breakpoint}-${variationName}`.replace("-default","");let style,mediaQuery=mediaQueries[breakpoint];mediaQuery?style=mediaQuery.styles[0]:(mediaQuery=new styles_1.StyleMediaQuery(breakpoints_1.BreakpointValues[breakpoint]),mediaQueries[breakpoint]=mediaQuery,resultStyle.nestedMediaQueries.push(mediaQuery),style=new styles_1.Style(selector),mediaQuery.styles.push(style));const pluginRules=yield plugin.configToStyleRules(breakpointConfig);style.rules.push(...pluginRules);const pseudoStyles=yield plugin.configToPseudoStyles(breakpointConfig);style.pseudoStyles.push(...pseudoStyles);const nestedStyles=yield plugin.configToNestedStyles(breakpointConfig);style.nestedStyles.push(...nestedStyles)}else{const rules=yield plugin.configToStyleRules(pluginConfig);resultStyle.addRules(rules);const pseudoStyles=yield plugin.configToPseudoStyles(pluginConfig);resultStyle.pseudoStyles.push(...pseudoStyles);const nestedStyles=yield plugin.configToNestedStyles(pluginConfig);isGlobal?resultStyle.nestedGlobalStyles.push(...nestedStyles):resultStyle.nestedStyles.push(...nestedStyles),resultStyle.nestedStyles.push(...nestedStyles)}}return resultStyle}))}getVariationClassNames(variations,componentName,variationName=null){const classNames=[];variationName||(variationName="default");for(const pluginName of Object.keys(variations)){const pluginConfig=variations[pluginName];if(this.isResponsive(pluginConfig))for(const breakpoint of Object.keys(breakpoints_1.BreakpointValues)){if(pluginConfig[breakpoint]){let className;className="xs"===breakpoint?`${componentName}-${variationName}`.replace("-default",""):`${componentName}-${breakpoint}-${variationName}`.replace("-default",""),classNames.push(className)}}else{const className=`${componentName}-${variationName}`.replace("-default","");classNames.push(className)}}return classNames}getStateStyle(states,stateName){return __awaiter(this,void 0,void 0,(function*(){const stateStyle=new styles_1.Style(stateName);for(const pluginName of Object.keys(states)){const plugin=this.plugins[pluginName];if(plugin){const pluginConfig=states[pluginName],pluginRules=yield plugin.configToStyleRules(pluginConfig);stateStyle.addRules(pluginRules);const nestedStyles=yield plugin.configToNestedStyles(pluginConfig);stateStyle.nestedStyles.push(...nestedStyles)}}return stateStyle}))}getFontsStylesCss(){return __awaiter(this,void 0,void 0,(function*(){const themeContract=yield this.getStyles(),fontsPlugin=new plugins_1.FontsStylePlugin(this.mediaPermalinkResolver,themeContract),fontFaces=yield fontsPlugin.contractToFontFaces(),styleSheet=new styles_1.StyleSheet;styleSheet.fontFaces.push(...fontFaces);return(new jssCompiler_1.JssCompiler).compile(styleSheet)}))}getClassNameByColorKey(colorKey){return Utils.camelCaseToKebabCase(colorKey.replaceAll("/","-"))}getClassNamesForLocalStylesAsync(styleConfig){return __awaiter(this,void 0,void 0,(function*(){const classNames=[];for(const category of Object.keys(styleConfig)){const categoryConfig=styleConfig[category];if(!categoryConfig)continue;if(this.isResponsive(categoryConfig)){for(const breakpoint of Object.keys(categoryConfig)){let className;className="xs"===breakpoint?yield this.getClassNameByStyleKeyAsync(categoryConfig[breakpoint]):yield this.getClassNameByStyleKeyAsync(categoryConfig[breakpoint],breakpoint),className&&classNames.push(className)}continue}const styleKey=categoryConfig,className=yield this.getClassNameByStyleKeyAsync(styleKey);className&&classNames.push(className)}return classNames.join(" ")}))}getStyleModelAsync(localStyles,styleManager){return __awaiter(this,void 0,void 0,(function*(){const classNames=[];let variationStyle,key;for(const category of Object.keys(localStyles)){const categoryConfig=localStyles[category];if(categoryConfig)if("instance"===category){const pluginBag=categoryConfig,instanceClassName=pluginBag.key||Utils.randomClassName();pluginBag.key=instanceClassName,key=pluginBag.key,variationStyle=yield this.getVariationStyle(pluginBag,instanceClassName);const instanceClassNames=yield this.getVariationClassNames(pluginBag,instanceClassName);classNames.push(...instanceClassNames)}else if(this.isResponsive(categoryConfig)){const pluginBag=categoryConfig;for(const breakpoint of Object.keys(pluginBag)){let className;className="xs"===breakpoint?yield this.getClassNameByStyleKeyAsync(pluginBag[breakpoint]):yield this.getClassNameByStyleKeyAsync(pluginBag[breakpoint],breakpoint),className&&classNames.push(className)}}else{const styleKey=categoryConfig,className=yield this.getClassNameByStyleKeyAsync(styleKey);className&&classNames.push(className)}}const localStyleSheet=new styles_1.StyleSheet(key);variationStyle&&localStyleSheet.styles.push(variationStyle);return{key:key,classNames:classNames.join(" "),styleSheet:localStyleSheet,styleManager:styleManager}}))}getClassNameByStyleKeyAsync(key,breakpoint){return __awaiter(this,void 0,void 0,(function*(){if(!key)throw new Error('Parameter "key" not specified.');const segments=key.split("/"),category=segments[0];let component=segments[1];const componentVariation=segments[2];if("globals"===category&&"body"!==component&&"ul"!==component)return null;const classNames=[];if("body"===component?component="text":classNames.push(Utils.camelCaseToKebabCase(component)),componentVariation){let className;className=breakpoint?`${component}-${breakpoint}-${componentVariation}`:`${component}-${componentVariation}`,className=Utils.camelCaseToKebabCase(className),classNames.push(className)}const styles=yield this.getStyles(),style=Objects.getObjectAt(key,styles);return style&&style.class&&classNames.push(style.class[breakpoint||"xs"]),classNames.join(" ")}))}styleToCss(style){if(!style)return"";const styleSheet=new styles_1.StyleSheet;styleSheet.styles.push(style);return(new jssCompiler_1.JssCompiler).compile(styleSheet)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BreakpointValues=void 0,exports.BreakpointValues={xs:0,sm:576,md:768,lg:992,xl:1200}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ColumnModel=void 0;exports.ColumnModel=class{constructor(){this.widgets=[],this.size={},this.alignment={},this.order={}}}},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(664),exports),__exportStar(__webpack_require__(666),exports),__exportStar(__webpack_require__(140),exports),__exportStar(__webpack_require__(230),exports)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuModel=void 0;exports.MenuModel=class{constructor(){this.items=[],this.roles=null,this.layout="vertical"}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PictureModel=void 0;exports.PictureModel=class{}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TestimonialsModel=void 0;exports.TestimonialsModel=class{}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BlockModel=void 0;exports.BlockModel=class{constructor(type){this.type=type}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.VideoPlayerModel=void 0;exports.VideoPlayerModel=class{constructor(){this.styles={}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.YoutubePlayerModel=void 0;exports.YoutubePlayerModel=class{constructor(){this.styles={}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LayoutItem=void 0;const ko=__webpack_require__(0);exports.LayoutItem=class{constructor(layout){this.key=layout.key,this.contentKey=layout.contentKey,this.title=ko.observable(layout.title),this.description=ko.observable(layout.description),this.permalinkTemplate=ko.observable(layout.permalinkTemplate)}toContract(){return{key:this.key,contentKey:this.contentKey,title:this.title(),description:this.description(),permalinkTemplate:this.permalinkTemplate()}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SearchModel=void 0;exports.SearchModel=class{}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ClickCounterModel=void 0;exports.ClickCounterModel=class{}},function(module,exports){module.exports=function(it){if(null==it)throw TypeError("Can't call method on "+it);return it}},function(module,exports,__webpack_require__){var store=__webpack_require__(157),functionToString=Function.toString;"function"!=typeof store.inspectSource&&(store.inspectSource=function(it){return functionToString.call(it)}),module.exports=store.inspectSource},function(module,exports,__webpack_require__){var global=__webpack_require__(12),createNonEnumerableProperty=__webpack_require__(40);module.exports=function(key,value){try{createNonEnumerableProperty(global,key,value)}catch(error){global[key]=value}return value}},function(module,exports,__webpack_require__){var global=__webpack_require__(12),isObject=__webpack_require__(9),document=global.document,EXISTS=isObject(document)&&isObject(document.createElement);module.exports=function(it){return EXISTS?document.createElement(it):{}}},function(module,exports,__webpack_require__){var IS_PURE=__webpack_require__(51),store=__webpack_require__(157);(module.exports=function(key,value){return store[key]||(store[key]=void 0!==value?value:{})})("versions",[]).push({version:"3.6.5",mode:IS_PURE?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(module,exports,__webpack_require__){var getBuiltIn=__webpack_require__(34),getOwnPropertyNamesModule=__webpack_require__(116),getOwnPropertySymbolsModule=__webpack_require__(119),anObject=__webpack_require__(13);module.exports=getBuiltIn("Reflect","ownKeys")||function(it){var keys=getOwnPropertyNamesModule.f(anObject(it)),getOwnPropertySymbols=getOwnPropertySymbolsModule.f;return getOwnPropertySymbols?keys.concat(getOwnPropertySymbols(it)):keys}},function(module,exports,__webpack_require__){var internalObjectKeys=__webpack_require__(161),hiddenKeys=__webpack_require__(118).concat("length","prototype");exports.f=Object.getOwnPropertyNames||function(O){return internalObjectKeys(O,hiddenKeys)}},function(module,exports,__webpack_require__){var toIndexedObject=__webpack_require__(32),toLength=__webpack_require__(24),toAbsoluteIndex=__webpack_require__(71),createMethod=function(IS_INCLUDES){return function($this,el,fromIndex){var value,O=toIndexedObject($this),length=toLength(O.length),index=toAbsoluteIndex(fromIndex,length);if(IS_INCLUDES&&el!=el){for(;length>index;)if((value=O[index++])!=value)return!0}else for(;length>index;index++)if((IS_INCLUDES||index in O)&&O[index]===el)return IS_INCLUDES||index||0;return!IS_INCLUDES&&-1}};module.exports={includes:createMethod(!0),indexOf:createMethod(!1)}},function(module,exports){module.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(module,exports){exports.f=Object.getOwnPropertySymbols},function(module,exports,__webpack_require__){var fails=__webpack_require__(7);module.exports=!fails((function(){function F(){}return F.prototype.constructor=null,Object.getPrototypeOf(new F)!==F.prototype}))},function(module,exports,__webpack_require__){var fails=__webpack_require__(7);module.exports=!!Object.getOwnPropertySymbols&&!fails((function(){return!String(Symbol())}))},function(module,exports,__webpack_require__){var anObject=__webpack_require__(13),aPossiblePrototype=__webpack_require__(167);module.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var setter,CORRECT_SETTER=!1,test={};try{(setter=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(test,[]),CORRECT_SETTER=test instanceof Array}catch(error){}return function(O,proto){return anObject(O),aPossiblePrototype(proto),CORRECT_SETTER?setter.call(O,proto):O.__proto__=proto,O}}():void 0)},function(module,exports,__webpack_require__){var test={};test[__webpack_require__(15)("toStringTag")]="z",module.exports="[object z]"===String(test)},function(module,exports,__webpack_require__){var match,version,global=__webpack_require__(12),userAgent=__webpack_require__(174),process=global.process,versions=process&&process.versions,v8=versions&&versions.v8;v8?version=(match=v8.split("."))[0]+match[1]:userAgent&&(!(match=userAgent.match(/Edge\/(\d+)/))||match[1]>=74)&&(match=userAgent.match(/Chrome\/(\d+)/))&&(version=match[1]),module.exports=version&&+version},function(module,exports,__webpack_require__){var hiddenKeys=__webpack_require__(69),isObject=__webpack_require__(9),has=__webpack_require__(22),defineProperty=__webpack_require__(21).f,uid=__webpack_require__(90),FREEZING=__webpack_require__(78),METADATA=uid("meta"),id=0,isExtensible=Object.isExtensible||function(){return!0},setMetadata=function(it){defineProperty(it,METADATA,{value:{objectID:"O"+ ++id,weakData:{}}})},meta=module.exports={REQUIRED:!1,fastKey:function(it,create){if(!isObject(it))return"symbol"==typeof it?it:("string"==typeof it?"S":"P")+it;if(!has(it,METADATA)){if(!isExtensible(it))return"F";if(!create)return"E";setMetadata(it)}return it[METADATA].objectID},getWeakData:function(it,create){if(!has(it,METADATA)){if(!isExtensible(it))return!0;if(!create)return!1;setMetadata(it)}return it[METADATA].weakData},onFreeze:function(it){return FREEZING&&meta.REQUIRED&&isExtensible(it)&&!has(it,METADATA)&&setMetadata(it),it}};hiddenKeys[METADATA]=!0},function(module,exports,__webpack_require__){var anObject=__webpack_require__(13),isArrayIteratorMethod=__webpack_require__(169),toLength=__webpack_require__(24),bind=__webpack_require__(75),getIteratorMethod=__webpack_require__(170),callWithSafeIterationClosing=__webpack_require__(168),Result=function(stopped,result){this.stopped=stopped,this.result=result};(module.exports=function(iterable,fn,that,AS_ENTRIES,IS_ITERATOR){var iterator,iterFn,index,length,result,next,step,boundFunction=bind(fn,that,AS_ENTRIES?2:1);if(IS_ITERATOR)iterator=iterable;else{if("function"!=typeof(iterFn=getIteratorMethod(iterable)))throw TypeError("Target is not iterable");if(isArrayIteratorMethod(iterFn)){for(index=0,length=toLength(iterable.length);length>index;index++)if((result=AS_ENTRIES?boundFunction(anObject(step=iterable[index])[0],step[1]):boundFunction(iterable[index]))&&result instanceof Result)return result;return new Result(!1)}iterator=iterFn.call(iterable)}for(next=iterator.next;!(step=next.call(iterator)).done;)if("object"==typeof(result=callWithSafeIterationClosing(iterator,boundFunction,step.value,AS_ENTRIES))&&result&&result instanceof Result)return result;return new Result(!1)}).stop=function(result){return new Result(!0,result)}},function(module,exports,__webpack_require__){var TO_STRING_TAG_SUPPORT=__webpack_require__(123),redefine=__webpack_require__(52),toString=__webpack_require__(374);TO_STRING_TAG_SUPPORT||redefine(Object.prototype,"toString",toString,{unsafe:!0})},function(module,exports,__webpack_require__){"use strict";var aFunction=__webpack_require__(28),PromiseCapability=function(C){var resolve,reject;this.promise=new C((function($$resolve,$$reject){if(void 0!==resolve||void 0!==reject)throw TypeError("Bad Promise constructor");resolve=$$resolve,reject=$$reject})),this.resolve=aFunction(resolve),this.reject=aFunction(reject)};module.exports.f=function(C){return new PromiseCapability(C)}},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(421)},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(425),exports),__exportStar(__webpack_require__(426),exports),__exportStar(__webpack_require__(427),exports),__exportStar(__webpack_require__(455),exports)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var binding_when_syntax_1=__webpack_require__(132),BindingOnSyntax=function(){function BindingOnSyntax(binding){this._binding=binding}return BindingOnSyntax.prototype.onActivation=function(handler){return this._binding.onActivation=handler,new binding_when_syntax_1.BindingWhenSyntax(this._binding)},BindingOnSyntax}();exports.BindingOnSyntax=BindingOnSyntax},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var binding_on_syntax_1=__webpack_require__(131),constraint_helpers_1=__webpack_require__(197),BindingWhenSyntax=function(){function BindingWhenSyntax(binding){this._binding=binding}return BindingWhenSyntax.prototype.when=function(constraint){return this._binding.constraint=constraint,new binding_on_syntax_1.BindingOnSyntax(this._binding)},BindingWhenSyntax.prototype.whenTargetNamed=function(name){return this._binding.constraint=constraint_helpers_1.namedConstraint(name),new binding_on_syntax_1.BindingOnSyntax(this._binding)},BindingWhenSyntax.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(request){return null!==request.target&&!request.target.isNamed()&&!request.target.isTagged()},new binding_on_syntax_1.BindingOnSyntax(this._binding)},BindingWhenSyntax.prototype.whenTargetTagged=function(tag,value){return this._binding.constraint=constraint_helpers_1.taggedConstraint(tag)(value),new binding_on_syntax_1.BindingOnSyntax(this._binding)},BindingWhenSyntax.prototype.whenInjectedInto=function(parent){return this._binding.constraint=function(request){return constraint_helpers_1.typeConstraint(parent)(request.parentRequest)},new binding_on_syntax_1.BindingOnSyntax(this._binding)},BindingWhenSyntax.prototype.whenParentNamed=function(name){return this._binding.constraint=function(request){return constraint_helpers_1.namedConstraint(name)(request.parentRequest)},new binding_on_syntax_1.BindingOnSyntax(this._binding)},BindingWhenSyntax.prototype.whenParentTagged=function(tag,value){return this._binding.constraint=function(request){return constraint_helpers_1.taggedConstraint(tag)(value)(request.parentRequest)},new binding_on_syntax_1.BindingOnSyntax(this._binding)},BindingWhenSyntax.prototype.whenAnyAncestorIs=function(ancestor){return this._binding.constraint=function(request){return constraint_helpers_1.traverseAncerstors(request,constraint_helpers_1.typeConstraint(ancestor))},new binding_on_syntax_1.BindingOnSyntax(this._binding)},BindingWhenSyntax.prototype.whenNoAncestorIs=function(ancestor){return this._binding.constraint=function(request){return!constraint_helpers_1.traverseAncerstors(request,constraint_helpers_1.typeConstraint(ancestor))},new binding_on_syntax_1.BindingOnSyntax(this._binding)},BindingWhenSyntax.prototype.whenAnyAncestorNamed=function(name){return this._binding.constraint=function(request){return constraint_helpers_1.traverseAncerstors(request,constraint_helpers_1.namedConstraint(name))},new binding_on_syntax_1.BindingOnSyntax(this._binding)},BindingWhenSyntax.prototype.whenNoAncestorNamed=function(name){return this._binding.constraint=function(request){return!constraint_helpers_1.traverseAncerstors(request,constraint_helpers_1.namedConstraint(name))},new binding_on_syntax_1.BindingOnSyntax(this._binding)},BindingWhenSyntax.prototype.whenAnyAncestorTagged=function(tag,value){return this._binding.constraint=function(request){return constraint_helpers_1.traverseAncerstors(request,constraint_helpers_1.taggedConstraint(tag)(value))},new binding_on_syntax_1.BindingOnSyntax(this._binding)},BindingWhenSyntax.prototype.whenNoAncestorTagged=function(tag,value){return this._binding.constraint=function(request){return!constraint_helpers_1.traverseAncerstors(request,constraint_helpers_1.taggedConstraint(tag)(value))},new binding_on_syntax_1.BindingOnSyntax(this._binding)},BindingWhenSyntax.prototype.whenAnyAncestorMatches=function(constraint){return this._binding.constraint=function(request){return constraint_helpers_1.traverseAncerstors(request,constraint)},new binding_on_syntax_1.BindingOnSyntax(this._binding)},BindingWhenSyntax.prototype.whenNoAncestorMatches=function(constraint){return this._binding.constraint=function(request){return!constraint_helpers_1.traverseAncerstors(request,constraint)},new binding_on_syntax_1.BindingOnSyntax(this._binding)},BindingWhenSyntax}();exports.BindingWhenSyntax=BindingWhenSyntax},function(module,exports){String.prototype.replaceAll=function(search,replacement){return this.split(search).join(replacement)},Array.prototype.remove=function(item){const index=this.indexOf(item);index<0||this.splice(index,1)}},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(540),exports),__exportStar(__webpack_require__(541),exports),__exportStar(__webpack_require__(542),exports),__exportStar(__webpack_require__(543),exports),__exportStar(__webpack_require__(135),exports)},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};function getVideoThumbnailAsDataUrlFromUrl(url){return __awaiter(this,void 0,void 0,(function*(){return new Promise((resolve,reject)=>{const video=document.createElement("video");video.crossOrigin="Anonymous";const timeupdate=()=>{snapImage()&&(video.removeEventListener("timeupdate",timeupdate),video.pause())};video.addEventListener("loadeddata",()=>{snapImage()&&video.removeEventListener("timeupdate",timeupdate)});const snapImage=()=>{const canvas=document.createElement("canvas");canvas.width=video.videoWidth,canvas.height=video.videoHeight,canvas.getContext("2d").drawImage(video,0,0,canvas.width,canvas.height);const image=canvas.toDataURL(),success=image.length>1e5;return resolve(image),success&&URL.revokeObjectURL(url),success};video.addEventListener("timeupdate",timeupdate),video.preload="metadata",video.src=url,video.muted=!0,video.play()})}))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getVideoThumbnailAsDataUrl=exports.getVideoThumbnailAsDataUrlFromUrl=void 0,exports.getVideoThumbnailAsDataUrlFromUrl=getVideoThumbnailAsDataUrlFromUrl,exports.getVideoThumbnailAsDataUrl=function(file){return __awaiter(this,void 0,void 0,(function*(){return new Promise((resolve,reject)=>{const fileReader=new FileReader;fileReader.onload=()=>__awaiter(this,void 0,void 0,(function*(){const blob=new Blob([fileReader.result],{type:file.type}),url=URL.createObjectURL(blob),dataUrl=yield getVideoThumbnailAsDataUrlFromUrl(url);resolve(dataUrl),URL.revokeObjectURL(url)})),fileReader.readAsArrayBuffer(file)})}))}},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(561),exports),__exportStar(__webpack_require__(562),exports),__exportStar(__webpack_require__(563),exports),__exportStar(__webpack_require__(564),exports),__exportStar(__webpack_require__(565),exports),__exportStar(__webpack_require__(566),exports),__exportStar(__webpack_require__(567),exports),__exportStar(__webpack_require__(568),exports)},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.CollapsiblePanel=void 0;const ko=__webpack_require__(0),collapsiblePanel_html_1=__webpack_require__(601),decorators_1=__webpack_require__(2);let CollapsiblePanel=class{constructor(){this.widgets=ko.observableArray(),this.styles=ko.observable()}};CollapsiblePanel=__decorate([decorators_1.Component({selector:"collapsible-panel",template:collapsiblePanel_html_1.default}),__metadata("design:paramtypes",[])],CollapsiblePanel),exports.CollapsiblePanel=CollapsiblePanel},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(606),exports),__exportStar(__webpack_require__(223),exports),__exportStar(__webpack_require__(641),exports),__exportStar(__webpack_require__(642),exports),__exportStar(__webpack_require__(643),exports),__exportStar(__webpack_require__(644),exports),__exportStar(__webpack_require__(645),exports),__exportStar(__webpack_require__(16),exports),__exportStar(__webpack_require__(646),exports),__exportStar(__webpack_require__(647),exports),__exportStar(__webpack_require__(648),exports),__exportStar(__webpack_require__(649),exports),__exportStar(__webpack_require__(650),exports),__exportStar(__webpack_require__(651),exports),__exportStar(__webpack_require__(652),exports),__exportStar(__webpack_require__(653),exports),__exportStar(__webpack_require__(654),exports),__exportStar(__webpack_require__(655),exports)},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(629),exports),__exportStar(__webpack_require__(630),exports),__exportStar(__webpack_require__(631),exports),__exportStar(__webpack_require__(632),exports),__exportStar(__webpack_require__(633),exports),__exportStar(__webpack_require__(634),exports),__exportStar(__webpack_require__(635),exports),__exportStar(__webpack_require__(636),exports),__exportStar(__webpack_require__(224),exports),__exportStar(__webpack_require__(637),exports),__exportStar(__webpack_require__(638),exports),__exportStar(__webpack_require__(639),exports),__exportStar(__webpack_require__(640),exports)},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ContentViewModel=void 0;const ko=__webpack_require__(0),content_html_1=__webpack_require__(665),decorators_1=__webpack_require__(2);let ContentViewModel=class{constructor(){this.title=ko.observable(),this.description=ko.observable(),this.keywords=ko.observable(),this.widgets=ko.observableArray()}};ContentViewModel=__decorate([decorators_1.Component({selector:"paperbits-content",template:content_html_1.default}),__metadata("design:paramtypes",[])],ContentViewModel),exports.ContentViewModel=ContentViewModel},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ContentModel=void 0;exports.ContentModel=class{constructor(){this.widgets=[]}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ContentHandlers=void 0;exports.ContentHandlers=class{constructor(viewManager){this.viewManager=viewManager}canAccept(dragSession){return"section"===dragSession.sourceBinding.name}getContextualEditor(context){const contextualEditor={};return 0===context.model.widgets.length&&(contextualEditor.hoverCommands=[{color:"#2b87da",position:"center",tooltip:"Add section",component:{name:"grid-layout-selector",params:{onSelect:model=>{context.model.widgets.push(model),context.binding.applyChanges(),this.viewManager.clearContextualEditors()}}}}]),contextualEditor}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GridCellModel=void 0;exports.GridCellModel=class{constructor(){this.role="article",this.widgets=[]}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SectionHandlers=void 0;const blocks_1=__webpack_require__(67);exports.SectionHandlers=class{constructor(viewManager,eventManager){this.viewManager=viewManager,this.eventManager=eventManager}getContextualEditor(context){const sectionContextualEditor={color:"#2b87da",hoverCommands:[{position:context.half,tooltip:"Add section",color:"#2b87da",component:{name:"grid-layout-selector",params:{onSelect:section=>{const sectionHalf=context.half;let index=context.parentModel.widgets.indexOf(context.model);"bottom"===sectionHalf&&index++,context.parentModel.widgets.splice(index,0,section),context.parentBinding.applyChanges(),this.viewManager.clearContextualEditors(),this.eventManager.dispatchEvent("onContentUpdate")}}}}],deleteCommand:{tooltip:"Delete section",color:"#2b87da",callback:()=>{context.parentModel.widgets.remove(context.model),context.parentBinding.applyChanges(),this.viewManager.clearContextualEditors(),this.eventManager.dispatchEvent("onContentUpdate")}},selectCommands:[{tooltip:"Edit section",iconClass:"paperbits-edit-72",position:"top right",color:"#2b87da",callback:()=>this.viewManager.openWidgetEditor(context.binding)},{tooltip:"Add to library",iconClass:"paperbits-simple-add",position:"top right",color:"#2b87da",callback:()=>{const view={heading:"Add to library",component:{name:"add-block-dialog",params:{blockModel:context.model,blockType:blocks_1.BlockType.saved}},resize:"vertically horizontally"};this.viewManager.openViewAsPopup(view)}}]};return 0===context.model.widgets.length&&sectionContextualEditor.hoverCommands.push({position:"center",tooltip:"Add row",color:"#29c4a9",component:{name:"grid-layout-selector",params:{onSelect:newRowModel=>{const sectionModel=context.model,sectionBinding=context.binding;sectionModel.widgets.push(newRowModel),sectionBinding.applyChanges(),this.viewManager.clearContextualEditors(),this.eventManager.dispatchEvent("onContentUpdate")}}}}),sectionContextualEditor}}},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.GridViewModel=void 0;const ko=__webpack_require__(0),grid_html_1=__webpack_require__(672),decorators_1=__webpack_require__(2);let GridViewModel=class{constructor(){this.widgets=ko.observableArray(),this.container=ko.observable(),this.styles=ko.observable()}};GridViewModel=__decorate([decorators_1.Component({selector:"grid-layout-section",template:grid_html_1.default}),__metadata("design:paramtypes",[])],GridViewModel),exports.GridViewModel=GridViewModel},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GridModel=void 0;exports.GridModel=class{constructor(){this.styles={},this.widgets=[]}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GridHandlers=void 0;exports.GridHandlers=class{getContextualEditor(context){return{}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ViewModelBinderSelector=void 0;const placeholderViewModelBinder_1=__webpack_require__(219),placeholder_1=__webpack_require__(94);exports.ViewModelBinderSelector=class{constructor(viewModelBinders){this.viewModelBinders=viewModelBinders}getViewModelBinderByModel(model){if(model instanceof placeholder_1.PlaceholderModel)return new placeholderViewModelBinder_1.PlaceholderViewModelBinder;const viewModelBinder=this.viewModelBinders.find(x=>!(!x||!x.canHandleModel)&&x.canHandleModel(model));return viewModelBinder||(console.warn("Could not find view model binder for model: "+(model.constructor.name||model)),new placeholderViewModelBinder_1.PlaceholderViewModelBinder)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RowModel=void 0;exports.RowModel=class{constructor(){this.widgets=[]}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PageItem=exports.AnchorItem=void 0;const ko=__webpack_require__(0),permalinks_1=__webpack_require__(57);exports.AnchorItem=class{constructor(){this.isSelected=ko.observable()}};exports.PageItem=class{constructor(page){this.contentKey=page.contentKey,this.key=page.key,this.title=ko.observable(page.title),this.description=ko.observable(page.description),this.keywords=ko.observable(page.keywords),this.jsonLd=ko.observable(page.jsonLd),this.permalink=ko.observable(page.permalink),this.anchors=ko.observableArray(),this.socialShareData=ko.observable(page.socialShareData),this.anchorsLoaded=ko.observable(!1)}getHyperlink(){const hyperlinkModel=new permalinks_1.HyperlinkModel;return hyperlinkModel.title=this.title(),hyperlinkModel.targetKey=this.key,hyperlinkModel.href=this.permalink(),this.selectedAnchor&&(hyperlinkModel.anchor=this.selectedAnchor.elementId,hyperlinkModel.anchorName=this.selectedAnchor.shortTitle),hyperlinkModel}toContract(){return{key:this.key,title:this.title(),description:this.description(),keywords:this.keywords(),jsonLd:this.jsonLd(),contentKey:this.contentKey,permalink:this.permalink(),socialShareData:this.socialShareData()}}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.NavigationModelBinder=void 0;const navigation_1=__webpack_require__(37);exports.NavigationModelBinder=class{constructor(permalinkResolver,router){this.permalinkResolver=permalinkResolver,this.router=router}canHandleContract(contract){return"navitem"===contract.type}canHandleModel(model){return model instanceof navigation_1.NavigationItemModel}contractToModel(contract,bindingContext){return __awaiter(this,void 0,void 0,(function*(){if(!contract)throw new Error('Parameter "contract" not specified.');const model=new navigation_1.NavigationItemModel;if(model.label=contract.label,model.key=contract.key,model.targetKey=contract.targetKey,model.isActive=model.targetUrl===this.router.getPath(),contract.navigationItems){const tasks=[];contract.navigationItems.forEach(child=>{tasks.push(this.contractToModel(child))});(yield Promise.all(tasks)).forEach(child=>{model.nodes.push(child)})}else if(contract.targetKey){const targetUrl=yield this.permalinkResolver.getUrlByTargetKey(contract.targetKey,null==bindingContext?void 0:bindingContext.locale);model.targetUrl=targetUrl}else console.warn(`Navigation item "${model.label}" has no permalink assigned to it.`);return model}))}modelToContract(model){return{key:model.key,label:model.label,targetKey:model.targetKey,navigationItems:model.nodes.map(x=>this.modelToContract(x))}}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.NavigationViewModelBinder=void 0;const navigation_1=__webpack_require__(37),_1=__webpack_require__(790);exports.NavigationViewModelBinder=class{modelToViewModel(model){return __awaiter(this,void 0,void 0,(function*(){if(!model)throw new Error('Parameter "model" not specified.');const viewModel=new _1.NavigationItemViewModel(model);if(viewModel.key=model.key,viewModel.label(model.label),viewModel.targetKey(model.targetKey),viewModel.targetUrl(model.targetUrl),model.nodes){const tasks=[];model.nodes.forEach(child=>tasks.push(this.modelToViewModel(child)));(yield Promise.all(tasks)).forEach(childViewModel=>{viewModel.nodes.push(childViewModel),childViewModel.parent=viewModel})}return viewModel}))}viewModelToModel(viewModel){return{key:viewModel.key,label:viewModel.label(),targetKey:viewModel.targetKey(),targetUrl:viewModel.targetUrl(),nodes:viewModel.nodes().map(x=>this.viewModelToModel(x))}}canHandleModel(model){return model instanceof navigation_1.NavigationItemModel}}},function(module,exports){},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StyleItem=void 0;const ko=__webpack_require__(0);exports.StyleItem=class{constructor(contract,stylesConfig,stylesType){this.key=contract.key,this.displayName=contract.displayName,this.category=contract.category,this.hasFocus=ko.observable(),this.stylesConfig=stylesConfig,this.stylesType=stylesType}}},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(global,module){var root,_ponyfill_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(309);root="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==global?global:module;var result=Object(_ponyfill_js__WEBPACK_IMPORTED_MODULE_0__.a)(root);__webpack_exports__.a=result}).call(this,__webpack_require__(39),__webpack_require__(658)(module))},function(module,exports,__webpack_require__){"use strict";var charAt=__webpack_require__(316).charAt,InternalStateModule=__webpack_require__(68),defineIterator=__webpack_require__(159),setInternalState=InternalStateModule.set,getInternalState=InternalStateModule.getterFor("String Iterator");defineIterator(String,"String",(function(iterated){setInternalState(this,{type:"String Iterator",string:String(iterated),index:0})}),(function(){var point,state=getInternalState(this),string=state.string,index=state.index;return index>=string.length?{value:void 0,done:!0}:(point=charAt(string,index),state.index+=point.length,{value:point,done:!1})}))},function(module,exports,__webpack_require__){var global=__webpack_require__(12),setGlobal=__webpack_require__(112),store=global["__core-js_shared__"]||setGlobal("__core-js_shared__",{});module.exports=store},function(module,exports,__webpack_require__){var DESCRIPTORS=__webpack_require__(10),fails=__webpack_require__(7),createElement=__webpack_require__(113);module.exports=!DESCRIPTORS&&!fails((function(){return 7!=Object.defineProperty(createElement("div"),"a",{get:function(){return 7}}).a}))},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(4),createIteratorConstructor=__webpack_require__(318),getPrototypeOf=__webpack_require__(41),setPrototypeOf=__webpack_require__(122),setToStringTag=__webpack_require__(64),createNonEnumerableProperty=__webpack_require__(40),redefine=__webpack_require__(52),wellKnownSymbol=__webpack_require__(15),IS_PURE=__webpack_require__(51),Iterators=__webpack_require__(74),IteratorsCore=__webpack_require__(163),IteratorPrototype=IteratorsCore.IteratorPrototype,BUGGY_SAFARI_ITERATORS=IteratorsCore.BUGGY_SAFARI_ITERATORS,ITERATOR=wellKnownSymbol("iterator"),returnThis=function(){return this};module.exports=function(Iterable,NAME,IteratorConstructor,next,DEFAULT,IS_SET,FORCED){createIteratorConstructor(IteratorConstructor,NAME,next);var CurrentIteratorPrototype,methods,KEY,getIterationMethod=function(KIND){if(KIND===DEFAULT&&defaultIterator)return defaultIterator;if(!BUGGY_SAFARI_ITERATORS&&KIND in IterablePrototype)return IterablePrototype[KIND];switch(KIND){case"keys":case"values":case"entries":return function(){return new IteratorConstructor(this,KIND)}}return function(){return new IteratorConstructor(this)}},TO_STRING_TAG=NAME+" Iterator",INCORRECT_VALUES_NAME=!1,IterablePrototype=Iterable.prototype,nativeIterator=IterablePrototype[ITERATOR]||IterablePrototype["@@iterator"]||DEFAULT&&IterablePrototype[DEFAULT],defaultIterator=!BUGGY_SAFARI_ITERATORS&&nativeIterator||getIterationMethod(DEFAULT),anyNativeIterator="Array"==NAME&&IterablePrototype.entries||nativeIterator;if(anyNativeIterator&&(CurrentIteratorPrototype=getPrototypeOf(anyNativeIterator.call(new Iterable)),IteratorPrototype!==Object.prototype&&CurrentIteratorPrototype.next&&(IS_PURE||getPrototypeOf(CurrentIteratorPrototype)===IteratorPrototype||(setPrototypeOf?setPrototypeOf(CurrentIteratorPrototype,IteratorPrototype):"function"!=typeof CurrentIteratorPrototype[ITERATOR]&&createNonEnumerableProperty(CurrentIteratorPrototype,ITERATOR,returnThis)),setToStringTag(CurrentIteratorPrototype,TO_STRING_TAG,!0,!0),IS_PURE&&(Iterators[TO_STRING_TAG]=returnThis))),"values"==DEFAULT&&nativeIterator&&"values"!==nativeIterator.name&&(INCORRECT_VALUES_NAME=!0,defaultIterator=function(){return nativeIterator.call(this)}),IS_PURE&&!FORCED||IterablePrototype[ITERATOR]===defaultIterator||createNonEnumerableProperty(IterablePrototype,ITERATOR,defaultIterator),Iterators[NAME]=defaultIterator,DEFAULT)if(methods={values:getIterationMethod("values"),keys:IS_SET?defaultIterator:getIterationMethod("keys"),entries:getIterationMethod("entries")},FORCED)for(KEY in methods)(BUGGY_SAFARI_ITERATORS||INCORRECT_VALUES_NAME||!(KEY in IterablePrototype))&&redefine(IterablePrototype,KEY,methods[KEY]);else $({target:NAME,proto:!0,forced:BUGGY_SAFARI_ITERATORS||INCORRECT_VALUES_NAME},methods);return methods}},function(module,exports,__webpack_require__){var has=__webpack_require__(22),ownKeys=__webpack_require__(115),getOwnPropertyDescriptorModule=__webpack_require__(31),definePropertyModule=__webpack_require__(21);module.exports=function(target,source){for(var keys=ownKeys(source),defineProperty=definePropertyModule.f,getOwnPropertyDescriptor=getOwnPropertyDescriptorModule.f,i=0;i<keys.length;i++){var key=keys[i];has(target,key)||defineProperty(target,key,getOwnPropertyDescriptor(source,key))}}},function(module,exports,__webpack_require__){var has=__webpack_require__(22),toIndexedObject=__webpack_require__(32),indexOf=__webpack_require__(117).indexOf,hiddenKeys=__webpack_require__(69);module.exports=function(object,names){var key,O=toIndexedObject(object),i=0,result=[];for(key in O)!has(hiddenKeys,key)&&has(O,key)&&result.push(key);for(;names.length>i;)has(O,key=names[i++])&&(~indexOf(result,key)||result.push(key));return result}},function(module,exports,__webpack_require__){var fails=__webpack_require__(7),replacement=/#|\.prototype\./,isForced=function(feature,detection){var value=data[normalize(feature)];return value==POLYFILL||value!=NATIVE&&("function"==typeof detection?fails(detection):!!detection)},normalize=isForced.normalize=function(string){return String(string).replace(replacement,".").toLowerCase()},data=isForced.data={},NATIVE=isForced.NATIVE="N",POLYFILL=isForced.POLYFILL="P";module.exports=isForced},function(module,exports,__webpack_require__){"use strict";var IteratorPrototype,PrototypeOfArrayIteratorPrototype,arrayIterator,getPrototypeOf=__webpack_require__(41),createNonEnumerableProperty=__webpack_require__(40),has=__webpack_require__(22),wellKnownSymbol=__webpack_require__(15),IS_PURE=__webpack_require__(51),ITERATOR=wellKnownSymbol("iterator"),BUGGY_SAFARI_ITERATORS=!1;[].keys&&("next"in(arrayIterator=[].keys())?(PrototypeOfArrayIteratorPrototype=getPrototypeOf(getPrototypeOf(arrayIterator)))!==Object.prototype&&(IteratorPrototype=PrototypeOfArrayIteratorPrototype):BUGGY_SAFARI_ITERATORS=!0),null==IteratorPrototype&&(IteratorPrototype={}),IS_PURE||has(IteratorPrototype,ITERATOR)||createNonEnumerableProperty(IteratorPrototype,ITERATOR,(function(){return this})),module.exports={IteratorPrototype:IteratorPrototype,BUGGY_SAFARI_ITERATORS:BUGGY_SAFARI_ITERATORS}},function(module,exports,__webpack_require__){var NATIVE_SYMBOL=__webpack_require__(121);module.exports=NATIVE_SYMBOL&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(module,exports,__webpack_require__){var DESCRIPTORS=__webpack_require__(10),definePropertyModule=__webpack_require__(21),anObject=__webpack_require__(13),objectKeys=__webpack_require__(73);module.exports=DESCRIPTORS?Object.defineProperties:function(O,Properties){anObject(O);for(var key,keys=objectKeys(Properties),length=keys.length,index=0;length>index;)definePropertyModule.f(O,key=keys[index++],Properties[key]);return O}},function(module,exports,__webpack_require__){var getBuiltIn=__webpack_require__(34);module.exports=getBuiltIn("document","documentElement")},function(module,exports,__webpack_require__){var isObject=__webpack_require__(9);module.exports=function(it){if(!isObject(it)&&null!==it)throw TypeError("Can't set "+String(it)+" as a prototype");return it}},function(module,exports,__webpack_require__){var anObject=__webpack_require__(13);module.exports=function(iterator,fn,value,ENTRIES){try{return ENTRIES?fn(anObject(value)[0],value[1]):fn(value)}catch(error){var returnMethod=iterator.return;throw void 0!==returnMethod&&anObject(returnMethod.call(iterator)),error}}},function(module,exports,__webpack_require__){var wellKnownSymbol=__webpack_require__(15),Iterators=__webpack_require__(74),ITERATOR=wellKnownSymbol("iterator"),ArrayPrototype=Array.prototype;module.exports=function(it){return void 0!==it&&(Iterators.Array===it||ArrayPrototype[ITERATOR]===it)}},function(module,exports,__webpack_require__){var classof=__webpack_require__(171),Iterators=__webpack_require__(74),ITERATOR=__webpack_require__(15)("iterator");module.exports=function(it){if(null!=it)return it[ITERATOR]||it["@@iterator"]||Iterators[classof(it)]}},function(module,exports,__webpack_require__){var TO_STRING_TAG_SUPPORT=__webpack_require__(123),classofRaw=__webpack_require__(63),TO_STRING_TAG=__webpack_require__(15)("toStringTag"),CORRECT_ARGUMENTS="Arguments"==classofRaw(function(){return arguments}());module.exports=TO_STRING_TAG_SUPPORT?classofRaw:function(it){var O,tag,result;return void 0===it?"Undefined":null===it?"Null":"string"==typeof(tag=function(it,key){try{return it[key]}catch(error){}}(O=Object(it),TO_STRING_TAG))?tag:CORRECT_ARGUMENTS?classofRaw(O):"Object"==(result=classofRaw(O))&&"function"==typeof O.callee?"Arguments":result}},function(module,exports,__webpack_require__){var ITERATOR=__webpack_require__(15)("iterator"),SAFE_CLOSING=!1;try{var called=0,iteratorWithReturn={next:function(){return{done:!!called++}},return:function(){SAFE_CLOSING=!0}};iteratorWithReturn[ITERATOR]=function(){return this},Array.from(iteratorWithReturn,(function(){throw 2}))}catch(error){}module.exports=function(exec,SKIP_CLOSING){if(!SKIP_CLOSING&&!SAFE_CLOSING)return!1;var ITERATION_SUPPORT=!1;try{var object={};object[ITERATOR]=function(){return{next:function(){return{done:ITERATION_SUPPORT=!0}}}},exec(object)}catch(error){}return ITERATION_SUPPORT}},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(4),fails=__webpack_require__(7),isArray=__webpack_require__(55),isObject=__webpack_require__(9),toObject=__webpack_require__(14),toLength=__webpack_require__(24),createProperty=__webpack_require__(54),arraySpeciesCreate=__webpack_require__(76),arrayMethodHasSpeciesSupport=__webpack_require__(77),wellKnownSymbol=__webpack_require__(15),V8_VERSION=__webpack_require__(124),IS_CONCAT_SPREADABLE=wellKnownSymbol("isConcatSpreadable"),IS_CONCAT_SPREADABLE_SUPPORT=V8_VERSION>=51||!fails((function(){var array=[];return array[IS_CONCAT_SPREADABLE]=!1,array.concat()[0]!==array})),SPECIES_SUPPORT=arrayMethodHasSpeciesSupport("concat"),isConcatSpreadable=function(O){if(!isObject(O))return!1;var spreadable=O[IS_CONCAT_SPREADABLE];return void 0!==spreadable?!!spreadable:isArray(O)};$({target:"Array",proto:!0,forced:!IS_CONCAT_SPREADABLE_SUPPORT||!SPECIES_SUPPORT},{concat:function(arg){var i,k,length,len,E,O=toObject(this),A=arraySpeciesCreate(O,0),n=0;for(i=-1,length=arguments.length;i<length;i++)if(isConcatSpreadable(E=-1===i?O:arguments[i])){if(n+(len=toLength(E.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(k=0;k<len;k++,n++)k in E&&createProperty(A,n,E[k])}else{if(n>=9007199254740991)throw TypeError("Maximum allowed index exceeded");createProperty(A,n++,E)}return A.length=n,A}})},function(module,exports,__webpack_require__){var getBuiltIn=__webpack_require__(34);module.exports=getBuiltIn("navigator","userAgent")||""},function(module,exports,__webpack_require__){"use strict";var isArray=__webpack_require__(55),toLength=__webpack_require__(24),bind=__webpack_require__(75),flattenIntoArray=function(target,original,source,sourceLen,start,depth,mapper,thisArg){for(var element,targetIndex=start,sourceIndex=0,mapFn=!!mapper&&bind(mapper,thisArg,3);sourceIndex<sourceLen;){if(sourceIndex in source){if(element=mapFn?mapFn(source[sourceIndex],sourceIndex,original):source[sourceIndex],depth>0&&isArray(element))targetIndex=flattenIntoArray(target,original,element,toLength(element.length),targetIndex,depth-1)-1;else{if(targetIndex>=9007199254740991)throw TypeError("Exceed the acceptable array length");target[targetIndex]=element}targetIndex++}sourceIndex++}return targetIndex};module.exports=flattenIntoArray},function(module,exports,__webpack_require__){"use strict";var toIndexedObject=__webpack_require__(32),addToUnscopables=__webpack_require__(42),Iterators=__webpack_require__(74),InternalStateModule=__webpack_require__(68),defineIterator=__webpack_require__(159),setInternalState=InternalStateModule.set,getInternalState=InternalStateModule.getterFor("Array Iterator");module.exports=defineIterator(Array,"Array",(function(iterated,kind){setInternalState(this,{type:"Array Iterator",target:toIndexedObject(iterated),index:0,kind:kind})}),(function(){var state=getInternalState(this),target=state.target,kind=state.kind,index=state.index++;return!target||index>=target.length?(state.target=void 0,{value:void 0,done:!0}):"keys"==kind?{value:index,done:!1}:"values"==kind?{value:target[index],done:!1}:{value:[index,target[index]],done:!1}}),"values"),Iterators.Arguments=Iterators.Array,addToUnscopables("keys"),addToUnscopables("values"),addToUnscopables("entries")},function(module,exports,__webpack_require__){var aFunction=__webpack_require__(28),toObject=__webpack_require__(14),IndexedObject=__webpack_require__(70),toLength=__webpack_require__(24),createMethod=function(IS_RIGHT){return function(that,callbackfn,argumentsLength,memo){aFunction(callbackfn);var O=toObject(that),self=IndexedObject(O),length=toLength(O.length),index=IS_RIGHT?length-1:0,i=IS_RIGHT?-1:1;if(argumentsLength<2)for(;;){if(index in self){memo=self[index],index+=i;break}if(index+=i,IS_RIGHT?index<0:length<=index)throw TypeError("Reduce of empty array with no initial value")}for(;IS_RIGHT?index>=0:length>index;index+=i)index in self&&(memo=callbackfn(memo,self[index],index,O));return memo}};module.exports={left:createMethod(!1),right:createMethod(!0)}},function(module,exports,__webpack_require__){"use strict";var getBuiltIn=__webpack_require__(34),definePropertyModule=__webpack_require__(21),wellKnownSymbol=__webpack_require__(15),DESCRIPTORS=__webpack_require__(10),SPECIES=wellKnownSymbol("species");module.exports=function(CONSTRUCTOR_NAME){var Constructor=getBuiltIn(CONSTRUCTOR_NAME),defineProperty=definePropertyModule.f;DESCRIPTORS&&Constructor&&!Constructor[SPECIES]&&defineProperty(Constructor,SPECIES,{configurable:!0,get:function(){return this}})}},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(4),global=__webpack_require__(12),getBuiltIn=__webpack_require__(34),IS_PURE=__webpack_require__(51),DESCRIPTORS=__webpack_require__(10),NATIVE_SYMBOL=__webpack_require__(121),USE_SYMBOL_AS_UID=__webpack_require__(164),fails=__webpack_require__(7),has=__webpack_require__(22),isArray=__webpack_require__(55),isObject=__webpack_require__(9),anObject=__webpack_require__(13),toObject=__webpack_require__(14),toIndexedObject=__webpack_require__(32),toPrimitive=__webpack_require__(50),createPropertyDescriptor=__webpack_require__(62),nativeObjectCreate=__webpack_require__(72),objectKeys=__webpack_require__(73),getOwnPropertyNamesModule=__webpack_require__(116),getOwnPropertyNamesExternal=__webpack_require__(180),getOwnPropertySymbolsModule=__webpack_require__(119),getOwnPropertyDescriptorModule=__webpack_require__(31),definePropertyModule=__webpack_require__(21),propertyIsEnumerableModule=__webpack_require__(91),createNonEnumerableProperty=__webpack_require__(40),redefine=__webpack_require__(52),shared=__webpack_require__(114),sharedKey=__webpack_require__(89),hiddenKeys=__webpack_require__(69),uid=__webpack_require__(90),wellKnownSymbol=__webpack_require__(15),wrappedWellKnownSymbolModule=__webpack_require__(181),defineWellKnownSymbol=__webpack_require__(26),setToStringTag=__webpack_require__(64),InternalStateModule=__webpack_require__(68),$forEach=__webpack_require__(43).forEach,HIDDEN=sharedKey("hidden"),TO_PRIMITIVE=wellKnownSymbol("toPrimitive"),setInternalState=InternalStateModule.set,getInternalState=InternalStateModule.getterFor("Symbol"),ObjectPrototype=Object.prototype,$Symbol=global.Symbol,$stringify=getBuiltIn("JSON","stringify"),nativeGetOwnPropertyDescriptor=getOwnPropertyDescriptorModule.f,nativeDefineProperty=definePropertyModule.f,nativeGetOwnPropertyNames=getOwnPropertyNamesExternal.f,nativePropertyIsEnumerable=propertyIsEnumerableModule.f,AllSymbols=shared("symbols"),ObjectPrototypeSymbols=shared("op-symbols"),StringToSymbolRegistry=shared("string-to-symbol-registry"),SymbolToStringRegistry=shared("symbol-to-string-registry"),WellKnownSymbolsStore=shared("wks"),QObject=global.QObject,USE_SETTER=!QObject||!QObject.prototype||!QObject.prototype.findChild,setSymbolDescriptor=DESCRIPTORS&&fails((function(){return 7!=nativeObjectCreate(nativeDefineProperty({},"a",{get:function(){return nativeDefineProperty(this,"a",{value:7}).a}})).a}))?function(O,P,Attributes){var ObjectPrototypeDescriptor=nativeGetOwnPropertyDescriptor(ObjectPrototype,P);ObjectPrototypeDescriptor&&delete ObjectPrototype[P],nativeDefineProperty(O,P,Attributes),ObjectPrototypeDescriptor&&O!==ObjectPrototype&&nativeDefineProperty(ObjectPrototype,P,ObjectPrototypeDescriptor)}:nativeDefineProperty,wrap=function(tag,description){var symbol=AllSymbols[tag]=nativeObjectCreate($Symbol.prototype);return setInternalState(symbol,{type:"Symbol",tag:tag,description:description}),DESCRIPTORS||(symbol.description=description),symbol},isSymbol=USE_SYMBOL_AS_UID?function(it){return"symbol"==typeof it}:function(it){return Object(it)instanceof $Symbol},$defineProperty=function(O,P,Attributes){O===ObjectPrototype&&$defineProperty(ObjectPrototypeSymbols,P,Attributes),anObject(O);var key=toPrimitive(P,!0);return anObject(Attributes),has(AllSymbols,key)?(Attributes.enumerable?(has(O,HIDDEN)&&O[HIDDEN][key]&&(O[HIDDEN][key]=!1),Attributes=nativeObjectCreate(Attributes,{enumerable:createPropertyDescriptor(0,!1)})):(has(O,HIDDEN)||nativeDefineProperty(O,HIDDEN,createPropertyDescriptor(1,{})),O[HIDDEN][key]=!0),setSymbolDescriptor(O,key,Attributes)):nativeDefineProperty(O,key,Attributes)},$defineProperties=function(O,Properties){anObject(O);var properties=toIndexedObject(Properties),keys=objectKeys(properties).concat($getOwnPropertySymbols(properties));return $forEach(keys,(function(key){DESCRIPTORS&&!$propertyIsEnumerable.call(properties,key)||$defineProperty(O,key,properties[key])})),O},$propertyIsEnumerable=function(V){var P=toPrimitive(V,!0),enumerable=nativePropertyIsEnumerable.call(this,P);return!(this===ObjectPrototype&&has(AllSymbols,P)&&!has(ObjectPrototypeSymbols,P))&&(!(enumerable||!has(this,P)||!has(AllSymbols,P)||has(this,HIDDEN)&&this[HIDDEN][P])||enumerable)},$getOwnPropertyDescriptor=function(O,P){var it=toIndexedObject(O),key=toPrimitive(P,!0);if(it!==ObjectPrototype||!has(AllSymbols,key)||has(ObjectPrototypeSymbols,key)){var descriptor=nativeGetOwnPropertyDescriptor(it,key);return!descriptor||!has(AllSymbols,key)||has(it,HIDDEN)&&it[HIDDEN][key]||(descriptor.enumerable=!0),descriptor}},$getOwnPropertyNames=function(O){var names=nativeGetOwnPropertyNames(toIndexedObject(O)),result=[];return $forEach(names,(function(key){has(AllSymbols,key)||has(hiddenKeys,key)||result.push(key)})),result},$getOwnPropertySymbols=function(O){var IS_OBJECT_PROTOTYPE=O===ObjectPrototype,names=nativeGetOwnPropertyNames(IS_OBJECT_PROTOTYPE?ObjectPrototypeSymbols:toIndexedObject(O)),result=[];return $forEach(names,(function(key){!has(AllSymbols,key)||IS_OBJECT_PROTOTYPE&&!has(ObjectPrototype,key)||result.push(AllSymbols[key])})),result};(NATIVE_SYMBOL||(redefine(($Symbol=function(){if(this instanceof $Symbol)throw TypeError("Symbol is not a constructor");var description=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,tag=uid(description),setter=function(value){this===ObjectPrototype&&setter.call(ObjectPrototypeSymbols,value),has(this,HIDDEN)&&has(this[HIDDEN],tag)&&(this[HIDDEN][tag]=!1),setSymbolDescriptor(this,tag,createPropertyDescriptor(1,value))};return DESCRIPTORS&&USE_SETTER&&setSymbolDescriptor(ObjectPrototype,tag,{configurable:!0,set:setter}),wrap(tag,description)}).prototype,"toString",(function(){return getInternalState(this).tag})),redefine($Symbol,"withoutSetter",(function(description){return wrap(uid(description),description)})),propertyIsEnumerableModule.f=$propertyIsEnumerable,definePropertyModule.f=$defineProperty,getOwnPropertyDescriptorModule.f=$getOwnPropertyDescriptor,getOwnPropertyNamesModule.f=getOwnPropertyNamesExternal.f=$getOwnPropertyNames,getOwnPropertySymbolsModule.f=$getOwnPropertySymbols,wrappedWellKnownSymbolModule.f=function(name){return wrap(wellKnownSymbol(name),name)},DESCRIPTORS&&(nativeDefineProperty($Symbol.prototype,"description",{configurable:!0,get:function(){return getInternalState(this).description}}),IS_PURE||redefine(ObjectPrototype,"propertyIsEnumerable",$propertyIsEnumerable,{unsafe:!0}))),$({global:!0,wrap:!0,forced:!NATIVE_SYMBOL,sham:!NATIVE_SYMBOL},{Symbol:$Symbol}),$forEach(objectKeys(WellKnownSymbolsStore),(function(name){defineWellKnownSymbol(name)})),$({target:"Symbol",stat:!0,forced:!NATIVE_SYMBOL},{for:function(key){var string=String(key);if(has(StringToSymbolRegistry,string))return StringToSymbolRegistry[string];var symbol=$Symbol(string);return StringToSymbolRegistry[string]=symbol,SymbolToStringRegistry[symbol]=string,symbol},keyFor:function(sym){if(!isSymbol(sym))throw TypeError(sym+" is not a symbol");if(has(SymbolToStringRegistry,sym))return SymbolToStringRegistry[sym]},useSetter:function(){USE_SETTER=!0},useSimple:function(){USE_SETTER=!1}}),$({target:"Object",stat:!0,forced:!NATIVE_SYMBOL,sham:!DESCRIPTORS},{create:function(O,Properties){return void 0===Properties?nativeObjectCreate(O):$defineProperties(nativeObjectCreate(O),Properties)},defineProperty:$defineProperty,defineProperties:$defineProperties,getOwnPropertyDescriptor:$getOwnPropertyDescriptor}),$({target:"Object",stat:!0,forced:!NATIVE_SYMBOL},{getOwnPropertyNames:$getOwnPropertyNames,getOwnPropertySymbols:$getOwnPropertySymbols}),$({target:"Object",stat:!0,forced:fails((function(){getOwnPropertySymbolsModule.f(1)}))},{getOwnPropertySymbols:function(it){return getOwnPropertySymbolsModule.f(toObject(it))}}),$stringify)&&$({target:"JSON",stat:!0,forced:!NATIVE_SYMBOL||fails((function(){var symbol=$Symbol();return"[null]"!=$stringify([symbol])||"{}"!=$stringify({a:symbol})||"{}"!=$stringify(Object(symbol))}))},{stringify:function(it,replacer,space){for(var $replacer,args=[it],index=1;arguments.length>index;)args.push(arguments[index++]);if($replacer=replacer,(isObject(replacer)||void 0!==it)&&!isSymbol(it))return isArray(replacer)||(replacer=function(key,value){if("function"==typeof $replacer&&(value=$replacer.call(this,key,value)),!isSymbol(value))return value}),args[1]=replacer,$stringify.apply(null,args)}});$Symbol.prototype[TO_PRIMITIVE]||createNonEnumerableProperty($Symbol.prototype,TO_PRIMITIVE,$Symbol.prototype.valueOf),setToStringTag($Symbol,"Symbol"),hiddenKeys[HIDDEN]=!0},function(module,exports,__webpack_require__){var toIndexedObject=__webpack_require__(32),nativeGetOwnPropertyNames=__webpack_require__(116).f,toString={}.toString,windowNames="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];module.exports.f=function(it){return windowNames&&"[object Window]"==toString.call(it)?function(it){try{return nativeGetOwnPropertyNames(it)}catch(error){return windowNames.slice()}}(it):nativeGetOwnPropertyNames(toIndexedObject(it))}},function(module,exports,__webpack_require__){var wellKnownSymbol=__webpack_require__(15);exports.f=wellKnownSymbol},function(module,exports,__webpack_require__){var DESCRIPTORS=__webpack_require__(10),objectKeys=__webpack_require__(73),toIndexedObject=__webpack_require__(32),propertyIsEnumerable=__webpack_require__(91).f,createMethod=function(TO_ENTRIES){return function(it){for(var key,O=toIndexedObject(it),keys=objectKeys(O),length=keys.length,i=0,result=[];length>i;)key=keys[i++],DESCRIPTORS&&!propertyIsEnumerable.call(O,key)||result.push(TO_ENTRIES?[key,O[key]]:O[key]);return result}};module.exports={entries:createMethod(!0),values:createMethod(!1)}},function(module,exports,__webpack_require__){__webpack_require__(64)(Math,"Math",!0)},function(module,exports,__webpack_require__){var global=__webpack_require__(12);__webpack_require__(64)(global.JSON,"JSON",!0)},function(module,exports,__webpack_require__){var global=__webpack_require__(12);module.exports=global.Promise},function(module,exports,__webpack_require__){var anObject=__webpack_require__(13),aFunction=__webpack_require__(28),SPECIES=__webpack_require__(15)("species");module.exports=function(O,defaultConstructor){var S,C=anObject(O).constructor;return void 0===C||null==(S=anObject(C)[SPECIES])?defaultConstructor:aFunction(S)}},function(module,exports,__webpack_require__){var defer,channel,port,global=__webpack_require__(12),fails=__webpack_require__(7),classof=__webpack_require__(63),bind=__webpack_require__(75),html=__webpack_require__(166),createElement=__webpack_require__(113),IS_IOS=__webpack_require__(188),location=global.location,set=global.setImmediate,clear=global.clearImmediate,process=global.process,MessageChannel=global.MessageChannel,Dispatch=global.Dispatch,counter=0,queue={},run=function(id){if(queue.hasOwnProperty(id)){var fn=queue[id];delete queue[id],fn()}},runner=function(id){return function(){run(id)}},listener=function(event){run(event.data)},post=function(id){global.postMessage(id+"",location.protocol+"//"+location.host)};set&&clear||(set=function(fn){for(var args=[],i=1;arguments.length>i;)args.push(arguments[i++]);return queue[++counter]=function(){("function"==typeof fn?fn:Function(fn)).apply(void 0,args)},defer(counter),counter},clear=function(id){delete queue[id]},"process"==classof(process)?defer=function(id){process.nextTick(runner(id))}:Dispatch&&Dispatch.now?defer=function(id){Dispatch.now(runner(id))}:MessageChannel&&!IS_IOS?(port=(channel=new MessageChannel).port2,channel.port1.onmessage=listener,defer=bind(port.postMessage,port,1)):!global.addEventListener||"function"!=typeof postMessage||global.importScripts||fails(post)||"file:"===location.protocol?defer="onreadystatechange"in createElement("script")?function(id){html.appendChild(createElement("script")).onreadystatechange=function(){html.removeChild(this),run(id)}}:function(id){setTimeout(runner(id),0)}:(defer=post,global.addEventListener("message",listener,!1))),module.exports={set:set,clear:clear}},function(module,exports,__webpack_require__){var userAgent=__webpack_require__(174);module.exports=/(iphone|ipod|ipad).*applewebkit/i.test(userAgent)},function(module,exports,__webpack_require__){var anObject=__webpack_require__(13),isObject=__webpack_require__(9),newPromiseCapability=__webpack_require__(128);module.exports=function(C,x){if(anObject(C),isObject(x)&&x.constructor===C)return x;var promiseCapability=newPromiseCapability.f(C);return(0,promiseCapability.resolve)(x),promiseCapability.promise}},function(module,exports){module.exports=function(exec){try{return{error:!1,value:exec()}}catch(error){return{error:!0,value:error}}}},function(module,exports,__webpack_require__){"use strict";var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(val){if(null==val)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(val)}module.exports=function(){try{if(!Object.assign)return!1;var test1=new String("abc");if(test1[5]="de","5"===Object.getOwnPropertyNames(test1)[0])return!1;for(var test2={},i=0;i<10;i++)test2["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(test2).map((function(n){return test2[n]})).join(""))return!1;var test3={};return"abcdefghijklmnopqrst".split("").forEach((function(letter){test3[letter]=letter})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},test3)).join("")}catch(err){return!1}}()?Object.assign:function(target,source){for(var from,symbols,to=toObject(target),s=1;s<arguments.length;s++){for(var key in from=Object(arguments[s]))hasOwnProperty.call(from,key)&&(to[key]=from[key]);if(getOwnPropertySymbols){symbols=getOwnPropertySymbols(from);for(var i=0;i<symbols.length;i++)propIsEnumerable.call(from,symbols[i])&&(to[symbols[i]]=from[symbols[i]])}}return to}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var METADATA_KEY=__webpack_require__(18),MetadataReader=function(){function MetadataReader(){}return MetadataReader.prototype.getConstructorMetadata=function(constructorFunc){return{compilerGeneratedMetadata:Reflect.getMetadata(METADATA_KEY.PARAM_TYPES,constructorFunc),userGeneratedMetadata:Reflect.getMetadata(METADATA_KEY.TAGGED,constructorFunc)||{}}},MetadataReader.prototype.getPropertiesMetadata=function(constructorFunc){return Reflect.getMetadata(METADATA_KEY.TAGGED_PROP,constructorFunc)||[]},MetadataReader}();exports.MetadataReader=MetadataReader},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ERROR_MSGS=__webpack_require__(29);exports.isStackOverflowExeption=function(error){return error instanceof RangeError||error.message===ERROR_MSGS.STACK_OVERFLOW}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var error_msgs_1=__webpack_require__(29),METADATA_KEY=__webpack_require__(18),metadata_1=__webpack_require__(33),decorator_utils_1=__webpack_require__(44),LazyServiceIdentifer=function(){function LazyServiceIdentifer(cb){this._cb=cb}return LazyServiceIdentifer.prototype.unwrap=function(){return this._cb()},LazyServiceIdentifer}();exports.LazyServiceIdentifer=LazyServiceIdentifer,exports.inject=function(serviceIdentifier){return function(target,targetKey,index){if(void 0===serviceIdentifier)throw new Error(error_msgs_1.UNDEFINED_INJECT_ANNOTATION(target.name));var metadata=new metadata_1.Metadata(METADATA_KEY.INJECT_TAG,serviceIdentifier);"number"==typeof index?decorator_utils_1.tagParameter(target,targetKey,index,metadata):decorator_utils_1.tagProperty(target,targetKey,metadata)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var METADATA_KEY=__webpack_require__(18),id_1=__webpack_require__(56),metadata_1=__webpack_require__(33),queryable_string_1=__webpack_require__(436),Target=function(){function Target(type,name,serviceIdentifier,namedOrTagged){this.id=id_1.id(),this.type=type,this.serviceIdentifier=serviceIdentifier,this.name=new queryable_string_1.QueryableString(name||""),this.metadata=new Array;var metadataItem=null;"string"==typeof namedOrTagged?metadataItem=new metadata_1.Metadata(METADATA_KEY.NAMED_TAG,namedOrTagged):namedOrTagged instanceof metadata_1.Metadata&&(metadataItem=namedOrTagged),null!==metadataItem&&this.metadata.push(metadataItem)}return Target.prototype.hasTag=function(key){for(var _i=0,_a=this.metadata;_i<_a.length;_i++){if(_a[_i].key===key)return!0}return!1},Target.prototype.isArray=function(){return this.hasTag(METADATA_KEY.MULTI_INJECT_TAG)},Target.prototype.matchesArray=function(name){return this.matchesTag(METADATA_KEY.MULTI_INJECT_TAG)(name)},Target.prototype.isNamed=function(){return this.hasTag(METADATA_KEY.NAMED_TAG)},Target.prototype.isTagged=function(){return this.metadata.some((function(m){return m.key!==METADATA_KEY.INJECT_TAG&&m.key!==METADATA_KEY.MULTI_INJECT_TAG&&m.key!==METADATA_KEY.NAME_TAG&&m.key!==METADATA_KEY.UNMANAGED_TAG&&m.key!==METADATA_KEY.NAMED_TAG}))},Target.prototype.isOptional=function(){return this.matchesTag(METADATA_KEY.OPTIONAL_TAG)(!0)},Target.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(m){return m.key===METADATA_KEY.NAMED_TAG}))[0]:null},Target.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(m){return m.key!==METADATA_KEY.INJECT_TAG&&m.key!==METADATA_KEY.MULTI_INJECT_TAG&&m.key!==METADATA_KEY.NAME_TAG&&m.key!==METADATA_KEY.UNMANAGED_TAG&&m.key!==METADATA_KEY.NAMED_TAG})):null},Target.prototype.matchesNamedTag=function(name){return this.matchesTag(METADATA_KEY.NAMED_TAG)(name)},Target.prototype.matchesTag=function(key){var _this=this;return function(value){for(var _i=0,_a=_this.metadata;_i<_a.length;_i++){var m=_a[_i];if(m.key===key&&m.value===value)return!0}return!1}},Target}();exports.Target=Target},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var binding_on_syntax_1=__webpack_require__(131),binding_when_syntax_1=__webpack_require__(132),BindingWhenOnSyntax=function(){function BindingWhenOnSyntax(binding){this._binding=binding,this._bindingWhenSyntax=new binding_when_syntax_1.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new binding_on_syntax_1.BindingOnSyntax(this._binding)}return BindingWhenOnSyntax.prototype.when=function(constraint){return this._bindingWhenSyntax.when(constraint)},BindingWhenOnSyntax.prototype.whenTargetNamed=function(name){return this._bindingWhenSyntax.whenTargetNamed(name)},BindingWhenOnSyntax.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},BindingWhenOnSyntax.prototype.whenTargetTagged=function(tag,value){return this._bindingWhenSyntax.whenTargetTagged(tag,value)},BindingWhenOnSyntax.prototype.whenInjectedInto=function(parent){return this._bindingWhenSyntax.whenInjectedInto(parent)},BindingWhenOnSyntax.prototype.whenParentNamed=function(name){return this._bindingWhenSyntax.whenParentNamed(name)},BindingWhenOnSyntax.prototype.whenParentTagged=function(tag,value){return this._bindingWhenSyntax.whenParentTagged(tag,value)},BindingWhenOnSyntax.prototype.whenAnyAncestorIs=function(ancestor){return this._bindingWhenSyntax.whenAnyAncestorIs(ancestor)},BindingWhenOnSyntax.prototype.whenNoAncestorIs=function(ancestor){return this._bindingWhenSyntax.whenNoAncestorIs(ancestor)},BindingWhenOnSyntax.prototype.whenAnyAncestorNamed=function(name){return this._bindingWhenSyntax.whenAnyAncestorNamed(name)},BindingWhenOnSyntax.prototype.whenAnyAncestorTagged=function(tag,value){return this._bindingWhenSyntax.whenAnyAncestorTagged(tag,value)},BindingWhenOnSyntax.prototype.whenNoAncestorNamed=function(name){return this._bindingWhenSyntax.whenNoAncestorNamed(name)},BindingWhenOnSyntax.prototype.whenNoAncestorTagged=function(tag,value){return this._bindingWhenSyntax.whenNoAncestorTagged(tag,value)},BindingWhenOnSyntax.prototype.whenAnyAncestorMatches=function(constraint){return this._bindingWhenSyntax.whenAnyAncestorMatches(constraint)},BindingWhenOnSyntax.prototype.whenNoAncestorMatches=function(constraint){return this._bindingWhenSyntax.whenNoAncestorMatches(constraint)},BindingWhenOnSyntax.prototype.onActivation=function(handler){return this._bindingOnSyntax.onActivation(handler)},BindingWhenOnSyntax}();exports.BindingWhenOnSyntax=BindingWhenOnSyntax},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var METADATA_KEY=__webpack_require__(18),metadata_1=__webpack_require__(33),traverseAncerstors=function(request,constraint){var parent=request.parentRequest;return null!==parent&&(!!constraint(parent)||traverseAncerstors(parent,constraint))};exports.traverseAncerstors=traverseAncerstors;var taggedConstraint=function(key){return function(value){var constraint=function(request){return null!==request&&null!==request.target&&request.target.matchesTag(key)(value)};return constraint.metaData=new metadata_1.Metadata(key,value),constraint}};exports.taggedConstraint=taggedConstraint;var namedConstraint=taggedConstraint(METADATA_KEY.NAMED_TAG);exports.namedConstraint=namedConstraint;exports.typeConstraint=function(type){return function(request){var binding=null;if(null!==request){if(binding=request.bindings[0],"string"==typeof type)return binding.serviceIdentifier===type;var constructor=request.bindings[0].implementationType;return type===constructor}return!1}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LightboxBindingHandler=void 0;const ko=__webpack_require__(0);exports.LightboxBindingHandler=class{constructor(lightbox){ko.bindingHandlers.lightbox={init(element,valueAccessor){const configuration=valueAccessor();let lightboxContentUrl=ko.unwrap(configuration.url),lightBoxContendFileName=ko.unwrap(configuration.fileName);const setContentUrl=url=>{lightboxContentUrl=url};ko.isObservable(configuration.url)&&configuration.url.subscribe(setContentUrl),ko.applyBindingsToNode(element,{click:()=>{lightbox.show(lightboxContentUrl,lightBoxContendFileName)}},null)}}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GridBindingHandler=void 0;const ko=__webpack_require__(0),ui_1=__webpack_require__(45),editing_1=__webpack_require__(66);class GridBindingHandler{constructor(viewManager,eventManager,widgetService,gridEditor){ko.bindingHandlers.grid={init(gridElement){gridEditor.attach(gridElement.ownerDocument),ko.utils.domNodeDisposal.addDisposeCallback(gridElement,()=>{gridEditor.detach()})}},ko.virtualElements.allowedBindings.grid=!0,ko.bindingHandlers.draggable={init(element){GridBindingHandler.attachWidgetDragEvents(element,viewManager,eventManager,widgetService)}}}static attachWidgetDragEvents(sourceElement,viewManager,eventManager,widgetService){let placeholderElement;ko.applyBindingsToNode(sourceElement,{dragsource:{sticky:!0,ondragstart:()=>{if(viewManager.mode===ui_1.ViewManagerMode.configure)return;const placeholderWidth=sourceElement.clientWidth-1+"px",placeholderHeight=sourceElement.clientHeight-1+"px",sourceBinding=editing_1.GridHelper.getWidgetBinding(sourceElement),sourceModel=editing_1.GridHelper.getModel(sourceElement),sourceParentBinding=editing_1.GridHelper.getParentWidgetBinding(sourceElement),sourceParentModel=sourceParentBinding.model;return placeholderElement=sourceElement.ownerDocument.createElement("div"),placeholderElement.style.height=placeholderHeight,placeholderElement.style.width=placeholderWidth,placeholderElement.classList.add("dragged-origin"),sourceElement.parentNode.insertBefore(placeholderElement,sourceElement.nextSibling),viewManager.beginDrag({sourceElement:sourceElement,sourceModel:sourceModel,sourceBinding:sourceBinding,sourceParentModel:sourceParentModel,sourceParentBinding:sourceParentBinding}),sourceElement},ondragend:()=>{const dragSession=viewManager.getDragSession(),acceptorElement=dragSession.targetElement,acceptorBinding=dragSession.targetBinding;if(acceptorElement){const parentModel=dragSession.sourceParentModel,model=dragSession.sourceModel;parentModel.widgets.remove(model)}if(acceptorBinding&&acceptorBinding.handler){const widgetHandler=widgetService.getWidgetHandler(acceptorBinding.handler);widgetHandler.canAccept&&widgetHandler.canAccept(dragSession)&&(widgetHandler.onDragDrop?widgetHandler.onDragDrop(dragSession):(dragSession.targetBinding.model.widgets.splice(dragSession.insertIndex,0,dragSession.sourceModel),dragSession.targetBinding.applyChanges(),dragSession.sourceParentBinding.applyChanges()))}placeholderElement.remove(),eventManager.dispatchEvent("virtualDragEnd")},preventDragging:()=>viewManager.mode===ui_1.ViewManagerMode.configure}},null)}}exports.GridBindingHandler=GridBindingHandler},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ViewManagerMode=void 0,function(ViewManagerMode){ViewManagerMode.selecting="selectig",ViewManagerMode.dragging="dragging",ViewManagerMode.selected="selected",ViewManagerMode.configure="configure",ViewManagerMode.pause="pause",ViewManagerMode.preview="preview"}(exports.ViewManagerMode||(exports.ViewManagerMode={}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DraggablesBindingHandler=void 0;const ko=__webpack_require__(0);exports.DraggablesBindingHandler=class{constructor(dragManager){ko.bindingHandlers.dragsource={init(element,valueAccessor){const config=valueAccessor();dragManager.registerDragSource(element,config)}},ko.bindingHandlers.dragtarget={init(element,valueAccessor){const config=valueAccessor();dragManager.registerDragTarget(element,config)}}}}},function(module,exports,__webpack_require__){"use strict";(function(global){var base64=__webpack_require__(502),ieee754=__webpack_require__(503),isArray=__webpack_require__(504);function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(that,length){if(kMaxLength()<length)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(that=new Uint8Array(length)).__proto__=Buffer.prototype:(null===that&&(that=new Buffer(length)),that.length=length),that}function Buffer(arg,encodingOrOffset,length){if(!(Buffer.TYPED_ARRAY_SUPPORT||this instanceof Buffer))return new Buffer(arg,encodingOrOffset,length);if("number"==typeof arg){if("string"==typeof encodingOrOffset)throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,arg)}return from(this,arg,encodingOrOffset,length)}function from(that,value,encodingOrOffset,length){if("number"==typeof value)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&value instanceof ArrayBuffer?function(that,array,byteOffset,length){if(array.byteLength,byteOffset<0||array.byteLength<byteOffset)throw new RangeError("'offset' is out of bounds");if(array.byteLength<byteOffset+(length||0))throw new RangeError("'length' is out of bounds");array=void 0===byteOffset&&void 0===length?new Uint8Array(array):void 0===length?new Uint8Array(array,byteOffset):new Uint8Array(array,byteOffset,length);Buffer.TYPED_ARRAY_SUPPORT?(that=array).__proto__=Buffer.prototype:that=fromArrayLike(that,array);return that}(that,value,encodingOrOffset,length):"string"==typeof value?function(that,string,encoding){"string"==typeof encoding&&""!==encoding||(encoding="utf8");if(!Buffer.isEncoding(encoding))throw new TypeError('"encoding" must be a valid string encoding');var length=0|byteLength(string,encoding),actual=(that=createBuffer(that,length)).write(string,encoding);actual!==length&&(that=that.slice(0,actual));return that}(that,value,encodingOrOffset):function(that,obj){if(Buffer.isBuffer(obj)){var len=0|checked(obj.length);return 0===(that=createBuffer(that,len)).length||obj.copy(that,0,0,len),that}if(obj){if("undefined"!=typeof ArrayBuffer&&obj.buffer instanceof ArrayBuffer||"length"in obj)return"number"!=typeof obj.length||(val=obj.length)!=val?createBuffer(that,0):fromArrayLike(that,obj);if("Buffer"===obj.type&&isArray(obj.data))return fromArrayLike(that,obj.data)}var val;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(that,value)}function assertSize(size){if("number"!=typeof size)throw new TypeError('"size" argument must be a number');if(size<0)throw new RangeError('"size" argument must not be negative')}function allocUnsafe(that,size){if(assertSize(size),that=createBuffer(that,size<0?0:0|checked(size)),!Buffer.TYPED_ARRAY_SUPPORT)for(var i=0;i<size;++i)that[i]=0;return that}function fromArrayLike(that,array){var length=array.length<0?0:0|checked(array.length);that=createBuffer(that,length);for(var i=0;i<length;i+=1)that[i]=255&array[i];return that}function checked(length){if(length>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|length}function byteLength(string,encoding){if(Buffer.isBuffer(string))return string.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(string)||string instanceof ArrayBuffer))return string.byteLength;"string"!=typeof string&&(string=""+string);var len=string.length;if(0===len)return 0;for(var loweredCase=!1;;)switch(encoding){case"ascii":case"latin1":case"binary":return len;case"utf8":case"utf-8":case void 0:return utf8ToBytes(string).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*len;case"hex":return len>>>1;case"base64":return base64ToBytes(string).length;default:if(loweredCase)return utf8ToBytes(string).length;encoding=(""+encoding).toLowerCase(),loweredCase=!0}}function slowToString(encoding,start,end){var loweredCase=!1;if((void 0===start||start<0)&&(start=0),start>this.length)return"";if((void 0===end||end>this.length)&&(end=this.length),end<=0)return"";if((end>>>=0)<=(start>>>=0))return"";for(encoding||(encoding="utf8");;)switch(encoding){case"hex":return hexSlice(this,start,end);case"utf8":case"utf-8":return utf8Slice(this,start,end);case"ascii":return asciiSlice(this,start,end);case"latin1":case"binary":return latin1Slice(this,start,end);case"base64":return base64Slice(this,start,end);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,start,end);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(encoding+"").toLowerCase(),loweredCase=!0}}function swap(b,n,m){var i=b[n];b[n]=b[m],b[m]=i}function bidirectionalIndexOf(buffer,val,byteOffset,encoding,dir){if(0===buffer.length)return-1;if("string"==typeof byteOffset?(encoding=byteOffset,byteOffset=0):byteOffset>2147483647?byteOffset=2147483647:byteOffset<-2147483648&&(byteOffset=-2147483648),byteOffset=+byteOffset,isNaN(byteOffset)&&(byteOffset=dir?0:buffer.length-1),byteOffset<0&&(byteOffset=buffer.length+byteOffset),byteOffset>=buffer.length){if(dir)return-1;byteOffset=buffer.length-1}else if(byteOffset<0){if(!dir)return-1;byteOffset=0}if("string"==typeof val&&(val=Buffer.from(val,encoding)),Buffer.isBuffer(val))return 0===val.length?-1:arrayIndexOf(buffer,val,byteOffset,encoding,dir);if("number"==typeof val)return val&=255,Buffer.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?dir?Uint8Array.prototype.indexOf.call(buffer,val,byteOffset):Uint8Array.prototype.lastIndexOf.call(buffer,val,byteOffset):arrayIndexOf(buffer,[val],byteOffset,encoding,dir);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(arr,val,byteOffset,encoding,dir){var i,indexSize=1,arrLength=arr.length,valLength=val.length;if(void 0!==encoding&&("ucs2"===(encoding=String(encoding).toLowerCase())||"ucs-2"===encoding||"utf16le"===encoding||"utf-16le"===encoding)){if(arr.length<2||val.length<2)return-1;indexSize=2,arrLength/=2,valLength/=2,byteOffset/=2}function read(buf,i){return 1===indexSize?buf[i]:buf.readUInt16BE(i*indexSize)}if(dir){var foundIndex=-1;for(i=byteOffset;i<arrLength;i++)if(read(arr,i)===read(val,-1===foundIndex?0:i-foundIndex)){if(-1===foundIndex&&(foundIndex=i),i-foundIndex+1===valLength)return foundIndex*indexSize}else-1!==foundIndex&&(i-=i-foundIndex),foundIndex=-1}else for(byteOffset+valLength>arrLength&&(byteOffset=arrLength-valLength),i=byteOffset;i>=0;i--){for(var found=!0,j=0;j<valLength;j++)if(read(arr,i+j)!==read(val,j)){found=!1;break}if(found)return i}return-1}function hexWrite(buf,string,offset,length){offset=Number(offset)||0;var remaining=buf.length-offset;length?(length=Number(length))>remaining&&(length=remaining):length=remaining;var strLen=string.length;if(strLen%2!=0)throw new TypeError("Invalid hex string");length>strLen/2&&(length=strLen/2);for(var i=0;i<length;++i){var parsed=parseInt(string.substr(2*i,2),16);if(isNaN(parsed))return i;buf[offset+i]=parsed}return i}function utf8Write(buf,string,offset,length){return blitBuffer(utf8ToBytes(string,buf.length-offset),buf,offset,length)}function asciiWrite(buf,string,offset,length){return blitBuffer(function(str){for(var byteArray=[],i=0;i<str.length;++i)byteArray.push(255&str.charCodeAt(i));return byteArray}(string),buf,offset,length)}function latin1Write(buf,string,offset,length){return asciiWrite(buf,string,offset,length)}function base64Write(buf,string,offset,length){return blitBuffer(base64ToBytes(string),buf,offset,length)}function ucs2Write(buf,string,offset,length){return blitBuffer(function(str,units){for(var c,hi,lo,byteArray=[],i=0;i<str.length&&!((units-=2)<0);++i)hi=(c=str.charCodeAt(i))>>8,lo=c%256,byteArray.push(lo),byteArray.push(hi);return byteArray}(string,buf.length-offset),buf,offset,length)}function base64Slice(buf,start,end){return 0===start&&end===buf.length?base64.fromByteArray(buf):base64.fromByteArray(buf.slice(start,end))}function utf8Slice(buf,start,end){end=Math.min(buf.length,end);for(var res=[],i=start;i<end;){var secondByte,thirdByte,fourthByte,tempCodePoint,firstByte=buf[i],codePoint=null,bytesPerSequence=firstByte>239?4:firstByte>223?3:firstByte>191?2:1;if(i+bytesPerSequence<=end)switch(bytesPerSequence){case 1:firstByte<128&&(codePoint=firstByte);break;case 2:128==(192&(secondByte=buf[i+1]))&&(tempCodePoint=(31&firstByte)<<6|63&secondByte)>127&&(codePoint=tempCodePoint);break;case 3:secondByte=buf[i+1],thirdByte=buf[i+2],128==(192&secondByte)&&128==(192&thirdByte)&&(tempCodePoint=(15&firstByte)<<12|(63&secondByte)<<6|63&thirdByte)>2047&&(tempCodePoint<55296||tempCodePoint>57343)&&(codePoint=tempCodePoint);break;case 4:secondByte=buf[i+1],thirdByte=buf[i+2],fourthByte=buf[i+3],128==(192&secondByte)&&128==(192&thirdByte)&&128==(192&fourthByte)&&(tempCodePoint=(15&firstByte)<<18|(63&secondByte)<<12|(63&thirdByte)<<6|63&fourthByte)>65535&&tempCodePoint<1114112&&(codePoint=tempCodePoint)}null===codePoint?(codePoint=65533,bytesPerSequence=1):codePoint>65535&&(codePoint-=65536,res.push(codePoint>>>10&1023|55296),codePoint=56320|1023&codePoint),res.push(codePoint),i+=bytesPerSequence}return function(codePoints){var len=codePoints.length;if(len<=4096)return String.fromCharCode.apply(String,codePoints);var res="",i=0;for(;i<len;)res+=String.fromCharCode.apply(String,codePoints.slice(i,i+=4096));return res}(res)}exports.Buffer=Buffer,exports.SlowBuffer=function(length){+length!=length&&(length=0);return Buffer.alloc(+length)},exports.INSPECT_MAX_BYTES=50,Buffer.TYPED_ARRAY_SUPPORT=void 0!==global.TYPED_ARRAY_SUPPORT?global.TYPED_ARRAY_SUPPORT:function(){try{var arr=new Uint8Array(1);return arr.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===arr.foo()&&"function"==typeof arr.subarray&&0===arr.subarray(1,1).byteLength}catch(e){return!1}}(),exports.kMaxLength=kMaxLength(),Buffer.poolSize=8192,Buffer._augment=function(arr){return arr.__proto__=Buffer.prototype,arr},Buffer.from=function(value,encodingOrOffset,length){return from(null,value,encodingOrOffset,length)},Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&Buffer[Symbol.species]===Buffer&&Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0})),Buffer.alloc=function(size,fill,encoding){return function(that,size,fill,encoding){return assertSize(size),size<=0?createBuffer(that,size):void 0!==fill?"string"==typeof encoding?createBuffer(that,size).fill(fill,encoding):createBuffer(that,size).fill(fill):createBuffer(that,size)}(null,size,fill,encoding)},Buffer.allocUnsafe=function(size){return allocUnsafe(null,size)},Buffer.allocUnsafeSlow=function(size){return allocUnsafe(null,size)},Buffer.isBuffer=function(b){return!(null==b||!b._isBuffer)},Buffer.compare=function(a,b){if(!Buffer.isBuffer(a)||!Buffer.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var x=a.length,y=b.length,i=0,len=Math.min(x,y);i<len;++i)if(a[i]!==b[i]){x=a[i],y=b[i];break}return x<y?-1:y<x?1:0},Buffer.isEncoding=function(encoding){switch(String(encoding).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(list,length){if(!isArray(list))throw new TypeError('"list" argument must be an Array of Buffers');if(0===list.length)return Buffer.alloc(0);var i;if(void 0===length)for(length=0,i=0;i<list.length;++i)length+=list[i].length;var buffer=Buffer.allocUnsafe(length),pos=0;for(i=0;i<list.length;++i){var buf=list[i];if(!Buffer.isBuffer(buf))throw new TypeError('"list" argument must be an Array of Buffers');buf.copy(buffer,pos),pos+=buf.length}return buffer},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function(){var len=this.length;if(len%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var i=0;i<len;i+=2)swap(this,i,i+1);return this},Buffer.prototype.swap32=function(){var len=this.length;if(len%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var i=0;i<len;i+=4)swap(this,i,i+3),swap(this,i+1,i+2);return this},Buffer.prototype.swap64=function(){var len=this.length;if(len%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var i=0;i<len;i+=8)swap(this,i,i+7),swap(this,i+1,i+6),swap(this,i+2,i+5),swap(this,i+3,i+4);return this},Buffer.prototype.toString=function(){var length=0|this.length;return 0===length?"":0===arguments.length?utf8Slice(this,0,length):slowToString.apply(this,arguments)},Buffer.prototype.equals=function(b){if(!Buffer.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b||0===Buffer.compare(this,b)},Buffer.prototype.inspect=function(){var str="",max=exports.INSPECT_MAX_BYTES;return this.length>0&&(str=this.toString("hex",0,max).match(/.{2}/g).join(" "),this.length>max&&(str+=" ... ")),"<Buffer "+str+">"},Buffer.prototype.compare=function(target,start,end,thisStart,thisEnd){if(!Buffer.isBuffer(target))throw new TypeError("Argument must be a Buffer");if(void 0===start&&(start=0),void 0===end&&(end=target?target.length:0),void 0===thisStart&&(thisStart=0),void 0===thisEnd&&(thisEnd=this.length),start<0||end>target.length||thisStart<0||thisEnd>this.length)throw new RangeError("out of range index");if(thisStart>=thisEnd&&start>=end)return 0;if(thisStart>=thisEnd)return-1;if(start>=end)return 1;if(this===target)return 0;for(var x=(thisEnd>>>=0)-(thisStart>>>=0),y=(end>>>=0)-(start>>>=0),len=Math.min(x,y),thisCopy=this.slice(thisStart,thisEnd),targetCopy=target.slice(start,end),i=0;i<len;++i)if(thisCopy[i]!==targetCopy[i]){x=thisCopy[i],y=targetCopy[i];break}return x<y?-1:y<x?1:0},Buffer.prototype.includes=function(val,byteOffset,encoding){return-1!==this.indexOf(val,byteOffset,encoding)},Buffer.prototype.indexOf=function(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,!0)},Buffer.prototype.lastIndexOf=function(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,!1)},Buffer.prototype.write=function(string,offset,length,encoding){if(void 0===offset)encoding="utf8",length=this.length,offset=0;else if(void 0===length&&"string"==typeof offset)encoding=offset,length=this.length,offset=0;else{if(!isFinite(offset))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");offset|=0,isFinite(length)?(length|=0,void 0===encoding&&(encoding="utf8")):(encoding=length,length=void 0)}var remaining=this.length-offset;if((void 0===length||length>remaining)&&(length=remaining),string.length>0&&(length<0||offset<0)||offset>this.length)throw new RangeError("Attempt to write outside buffer bounds");encoding||(encoding="utf8");for(var loweredCase=!1;;)switch(encoding){case"hex":return hexWrite(this,string,offset,length);case"utf8":case"utf-8":return utf8Write(this,string,offset,length);case"ascii":return asciiWrite(this,string,offset,length);case"latin1":case"binary":return latin1Write(this,string,offset,length);case"base64":return base64Write(this,string,offset,length);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,string,offset,length);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(""+encoding).toLowerCase(),loweredCase=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function asciiSlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i)ret+=String.fromCharCode(127&buf[i]);return ret}function latin1Slice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i)ret+=String.fromCharCode(buf[i]);return ret}function hexSlice(buf,start,end){var len=buf.length;(!start||start<0)&&(start=0),(!end||end<0||end>len)&&(end=len);for(var out="",i=start;i<end;++i)out+=toHex(buf[i]);return out}function utf16leSlice(buf,start,end){for(var bytes=buf.slice(start,end),res="",i=0;i<bytes.length;i+=2)res+=String.fromCharCode(bytes[i]+256*bytes[i+1]);return res}function checkOffset(offset,ext,length){if(offset%1!=0||offset<0)throw new RangeError("offset is not uint");if(offset+ext>length)throw new RangeError("Trying to access beyond buffer length")}function checkInt(buf,value,offset,ext,max,min){if(!Buffer.isBuffer(buf))throw new TypeError('"buffer" argument must be a Buffer instance');if(value>max||value<min)throw new RangeError('"value" argument is out of bounds');if(offset+ext>buf.length)throw new RangeError("Index out of range")}function objectWriteUInt16(buf,value,offset,littleEndian){value<0&&(value=65535+value+1);for(var i=0,j=Math.min(buf.length-offset,2);i<j;++i)buf[offset+i]=(value&255<<8*(littleEndian?i:1-i))>>>8*(littleEndian?i:1-i)}function objectWriteUInt32(buf,value,offset,littleEndian){value<0&&(value=4294967295+value+1);for(var i=0,j=Math.min(buf.length-offset,4);i<j;++i)buf[offset+i]=value>>>8*(littleEndian?i:3-i)&255}function checkIEEE754(buf,value,offset,ext,max,min){if(offset+ext>buf.length)throw new RangeError("Index out of range");if(offset<0)throw new RangeError("Index out of range")}function writeFloat(buf,value,offset,littleEndian,noAssert){return noAssert||checkIEEE754(buf,0,offset,4),ieee754.write(buf,value,offset,littleEndian,23,4),offset+4}function writeDouble(buf,value,offset,littleEndian,noAssert){return noAssert||checkIEEE754(buf,0,offset,8),ieee754.write(buf,value,offset,littleEndian,52,8),offset+8}Buffer.prototype.slice=function(start,end){var newBuf,len=this.length;if((start=~~start)<0?(start+=len)<0&&(start=0):start>len&&(start=len),(end=void 0===end?len:~~end)<0?(end+=len)<0&&(end=0):end>len&&(end=len),end<start&&(end=start),Buffer.TYPED_ARRAY_SUPPORT)(newBuf=this.subarray(start,end)).__proto__=Buffer.prototype;else{var sliceLen=end-start;newBuf=new Buffer(sliceLen,void 0);for(var i=0;i<sliceLen;++i)newBuf[i]=this[i+start]}return newBuf},Buffer.prototype.readUIntLE=function(offset,byteLength,noAssert){offset|=0,byteLength|=0,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset],mul=1,i=0;++i<byteLength&&(mul*=256);)val+=this[offset+i]*mul;return val},Buffer.prototype.readUIntBE=function(offset,byteLength,noAssert){offset|=0,byteLength|=0,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset+--byteLength],mul=1;byteLength>0&&(mul*=256);)val+=this[offset+--byteLength]*mul;return val},Buffer.prototype.readUInt8=function(offset,noAssert){return noAssert||checkOffset(offset,1,this.length),this[offset]},Buffer.prototype.readUInt16LE=function(offset,noAssert){return noAssert||checkOffset(offset,2,this.length),this[offset]|this[offset+1]<<8},Buffer.prototype.readUInt16BE=function(offset,noAssert){return noAssert||checkOffset(offset,2,this.length),this[offset]<<8|this[offset+1]},Buffer.prototype.readUInt32LE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),(this[offset]|this[offset+1]<<8|this[offset+2]<<16)+16777216*this[offset+3]},Buffer.prototype.readUInt32BE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),16777216*this[offset]+(this[offset+1]<<16|this[offset+2]<<8|this[offset+3])},Buffer.prototype.readIntLE=function(offset,byteLength,noAssert){offset|=0,byteLength|=0,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset],mul=1,i=0;++i<byteLength&&(mul*=256);)val+=this[offset+i]*mul;return val>=(mul*=128)&&(val-=Math.pow(2,8*byteLength)),val},Buffer.prototype.readIntBE=function(offset,byteLength,noAssert){offset|=0,byteLength|=0,noAssert||checkOffset(offset,byteLength,this.length);for(var i=byteLength,mul=1,val=this[offset+--i];i>0&&(mul*=256);)val+=this[offset+--i]*mul;return val>=(mul*=128)&&(val-=Math.pow(2,8*byteLength)),val},Buffer.prototype.readInt8=function(offset,noAssert){return noAssert||checkOffset(offset,1,this.length),128&this[offset]?-1*(255-this[offset]+1):this[offset]},Buffer.prototype.readInt16LE=function(offset,noAssert){noAssert||checkOffset(offset,2,this.length);var val=this[offset]|this[offset+1]<<8;return 32768&val?4294901760|val:val},Buffer.prototype.readInt16BE=function(offset,noAssert){noAssert||checkOffset(offset,2,this.length);var val=this[offset+1]|this[offset]<<8;return 32768&val?4294901760|val:val},Buffer.prototype.readInt32LE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),this[offset]|this[offset+1]<<8|this[offset+2]<<16|this[offset+3]<<24},Buffer.prototype.readInt32BE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),this[offset]<<24|this[offset+1]<<16|this[offset+2]<<8|this[offset+3]},Buffer.prototype.readFloatLE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),ieee754.read(this,offset,!0,23,4)},Buffer.prototype.readFloatBE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),ieee754.read(this,offset,!1,23,4)},Buffer.prototype.readDoubleLE=function(offset,noAssert){return noAssert||checkOffset(offset,8,this.length),ieee754.read(this,offset,!0,52,8)},Buffer.prototype.readDoubleBE=function(offset,noAssert){return noAssert||checkOffset(offset,8,this.length),ieee754.read(this,offset,!1,52,8)},Buffer.prototype.writeUIntLE=function(value,offset,byteLength,noAssert){(value=+value,offset|=0,byteLength|=0,noAssert)||checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength)-1,0);var mul=1,i=0;for(this[offset]=255&value;++i<byteLength&&(mul*=256);)this[offset+i]=value/mul&255;return offset+byteLength},Buffer.prototype.writeUIntBE=function(value,offset,byteLength,noAssert){(value=+value,offset|=0,byteLength|=0,noAssert)||checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength)-1,0);var i=byteLength-1,mul=1;for(this[offset+i]=255&value;--i>=0&&(mul*=256);)this[offset+i]=value/mul&255;return offset+byteLength},Buffer.prototype.writeUInt8=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(value=Math.floor(value)),this[offset]=255&value,offset+1},Buffer.prototype.writeUInt16LE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=255&value,this[offset+1]=value>>>8):objectWriteUInt16(this,value,offset,!0),offset+2},Buffer.prototype.writeUInt16BE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>8,this[offset+1]=255&value):objectWriteUInt16(this,value,offset,!1),offset+2},Buffer.prototype.writeUInt32LE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset+3]=value>>>24,this[offset+2]=value>>>16,this[offset+1]=value>>>8,this[offset]=255&value):objectWriteUInt32(this,value,offset,!0),offset+4},Buffer.prototype.writeUInt32BE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>24,this[offset+1]=value>>>16,this[offset+2]=value>>>8,this[offset+3]=255&value):objectWriteUInt32(this,value,offset,!1),offset+4},Buffer.prototype.writeIntLE=function(value,offset,byteLength,noAssert){if(value=+value,offset|=0,!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=0,mul=1,sub=0;for(this[offset]=255&value;++i<byteLength&&(mul*=256);)value<0&&0===sub&&0!==this[offset+i-1]&&(sub=1),this[offset+i]=(value/mul>>0)-sub&255;return offset+byteLength},Buffer.prototype.writeIntBE=function(value,offset,byteLength,noAssert){if(value=+value,offset|=0,!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=byteLength-1,mul=1,sub=0;for(this[offset+i]=255&value;--i>=0&&(mul*=256);)value<0&&0===sub&&0!==this[offset+i+1]&&(sub=1),this[offset+i]=(value/mul>>0)-sub&255;return offset+byteLength},Buffer.prototype.writeInt8=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(value=Math.floor(value)),value<0&&(value=255+value+1),this[offset]=255&value,offset+1},Buffer.prototype.writeInt16LE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=255&value,this[offset+1]=value>>>8):objectWriteUInt16(this,value,offset,!0),offset+2},Buffer.prototype.writeInt16BE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>8,this[offset+1]=255&value):objectWriteUInt16(this,value,offset,!1),offset+2},Buffer.prototype.writeInt32LE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=255&value,this[offset+1]=value>>>8,this[offset+2]=value>>>16,this[offset+3]=value>>>24):objectWriteUInt32(this,value,offset,!0),offset+4},Buffer.prototype.writeInt32BE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,4,2147483647,-2147483648),value<0&&(value=4294967295+value+1),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>24,this[offset+1]=value>>>16,this[offset+2]=value>>>8,this[offset+3]=255&value):objectWriteUInt32(this,value,offset,!1),offset+4},Buffer.prototype.writeFloatLE=function(value,offset,noAssert){return writeFloat(this,value,offset,!0,noAssert)},Buffer.prototype.writeFloatBE=function(value,offset,noAssert){return writeFloat(this,value,offset,!1,noAssert)},Buffer.prototype.writeDoubleLE=function(value,offset,noAssert){return writeDouble(this,value,offset,!0,noAssert)},Buffer.prototype.writeDoubleBE=function(value,offset,noAssert){return writeDouble(this,value,offset,!1,noAssert)},Buffer.prototype.copy=function(target,targetStart,start,end){if(start||(start=0),end||0===end||(end=this.length),targetStart>=target.length&&(targetStart=target.length),targetStart||(targetStart=0),end>0&&end<start&&(end=start),end===start)return 0;if(0===target.length||0===this.length)return 0;if(targetStart<0)throw new RangeError("targetStart out of bounds");if(start<0||start>=this.length)throw new RangeError("sourceStart out of bounds");if(end<0)throw new RangeError("sourceEnd out of bounds");end>this.length&&(end=this.length),target.length-targetStart<end-start&&(end=target.length-targetStart+start);var i,len=end-start;if(this===target&&start<targetStart&&targetStart<end)for(i=len-1;i>=0;--i)target[i+targetStart]=this[i+start];else if(len<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(i=0;i<len;++i)target[i+targetStart]=this[i+start];else Uint8Array.prototype.set.call(target,this.subarray(start,start+len),targetStart);return len},Buffer.prototype.fill=function(val,start,end,encoding){if("string"==typeof val){if("string"==typeof start?(encoding=start,start=0,end=this.length):"string"==typeof end&&(encoding=end,end=this.length),1===val.length){var code=val.charCodeAt(0);code<256&&(val=code)}if(void 0!==encoding&&"string"!=typeof encoding)throw new TypeError("encoding must be a string");if("string"==typeof encoding&&!Buffer.isEncoding(encoding))throw new TypeError("Unknown encoding: "+encoding)}else"number"==typeof val&&(val&=255);if(start<0||this.length<start||this.length<end)throw new RangeError("Out of range index");if(end<=start)return this;var i;if(start>>>=0,end=void 0===end?this.length:end>>>0,val||(val=0),"number"==typeof val)for(i=start;i<end;++i)this[i]=val;else{var bytes=Buffer.isBuffer(val)?val:utf8ToBytes(new Buffer(val,encoding).toString()),len=bytes.length;for(i=0;i<end-start;++i)this[i+start]=bytes[i%len]}return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;function toHex(n){return n<16?"0"+n.toString(16):n.toString(16)}function utf8ToBytes(string,units){var codePoint;units=units||1/0;for(var length=string.length,leadSurrogate=null,bytes=[],i=0;i<length;++i){if((codePoint=string.charCodeAt(i))>55295&&codePoint<57344){if(!leadSurrogate){if(codePoint>56319){(units-=3)>-1&&bytes.push(239,191,189);continue}if(i+1===length){(units-=3)>-1&&bytes.push(239,191,189);continue}leadSurrogate=codePoint;continue}if(codePoint<56320){(units-=3)>-1&&bytes.push(239,191,189),leadSurrogate=codePoint;continue}codePoint=65536+(leadSurrogate-55296<<10|codePoint-56320)}else leadSurrogate&&(units-=3)>-1&&bytes.push(239,191,189);if(leadSurrogate=null,codePoint<128){if((units-=1)<0)break;bytes.push(codePoint)}else if(codePoint<2048){if((units-=2)<0)break;bytes.push(codePoint>>6|192,63&codePoint|128)}else if(codePoint<65536){if((units-=3)<0)break;bytes.push(codePoint>>12|224,codePoint>>6&63|128,63&codePoint|128)}else{if(!(codePoint<1114112))throw new Error("Invalid code point");if((units-=4)<0)break;bytes.push(codePoint>>18|240,codePoint>>12&63|128,codePoint>>6&63|128,63&codePoint|128)}}return bytes}function base64ToBytes(str){return base64.toByteArray(function(str){if((str=function(str){return str.trim?str.trim():str.replace(/^\s+|\s+$/g,"")}(str).replace(INVALID_BASE64_RE,"")).length<2)return"";for(;str.length%4!=0;)str+="=";return str}(str))}function blitBuffer(src,dst,offset,length){for(var i=0;i<length&&!(i+offset>=dst.length||i>=src.length);++i)dst[i+offset]=src[i];return i}}).call(this,__webpack_require__(39))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BlockType=void 0,function(BlockType){BlockType.saved="layout-section",BlockType.blocks="blocks-section"}(exports.BlockType||(exports.BlockType={}))},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(205),exports),__exportStar(__webpack_require__(528),exports),__exportStar(__webpack_require__(529),exports),__exportStar(__webpack_require__(530),exports),__exportStar(__webpack_require__(531),exports),__exportStar(__webpack_require__(532),exports)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HttpResponse=void 0;exports.HttpResponse=class{constructor(){this.headers=[]}toByteArray(){return this.body}toObject(){try{const decodedString=this.utf8ArrayToStr(this.body);return JSON.parse(decodedString.trim())}catch(error){throw new Error(error)}}toText(){return this.utf8ArrayToStr(this.body).trim()}utf8ArrayToStr(array){let out,i,len,c,char2,char3;for(out="",len=array.length,i=0;i<len;)switch(c=array[i++],c>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:out+=String.fromCharCode(c);break;case 12:case 13:char2=array[i++],out+=String.fromCharCode((31&c)<<6|63&char2);break;case 14:char2=array[i++],char3=array[i++],out+=String.fromCharCode((15&c)<<12|(63&char2)<<6|(63&char3)<<0)}return out}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultPageSize=exports.localePrefix=void 0,exports.localePrefix="locales",exports.defaultPageSize=30},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(536),exports),__exportStar(__webpack_require__(537),exports),__exportStar(__webpack_require__(538),exports),__exportStar(__webpack_require__(539),exports)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mediaRoot=void 0,exports.mediaRoot="uploads"},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PermalinkResolver=void 0;const hyperlinkModel_1=__webpack_require__(80);exports.PermalinkResolver=class{constructor(permalinkResolvers){this.permalinkResolvers=permalinkResolvers}canHandleTarget(targetKey){if(!targetKey)throw new Error('Parameter "targetKey" not specified.');return this.permalinkResolvers.some(x=>x.canHandleTarget(targetKey))}getUrlByTargetKey(targetKey,locale){return __awaiter(this,void 0,void 0,(function*(){if(!targetKey)throw new Error('Parameter "targetKey" not specified.');let targetUrl=null;const permalinkResolver=this.permalinkResolvers.find(x=>x.canHandleTarget(targetKey));if(!permalinkResolver)return console.warn(`Could not find permalink resolver for target key ${targetKey}.`),targetKey;try{targetUrl=yield permalinkResolver.getUrlByTargetKey(targetKey,locale)}catch(error){console.warn("Unable to resolve permalink. "+(error.stack||error.message))}return targetUrl}))}getHyperlinkFromContract(hyperlinkContract,locale){return __awaiter(this,void 0,void 0,(function*(){let hyperlinkModel;if(!hyperlinkContract.targetKey)return this.getEmptyHyperlink();const permalinkResolver=this.permalinkResolvers.find(x=>x.canHandleTarget(hyperlinkContract.targetKey));return permalinkResolver?(hyperlinkModel=yield permalinkResolver.getHyperlinkFromContract(hyperlinkContract,locale),hyperlinkModel||this.getEmptyHyperlink()):(console.warn(`Could not find permalink resolver for target key "${hyperlinkContract.targetKey}"`),this.getEmptyHyperlink())}))}getHyperlinkByTargetKey(targetKey,locale){return __awaiter(this,void 0,void 0,(function*(){const permalinkResolver=this.permalinkResolvers.find(x=>x.canHandleTarget(targetKey));if(!permalinkResolver)return console.warn(`Could not find permalink resolver for content item with key "${targetKey}".`),this.getEmptyHyperlink();return(yield permalinkResolver.getHyperlinkByTargetKey(targetKey,locale))||this.getEmptyHyperlink()}))}getContentByPermalink(permalink,locale){return __awaiter(this,void 0,void 0,(function*(){for(const permalinkResolver of this.permalinkResolvers){if(!permalinkResolver.getContentByPermalink)continue;const contentItem=yield null==permalinkResolver?void 0:permalinkResolver.getContentByPermalink(permalink,locale);if(contentItem)return contentItem}return null}))}getContentItemByPermalink(permalink,locale){return __awaiter(this,void 0,void 0,(function*(){for(const permalinkResolver of this.permalinkResolvers){if(!permalinkResolver.getContentItemByPermalink)continue;const contentItem=yield null==permalinkResolver?void 0:permalinkResolver.getContentItemByPermalink(permalink,locale);if(contentItem)return contentItem}return null}))}getEmptyHyperlink(){const hyperlinkModel=new hyperlinkModel_1.HyperlinkModel;return hyperlinkModel.title="Unset link",hyperlinkModel.target="_self",hyperlinkModel.targetKey=null,hyperlinkModel.href="#",hyperlinkModel.anchor=null,hyperlinkModel.anchorName=null,hyperlinkModel}}},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(554),exports),__exportStar(__webpack_require__(555),exports),__exportStar(__webpack_require__(556),exports),__exportStar(__webpack_require__(557),exports),__exportStar(__webpack_require__(558),exports),__exportStar(__webpack_require__(559),exports)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UrlHyperlinkProvider=void 0;const hyperlinkModel_1=__webpack_require__(80);exports.UrlHyperlinkProvider=class{constructor(){this.name="Web URL",this.componentName="url-selector",this.iconClass="paperbits-icon paperbits-link-69-2"}canHandleHyperlink(contentItemKey){return contentItemKey.startsWith("urls/")}getHyperlinkFromResource(url){const hyperlinkModel=new hyperlinkModel_1.HyperlinkModel;return hyperlinkModel.title=url.title,hyperlinkModel.targetKey=url.key,hyperlinkModel.href=url.permalink,hyperlinkModel}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BackgroundModel=void 0;exports.BackgroundModel=class{constructor(){this.sourceType="none",this.size="contain",this.position="center center",this.repeat="no-repeat"}}},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Button=void 0;const ko=__webpack_require__(0),button_html_1=__webpack_require__(587),decorators_1=__webpack_require__(2);let Button=class{constructor(){this.label=ko.observable("Button"),this.styles=ko.observable(),this.hyperlink=ko.observable(),this.roles=ko.observableArray()}};Button=__decorate([decorators_1.Component({selector:"paperbits-button",template:button_html_1.default}),__metadata("design:paramtypes",[])],Button),exports.Button=Button},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.CardViewModel=void 0;const ko=__webpack_require__(0),card_html_1=__webpack_require__(596),decorators_1=__webpack_require__(2);let CardViewModel=class{constructor(){this.widgets=ko.observableArray(),this.styles=ko.observable()}};CardViewModel=__decorate([decorators_1.Component({selector:"card",template:card_html_1.default}),__metadata("design:paramtypes",[])],CardViewModel),exports.CardViewModel=CardViewModel},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.CardHandlers=void 0;const textblockModel_1=__webpack_require__(83),cardModel_1=__webpack_require__(96);exports.CardHandlers=class{constructor(viewManager,eventManager){this.viewManager=viewManager,this.eventManager=eventManager}canAccept(dragSession){return!["section","row","column","card"].includes(dragSession.sourceBinding.name)}getContextualEditor(context){const cardContextualEditor={color:"#4c5866",hoverCommands:[{color:"#607d8b",position:context.half,tooltip:"Add widget",component:{name:"widget-selector",params:{onRequest:()=>context.providers,onSelect:newWidgetModel=>{let index=context.parentModel.widgets.indexOf(context.model);"bottom"===context.half&&index++,context.parentBinding.model.widgets.splice(index,0,newWidgetModel),context.parentBinding.applyChanges(),this.viewManager.clearContextualEditors()}}}}],deleteCommand:{tooltip:"Delete card",color:"#4c5866",callback:()=>{context.parentModel.widgets.remove(context.model),context.parentBinding.applyChanges(),this.viewManager.clearContextualEditors(),this.eventManager.dispatchEvent("onContentUpdate")}},selectCommands:[{tooltip:"Edit card",iconClass:"paperbits-edit-72",position:"top right",color:"#4c5866",callback:()=>this.viewManager.openWidgetEditor(context.binding)}]};return 0===context.model.widgets.length&&cardContextualEditor.hoverCommands.push({color:"#607d8b",position:"center",tooltip:"Add widget",component:{name:"widget-selector",params:{onRequest:()=>context.providers,onSelect:widget=>{context.model.widgets.push(widget),context.binding.applyChanges(),this.eventManager.dispatchEvent("onContentUpdate"),this.viewManager.clearContextualEditors()}}}}),cardContextualEditor}getWidgetOrder(){return __awaiter(this,void 0,void 0,(function*(){return{name:"card",displayName:"Card",iconClass:"paperbits-polaroid",requires:["html"],createModel:()=>__awaiter(this,void 0,void 0,(function*(){const textblock=new textblockModel_1.TextblockModel([{type:"heading1",content:[{type:"text",text:"Card"}]},{type:"paragraph",content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor..."}]}]),model=new cardModel_1.CardModel;return model.widgets.push(textblock),model}))}}))}}},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(600),exports),__exportStar(__webpack_require__(604),exports),__exportStar(__webpack_require__(221),exports),__exportStar(__webpack_require__(137),exports),__exportStar(__webpack_require__(218),exports)},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.CollapsiblePanelModelBinder=void 0;const collapsiblePanelModel_1=__webpack_require__(84);exports.CollapsiblePanelModelBinder=class{constructor(modelBinderSelector){this.modelBinderSelector=modelBinderSelector}canHandleContract(contract){return"collapsible-panel"===contract.type}canHandleModel(model){return model instanceof collapsiblePanelModel_1.CollapsiblePanelModel}contractToModel(contract,bindingContext){return __awaiter(this,void 0,void 0,(function*(){const model=new collapsiblePanelModel_1.CollapsiblePanelModel;contract.styles&&(model.styles=contract.styles),contract.nodes||(contract.nodes=[]);const modelPromises=contract.nodes.map(contract=>__awaiter(this,void 0,void 0,(function*(){return this.modelBinderSelector.getModelBinderByContract(contract).contractToModel(contract,bindingContext)})));return model.widgets=yield Promise.all(modelPromises),model}))}modelToContract(model){const contract={type:"collapsible-panel",styles:model.styles,nodes:[]};return model.widgets.forEach(widgetModel=>{const modelBinder=this.modelBinderSelector.getModelBinderByModel(widgetModel);contract.nodes.push(modelBinder.modelToContract(widgetModel))}),contract}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.CollapsiblePanelViewModelBinder=void 0;const collapsiblePanelViewModel_1=__webpack_require__(137),collapsiblePanelModel_1=__webpack_require__(84),ko_1=__webpack_require__(602),__1=__webpack_require__(603);exports.CollapsiblePanelViewModelBinder=class{constructor(viewModelBinderSelector,eventManager,styleCompiler){this.viewModelBinderSelector=viewModelBinderSelector,this.eventManager=eventManager,this.styleCompiler=styleCompiler}modelToViewModel(model,viewModel,bindingContext){return __awaiter(this,void 0,void 0,(function*(){viewModel||(viewModel=new collapsiblePanelViewModel_1.CollapsiblePanel);const widgetViewModels=[];for(const widgetModel of model.widgets){const widgetViewModelBinder=this.viewModelBinderSelector.getViewModelBinderByModel(widgetModel),widgetViewModel=yield widgetViewModelBinder.modelToViewModel(widgetModel,null,bindingContext);widgetViewModels.push(widgetViewModel)}if(0===widgetViewModels.length&&widgetViewModels.push(new ko_1.PlaceholderViewModel("Collapsible panel content")),model.styles){const styleModel=yield this.styleCompiler.getStyleModelAsync(model.styles,null==bindingContext?void 0:bindingContext.styleManager);viewModel.styles(styleModel)}return viewModel.widgets(widgetViewModels),viewModel.widgetBinding={displayName:"Collapsible panel",readonly:!!bindingContext&&bindingContext.readonly,model:model,draggable:!0,flow:"inline",editor:"collapsible-panel-editor",handler:__1.CollapsiblePanelHandlers,applyChanges:changes=>__awaiter(this,void 0,void 0,(function*(){yield this.modelToViewModel(model,viewModel,bindingContext),this.eventManager.dispatchEvent("onContentUpdate")}))},viewModel}))}canHandleModel(model){return model instanceof collapsiblePanelModel_1.CollapsiblePanelModel}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PlaceholderViewModelBinder=void 0;const placeholder_1=__webpack_require__(94),placeholderViewModel_1=__webpack_require__(38);exports.PlaceholderViewModelBinder=class{modelToViewModel(model){return __awaiter(this,void 0,void 0,(function*(){return new placeholderViewModel_1.PlaceholderViewModel(model.message)}))}canHandleModel(model){return model instanceof placeholder_1.PlaceholderModel}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.CollapsiblePanelHandlers=void 0;const collapsiblePanelModel_1=__webpack_require__(84);exports.CollapsiblePanelHandlers=class{constructor(viewManager,eventManager){this.viewManager=viewManager,this.eventManager=eventManager}canAccept(dragSession){return!["section","row","column","collapsiblePanel"].includes(dragSession.sourceBinding.name)}getWidgetOrder(){return __awaiter(this,void 0,void 0,(function*(){return{name:"collapsiblePanel",displayName:"Collapsible panel",iconClass:"paperbits-menu-34",requires:["html","js"],createModel:()=>__awaiter(this,void 0,void 0,(function*(){return new collapsiblePanelModel_1.CollapsiblePanelModel}))}}))}getContextualEditor(context){const gridCellContextualEditor={color:"#9C27B0",hoverCommands:[{color:"#607d8b",position:context.half,tooltip:"Add widget",component:{name:"widget-selector",params:{onRequest:()=>context.providers,onSelect:newWidgetModel=>{let index=context.parentModel.widgets.indexOf(context.model);"bottom"===context.half&&index++,context.parentBinding.model.widgets.splice(index,0,newWidgetModel),context.parentBinding.applyChanges(),this.viewManager.clearContextualEditors()}}}}],deleteCommand:{tooltip:"Delete widget",color:"#607d8b",callback:()=>{context.parentModel.widgets.remove(context.model),context.parentBinding.applyChanges(),this.viewManager.clearContextualEditors()}},selectCommands:[{tooltip:"Edit collapsible panel",iconClass:"paperbits-edit-72",position:"top right",color:"#607d8b",callback:()=>this.viewManager.openWidgetEditor(context.binding)}]};return 0===context.model.widgets.length&&gridCellContextualEditor.hoverCommands.push({color:"#607d8b",position:"center",tooltip:"Add widget",component:{name:"widget-selector",params:{onRequest:()=>context.providers,onSelect:widget=>{context.model.widgets.push(widget),context.binding.applyChanges(),this.eventManager.dispatchEvent("onContentUpdate"),this.viewManager.clearContextualEditors()}}}}),gridCellContextualEditor}}},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.CollapsiblePanelEditor=void 0;const ko=__webpack_require__(0),collapsiblePanelEditor_html_1=__webpack_require__(605),collapsiblePanelModel_1=__webpack_require__(84),decorators_1=__webpack_require__(2),events_1=__webpack_require__(46),styles_1=__webpack_require__(47);let CollapsiblePanelEditor=class{constructor(viewManager,eventManager){this.viewManager=viewManager,this.eventManager=eventManager,this.backgroundConfig=ko.observable(),this.containerConfig=ko.observable(),this.sizeConfig=ko.observable()}initialize(){this.updateObservables(),this.eventManager.addEventListener(events_1.CommonEvents.onViewportChange,this.updateObservables)}updateObservables(){const viewport=this.viewManager.getViewport(),containerStyleConfig=styles_1.StyleHelper.getPluginConfigForLocalStyles(this.model.styles,"container",viewport);this.containerConfig(containerStyleConfig);const backgroundStyleConfig=styles_1.StyleHelper.getPluginConfigForLocalStyles(this.model.styles,"background",viewport);this.backgroundConfig(backgroundStyleConfig);const sizeStyleConfig=styles_1.StyleHelper.getPluginConfigForLocalStyles(this.model.styles,"size",viewport);this.sizeConfig(sizeStyleConfig)}onContainerChange(pluginConfig){const viewport=this.viewManager.getViewport();styles_1.StyleHelper.setPluginConfigForLocalStyles(this.model.styles,"container",pluginConfig,viewport),this.onChange(this.model)}onBackgroundChange(pluginConfig){const viewport=this.viewManager.getViewport();styles_1.StyleHelper.setPluginConfigForLocalStyles(this.model.styles,"background",pluginConfig,viewport),this.onChange(this.model)}onSizeChange(pluginConfig){const viewport=this.viewManager.getViewport();styles_1.StyleHelper.setPluginConfigForLocalStyles(this.model.styles,"size",pluginConfig,viewport),this.onChange(this.model)}dispose(){this.eventManager.removeEventListener(events_1.CommonEvents.onViewportChange,this.initialize)}};__decorate([decorators_1.Param(),__metadata("design:type",collapsiblePanelModel_1.CollapsiblePanelModel)],CollapsiblePanelEditor.prototype,"model",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],CollapsiblePanelEditor.prototype,"onChange",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],CollapsiblePanelEditor.prototype,"initialize",null),__decorate([decorators_1.OnDestroyed(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],CollapsiblePanelEditor.prototype,"dispose",null),CollapsiblePanelEditor=__decorate([decorators_1.Component({selector:"collapsible-panel-editor",template:collapsiblePanelEditor_html_1.default}),__metadata("design:paramtypes",[Object,Object])],CollapsiblePanelEditor),exports.CollapsiblePanelEditor=CollapsiblePanelEditor},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.coerce=void 0,exports.coerce=function(arrayLikeObject){return Array.prototype.slice.call(arrayLikeObject)}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.BackgroundStylePlugin=void 0;const Objects=__webpack_require__(19),stylePlugin_1=__webpack_require__(16),contracts_1=__webpack_require__(139),styles_1=__webpack_require__(8);class BackgroundStylePlugin extends stylePlugin_1.StylePlugin{constructor(themeContract,mediaPermalinkResolver){super(),this.themeContract=themeContract,this.mediaPermalinkResolver=mediaPermalinkResolver,this.name="background"}setThemeContract(themeContract){this.themeContract=themeContract}configToStyleRules(pluginConfig){return __awaiter(this,void 0,void 0,(function*(){const rules=[],backgroundImage=[],backgroundPosition=[],backgroundRepeat=[],backgroundSize=[],backgroundAttachment=[];if(pluginConfig.colorKey){const color=Objects.getObjectAt(pluginConfig.colorKey,this.themeContract);color?rules.push(new styles_1.StyleRule("backgroundColor",color.value)):console.warn(`Color with key "${pluginConfig.colorKey}" not found. Elements using it will fallback to parent's definition.`)}if(pluginConfig.images&&pluginConfig.images.length>0)for(const image of pluginConfig.images){const imageUrl=yield this.mediaPermalinkResolver.getUrlByTargetKey(image.sourceKey);imageUrl?(backgroundImage.push(`url('${imageUrl}')`),backgroundPosition.push(image.position||"unset"),backgroundSize.push(image.size||"unset"),backgroundRepeat.push(image.repeat||"no-repeat"),backgroundAttachment.push(image.attachment||"unset")):console.warn(`Unable to set background image. Media with source key ${image.sourceKey} not found.`)}if(pluginConfig.gradientKey){const gradient=Objects.getObjectAt(pluginConfig.gradientKey,this.themeContract);gradient?backgroundImage.push(contracts_1.getLinearGradientString(gradient)):(backgroundImage.push("none"),console.warn(`Gradient with key "${pluginConfig.gradientKey}" not found. Elements using it will fallback to parent's definition.`))}return backgroundImage.length>0&&rules.push(new styles_1.StyleRule("backgroundImage",backgroundImage.join(","))),backgroundPosition.length>0&&rules.push(new styles_1.StyleRule("backgroundPosition",backgroundPosition.join(","))),backgroundSize.length>0&&rules.push(new styles_1.StyleRule("backgroundSize",backgroundSize.join(","))),backgroundRepeat.length>0&&rules.push(new styles_1.StyleRule("backgroundRepeat",backgroundRepeat.join(","))),backgroundAttachment.length>0&&rules.push(new styles_1.StyleRule("backgroundAttachment",backgroundAttachment.join(","))),rules}))}}exports.BackgroundStylePlugin=BackgroundStylePlugin},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getLinearGradientString=void 0,exports.getLinearGradientString=function(contract){const colorStops=contract.colorStops.sort((a,b)=>a.length-b.length).map(colorStop=>{let colorStopString=colorStop.color;return colorStop.length&&(colorStopString+=` ${colorStop.length}%`),colorStopString});return`linear-gradient(${contract.direction},${colorStops.join(",")})`}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StylePrimitives=void 0,exports.StylePrimitives=["animations","colors","components","fonts","globals","gradients","shadows","utils"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StyleHelper=void 0;const breakpoints_1=__webpack_require__(98),Objects=__webpack_require__(30),Utils=__webpack_require__(6);class StyleHelper{static isResponsive(variation){if(!variation)throw new Error('Parameter "variation" not specified.');return Object.keys(variation).some(props=>Object.keys(breakpoints_1.BreakpointValues).includes(props))}static getPluginConfigForLocalStyles(localStyles,pluginName,viewport="xs"){if(!localStyles)throw new Error('Parameter "localStyles" not specified.');if(!pluginName)throw new Error('Parameter "pluginName" not specified.');if(!localStyles.instance)return null;const pluginConfig=localStyles.instance[pluginName];if(!pluginConfig)return null;if(this.isResponsive(pluginConfig)){return pluginConfig[viewport]}return pluginConfig}static setPluginConfigForLocalStyles(localStyles,pluginName,pluginConfig,viewport){if(!localStyles)throw new Error('Parameter "localStyles" not specified.');if(!pluginName)throw new Error('Parameter "pluginName" not specified.');const instance=localStyles.instance||{};let plugin=instance[pluginName]||{};viewport?plugin[viewport]=pluginConfig:plugin=pluginConfig,instance[pluginName]=plugin,localStyles.instance=instance,instance.key||(instance.key=Utils.randomClassName()),Objects.cleanupObject(localStyles,!0,!0)}static getPluginConfig(pluginBag,pluginName,viewport="xs"){if(!pluginBag)throw new Error('Parameter "pluginBag" not specified.');if(!pluginName)throw new Error('Parameter "pluginName" not specified.');const pluginConfig=pluginBag[pluginName];if(!pluginConfig)return null;if(this.isResponsive(pluginConfig)){return pluginConfig[viewport]}return pluginConfig}static setPluginConfig(pluginBag,pluginName,pluginConfig,viewport){if(!pluginBag)throw new Error('Parameter "pluginBag" not specified.');if(!pluginName)throw new Error('Parameter "pluginName" not specified.');let plugin=pluginBag[pluginName]||{};viewport?plugin[viewport]=pluginConfig:plugin=pluginConfig,pluginBag[pluginName]=plugin,pluginBag.key||(pluginBag.key=Utils.randomClassName()),Objects.cleanupObject(pluginBag,!0,!0)}static optimizeProperty(pluginBag,property){if(!StyleHelper.isResponsive(pluginBag[property]))return;const result=Utils.optimizeBreakpoints(pluginBag[property]);pluginBag[property]=result}static optimizePluginConfig(pluginConfig){if(!StyleHelper.isResponsive(pluginConfig))return;const breakpoints=["xs","sm","md","lg","xl"],lastValues={};for(const breakpoint of breakpoints){const pluginBag=pluginConfig[breakpoint];if(!pluginBag)continue;const properties=Object.keys(pluginBag);for(const property of properties)lastValues[property]===pluginBag[property]?delete pluginBag[property]:lastValues[property]=pluginBag[property];0===Object.keys(pluginBag).length&&delete pluginConfig[breakpoint]}}}exports.StyleHelper=StyleHelper},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ColumnViewModel=void 0;const ko=__webpack_require__(0),column_html_1=__webpack_require__(661),decorators_1=__webpack_require__(2);let ColumnViewModel=class{constructor(){this.widgets=ko.observableArray(),this.sizeXs=ko.observable(),this.sizeSm=ko.observable(),this.sizeMd=ko.observable(),this.sizeLg=ko.observable(),this.sizeXl=ko.observable(),this.alignmentXs=ko.observable(),this.alignmentSm=ko.observable(),this.alignmentMd=ko.observable(),this.alignmentLg=ko.observable(),this.alignmentXl=ko.observable(),this.offsetXs=ko.observable(),this.offsetSm=ko.observable(),this.offsetMd=ko.observable(),this.offsetLg=ko.observable(),this.offsetXl=ko.observable(),this.overflowX=ko.observable(),this.overflowY=ko.observable(),this.orderXs=ko.observable(),this.orderSm=ko.observable(),this.orderMd=ko.observable(),this.orderLg=ko.observable(),this.orderXl=ko.observable(),this.css=ko.computed(()=>{const classes=[];return this.sizeXs()&&classes.push(this.getSizeClass(this.sizeXs(),"xs")),this.sizeSm()&&classes.push(this.getSizeClass(this.sizeSm(),"sm")),this.sizeMd()&&classes.push(this.getSizeClass(this.sizeMd(),"md")),this.sizeLg()&&classes.push(this.getSizeClass(this.sizeLg(),"lg")),this.sizeXl()&&classes.push(this.getSizeClass(this.sizeXl(),"xl")),this.alignmentXs()&&classes.push(this.getAlignmentClass(this.alignmentXs(),"xs")),this.alignmentSm()&&classes.push(this.getAlignmentClass(this.alignmentSm(),"sm")),this.alignmentMd()&&classes.push(this.getAlignmentClass(this.alignmentMd(),"md")),this.alignmentLg()&&classes.push(this.getAlignmentClass(this.alignmentLg(),"lg")),this.alignmentXl()&&classes.push(this.getAlignmentClass(this.alignmentXl(),"xl")),this.offsetXs()&&classes.push(this.getOffsetClass(this.offsetXs(),"xs")),this.offsetSm()&&classes.push(this.getOffsetClass(this.offsetSm(),"sm")),this.offsetMd()&&classes.push(this.getOffsetClass(this.offsetMd(),"md")),this.offsetLg()&&classes.push(this.getOffsetClass(this.offsetLg(),"lg")),this.offsetXl()&&classes.push(this.getOffsetClass(this.offsetXl(),"xl")),this.orderXs()&&classes.push(this.getOrderClass(this.orderXs(),"xs")),this.orderSm()&&classes.push(this.getOrderClass(this.orderSm(),"sm")),this.orderMd()&&classes.push(this.getOrderClass(this.orderMd(),"md")),this.orderLg()&&classes.push(this.getOrderClass(this.orderLg(),"lg")),this.orderXl()&&classes.push(this.getOrderClass(this.orderXl(),"xl")),classes.join(" ")}),this.overflow=ko.computed(()=>({x:this.overflowX(),y:this.overflowY()}))}getSizeClass(size,targetBreakpoint){let breakpoint="";return"xs"!==targetBreakpoint&&(breakpoint=targetBreakpoint+"-"),"auto"===size&&(size=""),`col-${breakpoint}${size}`}getOffsetClass(offset,targetBreakpoint){let breakpoint="";return"xs"!==targetBreakpoint&&(breakpoint=targetBreakpoint+"-"),`offset-${breakpoint}${offset}`}getOrderClass(order,targetBreakpoint){let breakpoint="";return"xs"!==targetBreakpoint&&(breakpoint=targetBreakpoint+"-"),`order-${breakpoint}${order}`}getAlignmentClass(alignmentString,targetBreakpoint){const alignment=alignmentString.split(" "),vertical=alignment[0];let breakpoint="";return"xs"!==targetBreakpoint&&(breakpoint=targetBreakpoint+"-"),`align-content-${breakpoint}${vertical} align-items-${breakpoint}${vertical} justify-content-${breakpoint}${alignment[1]}`}};ColumnViewModel=__decorate([decorators_1.Component({selector:"layout-column",template:column_html_1.default}),__metadata("design:paramtypes",[])],ColumnViewModel),exports.ColumnViewModel=ColumnViewModel},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ColumnHandlers=void 0;exports.ColumnHandlers=class{constructor(viewManager,eventManager){this.viewManager=viewManager,this.eventManager=eventManager}canAccept(dragSession){return!["section","row","column"].includes(dragSession.sourceBinding.name)}getContextualEditor(context){const columnContextualEditor={color:"#9C27B0",hoverCommands:[],deleteCommand:null,selectCommands:[{tooltip:"Edit column",iconClass:"paperbits-edit-72",position:"top right",color:"#9C27B0",callback:()=>this.viewManager.openWidgetEditor(context.binding)}]};return 0===context.model.widgets.length&&columnContextualEditor.hoverCommands.push({color:"#607d8b",position:"center",tooltip:"Add widget",component:{name:"widget-selector",params:{onRequest:()=>context.providers,onSelect:widget=>{context.model.widgets.push(widget),context.binding.applyChanges(),this.eventManager.dispatchEvent("onContentUpdate"),this.viewManager.clearContextualEditors()}}}}),columnContextualEditor}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ContentModelBinder=void 0;const contentModel_1=__webpack_require__(141),placeholder_1=__webpack_require__(94);exports.ContentModelBinder=class{constructor(modelBinderSelector){this.modelBinderSelector=modelBinderSelector}getChildModels(nodes,bindingContext){return __awaiter(this,void 0,void 0,(function*(){const modelPromises=nodes.map(contract=>this.modelBinderSelector.getModelBinderByContract(contract).contractToModel(contract,bindingContext));return yield Promise.all(modelPromises)}))}getChildContracts(models){const nodes=[];return models.forEach(model=>{const modelBinder=this.modelBinderSelector.getModelBinderByModel(model);nodes.push(modelBinder.modelToContract(model))}),nodes}canHandleContract(contract){return"page"===contract.type}canHandleModel(model){return model instanceof contentModel_1.ContentModel}contractToModel(contentContract,bindingContext){var _a,_b;return __awaiter(this,void 0,void 0,(function*(){const contentModel=new contentModel_1.ContentModel;contentModel.type=contentContract.type;const templateValue=null===(_b=null===(_a=null==bindingContext?void 0:bindingContext.template)||void 0===_a?void 0:_a[contentContract.type])||void 0===_b?void 0:_b.value;return templateValue&&(contentContract=templateValue),contentContract.nodes?contentModel.widgets=yield this.getChildModels(contentContract.nodes,bindingContext):contentModel.widgets=[new placeholder_1.PlaceholderModel("Content")],contentModel}))}modelToContract(model){return{type:"page"}}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ContentViewModelBinder=void 0;const Objects=__webpack_require__(30),contentViewModel_1=__webpack_require__(140),contentModel_1=__webpack_require__(141),contentHandlers_1=__webpack_require__(142);exports.ContentViewModelBinder=class{constructor(viewModelBinderSelector,contentModelBinder,modelBinderSelector,eventManager){this.viewModelBinderSelector=viewModelBinderSelector,this.contentModelBinder=contentModelBinder,this.modelBinderSelector=modelBinderSelector,this.eventManager=eventManager}createBinding(model,viewModel,bindingContext){let savingTimeout;const updateContent=()=>__awaiter(this,void 0,void 0,(function*(){var _a,_b;const contentContract={type:model.type,nodes:[]};model.widgets.forEach(section=>{const modelBinder=this.modelBinderSelector.getModelBinderByModel(section);contentContract.nodes.push(modelBinder.modelToContract(section))});const onValueUpdate=null===(_b=null===(_a=null==bindingContext?void 0:bindingContext.template)||void 0===_a?void 0:_a[contentContract.type])||void 0===_b?void 0:_b.onValueUpdate;onValueUpdate&&onValueUpdate(contentContract)})),scheduleUpdate=()=>__awaiter(this,void 0,void 0,(function*(){clearTimeout(savingTimeout),savingTimeout=setTimeout(updateContent,600)})),binding={displayName:"Content",readonly:model.type!==(null==bindingContext?void 0:bindingContext.routeKind),name:"content",model:model,draggable:!0,handler:contentHandlers_1.ContentHandlers,applyChanges:()=>__awaiter(this,void 0,void 0,(function*(){return yield this.modelToViewModel(model,viewModel,bindingContext)})),onCreate:()=>{model.type===(null==bindingContext?void 0:bindingContext.routeKind)&&this.eventManager.addEventListener("onContentUpdate",scheduleUpdate)},onDispose:()=>{model.type===(null==bindingContext?void 0:bindingContext.routeKind)&&this.eventManager.removeEventListener("onContentUpdate",scheduleUpdate)}};viewModel.widgetBinding=binding}modelToViewModel(model,viewModel,bindingContext){return __awaiter(this,void 0,void 0,(function*(){viewModel||(viewModel=new contentViewModel_1.ContentViewModel);let childBindingContext={};bindingContext&&(childBindingContext=Objects.clone(bindingContext),childBindingContext.readonly=model.type!==(null==bindingContext?void 0:bindingContext.routeKind),childBindingContext.template=bindingContext.template,childBindingContext.styleManager=bindingContext.styleManager);const viewModels=[];for(const widgetModel of model.widgets){const widgetViewModelBinder=this.viewModelBinderSelector.getViewModelBinderByModel(widgetModel),widgetViewModel=yield widgetViewModelBinder.modelToViewModel(widgetModel,null,childBindingContext);viewModels.push(widgetViewModel)}return viewModel.widgetBinding||this.createBinding(model,viewModel,bindingContext),viewModel.widgets(viewModels),viewModel}))}canHandleModel(model){return model instanceof contentModel_1.ContentModel}getContentViewModelByKey(contentContract,bindingContext){return __awaiter(this,void 0,void 0,(function*(){const layoutModel=yield this.contentModelBinder.contractToModel(contentContract,bindingContext),layoutViewModel=yield this.modelToViewModel(layoutModel,null,bindingContext);return layoutViewModel.widgetBinding.readonly=!0,layoutViewModel}))}}},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.GridCellViewModel=void 0;const ko=__webpack_require__(0),gridCell_html_1=__webpack_require__(668),decorators_1=__webpack_require__(2);let GridCellViewModel=class{constructor(){this.widgets=ko.observableArray(),this.styles=ko.observable(),this.role=ko.observable()}};GridCellViewModel=__decorate([decorators_1.Component({selector:"grid-cell",template:gridCell_html_1.default}),__metadata("design:paramtypes",[])],GridCellViewModel),exports.GridCellViewModel=GridCellViewModel},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(142),exports),__exportStar(__webpack_require__(141),exports),__exportStar(__webpack_require__(229),exports)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GridCellHandlers=void 0;const section_1=__webpack_require__(234);exports.GridCellHandlers=class{constructor(viewManager,eventManager,widgetService){this.viewManager=viewManager,this.eventManager=eventManager,this.widgetService=widgetService}canAccept(dragSession){return!["section","row","column"].includes(dragSession.sourceBinding.name)}getContextualEditor(context){const gridCellContextualEditor={color:"#9C27B0",hoverCommands:[],deleteCommand:null,selectCommands:[{tooltip:"Edit grid cell",iconClass:"paperbits-edit-72",position:"top right",color:"#9C27B0",callback:()=>this.viewManager.openWidgetEditor(context.binding)},{tooltip:"Switch to parent",iconClass:"paperbits-enlarge-vertical",position:"top right",color:"#9C27B0",callback:()=>{context.switchToParent(section_1.SectionModel)}}]};return 0!==context.model.widgets.length||gridCellContextualEditor.hoverCommands.push({color:"#607d8b",position:"center",tooltip:"Add widget",component:{name:"widget-selector",params:{onRequest:()=>context.providers,onSelect:widget=>{context.model.widgets.push(widget),context.binding.applyChanges(),this.eventManager.dispatchEvent("onContentUpdate"),this.viewManager.clearContextualEditors()}}}}),gridCellContextualEditor}}},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(671),exports),__exportStar(__webpack_require__(144),exports),__exportStar(__webpack_require__(86),exports),__exportStar(__webpack_require__(235),exports)},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SectionModelBinder=void 0;const sectionModel_1=__webpack_require__(86);exports.SectionModelBinder=class{constructor(modelBinderSelector){this.modelBinderSelector=modelBinderSelector}canHandleContract(contract){return"layout-section"===contract.type}canHandleModel(model){return model instanceof sectionModel_1.SectionModel}contractToModel(contract,bindingContext){return __awaiter(this,void 0,void 0,(function*(){const model=new sectionModel_1.SectionModel;contract.nodes=contract.nodes||[],model.styles=contract.styles||{};const modelPromises=contract.nodes.map(contract=>__awaiter(this,void 0,void 0,(function*(){const modelBinder=this.modelBinderSelector.getModelBinderByContract(contract);return yield modelBinder.contractToModel(contract,bindingContext)})));return model.widgets=yield Promise.all(modelPromises),model}))}modelToContract(sectionModel){const sectionContract={type:"layout-section",styles:sectionModel.styles,nodes:[]};return sectionModel.widgets.forEach(widgetModel=>{const modelBinder=this.modelBinderSelector.getModelBinderByModel(widgetModel);sectionContract.nodes.push(modelBinder.modelToContract(widgetModel))}),sectionContract}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GridModule=void 0;const gridViewModel_1=__webpack_require__(145),gridModelBinder_1=__webpack_require__(237),gridViewModelBinder_1=__webpack_require__(238);exports.GridModule=class{register(injector){injector.bind("gridViewModel",gridViewModel_1.GridViewModel),injector.bindToCollection("modelBinders",gridModelBinder_1.GridModelBinder,"gridModelBinder"),injector.bindToCollection("viewModelBinders",gridViewModelBinder_1.GridViewModelBinder,"gridViewModelBinder")}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.GridModelBinder=void 0;const gridModel_1=__webpack_require__(146);exports.GridModelBinder=class{constructor(modelBinderSelector){this.modelBinderSelector=modelBinderSelector}canHandleContract(contract){return"grid"===contract.type}canHandleModel(model){return model instanceof gridModel_1.GridModel}contractToModel(contract,bindingContext){return __awaiter(this,void 0,void 0,(function*(){const model=new gridModel_1.GridModel;contract.nodes=contract.nodes||[],model.styles=contract.styles;const modelPromises=contract.nodes.map(contract=>__awaiter(this,void 0,void 0,(function*(){const modelBinder=this.modelBinderSelector.getModelBinderByContract(contract);return yield modelBinder.contractToModel(contract,bindingContext)})));return model.widgets=yield Promise.all(modelPromises),model}))}modelToContract(model){const contract={type:"grid",nodes:[],styles:model.styles};return model.widgets.forEach(widgetModel=>{const modelBinder=this.modelBinderSelector.getModelBinderByModel(widgetModel);contract.nodes.push(modelBinder.modelToContract(widgetModel))}),contract}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.GridViewModelBinder=void 0;const gridViewModel_1=__webpack_require__(145),gridModel_1=__webpack_require__(146),placeholderViewModel_1=__webpack_require__(38),gridHandlers_1=__webpack_require__(147);exports.GridViewModelBinder=class{constructor(viewModelBinderSelector,eventManager,styleCompiler){this.viewModelBinderSelector=viewModelBinderSelector,this.eventManager=eventManager,this.styleCompiler=styleCompiler}modelToViewModel(model,viewModel,bindingContext){return __awaiter(this,void 0,void 0,(function*(){viewModel||(viewModel=new gridViewModel_1.GridViewModel);const viewModels=[];for(const widgetModel of model.widgets){const widgetViewModelBinder=this.viewModelBinderSelector.getViewModelBinderByModel(widgetModel),widgetViewModel=yield widgetViewModelBinder.modelToViewModel(widgetModel,null,bindingContext);viewModels.push(widgetViewModel)}0===viewModels.length&&viewModels.push(new placeholderViewModel_1.PlaceholderViewModel("Grid")),viewModel.widgets(viewModels),model.styles&&viewModel.styles(yield this.styleCompiler.getStyleModelAsync(model.styles,null==bindingContext?void 0:bindingContext.styleManager));const binding={name:"grid",displayName:"Grid",readonly:!!bindingContext&&bindingContext.readonly,model:model,draggable:!1,flow:"block",handler:gridHandlers_1.GridHandlers,applyChanges:changes=>__awaiter(this,void 0,void 0,(function*(){yield this.modelToViewModel(model,viewModel,bindingContext),this.eventManager.dispatchEvent("onContentUpdate")}))};return viewModel.widgetBinding=binding,viewModel}))}canHandleModel(model){return model instanceof gridModel_1.GridModel}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.BackgroundBindingHandler=void 0;const ko=__webpack_require__(0);ko.bindingHandlers.style={update(element,valueAccessor){const value=ko.utils.unwrapObservable(valueAccessor()||{});ko.utils.objectForEach(value,(function(styleName,styleValue){null!=(styleValue=ko.utils.unwrapObservable(styleValue))&&!1!==styleValue||(styleValue=""),element.style.setProperty(styleName,styleValue)}))}};exports.BackgroundBindingHandler=class{constructor(styleService){ko.bindingHandlers.background={init(element,valueAccessor){const configuration=valueAccessor(),styleObservable=ko.observable(),setBackground=backgroundModel=>__awaiter(this,void 0,void 0,(function*(){backgroundModel.sourceUrl?styleObservable({"background-image":`url("${ko.unwrap(backgroundModel.sourceUrl)}")`,"background-repeat":"no-repeat","background-size":"cover","background-position":"center","background-color":backgroundModel.color}):backgroundModel.color?styleObservable({"background-color":backgroundModel.color}):styleObservable({"background-image":null,"background-repeat":null,"background-size":null,"background-position":null,"background-color":null})}));ko.applyBindingsToNode(element,{style:styleObservable},null),ko.isObservable(configuration)&&configuration.subscribe(newConfiguration=>{setBackground(newConfiguration?ko.unwrap(newConfiguration):{})});let initialConfiguration=ko.unwrap(configuration);initialConfiguration||(initialConfiguration={}),setBackground(initialConfiguration)}}}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SecuredBindingHandler=void 0;const ko=__webpack_require__(0),user_1=__webpack_require__(58);exports.SecuredBindingHandler=class{constructor(eventManager,userService){this.eventManager=eventManager,this.userService=userService,ko.bindingHandlers.secured={update:(element,valueAccessor)=>{const hiddenObservable=ko.observable(!0),dataRoleObservable=ko.observable(),applyRoles=()=>__awaiter(this,void 0,void 0,(function*(){const widgetRoles=ko.unwrap(valueAccessor())||[user_1.BuiltInRoles.everyone.key],visibleToUser=(yield this.userService.getUserRoles()).some(x=>widgetRoles.includes(x))||widgetRoles.includes(user_1.BuiltInRoles.everyone.key),roles=widgetRoles&&1===widgetRoles.length&&widgetRoles[0]===user_1.BuiltInRoles.everyone.key?null:widgetRoles.join(",");dataRoleObservable(roles),hiddenObservable(!visibleToUser)}));this.eventManager.addEventListener("onUserRoleChange",applyRoles),ko.applyBindingsToNode(element,{attr:{"data-role":dataRoleObservable},css:{hidden:hiddenObservable}},null),ko.utils.domNodeDisposal.addDisposeCallback(element,()=>{this.eventManager.removeEventListener("onUserRoleChange",applyRoles)}),applyRoles()}}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WidgetBindingHandler=void 0;const ko=__webpack_require__(0);exports.WidgetBindingHandler=class{constructor(){let componentLoadingOperationUniqueId=0;ko.bindingHandlers.widget={init(element,valueAccessor,ignored1,ignored2,bindingContext){if(!ko.utils.unwrapObservable(valueAccessor()))return;let currentViewModel,currentLoadingOperationId;const disposeAssociatedComponentViewModel=()=>{const currentViewModelDispose=currentViewModel&&currentViewModel.dispose;if(currentViewModel){const binding=currentViewModel.widgetBinding;binding&&binding.onDispose&&binding.onDispose()}"function"==typeof currentViewModelDispose&&currentViewModelDispose.call(currentViewModel),currentViewModel=null,currentLoadingOperationId=null},originalChildNodes=makeArray(ko.virtualElements.childNodes(element));return ko.utils.domNodeDisposal.addDisposeCallback(element,disposeAssociatedComponentViewModel),ko.computed(()=>{const componentViewModel=ko.utils.unwrapObservable(valueAccessor());if(!componentViewModel)return;const loadingOperationId=currentLoadingOperationId=++componentLoadingOperationUniqueId,registration=Reflect.getMetadata("knockout-component",componentViewModel.constructor);if(!registration)throw new Error("Could not find component registration for view model: "+componentViewModel);const binding=componentViewModel.widgetBinding;binding&&binding.onCreate&&binding.onCreate();const componentName=registration.name;ko.components.get(componentName,componentDefinition=>{if(currentLoadingOperationId!==loadingOperationId)return;if(disposeAssociatedComponentViewModel(),!componentDefinition)throw new Error(`Unknown component "${componentName}".`);const root=function(componentDefinition,element){const template=componentDefinition.template;if(!template)return element;const clonedNodesArray=((nodesArray,shouldCleanNodes)=>{const newNodesArray=[];for(let i=0,j=nodesArray.length;i<j;i++){const clonedNode=nodesArray[i].cloneNode(!0);newNodesArray.push(shouldCleanNodes?ko.cleanNode(clonedNode):clonedNode)}return newNodesArray})(template,!1);return ko.virtualElements.setDomNodeChildren(element,clonedNodesArray),element}(componentDefinition,element),childBindingContext=bindingContext.createChildContext(componentViewModel,void 0,ctx=>{ctx.$component=componentViewModel,ctx.$componentTemplateNodes=originalChildNodes});currentViewModel=componentViewModel,ko.applyBindingsToDescendants(childBindingContext,root);let nonVirtualElement=element;if("#comment"===nonVirtualElement.nodeName)do{nonVirtualElement=nonVirtualElement.nextSibling}while(null!==nonVirtualElement&&"#comment"===nonVirtualElement.nodeName);if(nonVirtualElement){nonVirtualElement.attachedViewModel=componentViewModel;const binding=componentViewModel.widgetBinding;(null==binding?void 0:binding.draggable)&&ko.applyBindingsToNode(nonVirtualElement,{draggable:{}},null)}})},null,{disposeWhenNodeIsRemoved:element}),{controlsDescendantBindings:!1}}},ko.virtualElements.allowedBindings.widget=!0;const makeArray=arrayLikeObject=>{const result=[];for(let i=0,j=arrayLikeObject.length;i<j;i++)result.push(arrayLikeObject[i]);return result}}}},function(module,exports,__webpack_require__){"use strict";(function(setImmediate){Object.defineProperty(exports,"__esModule",{value:!0}),exports.KnockoutRegistrationLoaders=void 0;const ko=__webpack_require__(0),injection_1=__webpack_require__(130);class KnockoutRegistrationLoaders{register(injector){const injectableComponentLoader={loadViewModel(name,config,callback){const injectable=Reflect.getMetadata(injection_1.InjectableMetadataKey,config);if(!injectable)return void callback(null);const viewModelConstructor=function(params){const resolvedInjectable=injector.resolve(injectable.name);let instance=resolvedInjectable;resolvedInjectable.factory&&(instance=resolvedInjectable.factory(injector,params)),Object.getOwnPropertyNames(instance.constructor.prototype).forEach(prop=>{"function"==typeof instance[prop]&&"constructor"!==prop&&(instance[prop]=instance[prop].bind(instance))});const parameterDescriptions=Reflect.getMetadata("params",instance.constructor);if(parameterDescriptions&&params){if("string"==typeof params)try{params=eval(`(${params})`)}catch(error){}"object"==typeof params&&parameterDescriptions.forEach(parameterName=>{const instanceValue=instance[parameterName],paramerterValue=params[parameterName]||params[parameterName.toLowerCase()];void 0!==paramerterValue&&(ko.isObservable(instanceValue)?ko.isObservable(paramerterValue)?(instanceValue(paramerterValue()),paramerterValue.subscribe(value=>{instanceValue(value)})):instanceValue(paramerterValue):instance[parameterName]=ko.unwrap(paramerterValue))})}const eventDescriptions=Reflect.getMetadata("events",instance.constructor);eventDescriptions&&eventDescriptions.forEach(methodReference=>{params&&params[methodReference]?instance[methodReference]=params[methodReference]:console.warn(`Event "${methodReference}" in the component "${name}" doesn't have listeners.`)});const onMountedMethodDescriptions=Reflect.getMetadata("onmounted",instance.constructor);return onMountedMethodDescriptions&&onMountedMethodDescriptions.forEach(methodDescription=>{const methodReference=instance[methodDescription];methodReference&&methodReference()}),instance};ko.components.defaultLoader.loadViewModel(name,viewModelConstructor,callback)},loadTemplate(name,templateHtml,callback){const nodes=(0,ko.utils.parseHtmlFragment)(templateHtml,document);ko.components.defaultLoader.loadTemplate(name,nodes,callback)},loadComponent(componentName,config,callback){ko.components.defaultLoader.loadComponent(componentName,config,resultWrapper=>{const definitionWrapper={template:resultWrapper.template,createViewModel:(params,options)=>{const attrs=options.element.attributes;if(attrs&&attrs.length>0){const runtimeParams={};for(let i=0;i<attrs.length;i++){const attr=attrs[i];if(attr.name.startsWith("runtime-")){runtimeParams[attr.name.split("-")[1]]=attr.value}}Object.keys(runtimeParams).length>0&&(params=Object.assign(Object.assign({},runtimeParams),params))}return resultWrapper.createViewModel(params,options)},constructor:config.constructor,encapsulation:config.encapsulation};callback(definitionWrapper)})}};ko.components.loaders.unshift(injectableComponentLoader),ko.bindingProvider.instance.preprocessNode=node=>(node.removeAttribute&&setImmediate(()=>node.removeAttribute("data-bind")),null)}}exports.KnockoutRegistrationLoaders=KnockoutRegistrationLoaders}).call(this,__webpack_require__(60).setImmediate)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.KoModule=void 0;const ko=__webpack_require__(0);__webpack_require__(244),__webpack_require__(245),__webpack_require__(246),__webpack_require__(247),__webpack_require__(248),__webpack_require__(249),__webpack_require__(250),__webpack_require__(251),__webpack_require__(252),__webpack_require__(673),__webpack_require__(253),__webpack_require__(254),__webpack_require__(255),__webpack_require__(257),__webpack_require__(258),__webpack_require__(259),__webpack_require__(240),__webpack_require__(260),__webpack_require__(675),__webpack_require__(676),__webpack_require__(677),__webpack_require__(678),__webpack_require__(261);exports.KoModule=class{register(injector){ko.virtualElements.allowedBindings.widget=!0,ko.virtualElements.allowedBindings.layoutrow=!0,ko.virtualElements.allowedBindings.component=!0}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const ko=__webpack_require__(0);ko.bindingHandlers.columnSizeCfg={init(element,valueAccessor){let sizes=valueAccessor(),size=sizes.xs;sizes.sm&&(size=sizes.sm),sizes.md&&(size=sizes.md),sizes.lg&&(size=sizes.lg),sizes.xl&&(size=sizes.xl);const css={};css["col-cfg-"+size]=!0,ko.applyBindingsToNode(element,{css:css},null)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const ko=__webpack_require__(0);let componentLoadingOperationUniqueId=0;ko.bindingHandlers.component={init:(element,valueAccessor,ignored1,ignored2,bindingContext)=>{let currentViewModel,currentLoadingOperationId;const disposeAssociatedComponentViewModel=()=>{if(currentViewModel){const onDestroyedMethodDescriptions=Reflect.getMetadata("ondestroyed",currentViewModel.constructor);if(onDestroyedMethodDescriptions)onDestroyedMethodDescriptions.forEach(methodDescription=>{const methodReference=currentViewModel[methodDescription];methodReference&&methodReference()});else{const currentViewModelDispose=currentViewModel&&currentViewModel.dispose;"function"==typeof currentViewModelDispose&&currentViewModelDispose.call(currentViewModel)}}currentViewModel=null,currentLoadingOperationId=null},originalChildNodes=makeArray(ko.virtualElements.childNodes(element));return ko.utils.domNodeDisposal.addDisposeCallback(element,disposeAssociatedComponentViewModel),ko.computed(()=>{let componentOnCreateHandler;const value=ko.utils.unwrapObservable(valueAccessor());let componentName,componentParams;if("string"==typeof value?componentName=value:(componentName=ko.utils.unwrapObservable(value.name),componentParams=ko.utils.unwrapObservable(value.params),componentOnCreateHandler=ko.utils.unwrapObservable(value.oncreate)),!componentName)throw new Error("No component name specified");const loadingOperationId=currentLoadingOperationId=++componentLoadingOperationUniqueId;ko.components.get(componentName,componentDefinition=>{if(currentLoadingOperationId!==loadingOperationId)return;if(disposeAssociatedComponentViewModel(),!componentDefinition)throw new Error(`Unknown component "${componentName}"`);const root=function(componentDefinition,element){const template=componentDefinition.template;if(!template)return element;const clonedNodesArray=((nodesArray,shouldCleanNodes)=>{const newNodesArray=[],j=nodesArray.length;for(let i=0;i<j;i++){const clonedNode=nodesArray[i].cloneNode(!0);newNodesArray.push(shouldCleanNodes?ko.cleanNode(clonedNode):clonedNode)}return newNodesArray})(template,!1);if("shadowDom"===componentDefinition.encapsulation){const shadow=element.attachShadow({mode:"open"});return ko.virtualElements.setDomNodeChildren(shadow,clonedNodesArray),shadow.firstElementChild}return ko.virtualElements.setDomNodeChildren(element,clonedNodesArray),element}(componentDefinition,element),componentViewModel=function(componentDefinition,element,originalChildNodes,componentParams){const componentViewModelFactory=componentDefinition.createViewModel;return componentViewModelFactory?componentViewModelFactory.call(componentDefinition,componentParams,{element:element,templateNodes:originalChildNodes}):componentParams}(componentDefinition,root,originalChildNodes,componentParams),childBindingContext=bindingContext.createChildContext(componentViewModel,void 0,ctx=>{ctx.$component=componentViewModel,ctx.$componentTemplateNodes=originalChildNodes});currentViewModel=componentViewModel,ko.applyBindingsToDescendants(childBindingContext,root),componentOnCreateHandler&&componentOnCreateHandler(componentViewModel,element)})},null,{disposeWhenNodeIsRemoved:element}),{controlsDescendantBindings:!0}}},ko.virtualElements.allowedBindings.component=!0;const makeArray=arrayLikeObject=>{const result=[];for(let i=0,j=arrayLikeObject.length;i<j;i++)result.push(arrayLikeObject[i]);return result}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const ko=__webpack_require__(0);ko.bindingHandlers.highlight={init(element,valueAccessor){const config=valueAccessor();element.highlightConfig=config;const updatePosition=()=>{const currentConfig=element.highlightConfig;if(!currentConfig||!currentConfig.element)return;const parentRect=currentConfig.element.ownerDocument.defaultView.frameElement.getBoundingClientRect(),rect=currentConfig.element.getBoundingClientRect();element.style.left=parentRect.left+rect.left+"px",element.style.top=parentRect.top+rect.top+"px",element.style.width=rect.width+"px",element.style.height=rect.height+"px",element.title=currentConfig.text||"Widget"};element.highlightUpdate=updatePosition,updatePosition(),document.addEventListener("scroll",updatePosition),ko.utils.domNodeDisposal.addDisposeCallback(element,()=>{document.removeEventListener("scroll",updatePosition)})},update(element,valueAccessor){const config=valueAccessor();element.highlightConfig=ko.unwrap(config),element.highlightUpdate()}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const ko=__webpack_require__(0);ko.bindingHandlers.splitter={init(element,valueAccessor){const config=valueAccessor();element.splitterConfig=config;const updatePosition=()=>{const currentConfig=element.splitterConfig;if(!currentConfig||!currentConfig.element)return;const parentRect=currentConfig.element.ownerDocument.defaultView.frameElement.getBoundingClientRect(),rect=currentConfig.element.getBoundingClientRect();if(element.style.left=parentRect.left+rect.left+"px",element.style.top=parentRect.top+rect.top+"px",element.style.width=rect.width+"px",element.style.height=rect.height+"px","outside"===currentConfig.where)switch(currentConfig.side){case"top":element.style.borderWidth="4px 0 0 0";break;case"bottom":element.style.borderWidth="0 0 4px 0";break;case"left":element.style.borderWidth="0 0 0 4px";break;case"right":element.style.borderWidth="0 4px 0 0"}else element.style.borderWidth="4px"};element.splitterUpdate=updatePosition,updatePosition(),document.addEventListener("scroll",updatePosition),ko.utils.domNodeDisposal.addDisposeCallback(element,()=>{document.removeEventListener("scroll",updatePosition)})},update(element,valueAccessor){const config=valueAccessor();element.splitterConfig=ko.unwrap(config),element.splitterUpdate()}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const ko=__webpack_require__(0);ko.bindingHandlers.resourcePicker={init:(element,valueAccessor)=>{const config=valueAccessor(),resourcePicker=ko.unwrap(config.resourcePicker),onSelect=ko.unwrap(config.onSelect),hyperlink=ko.unwrap(config.hyperlink);let onSelectCallback;ko.applyBindingsToNode(element,{balloon:{component:{name:resourcePicker.componentName,params:{onSelect:newResource=>{onSelectCallback&&onSelectCallback(newResource)}},oncreate:resourceSelector=>{hyperlink&&resourceSelector.selectResource&&resourceSelector.selectResource(hyperlink),onSelectCallback=newResource=>{const hyperlink=resourcePicker.getHyperlinkFromResource(newResource);onSelect(hyperlink)}}}}},null)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const ko=__webpack_require__(0);ko.bindingHandlers.hyperlink={init(element,valueAccessor){const hyperlink=valueAccessor(),attributesObservable=ko.observable(),setElementAttributes=hyperlink=>{var _a;if(!hyperlink)return void attributesObservable({href:"#",target:"_blank"});const downloadAttribute=(null===(_a=hyperlink.targetKey)||void 0===_a?void 0:_a.startsWith("uploads/"))?"":void 0;attributesObservable({href:hyperlink.href,target:hyperlink.target,download:downloadAttribute})};ko.isObservable(hyperlink)&&hyperlink.subscribe(setElementAttributes);setElementAttributes(ko.unwrap(hyperlink)),ko.applyBindingsToNode(element,{attr:attributesObservable},null)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const ko=__webpack_require__(0),Objects=__webpack_require__(19);__webpack_require__(133),ko.bindingHandlers.surface={init(element,valueAccessor){const view=valueAccessor(),settingsString=localStorage.settings;if(settingsString){const editorSettings=JSON.parse(settingsString)[view.component.name];editorSettings&&(Number.isInteger(editorSettings.width)&&(element.style.width=editorSettings.width+"px"),Number.isInteger(editorSettings.height)&&(element.style.height=editorSettings.height+"px",element.classList.add("resized-vertically")),Number.isInteger(editorSettings.left)&&(editorSettings.left+editorSettings.width>document.body.clientWidth&&(editorSettings.left=document.body.clientWidth-editorSettings.width),element.style.left=editorSettings.left+"px"),Number.isInteger(editorSettings.top)&&(editorSettings.top+editorSettings.height>document.body.clientHeight&&(editorSettings.top=10),element.style.top=editorSettings.top+"px"))}ko.applyBindingsToNode(element,{dragsource:{sticky:!1,sourceData:"surface",inertia:!0,preventDragging:clickedElement=>null!==clickedElement.closest("a, .form, .btn, .toolbox-btn, .toolbox-dropdown .cropbox"),ondragend:()=>{if(!view||!view.component)return;const rect=element.getBoundingClientRect(),settingsString=localStorage.settings;let settings={};settingsString&&(settings=JSON.parse(settingsString)),Objects.setValueWithCompensation(view.component.name+"/top",settings,Math.floor(rect.top)),Objects.setValueWithCompensation(view.component.name+"/left",settings,Math.floor(rect.left)),localStorage.settings=JSON.stringify(settings)}}},null),ko.applyBindingsToNode(element,{resizable:{directions:view.resize,onresize:()=>{if(!view||!view.component)return;const settingsString=localStorage.settings;let settings={};settingsString&&(settings=JSON.parse(settingsString)),view.resize.includes("horizontally")&&Objects.setValueWithCompensation(view.component.name+"/width",settings,element.clientWidth),view.resize.includes("vertically")&&Objects.setValueWithCompensation(view.component.name+"/height",settings,element.clientHeight),localStorage.settings=JSON.stringify(settings)}}},null)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const ko=__webpack_require__(0);ko.bindingHandlers.gridCommand={init(element,valueAccessor){const command=valueAccessor();if(!command)return;const bindings={background:{color:command.color},attr:{title:command.tooltip}};command.component&&(bindings.balloon={target:"#sc-"+command.component.name,position:"top"}),command.callback&&(bindings.click=command.callback),ko.applyBindingsToNode(element,bindings,null)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const ko=__webpack_require__(0);ko.bindingHandlers.alignment={init:(arrowElement,valueAccessor)=>{const config=ko.unwrap(valueAccessor()),alignment=arrowElement.getAttribute("alignment");ko.applyBindingsToNode(arrowElement,{click:()=>{config.onChange(alignment)},css:{active:ko.pureComputed(()=>config.position()===alignment)}},null)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const ko=__webpack_require__(0);ko.bindingHandlers.size={update:(element,valueAccessor)=>{const config=valueAccessor(),width=ko.unwrap(config.width),height=ko.unwrap(config.height);width?element.setAttribute("width",width):element.removeAttribute("width"),height?element.setAttribute("height",height):element.removeAttribute("height"),element.style.width=width?width+"px":null,element.style.height=height?height+"px":null}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const ko=__webpack_require__(0);ko.bindingHandlers.validationMessageToggle={init:(triggerElement,valueAccessor)=>{const observable=valueAccessor();ko.isObservable(observable)&&observable.isValid?ko.applyBindingsToNode(triggerElement,{visible:ko.pureComputed(()=>!observable.isValid()),balloon:{component:{name:"tooltip",params:{text:observable.error}},position:"top",isOpen:ko.observable()}},null):console.warn("No validation assigned to observable for element: "+triggerElement.nodeType)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const ko=__webpack_require__(0),bindingHandlers_balloon_1=__webpack_require__(256);ko.bindingHandlers.tooltip={init:(triggerElement,valueAccessor)=>{const options=valueAccessor();if(!options)return;let tooltipMessage,tooltipDelayMs,balloonHandle,tooltipPosition="top";if("string"==typeof options||ko.isObservable(options)?tooltipMessage=options:(tooltipMessage=options.message,tooltipPosition=options.position||"top",tooltipDelayMs=options.delay),!tooltipMessage)return;const isOpen=ko.observable(),textParams={};let closeTimeout=0;ko.isObservable(tooltipMessage)?(textParams.observableText=tooltipMessage,closeTimeout=5e3,tooltipMessage.subscribe(()=>{balloonHandle&&balloonHandle.updatePosition()})):textParams.text=tooltipMessage,ko.applyBindingsToNode(triggerElement,{balloon:{component:{name:"tooltip",params:textParams},position:tooltipPosition,delay:tooltipDelayMs||700,isOpen:isOpen,activateOn:bindingHandlers_balloon_1.BalloonActivationOptions.hoverOrFocus,closeTimeout:closeTimeout,onCreated:handle=>{balloonHandle=handle}}},null)}}},function(module,exports,__webpack_require__){"use strict";(function(setImmediate){var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.BalloonBindingHandler=exports.BalloonActivationOptions=void 0;const ko=__webpack_require__(0),keyboard_1=__webpack_require__(93);var BalloonActivationOptions;!function(BalloonActivationOptions){BalloonActivationOptions.click="click",BalloonActivationOptions.hoverOrFocus="hoverOrFocus"}(BalloonActivationOptions=exports.BalloonActivationOptions||(exports.BalloonActivationOptions={}));exports.BalloonBindingHandler=class{constructor(viewStack){ko.bindingHandlers.balloon={init:(toggleElement,valueAccessor)=>{const options=ko.unwrap(valueAccessor()),activateOn=options.activateOn||BalloonActivationOptions.click;let view,balloonElement,balloonTipElement,closeTimeout,createBalloonElement,inBalloon=!1,isHoverOver=!1,balloonIsOpen=!1;options.component&&(createBalloonElement=()=>{balloonElement=document.createElement("div"),balloonElement.classList.add("balloon"),ko.applyBindingsToNode(balloonElement,{component:options.component},null),document.body.appendChild(balloonElement)}),options.template&&(createBalloonElement=()=>{balloonElement=document.createElement("div"),balloonElement.classList.add("balloon"),ko.applyBindingsToNode(balloonElement,{template:options.template},null),document.body.appendChild(balloonElement)});const removeBalloon=()=>{balloonElement&&(delete toggleElement.activeBalloon,ko.cleanNode(balloonElement),balloonElement.remove(),balloonElement=null,balloonTipElement.remove(),balloonTipElement=null,viewStack.removeView(view))},resetCloseTimeout=()=>{options.closeTimeout&&(clearTimeout(closeTimeout),closeTimeout=setTimeout(close,options.closeTimeout))},updatePosition=()=>__awaiter(this,void 0,void 0,(function*(){if(!balloonElement||!balloonElement)return;const preferredPosition=options.position,preferredDirection="left"===preferredPosition||"right"===preferredPosition?"horizontal":"vertical",triggerRect=toggleElement.getBoundingClientRect(),balloonRect=balloonElement.getBoundingClientRect(),spaceTop=triggerRect.top,spaceBottom=window.innerHeight-triggerRect.bottom,spaceLeft=triggerRect.left,spaceRight=window.innerWidth-triggerRect.height;let balloonLeft,balloonTop,balloonBottom,selectedPosition,positionX,positionY,availableSpaceX,availableSpaceY,balloonTipX,balloonTipY,balloonHeight=balloonRect.height,balloonWidth=balloonRect.width;switch("vertical"===preferredDirection?spaceTop>spaceBottom?(positionY="top",availableSpaceY=spaceTop-10-10):(positionY="bottom",availableSpaceY=spaceBottom-10-10):spaceLeft>spaceRight?(positionX="left",availableSpaceX=spaceLeft-10):(positionX="right",availableSpaceX=spaceRight-10),balloonRect.height>availableSpaceY&&(balloonHeight=availableSpaceY),balloonRect.width>availableSpaceX&&(balloonWidth=availableSpaceX),positionY){case"top":balloonTop=triggerRect.top,balloonTop-balloonHeight<0&&(positionY="bottom");break;case"bottom":balloonTop=triggerRect.top+triggerRect.height,balloonTop+balloonHeight>window.innerHeight&&(positionY="top")}switch(positionX){case"left":balloonLeft=triggerRect.left,balloonLeft-balloonWidth<0&&(positionX="right");break;case"right":balloonLeft=triggerRect.left+triggerRect.width,balloonLeft+balloonWidth>window.innerWidth&&(positionX="left")}if(balloonTipElement.classList.remove("balloon-top"),balloonTipElement.classList.remove("balloon-bottom"),balloonTipElement.classList.remove("balloon-left"),balloonTipElement.classList.remove("balloon-right"),"vertical"===preferredDirection)switch(positionY){case"top":balloonTop=triggerRect.top-balloonHeight-10,balloonLeft=triggerRect.left+Math.floor(triggerRect.width/2)-Math.floor(balloonWidth/2),balloonTipX=triggerRect.left+Math.floor(triggerRect.width/2)-Math.floor(5),balloonTipY=triggerRect.top-Math.floor(5)-10,balloonTipElement.classList.add("balloon-top"),selectedPosition="top";break;case"bottom":balloonTop=triggerRect.top+triggerRect.height+10,balloonLeft=triggerRect.left+Math.floor(triggerRect.width/2)-Math.floor(balloonWidth/2),balloonTipX=triggerRect.left+Math.floor(triggerRect.width/2)-Math.floor(5),balloonTipY=triggerRect.bottom-Math.floor(5)+10,balloonTipElement.classList.add("balloon-bottom"),selectedPosition="bottom"}else switch(positionX){case"left":balloonTop=triggerRect.top+Math.floor(triggerRect.height/2)-Math.floor(balloonHeight/2),balloonLeft=triggerRect.left-balloonWidth-10,balloonTipX=triggerRect.left-Math.floor(5)-10,balloonTipY=triggerRect.top+Math.floor(triggerRect.height/2)-Math.floor(5),balloonTipElement.classList.add("balloon-left"),selectedPosition="left";break;case"right":balloonTop=triggerRect.top+Math.floor(triggerRect.height/2)-Math.floor(balloonHeight/2),balloonLeft=triggerRect.right+10,balloonTipX=triggerRect.right-Math.floor(5)+10,balloonTipY=triggerRect.top+Math.floor(triggerRect.height/2)-Math.floor(5),balloonTipElement.classList.add("balloon-right"),selectedPosition="right"}switch(balloonTop<10&&(balloonTop=10),balloonBottom=balloonTop+balloonHeight>innerHeight-10?10:innerHeight-(balloonTop+balloonHeight),balloonLeft<10&&(balloonLeft=10),delete balloonElement.style.top,delete balloonElement.style.bottom,delete balloonElement.style.left,delete balloonElement.style.right,selectedPosition){case"top":balloonElement.style.bottom=balloonBottom+"px",balloonElement.style.left=balloonLeft+"px";break;case"bottom":balloonElement.style.top=balloonTop+"px",balloonElement.style.left=balloonLeft+"px";break;case"left":case"right":balloonElement.style.top=balloonTop+"px",balloonElement.style.height=balloonHeight+"px",balloonElement.style.left=balloonLeft+"px"}balloonElement.style.maxHeight=availableSpaceY+"px",balloonElement.style.maxWidth=availableSpaceX+"px",balloonTipElement.style.top=balloonTipY+"px",balloonTipElement.style.left=balloonTipX+"px"})),open=returnFocusTo=>{if(resetCloseTimeout(),balloonIsOpen)return;const existingBalloonHandle=toggleElement.activeBalloon;if(existingBalloonHandle){if(activateOn===BalloonActivationOptions.hoverOrFocus)return;existingBalloonHandle.close()}setImmediate(()=>{const activeBalloonHandle=toggleElement.activeBalloon;if(activeBalloonHandle){if(activateOn===BalloonActivationOptions.hoverOrFocus)return;activeBalloonHandle.close()}createBalloonElement(),balloonTipElement=document.createElement("div"),balloonTipElement.classList.add("balloon-tip"),document.body.appendChild(balloonTipElement),view={close:close,element:balloonElement,returnFocusTo:returnFocusTo,hitTest:targetElement=>!!(closest(targetElement,x=>x===balloonElement)||closest(targetElement,x=>x===toggleElement))},viewStack.runHitTest(toggleElement),viewStack.pushView(view),toggleElement.activeBalloon=ballonHandle,balloonElement.classList.add("balloon-is-active"),requestAnimationFrame(updatePosition),balloonIsOpen=!0,options.onOpen&&options.onOpen(),activateOn===BalloonActivationOptions.hoverOrFocus&&(balloonElement.addEventListener("mouseenter",()=>{inBalloon=!0}),balloonElement.addEventListener("mouseleave",()=>{inBalloon=!1,checkCloseHoverBalloon()}))})},close=()=>{balloonElement&&(balloonIsOpen=!1,options.onClose&&options.onClose(),removeBalloon(),options.isOpen&&options.isOpen()&&options.isOpen(!1))},toggle=()=>{resetCloseTimeout(),balloonIsOpen?options.closeTimeout||close():open(toggleElement)},ballonHandle={open:open,close:close,toggle:toggle,updatePosition:()=>requestAnimationFrame(updatePosition),activateOn:activateOn};options.onCreated&&options.onCreated(ballonHandle);const closest=(node,predicate)=>{do{if(predicate(node))return node;node=node.parentNode}while(node)},onPointerDown=event=>__awaiter(this,void 0,void 0,(function*(){if(!toggleElement)return;const targetElement=event.target;closest(targetElement,node=>node===toggleElement)&&toggle()})),onFocus=()=>__awaiter(this,void 0,void 0,(function*(){open()})),onBlur=()=>__awaiter(this,void 0,void 0,(function*(){close()})),onMouseEnter=event=>__awaiter(this,void 0,void 0,(function*(){isHoverOver=!0,setTimeout(()=>{isHoverOver&&open()},options.delay||0)})),onMouseLeave=event=>__awaiter(this,void 0,void 0,(function*(){isHoverOver=!1,checkCloseHoverBalloon()})),checkCloseHoverBalloon=()=>__awaiter(this,void 0,void 0,(function*(){setTimeout(()=>{isHoverOver||inBalloon||close()},50)})),onKeyDown=event=>__awaiter(this,void 0,void 0,(function*(){switch(event.keyCode){case keyboard_1.Keys.Enter:case keyboard_1.Keys.Space:event.preventDefault(),toggle()}})),onClick=event=>{event.preventDefault()},onScroll=event=>__awaiter(this,void 0,void 0,(function*(){balloonElement&&requestAnimationFrame(updatePosition)}));switch(options.closeOn&&options.closeOn.subscribe(()=>close()),toggleElement.addEventListener("click",onClick),window.addEventListener("scroll",onScroll,!0),document.addEventListener("mousedown",onPointerDown,!0),activateOn){case BalloonActivationOptions.click:toggleElement.addEventListener("keydown",onKeyDown);break;case BalloonActivationOptions.hoverOrFocus:toggleElement.addEventListener("mouseenter",onMouseEnter),toggleElement.addEventListener("mouseleave",onMouseLeave);break;default:throw new Error("Unknown balloon trigger event: "+activateOn)}ko.utils.domNodeDisposal.addDisposeCallback(toggleElement,()=>{switch(window.removeEventListener("mousedown",onPointerDown,!0),toggleElement.removeEventListener("click",onClick),activateOn){case BalloonActivationOptions.click:toggleElement.removeEventListener("keydown",onKeyDown);break;case BalloonActivationOptions.hoverOrFocus:toggleElement.removeEventListener("mouseenter",onMouseEnter),toggleElement.removeEventListener("mouseleave",onMouseLeave),toggleElement.removeEventListener("focus",onFocus),toggleElement.removeEventListener("blur",onBlur);break;default:throw new Error("Unknown balloon trigger event: "+activateOn)}removeBalloon(),window.removeEventListener("scroll",onScroll,!0)})}}}}}).call(this,__webpack_require__(60).setImmediate)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const ko=__webpack_require__(0),common_1=__webpack_require__(19);ko.bindingHandlers.collapse={init:(triggerElement,valueAccessor)=>{setTimeout(()=>{const targetSelector=ko.unwrap(valueAccessor()),targetElement=document.querySelector(targetSelector);if(!targetElement)return;const visibleObservable=ko.observable(true);triggerElement.setAttribute("role","button"),triggerElement.setAttribute("aria-label","Toggle section"),triggerElement.setAttribute("aria-expanded",true.toString()),targetElement.setAttribute("role","region"),targetElement.setAttribute("aria-hidden",(!1).toString());const toggle=()=>{const newValue=!visibleObservable();visibleObservable(newValue),triggerElement.setAttribute("aria-expanded",newValue.toString()),targetElement&&targetElement.setAttribute("aria-hidden",(!newValue).toString())},onPointerDown=event=>{0===event.button&&toggle()},onClick=event=>{event.preventDefault(),event.stopImmediatePropagation()},onKeyDown=event=>{event.keyCode!==common_1.Keys.Enter&&event.keyCode!==common_1.Keys.Space||toggle()};triggerElement.addEventListener("click",onClick),triggerElement.addEventListener("keydown",onKeyDown),triggerElement.addEventListener("mousedown",onPointerDown),ko.applyBindingsToNode(targetElement,{css:{collapsed:ko.pureComputed(()=>!visibleObservable())}},null),ko.applyBindingsToNode(triggerElement,{css:{collapsed:ko.pureComputed(()=>!visibleObservable())}},null),ko.utils.domNodeDisposal.addDisposeCallback(triggerElement,()=>{triggerElement.removeEventListener("click",onClick),triggerElement.removeEventListener("keydown",onKeyDown),triggerElement.removeEventListener("mousedown",onPointerDown)})},100)}},ko.bindingHandlers.log={init:(triggerElement,valueAccessor)=>{console.log(valueAccessor())}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0});const ko=__webpack_require__(0);ko.bindingHandlers.stickTo={init(element,valueAccessor){const config=valueAccessor(),updatePosition=()=>{if(!config.target)return;const parentRect=config.target.ownerDocument.defaultView.frameElement.getBoundingClientRect(),rect=config.target.getBoundingClientRect(),placement=config.placement||"border";let coordX,coordY;element.style.right=null,element.style.left=null,coordX=rect.left+Math.floor(rect.width/2)-Math.floor(element.clientWidth/2),coordY=rect.top+Math.floor(rect.height/2)-Math.floor(element.clientHeight/2),config.position.indexOf("top")>=0&&(coordY=rect.top,"border"===placement&&(coordY-=Math.floor(element.clientHeight/2))),config.position.indexOf("bottom")>=0&&(coordY=rect.top+rect.height-element.clientHeight,"border"===placement&&(coordY+=Math.floor(element.clientHeight/2))),config.position.indexOf("left")>=0?element.style.left=parentRect.left+rect.left+10+"px":config.position.indexOf("right")>=0?element.style.right=parentRect.right-rect.right+10+"px":element.style.left=parentRect.left+coordX+"px",element.style.top=parentRect.top+coordY+"px"};updatePosition();const onScroll=event=>__awaiter(this,void 0,void 0,(function*(){requestAnimationFrame(updatePosition)}));window.addEventListener("scroll",onScroll,!0),ko.utils.domNodeDisposal.addDisposeCallback(element,()=>{window.removeEventListener("scroll",onScroll,!0)})}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const ko=__webpack_require__(0),perfect_scrollbar_1=__webpack_require__(674);ko.bindingHandlers.scrollable={init:(element,valueAccessor)=>{const config=ko.unwrap(valueAccessor()),configType=typeof config;let scrollbar=new perfect_scrollbar_1.default(element);"object"===configType&&config.onEndReach&&element.addEventListener("ps-y-reach-end",()=>{config.onEndReach()});element.querySelector(".ps__thumb-y").setAttribute("aria-label","Vertical scrollbar");const checkElementSize=()=>{requestAnimationFrame(()=>{scrollbar&&(scrollbar.update(),setTimeout(checkElementSize,100))})};checkElementSize(),ko.utils.domNodeDisposal.addDisposeCallback(element,()=>{scrollbar.destroy(),scrollbar=null})}},ko.bindingHandlers.scrolledIntoView={init:(element,valueAccessor)=>{const config=ko.unwrap(valueAccessor());let scrollTimeout;const checkInView=()=>{const elementRect=element.getBoundingClientRect(),parentElementRect=element.parentElement.getBoundingClientRect();(elementRect.top>=parentElementRect.top&&elementRect.top<=parentElementRect.bottom||elementRect.bottom>=parentElementRect.top&&elementRect.bottom<=parentElementRect.bottom)&&config.onInView&&config.onInView()},onParentScroll=()=>{clearTimeout(scrollTimeout),scrollTimeout=setTimeout(checkInView,200)};element.parentElement.addEventListener("scroll",onParentScroll),checkInView(),ko.utils.domNodeDisposal.addDisposeCallback(element,()=>{element.parentElement.removeEventListener("scroll",onParentScroll)})}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const ko=__webpack_require__(0);ko.bindingHandlers.slider={init:(element,valueAccessor,allBindings,viewModel,bindingContext)=>{const config=ko.unwrap(valueAccessor()),parentWidth=element.parentElement.getBoundingClientRect().width,offset=config.offset||0,data=bindingContext.$data;let percentage=ko.unwrap(config.percentage)||0,dragging=!1,initialOffset=null;element.style.left=1*parentWidth/100*percentage-offset+"px";const onMouseDown=event=>{dragging=!0,initialOffset=event.pageX-element.offsetLeft},onMouseUp=event=>{dragging=!1,config.onChange&&config.onChange(data,percentage),ko.isObservable(config.percentage)&&config.percentage(percentage)},onMouseMove=event=>{if(!dragging)return;const parentRect=element.parentElement.getBoundingClientRect();let x=event.pageX;x<parentRect.x&&(x=parentRect.x),x>parentRect.x+parentRect.width&&(x=parentRect.x+parentRect.width);const position=x-initialOffset;percentage=Math.floor((position+offset)/parentWidth*100),percentage<0||(element.style.left=position+"px",config.onChange&&config.onChange(data,percentage),ko.isObservable(config.percentage)&&config.percentage(percentage))};element.addEventListener("mousedown",onMouseDown),window.addEventListener("mouseup",onMouseUp,!0),window.addEventListener("mousemove",onMouseMove,!0),ko.utils.domNodeDisposal.addDisposeCallback(element,()=>{element.removeEventListener("mousedown",onMouseDown),window.removeEventListener("mouseup",onMouseUp,!0),window.removeEventListener("mousemove",onMouseMove,!0)})}}},function(module,exports,__webpack_require__){"use strict";(function(setImmediate){Object.defineProperty(exports,"__esModule",{value:!0});__webpack_require__(0).bindingHandlers.selectable={init:(element,valueAccessor)=>{setImmediate(()=>{element.classList.contains("selected")&&element.scrollIntoView({block:"center"})})}}}).call(this,__webpack_require__(60).setImmediate)},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(679),exports),__exportStar(__webpack_require__(685),exports),__exportStar(__webpack_require__(266),exports),__exportStar(__webpack_require__(265),exports),__exportStar(__webpack_require__(264),exports)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AnchorUtils=void 0;class AnchorUtils{static findNodesRecursively(source,searchPredicate,filterPredicate){const result=[];searchPredicate(source)&&result.push(source);return Object.keys(source).forEach(key=>{const child=source[key];if(child instanceof Object&&filterPredicate(child)){const childResult=this.findNodesRecursively(child,searchPredicate,filterPredicate);result.push.apply(result,childResult)}}),result}static getHeadingNodes(pageContent,minHeading=1,maxHeading=1){if(!pageContent)throw new Error('Parameter "pageContent" not specified.');return AnchorUtils.findNodesRecursively(pageContent,node=>node.type&&node.type.startsWith("heading"),node=>{if(node instanceof Array)return!0;if(!node.type)return!1;const nodeType=node.type;if(nodeType.startsWith("heading")){const headingLevel=parseInt(nodeType.slice(-1));if(headingLevel>=minHeading&&headingLevel<=maxHeading)return!0}else if(["layout-section","layout-row","layout-column","text-block","grid","grid-cell"].includes(nodeType))return!0;return!1}).filter(item=>{var _a,_b;return item.identifier||(null===(_a=item.attrs)||void 0===_a?void 0:_a.id)||(null===(_b=item.attrs)||void 0===_b?void 0:_b.key)})}}exports.AnchorUtils=AnchorUtils},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuViewModelBinder=void 0;const menuViewModel_1=__webpack_require__(265),menuModel_1=__webpack_require__(101),menuItemViewModel_1=__webpack_require__(684),navigation_1=__webpack_require__(37);exports.MenuViewModelBinder=class{constructor(eventManager,menuModelBinder,styleCompiler){this.eventManager=eventManager,this.menuModelBinder=menuModelBinder,this.styleCompiler=styleCompiler}menuItemModelToViewModel(navitem,level=0){level++;const viewModel=new menuItemViewModel_1.MenuItemViewModel;return viewModel.label(navitem.label),viewModel.url(navitem.targetUrl),viewModel.isActive(navitem.isActive),viewModel.level(level),navitem.nodes&&viewModel.nodes(navitem.nodes.map(x=>this.menuItemModelToViewModel(x,level))),viewModel}modelToViewModel(model,viewModel,bindingContext){return __awaiter(this,void 0,void 0,(function*(){viewModel||(viewModel=new menuViewModel_1.MenuViewModel);const menuItems=model.items.map(menuItem=>this.menuItemModelToViewModel(menuItem));viewModel.nodes(menuItems),viewModel.layout(model.layout),viewModel.roles(model.roles),model.styles&&viewModel.styles(yield this.styleCompiler.getStyleModelAsync(model.styles,null==bindingContext?void 0:bindingContext.styleManager));const onUpdate=updatedRootModel=>__awaiter(this,void 0,void 0,(function*(){var _a;if(updatedRootModel.key===(null===(_a=model.navigationItem)||void 0===_a?void 0:_a.key)){const menuItems=updatedRootModel.nodes.map(menuItem=>this.menuItemModelToViewModel(menuItem));viewModel.nodes(menuItems)}})),binding={name:"menu",displayName:"Menu",readonly:!!bindingContext&&bindingContext.readonly,model:model,draggable:!0,editor:"menu-editor",applyChanges:updates=>__awaiter(this,void 0,void 0,(function*(){var _b;const contract={type:"menu",navigationItemKey:null===(_b=updates.navigationItem)||void 0===_b?void 0:_b.key,layout:updates.layout,roles:updates.roles,minHeading:updates.minHeading,maxHeading:updates.maxHeading,styles:updates.styles},model1=yield this.menuModelBinder.contractToModel(contract,bindingContext);model.navigationItem=model1.navigationItem,model.items=model1.items,model.layout=model1.layout,model.roles=model1.roles,model.minHeading=model1.minHeading,model.maxHeading=model1.maxHeading,model.styles=model1.styles,yield this.modelToViewModel(model,viewModel,bindingContext),this.eventManager.dispatchEvent("onContentUpdate")})),onCreate:()=>{this.eventManager.addEventListener(navigation_1.NavigationEvents.onNavigationItemUpdate,onUpdate)},onDispose:()=>{this.eventManager.removeEventListener(navigation_1.NavigationEvents.onNavigationItemUpdate,onUpdate)}};return viewModel.widgetBinding=binding,viewModel}))}canHandleModel(model){return model instanceof menuModel_1.MenuModel}}},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuViewModel=void 0;const ko=__webpack_require__(0),menu_html_1=__webpack_require__(681),horizontalMenu_html_1=__webpack_require__(682),verticalMenu_html_1=__webpack_require__(683),decorators_1=__webpack_require__(2);let MenuViewModel=class{constructor(){this.nodes=ko.observableArray([]),this.layout=ko.observable("vertical"),this.roles=ko.observableArray(),this.styles=ko.observable(),this.isEmpty=ko.pureComputed(()=>!1),this.css=ko.pureComputed(()=>({"nav-horizontal":"horizontal"===this.layout(),"nav-vertical":"vertical"===this.layout(),"nav-full":"sitemap"===this.layout()}))}};MenuViewModel=__decorate([decorators_1.Component({selector:"menu",template:menu_html_1.default,childTemplates:{horizontalMenu:horizontalMenu_html_1.default,verticalMenu:verticalMenu_html_1.default}}),__metadata("design:paramtypes",[])],MenuViewModel),exports.MenuViewModel=MenuViewModel},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuEditor=void 0;const ko=__webpack_require__(0),menuEditor_html_1=__webpack_require__(687),decorators_1=__webpack_require__(2),styles_1=__webpack_require__(47),menuModel_1=__webpack_require__(101);let MenuEditor=class{constructor(styleService){this.styleService=styleService,this.showHeadings=ko.observable(),this.minHeadingLevel=ko.observable(),this.maxHeadingLevel=ko.observable(),this.layout=ko.observable(),this.appearanceStyles=ko.observableArray(),this.appearanceStyle=ko.observable(),this.headingLevelOptions=ko.observableArray([{label:"Heading 1",value:1},{label:"Heading 2",value:2},{label:"Heading 3",value:3},{label:"Heading 4",value:4},{label:"Heading 5",value:5},{label:"Heading 6",value:6}]),this.layoutOptions=ko.observableArray([{label:"Horizontal menu",value:"horizontal"},{label:"Vertical menu",value:"vertical"}]),this.navigationItemTitle=ko.observable()}initialize(){var _a,_b;return __awaiter(this,void 0,void 0,(function*(){this.showHeadings(!!this.model.minHeading||!!this.model.maxHeading),this.minHeadingLevel(this.model.minHeading||1),this.maxHeadingLevel(this.model.maxHeading||6);const variations=yield this.styleService.getComponentVariations("menu");this.appearanceStyles(variations.filter(x=>"appearance"===x.category)),this.appearanceStyle(null===(_a=this.model.styles)||void 0===_a?void 0:_a.appearance),this.navigationItemTitle((null===(_b=this.model.navigationItem)||void 0===_b?void 0:_b.label)||"Click to select navigation item..."),this.layout(this.model.layout),this.minHeadingLevel.subscribe(this.applyChanges),this.maxHeadingLevel.subscribe(this.applyChanges),this.layout.subscribe(this.applyChanges),this.showHeadings.subscribe(this.applyChanges),this.appearanceStyle.subscribe(this.applyChanges)}))}onNavigationItemChange(navigationItem){return __awaiter(this,void 0,void 0,(function*(){this.model.navigationItem=navigationItem,this.navigationItemTitle((null==navigationItem?void 0:navigationItem.label)||"Click to select navigation item..."),this.applyChanges()}))}applyChanges(){this.showHeadings()?(this.model.minHeading=this.minHeadingLevel(),this.model.maxHeading=this.maxHeadingLevel()):(this.model.minHeading=null,this.model.maxHeading=null),this.model.layout=this.layout(),this.model.styles={appearance:this.appearanceStyle()},this.onChange(this.model)}onRoleSelect(roles){this.model.roles=roles,this.applyChanges()}};__decorate([decorators_1.Param(),__metadata("design:type",menuModel_1.MenuModel)],MenuEditor.prototype,"model",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],MenuEditor.prototype,"onChange",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],MenuEditor.prototype,"initialize",null),MenuEditor=__decorate([decorators_1.Component({selector:"menu-editor",template:menuEditor_html_1.default}),__metadata("design:paramtypes",[styles_1.StyleService])],MenuEditor),exports.MenuEditor=MenuEditor},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.NavbarViewModel=void 0;const ko=__webpack_require__(0),navbar_html_1=__webpack_require__(690),decorators_1=__webpack_require__(2);let NavbarViewModel=class{constructor(){this.navigationRoot=ko.observable(),this.pictureSourceUrl=ko.observable(),this.pictureWidth=ko.observable(),this.pictureHeight=ko.observable(),this.styles=ko.observable()}};NavbarViewModel=__decorate([decorators_1.Component({selector:"navbar",template:navbar_html_1.default}),__metadata("design:paramtypes",[])],NavbarViewModel),exports.NavbarViewModel=NavbarViewModel},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NavbarModel=void 0;exports.NavbarModel=class{}},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PictureViewModel=void 0;const ko=__webpack_require__(0),picture_html_1=__webpack_require__(697),decorators_1=__webpack_require__(2);let PictureViewModel=class{constructor(){this.sourceUrl=ko.observable(),this.caption=ko.observable(),this.hyperlink=ko.observable(),this.width=ko.observable(),this.height=ko.observable(),this.styles=ko.observable()}};PictureViewModel=__decorate([decorators_1.Component({selector:"paperbits-picture",template:picture_html_1.default}),__metadata("design:paramtypes",[])],PictureViewModel),exports.PictureViewModel=PictureViewModel},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.RowViewModel=void 0;const ko=__webpack_require__(0),row_html_1=__webpack_require__(699),decorators_1=__webpack_require__(2);let RowViewModel=class{constructor(){this.widgets=ko.observableArray(),this.alignSm=ko.observable(),this.alignMd=ko.observable(),this.alignLg=ko.observable(),this.justifySm=ko.observable(),this.justifyMd=ko.observable(),this.justifyLg=ko.observable(),this.css=ko.computed(()=>{let css="";return this.alignSm()&&(css+=" "+this.alignSm()+"-sm"),this.alignMd()&&(css+=" "+this.alignMd()+"-md"),this.alignLg()&&(css+=" "+this.alignLg()+"-lg"),this.justifySm()&&(css+=" "+this.justifySm()+"-sm"),this.justifyMd()&&(css+=" "+this.justifyMd()+"-md"),this.justifyLg()&&(css+=" "+this.justifyLg()+"-lg"),css})}};RowViewModel=__decorate([decorators_1.Component({selector:"layout-row",template:row_html_1.default}),__metadata("design:paramtypes",[])],RowViewModel),exports.RowViewModel=RowViewModel},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RowHandlers=void 0;exports.RowHandlers=class{constructor(viewManager){this.viewManager=viewManager}getContextualEditor(context){return{color:"#29c4a9",hoverCommands:[{color:"#29c4a9",position:context.half,tooltip:"Add row",component:{name:"row-layout-selector",params:{onSelect:newRowModel=>{let index=context.parentModel.widgets.indexOf(context.model);"bottom"===context.half&&index++,context.parentModel.widgets.splice(index,0,newRowModel),context.parentBinding.applyChanges(),this.viewManager.clearContextualEditors()}}}}],selectCommands:null,deleteCommand:{tooltip:"Delete row",color:"#29c4a9",callback:()=>{context.parentModel.widgets.remove(context.model),context.parentBinding.applyChanges(),this.viewManager.clearContextualEditors()}}}}}},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SectionViewModel=void 0;const ko=__webpack_require__(0),section_html_1=__webpack_require__(703),decorators_1=__webpack_require__(2);let SectionViewModel=class{constructor(){this.widgets=ko.observableArray(),this.styles=ko.observable()}};SectionViewModel=__decorate([decorators_1.Component({selector:"layout-section",template:section_html_1.default}),__metadata("design:paramtypes",[])],SectionViewModel),exports.SectionViewModel=SectionViewModel},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.TestimonialsModelBinder=void 0;const _1=__webpack_require__(706);exports.TestimonialsModelBinder=class{constructor(){this.contractToModel=this.contractToModel.bind(this)}canHandleContract(contract){return"testimonials"===contract.type}canHandleModel(model){return model instanceof _1.TestimonialsModel}contractToModel(contract){return __awaiter(this,void 0,void 0,(function*(){const model=new _1.TestimonialsModel;return model.textContent=contract.textContent,model.allStarsCount=contract.allStarsCount||0,model.starsCount=contract.starsCount||0,model.author=contract.author,model.authorTitle=contract.authorTitle,model}))}modelToContract(model){return{type:"testimonials",textContent:model.textContent,starsCount:model.starsCount,allStarsCount:model.allStarsCount,author:model.author,authorTitle:model.authorTitle}}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.TestimonialsHandlers=void 0;const testimonialsModel_1=__webpack_require__(103);exports.TestimonialsHandlers=class{getWidgetOrder(){return __awaiter(this,void 0,void 0,(function*(){return{name:"testimonials",displayName:"Testimonials",iconClass:"paperbits-favourite-31",requires:["html","js"],createModel:()=>__awaiter(this,void 0,void 0,(function*(){const model=new testimonialsModel_1.TestimonialsModel;return model.starsCount=5,model.allStarsCount=5,model.author="John Doe",model.authorTitle="CEO at Contoso",model.textContent="Testimonials text",model}))}}))}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.TextblockViewModelBinder=void 0;const textblockModel_1=__webpack_require__(83),textblockViewModel_1=__webpack_require__(276);exports.TextblockViewModelBinder=class{constructor(htmlEditorFactory,eventManager){this.htmlEditorFactory=htmlEditorFactory,this.eventManager=eventManager}modelToViewModel(model,viewModel,bindingContext){return __awaiter(this,void 0,void 0,(function*(){viewModel||(viewModel=new textblockViewModel_1.TextblockViewModel(this.htmlEditorFactory.createHtmlEditor())),model.htmlEditor=viewModel.htmlEditor,viewModel.state(model.state);const widgetBinding={displayName:"Text",readonly:!!bindingContext&&bindingContext.readonly,model:model,draggable:!0,flow:"block",editor:"html-editor",editorResize:"horizontally",applyChanges:changes=>__awaiter(this,void 0,void 0,(function*(){yield this.modelToViewModel(model,viewModel,bindingContext),this.eventManager.dispatchEvent("onContentUpdate")}))};return viewModel.widgetBinding=widgetBinding,viewModel}))}canHandleModel(model){return model instanceof textblockModel_1.TextblockModel}}},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.TextblockViewModel=void 0;const ko=__webpack_require__(0),textblock_html_1=__webpack_require__(712),decorators_1=__webpack_require__(2);let TextblockViewModel=class{constructor(htmlEditor){this.htmlEditor=htmlEditor,this.state=ko.observable(),this.readonly=ko.observable(!1)}};TextblockViewModel=__decorate([decorators_1.Component({selector:"paperbits-text",template:textblock_html_1.default}),__metadata("design:paramtypes",[Object])],TextblockViewModel),exports.TextblockViewModel=TextblockViewModel},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.TextblockModelBinder=void 0;const textblockModel_1=__webpack_require__(83);exports.TextblockModelBinder=class{constructor(modelBinderSelector){this.modelBinderSelector=modelBinderSelector}contractToModel(contract,bindingContext){return __awaiter(this,void 0,void 0,(function*(){let content=[];if(contract.nodes&&contract.nodes.length>0){const modelPromises=contract.nodes.map(contract=>__awaiter(this,void 0,void 0,(function*(){const modelBinder=this.modelBinderSelector.getModelBinderByContract(contract);return yield modelBinder.contractToModel(contract,bindingContext)})));content=yield Promise.all(modelPromises)}return new textblockModel_1.TextblockModel(content)}))}canHandleContract(contract){return"text-block"===contract.type}canHandleModel(model){return model instanceof textblockModel_1.TextblockModel}modelToContract(model){let state;model.htmlEditor&&(model.state=model.htmlEditor.getState());if(Array.isArray(model.state)){const contentItems=model.state;contentItems&&contentItems.length>0&&(state=contentItems.map(contentItem=>this.modelBinderSelector.getModelBinderByModel(contentItem).modelToContract(contentItem)))}return{type:"text-block",nodes:state}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HtmlEditorBindingHandler=void 0;const ko=__webpack_require__(0);exports.HtmlEditorBindingHandler=class{constructor(eventManager){ko.bindingHandlers.htmlEditor={init(element,valueAccessor){const config=valueAccessor(),stateObservable=config.state,htmlEditor=ko.unwrap(config.htmlEditor),onEscapeKeyPressed=()=>htmlEditor.detachFromElement();eventManager.addEventListener("onEscape",onEscapeKeyPressed);const onWidgetEditorClose=()=>htmlEditor.detachFromElement();eventManager.addEventListener("onWidgetEditorClose",onWidgetEditorClose);const onHtmlEditorRequested=()=>{config.readonly()||htmlEditor.enable()};htmlEditor.attachToElement(element),htmlEditor.setState(stateObservable()),stateObservable.subscribe(state=>htmlEditor.setState(state)),eventManager.addEventListener("enableHtmlEditor",onHtmlEditorRequested),ko.utils.domNodeDisposal.addDisposeCallback(element,()=>{eventManager.removeEventListener("onEscape",onEscapeKeyPressed),eventManager.removeEventListener("onWidgetEditorClose",onWidgetEditorClose),eventManager.removeEventListener("enableHtmlEditor",onHtmlEditorRequested),htmlEditor.detachFromElement()})}}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListModel=void 0;const blockModel_1=__webpack_require__(104);class ListModel extends blockModel_1.BlockModel{constructor(type){super(type)}}exports.ListModel=ListModel},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.VideoPlayer=void 0;const ko=__webpack_require__(0),videoPlayer_html_1=__webpack_require__(722),decorators_1=__webpack_require__(2);let VideoPlayer=class{constructor(){this.sourceUrl=ko.observable(),this.controls=ko.observable(),this.autoplay=ko.observable(),this.styles=ko.observable()}};VideoPlayer=__decorate([decorators_1.Component({selector:"video-player",template:videoPlayer_html_1.default}),__metadata("design:paramtypes",[])],VideoPlayer),exports.VideoPlayer=VideoPlayer},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.YoutubePlayerViewModel=void 0;const ko=__webpack_require__(0),youtubePlayer_html_1=__webpack_require__(727),decorators_1=__webpack_require__(2);let YoutubePlayerViewModel=class{constructor(){this.sourceUrl=ko.observable(),this.styles=ko.observable()}};YoutubePlayerViewModel=__decorate([decorators_1.Component({selector:"youtube-player",template:youtubePlayer_html_1.default}),__metadata("design:paramtypes",[])],YoutubePlayerViewModel),exports.YoutubePlayerViewModel=YoutubePlayerViewModel},function(module,exports,__webpack_require__){(function(global){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[],void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=function(){"use strict";function b(a,b){return void 0===b?b={autoBom:!1}:"object"!=typeof b&&(console.warn("Deprecated: Expected third argument to be a object"),b={autoBom:!b}),b.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\ufeff",a],{type:a.type}):a}function c(b,c,d){var e=new XMLHttpRequest;e.open("GET",b),e.responseType="blob",e.onload=function(){a(e.response,c,d)},e.onerror=function(){console.error("could not download file")},e.send()}function d(a){var b=new XMLHttpRequest;b.open("HEAD",a,!1);try{b.send()}catch(a){}return 200<=b.status&&299>=b.status}function e(a){try{a.dispatchEvent(new MouseEvent("click"))}catch(c){var b=document.createEvent("MouseEvents");b.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var f="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,a=f.saveAs||("object"!=typeof window||window!==f?function(){}:"download"in HTMLAnchorElement.prototype?function(b,g,h){var i=f.URL||f.webkitURL,j=document.createElement("a");g=g||b.name||"download",j.download=g,j.rel="noopener","string"==typeof b?(j.href=b,j.origin===location.origin?e(j):d(j.href)?c(b,g,h):e(j,j.target="_blank")):(j.href=i.createObjectURL(b),setTimeout((function(){i.revokeObjectURL(j.href)}),4e4),setTimeout((function(){e(j)}),0))}:"msSaveOrOpenBlob"in navigator?function(f,g,h){if(g=g||f.name||"download","string"!=typeof f)navigator.msSaveOrOpenBlob(b(f,h),g);else if(d(f))c(f,g,h);else{var i=document.createElement("a");i.href=f,i.target="_blank",setTimeout((function(){e(i)}))}}:function(a,b,d,e){if((e=e||open("","_blank"))&&(e.document.title=e.document.body.innerText="downloading..."),"string"==typeof a)return c(a,b,d);var g="application/octet-stream"===a.type,h=/constructor/i.test(f.HTMLElement)||f.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||g&&h)&&"object"==typeof FileReader){var j=new FileReader;j.onloadend=function(){var a=j.result;a=i?a:a.replace(/^data:[^;]*;/,"data:attachment/file;"),e?e.location.href=a:location=a,e=null},j.readAsDataURL(a)}else{var k=f.URL||f.webkitURL,l=k.createObjectURL(a);e?e.location=l:location.href=l,e=null,setTimeout((function(){k.revokeObjectURL(l)}),4e4)}});f.saveAs=a.saveAs=a,module.exports=a})?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}).call(this,__webpack_require__(39))},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PictureCropper=exports.CropperBindingHandler=void 0;const ko=__webpack_require__(0),Cropper=__webpack_require__(786),cropper_html_1=__webpack_require__(787),decorators_1=__webpack_require__(2),mediaItem_1=__webpack_require__(87);exports.CropperBindingHandler=class{constructor(eventManager){ko.bindingHandlers.cropper={init:(imageElement,valueAccessor)=>{const observable=valueAccessor(),cropperInstance=new Cropper(imageElement,{viewMode:1,responsive:!0,ready:()=>{this.croppable=!0}});observable(cropperInstance);const onResize=()=>{cropperInstance.resize()};eventManager.addEventListener("onEditorResize",onResize),ko.utils.domNodeDisposal.addDisposeCallback(imageElement,()=>{eventManager.removeEventListener("onEditorResize",onResize)})}}}};let PictureCropper=class{constructor(mediaService,viewManager){this.mediaService=mediaService,this.viewManager=viewManager,this.setMoveMode=this.setMoveMode.bind(this),this.setCropMode=this.setCropMode.bind(this),this.zoomIn=this.zoomIn.bind(this),this.zoomOut=this.zoomOut.bind(this),this.rotateLeft=this.rotateLeft.bind(this),this.rotateRight=this.rotateRight.bind(this),this.flipHorizontally=this.flipHorizontally.bind(this),this.flipVertically=this.flipVertically.bind(this),this.crop=this.crop.bind(this),this.clear=this.clear.bind(this),this.cropperInstance=ko.observable(null)}getRoundedCanvas(sourceCanvas){const canvas=document.createElement("canvas"),context=canvas.getContext("2d"),width=sourceCanvas.width,height=sourceCanvas.height;return canvas.width=width,canvas.height=height,context.imageSmoothingEnabled=!0,context.drawImage(sourceCanvas,0,0,width,height),context.globalCompositeOperation="destination-in",context.beginPath(),context.arc(width/2,height/2,Math.min(width,height)/2,0,2*Math.PI,!0),context.fill(),canvas}setMoveMode(){this.cropperInstance().setDragMode("move")}setCropMode(){this.cropperInstance().setDragMode("crop")}zoomIn(){this.cropperInstance().zoom(.1)}zoomOut(){this.cropperInstance().zoom(-.1)}rotateLeft(){this.cropperInstance().rotate(-45)}rotateRight(){this.cropperInstance().rotate(45)}flipHorizontally(){this.cropperInstance().scaleX(-this.cropperInstance().imageData.scaleX)}flipVertically(){this.cropperInstance().scaleY(-this.cropperInstance().imageData.scaleY)}crop(){this.cropperInstance().getCroppedCanvas().toBlob(blob=>__awaiter(this,void 0,void 0,(function*(){const reader=new FileReader;reader.addEventListener("loadend",()=>__awaiter(this,void 0,void 0,(function*(){const arrayBuffer=reader.result;yield this.updateMediaContent(new Uint8Array(arrayBuffer))}))),reader.readAsArrayBuffer(blob)})))}updateMediaContent(content){return __awaiter(this,void 0,void 0,(function*(){const uploadPromise=this.mediaService.updateMediaContent(this.mediaItem.toMedia(),content);uploadPromise.then(updatedItem=>{this.mediaItem.downloadUrl(updatedItem.downloadUrl);this.cropperInstance().replace(updatedItem.downloadUrl)}),yield this.viewManager.notifyProgress(uploadPromise,"Media library",`Updating ${this.mediaItem.fileName()}...`)}))}clear(){this.cropperInstance().clear()}};__decorate([decorators_1.Param(),__metadata("design:type",mediaItem_1.MediaItem)],PictureCropper.prototype,"mediaItem",void 0),PictureCropper=__decorate([decorators_1.Component({selector:"picture-cropper",template:cropper_html_1.default}),__metadata("design:paramtypes",[Object,Object])],PictureCropper),exports.PictureCropper=PictureCropper},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NavigationWorkshopModule=void 0;const navigation_1=__webpack_require__(285),navigationDetails_1=__webpack_require__(286),navigationItemSelector_1=__webpack_require__(288),navigationToolButton_1=__webpack_require__(793),navigationModelBinder_1=__webpack_require__(151),navigationViewModelBinder_1=__webpack_require__(152);exports.NavigationWorkshopModule=class{register(injector){injector.bind("navigationWorkshop",navigation_1.NavigationWorkshop),injector.bind("navigationDetailsWorkshop",navigationDetails_1.NavigationDetailsWorkshop),injector.bind("navigationItemSelector",navigationItemSelector_1.NavigationItemSelector),injector.bindToCollection("workshopSections",navigationToolButton_1.NavigationToolButton),injector.bindToCollection("modelBinders",navigationModelBinder_1.NavigationModelBinder,"navigationModelBinder"),injector.bindToCollection("viewModelBinders",navigationViewModelBinder_1.NavigationViewModelBinder,"navigationViewModelBinder")}}},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.NavigationWorkshop=void 0;const ko=__webpack_require__(0),navigation_html_1=__webpack_require__(789),navigation_1=__webpack_require__(37),decorators_1=__webpack_require__(2),navigationModelBinder_1=__webpack_require__(151),navigationViewModelBinder_1=__webpack_require__(152);let NavigationWorkshop=class{constructor(navigationService,viewManager,navigationModelBinder,navigationViewModelBinder,eventManager){this.navigationService=navigationService,this.viewManager=viewManager,this.navigationModelBinder=navigationModelBinder,this.navigationViewModelBinder=navigationViewModelBinder,this.eventManager=eventManager,this.onNavigationUpdate=this.onNavigationUpdate.bind(this),this.selectNavigationItem=this.selectNavigationItem.bind(this),this.selection=ko.observable(),this.working=ko.observable(!0),this.root=ko.observable(),this.placeholderElement=document.createElement("div"),this.placeholderElement.className="placeholder",this.placeholderElement.onmousemove=this.onNullPointerMove,document.addEventListener("keydown",this.onKeyDown.bind(this),!1)}searchNavigationItems(){return __awaiter(this,void 0,void 0,(function*(){this.working(!0);const root={key:null,label:"",navigationItems:yield this.navigationService.getNavigationItems()},rootModel=yield this.navigationModelBinder.contractToModel(root),rootViewModel=yield this.navigationViewModelBinder.modelToViewModel(rootModel);this.root(rootViewModel),this.working(!1),rootViewModel.onUpdate.subscribe(this.onNavigationUpdate)}))}onNavigationUpdate(){return __awaiter(this,void 0,void 0,(function*(){const rootModel=this.navigationViewModelBinder.viewModelToModel(this.root()),rootContract=this.navigationModelBinder.modelToContract(rootModel);yield this.navigationService.updateNavigation(rootContract.navigationItems),rootModel.nodes.forEach(navigationItem=>{this.eventManager.dispatchEvent(navigation_1.NavigationEvents.onNavigationItemUpdate,navigationItem)})}))}addNavigationItem(){const node=(this.selection()||this.root()).addChild();this.selectNavigationItem(node)}selectNavigationItem(navigationItem){return __awaiter(this,void 0,void 0,(function*(){this.selection(navigationItem);const view={heading:"Navigation item",component:{name:"navigation-details-workshop",params:{navigationItem:navigationItem,onDelete:()=>{this.selection(navigationItem.parent)}}}};this.viewManager.openViewAsWorkshop(view)}))}onNullPointerMove(event){event.stopPropagation()}onNodeDragStart(sourceData,node){const width=node.clientWidth+"px",height=node.clientHeight+"px";this.placeholderElement.style.width=width,this.placeholderElement.style.height=height,node.parentNode.insertBefore(this.placeholderElement,node.nextSibling)}onNodeDragEnd(){this.placeholderElement.parentElement.removeChild(this.placeholderElement)}onAcceptNodeBefore(node,acceptingNode){acceptingNode.parentNode.insertBefore(this.placeholderElement,acceptingNode)}onAcceptNodeAfter(node,acceptingNode){acceptingNode.parentNode.insertBefore(this.placeholderElement,acceptingNode.nextSibling)}onKeyDown(event){if(this.selection())switch(event.keyCode){case 37:this.selection().moveNodeLeft();break;case 39:this.selection().moveNodeRight()}}dispose(){document.removeEventListener("keydown",this.onKeyDown.bind(this),!1)}isSelected(page){const selectedNavItem=this.selection();return(null==selectedNavItem?void 0:selectedNavItem.key)===page.key}};__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],NavigationWorkshop.prototype,"searchNavigationItems",null),__decorate([decorators_1.OnDestroyed(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],NavigationWorkshop.prototype,"dispose",null),NavigationWorkshop=__decorate([decorators_1.Component({selector:"navigation",template:navigation_html_1.default}),__metadata("design:paramtypes",[Object,Object,navigationModelBinder_1.NavigationModelBinder,navigationViewModelBinder_1.NavigationViewModelBinder,Object])],NavigationWorkshop),exports.NavigationWorkshop=NavigationWorkshop},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.NavigationDetailsWorkshop=void 0;const ko=__webpack_require__(0),navigationDetails_html_1=__webpack_require__(791),navigationItemViewModel_1=__webpack_require__(287),decorators_1=__webpack_require__(2);let NavigationDetailsWorkshop=class{constructor(permalinkResolver,viewManager){this.permalinkResolver=permalinkResolver,this.viewManager=viewManager,this.onMounted=this.onMounted.bind(this),this.deleteNavigationItem=this.deleteNavigationItem.bind(this),this.onHyperlinkChange=this.onHyperlinkChange.bind(this),this.hyperlink=ko.observable(),this.hyperlinkTitle=ko.pureComputed(()=>{const hyperlink=this.hyperlink();return hyperlink?""+hyperlink.title:"Click to select a link..."})}onMounted(){return __awaiter(this,void 0,void 0,(function*(){this.navigationItem.targetKey()&&this.init(this.navigationItem.targetKey())}))}init(targetKey){return __awaiter(this,void 0,void 0,(function*(){const hyperlink=yield this.permalinkResolver.getHyperlinkByTargetKey(targetKey);this.hyperlink(hyperlink)}))}onHyperlinkChange(hyperlink){this.hyperlink(hyperlink);const targetKey=hyperlink?hyperlink.targetKey:null;this.navigationItem.targetKey(targetKey)}deleteNavigationItem(){this.navigationItem.remove(),this.viewManager.notifySuccess("Navigation",`Navigation item "${this.navigationItem.label()}" was deleted.`),this.viewManager.closeWorkshop("navigation-details-workshop"),this.onDelete&&this.onDelete()}};__decorate([decorators_1.Event(),__metadata("design:type",Function)],NavigationDetailsWorkshop.prototype,"onDelete",void 0),__decorate([decorators_1.Param(),__metadata("design:type",navigationItemViewModel_1.NavigationItemViewModel)],NavigationDetailsWorkshop.prototype,"navigationItem",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],NavigationDetailsWorkshop.prototype,"onMounted",null),NavigationDetailsWorkshop=__decorate([decorators_1.Component({selector:"navigation-details-workshop",template:navigationDetails_html_1.default}),__metadata("design:paramtypes",[Object,Object])],NavigationDetailsWorkshop),exports.NavigationDetailsWorkshop=NavigationDetailsWorkshop},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NavigationItemViewModel=void 0;const ko=__webpack_require__(0),Utils=__webpack_require__(19),navigation_1=__webpack_require__(37);class NavigationItemViewModel{constructor(navitem){this.moveNodeLeft=this.moveNodeLeft.bind(this),this.moveNodeRight=this.moveNodeRight.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.canAccept=this.canAccept.bind(this),this.insertBefore=this.insertBefore.bind(this),this.insertAfter=this.insertAfter.bind(this),this.key=navitem.key,this.label=ko.observable(navitem.label),this.label.subscribe(()=>this.notify()),this.nodes=ko.observableArray([]),this.collapsed=ko.observable(!1),this.dragged=ko.observable(!1),this.onUpdate=new ko.subscribable,this.targetKey=ko.observable(navitem.targetKey),this.targetKey.subscribe(()=>this.notify()),this.targetUrl=ko.observable(navitem.targetUrl)}isSiblingNode(node){return this.parent&&this.parent.nodes.indexOf(node)>=0}isChildNode(node){return this.nodes.indexOf(node)>=0}isUncleNode(node){return this.parent&&this.parent.parent&&this.parent.parent.nodes.indexOf(node)>=0&&this.parent!==node}moveNodeLeft(){if(!this.parent.parent)return;this.parent.nodes.remove(this);const ownIndex=this.parent.parent.nodes.indexOf(this.parent);this.parent.parent.nodes.splice(ownIndex+1,0,this),this.parent=this.parent.parent,this.notify()}moveNodeRight(){const index=this.parent.nodes().indexOf(this);if(0===index)return;const previousSibling=this.parent.nodes()[index-1];this.parent.nodes.remove(this),this.parent=previousSibling,previousSibling.nodes.push(this),this.notify()}canAccept(node){return this.isSiblingNode(node)||this.isChildNode(node)||this.isUncleNode(node)}insertBefore(node){if(this.parent&&this.isSiblingNode(node)||this.isUncleNode(node)||this.isChildNode(node)){node.parent.nodes.remove(node);const ownIndex=this.parent.nodes.indexOf(this);this.parent.nodes.splice(ownIndex,0,node),node.parent=this.parent,this.notify()}}insertAfter(node){if(this.parent&&this.isSiblingNode(node)||this.isUncleNode(node)){node.parent.nodes.remove(node);const ownIndex=this.parent.nodes.indexOf(this);this.parent.nodes.splice(ownIndex+1,0,node),node.parent=this.parent,this.notify()}if(this.parent&&this.isChildNode(node)){node.parent.nodes.remove(node);const ownIndex=this.parent.nodes.indexOf(this);this.parent.nodes.splice(ownIndex,0,node),node.parent=this.parent,this.notify()}}toggleCollapsed(){this.collapsed(!this.collapsed())}onKeyDown(event){switch(event.keyCode){case 37:this.moveNodeLeft();break;case 39:this.moveNodeRight()}}remove(){this.parent.nodes.remove(this),this.notify()}addChild(){const navitemModel=new navigation_1.NavigationItemModel;navitemModel.key=Utils.guid(),navitemModel.label="< New >";const node=new NavigationItemViewModel(navitemModel);return node.parent=this,this.nodes.push(node),node}notify(){this.onUpdate.notifySubscribers(),this.parent&&this.parent.notify()}toString(){return this.label()}}exports.NavigationItemViewModel=NavigationItemViewModel},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.NavigationItemSelector=void 0;const ko=__webpack_require__(0),navigationItemSelector_html_1=__webpack_require__(792),decorators_1=__webpack_require__(2),navigationModelBinder_1=__webpack_require__(151),navigationViewModelBinder_1=__webpack_require__(152);let NavigationItemSelector=class{constructor(navigationService,navigationModelBinder,navigationViewModelBinder){this.navigationService=navigationService,this.navigationModelBinder=navigationModelBinder,this.navigationViewModelBinder=navigationViewModelBinder,this.selectNavigationItem=this.selectNavigationItem.bind(this),this.selectedNavigationItem=ko.observable(),this.working=ko.observable(!0),this.root=ko.observable(),this.initialize()}initialize(){return __awaiter(this,void 0,void 0,(function*(){this.working(!0);const navigationItems=yield this.navigationService.getNavigationItems();navigationItems.push({key:"@locales",label:"Languages"});const root={key:null,label:"Root",navigationItems:navigationItems},rootModel=yield this.navigationModelBinder.contractToModel(root),rootViewModel=yield this.navigationViewModelBinder.modelToViewModel(rootModel);this.root(rootViewModel),this.working(!1)}))}selectNavigationItem(navigationItem){return __awaiter(this,void 0,void 0,(function*(){if(this.selectedNavigationItem(navigationItem),this.onSelect){const rootModel=this.navigationViewModelBinder.viewModelToModel(navigationItem);this.onSelect(rootModel)}}))}selectNone(){this.onSelect&&this.onSelect(null)}};__decorate([decorators_1.Param(),__metadata("design:type",Function)],NavigationItemSelector.prototype,"selectedNavigationItem",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],NavigationItemSelector.prototype,"onSelect",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],NavigationItemSelector.prototype,"initialize",null),NavigationItemSelector=__decorate([decorators_1.Component({selector:"navigation-item-selector",template:navigationItemSelector_html_1.default}),__metadata("design:paramtypes",[Object,navigationModelBinder_1.NavigationModelBinder,navigationViewModelBinder_1.NavigationViewModelBinder])],NavigationItemSelector),exports.NavigationItemSelector=NavigationItemSelector},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MetaDataSetter=void 0;class MetaDataSetter{static setFavIcon(iconUrl){if(!iconUrl)return;const link=document.querySelector("link[rel*='icon']");link&&(link.type=MetaDataSetter.iconContentType,link.rel="icon",link.href=iconUrl)}static setKeywords(keywords){MetaDataSetter.setMetaElement(keywords,"keywords")}static setDescription(description){MetaDataSetter.setMetaElement(description,"description")}static setAuthor(author){MetaDataSetter.setMetaElement(author,"author")}static setScriptElement(content,type){const script=MetaDataSetter.getMetaElement("type",type)||document.createElement("script");script.setAttribute("type",type),script.text=JSON.stringify(content),document.head.appendChild(script)}static setMetaObject(data,attributeName){Object.keys(data).forEach(attrValue=>{MetaDataSetter.setMetaElement(data[attrValue],void 0,attributeName,attrValue)})}static setMetaElement(content,name,attributeName,attributeValue){const existMeta=name?MetaDataSetter.getMetaElement("name",name):MetaDataSetter.getMetaElement(attributeName,attributeValue),meta=existMeta||document.createElement("meta");name&&(meta.name=name),attributeName&&attributeValue&&meta.setAttribute(attributeName,attributeValue),meta.content=content,existMeta||document.head.appendChild(meta)}static getMetaElement(attributeName,attributeValue){return attributeName&&attributeValue&&document.head.querySelector(`[${attributeName}=${attributeValue}]`)}}exports.MetaDataSetter=MetaDataSetter,MetaDataSetter.iconContentType="image/x-icon"},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.TextblockHandlers=exports.nodeName=void 0;const textblockModel_1=__webpack_require__(83);exports.nodeName="paperbits-text";exports.TextblockHandlers=class{getWidgetOrderByConfig(){return __awaiter(this,void 0,void 0,(function*(){return{name:"text-block",displayName:"Text block",iconClass:"paperbits-edit-2",requires:[],createModel:()=>__awaiter(this,void 0,void 0,(function*(){return new textblockModel_1.TextblockModel([{type:"heading1",content:[{type:"text",text:"Heading"}]},{type:"paragraph",content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."}]}])}))}}))}getWidgetOrder(){return __awaiter(this,void 0,void 0,(function*(){return yield this.getWidgetOrderByConfig()}))}}},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.LayoutsWorkshop=void 0;const ko=__webpack_require__(0),layouts_html_1=__webpack_require__(842),layoutItem_1=__webpack_require__(107),decorators_1=__webpack_require__(2),persistence_1=__webpack_require__(23),consts_1=__webpack_require__(17);let LayoutsWorkshop=class{constructor(layoutService,viewManager){this.layoutService=layoutService,this.viewManager=viewManager,this.layouts=ko.observableArray(),this.selectedLayout=ko.observable(),this.searchPattern=ko.observable(),this.working=ko.observable()}initialize(){return __awaiter(this,void 0,void 0,(function*(){yield this.searchLayouts(),this.searchPattern.extend(consts_1.ChangeRateLimit).subscribe(this.searchLayouts)}))}searchLayouts(searchPattern=""){return __awaiter(this,void 0,void 0,(function*(){this.layouts([]);const query=persistence_1.Query.from().orderBy("title");searchPattern&&query.where("title",persistence_1.Operator.contains,searchPattern);const pageOfResults=yield this.layoutService.search(query);this.currentPage=pageOfResults;const pageItems=pageOfResults.value.map(page=>new layoutItem_1.LayoutItem(page));this.layouts.push(...pageItems)}))}loadNextPage(){var _a;return __awaiter(this,void 0,void 0,(function*(){if(!(null===(_a=this.currentPage)||void 0===_a?void 0:_a.takeNext)||this.working())return void(this.loadNextPage=null);this.working(!0),this.currentPage=yield this.currentPage.takeNext();const layoutItems=this.currentPage.value.map(page=>new layoutItem_1.LayoutItem(page));this.layouts.push(...layoutItems),this.working(!1)}))}selectLayout(layoutItem){this.selectedLayout(layoutItem);const view={heading:"Layout",component:{name:"layout-details-workshop",params:{layoutItem:layoutItem,onDeleteCallback:()=>{this.searchLayouts()},onCopyCallback:item=>__awaiter(this,void 0,void 0,(function*(){yield this.searchLayouts(),this.selectLayout(item)}))}}};this.viewManager.openViewAsWorkshop(view)}addLayout(){return __awaiter(this,void 0,void 0,(function*(){this.working(!0);const layout=yield this.layoutService.createLayout("New Layout","","/new-layout"),layoutItem=new layoutItem_1.LayoutItem(layout);this.layouts.push(layoutItem),this.selectLayout(layoutItem),this.working(!1)}))}isSelected(page){const selectedPage=this.selectedLayout();return(null==selectedPage?void 0:selectedPage.key)===page.key}};__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],LayoutsWorkshop.prototype,"initialize",null),LayoutsWorkshop=__decorate([decorators_1.Component({selector:"layouts",template:layouts_html_1.default}),__metadata("design:paramtypes",[Object,Object])],LayoutsWorkshop),exports.LayoutsWorkshop=LayoutsWorkshop},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.LayoutDetails=void 0;const ko=__webpack_require__(0),layoutDetails_html_1=__webpack_require__(843),layoutItem_1=__webpack_require__(107),decorators_1=__webpack_require__(2);let LayoutDetails=class{constructor(layoutService,viewManager){this.layoutService=layoutService,this.viewManager=viewManager,this.permalinkTemplate=ko.observable()}onMounted(){return __awaiter(this,void 0,void 0,(function*(){this.layoutItem.title.extend({required:!0,onlyValid:!0}).subscribe(this.updateLayout),this.permalinkTemplate(this.layoutItem.permalinkTemplate());const validPermalinkTemplate=this.permalinkTemplate.extend({uniqueLayoutUri:this.layoutItem.key,required:!0,onlyValid:!0});validPermalinkTemplate.subscribe(this.updateLayout),this.layoutItem.description.subscribe(this.updateLayout),this.isDefaultLayout=ko.pureComputed(()=>"/"===validPermalinkTemplate()),this.canDelete=ko.computed(()=>!this.isDefaultLayout()),this.viewManager.setHost({name:"layout-host",params:{layoutKey:this.layoutItem.key}})}))}updateLayout(){return __awaiter(this,void 0,void 0,(function*(){this.layoutItem.permalinkTemplate(this.permalinkTemplate()),yield this.layoutService.updateLayout(this.layoutItem.toContract())}))}deleteLayout(){return __awaiter(this,void 0,void 0,(function*(){yield this.layoutService.deleteLayout(this.layoutItem.toContract()),this.viewManager.notifySuccess("Layouts",`Page "${this.layoutItem.title()}" was deleted.`),this.viewManager.closeWorkshop("layout-details-workshop"),this.onDeleteCallback&&this.onDeleteCallback(),this.viewManager.setHost({name:"page-host"})}))}copyLayout(){return __awaiter(this,void 0,void 0,(function*(){const copyPermalink=this.layoutItem.permalinkTemplate()+" copy",layoutContract=yield this.layoutService.createLayout(this.layoutItem.title()+" copy",this.layoutItem.description(),copyPermalink),copyContract=this.layoutItem.toContract();copyContract.key=layoutContract.key,copyContract.permalinkTemplate=layoutContract.permalinkTemplate,copyContract.title=layoutContract.title,copyContract.contentKey=layoutContract.contentKey,yield this.layoutService.updateLayout(copyContract);const layoutContentContract=yield this.layoutService.getLayoutContent(this.layoutItem.key);yield this.layoutService.updateLayoutContent(copyContract.key,layoutContentContract),this.onCopyCallback&&this.onCopyCallback(new layoutItem_1.LayoutItem(copyContract))}))}};__decorate([decorators_1.Param(),__metadata("design:type",layoutItem_1.LayoutItem)],LayoutDetails.prototype,"layoutItem",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],LayoutDetails.prototype,"onDeleteCallback",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],LayoutDetails.prototype,"onCopyCallback",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],LayoutDetails.prototype,"onMounted",null),LayoutDetails=__decorate([decorators_1.Component({selector:"layout-details-workshop",template:layoutDetails_html_1.default}),__metadata("design:paramtypes",[Object,Object])],LayoutDetails),exports.LayoutDetails=LayoutDetails},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.LayoutSelector=void 0;const ko=__webpack_require__(0),layoutSelector_html_1=__webpack_require__(844),persistence_1=__webpack_require__(23),layoutItem_1=__webpack_require__(107),decorators_1=__webpack_require__(2);let LayoutSelector=class{constructor(layoutService){this.layoutService=layoutService,this.layouts=ko.observableArray(),this.selectedLayout=ko.observable(),this.searchPattern=ko.observable(),this.working=ko.observable()}onMounted(){return __awaiter(this,void 0,void 0,(function*(){this.searchLayouts()}))}searchLayouts(searchPattern=""){return __awaiter(this,void 0,void 0,(function*(){this.layouts([]);const query=persistence_1.Query.from().orderBy("title");searchPattern&&query.where("title",persistence_1.Operator.contains,searchPattern);const pageOfResults=yield this.layoutService.search(query);this.currentPage=pageOfResults;const pageItems=pageOfResults.value.map(page=>new layoutItem_1.LayoutItem(page));this.layouts.push(...pageItems)}))}loadNextPage(){var _a;return __awaiter(this,void 0,void 0,(function*(){if(!(null===(_a=this.currentPage)||void 0===_a?void 0:_a.takeNext)||this.working())return void(this.loadNextPage=null);this.working(!0),this.currentPage=yield this.currentPage.takeNext();const layoutItems=this.currentPage.value.map(page=>new layoutItem_1.LayoutItem(page));this.layouts.push(...layoutItems),this.working(!1)}))}selectLayout(layout){return __awaiter(this,void 0,void 0,(function*(){this.selectedLayout(layout),this.onSelect&&this.onSelect(layout.toContract())}))}};__decorate([decorators_1.Param(),__metadata("design:type",Function)],LayoutSelector.prototype,"selectedLayout",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],LayoutSelector.prototype,"onSelect",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],LayoutSelector.prototype,"onMounted",null),LayoutSelector=__decorate([decorators_1.Component({selector:"layout-selector",template:layoutSelector_html_1.default}),__metadata("design:paramtypes",[Object])],LayoutSelector),exports.LayoutSelector=LayoutSelector},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(847),exports),__exportStar(__webpack_require__(848),exports),__exportStar(__webpack_require__(849),exports),__exportStar(__webpack_require__(850),exports),__exportStar(__webpack_require__(851),exports),__exportStar(__webpack_require__(852),exports)},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.DesignerUserService=void 0;const user_1=__webpack_require__(58);exports.DesignerUserService=class{constructor(){this.currentViewRoles=[user_1.BuiltInRoles.anonymous.key]}getUserName(){return __awaiter(this,void 0,void 0,(function*(){return null}))}getUserPhotoUrl(){return __awaiter(this,void 0,void 0,(function*(){return null}))}getUserRoles(){return __awaiter(this,void 0,void 0,(function*(){return this.currentViewRoles}))}setUserRoles(roles){return __awaiter(this,void 0,void 0,(function*(){this.currentViewRoles=roles}))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ViewStack=void 0;const Utils=__webpack_require__(6);exports.ViewStack=class{constructor(eventManager){this.eventManager=eventManager,this.stack=[],this.eventManager.addEventListener("onPointerDown",this.onPointerDown.bind(this)),this.eventManager.addEventListener("onEscape",this.onEscape.bind(this))}onPointerDown(event){const targetElement=event.target;this.runHitTest(targetElement)}runHitTest(targetElement){const views=[...this.stack];for(const view of views.reverse()){let hit;if(hit=view.hitTest?view.hitTest(targetElement):!!Utils.closest(targetElement,node=>node===view.element),hit)break;this.stack.pop(),view.close()}}onEscape(){const topView=this.stack.pop();topView?(topView.close(),topView.returnFocusTo&&topView.returnFocusTo.focus()):this.eventManager.dispatchEvent("onTopLevelEscape")}pushView(view){this.stack.push(view)}removeView(view){this.stack.remove(view)}getViews(){return[...this.stack]}clear(){this.stack.forEach(view=>view.close()),this.stack=[]}}},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.GridLayoutSelector=void 0;const ko=__webpack_require__(0),Utils=__webpack_require__(19),gridLayoutSelector_html_1=__webpack_require__(869),decorators_1=__webpack_require__(2),grid_layout_section_1=__webpack_require__(870),gridPresets_1=__webpack_require__(871),section_1=__webpack_require__(234),_1=__webpack_require__(872),blocks_1=__webpack_require__(67),modelBinderSelector_1=__webpack_require__(81);let GridLayoutSelector=class{constructor(gridModelBinder,gridViewModelBinder,modelBinderSelector,blockService,settingsProvider){this.gridModelBinder=gridModelBinder,this.gridViewModelBinder=gridViewModelBinder,this.modelBinderSelector=modelBinderSelector,this.blockService=blockService,this.settingsProvider=settingsProvider,this.selectLayout=this.selectLayout.bind(this),this.snippets=ko.observableArray(),this.selected=ko.observable(),this.isBlocksEnabled=ko.observable()}initaialize(){return __awaiter(this,void 0,void 0,(function*(){const snippets=[];for(const preset of Utils.clone(gridPresets_1.presets)){const model=yield this.gridModelBinder.contractToModel(preset),viewModel=yield this.gridViewModelBinder.modelToViewModel(model);snippets.push(viewModel)}this.snippets(snippets);const blocksUrl=yield this.settingsProvider.getSetting("blockSnippetsUrl");this.isBlocksEnabled(!!blocksUrl)}))}selectLayout(viewModel){const sectionModel=new section_1.SectionModel;sectionModel.widgets=[viewModel.widgetBinding.model];const gridModel=sectionModel.widgets[0],styles=gridModel.styles.instance;styles.size={sm:{maxWidth:540},md:{maxWidth:720},lg:{maxWidth:960},xl:{maxWidth:1140}},styles.margin={xs:{top:10,left:"auto",right:"auto",bottom:10},md:{top:15,bottom:15},xl:{top:25,bottom:25}},gridModel.widgets.forEach(x=>{x.styles.instance.padding={xs:{top:5,left:5,right:5,bottom:5},md:{top:15,left:15,right:15,bottom:15}}}),this.onSelect&&this.onSelect(sectionModel)}onBlockSelected(updateBlock){return __awaiter(this,void 0,void 0,(function*(){const contract=yield this.blockService.getBlockContent(updateBlock.block.key,updateBlock.blockType),modelBinder=this.modelBinderSelector.getModelBinderByContract(contract),model=yield modelBinder.contractToModel(contract);this.onSelect&&this.onSelect(model)}))}};__decorate([decorators_1.Event(),__metadata("design:type",Function)],GridLayoutSelector.prototype,"onSelect",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],GridLayoutSelector.prototype,"initaialize",null),GridLayoutSelector=__decorate([decorators_1.Component({selector:"grid-layout-selector",template:gridLayoutSelector_html_1.default}),__metadata("design:paramtypes",[grid_layout_section_1.GridModelBinder,_1.GridViewModelBinder,modelBinderSelector_1.ModelBinderSelector,blocks_1.BlockService,Object])],GridLayoutSelector),exports.GridLayoutSelector=GridLayoutSelector},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});__webpack_require__(0).bindingHandlers.itemTemplate={init:(element,valueAccessor)=>{const template=valueAccessor();element.innerHTML=template}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.StyledBindingHandler=void 0;const ko=__webpack_require__(0),jssCompiler_1=__webpack_require__(48);exports.StyledBindingHandler=class{constructor(){ko.bindingHandlers.styled={update:(element,valueAccessor)=>__awaiter(this,void 0,void 0,(function*(){const styleModel=ko.unwrap(valueAccessor());styleModel&&(styleModel.styleManager&&styleModel.styleManager.setStyleSheet(styleModel.styleSheet),ko.applyBindingsToNode(element,{css:styleModel.classNames},null),ko.utils.domNodeDisposal.addDisposeCallback(element,()=>{styleModel.styleManager&&styleModel.styleManager.removeStyleSheet(styleModel.key)}))}))},ko.bindingHandlers.styledInPlace={update:(element,valueAccessor)=>__awaiter(this,void 0,void 0,(function*(){const styleModel=ko.unwrap(valueAccessor());if(!styleModel)return;const cssObservable=ko.observable();let styleElement=element.ownerDocument.getElementById(styleModel.key);const css=(new jssCompiler_1.JssCompiler).compile(styleModel.styleSheet);css?(styleElement||(styleElement=element.ownerDocument.createElement("style"),styleElement.id=styleModel.key,element.ownerDocument.head.appendChild(styleElement)),styleElement.innerHTML=css):styleElement&&styleElement.remove(),cssObservable(styleModel.classNames),ko.applyBindingsToNode(element,{css:cssObservable},null)}))}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StylesheetBindingHandler=void 0;const ko=__webpack_require__(0),jssCompiler_1=__webpack_require__(48);exports.StylesheetBindingHandler=class{constructor(eventManager){this.eventManager=eventManager;const compiler=new jssCompiler_1.JssCompiler;ko.bindingHandlers.styleSheet={init:element=>{this.eventManager.addEventListener("onStyleChange",styleSheet=>{const css=compiler.compile(styleSheet);let stylesTextNode=Array.prototype.slice.call(element.childNodes).find(x=>x.key===styleSheet.key);stylesTextNode||(stylesTextNode=document.createTextNode(css),stylesTextNode.key=styleSheet.key,element.appendChild(stylesTextNode)),stylesTextNode.textContent=css}),this.eventManager.addEventListener("onStyleRemove",key=>{if(!key)return;const node=Array.prototype.slice.call(element.childNodes).find(x=>x.key===key);node&&element.removeChild(node)})}}}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.StylableBindingHandler=void 0;const ko=__webpack_require__(0);exports.StylableBindingHandler=class{constructor(styleService){this.styleService=styleService,ko.bindingHandlers.styleable={update:(element,valueAccessor)=>__awaiter(this,void 0,void 0,(function*(){const config=ko.unwrap(valueAccessor());let style;if(style="string"==typeof config?yield this.styleService.getStyleByKey(config):config,!style)return;const backgroundObservable=ko.observable();let mode=1;const styleable={style:style,toggleBackground:()=>{switch(mode){case 0:backgroundObservable(null),mode=1;break;case 1:backgroundObservable("transparent"),mode=2;break;case 2:backgroundObservable("dark"),mode=0}}};element.styleable=styleable,ko.applyBindingsToNode(element,{css:backgroundObservable},null)}))}}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.StyleSnippetService=void 0;exports.StyleSnippetService=class{constructor(httpClient){this.httpClient=httpClient}getThemes(){return __awaiter(this,void 0,void 0,(function*(){return this.themes||(yield this.loadStyleSnippets()),this.themes}))}loadStyleSnippets(){return __awaiter(this,void 0,void 0,(function*(){const response=yield this.httpClient.send({url:"/data/snippets-styles.json",method:"GET"});this.themes=response.toObject()}))}getThemesNames(){return __awaiter(this,void 0,void 0,(function*(){const source=yield this.getThemes();return source&&Object.keys(source)||[]}))}getSelectedThemeName(){return this.selectedThemeName}selectCurrentTheme(themeName){return __awaiter(this,void 0,void 0,(function*(){this.selectedThemeName=themeName;const theme=yield this.getThemeByName(themeName);return this.styles=theme,!!this.styles}))}getThemeByName(themeName){return __awaiter(this,void 0,void 0,(function*(){const source=yield this.getThemes();return source?source[themeName]:null}))}getStyleByKey(key){return __awaiter(this,void 0,void 0,(function*(){return this.styles?this.getObjectByPath(this.styles,key):(console.warn("current theme is not initialized"),null)}))}getObjectByPath(obj,pathKey){for(let i=0,path=pathKey.split("/"),len=path.length;i<len;i++)obj=obj[path[i]];return obj}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"autoJoin",(function(){return autoJoin})),__webpack_require__.d(__webpack_exports__,"baseKeymap",(function(){return baseKeymap})),__webpack_require__.d(__webpack_exports__,"chainCommands",(function(){return chainCommands})),__webpack_require__.d(__webpack_exports__,"createParagraphNear",(function(){return createParagraphNear})),__webpack_require__.d(__webpack_exports__,"deleteSelection",(function(){return deleteSelection})),__webpack_require__.d(__webpack_exports__,"exitCode",(function(){return exitCode})),__webpack_require__.d(__webpack_exports__,"joinBackward",(function(){return joinBackward})),__webpack_require__.d(__webpack_exports__,"joinDown",(function(){return joinDown})),__webpack_require__.d(__webpack_exports__,"joinForward",(function(){return joinForward})),__webpack_require__.d(__webpack_exports__,"joinUp",(function(){return joinUp})),__webpack_require__.d(__webpack_exports__,"lift",(function(){return lift})),__webpack_require__.d(__webpack_exports__,"liftEmptyBlock",(function(){return liftEmptyBlock})),__webpack_require__.d(__webpack_exports__,"macBaseKeymap",(function(){return macBaseKeymap})),__webpack_require__.d(__webpack_exports__,"newlineInCode",(function(){return newlineInCode})),__webpack_require__.d(__webpack_exports__,"pcBaseKeymap",(function(){return pcBaseKeymap})),__webpack_require__.d(__webpack_exports__,"selectAll",(function(){return selectAll})),__webpack_require__.d(__webpack_exports__,"selectNodeBackward",(function(){return selectNodeBackward})),__webpack_require__.d(__webpack_exports__,"selectNodeForward",(function(){return selectNodeForward})),__webpack_require__.d(__webpack_exports__,"selectParentNode",(function(){return selectParentNode})),__webpack_require__.d(__webpack_exports__,"setBlockType",(function(){return setBlockType})),__webpack_require__.d(__webpack_exports__,"splitBlock",(function(){return splitBlock})),__webpack_require__.d(__webpack_exports__,"splitBlockKeepMarks",(function(){return splitBlockKeepMarks})),__webpack_require__.d(__webpack_exports__,"toggleMark",(function(){return toggleMark})),__webpack_require__.d(__webpack_exports__,"wrapIn",(function(){return wrapIn}));var prosemirror_transform__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5),prosemirror_model__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),prosemirror_state__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(3);function deleteSelection(state,dispatch){return!state.selection.empty&&(dispatch&&dispatch(state.tr.deleteSelection().scrollIntoView()),!0)}function joinBackward(state,dispatch,view){var $cursor=state.selection.$cursor;if(!$cursor||(view?!view.endOfTextblock("backward",state):$cursor.parentOffset>0))return!1;var $cut=findCutBefore($cursor);if(!$cut){var range=$cursor.blockRange(),target=range&&Object(prosemirror_transform__WEBPACK_IMPORTED_MODULE_0__.liftTarget)(range);return null!=target&&(dispatch&&dispatch(state.tr.lift(range,target).scrollIntoView()),!0)}var before=$cut.nodeBefore;if(!before.type.spec.isolating&&deleteBarrier(state,$cut,dispatch))return!0;if(0==$cursor.parent.content.size&&(textblockAt(before,"end")||prosemirror_state__WEBPACK_IMPORTED_MODULE_2__.NodeSelection.isSelectable(before))){if(dispatch){var tr=state.tr.deleteRange($cursor.before(),$cursor.after());tr.setSelection(textblockAt(before,"end")?prosemirror_state__WEBPACK_IMPORTED_MODULE_2__.Selection.findFrom(tr.doc.resolve(tr.mapping.map($cut.pos,-1)),-1):prosemirror_state__WEBPACK_IMPORTED_MODULE_2__.NodeSelection.create(tr.doc,$cut.pos-before.nodeSize)),dispatch(tr.scrollIntoView())}return!0}return!(!before.isAtom||$cut.depth!=$cursor.depth-1)&&(dispatch&&dispatch(state.tr.delete($cut.pos-before.nodeSize,$cut.pos).scrollIntoView()),!0)}function textblockAt(node,side){for(;node;node="start"==side?node.firstChild:node.lastChild)if(node.isTextblock)return!0;return!1}function selectNodeBackward(state,dispatch,view){var ref=state.selection,$head=ref.$head,$cut=$head;if(!ref.empty)return!1;if($head.parent.isTextblock){if(view?!view.endOfTextblock("backward",state):$head.parentOffset>0)return!1;$cut=findCutBefore($head)}var node=$cut&&$cut.nodeBefore;return!(!node||!prosemirror_state__WEBPACK_IMPORTED_MODULE_2__.NodeSelection.isSelectable(node))&&(dispatch&&dispatch(state.tr.setSelection(prosemirror_state__WEBPACK_IMPORTED_MODULE_2__.NodeSelection.create(state.doc,$cut.pos-node.nodeSize)).scrollIntoView()),!0)}function findCutBefore($pos){if(!$pos.parent.type.spec.isolating)for(var i=$pos.depth-1;i>=0;i--){if($pos.index(i)>0)return $pos.doc.resolve($pos.before(i+1));if($pos.node(i).type.spec.isolating)break}return null}function joinForward(state,dispatch,view){var $cursor=state.selection.$cursor;if(!$cursor||(view?!view.endOfTextblock("forward",state):$cursor.parentOffset<$cursor.parent.content.size))return!1;var $cut=findCutAfter($cursor);if(!$cut)return!1;var after=$cut.nodeAfter;if(deleteBarrier(state,$cut,dispatch))return!0;if(0==$cursor.parent.content.size&&(textblockAt(after,"start")||prosemirror_state__WEBPACK_IMPORTED_MODULE_2__.NodeSelection.isSelectable(after))){if(dispatch){var tr=state.tr.deleteRange($cursor.before(),$cursor.after());tr.setSelection(textblockAt(after,"start")?prosemirror_state__WEBPACK_IMPORTED_MODULE_2__.Selection.findFrom(tr.doc.resolve(tr.mapping.map($cut.pos)),1):prosemirror_state__WEBPACK_IMPORTED_MODULE_2__.NodeSelection.create(tr.doc,tr.mapping.map($cut.pos))),dispatch(tr.scrollIntoView())}return!0}return!(!after.isAtom||$cut.depth!=$cursor.depth-1)&&(dispatch&&dispatch(state.tr.delete($cut.pos,$cut.pos+after.nodeSize).scrollIntoView()),!0)}function selectNodeForward(state,dispatch,view){var ref=state.selection,$head=ref.$head,$cut=$head;if(!ref.empty)return!1;if($head.parent.isTextblock){if(view?!view.endOfTextblock("forward",state):$head.parentOffset<$head.parent.content.size)return!1;$cut=findCutAfter($head)}var node=$cut&&$cut.nodeAfter;return!(!node||!prosemirror_state__WEBPACK_IMPORTED_MODULE_2__.NodeSelection.isSelectable(node))&&(dispatch&&dispatch(state.tr.setSelection(prosemirror_state__WEBPACK_IMPORTED_MODULE_2__.NodeSelection.create(state.doc,$cut.pos)).scrollIntoView()),!0)}function findCutAfter($pos){if(!$pos.parent.type.spec.isolating)for(var i=$pos.depth-1;i>=0;i--){var parent=$pos.node(i);if($pos.index(i)+1<parent.childCount)return $pos.doc.resolve($pos.after(i+1));if(parent.type.spec.isolating)break}return null}function joinUp(state,dispatch){var point,sel=state.selection,nodeSel=sel instanceof prosemirror_state__WEBPACK_IMPORTED_MODULE_2__.NodeSelection;if(nodeSel){if(sel.node.isTextblock||!Object(prosemirror_transform__WEBPACK_IMPORTED_MODULE_0__.canJoin)(state.doc,sel.from))return!1;point=sel.from}else if(null==(point=Object(prosemirror_transform__WEBPACK_IMPORTED_MODULE_0__.joinPoint)(state.doc,sel.from,-1)))return!1;if(dispatch){var tr=state.tr.join(point);nodeSel&&tr.setSelection(prosemirror_state__WEBPACK_IMPORTED_MODULE_2__.NodeSelection.create(tr.doc,point-state.doc.resolve(point).nodeBefore.nodeSize)),dispatch(tr.scrollIntoView())}return!0}function joinDown(state,dispatch){var point,sel=state.selection;if(sel instanceof prosemirror_state__WEBPACK_IMPORTED_MODULE_2__.NodeSelection){if(sel.node.isTextblock||!Object(prosemirror_transform__WEBPACK_IMPORTED_MODULE_0__.canJoin)(state.doc,sel.to))return!1;point=sel.to}else if(null==(point=Object(prosemirror_transform__WEBPACK_IMPORTED_MODULE_0__.joinPoint)(state.doc,sel.to,1)))return!1;return dispatch&&dispatch(state.tr.join(point).scrollIntoView()),!0}function lift(state,dispatch){var ref=state.selection,$from=ref.$from,$to=ref.$to,range=$from.blockRange($to),target=range&&Object(prosemirror_transform__WEBPACK_IMPORTED_MODULE_0__.liftTarget)(range);return null!=target&&(dispatch&&dispatch(state.tr.lift(range,target).scrollIntoView()),!0)}function newlineInCode(state,dispatch){var ref=state.selection,$head=ref.$head,$anchor=ref.$anchor;return!(!$head.parent.type.spec.code||!$head.sameParent($anchor))&&(dispatch&&dispatch(state.tr.insertText("\n").scrollIntoView()),!0)}function defaultBlockAt(match){for(var i=0;i<match.edgeCount;i++){var type=match.edge(i).type;if(type.isTextblock&&!type.hasRequiredAttrs())return type}return null}function exitCode(state,dispatch){var ref=state.selection,$head=ref.$head,$anchor=ref.$anchor;if(!$head.parent.type.spec.code||!$head.sameParent($anchor))return!1;var above=$head.node(-1),after=$head.indexAfter(-1),type=defaultBlockAt(above.contentMatchAt(after));if(!above.canReplaceWith(after,after,type))return!1;if(dispatch){var pos=$head.after(),tr=state.tr.replaceWith(pos,pos,type.createAndFill());tr.setSelection(prosemirror_state__WEBPACK_IMPORTED_MODULE_2__.Selection.near(tr.doc.resolve(pos),1)),dispatch(tr.scrollIntoView())}return!0}function createParagraphNear(state,dispatch){var ref=state.selection,$from=ref.$from,$to=ref.$to;if($from.parent.inlineContent||$to.parent.inlineContent)return!1;var type=defaultBlockAt($from.parent.contentMatchAt($to.indexAfter()));if(!type||!type.isTextblock)return!1;if(dispatch){var side=(!$from.parentOffset&&$to.index()<$to.parent.childCount?$from:$to).pos,tr=state.tr.insert(side,type.createAndFill());tr.setSelection(prosemirror_state__WEBPACK_IMPORTED_MODULE_2__.TextSelection.create(tr.doc,side+1)),dispatch(tr.scrollIntoView())}return!0}function liftEmptyBlock(state,dispatch){var $cursor=state.selection.$cursor;if(!$cursor||$cursor.parent.content.size)return!1;if($cursor.depth>1&&$cursor.after()!=$cursor.end(-1)){var before=$cursor.before();if(Object(prosemirror_transform__WEBPACK_IMPORTED_MODULE_0__.canSplit)(state.doc,before))return dispatch&&dispatch(state.tr.split(before).scrollIntoView()),!0}var range=$cursor.blockRange(),target=range&&Object(prosemirror_transform__WEBPACK_IMPORTED_MODULE_0__.liftTarget)(range);return null!=target&&(dispatch&&dispatch(state.tr.lift(range,target).scrollIntoView()),!0)}function splitBlock(state,dispatch){var ref=state.selection,$from=ref.$from,$to=ref.$to;if(state.selection instanceof prosemirror_state__WEBPACK_IMPORTED_MODULE_2__.NodeSelection&&state.selection.node.isBlock)return!(!$from.parentOffset||!Object(prosemirror_transform__WEBPACK_IMPORTED_MODULE_0__.canSplit)(state.doc,$from.pos))&&(dispatch&&dispatch(state.tr.split($from.pos).scrollIntoView()),!0);if(!$from.parent.isBlock)return!1;if(dispatch){var atEnd=$to.parentOffset==$to.parent.content.size,tr=state.tr;state.selection instanceof prosemirror_state__WEBPACK_IMPORTED_MODULE_2__.TextSelection&&tr.deleteSelection();var deflt=0==$from.depth?null:defaultBlockAt($from.node(-1).contentMatchAt($from.indexAfter(-1))),types=atEnd&&deflt?[{type:deflt}]:null,can=Object(prosemirror_transform__WEBPACK_IMPORTED_MODULE_0__.canSplit)(tr.doc,tr.mapping.map($from.pos),1,types);types||can||!Object(prosemirror_transform__WEBPACK_IMPORTED_MODULE_0__.canSplit)(tr.doc,tr.mapping.map($from.pos),1,deflt&&[{type:deflt}])||(types=[{type:deflt}],can=!0),can&&(tr.split(tr.mapping.map($from.pos),1,types),atEnd||$from.parentOffset||$from.parent.type==deflt||!$from.node(-1).canReplace($from.index(-1),$from.indexAfter(-1),prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.from(deflt.create(),$from.parent))||tr.setNodeMarkup(tr.mapping.map($from.before()),deflt)),dispatch(tr.scrollIntoView())}return!0}function splitBlockKeepMarks(state,dispatch){return splitBlock(state,dispatch&&function(tr){var marks=state.storedMarks||state.selection.$to.parentOffset&&state.selection.$from.marks();marks&&tr.ensureMarks(marks),dispatch(tr)})}function selectParentNode(state,dispatch){var pos,ref=state.selection,$from=ref.$from,to=ref.to,same=$from.sharedDepth(to);return 0!=same&&(pos=$from.before(same),dispatch&&dispatch(state.tr.setSelection(prosemirror_state__WEBPACK_IMPORTED_MODULE_2__.NodeSelection.create(state.doc,pos))),!0)}function selectAll(state,dispatch){return dispatch&&dispatch(state.tr.setSelection(new prosemirror_state__WEBPACK_IMPORTED_MODULE_2__.AllSelection(state.doc))),!0}function deleteBarrier(state,$cut,dispatch){var conn,match,before=$cut.nodeBefore,after=$cut.nodeAfter;if(before.type.spec.isolating||after.type.spec.isolating)return!1;if(function(state,$pos,dispatch){var before=$pos.nodeBefore,after=$pos.nodeAfter,index=$pos.index();return!(!(before&&after&&before.type.compatibleContent(after.type))||(!before.content.size&&$pos.parent.canReplace(index-1,index)?(dispatch&&dispatch(state.tr.delete($pos.pos-before.nodeSize,$pos.pos).scrollIntoView()),0):!$pos.parent.canReplace(index,index+1)||!after.isTextblock&&!Object(prosemirror_transform__WEBPACK_IMPORTED_MODULE_0__.canJoin)(state.doc,$pos.pos)||(dispatch&&dispatch(state.tr.clearIncompatible($pos.pos,before.type,before.contentMatchAt(before.childCount)).join($pos.pos).scrollIntoView()),0)))}(state,$cut,dispatch))return!0;if($cut.parent.canReplace($cut.index(),$cut.index()+1)&&(conn=(match=before.contentMatchAt(before.childCount)).findWrapping(after.type))&&match.matchType(conn[0]||after.type).validEnd){if(dispatch){for(var end=$cut.pos+after.nodeSize,wrap=prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.empty,i=conn.length-1;i>=0;i--)wrap=prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.from(conn[i].create(null,wrap));wrap=prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.from(before.copy(wrap));var tr=state.tr.step(new prosemirror_transform__WEBPACK_IMPORTED_MODULE_0__.ReplaceAroundStep($cut.pos-1,end,$cut.pos,end,new prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Slice(wrap,1,0),conn.length,!0)),joinAt=end+2*conn.length;Object(prosemirror_transform__WEBPACK_IMPORTED_MODULE_0__.canJoin)(tr.doc,joinAt)&&tr.join(joinAt),dispatch(tr.scrollIntoView())}return!0}var selAfter=prosemirror_state__WEBPACK_IMPORTED_MODULE_2__.Selection.findFrom($cut,1),range=selAfter&&selAfter.$from.blockRange(selAfter.$to),target=range&&Object(prosemirror_transform__WEBPACK_IMPORTED_MODULE_0__.liftTarget)(range);return null!=target&&target>=$cut.depth&&(dispatch&&dispatch(state.tr.lift(range,target).scrollIntoView()),!0)}function wrapIn(nodeType,attrs){return function(state,dispatch){var ref=state.selection,$from=ref.$from,$to=ref.$to,range=$from.blockRange($to),wrapping=range&&Object(prosemirror_transform__WEBPACK_IMPORTED_MODULE_0__.findWrapping)(range,nodeType,attrs);return!!wrapping&&(dispatch&&dispatch(state.tr.wrap(range,wrapping).scrollIntoView()),!0)}}function setBlockType(nodeType,attrs){return function(state,dispatch){var ref=state.selection,from=ref.from,to=ref.to,applicable=!1;return state.doc.nodesBetween(from,to,(function(node,pos){if(applicable)return!1;if(node.isTextblock&&!node.hasMarkup(nodeType,attrs))if(node.type==nodeType)applicable=!0;else{var $pos=state.doc.resolve(pos),index=$pos.index();applicable=$pos.parent.canReplaceWith(index,index+1,nodeType)}})),!!applicable&&(dispatch&&dispatch(state.tr.setBlockType(from,to,nodeType,attrs).scrollIntoView()),!0)}}function toggleMark(markType,attrs){return function(state,dispatch){var ref=state.selection,empty=ref.empty,$cursor=ref.$cursor,ranges=ref.ranges;if(empty&&!$cursor||!function(doc,ranges,type){for(var loop=function(i){var ref=ranges[i],$from=ref.$from,$to=ref.$to,can=0==$from.depth&&doc.type.allowsMarkType(type);if(doc.nodesBetween($from.pos,$to.pos,(function(node){if(can)return!1;can=node.inlineContent&&node.type.allowsMarkType(type)})),can)return{v:!0}},i=0;i<ranges.length;i++){var returned=loop(i);if(returned)return returned.v}return!1}(state.doc,ranges,markType))return!1;if(dispatch)if($cursor)markType.isInSet(state.storedMarks||$cursor.marks())?dispatch(state.tr.removeStoredMark(markType)):dispatch(state.tr.addStoredMark(markType.create(attrs)));else{for(var has=!1,tr=state.tr,i=0;!has&&i<ranges.length;i++){var ref$1=ranges[i],$from=ref$1.$from,$to=ref$1.$to;has=state.doc.rangeHasMark($from.pos,$to.pos,markType)}for(var i$1=0;i$1<ranges.length;i$1++){var ref$2=ranges[i$1],$from$1=ref$2.$from,$to$1=ref$2.$to;has?tr.removeMark($from$1.pos,$to$1.pos,markType):tr.addMark($from$1.pos,$to$1.pos,markType.create(attrs))}dispatch(tr.scrollIntoView())}return!0}}function autoJoin(command,isJoinable){if(Array.isArray(isJoinable)){var types=isJoinable;isJoinable=function(node){return types.indexOf(node.type.name)>-1}}return function(state,dispatch){return command(state,dispatch&&function(dispatch,isJoinable){return function(tr){if(!tr.isGeneric)return dispatch(tr);for(var ranges=[],i=0;i<tr.mapping.maps.length;i++){for(var map=tr.mapping.maps[i],j=0;j<ranges.length;j++)ranges[j]=map.map(ranges[j]);map.forEach((function(_s,_e,from,to){return ranges.push(from,to)}))}for(var joinable=[],i$1=0;i$1<ranges.length;i$1+=2)for(var from=ranges[i$1],to=ranges[i$1+1],$from=tr.doc.resolve(from),depth=$from.sharedDepth(to),parent=$from.node(depth),index=$from.indexAfter(depth),pos=$from.after(depth+1);pos<=to;++index){var after=parent.maybeChild(index);if(!after)break;if(index&&-1==joinable.indexOf(pos)){var before=parent.child(index-1);before.type==after.type&&isJoinable(before,after)&&joinable.push(pos)}pos+=after.nodeSize}joinable.sort((function(a,b){return a-b}));for(var i$2=joinable.length-1;i$2>=0;i$2--)Object(prosemirror_transform__WEBPACK_IMPORTED_MODULE_0__.canJoin)(tr.doc,joinable[i$2])&&tr.join(joinable[i$2]);dispatch(tr)}}(dispatch,isJoinable))}}function chainCommands(){for(var commands=[],len=arguments.length;len--;)commands[len]=arguments[len];return function(state,dispatch,view){for(var i=0;i<commands.length;i++)if(commands[i](state,dispatch,view))return!0;return!1}}var backspace=chainCommands(deleteSelection,joinBackward,selectNodeBackward),del=chainCommands(deleteSelection,joinForward,selectNodeForward),pcBaseKeymap={Enter:chainCommands(newlineInCode,createParagraphNear,liftEmptyBlock,splitBlock),"Mod-Enter":exitCode,Backspace:backspace,"Mod-Backspace":backspace,Delete:del,"Mod-Delete":del,"Mod-a":selectAll},macBaseKeymap={"Ctrl-h":pcBaseKeymap.Backspace,"Alt-Backspace":pcBaseKeymap["Mod-Backspace"],"Ctrl-d":pcBaseKeymap.Delete,"Ctrl-Alt-Backspace":pcBaseKeymap["Mod-Delete"],"Alt-Delete":pcBaseKeymap["Mod-Delete"],"Alt-d":pcBaseKeymap["Mod-Delete"]};for(var key in pcBaseKeymap)macBaseKeymap[key]=pcBaseKeymap[key];var baseKeymap=("undefined"!=typeof navigator?/Mac/.test(navigator.platform):"undefined"!=typeof os&&"darwin"==os.platform())?macBaseKeymap:pcBaseKeymap},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"addListNodes",(function(){return addListNodes})),__webpack_require__.d(__webpack_exports__,"bulletList",(function(){return bulletList})),__webpack_require__.d(__webpack_exports__,"liftListItem",(function(){return liftListItem})),__webpack_require__.d(__webpack_exports__,"listItem",(function(){return listItem})),__webpack_require__.d(__webpack_exports__,"orderedList",(function(){return orderedList})),__webpack_require__.d(__webpack_exports__,"sinkListItem",(function(){return sinkListItem})),__webpack_require__.d(__webpack_exports__,"splitListItem",(function(){return splitListItem})),__webpack_require__.d(__webpack_exports__,"wrapInList",(function(){return wrapInList}));var prosemirror_transform__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5),prosemirror_model__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),olDOM=["ol",0],ulDOM=["ul",0],liDOM=["li",0],orderedList={attrs:{order:{default:1}},parseDOM:[{tag:"ol",getAttrs:function(dom){return{order:dom.hasAttribute("start")?+dom.getAttribute("start"):1}}}],toDOM:function(node){return 1==node.attrs.order?olDOM:["ol",{start:node.attrs.order},0]}},bulletList={parseDOM:[{tag:"ul"}],toDOM:function(){return ulDOM}},listItem={parseDOM:[{tag:"li"}],toDOM:function(){return liDOM},defining:!0};function add(obj,props){var copy={};for(var prop in obj)copy[prop]=obj[prop];for(var prop$1 in props)copy[prop$1]=props[prop$1];return copy}function addListNodes(nodes,itemContent,listGroup){return nodes.append({ordered_list:add(orderedList,{content:"list_item+",group:listGroup}),bullet_list:add(bulletList,{content:"list_item+",group:listGroup}),list_item:add(listItem,{content:itemContent})})}function wrapInList(listType,attrs){return function(state,dispatch){var ref=state.selection,$from=ref.$from,$to=ref.$to,range=$from.blockRange($to),doJoin=!1,outerRange=range;if(!range)return!1;if(range.depth>=2&&$from.node(range.depth-1).type.compatibleContent(listType)&&0==range.startIndex){if(0==$from.index(range.depth-1))return!1;var $insert=state.doc.resolve(range.start-2);outerRange=new prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.NodeRange($insert,$insert,range.depth),range.endIndex<range.parent.childCount&&(range=new prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.NodeRange($from,state.doc.resolve($to.end(range.depth)),range.depth)),doJoin=!0}var wrap=Object(prosemirror_transform__WEBPACK_IMPORTED_MODULE_0__.findWrapping)(outerRange,listType,attrs,range);return!!wrap&&(dispatch&&dispatch(function(tr,range,wrappers,joinBefore,listType){for(var content=prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.empty,i=wrappers.length-1;i>=0;i--)content=prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.from(wrappers[i].type.create(wrappers[i].attrs,content));tr.step(new prosemirror_transform__WEBPACK_IMPORTED_MODULE_0__.ReplaceAroundStep(range.start-(joinBefore?2:0),range.end,range.start,range.end,new prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Slice(content,0,0),wrappers.length,!0));for(var found=0,i$1=0;i$1<wrappers.length;i$1++)wrappers[i$1].type==listType&&(found=i$1+1);for(var splitDepth=wrappers.length-found,splitPos=range.start+wrappers.length-(joinBefore?2:0),parent=range.parent,i$2=range.startIndex,e=range.endIndex,first=!0;i$2<e;i$2++,first=!1)!first&&Object(prosemirror_transform__WEBPACK_IMPORTED_MODULE_0__.canSplit)(tr.doc,splitPos,splitDepth)&&(tr.split(splitPos,splitDepth),splitPos+=2*splitDepth),splitPos+=parent.child(i$2).nodeSize;return tr}(state.tr,range,wrap,doJoin,listType).scrollIntoView()),!0)}}function splitListItem(itemType){return function(state,dispatch){var ref=state.selection,$from=ref.$from,$to=ref.$to,node=ref.node;if(node&&node.isBlock||$from.depth<2||!$from.sameParent($to))return!1;var grandParent=$from.node(-1);if(grandParent.type!=itemType)return!1;if(0==$from.parent.content.size&&$from.node(-1).childCount==$from.indexAfter(-1)){if(2==$from.depth||$from.node(-3).type!=itemType||$from.index(-2)!=$from.node(-2).childCount-1)return!1;if(dispatch){for(var wrap=prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.empty,keepItem=$from.index(-1)>0,d=$from.depth-(keepItem?1:2);d>=$from.depth-3;d--)wrap=prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.from($from.node(d).copy(wrap));wrap=wrap.append(prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.from(itemType.createAndFill()));var tr$1=state.tr.replace($from.before(keepItem?null:-1),$from.after(-3),new prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Slice(wrap,keepItem?3:2,2));tr$1.setSelection(state.selection.constructor.near(tr$1.doc.resolve($from.pos+(keepItem?3:2)))),dispatch(tr$1.scrollIntoView())}return!0}var nextType=$to.pos==$from.end()?grandParent.contentMatchAt(0).defaultType:null,tr=state.tr.delete($from.pos,$to.pos),types=nextType&&[null,{type:nextType}];return!!Object(prosemirror_transform__WEBPACK_IMPORTED_MODULE_0__.canSplit)(tr.doc,$from.pos,2,types)&&(dispatch&&dispatch(tr.split($from.pos,2,types).scrollIntoView()),!0)}}function liftListItem(itemType){return function(state,dispatch){var ref=state.selection,$from=ref.$from,$to=ref.$to,range=$from.blockRange($to,(function(node){return node.childCount&&node.firstChild.type==itemType}));return!!range&&(!dispatch||($from.node(range.depth-1).type==itemType?function(state,dispatch,itemType,range){var tr=state.tr,end=range.end,endOfList=range.$to.end(range.depth);end<endOfList&&(tr.step(new prosemirror_transform__WEBPACK_IMPORTED_MODULE_0__.ReplaceAroundStep(end-1,endOfList,end,endOfList,new prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Slice(prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.from(itemType.create(null,range.parent.copy())),1,0),1,!0)),range=new prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.NodeRange(tr.doc.resolve(range.$from.pos),tr.doc.resolve(endOfList),range.depth));return dispatch(tr.lift(range,Object(prosemirror_transform__WEBPACK_IMPORTED_MODULE_0__.liftTarget)(range)).scrollIntoView()),!0}(state,dispatch,itemType,range):function(state,dispatch,range){for(var tr=state.tr,list=range.parent,pos=range.end,i=range.endIndex-1,e=range.startIndex;i>e;i--)pos-=list.child(i).nodeSize,tr.delete(pos-1,pos+1);var $start=tr.doc.resolve(range.start),item=$start.nodeAfter,atStart=0==range.startIndex,atEnd=range.endIndex==list.childCount,parent=$start.node(-1),indexBefore=$start.index(-1);if(!parent.canReplace(indexBefore+(atStart?0:1),indexBefore+1,item.content.append(atEnd?prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.empty:prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.from(list))))return!1;var start=$start.pos,end=start+item.nodeSize;return tr.step(new prosemirror_transform__WEBPACK_IMPORTED_MODULE_0__.ReplaceAroundStep(start-(atStart?1:0),end+(atEnd?1:0),start+1,end-1,new prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Slice((atStart?prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.empty:prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.from(list.copy(prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.empty))).append(atEnd?prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.empty:prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.from(list.copy(prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.empty))),atStart?0:1,atEnd?0:1),atStart?0:1)),dispatch(tr.scrollIntoView()),!0}(state,dispatch,range)))}}function sinkListItem(itemType){return function(state,dispatch){var ref=state.selection,$from=ref.$from,$to=ref.$to,range=$from.blockRange($to,(function(node){return node.childCount&&node.firstChild.type==itemType}));if(!range)return!1;var startIndex=range.startIndex;if(0==startIndex)return!1;var parent=range.parent,nodeBefore=parent.child(startIndex-1);if(nodeBefore.type!=itemType)return!1;if(dispatch){var nestedBefore=nodeBefore.lastChild&&nodeBefore.lastChild.type==parent.type,inner=prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.from(nestedBefore?itemType.create():null),slice=new prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Slice(prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.from(itemType.create(null,prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.from(parent.type.create(null,inner)))),nestedBefore?3:1,0),before=range.start,after=range.end;dispatch(state.tr.step(new prosemirror_transform__WEBPACK_IMPORTED_MODULE_0__.ReplaceAroundStep(before-(nestedBefore?3:1),after,before,after,slice,1,!0)).scrollIntoView())}return!0}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SearchHandlers=void 0;const searchModel_1=__webpack_require__(108);exports.SearchHandlers=class{getWidgetOrder(){return __awaiter(this,void 0,void 0,(function*(){return{name:"search",displayName:"Search website",iconClass:"paperbits-cheque-3",requires:["html","js"],createModel:()=>__awaiter(this,void 0,void 0,(function*(){return new searchModel_1.SearchModel}))}}))}}},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SearchViewModel=void 0;const search_html_1=__webpack_require__(999),decorators_1=__webpack_require__(2);let SearchViewModel=class{};SearchViewModel=__decorate([decorators_1.Component({selector:"search",template:search_html_1.default})],SearchViewModel),exports.SearchViewModel=SearchViewModel},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ClickCounterViewModel=void 0;const clickCounter_html_1=__webpack_require__(1009),decorators_1=__webpack_require__(2);let ClickCounterViewModel=class{};ClickCounterViewModel=__decorate([decorators_1.Component({selector:"click-counter",template:clickCounter_html_1.default})],ClickCounterViewModel),exports.ClickCounterViewModel=ClickCounterViewModel},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"HistoryState",(function(){return HistoryState})),__webpack_require__.d(__webpack_exports__,"closeHistory",(function(){return closeHistory})),__webpack_require__.d(__webpack_exports__,"history",(function(){return index_es_history})),__webpack_require__.d(__webpack_exports__,"redo",(function(){return redo})),__webpack_require__.d(__webpack_exports__,"redoDepth",(function(){return redoDepth})),__webpack_require__.d(__webpack_exports__,"undo",(function(){return undo})),__webpack_require__.d(__webpack_exports__,"undoDepth",(function(){return undoDepth}));var RopeSequence=function(){};RopeSequence.prototype.append=function(other){return other.length?(other=RopeSequence.from(other),!this.length&&other||other.length<200&&this.leafAppend(other)||this.length<200&&other.leafPrepend(this)||this.appendInner(other)):this},RopeSequence.prototype.prepend=function(other){return other.length?RopeSequence.from(other).append(this):this},RopeSequence.prototype.appendInner=function(other){return new Append(this,other)},RopeSequence.prototype.slice=function(from,to){return void 0===from&&(from=0),void 0===to&&(to=this.length),from>=to?RopeSequence.empty:this.sliceInner(Math.max(0,from),Math.min(this.length,to))},RopeSequence.prototype.get=function(i){if(!(i<0||i>=this.length))return this.getInner(i)},RopeSequence.prototype.forEach=function(f,from,to){void 0===from&&(from=0),void 0===to&&(to=this.length),from<=to?this.forEachInner(f,from,to,0):this.forEachInvertedInner(f,from,to,0)},RopeSequence.prototype.map=function(f,from,to){void 0===from&&(from=0),void 0===to&&(to=this.length);var result=[];return this.forEach((function(elt,i){return result.push(f(elt,i))}),from,to),result},RopeSequence.from=function(values){return values instanceof RopeSequence?values:values&&values.length?new Leaf(values):RopeSequence.empty};var Leaf=function(RopeSequence){function Leaf(values){RopeSequence.call(this),this.values=values}RopeSequence&&(Leaf.__proto__=RopeSequence),Leaf.prototype=Object.create(RopeSequence&&RopeSequence.prototype),Leaf.prototype.constructor=Leaf;var prototypeAccessors={length:{configurable:!0},depth:{configurable:!0}};return Leaf.prototype.flatten=function(){return this.values},Leaf.prototype.sliceInner=function(from,to){return 0==from&&to==this.length?this:new Leaf(this.values.slice(from,to))},Leaf.prototype.getInner=function(i){return this.values[i]},Leaf.prototype.forEachInner=function(f,from,to,start){for(var i=from;i<to;i++)if(!1===f(this.values[i],start+i))return!1},Leaf.prototype.forEachInvertedInner=function(f,from,to,start){for(var i=from-1;i>=to;i--)if(!1===f(this.values[i],start+i))return!1},Leaf.prototype.leafAppend=function(other){if(this.length+other.length<=200)return new Leaf(this.values.concat(other.flatten()))},Leaf.prototype.leafPrepend=function(other){if(this.length+other.length<=200)return new Leaf(other.flatten().concat(this.values))},prototypeAccessors.length.get=function(){return this.values.length},prototypeAccessors.depth.get=function(){return 0},Object.defineProperties(Leaf.prototype,prototypeAccessors),Leaf}(RopeSequence);RopeSequence.empty=new Leaf([]);var Append=function(RopeSequence){function Append(left,right){RopeSequence.call(this),this.left=left,this.right=right,this.length=left.length+right.length,this.depth=Math.max(left.depth,right.depth)+1}return RopeSequence&&(Append.__proto__=RopeSequence),Append.prototype=Object.create(RopeSequence&&RopeSequence.prototype),Append.prototype.constructor=Append,Append.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},Append.prototype.getInner=function(i){return i<this.left.length?this.left.get(i):this.right.get(i-this.left.length)},Append.prototype.forEachInner=function(f,from,to,start){var leftLen=this.left.length;return!(from<leftLen&&!1===this.left.forEachInner(f,from,Math.min(to,leftLen),start))&&(!(to>leftLen&&!1===this.right.forEachInner(f,Math.max(from-leftLen,0),Math.min(this.length,to)-leftLen,start+leftLen))&&void 0)},Append.prototype.forEachInvertedInner=function(f,from,to,start){var leftLen=this.left.length;return!(from>leftLen&&!1===this.right.forEachInvertedInner(f,from-leftLen,Math.max(to,leftLen)-leftLen,start+leftLen))&&(!(to<leftLen&&!1===this.left.forEachInvertedInner(f,Math.min(from,leftLen),to,start))&&void 0)},Append.prototype.sliceInner=function(from,to){if(0==from&&to==this.length)return this;var leftLen=this.left.length;return to<=leftLen?this.left.slice(from,to):from>=leftLen?this.right.slice(from-leftLen,to-leftLen):this.left.slice(from,leftLen).append(this.right.slice(0,to-leftLen))},Append.prototype.leafAppend=function(other){var inner=this.right.leafAppend(other);if(inner)return new Append(this.left,inner)},Append.prototype.leafPrepend=function(other){var inner=this.left.leafPrepend(other);if(inner)return new Append(inner,this.right)},Append.prototype.appendInner=function(other){return this.left.depth>=Math.max(this.right.depth,other.depth)+1?new Append(this.left,new Append(this.right,other)):new Append(this,other)},Append}(RopeSequence),index_es=RopeSequence,dist_index_es=__webpack_require__(5),prosemirror_state_dist_index_es=__webpack_require__(3),Branch=function(items,eventCount){this.items=items,this.eventCount=eventCount};Branch.prototype.popEvent=function(state,preserveItems){var this$1=this;if(0==this.eventCount)return null;for(var remap,mapFrom,end=this.items.length;;end--){if(this.items.get(end-1).selection){--end;break}}preserveItems&&(remap=this.remapping(end,this.items.length),mapFrom=remap.maps.length);var selection,remaining,transform=state.tr,addAfter=[],addBefore=[];return this.items.forEach((function(item,i){if(!item.step)return remap||(remap=this$1.remapping(end,i+1),mapFrom=remap.maps.length),mapFrom--,void addBefore.push(item);if(remap){addBefore.push(new Item(item.map));var map,step=item.step.map(remap.slice(mapFrom));step&&transform.maybeStep(step).doc&&(map=transform.mapping.maps[transform.mapping.maps.length-1],addAfter.push(new Item(map,null,null,addAfter.length+addBefore.length))),mapFrom--,map&&remap.appendMap(map,mapFrom)}else transform.maybeStep(item.step);return item.selection?(selection=remap?item.selection.map(remap.slice(mapFrom)):item.selection,remaining=new Branch(this$1.items.slice(0,end).append(addBefore.reverse().concat(addAfter)),this$1.eventCount-1),!1):void 0}),this.items.length,0),{remaining:remaining,transform:transform,selection:selection}},Branch.prototype.addTransform=function(transform,selection,histOptions,preserveItems){for(var newItems=[],eventCount=this.eventCount,oldItems=this.items,lastItem=!preserveItems&&oldItems.length?oldItems.get(oldItems.length-1):null,i=0;i<transform.steps.length;i++){var merged,step=transform.steps[i].invert(transform.docs[i]),item=new Item(transform.mapping.maps[i],step,selection);(merged=lastItem&&lastItem.merge(item))&&(item=merged,i?newItems.pop():oldItems=oldItems.slice(0,oldItems.length-1)),newItems.push(item),selection&&(eventCount++,selection=null),preserveItems||(lastItem=item)}var items,n,cutPoint,overflow=eventCount-histOptions.depth;return overflow>DEPTH_OVERFLOW&&(n=overflow,(items=oldItems).forEach((function(item,i){if(item.selection&&0==n--)return cutPoint=i,!1})),oldItems=items.slice(cutPoint),eventCount-=overflow),new Branch(oldItems.append(newItems),eventCount)},Branch.prototype.remapping=function(from,to){var maps=new dist_index_es.Mapping;return this.items.forEach((function(item,i){var mirrorPos=null!=item.mirrorOffset&&i-item.mirrorOffset>=from?maps.maps.length-item.mirrorOffset:null;maps.appendMap(item.map,mirrorPos)}),from,to),maps},Branch.prototype.addMaps=function(array){return 0==this.eventCount?this:new Branch(this.items.append(array.map((function(map){return new Item(map)}))),this.eventCount)},Branch.prototype.rebased=function(rebasedTransform,rebasedCount){if(!this.eventCount)return this;var rebasedItems=[],start=Math.max(0,this.items.length-rebasedCount),mapping=rebasedTransform.mapping,newUntil=rebasedTransform.steps.length,eventCount=this.eventCount;this.items.forEach((function(item){item.selection&&eventCount--}),start);var iRebased=rebasedCount;this.items.forEach((function(item){var pos=mapping.getMirror(--iRebased);if(null!=pos){newUntil=Math.min(newUntil,pos);var map=mapping.maps[pos];if(item.step){var step=rebasedTransform.steps[pos].invert(rebasedTransform.docs[pos]),selection=item.selection&&item.selection.map(mapping.slice(iRebased+1,pos));selection&&eventCount++,rebasedItems.push(new Item(map,step,selection))}else rebasedItems.push(new Item(map))}}),start);for(var newMaps=[],i=rebasedCount;i<newUntil;i++)newMaps.push(new Item(mapping.maps[i]));var items=this.items.slice(0,start).append(newMaps).append(rebasedItems),branch=new Branch(items,eventCount);return branch.emptyItemCount()>500&&(branch=branch.compress(this.items.length-rebasedItems.length)),branch},Branch.prototype.emptyItemCount=function(){var count=0;return this.items.forEach((function(item){item.step||count++})),count},Branch.prototype.compress=function(upto){void 0===upto&&(upto=this.items.length);var remap=this.remapping(0,upto),mapFrom=remap.maps.length,items=[],events=0;return this.items.forEach((function(item,i){if(i>=upto)items.push(item),item.selection&&events++;else if(item.step){var step=item.step.map(remap.slice(mapFrom)),map=step&&step.getMap();if(mapFrom--,map&&remap.appendMap(map,mapFrom),step){var selection=item.selection&&item.selection.map(remap.slice(mapFrom));selection&&events++;var merged,newItem=new Item(map.invert(),step,selection),last=items.length-1;(merged=items.length&&items[last].merge(newItem))?items[last]=merged:items.push(newItem)}}else item.map&&mapFrom--}),this.items.length,0),new Branch(index_es.from(items.reverse()),events)},Branch.empty=new Branch(index_es.empty,0);var Item=function(map,step,selection,mirrorOffset){this.map=map,this.step=step,this.selection=selection,this.mirrorOffset=mirrorOffset};Item.prototype.merge=function(other){if(this.step&&other.step&&!other.selection){var step=other.step.merge(this.step);if(step)return new Item(step.getMap().invert(),step,this.selection)}};var HistoryState=function(done,undone,prevRanges,prevTime){this.done=done,this.undone=undone,this.prevRanges=prevRanges,this.prevTime=prevTime},DEPTH_OVERFLOW=20;function rangesFor(map){var result=[];return map.forEach((function(_from,_to,from,to){return result.push(from,to)})),result}function mapRanges(ranges,mapping){if(!ranges)return null;for(var result=[],i=0;i<ranges.length;i+=2){var from=mapping.map(ranges[i],1),to=mapping.map(ranges[i+1],-1);from<=to&&result.push(from,to)}return result}function histTransaction(history,state,dispatch,redo){var preserveItems=mustPreserveItems(state),histOptions=historyKey.get(state).spec.config,pop=(redo?history.undone:history.done).popEvent(state,preserveItems);if(pop){var selection=pop.selection.resolve(pop.transform.doc),added=(redo?history.done:history.undone).addTransform(pop.transform,state.selection.getBookmark(),histOptions,preserveItems),newHist=new HistoryState(redo?added:pop.remaining,redo?pop.remaining:added,null,0);dispatch(pop.transform.setSelection(selection).setMeta(historyKey,{redo:redo,historyState:newHist}).scrollIntoView())}}var cachedPreserveItems=!1,cachedPreserveItemsPlugins=null;function mustPreserveItems(state){var plugins=state.plugins;if(cachedPreserveItemsPlugins!=plugins){cachedPreserveItems=!1,cachedPreserveItemsPlugins=plugins;for(var i=0;i<plugins.length;i++)if(plugins[i].spec.historyPreserveItems){cachedPreserveItems=!0;break}}return cachedPreserveItems}function closeHistory(tr){return tr.setMeta(closeHistoryKey,!0)}var historyKey=new prosemirror_state_dist_index_es.PluginKey("history"),closeHistoryKey=new prosemirror_state_dist_index_es.PluginKey("closeHistory");function index_es_history(config){return config={depth:config&&config.depth||100,newGroupDelay:config&&config.newGroupDelay||500},new prosemirror_state_dist_index_es.Plugin({key:historyKey,state:{init:function(){return new HistoryState(Branch.empty,Branch.empty,null,0)},apply:function(tr,hist,state){return function(history,state,tr,options){var rebased,historyTr=tr.getMeta(historyKey);if(historyTr)return historyTr.historyState;tr.getMeta(closeHistoryKey)&&(history=new HistoryState(history.done,history.undone,null,0));var appended=tr.getMeta("appendedTransaction");if(0==tr.steps.length)return history;if(appended&&appended.getMeta(historyKey))return appended.getMeta(historyKey).redo?new HistoryState(history.done.addTransform(tr,null,options,mustPreserveItems(state)),history.undone,rangesFor(tr.mapping.maps[tr.steps.length-1]),history.prevTime):new HistoryState(history.done,history.undone.addTransform(tr,null,options,mustPreserveItems(state)),null,history.prevTime);if(!1===tr.getMeta("addToHistory")||appended&&!1===appended.getMeta("addToHistory"))return(rebased=tr.getMeta("rebased"))?new HistoryState(history.done.rebased(tr,rebased),history.undone.rebased(tr,rebased),mapRanges(history.prevRanges,tr.mapping),history.prevTime):new HistoryState(history.done.addMaps(tr.mapping.maps),history.undone.addMaps(tr.mapping.maps),mapRanges(history.prevRanges,tr.mapping),history.prevTime);var newGroup=0==history.prevTime||!appended&&(history.prevTime<(tr.time||0)-options.newGroupDelay||!function(transform,prevRanges){if(!prevRanges)return!1;if(!transform.docChanged)return!0;var adjacent=!1;return transform.mapping.maps[0].forEach((function(start,end){for(var i=0;i<prevRanges.length;i+=2)start<=prevRanges[i+1]&&end>=prevRanges[i]&&(adjacent=!0)})),adjacent}(tr,history.prevRanges)),prevRanges=appended?mapRanges(history.prevRanges,tr.mapping):rangesFor(tr.mapping.maps[tr.steps.length-1]);return new HistoryState(history.done.addTransform(tr,newGroup?state.selection.getBookmark():null,options,mustPreserveItems(state)),Branch.empty,prevRanges,tr.time)}(hist,state,tr,config)}},config:config})}function undo(state,dispatch){var hist=historyKey.getState(state);return!(!hist||0==hist.done.eventCount)&&(dispatch&&histTransaction(hist,state,dispatch,!1),!0)}function redo(state,dispatch){var hist=historyKey.getState(state);return!(!hist||0==hist.undone.eventCount)&&(dispatch&&histTransaction(hist,state,dispatch,!0),!0)}function undoDepth(state){var hist=historyKey.getState(state);return hist?hist.done.eventCount:0}function redoDepth(state){var hist=historyKey.getState(state);return hist?hist.undone.eventCount:0}},function(module,__webpack_exports__,__webpack_require__){"use strict";function symbolObservablePonyfill(root){var result,Symbol=root.Symbol;return"function"==typeof Symbol?Symbol.observable?result=Symbol.observable:(result=Symbol("observable"),Symbol.observable=result):result="@@observable",result}__webpack_require__.d(__webpack_exports__,"a",(function(){return symbolObservablePonyfill}))},function(module,exports,__webpack_require__){module.exports=__webpack_require__(311)},function(module,exports,__webpack_require__){"use strict";(function(setImmediate){Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(313);const ReactDOM=__webpack_require__(419),react_1=__webpack_require__(129),designer_1=__webpack_require__(424),injection_1=__webpack_require__(130),core_design_module_1=__webpack_require__(456),styles_design_module_1=__webpack_require__(899),prosemirror_module_1=__webpack_require__(980),offline_module_1=__webpack_require__(987),demo_design_module_1=__webpack_require__(991),injector=new injection_1.InversifyInjector;injector.bindModule(new core_design_module_1.CoreDesignModule),injector.bindModule(new styles_design_module_1.StylesDesignModule),injector.bindModule(new prosemirror_module_1.ProseMirrorModule),injector.bindModule(new demo_design_module_1.DemoDesignModule),injector.bindModule(new offline_module_1.OfflineModule({autosave:!1})),injector.resolve("autostart"),document.addEventListener("DOMContentLoaded",()=>{setImmediate(()=>{const reactElement=react_1.createElement(designer_1.Designer);ReactDOM.render(reactElement,document.body)})})}).call(this,__webpack_require__(60).setImmediate)},function(module,exports,__webpack_require__){(function(global,process){!function(global,undefined){"use strict";if(!global.setImmediate){var registerImmediate,html,channel,messagePrefix,onGlobalMessage,nextHandle=1,tasksByHandle={},currentlyRunningATask=!1,doc=global.document,attachTo=Object.getPrototypeOf&&Object.getPrototypeOf(global);attachTo=attachTo&&attachTo.setTimeout?attachTo:global,"[object process]"==={}.toString.call(global.process)?registerImmediate=function(handle){process.nextTick((function(){runIfPresent(handle)}))}:!function(){if(global.postMessage&&!global.importScripts){var postMessageIsAsynchronous=!0,oldOnMessage=global.onmessage;return global.onmessage=function(){postMessageIsAsynchronous=!1},global.postMessage("","*"),global.onmessage=oldOnMessage,postMessageIsAsynchronous}}()?global.MessageChannel?((channel=new MessageChannel).port1.onmessage=function(event){runIfPresent(event.data)},registerImmediate=function(handle){channel.port2.postMessage(handle)}):doc&&"onreadystatechange"in doc.createElement("script")?(html=doc.documentElement,registerImmediate=function(handle){var script=doc.createElement("script");script.onreadystatechange=function(){runIfPresent(handle),script.onreadystatechange=null,html.removeChild(script),script=null},html.appendChild(script)}):registerImmediate=function(handle){setTimeout(runIfPresent,0,handle)}:(messagePrefix="setImmediate$"+Math.random()+"$",onGlobalMessage=function(event){event.source===global&&"string"==typeof event.data&&0===event.data.indexOf(messagePrefix)&&runIfPresent(+event.data.slice(messagePrefix.length))},global.addEventListener?global.addEventListener("message",onGlobalMessage,!1):global.attachEvent("onmessage",onGlobalMessage),registerImmediate=function(handle){global.postMessage(messagePrefix+handle,"*")}),attachTo.setImmediate=function(callback){"function"!=typeof callback&&(callback=new Function(""+callback));for(var args=new Array(arguments.length-1),i=0;i<args.length;i++)args[i]=arguments[i+1];var task={callback:callback,args:args};return tasksByHandle[nextHandle]=task,registerImmediate(nextHandle),nextHandle++},attachTo.clearImmediate=clearImmediate}function clearImmediate(handle){delete tasksByHandle[handle]}function runIfPresent(handle){if(currentlyRunningATask)setTimeout(runIfPresent,0,handle);else{var task=tasksByHandle[handle];if(task){currentlyRunningATask=!0;try{!function(task){var callback=task.callback,args=task.args;switch(args.length){case 0:callback();break;case 1:callback(args[0]);break;case 2:callback(args[0],args[1]);break;case 3:callback(args[0],args[1],args[2]);break;default:callback.apply(void 0,args)}}(task)}finally{clearImmediate(handle),currentlyRunningATask=!1}}}}}("undefined"==typeof self?void 0===global?this:global:self)}).call(this,__webpack_require__(39),__webpack_require__(88))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(314),__webpack_require__(315),__webpack_require__(351),__webpack_require__(379),__webpack_require__(389),__webpack_require__(404)},function(module,exports){(function(){"use strict";var n=window.Document.prototype.createElement,p=window.Document.prototype.createElementNS,aa=window.Document.prototype.importNode,ba=window.Document.prototype.prepend,ca=window.Document.prototype.append,da=window.DocumentFragment.prototype.prepend,ea=window.DocumentFragment.prototype.append,q=window.Node.prototype.cloneNode,r=window.Node.prototype.appendChild,t=window.Node.prototype.insertBefore,u=window.Node.prototype.removeChild,v=window.Node.prototype.replaceChild,w=Object.getOwnPropertyDescriptor(window.Node.prototype,"textContent"),y=window.Element.prototype.attachShadow,z=Object.getOwnPropertyDescriptor(window.Element.prototype,"innerHTML"),A=window.Element.prototype.getAttribute,B=window.Element.prototype.setAttribute,C=window.Element.prototype.removeAttribute,D=window.Element.prototype.getAttributeNS,E=window.Element.prototype.setAttributeNS,F=window.Element.prototype.removeAttributeNS,G=window.Element.prototype.insertAdjacentElement,H=window.Element.prototype.insertAdjacentHTML,fa=window.Element.prototype.prepend,ha=window.Element.prototype.append,ia=window.Element.prototype.before,ja=window.Element.prototype.after,ka=window.Element.prototype.replaceWith,la=window.Element.prototype.remove,ma=window.HTMLElement,I=Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,"innerHTML"),na=window.HTMLElement.prototype.insertAdjacentElement,oa=window.HTMLElement.prototype.insertAdjacentHTML,pa=new Set;function qa(a){var b=pa.has(a);return a=/^[a-z][.0-9_a-z]*-[-.0-9_a-z]*$/.test(a),!b&&a}"annotation-xml color-profile font-face font-face-src font-face-uri font-face-format font-face-name missing-glyph".split(" ").forEach((function(a){return pa.add(a)}));var ra=document.contains?document.contains.bind(document):document.documentElement.contains.bind(document.documentElement);function J(a){var b=a.isConnected;if(void 0!==b)return b;if(ra(a))return!0;for(;a&&!(a.__CE_isImportDocument||a instanceof Document);)a=a.parentNode||(window.ShadowRoot&&a instanceof ShadowRoot?a.host:void 0);return!(!a||!(a.__CE_isImportDocument||a instanceof Document))}function K(a){var b=a.children;if(b)return Array.prototype.slice.call(b);for(b=[],a=a.firstChild;a;a=a.nextSibling)a.nodeType===Node.ELEMENT_NODE&&b.push(a);return b}function L(a,b){for(;b&&b!==a&&!b.nextSibling;)b=b.parentNode;return b&&b!==a?b.nextSibling:null}function N(){var a=!(null==O||!O.noDocumentConstructionObserver),b=!(null==O||!O.shadyDomFastWalk);this.h=[],this.a=[],this.f=!1,this.shadyDomFastWalk=b,this.C=!a}function P(a,b,c,f){var d=window.ShadyDom;if(a.shadyDomFastWalk&&d&&d.inUse){if(b.nodeType===Node.ELEMENT_NODE&&c(b),b.querySelectorAll)for(a=d.nativeMethods.querySelectorAll.call(b,"*"),b=0;b<a.length;b++)c(a[b])}else!function M(a,b,c){for(var f=a;f;){if(f.nodeType===Node.ELEMENT_NODE){var d=f;b(d);var e=d.localName;if("link"===e&&"import"===d.getAttribute("rel")){if(f=d.import,void 0===c&&(c=new Set),f instanceof Node&&!c.has(f))for(c.add(f),f=f.firstChild;f;f=f.nextSibling)M(f,b,c);f=L(a,d);continue}if("template"===e){f=L(a,d);continue}if(d=d.__CE_shadowRoot)for(d=d.firstChild;d;d=d.nextSibling)M(d,b,c)}f=f.firstChild?f.firstChild:L(a,f)}}(b,c,f)}function Q(a,b){a.f&&P(a,b,(function(c){return R(a,c)}))}function R(a,b){if(a.f&&!b.__CE_patched){b.__CE_patched=!0;for(var c=0;c<a.h.length;c++)a.h[c](b);for(c=0;c<a.a.length;c++)a.a[c](b)}}function S(a,b){var c=[];for(P(a,b,(function(d){return c.push(d)})),b=0;b<c.length;b++){var f=c[b];1===f.__CE_state?a.connectedCallback(f):T(a,f)}}function U(a,b){var c=[];for(P(a,b,(function(d){return c.push(d)})),b=0;b<c.length;b++){var f=c[b];1===f.__CE_state&&a.disconnectedCallback(f)}}function V(a,b,c){var f=(c=void 0===c?{}:c).D,d=c.upgrade||function(g){return T(a,g)},e=[];for(P(a,b,(function(g){if(a.f&&R(a,g),"link"===g.localName&&"import"===g.getAttribute("rel")){var h=g.import;h instanceof Node&&(h.__CE_isImportDocument=!0,h.__CE_registry=document.__CE_registry),h&&"complete"===h.readyState?h.__CE_documentLoadHandled=!0:g.addEventListener("load",(function(){var k=g.import;if(!k.__CE_documentLoadHandled){k.__CE_documentLoadHandled=!0;var l=new Set;f&&(f.forEach((function(m){return l.add(m)})),l.delete(k)),V(a,k,{D:l,upgrade:d})}}))}else e.push(g)}),f),b=0;b<e.length;b++)d(e[b])}function T(a,b){try{var c=b.ownerDocument,f=c.__CE_registry,d=f&&(c.defaultView||c.__CE_isImportDocument)?W(f,b.localName):void 0;if(d&&void 0===b.__CE_state){d.constructionStack.push(b);try{try{if(new d.constructorFunction!==b)throw Error("The custom element constructor did not produce the element being upgraded.")}finally{d.constructionStack.pop()}}catch(k){throw b.__CE_state=2,k}if(b.__CE_state=1,b.__CE_definition=d,d.attributeChangedCallback&&b.hasAttributes()){var e=d.observedAttributes;for(d=0;d<e.length;d++){var g=e[d],h=b.getAttribute(g);null!==h&&a.attributeChangedCallback(b,g,null,h,null)}}J(b)&&a.connectedCallback(b)}}catch(k){X(k)}}function ua(a,b,c,f){var d=b.__CE_registry;if(d&&(null===f||"http://www.w3.org/1999/xhtml"===f)&&(d=W(d,c)))try{var e=new d.constructorFunction;if(void 0===e.__CE_state||void 0===e.__CE_definition)throw Error("Failed to construct '"+c+"': The returned value was not constructed with the HTMLElement constructor.");if("http://www.w3.org/1999/xhtml"!==e.namespaceURI)throw Error("Failed to construct '"+c+"': The constructed element's namespace must be the HTML namespace.");if(e.hasAttributes())throw Error("Failed to construct '"+c+"': The constructed element must not have any attributes.");if(null!==e.firstChild)throw Error("Failed to construct '"+c+"': The constructed element must not have any children.");if(null!==e.parentNode)throw Error("Failed to construct '"+c+"': The constructed element must not have a parent node.");if(e.ownerDocument!==b)throw Error("Failed to construct '"+c+"': The constructed element's owner document is incorrect.");if(e.localName!==c)throw Error("Failed to construct '"+c+"': The constructed element's local name is incorrect.");return e}catch(g){return X(g),b=null===f?n.call(b,c):p.call(b,f,c),Object.setPrototypeOf(b,HTMLUnknownElement.prototype),b.__CE_state=2,b.__CE_definition=void 0,R(a,b),b}return R(a,b=null===f?n.call(b,c):p.call(b,f,c)),b}function X(a){var b=a.message,c=a.sourceURL||a.fileName||"",f=a.line||a.lineNumber||0,d=a.column||a.columnNumber||0,e=void 0;void 0===ErrorEvent.prototype.initErrorEvent?e=new ErrorEvent("error",{cancelable:!0,message:b,filename:c,lineno:f,colno:d,error:a}):((e=document.createEvent("ErrorEvent")).initErrorEvent("error",!1,!0,b,c,f),e.preventDefault=function(){Object.defineProperty(this,"defaultPrevented",{configurable:!0,get:function(){return!0}})}),void 0===e.error&&Object.defineProperty(e,"error",{configurable:!0,enumerable:!0,get:function(){return a}}),window.dispatchEvent(e),e.defaultPrevented||console.error(a)}function va(){var a=this;this.a=void 0,this.w=new Promise((function(b){a.g=b}))}function wa(a){var b=document;this.g=void 0,this.b=a,this.a=b,V(this.b,this.a),"loading"===this.a.readyState&&(this.g=new MutationObserver(this.A.bind(this)),this.g.observe(this.a,{childList:!0,subtree:!0}))}function xa(a){a.g&&a.g.disconnect()}function Y(a){this.j=new Map,this.l=new Map,this.u=new Map,this.o=!1,this.s=new Map,this.i=function(b){return b()},this.c=!1,this.m=[],this.b=a,this.v=a.C?new wa(a):void 0}function ya(a,b){if(!qa(b))throw new SyntaxError("The element name '"+b+"' is not valid.");if(W(a,b))throw Error("A custom element with name '"+b+"' has already been defined.");if(a.o)throw Error("A custom element is already being defined.")}function Aa(a,b,c){var f;a.o=!0;try{var d=c.prototype;if(!(d instanceof Object))throw new TypeError("The custom element constructor's prototype is not an object.");var e=function(m){var x=d[m];if(void 0!==x&&!(x instanceof Function))throw Error("The '"+m+"' callback must be a function.");return x},g=e("connectedCallback"),h=e("disconnectedCallback"),k=e("adoptedCallback"),l=(f=e("attributeChangedCallback"))&&c.observedAttributes||[]}catch(m){throw m}finally{a.o=!1}return c={localName:b,constructorFunction:c,connectedCallback:g,disconnectedCallback:h,adoptedCallback:k,attributeChangedCallback:f,observedAttributes:l,constructionStack:[]},a.l.set(b,c),a.u.set(c.constructorFunction,c),c}function za(a){if(!1!==a.c){a.c=!1;for(var b=[],c=a.m,f=new Map,d=0;d<c.length;d++)f.set(c[d],[]);for(V(a.b,document,{upgrade:function(k){if(void 0===k.__CE_state){var l=k.localName,m=f.get(l);m?m.push(k):a.l.has(l)&&b.push(k)}}}),d=0;d<b.length;d++)T(a.b,b[d]);for(d=0;d<c.length;d++){for(var e=c[d],g=f.get(e),h=0;h<g.length;h++)T(a.b,g[h]);(e=a.s.get(e))&&e.resolve(void 0)}c.length=0}}function W(a,b){var c=a.l.get(b);if(c)return c;if(c=a.j.get(b)){a.j.delete(b);try{return Aa(a,b,c())}catch(f){X(f)}}}function Z(a,b,c){function f(d){return function(e){for(var g=[],h=0;h<arguments.length;++h)g[h]=arguments[h];h=[];for(var k=[],l=0;l<g.length;l++){var m=g[l];if(m instanceof Element&&J(m)&&k.push(m),m instanceof DocumentFragment)for(m=m.firstChild;m;m=m.nextSibling)h.push(m);else h.push(m)}for(d.apply(this,g),g=0;g<k.length;g++)U(a,k[g]);if(J(this))for(g=0;g<h.length;g++)(k=h[g])instanceof Element&&S(a,k)}}void 0!==c.prepend&&(b.prepend=f(c.prepend)),void 0!==c.append&&(b.append=f(c.append))}function Da(a){function b(d,e){Object.defineProperty(d,"innerHTML",{enumerable:e.enumerable,configurable:!0,get:e.get,set:function(g){var h=this,k=void 0;if(J(this)&&(k=[],P(a,this,(function(x){x!==h&&k.push(x)}))),e.set.call(this,g),k)for(var l=0;l<k.length;l++){var m=k[l];1===m.__CE_state&&a.disconnectedCallback(m)}return this.ownerDocument.__CE_registry?V(a,this):Q(a,this),g}})}function c(d,e){d.insertAdjacentElement=function(g,h){var k=J(h);return g=e.call(this,g,h),k&&U(a,h),J(g)&&S(a,h),g}}function f(d,e){function g(h,k){for(var l=[];h!==k;h=h.nextSibling)l.push(h);for(k=0;k<l.length;k++)V(a,l[k])}d.insertAdjacentHTML=function(h,k){if("beforebegin"===(h=h.toLowerCase())){var l=this.previousSibling;e.call(this,h,k),g(l||this.parentNode.firstChild,this)}else if("afterbegin"===h)l=this.firstChild,e.call(this,h,k),g(this.firstChild,l);else if("beforeend"===h)l=this.lastChild,e.call(this,h,k),g(l||this.firstChild,null);else{if("afterend"!==h)throw new SyntaxError("The value provided ("+String(h)+") is not one of 'beforebegin', 'afterbegin', 'beforeend', or 'afterend'.");l=this.nextSibling,e.call(this,h,k),g(this.nextSibling,l)}}}y&&(Element.prototype.attachShadow=function(d){if(d=y.call(this,d),a.f&&!d.__CE_patched){d.__CE_patched=!0;for(var e=0;e<a.h.length;e++)a.h[e](d)}return this.__CE_shadowRoot=d}),z&&z.get?b(Element.prototype,z):I&&I.get?b(HTMLElement.prototype,I):function(a,b){a.f=!0,a.a.push(b)}(a,(function(d){b(d,{enumerable:!0,configurable:!0,get:function(){return q.call(this,!0).innerHTML},set:function(e){var g="template"===this.localName,h=g?this.content:this,k=p.call(document,this.namespaceURI,this.localName);for(k.innerHTML=e;0<h.childNodes.length;)u.call(h,h.childNodes[0]);for(e=g?k.content:k;0<e.childNodes.length;)r.call(h,e.childNodes[0])}})})),Element.prototype.setAttribute=function(d,e){if(1!==this.__CE_state)return B.call(this,d,e);var g=A.call(this,d);B.call(this,d,e),e=A.call(this,d),a.attributeChangedCallback(this,d,g,e,null)},Element.prototype.setAttributeNS=function(d,e,g){if(1!==this.__CE_state)return E.call(this,d,e,g);var h=D.call(this,d,e);E.call(this,d,e,g),g=D.call(this,d,e),a.attributeChangedCallback(this,e,h,g,d)},Element.prototype.removeAttribute=function(d){if(1!==this.__CE_state)return C.call(this,d);var e=A.call(this,d);C.call(this,d),null!==e&&a.attributeChangedCallback(this,d,e,null,null)},Element.prototype.removeAttributeNS=function(d,e){if(1!==this.__CE_state)return F.call(this,d,e);var g=D.call(this,d,e);F.call(this,d,e);var h=D.call(this,d,e);g!==h&&a.attributeChangedCallback(this,e,g,h,d)},na?c(HTMLElement.prototype,na):G&&c(Element.prototype,G),oa?f(HTMLElement.prototype,oa):H&&f(Element.prototype,H),Z(a,Element.prototype,{prepend:fa,append:ha}),function(a){function b(f){return function(d){for(var e=[],g=0;g<arguments.length;++g)e[g]=arguments[g];g=[];for(var h=[],k=0;k<e.length;k++){var l=e[k];if(l instanceof Element&&J(l)&&h.push(l),l instanceof DocumentFragment)for(l=l.firstChild;l;l=l.nextSibling)g.push(l);else g.push(l)}for(f.apply(this,e),e=0;e<h.length;e++)U(a,h[e]);if(J(this))for(e=0;e<g.length;e++)(h=g[e])instanceof Element&&S(a,h)}}var c=Element.prototype;void 0!==ia&&(c.before=b(ia)),void 0!==ja&&(c.after=b(ja)),void 0!==ka&&(c.replaceWith=function(f){for(var d=[],e=0;e<arguments.length;++e)d[e]=arguments[e];e=[];for(var g=[],h=0;h<d.length;h++){var k=d[h];if(k instanceof Element&&J(k)&&g.push(k),k instanceof DocumentFragment)for(k=k.firstChild;k;k=k.nextSibling)e.push(k);else e.push(k)}for(h=J(this),ka.apply(this,d),d=0;d<g.length;d++)U(a,g[d]);if(h)for(U(a,this),d=0;d<e.length;d++)(g=e[d])instanceof Element&&S(a,g)}),void 0!==la&&(c.remove=function(){var f=J(this);la.call(this),f&&U(a,this)})}(a)}N.prototype.connectedCallback=function(a){var b=a.__CE_definition;if(b.connectedCallback)try{b.connectedCallback.call(a)}catch(c){X(c)}},N.prototype.disconnectedCallback=function(a){var b=a.__CE_definition;if(b.disconnectedCallback)try{b.disconnectedCallback.call(a)}catch(c){X(c)}},N.prototype.attributeChangedCallback=function(a,b,c,f,d){var e=a.__CE_definition;if(e.attributeChangedCallback&&-1<e.observedAttributes.indexOf(b))try{e.attributeChangedCallback.call(a,b,c,f,d)}catch(g){X(g)}},va.prototype.resolve=function(a){if(this.a)throw Error("Already resolved.");this.a=a,this.g(a)},wa.prototype.A=function(a){var b=this.a.readyState;for("interactive"!==b&&"complete"!==b||xa(this),b=0;b<a.length;b++)for(var c=a[b].addedNodes,f=0;f<c.length;f++)V(this.b,c[f])},Y.prototype.B=function(a,b){var c=this;if(!(b instanceof Function))throw new TypeError("Custom element constructor getters must be functions.");ya(this,a),this.j.set(a,b),this.m.push(a),this.c||(this.c=!0,this.i((function(){return za(c)})))},Y.prototype.define=function(a,b){var c=this;if(!(b instanceof Function))throw new TypeError("Custom element constructors must be functions.");ya(this,a),Aa(this,a,b),this.m.push(a),this.c||(this.c=!0,this.i((function(){return za(c)})))},Y.prototype.upgrade=function(a){V(this.b,a)},Y.prototype.get=function(a){if(a=W(this,a))return a.constructorFunction},Y.prototype.whenDefined=function(a){if(!qa(a))return Promise.reject(new SyntaxError("'"+a+"' is not a valid custom element name."));var b=this.s.get(a);if(b)return b.w;b=new va,this.s.set(a,b);var c=this.l.has(a)||this.j.has(a);return a=-1===this.m.indexOf(a),c&&a&&b.resolve(void 0),b.w},Y.prototype.polyfillWrapFlushCallback=function(a){this.v&&xa(this.v);var b=this.i;this.i=function(c){return a((function(){return b(c)}))}},window.CustomElementRegistry=Y,Y.prototype.define=Y.prototype.define,Y.prototype.upgrade=Y.prototype.upgrade,Y.prototype.get=Y.prototype.get,Y.prototype.whenDefined=Y.prototype.whenDefined,Y.prototype.polyfillDefineLazy=Y.prototype.B,Y.prototype.polyfillWrapFlushCallback=Y.prototype.polyfillWrapFlushCallback;var Ea={};var O=window.customElements;function Ha(){var a=new N;!function(a){function b(){var c=this.constructor,f=document.__CE_registry.u.get(c);if(!f)throw Error("Failed to construct a custom element: The constructor was not registered with `customElements`.");var d=f.constructionStack;if(0===d.length)return d=n.call(document,f.localName),Object.setPrototypeOf(d,c.prototype),d.__CE_state=1,d.__CE_definition=f,R(a,d),d;var e=d.length-1,g=d[e];if(g===Ea)throw Error("Failed to construct '"+f.localName+"': This element was already constructed.");return d[e]=Ea,Object.setPrototypeOf(g,c.prototype),R(a,g),g}b.prototype=ma.prototype,Object.defineProperty(HTMLElement.prototype,"constructor",{writable:!0,configurable:!0,enumerable:!1,value:b}),window.HTMLElement=b}(a),function(a){Document.prototype.createElement=function(b){return ua(a,this,b,null)},Document.prototype.importNode=function(b,c){return b=aa.call(this,b,!!c),this.__CE_registry?V(a,b):Q(a,b),b},Document.prototype.createElementNS=function(b,c){return ua(a,this,c,b)},Z(a,Document.prototype,{prepend:ba,append:ca})}(a),Z(a,DocumentFragment.prototype,{prepend:da,append:ea}),function(a){function b(c,f){Object.defineProperty(c,"textContent",{enumerable:f.enumerable,configurable:!0,get:f.get,set:function(d){if(this.nodeType===Node.TEXT_NODE)f.set.call(this,d);else{var e=void 0;if(this.firstChild){var g=this.childNodes,h=g.length;if(0<h&&J(this)){e=Array(h);for(var k=0;k<h;k++)e[k]=g[k]}}if(f.set.call(this,d),e)for(d=0;d<e.length;d++)U(a,e[d])}}})}Node.prototype.insertBefore=function(c,f){if(c instanceof DocumentFragment){var d=K(c);if(c=t.call(this,c,f),J(this))for(f=0;f<d.length;f++)S(a,d[f]);return c}return d=c instanceof Element&&J(c),f=t.call(this,c,f),d&&U(a,c),J(this)&&S(a,c),f},Node.prototype.appendChild=function(c){if(c instanceof DocumentFragment){var f=K(c);if(c=r.call(this,c),J(this))for(var d=0;d<f.length;d++)S(a,f[d]);return c}return f=c instanceof Element&&J(c),d=r.call(this,c),f&&U(a,c),J(this)&&S(a,c),d},Node.prototype.cloneNode=function(c){return c=q.call(this,!!c),this.ownerDocument.__CE_registry?V(a,c):Q(a,c),c},Node.prototype.removeChild=function(c){var f=c instanceof Element&&J(c),d=u.call(this,c);return f&&U(a,c),d},Node.prototype.replaceChild=function(c,f){if(c instanceof DocumentFragment){var d=K(c);if(c=v.call(this,c,f),J(this))for(U(a,f),f=0;f<d.length;f++)S(a,d[f]);return c}d=c instanceof Element&&J(c);var e=v.call(this,c,f),g=J(this);return g&&U(a,f),d&&U(a,c),g&&S(a,c),e},w&&w.get?b(Node.prototype,w):function(a,b){a.f=!0,a.h.push(b)}(a,(function(c){b(c,{enumerable:!0,configurable:!0,get:function(){for(var f=[],d=this.firstChild;d;d=d.nextSibling)d.nodeType!==Node.COMMENT_NODE&&f.push(d.textContent);return f.join("")},set:function(f){for(;this.firstChild;)u.call(this,this.firstChild);null!=f&&""!==f&&r.call(this,document.createTextNode(f))}})}))}(a),Da(a),a=new Y(a),document.__CE_registry=a,Object.defineProperty(window,"customElements",{configurable:!0,enumerable:!0,value:a})}O&&!O.forcePolyfill&&"function"==typeof O.define&&"function"==typeof O.get||Ha(),window.__CE_installPolyfill=Ha}).call(self)},function(module,exports,__webpack_require__){__webpack_require__(156),__webpack_require__(319),__webpack_require__(321),__webpack_require__(322),__webpack_require__(173),__webpack_require__(323),__webpack_require__(325),__webpack_require__(326),__webpack_require__(328),__webpack_require__(329),__webpack_require__(330),__webpack_require__(331),__webpack_require__(332),__webpack_require__(333),__webpack_require__(335),__webpack_require__(336),__webpack_require__(176),__webpack_require__(337),__webpack_require__(338),__webpack_require__(340),__webpack_require__(341),__webpack_require__(342),__webpack_require__(343),__webpack_require__(344),__webpack_require__(345),__webpack_require__(346),__webpack_require__(347),__webpack_require__(348),__webpack_require__(349),__webpack_require__(350);var path=__webpack_require__(53);module.exports=path.Array},function(module,exports,__webpack_require__){var toInteger=__webpack_require__(61),requireObjectCoercible=__webpack_require__(110),createMethod=function(CONVERT_TO_STRING){return function($this,pos){var first,second,S=String(requireObjectCoercible($this)),position=toInteger(pos),size=S.length;return position<0||position>=size?CONVERT_TO_STRING?"":void 0:(first=S.charCodeAt(position))<55296||first>56319||position+1===size||(second=S.charCodeAt(position+1))<56320||second>57343?CONVERT_TO_STRING?S.charAt(position):first:CONVERT_TO_STRING?S.slice(position,position+2):second-56320+(first-55296<<10)+65536}};module.exports={codeAt:createMethod(!1),charAt:createMethod(!0)}},function(module,exports,__webpack_require__){var global=__webpack_require__(12),inspectSource=__webpack_require__(111),WeakMap=global.WeakMap;module.exports="function"==typeof WeakMap&&/native code/.test(inspectSource(WeakMap))},function(module,exports,__webpack_require__){"use strict";var IteratorPrototype=__webpack_require__(163).IteratorPrototype,create=__webpack_require__(72),createPropertyDescriptor=__webpack_require__(62),setToStringTag=__webpack_require__(64),Iterators=__webpack_require__(74),returnThis=function(){return this};module.exports=function(IteratorConstructor,NAME,next){var TO_STRING_TAG=NAME+" Iterator";return IteratorConstructor.prototype=create(IteratorPrototype,{next:createPropertyDescriptor(1,next)}),setToStringTag(IteratorConstructor,TO_STRING_TAG,!1,!0),Iterators[TO_STRING_TAG]=returnThis,IteratorConstructor}},function(module,exports,__webpack_require__){var $=__webpack_require__(4),from=__webpack_require__(320);$({target:"Array",stat:!0,forced:!__webpack_require__(172)((function(iterable){Array.from(iterable)}))},{from:from})},function(module,exports,__webpack_require__){"use strict";var bind=__webpack_require__(75),toObject=__webpack_require__(14),callWithSafeIterationClosing=__webpack_require__(168),isArrayIteratorMethod=__webpack_require__(169),toLength=__webpack_require__(24),createProperty=__webpack_require__(54),getIteratorMethod=__webpack_require__(170);module.exports=function(arrayLike){var length,result,step,iterator,next,value,O=toObject(arrayLike),C="function"==typeof this?this:Array,argumentsLength=arguments.length,mapfn=argumentsLength>1?arguments[1]:void 0,mapping=void 0!==mapfn,iteratorMethod=getIteratorMethod(O),index=0;if(mapping&&(mapfn=bind(mapfn,argumentsLength>2?arguments[2]:void 0,2)),null==iteratorMethod||C==Array&&isArrayIteratorMethod(iteratorMethod))for(result=new C(length=toLength(O.length));length>index;index++)value=mapping?mapfn(O[index],index):O[index],createProperty(result,index,value);else for(next=(iterator=iteratorMethod.call(O)).next,result=new C;!(step=next.call(iterator)).done;index++)value=mapping?callWithSafeIterationClosing(iterator,mapfn,[step.value,index],!0):step.value,createProperty(result,index,value);return result.length=index,result}},function(module,exports,__webpack_require__){__webpack_require__(4)({target:"Array",stat:!0},{isArray:__webpack_require__(55)})},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(4),fails=__webpack_require__(7),createProperty=__webpack_require__(54);$({target:"Array",stat:!0,forced:fails((function(){function F(){}return!(Array.of.call(F)instanceof F)}))},{of:function(){for(var index=0,argumentsLength=arguments.length,result=new("function"==typeof this?this:Array)(argumentsLength);argumentsLength>index;)createProperty(result,index,arguments[index++]);return result.length=argumentsLength,result}})},function(module,exports,__webpack_require__){var $=__webpack_require__(4),copyWithin=__webpack_require__(324),addToUnscopables=__webpack_require__(42);$({target:"Array",proto:!0},{copyWithin:copyWithin}),addToUnscopables("copyWithin")},function(module,exports,__webpack_require__){"use strict";var toObject=__webpack_require__(14),toAbsoluteIndex=__webpack_require__(71),toLength=__webpack_require__(24),min=Math.min;module.exports=[].copyWithin||function(target,start){var O=toObject(this),len=toLength(O.length),to=toAbsoluteIndex(target,len),from=toAbsoluteIndex(start,len),end=arguments.length>2?arguments[2]:void 0,count=min((void 0===end?len:toAbsoluteIndex(end,len))-from,len-to),inc=1;for(from<to&&to<from+count&&(inc=-1,from+=count-1,to+=count-1);count-- >0;)from in O?O[to]=O[from]:delete O[to],to+=inc,from+=inc;return O}},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(4),$every=__webpack_require__(43).every,arrayMethodIsStrict=__webpack_require__(35),arrayMethodUsesToLength=__webpack_require__(25),STRICT_METHOD=arrayMethodIsStrict("every"),USES_TO_LENGTH=arrayMethodUsesToLength("every");$({target:"Array",proto:!0,forced:!STRICT_METHOD||!USES_TO_LENGTH},{every:function(callbackfn){return $every(this,callbackfn,arguments.length>1?arguments[1]:void 0)}})},function(module,exports,__webpack_require__){var $=__webpack_require__(4),fill=__webpack_require__(327),addToUnscopables=__webpack_require__(42);$({target:"Array",proto:!0},{fill:fill}),addToUnscopables("fill")},function(module,exports,__webpack_require__){"use strict";var toObject=__webpack_require__(14),toAbsoluteIndex=__webpack_require__(71),toLength=__webpack_require__(24);module.exports=function(value){for(var O=toObject(this),length=toLength(O.length),argumentsLength=arguments.length,index=toAbsoluteIndex(argumentsLength>1?arguments[1]:void 0,length),end=argumentsLength>2?arguments[2]:void 0,endPos=void 0===end?length:toAbsoluteIndex(end,length);endPos>index;)O[index++]=value;return O}},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(4),$filter=__webpack_require__(43).filter,arrayMethodHasSpeciesSupport=__webpack_require__(77),arrayMethodUsesToLength=__webpack_require__(25),HAS_SPECIES_SUPPORT=arrayMethodHasSpeciesSupport("filter"),USES_TO_LENGTH=arrayMethodUsesToLength("filter");$({target:"Array",proto:!0,forced:!HAS_SPECIES_SUPPORT||!USES_TO_LENGTH},{filter:function(callbackfn){return $filter(this,callbackfn,arguments.length>1?arguments[1]:void 0)}})},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(4),$find=__webpack_require__(43).find,addToUnscopables=__webpack_require__(42),arrayMethodUsesToLength=__webpack_require__(25),SKIPS_HOLES=!0,USES_TO_LENGTH=arrayMethodUsesToLength("find");"find"in[]&&Array(1).find((function(){SKIPS_HOLES=!1})),$({target:"Array",proto:!0,forced:SKIPS_HOLES||!USES_TO_LENGTH},{find:function(callbackfn){return $find(this,callbackfn,arguments.length>1?arguments[1]:void 0)}}),addToUnscopables("find")},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(4),$findIndex=__webpack_require__(43).findIndex,addToUnscopables=__webpack_require__(42),arrayMethodUsesToLength=__webpack_require__(25),SKIPS_HOLES=!0,USES_TO_LENGTH=arrayMethodUsesToLength("findIndex");"findIndex"in[]&&Array(1).findIndex((function(){SKIPS_HOLES=!1})),$({target:"Array",proto:!0,forced:SKIPS_HOLES||!USES_TO_LENGTH},{findIndex:function(callbackfn){return $findIndex(this,callbackfn,arguments.length>1?arguments[1]:void 0)}}),addToUnscopables("findIndex")},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(4),flattenIntoArray=__webpack_require__(175),toObject=__webpack_require__(14),toLength=__webpack_require__(24),toInteger=__webpack_require__(61),arraySpeciesCreate=__webpack_require__(76);$({target:"Array",proto:!0},{flat:function(){var depthArg=arguments.length?arguments[0]:void 0,O=toObject(this),sourceLen=toLength(O.length),A=arraySpeciesCreate(O,0);return A.length=flattenIntoArray(A,O,O,sourceLen,0,void 0===depthArg?1:toInteger(depthArg)),A}})},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(4),flattenIntoArray=__webpack_require__(175),toObject=__webpack_require__(14),toLength=__webpack_require__(24),aFunction=__webpack_require__(28),arraySpeciesCreate=__webpack_require__(76);$({target:"Array",proto:!0},{flatMap:function(callbackfn){var A,O=toObject(this),sourceLen=toLength(O.length);return aFunction(callbackfn),(A=arraySpeciesCreate(O,0)).length=flattenIntoArray(A,O,O,sourceLen,0,1,callbackfn,arguments.length>1?arguments[1]:void 0),A}})},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(4),forEach=__webpack_require__(334);$({target:"Array",proto:!0,forced:[].forEach!=forEach},{forEach:forEach})},function(module,exports,__webpack_require__){"use strict";var $forEach=__webpack_require__(43).forEach,arrayMethodIsStrict=__webpack_require__(35),arrayMethodUsesToLength=__webpack_require__(25),STRICT_METHOD=arrayMethodIsStrict("forEach"),USES_TO_LENGTH=arrayMethodUsesToLength("forEach");module.exports=STRICT_METHOD&&USES_TO_LENGTH?[].forEach:function(callbackfn){return $forEach(this,callbackfn,arguments.length>1?arguments[1]:void 0)}},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(4),$includes=__webpack_require__(117).includes,addToUnscopables=__webpack_require__(42);$({target:"Array",proto:!0,forced:!__webpack_require__(25)("indexOf",{ACCESSORS:!0,1:0})},{includes:function(el){return $includes(this,el,arguments.length>1?arguments[1]:void 0)}}),addToUnscopables("includes")},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(4),$indexOf=__webpack_require__(117).indexOf,arrayMethodIsStrict=__webpack_require__(35),arrayMethodUsesToLength=__webpack_require__(25),nativeIndexOf=[].indexOf,NEGATIVE_ZERO=!!nativeIndexOf&&1/[1].indexOf(1,-0)<0,STRICT_METHOD=arrayMethodIsStrict("indexOf"),USES_TO_LENGTH=arrayMethodUsesToLength("indexOf",{ACCESSORS:!0,1:0});$({target:"Array",proto:!0,forced:NEGATIVE_ZERO||!STRICT_METHOD||!USES_TO_LENGTH},{indexOf:function(searchElement){return NEGATIVE_ZERO?nativeIndexOf.apply(this,arguments)||0:$indexOf(this,searchElement,arguments.length>1?arguments[1]:void 0)}})},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(4),IndexedObject=__webpack_require__(70),toIndexedObject=__webpack_require__(32),arrayMethodIsStrict=__webpack_require__(35),nativeJoin=[].join,ES3_STRINGS=IndexedObject!=Object,STRICT_METHOD=arrayMethodIsStrict("join",",");$({target:"Array",proto:!0,forced:ES3_STRINGS||!STRICT_METHOD},{join:function(separator){return nativeJoin.call(toIndexedObject(this),void 0===separator?",":separator)}})},function(module,exports,__webpack_require__){var $=__webpack_require__(4),lastIndexOf=__webpack_require__(339);$({target:"Array",proto:!0,forced:lastIndexOf!==[].lastIndexOf},{lastIndexOf:lastIndexOf})},function(module,exports,__webpack_require__){"use strict";var toIndexedObject=__webpack_require__(32),toInteger=__webpack_require__(61),toLength=__webpack_require__(24),arrayMethodIsStrict=__webpack_require__(35),arrayMethodUsesToLength=__webpack_require__(25),min=Math.min,nativeLastIndexOf=[].lastIndexOf,NEGATIVE_ZERO=!!nativeLastIndexOf&&1/[1].lastIndexOf(1,-0)<0,STRICT_METHOD=arrayMethodIsStrict("lastIndexOf"),USES_TO_LENGTH=arrayMethodUsesToLength("indexOf",{ACCESSORS:!0,1:0}),FORCED=NEGATIVE_ZERO||!STRICT_METHOD||!USES_TO_LENGTH;module.exports=FORCED?function(searchElement){if(NEGATIVE_ZERO)return nativeLastIndexOf.apply(this,arguments)||0;var O=toIndexedObject(this),length=toLength(O.length),index=length-1;for(arguments.length>1&&(index=min(index,toInteger(arguments[1]))),index<0&&(index=length+index);index>=0;index--)if(index in O&&O[index]===searchElement)return index||0;return-1}:nativeLastIndexOf},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(4),$map=__webpack_require__(43).map,arrayMethodHasSpeciesSupport=__webpack_require__(77),arrayMethodUsesToLength=__webpack_require__(25),HAS_SPECIES_SUPPORT=arrayMethodHasSpeciesSupport("map"),USES_TO_LENGTH=arrayMethodUsesToLength("map");$({target:"Array",proto:!0,forced:!HAS_SPECIES_SUPPORT||!USES_TO_LENGTH},{map:function(callbackfn){return $map(this,callbackfn,arguments.length>1?arguments[1]:void 0)}})},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(4),$reduce=__webpack_require__(177).left,arrayMethodIsStrict=__webpack_require__(35),arrayMethodUsesToLength=__webpack_require__(25),STRICT_METHOD=arrayMethodIsStrict("reduce"),USES_TO_LENGTH=arrayMethodUsesToLength("reduce",{1:0});$({target:"Array",proto:!0,forced:!STRICT_METHOD||!USES_TO_LENGTH},{reduce:function(callbackfn){return $reduce(this,callbackfn,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(4),$reduceRight=__webpack_require__(177).right,arrayMethodIsStrict=__webpack_require__(35),arrayMethodUsesToLength=__webpack_require__(25),STRICT_METHOD=arrayMethodIsStrict("reduceRight"),USES_TO_LENGTH=arrayMethodUsesToLength("reduce",{1:0});$({target:"Array",proto:!0,forced:!STRICT_METHOD||!USES_TO_LENGTH},{reduceRight:function(callbackfn){return $reduceRight(this,callbackfn,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(4),isArray=__webpack_require__(55),nativeReverse=[].reverse,test=[1,2];$({target:"Array",proto:!0,forced:String(test)===String(test.reverse())},{reverse:function(){return isArray(this)&&(this.length=this.length),nativeReverse.call(this)}})},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(4),isObject=__webpack_require__(9),isArray=__webpack_require__(55),toAbsoluteIndex=__webpack_require__(71),toLength=__webpack_require__(24),toIndexedObject=__webpack_require__(32),createProperty=__webpack_require__(54),wellKnownSymbol=__webpack_require__(15),arrayMethodHasSpeciesSupport=__webpack_require__(77),arrayMethodUsesToLength=__webpack_require__(25),HAS_SPECIES_SUPPORT=arrayMethodHasSpeciesSupport("slice"),USES_TO_LENGTH=arrayMethodUsesToLength("slice",{ACCESSORS:!0,0:0,1:2}),SPECIES=wellKnownSymbol("species"),nativeSlice=[].slice,max=Math.max;$({target:"Array",proto:!0,forced:!HAS_SPECIES_SUPPORT||!USES_TO_LENGTH},{slice:function(start,end){var Constructor,result,n,O=toIndexedObject(this),length=toLength(O.length),k=toAbsoluteIndex(start,length),fin=toAbsoluteIndex(void 0===end?length:end,length);if(isArray(O)&&("function"!=typeof(Constructor=O.constructor)||Constructor!==Array&&!isArray(Constructor.prototype)?isObject(Constructor)&&null===(Constructor=Constructor[SPECIES])&&(Constructor=void 0):Constructor=void 0,Constructor===Array||void 0===Constructor))return nativeSlice.call(O,k,fin);for(result=new(void 0===Constructor?Array:Constructor)(max(fin-k,0)),n=0;k<fin;k++,n++)k in O&&createProperty(result,n,O[k]);return result.length=n,result}})},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(4),$some=__webpack_require__(43).some,arrayMethodIsStrict=__webpack_require__(35),arrayMethodUsesToLength=__webpack_require__(25),STRICT_METHOD=arrayMethodIsStrict("some"),USES_TO_LENGTH=arrayMethodUsesToLength("some");$({target:"Array",proto:!0,forced:!STRICT_METHOD||!USES_TO_LENGTH},{some:function(callbackfn){return $some(this,callbackfn,arguments.length>1?arguments[1]:void 0)}})},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(4),aFunction=__webpack_require__(28),toObject=__webpack_require__(14),fails=__webpack_require__(7),arrayMethodIsStrict=__webpack_require__(35),test=[],nativeSort=test.sort,FAILS_ON_UNDEFINED=fails((function(){test.sort(void 0)})),FAILS_ON_NULL=fails((function(){test.sort(null)})),STRICT_METHOD=arrayMethodIsStrict("sort");$({target:"Array",proto:!0,forced:FAILS_ON_UNDEFINED||!FAILS_ON_NULL||!STRICT_METHOD},{sort:function(comparefn){return void 0===comparefn?nativeSort.call(toObject(this)):nativeSort.call(toObject(this),aFunction(comparefn))}})},function(module,exports,__webpack_require__){__webpack_require__(178)("Array")},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(4),toAbsoluteIndex=__webpack_require__(71),toInteger=__webpack_require__(61),toLength=__webpack_require__(24),toObject=__webpack_require__(14),arraySpeciesCreate=__webpack_require__(76),createProperty=__webpack_require__(54),arrayMethodHasSpeciesSupport=__webpack_require__(77),arrayMethodUsesToLength=__webpack_require__(25),HAS_SPECIES_SUPPORT=arrayMethodHasSpeciesSupport("splice"),USES_TO_LENGTH=arrayMethodUsesToLength("splice",{ACCESSORS:!0,0:0,1:2}),max=Math.max,min=Math.min;$({target:"Array",proto:!0,forced:!HAS_SPECIES_SUPPORT||!USES_TO_LENGTH},{splice:function(start,deleteCount){var insertCount,actualDeleteCount,A,k,from,to,O=toObject(this),len=toLength(O.length),actualStart=toAbsoluteIndex(start,len),argumentsLength=arguments.length;if(0===argumentsLength?insertCount=actualDeleteCount=0:1===argumentsLength?(insertCount=0,actualDeleteCount=len-actualStart):(insertCount=argumentsLength-2,actualDeleteCount=min(max(toInteger(deleteCount),0),len-actualStart)),len+insertCount-actualDeleteCount>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(A=arraySpeciesCreate(O,actualDeleteCount),k=0;k<actualDeleteCount;k++)(from=actualStart+k)in O&&createProperty(A,k,O[from]);if(A.length=actualDeleteCount,insertCount<actualDeleteCount){for(k=actualStart;k<len-actualDeleteCount;k++)to=k+insertCount,(from=k+actualDeleteCount)in O?O[to]=O[from]:delete O[to];for(k=len;k>len-actualDeleteCount+insertCount;k--)delete O[k-1]}else if(insertCount>actualDeleteCount)for(k=len-actualDeleteCount;k>actualStart;k--)to=k+insertCount-1,(from=k+actualDeleteCount-1)in O?O[to]=O[from]:delete O[to];for(k=0;k<insertCount;k++)O[k+actualStart]=arguments[k+2];return O.length=len-actualDeleteCount+insertCount,A}})},function(module,exports,__webpack_require__){__webpack_require__(42)("flat")},function(module,exports,__webpack_require__){__webpack_require__(42)("flatMap")},function(module,exports,__webpack_require__){__webpack_require__(179),__webpack_require__(352),__webpack_require__(354),__webpack_require__(355),__webpack_require__(356),__webpack_require__(357),__webpack_require__(358),__webpack_require__(359),__webpack_require__(360),__webpack_require__(361),__webpack_require__(362),__webpack_require__(363),__webpack_require__(364),__webpack_require__(366),__webpack_require__(367),__webpack_require__(368),__webpack_require__(369),__webpack_require__(370),__webpack_require__(371),__webpack_require__(372),__webpack_require__(373),__webpack_require__(127),__webpack_require__(375),__webpack_require__(376),__webpack_require__(377),__webpack_require__(378),__webpack_require__(183),__webpack_require__(184);var path=__webpack_require__(53);module.exports=path.Object},function(module,exports,__webpack_require__){var $=__webpack_require__(4),assign=__webpack_require__(353);$({target:"Object",stat:!0,forced:Object.assign!==assign},{assign:assign})},function(module,exports,__webpack_require__){"use strict";var DESCRIPTORS=__webpack_require__(10),fails=__webpack_require__(7),objectKeys=__webpack_require__(73),getOwnPropertySymbolsModule=__webpack_require__(119),propertyIsEnumerableModule=__webpack_require__(91),toObject=__webpack_require__(14),IndexedObject=__webpack_require__(70),nativeAssign=Object.assign,defineProperty=Object.defineProperty;module.exports=!nativeAssign||fails((function(){if(DESCRIPTORS&&1!==nativeAssign({b:1},nativeAssign(defineProperty({},"a",{enumerable:!0,get:function(){defineProperty(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var A={},B={},symbol=Symbol();return A[symbol]=7,"abcdefghijklmnopqrst".split("").forEach((function(chr){B[chr]=chr})),7!=nativeAssign({},A)[symbol]||"abcdefghijklmnopqrst"!=objectKeys(nativeAssign({},B)).join("")}))?function(target,source){for(var T=toObject(target),argumentsLength=arguments.length,index=1,getOwnPropertySymbols=getOwnPropertySymbolsModule.f,propertyIsEnumerable=propertyIsEnumerableModule.f;argumentsLength>index;)for(var key,S=IndexedObject(arguments[index++]),keys=getOwnPropertySymbols?objectKeys(S).concat(getOwnPropertySymbols(S)):objectKeys(S),length=keys.length,j=0;length>j;)key=keys[j++],DESCRIPTORS&&!propertyIsEnumerable.call(S,key)||(T[key]=S[key]);return T}:nativeAssign},function(module,exports,__webpack_require__){__webpack_require__(4)({target:"Object",stat:!0,sham:!__webpack_require__(10)},{create:__webpack_require__(72)})},function(module,exports,__webpack_require__){var $=__webpack_require__(4),DESCRIPTORS=__webpack_require__(10);$({target:"Object",stat:!0,forced:!DESCRIPTORS,sham:!DESCRIPTORS},{defineProperty:__webpack_require__(21).f})},function(module,exports,__webpack_require__){var $=__webpack_require__(4),DESCRIPTORS=__webpack_require__(10);$({target:"Object",stat:!0,forced:!DESCRIPTORS,sham:!DESCRIPTORS},{defineProperties:__webpack_require__(165)})},function(module,exports,__webpack_require__){var $=__webpack_require__(4),$entries=__webpack_require__(182).entries;$({target:"Object",stat:!0},{entries:function(O){return $entries(O)}})},function(module,exports,__webpack_require__){var $=__webpack_require__(4),FREEZING=__webpack_require__(78),fails=__webpack_require__(7),isObject=__webpack_require__(9),onFreeze=__webpack_require__(125).onFreeze,nativeFreeze=Object.freeze;$({target:"Object",stat:!0,forced:fails((function(){nativeFreeze(1)})),sham:!FREEZING},{freeze:function(it){return nativeFreeze&&isObject(it)?nativeFreeze(onFreeze(it)):it}})},function(module,exports,__webpack_require__){var $=__webpack_require__(4),iterate=__webpack_require__(126),createProperty=__webpack_require__(54);$({target:"Object",stat:!0},{fromEntries:function(iterable){var obj={};return iterate(iterable,(function(k,v){createProperty(obj,k,v)}),void 0,!0),obj}})},function(module,exports,__webpack_require__){var $=__webpack_require__(4),fails=__webpack_require__(7),toIndexedObject=__webpack_require__(32),nativeGetOwnPropertyDescriptor=__webpack_require__(31).f,DESCRIPTORS=__webpack_require__(10),FAILS_ON_PRIMITIVES=fails((function(){nativeGetOwnPropertyDescriptor(1)}));$({target:"Object",stat:!0,forced:!DESCRIPTORS||FAILS_ON_PRIMITIVES,sham:!DESCRIPTORS},{getOwnPropertyDescriptor:function(it,key){return nativeGetOwnPropertyDescriptor(toIndexedObject(it),key)}})},function(module,exports,__webpack_require__){var $=__webpack_require__(4),DESCRIPTORS=__webpack_require__(10),ownKeys=__webpack_require__(115),toIndexedObject=__webpack_require__(32),getOwnPropertyDescriptorModule=__webpack_require__(31),createProperty=__webpack_require__(54);$({target:"Object",stat:!0,sham:!DESCRIPTORS},{getOwnPropertyDescriptors:function(object){for(var key,descriptor,O=toIndexedObject(object),getOwnPropertyDescriptor=getOwnPropertyDescriptorModule.f,keys=ownKeys(O),result={},index=0;keys.length>index;)void 0!==(descriptor=getOwnPropertyDescriptor(O,key=keys[index++]))&&createProperty(result,key,descriptor);return result}})},function(module,exports,__webpack_require__){var $=__webpack_require__(4),fails=__webpack_require__(7),nativeGetOwnPropertyNames=__webpack_require__(180).f;$({target:"Object",stat:!0,forced:fails((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:nativeGetOwnPropertyNames})},function(module,exports,__webpack_require__){var $=__webpack_require__(4),fails=__webpack_require__(7),toObject=__webpack_require__(14),nativeGetPrototypeOf=__webpack_require__(41),CORRECT_PROTOTYPE_GETTER=__webpack_require__(120);$({target:"Object",stat:!0,forced:fails((function(){nativeGetPrototypeOf(1)})),sham:!CORRECT_PROTOTYPE_GETTER},{getPrototypeOf:function(it){return nativeGetPrototypeOf(toObject(it))}})},function(module,exports,__webpack_require__){__webpack_require__(4)({target:"Object",stat:!0},{is:__webpack_require__(365)})},function(module,exports){module.exports=Object.is||function(x,y){return x===y?0!==x||1/x==1/y:x!=x&&y!=y}},function(module,exports,__webpack_require__){var $=__webpack_require__(4),fails=__webpack_require__(7),isObject=__webpack_require__(9),nativeIsExtensible=Object.isExtensible;$({target:"Object",stat:!0,forced:fails((function(){nativeIsExtensible(1)}))},{isExtensible:function(it){return!!isObject(it)&&(!nativeIsExtensible||nativeIsExtensible(it))}})},function(module,exports,__webpack_require__){var $=__webpack_require__(4),fails=__webpack_require__(7),isObject=__webpack_require__(9),nativeIsFrozen=Object.isFrozen;$({target:"Object",stat:!0,forced:fails((function(){nativeIsFrozen(1)}))},{isFrozen:function(it){return!isObject(it)||!!nativeIsFrozen&&nativeIsFrozen(it)}})},function(module,exports,__webpack_require__){var $=__webpack_require__(4),fails=__webpack_require__(7),isObject=__webpack_require__(9),nativeIsSealed=Object.isSealed;$({target:"Object",stat:!0,forced:fails((function(){nativeIsSealed(1)}))},{isSealed:function(it){return!isObject(it)||!!nativeIsSealed&&nativeIsSealed(it)}})},function(module,exports,__webpack_require__){var $=__webpack_require__(4),toObject=__webpack_require__(14),nativeKeys=__webpack_require__(73);$({target:"Object",stat:!0,forced:__webpack_require__(7)((function(){nativeKeys(1)}))},{keys:function(it){return nativeKeys(toObject(it))}})},function(module,exports,__webpack_require__){var $=__webpack_require__(4),isObject=__webpack_require__(9),onFreeze=__webpack_require__(125).onFreeze,FREEZING=__webpack_require__(78),fails=__webpack_require__(7),nativePreventExtensions=Object.preventExtensions;$({target:"Object",stat:!0,forced:fails((function(){nativePreventExtensions(1)})),sham:!FREEZING},{preventExtensions:function(it){return nativePreventExtensions&&isObject(it)?nativePreventExtensions(onFreeze(it)):it}})},function(module,exports,__webpack_require__){var $=__webpack_require__(4),isObject=__webpack_require__(9),onFreeze=__webpack_require__(125).onFreeze,FREEZING=__webpack_require__(78),fails=__webpack_require__(7),nativeSeal=Object.seal;$({target:"Object",stat:!0,forced:fails((function(){nativeSeal(1)})),sham:!FREEZING},{seal:function(it){return nativeSeal&&isObject(it)?nativeSeal(onFreeze(it)):it}})},function(module,exports,__webpack_require__){__webpack_require__(4)({target:"Object",stat:!0},{setPrototypeOf:__webpack_require__(122)})},function(module,exports,__webpack_require__){var $=__webpack_require__(4),$values=__webpack_require__(182).values;$({target:"Object",stat:!0},{values:function(O){return $values(O)}})},function(module,exports,__webpack_require__){"use strict";var TO_STRING_TAG_SUPPORT=__webpack_require__(123),classof=__webpack_require__(171);module.exports=TO_STRING_TAG_SUPPORT?{}.toString:function(){return"[object "+classof(this)+"]"}},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(4),DESCRIPTORS=__webpack_require__(10),FORCED=__webpack_require__(92),toObject=__webpack_require__(14),aFunction=__webpack_require__(28),definePropertyModule=__webpack_require__(21);DESCRIPTORS&&$({target:"Object",proto:!0,forced:FORCED},{__defineGetter__:function(P,getter){definePropertyModule.f(toObject(this),P,{get:aFunction(getter),enumerable:!0,configurable:!0})}})},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(4),DESCRIPTORS=__webpack_require__(10),FORCED=__webpack_require__(92),toObject=__webpack_require__(14),aFunction=__webpack_require__(28),definePropertyModule=__webpack_require__(21);DESCRIPTORS&&$({target:"Object",proto:!0,forced:FORCED},{__defineSetter__:function(P,setter){definePropertyModule.f(toObject(this),P,{set:aFunction(setter),enumerable:!0,configurable:!0})}})},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(4),DESCRIPTORS=__webpack_require__(10),FORCED=__webpack_require__(92),toObject=__webpack_require__(14),toPrimitive=__webpack_require__(50),getPrototypeOf=__webpack_require__(41),getOwnPropertyDescriptor=__webpack_require__(31).f;DESCRIPTORS&&$({target:"Object",proto:!0,forced:FORCED},{__lookupGetter__:function(P){var desc,O=toObject(this),key=toPrimitive(P,!0);do{if(desc=getOwnPropertyDescriptor(O,key))return desc.get}while(O=getPrototypeOf(O))}})},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(4),DESCRIPTORS=__webpack_require__(10),FORCED=__webpack_require__(92),toObject=__webpack_require__(14),toPrimitive=__webpack_require__(50),getPrototypeOf=__webpack_require__(41),getOwnPropertyDescriptor=__webpack_require__(31).f;DESCRIPTORS&&$({target:"Object",proto:!0,forced:FORCED},{__lookupSetter__:function(P){var desc,O=toObject(this),key=toPrimitive(P,!0);do{if(desc=getOwnPropertyDescriptor(O,key))return desc.set}while(O=getPrototypeOf(O))}})},function(module,exports,__webpack_require__){__webpack_require__(127),__webpack_require__(156),__webpack_require__(380),__webpack_require__(382),__webpack_require__(387),__webpack_require__(388);var path=__webpack_require__(53);module.exports=path.Promise},function(module,exports,__webpack_require__){var global=__webpack_require__(12),DOMIterables=__webpack_require__(381),ArrayIteratorMethods=__webpack_require__(176),createNonEnumerableProperty=__webpack_require__(40),wellKnownSymbol=__webpack_require__(15),ITERATOR=wellKnownSymbol("iterator"),TO_STRING_TAG=wellKnownSymbol("toStringTag"),ArrayValues=ArrayIteratorMethods.values;for(var COLLECTION_NAME in DOMIterables){var Collection=global[COLLECTION_NAME],CollectionPrototype=Collection&&Collection.prototype;if(CollectionPrototype){if(CollectionPrototype[ITERATOR]!==ArrayValues)try{createNonEnumerableProperty(CollectionPrototype,ITERATOR,ArrayValues)}catch(error){CollectionPrototype[ITERATOR]=ArrayValues}if(CollectionPrototype[TO_STRING_TAG]||createNonEnumerableProperty(CollectionPrototype,TO_STRING_TAG,COLLECTION_NAME),DOMIterables[COLLECTION_NAME])for(var METHOD_NAME in ArrayIteratorMethods)if(CollectionPrototype[METHOD_NAME]!==ArrayIteratorMethods[METHOD_NAME])try{createNonEnumerableProperty(CollectionPrototype,METHOD_NAME,ArrayIteratorMethods[METHOD_NAME])}catch(error){CollectionPrototype[METHOD_NAME]=ArrayIteratorMethods[METHOD_NAME]}}}},function(module,exports){module.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(module,exports,__webpack_require__){"use strict";var Internal,OwnPromiseCapability,PromiseWrapper,nativeThen,$=__webpack_require__(4),IS_PURE=__webpack_require__(51),global=__webpack_require__(12),getBuiltIn=__webpack_require__(34),NativePromise=__webpack_require__(185),redefine=__webpack_require__(52),redefineAll=__webpack_require__(383),setToStringTag=__webpack_require__(64),setSpecies=__webpack_require__(178),isObject=__webpack_require__(9),aFunction=__webpack_require__(28),anInstance=__webpack_require__(384),classof=__webpack_require__(63),inspectSource=__webpack_require__(111),iterate=__webpack_require__(126),checkCorrectnessOfIteration=__webpack_require__(172),speciesConstructor=__webpack_require__(186),task=__webpack_require__(187).set,microtask=__webpack_require__(385),promiseResolve=__webpack_require__(189),hostReportErrors=__webpack_require__(386),newPromiseCapabilityModule=__webpack_require__(128),perform=__webpack_require__(190),InternalStateModule=__webpack_require__(68),isForced=__webpack_require__(162),wellKnownSymbol=__webpack_require__(15),V8_VERSION=__webpack_require__(124),SPECIES=wellKnownSymbol("species"),PROMISE="Promise",getInternalState=InternalStateModule.get,setInternalState=InternalStateModule.set,getInternalPromiseState=InternalStateModule.getterFor(PROMISE),PromiseConstructor=NativePromise,TypeError=global.TypeError,document=global.document,process=global.process,$fetch=getBuiltIn("fetch"),newPromiseCapability=newPromiseCapabilityModule.f,newGenericPromiseCapability=newPromiseCapability,IS_NODE="process"==classof(process),DISPATCH_EVENT=!!(document&&document.createEvent&&global.dispatchEvent),FORCED=isForced(PROMISE,(function(){if(!(inspectSource(PromiseConstructor)!==String(PromiseConstructor))){if(66===V8_VERSION)return!0;if(!IS_NODE&&"function"!=typeof PromiseRejectionEvent)return!0}if(IS_PURE&&!PromiseConstructor.prototype.finally)return!0;if(V8_VERSION>=51&&/native code/.test(PromiseConstructor))return!1;var promise=PromiseConstructor.resolve(1),FakePromise=function(exec){exec((function(){}),(function(){}))};return(promise.constructor={})[SPECIES]=FakePromise,!(promise.then((function(){}))instanceof FakePromise)})),INCORRECT_ITERATION=FORCED||!checkCorrectnessOfIteration((function(iterable){PromiseConstructor.all(iterable).catch((function(){}))})),isThenable=function(it){var then;return!(!isObject(it)||"function"!=typeof(then=it.then))&&then},notify=function(promise,state,isReject){if(!state.notified){state.notified=!0;var chain=state.reactions;microtask((function(){for(var value=state.value,ok=1==state.state,index=0;chain.length>index;){var result,then,exited,reaction=chain[index++],handler=ok?reaction.ok:reaction.fail,resolve=reaction.resolve,reject=reaction.reject,domain=reaction.domain;try{handler?(ok||(2===state.rejection&&onHandleUnhandled(promise,state),state.rejection=1),!0===handler?result=value:(domain&&domain.enter(),result=handler(value),domain&&(domain.exit(),exited=!0)),result===reaction.promise?reject(TypeError("Promise-chain cycle")):(then=isThenable(result))?then.call(result,resolve,reject):resolve(result)):reject(value)}catch(error){domain&&!exited&&domain.exit(),reject(error)}}state.reactions=[],state.notified=!1,isReject&&!state.rejection&&onUnhandled(promise,state)}))}},dispatchEvent=function(name,promise,reason){var event,handler;DISPATCH_EVENT?((event=document.createEvent("Event")).promise=promise,event.reason=reason,event.initEvent(name,!1,!0),global.dispatchEvent(event)):event={promise:promise,reason:reason},(handler=global["on"+name])?handler(event):"unhandledrejection"===name&&hostReportErrors("Unhandled promise rejection",reason)},onUnhandled=function(promise,state){task.call(global,(function(){var result,value=state.value;if(isUnhandled(state)&&(result=perform((function(){IS_NODE?process.emit("unhandledRejection",value,promise):dispatchEvent("unhandledrejection",promise,value)})),state.rejection=IS_NODE||isUnhandled(state)?2:1,result.error))throw result.value}))},isUnhandled=function(state){return 1!==state.rejection&&!state.parent},onHandleUnhandled=function(promise,state){task.call(global,(function(){IS_NODE?process.emit("rejectionHandled",promise):dispatchEvent("rejectionhandled",promise,state.value)}))},bind=function(fn,promise,state,unwrap){return function(value){fn(promise,state,value,unwrap)}},internalReject=function(promise,state,value,unwrap){state.done||(state.done=!0,unwrap&&(state=unwrap),state.value=value,state.state=2,notify(promise,state,!0))},internalResolve=function(promise,state,value,unwrap){if(!state.done){state.done=!0,unwrap&&(state=unwrap);try{if(promise===value)throw TypeError("Promise can't be resolved itself");var then=isThenable(value);then?microtask((function(){var wrapper={done:!1};try{then.call(value,bind(internalResolve,promise,wrapper,state),bind(internalReject,promise,wrapper,state))}catch(error){internalReject(promise,wrapper,error,state)}})):(state.value=value,state.state=1,notify(promise,state,!1))}catch(error){internalReject(promise,{done:!1},error,state)}}};FORCED&&(PromiseConstructor=function(executor){anInstance(this,PromiseConstructor,PROMISE),aFunction(executor),Internal.call(this);var state=getInternalState(this);try{executor(bind(internalResolve,this,state),bind(internalReject,this,state))}catch(error){internalReject(this,state,error)}},(Internal=function(executor){setInternalState(this,{type:PROMISE,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=redefineAll(PromiseConstructor.prototype,{then:function(onFulfilled,onRejected){var state=getInternalPromiseState(this),reaction=newPromiseCapability(speciesConstructor(this,PromiseConstructor));return reaction.ok="function"!=typeof onFulfilled||onFulfilled,reaction.fail="function"==typeof onRejected&&onRejected,reaction.domain=IS_NODE?process.domain:void 0,state.parent=!0,state.reactions.push(reaction),0!=state.state&&notify(this,state,!1),reaction.promise},catch:function(onRejected){return this.then(void 0,onRejected)}}),OwnPromiseCapability=function(){var promise=new Internal,state=getInternalState(promise);this.promise=promise,this.resolve=bind(internalResolve,promise,state),this.reject=bind(internalReject,promise,state)},newPromiseCapabilityModule.f=newPromiseCapability=function(C){return C===PromiseConstructor||C===PromiseWrapper?new OwnPromiseCapability(C):newGenericPromiseCapability(C)},IS_PURE||"function"!=typeof NativePromise||(nativeThen=NativePromise.prototype.then,redefine(NativePromise.prototype,"then",(function(onFulfilled,onRejected){var that=this;return new PromiseConstructor((function(resolve,reject){nativeThen.call(that,resolve,reject)})).then(onFulfilled,onRejected)}),{unsafe:!0}),"function"==typeof $fetch&&$({global:!0,enumerable:!0,forced:!0},{fetch:function(input){return promiseResolve(PromiseConstructor,$fetch.apply(global,arguments))}}))),$({global:!0,wrap:!0,forced:FORCED},{Promise:PromiseConstructor}),setToStringTag(PromiseConstructor,PROMISE,!1,!0),setSpecies(PROMISE),PromiseWrapper=getBuiltIn(PROMISE),$({target:PROMISE,stat:!0,forced:FORCED},{reject:function(r){var capability=newPromiseCapability(this);return capability.reject.call(void 0,r),capability.promise}}),$({target:PROMISE,stat:!0,forced:IS_PURE||FORCED},{resolve:function(x){return promiseResolve(IS_PURE&&this===PromiseWrapper?PromiseConstructor:this,x)}}),$({target:PROMISE,stat:!0,forced:INCORRECT_ITERATION},{all:function(iterable){var C=this,capability=newPromiseCapability(C),resolve=capability.resolve,reject=capability.reject,result=perform((function(){var $promiseResolve=aFunction(C.resolve),values=[],counter=0,remaining=1;iterate(iterable,(function(promise){var index=counter++,alreadyCalled=!1;values.push(void 0),remaining++,$promiseResolve.call(C,promise).then((function(value){alreadyCalled||(alreadyCalled=!0,values[index]=value,--remaining||resolve(values))}),reject)})),--remaining||resolve(values)}));return result.error&&reject(result.value),capability.promise},race:function(iterable){var C=this,capability=newPromiseCapability(C),reject=capability.reject,result=perform((function(){var $promiseResolve=aFunction(C.resolve);iterate(iterable,(function(promise){$promiseResolve.call(C,promise).then(capability.resolve,reject)}))}));return result.error&&reject(result.value),capability.promise}})},function(module,exports,__webpack_require__){var redefine=__webpack_require__(52);module.exports=function(target,src,options){for(var key in src)redefine(target,key,src[key],options);return target}},function(module,exports){module.exports=function(it,Constructor,name){if(!(it instanceof Constructor))throw TypeError("Incorrect "+(name?name+" ":"")+"invocation");return it}},function(module,exports,__webpack_require__){var flush,head,last,notify,toggle,node,promise,then,global=__webpack_require__(12),getOwnPropertyDescriptor=__webpack_require__(31).f,classof=__webpack_require__(63),macrotask=__webpack_require__(187).set,IS_IOS=__webpack_require__(188),MutationObserver=global.MutationObserver||global.WebKitMutationObserver,process=global.process,Promise=global.Promise,IS_NODE="process"==classof(process),queueMicrotaskDescriptor=getOwnPropertyDescriptor(global,"queueMicrotask"),queueMicrotask=queueMicrotaskDescriptor&&queueMicrotaskDescriptor.value;queueMicrotask||(flush=function(){var parent,fn;for(IS_NODE&&(parent=process.domain)&&parent.exit();head;){fn=head.fn,head=head.next;try{fn()}catch(error){throw head?notify():last=void 0,error}}last=void 0,parent&&parent.enter()},IS_NODE?notify=function(){process.nextTick(flush)}:MutationObserver&&!IS_IOS?(toggle=!0,node=document.createTextNode(""),new MutationObserver(flush).observe(node,{characterData:!0}),notify=function(){node.data=toggle=!toggle}):Promise&&Promise.resolve?(promise=Promise.resolve(void 0),then=promise.then,notify=function(){then.call(promise,flush)}):notify=function(){macrotask.call(global,flush)}),module.exports=queueMicrotask||function(fn){var task={fn:fn,next:void 0};last&&(last.next=task),head||(head=task,notify()),last=task}},function(module,exports,__webpack_require__){var global=__webpack_require__(12);module.exports=function(a,b){var console=global.console;console&&console.error&&(1===arguments.length?console.error(a):console.error(a,b))}},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(4),aFunction=__webpack_require__(28),newPromiseCapabilityModule=__webpack_require__(128),perform=__webpack_require__(190),iterate=__webpack_require__(126);$({target:"Promise",stat:!0},{allSettled:function(iterable){var C=this,capability=newPromiseCapabilityModule.f(C),resolve=capability.resolve,reject=capability.reject,result=perform((function(){var promiseResolve=aFunction(C.resolve),values=[],counter=0,remaining=1;iterate(iterable,(function(promise){var index=counter++,alreadyCalled=!1;values.push(void 0),remaining++,promiseResolve.call(C,promise).then((function(value){alreadyCalled||(alreadyCalled=!0,values[index]={status:"fulfilled",value:value},--remaining||resolve(values))}),(function(e){alreadyCalled||(alreadyCalled=!0,values[index]={status:"rejected",reason:e},--remaining||resolve(values))}))})),--remaining||resolve(values)}));return result.error&&reject(result.value),capability.promise}})},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(4),IS_PURE=__webpack_require__(51),NativePromise=__webpack_require__(185),fails=__webpack_require__(7),getBuiltIn=__webpack_require__(34),speciesConstructor=__webpack_require__(186),promiseResolve=__webpack_require__(189),redefine=__webpack_require__(52);$({target:"Promise",proto:!0,real:!0,forced:!!NativePromise&&fails((function(){NativePromise.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(onFinally){var C=speciesConstructor(this,getBuiltIn("Promise")),isFunction="function"==typeof onFinally;return this.then(isFunction?function(x){return promiseResolve(C,onFinally()).then((function(){return x}))}:onFinally,isFunction?function(e){return promiseResolve(C,onFinally()).then((function(){throw e}))}:onFinally)}}),IS_PURE||"function"!=typeof NativePromise||NativePromise.prototype.finally||redefine(NativePromise.prototype,"finally",getBuiltIn("Promise").prototype.finally)},function(module,exports,__webpack_require__){__webpack_require__(390),__webpack_require__(391),__webpack_require__(393),__webpack_require__(394),__webpack_require__(395),__webpack_require__(396),__webpack_require__(397),__webpack_require__(398),__webpack_require__(399),__webpack_require__(400),__webpack_require__(401),__webpack_require__(402),__webpack_require__(403);var path=__webpack_require__(53);module.exports=path.Reflect},function(module,exports,__webpack_require__){var $=__webpack_require__(4),getBuiltIn=__webpack_require__(34),aFunction=__webpack_require__(28),anObject=__webpack_require__(13),fails=__webpack_require__(7),nativeApply=getBuiltIn("Reflect","apply"),functionApply=Function.apply;$({target:"Reflect",stat:!0,forced:!fails((function(){nativeApply((function(){}))}))},{apply:function(target,thisArgument,argumentsList){return aFunction(target),anObject(argumentsList),nativeApply?nativeApply(target,thisArgument,argumentsList):functionApply.call(target,thisArgument,argumentsList)}})},function(module,exports,__webpack_require__){var $=__webpack_require__(4),getBuiltIn=__webpack_require__(34),aFunction=__webpack_require__(28),anObject=__webpack_require__(13),isObject=__webpack_require__(9),create=__webpack_require__(72),bind=__webpack_require__(392),fails=__webpack_require__(7),nativeConstruct=getBuiltIn("Reflect","construct"),NEW_TARGET_BUG=fails((function(){function F(){}return!(nativeConstruct((function(){}),[],F)instanceof F)})),ARGS_BUG=!fails((function(){nativeConstruct((function(){}))})),FORCED=NEW_TARGET_BUG||ARGS_BUG;$({target:"Reflect",stat:!0,forced:FORCED,sham:FORCED},{construct:function(Target,args){aFunction(Target),anObject(args);var newTarget=arguments.length<3?Target:aFunction(arguments[2]);if(ARGS_BUG&&!NEW_TARGET_BUG)return nativeConstruct(Target,args,newTarget);if(Target==newTarget){switch(args.length){case 0:return new Target;case 1:return new Target(args[0]);case 2:return new Target(args[0],args[1]);case 3:return new Target(args[0],args[1],args[2]);case 4:return new Target(args[0],args[1],args[2],args[3])}var $args=[null];return $args.push.apply($args,args),new(bind.apply(Target,$args))}var proto=newTarget.prototype,instance=create(isObject(proto)?proto:Object.prototype),result=Function.apply.call(Target,instance,args);return isObject(result)?result:instance}})},function(module,exports,__webpack_require__){"use strict";var aFunction=__webpack_require__(28),isObject=__webpack_require__(9),slice=[].slice,factories={},construct=function(C,argsLength,args){if(!(argsLength in factories)){for(var list=[],i=0;i<argsLength;i++)list[i]="a["+i+"]";factories[argsLength]=Function("C,a","return new C("+list.join(",")+")")}return factories[argsLength](C,args)};module.exports=Function.bind||function(that){var fn=aFunction(this),partArgs=slice.call(arguments,1),boundFunction=function(){var args=partArgs.concat(slice.call(arguments));return this instanceof boundFunction?construct(fn,args.length,args):fn.apply(that,args)};return isObject(fn.prototype)&&(boundFunction.prototype=fn.prototype),boundFunction}},function(module,exports,__webpack_require__){var $=__webpack_require__(4),DESCRIPTORS=__webpack_require__(10),anObject=__webpack_require__(13),toPrimitive=__webpack_require__(50),definePropertyModule=__webpack_require__(21);$({target:"Reflect",stat:!0,forced:__webpack_require__(7)((function(){Reflect.defineProperty(definePropertyModule.f({},1,{value:1}),1,{value:2})})),sham:!DESCRIPTORS},{defineProperty:function(target,propertyKey,attributes){anObject(target);var key=toPrimitive(propertyKey,!0);anObject(attributes);try{return definePropertyModule.f(target,key,attributes),!0}catch(error){return!1}}})},function(module,exports,__webpack_require__){var $=__webpack_require__(4),anObject=__webpack_require__(13),getOwnPropertyDescriptor=__webpack_require__(31).f;$({target:"Reflect",stat:!0},{deleteProperty:function(target,propertyKey){var descriptor=getOwnPropertyDescriptor(anObject(target),propertyKey);return!(descriptor&&!descriptor.configurable)&&delete target[propertyKey]}})},function(module,exports,__webpack_require__){var $=__webpack_require__(4),isObject=__webpack_require__(9),anObject=__webpack_require__(13),has=__webpack_require__(22),getOwnPropertyDescriptorModule=__webpack_require__(31),getPrototypeOf=__webpack_require__(41);$({target:"Reflect",stat:!0},{get:function get(target,propertyKey){var descriptor,prototype,receiver=arguments.length<3?target:arguments[2];return anObject(target)===receiver?target[propertyKey]:(descriptor=getOwnPropertyDescriptorModule.f(target,propertyKey))?has(descriptor,"value")?descriptor.value:void 0===descriptor.get?void 0:descriptor.get.call(receiver):isObject(prototype=getPrototypeOf(target))?get(prototype,propertyKey,receiver):void 0}})},function(module,exports,__webpack_require__){var $=__webpack_require__(4),DESCRIPTORS=__webpack_require__(10),anObject=__webpack_require__(13),getOwnPropertyDescriptorModule=__webpack_require__(31);$({target:"Reflect",stat:!0,sham:!DESCRIPTORS},{getOwnPropertyDescriptor:function(target,propertyKey){return getOwnPropertyDescriptorModule.f(anObject(target),propertyKey)}})},function(module,exports,__webpack_require__){var $=__webpack_require__(4),anObject=__webpack_require__(13),objectGetPrototypeOf=__webpack_require__(41);$({target:"Reflect",stat:!0,sham:!__webpack_require__(120)},{getPrototypeOf:function(target){return objectGetPrototypeOf(anObject(target))}})},function(module,exports,__webpack_require__){__webpack_require__(4)({target:"Reflect",stat:!0},{has:function(target,propertyKey){return propertyKey in target}})},function(module,exports,__webpack_require__){var $=__webpack_require__(4),anObject=__webpack_require__(13),objectIsExtensible=Object.isExtensible;$({target:"Reflect",stat:!0},{isExtensible:function(target){return anObject(target),!objectIsExtensible||objectIsExtensible(target)}})},function(module,exports,__webpack_require__){__webpack_require__(4)({target:"Reflect",stat:!0},{ownKeys:__webpack_require__(115)})},function(module,exports,__webpack_require__){var $=__webpack_require__(4),getBuiltIn=__webpack_require__(34),anObject=__webpack_require__(13);$({target:"Reflect",stat:!0,sham:!__webpack_require__(78)},{preventExtensions:function(target){anObject(target);try{var objectPreventExtensions=getBuiltIn("Object","preventExtensions");return objectPreventExtensions&&objectPreventExtensions(target),!0}catch(error){return!1}}})},function(module,exports,__webpack_require__){var $=__webpack_require__(4),anObject=__webpack_require__(13),isObject=__webpack_require__(9),has=__webpack_require__(22),fails=__webpack_require__(7),definePropertyModule=__webpack_require__(21),getOwnPropertyDescriptorModule=__webpack_require__(31),getPrototypeOf=__webpack_require__(41),createPropertyDescriptor=__webpack_require__(62);$({target:"Reflect",stat:!0,forced:fails((function(){var object=definePropertyModule.f({},"a",{configurable:!0});return!1!==Reflect.set(getPrototypeOf(object),"a",1,object)}))},{set:function set(target,propertyKey,V){var existingDescriptor,prototype,receiver=arguments.length<4?target:arguments[3],ownDescriptor=getOwnPropertyDescriptorModule.f(anObject(target),propertyKey);if(!ownDescriptor){if(isObject(prototype=getPrototypeOf(target)))return set(prototype,propertyKey,V,receiver);ownDescriptor=createPropertyDescriptor(0)}if(has(ownDescriptor,"value")){if(!1===ownDescriptor.writable||!isObject(receiver))return!1;if(existingDescriptor=getOwnPropertyDescriptorModule.f(receiver,propertyKey)){if(existingDescriptor.get||existingDescriptor.set||!1===existingDescriptor.writable)return!1;existingDescriptor.value=V,definePropertyModule.f(receiver,propertyKey,existingDescriptor)}else definePropertyModule.f(receiver,propertyKey,createPropertyDescriptor(0,V));return!0}return void 0!==ownDescriptor.set&&(ownDescriptor.set.call(receiver,V),!0)}})},function(module,exports,__webpack_require__){var $=__webpack_require__(4),anObject=__webpack_require__(13),aPossiblePrototype=__webpack_require__(167),objectSetPrototypeOf=__webpack_require__(122);objectSetPrototypeOf&&$({target:"Reflect",stat:!0},{setPrototypeOf:function(target,proto){anObject(target),aPossiblePrototype(proto);try{return objectSetPrototypeOf(target,proto),!0}catch(error){return!1}}})},function(module,exports,__webpack_require__){__webpack_require__(173),__webpack_require__(127),__webpack_require__(179),__webpack_require__(405),__webpack_require__(406),__webpack_require__(407),__webpack_require__(408),__webpack_require__(409),__webpack_require__(410),__webpack_require__(411),__webpack_require__(412),__webpack_require__(413),__webpack_require__(414),__webpack_require__(415),__webpack_require__(416),__webpack_require__(417),__webpack_require__(418),__webpack_require__(183),__webpack_require__(184);var path=__webpack_require__(53);module.exports=path.Symbol},function(module,exports,__webpack_require__){__webpack_require__(26)("asyncIterator")},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(4),DESCRIPTORS=__webpack_require__(10),global=__webpack_require__(12),has=__webpack_require__(22),isObject=__webpack_require__(9),defineProperty=__webpack_require__(21).f,copyConstructorProperties=__webpack_require__(160),NativeSymbol=global.Symbol;if(DESCRIPTORS&&"function"==typeof NativeSymbol&&(!("description"in NativeSymbol.prototype)||void 0!==NativeSymbol().description)){var EmptyStringDescriptionStore={},SymbolWrapper=function(){var description=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),result=this instanceof SymbolWrapper?new NativeSymbol(description):void 0===description?NativeSymbol():NativeSymbol(description);return""===description&&(EmptyStringDescriptionStore[result]=!0),result};copyConstructorProperties(SymbolWrapper,NativeSymbol);var symbolPrototype=SymbolWrapper.prototype=NativeSymbol.prototype;symbolPrototype.constructor=SymbolWrapper;var symbolToString=symbolPrototype.toString,native="Symbol(test)"==String(NativeSymbol("test")),regexp=/^Symbol\((.*)\)[^)]+$/;defineProperty(symbolPrototype,"description",{configurable:!0,get:function(){var symbol=isObject(this)?this.valueOf():this,string=symbolToString.call(symbol);if(has(EmptyStringDescriptionStore,symbol))return"";var desc=native?string.slice(7,-1):string.replace(regexp,"$1");return""===desc?void 0:desc}}),$({global:!0,forced:!0},{Symbol:SymbolWrapper})}},function(module,exports,__webpack_require__){__webpack_require__(26)("hasInstance")},function(module,exports,__webpack_require__){__webpack_require__(26)("isConcatSpreadable")},function(module,exports,__webpack_require__){__webpack_require__(26)("iterator")},function(module,exports,__webpack_require__){__webpack_require__(26)("match")},function(module,exports,__webpack_require__){__webpack_require__(26)("matchAll")},function(module,exports,__webpack_require__){__webpack_require__(26)("replace")},function(module,exports,__webpack_require__){__webpack_require__(26)("search")},function(module,exports,__webpack_require__){__webpack_require__(26)("species")},function(module,exports,__webpack_require__){__webpack_require__(26)("split")},function(module,exports,__webpack_require__){__webpack_require__(26)("toPrimitive")},function(module,exports,__webpack_require__){__webpack_require__(26)("toStringTag")},function(module,exports,__webpack_require__){__webpack_require__(26)("unscopables")},function(module,exports,__webpack_require__){"use strict";!function checkDCE(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(err){console.error(err)}}(),module.exports=__webpack_require__(420)},function(module,exports,__webpack_require__){"use strict";var aa=__webpack_require__(129),n=__webpack_require__(191),r=__webpack_require__(422);function u(a){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+a,c=1;c<arguments.length;c++)b+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+a+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!aa)throw Error(u(227));function ba(a,b,c,d,e,f,g,h,k){var l=Array.prototype.slice.call(arguments,3);try{b.apply(c,l)}catch(m){this.onError(m)}}var da=!1,ea=null,fa=!1,ha=null,ia={onError:function(a){da=!0,ea=a}};function ja(a,b,c,d,e,f,g,h,k){da=!1,ea=null,ba.apply(ia,arguments)}var la=null,ma=null,na=null;function oa(a,b,c){var d=a.type||"unknown-event";a.currentTarget=na(c),function(a,b,c,d,e,f,g,h,k){if(ja.apply(this,arguments),da){if(!da)throw Error(u(198));var l=ea;da=!1,ea=null,fa||(fa=!0,ha=l)}}(d,b,void 0,a),a.currentTarget=null}var pa=null,qa={};function ra(){if(pa)for(var a in qa){var b=qa[a],c=pa.indexOf(a);if(!(-1<c))throw Error(u(96,a));if(!sa[c]){if(!b.extractEvents)throw Error(u(97,a));for(var d in sa[c]=b,c=b.eventTypes){var e=void 0,f=c[d],g=b,h=d;if(ta.hasOwnProperty(h))throw Error(u(99,h));ta[h]=f;var k=f.phasedRegistrationNames;if(k){for(e in k)k.hasOwnProperty(e)&&ua(k[e],g,h);e=!0}else f.registrationName?(ua(f.registrationName,g,h),e=!0):e=!1;if(!e)throw Error(u(98,d,a))}}}}function ua(a,b,c){if(va[a])throw Error(u(100,a));va[a]=b,wa[a]=b.eventTypes[c].dependencies}var sa=[],ta={},va={},wa={};function xa(a){var c,b=!1;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];if(!qa.hasOwnProperty(c)||qa[c]!==d){if(qa[c])throw Error(u(102,c));qa[c]=d,b=!0}}b&&ra()}var ya=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),za=null,Aa=null,Ba=null;function Ca(a){if(a=ma(a)){if("function"!=typeof za)throw Error(u(280));var b=a.stateNode;b&&(b=la(b),za(a.stateNode,a.type,b))}}function Da(a){Aa?Ba?Ba.push(a):Ba=[a]:Aa=a}function Ea(){if(Aa){var a=Aa,b=Ba;if(Ba=Aa=null,Ca(a),b)for(a=0;a<b.length;a++)Ca(b[a])}}function Fa(a,b){return a(b)}function Ga(a,b,c,d,e){return a(b,c,d,e)}function Ha(){}var Ia=Fa,Ja=!1,Ka=!1;function La(){null===Aa&&null===Ba||(Ha(),Ea())}function Ma(a,b,c){if(Ka)return a(b,c);Ka=!0;try{return Ia(a,b,c)}finally{Ka=!1,La()}}var Na=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Oa=Object.prototype.hasOwnProperty,Pa={},Qa={};function v(a,b,c,d,e,f){this.acceptsBooleans=2===b||3===b||4===b,this.attributeName=d,this.attributeNamespace=e,this.mustUseProperty=c,this.propertyName=a,this.type=b,this.sanitizeURL=f}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(a){C[a]=new v(a,0,!1,a,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(a){var b=a[0];C[b]=new v(b,1,!1,a[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(a){C[a]=new v(a,2,!1,a.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(a){C[a]=new v(a,2,!1,a,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(a){C[a]=new v(a,3,!1,a.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(a){C[a]=new v(a,3,!0,a,null,!1)})),["capture","download"].forEach((function(a){C[a]=new v(a,4,!1,a,null,!1)})),["cols","rows","size","span"].forEach((function(a){C[a]=new v(a,6,!1,a,null,!1)})),["rowSpan","start"].forEach((function(a){C[a]=new v(a,5,!1,a.toLowerCase(),null,!1)}));var Ua=/[\-:]([a-z])/g;function Va(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(a){var b=a.replace(Ua,Va);C[b]=new v(b,1,!1,a,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(a){var b=a.replace(Ua,Va);C[b]=new v(b,1,!1,a,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(a){var b=a.replace(Ua,Va);C[b]=new v(b,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(a){C[a]=new v(a,1,!1,a.toLowerCase(),null,!1)})),C.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(a){C[a]=new v(a,1,!1,a.toLowerCase(),null,!0)}));var Wa=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function Xa(a,b,c,d){var e=C.hasOwnProperty(b)?C[b]:null;(null!==e?0===e.type:!d&&(2<b.length&&("o"===b[0]||"O"===b[0])&&("n"===b[1]||"N"===b[1])))||(function(a,b,c,d){if(null==b||function(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case"function":case"symbol":return!0;case"boolean":return!d&&(null!==c?!c.acceptsBooleans:"data-"!==(a=a.toLowerCase().slice(0,5))&&"aria-"!==a);default:return!1}}(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}(b,c,e,d)&&(c=null),d||null===e?function(a){return!!Oa.call(Qa,a)||!Oa.call(Pa,a)&&(Na.test(a)?Qa[a]=!0:(Pa[a]=!0,!1))}(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,""+c)):e.mustUseProperty?a[e.propertyName]=null===c?3!==e.type&&"":c:(b=e.attributeName,d=e.attributeNamespace,null===c?a.removeAttribute(b):(c=3===(e=e.type)||4===e&&!0===c?"":""+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c))))}Wa.hasOwnProperty("ReactCurrentDispatcher")||(Wa.ReactCurrentDispatcher={current:null}),Wa.hasOwnProperty("ReactCurrentBatchConfig")||(Wa.ReactCurrentBatchConfig={suspense:null});var Ya=/^(.*)[\\\/]/,E="function"==typeof Symbol&&Symbol.for,Za=E?Symbol.for("react.element"):60103,$a=E?Symbol.for("react.portal"):60106,ab=E?Symbol.for("react.fragment"):60107,bb=E?Symbol.for("react.strict_mode"):60108,cb=E?Symbol.for("react.profiler"):60114,db=E?Symbol.for("react.provider"):60109,eb=E?Symbol.for("react.context"):60110,fb=E?Symbol.for("react.concurrent_mode"):60111,gb=E?Symbol.for("react.forward_ref"):60112,hb=E?Symbol.for("react.suspense"):60113,ib=E?Symbol.for("react.suspense_list"):60120,jb=E?Symbol.for("react.memo"):60115,kb=E?Symbol.for("react.lazy"):60116,lb=E?Symbol.for("react.block"):60121,mb="function"==typeof Symbol&&Symbol.iterator;function nb(a){return null===a||"object"!=typeof a?null:"function"==typeof(a=mb&&a[mb]||a["@@iterator"])?a:null}function pb(a){if(null==a)return null;if("function"==typeof a)return a.displayName||a.name||null;if("string"==typeof a)return a;switch(a){case ab:return"Fragment";case $a:return"Portal";case cb:return"Profiler";case bb:return"StrictMode";case hb:return"Suspense";case ib:return"SuspenseList"}if("object"==typeof a)switch(a.$$typeof){case eb:return"Context.Consumer";case db:return"Context.Provider";case gb:var b=a.render;return b=b.displayName||b.name||"",a.displayName||(""!==b?"ForwardRef("+b+")":"ForwardRef");case jb:return pb(a.type);case lb:return pb(a.render);case kb:if(a=1===a._status?a._result:null)return pb(a)}return null}function qb(a){var b="";do{a:switch(a.tag){case 3:case 4:case 6:case 7:case 10:case 9:var c="";break a;default:var d=a._debugOwner,e=a._debugSource,f=pb(a.type);c=null,d&&(c=pb(d.type)),d=f,f="",e?f=" (at "+e.fileName.replace(Ya,"")+":"+e.lineNumber+")":c&&(f=" (created by "+c+")"),c="\n    in "+(d||"Unknown")+f}b+=c,a=a.return}while(a);return b}function rb(a){switch(typeof a){case"boolean":case"number":case"object":case"string":case"undefined":return a;default:return""}}function sb(a){var b=a.type;return(a=a.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===b||"radio"===b)}function xb(a){a._valueTracker||(a._valueTracker=function(a){var b=sb(a)?"checked":"value",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=""+a[b];if(!a.hasOwnProperty(b)&&void 0!==c&&"function"==typeof c.get&&"function"==typeof c.set){var e=c.get,f=c.set;return Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=""+a,f.call(this,a)}}),Object.defineProperty(a,b,{enumerable:c.enumerable}),{getValue:function(){return d},setValue:function(a){d=""+a},stopTracking:function(){a._valueTracker=null,delete a[b]}}}}(a))}function yb(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue(),d="";return a&&(d=sb(a)?a.checked?"true":"false":a.value),(a=d)!==c&&(b.setValue(a),!0)}function zb(a,b){var c=b.checked;return n({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=c?c:a._wrapperState.initialChecked})}function Ab(a,b){var c=null==b.defaultValue?"":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=rb(null!=b.value?b.value:c),a._wrapperState={initialChecked:d,initialValue:c,controlled:"checkbox"===b.type||"radio"===b.type?null!=b.checked:null!=b.value}}function Bb(a,b){null!=(b=b.checked)&&Xa(a,"checked",b,!1)}function Cb(a,b){Bb(a,b);var c=rb(b.value),d=b.type;if(null!=c)"number"===d?(0===c&&""===a.value||a.value!=c)&&(a.value=""+c):a.value!==""+c&&(a.value=""+c);else if("submit"===d||"reset"===d)return void a.removeAttribute("value");b.hasOwnProperty("value")?Db(a,b.type,c):b.hasOwnProperty("defaultValue")&&Db(a,b.type,rb(b.defaultValue)),null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}function Eb(a,b,c){if(b.hasOwnProperty("value")||b.hasOwnProperty("defaultValue")){var d=b.type;if(!("submit"!==d&&"reset"!==d||void 0!==b.value&&null!==b.value))return;b=""+a._wrapperState.initialValue,c||b===a.value||(a.value=b),a.defaultValue=b}""!==(c=a.name)&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,""!==c&&(a.name=c)}function Db(a,b,c){"number"===b&&a.ownerDocument.activeElement===a||(null==c?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+c&&(a.defaultValue=""+c))}function Gb(a,b){return a=n({children:void 0},b),(b=function(a){var b="";return aa.Children.forEach(a,(function(a){null!=a&&(b+=a)})),b}(b.children))&&(a.children=b),a}function Hb(a,b,c,d){if(a=a.options,b){b={};for(var e=0;e<c.length;e++)b["$"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty("$"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{for(c=""+rb(c),b=null,e=0;e<a.length;e++){if(a[e].value===c)return a[e].selected=!0,void(d&&(a[e].defaultSelected=!0));null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}function Ib(a,b){if(null!=b.dangerouslySetInnerHTML)throw Error(u(91));return n({},b,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function Jb(a,b){var c=b.value;if(null==c){if(c=b.children,b=b.defaultValue,null!=c){if(null!=b)throw Error(u(92));if(Array.isArray(c)){if(!(1>=c.length))throw Error(u(93));c=c[0]}b=c}null==b&&(b=""),c=b}a._wrapperState={initialValue:rb(c)}}function Kb(a,b){var c=rb(b.value),d=rb(b.defaultValue);null!=c&&((c=""+c)!==a.value&&(a.value=c),null==b.defaultValue&&a.defaultValue!==c&&(a.defaultValue=c)),null!=d&&(a.defaultValue=""+d)}function Lb(a){var b=a.textContent;b===a._wrapperState.initialValue&&""!==b&&null!==b&&(a.value=b)}var Mb_html="http://www.w3.org/1999/xhtml",Mb_svg="http://www.w3.org/2000/svg";function Nb(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ob(a,b){return null==a||"http://www.w3.org/1999/xhtml"===a?Nb(b):"http://www.w3.org/2000/svg"===a&&"foreignObject"===b?"http://www.w3.org/1999/xhtml":a}var Pb,a,Qb=(a=function(a,b){if(a.namespaceURI!==Mb_svg||"innerHTML"in a)a.innerHTML=b;else{for((Pb=Pb||document.createElement("div")).innerHTML="<svg>"+b.valueOf().toString()+"</svg>",b=Pb.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction((function(){return a(b,c)}))}:a);function Rb(a,b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType)return void(c.nodeValue=b)}a.textContent=b}function Sb(a,b){var c={};return c[a.toLowerCase()]=b.toLowerCase(),c["Webkit"+a]="webkit"+b,c["Moz"+a]="moz"+b,c}var Tb={animationend:Sb("Animation","AnimationEnd"),animationiteration:Sb("Animation","AnimationIteration"),animationstart:Sb("Animation","AnimationStart"),transitionend:Sb("Transition","TransitionEnd")},Ub={},Vb={};function Wb(a){if(Ub[a])return Ub[a];if(!Tb[a])return a;var c,b=Tb[a];for(c in b)if(b.hasOwnProperty(c)&&c in Vb)return Ub[a]=b[c];return a}ya&&(Vb=document.createElement("div").style,"AnimationEvent"in window||(delete Tb.animationend.animation,delete Tb.animationiteration.animation,delete Tb.animationstart.animation),"TransitionEvent"in window||delete Tb.transitionend.transition);var Xb=Wb("animationend"),Yb=Wb("animationiteration"),Zb=Wb("animationstart"),$b=Wb("transitionend"),ac="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bc=new("function"==typeof WeakMap?WeakMap:Map);function cc(a){var b=bc.get(a);return void 0===b&&(b=new Map,bc.set(a,b)),b}function dc(a){var b=a,c=a;if(a.alternate)for(;b.return;)b=b.return;else{a=b;do{0!=(1026&(b=a).effectTag)&&(c=b.return),a=b.return}while(a)}return 3===b.tag?c:null}function ec(a){if(13===a.tag){var b=a.memoizedState;if(null===b&&(null!==(a=a.alternate)&&(b=a.memoizedState)),null!==b)return b.dehydrated}return null}function fc(a){if(dc(a)!==a)throw Error(u(188))}function hc(a){if(!(a=function(a){var b=a.alternate;if(!b){if(null===(b=dc(a)))throw Error(u(188));return b!==a?null:a}for(var c=a,d=b;;){var e=c.return;if(null===e)break;var f=e.alternate;if(null===f){if(null!==(d=e.return)){c=d;continue}break}if(e.child===f.child){for(f=e.child;f;){if(f===c)return fc(e),a;if(f===d)return fc(e),b;f=f.sibling}throw Error(u(188))}if(c.return!==d.return)c=e,d=f;else{for(var g=!1,h=e.child;h;){if(h===c){g=!0,c=e,d=f;break}if(h===d){g=!0,d=e,c=f;break}h=h.sibling}if(!g){for(h=f.child;h;){if(h===c){g=!0,c=f,d=e;break}if(h===d){g=!0,d=f,c=e;break}h=h.sibling}if(!g)throw Error(u(189))}}if(c.alternate!==d)throw Error(u(190))}if(3!==c.tag)throw Error(u(188));return c.stateNode.current===c?a:b}(a)))return null;for(var b=a;;){if(5===b.tag||6===b.tag)return b;if(b.child)b.child.return=b,b=b.child;else{if(b===a)break;for(;!b.sibling;){if(!b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return,b=b.sibling}}return null}function ic(a,b){if(null==b)throw Error(u(30));return null==a?b:Array.isArray(a)?Array.isArray(b)?(a.push.apply(a,b),a):(a.push(b),a):Array.isArray(b)?[a].concat(b):[a,b]}function jc(a,b,c){Array.isArray(a)?a.forEach(b,c):a&&b.call(c,a)}var kc=null;function lc(a){if(a){var b=a._dispatchListeners,c=a._dispatchInstances;if(Array.isArray(b))for(var d=0;d<b.length&&!a.isPropagationStopped();d++)oa(a,b[d],c[d]);else b&&oa(a,b,c);a._dispatchListeners=null,a._dispatchInstances=null,a.isPersistent()||a.constructor.release(a)}}function mc(a){if(null!==a&&(kc=ic(kc,a)),a=kc,kc=null,a){if(jc(a,lc),kc)throw Error(u(95));if(fa)throw a=ha,fa=!1,ha=null,a}}function nc(a){return(a=a.target||a.srcElement||window).correspondingUseElement&&(a=a.correspondingUseElement),3===a.nodeType?a.parentNode:a}function oc(a){if(!ya)return!1;var b=(a="on"+a)in document;return b||((b=document.createElement("div")).setAttribute(a,"return;"),b="function"==typeof b[a]),b}var pc=[];function qc(a){a.topLevelType=null,a.nativeEvent=null,a.targetInst=null,a.ancestors.length=0,10>pc.length&&pc.push(a)}function rc(a,b,c,d){if(pc.length){var e=pc.pop();return e.topLevelType=a,e.eventSystemFlags=d,e.nativeEvent=b,e.targetInst=c,e}return{topLevelType:a,eventSystemFlags:d,nativeEvent:b,targetInst:c,ancestors:[]}}function sc(a){var b=a.targetInst,c=b;do{if(!c){a.ancestors.push(c);break}var d=c;if(3===d.tag)d=d.stateNode.containerInfo;else{for(;d.return;)d=d.return;d=3!==d.tag?null:d.stateNode.containerInfo}if(!d)break;5!==(b=c.tag)&&6!==b||a.ancestors.push(c),c=tc(d)}while(c);for(c=0;c<a.ancestors.length;c++){b=a.ancestors[c];var e=nc(a.nativeEvent);d=a.topLevelType;var f=a.nativeEvent,g=a.eventSystemFlags;0===c&&(g|=64);for(var h=null,k=0;k<sa.length;k++){var l=sa[k];l&&(l=l.extractEvents(d,b,f,e,g))&&(h=ic(h,l))}mc(h)}}function uc(a,b,c){if(!c.has(a)){switch(a){case"scroll":vc(b,"scroll",!0);break;case"focus":case"blur":vc(b,"focus",!0),vc(b,"blur",!0),c.set("blur",null),c.set("focus",null);break;case"cancel":case"close":oc(a)&&vc(b,a,!0);break;case"invalid":case"submit":case"reset":break;default:-1===ac.indexOf(a)&&F(a,b)}c.set(a,null)}}var wc,xc,yc,zc=!1,Ac=[],Bc=null,Cc=null,Dc=null,Ec=new Map,Fc=new Map,Gc=[],Hc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Ic="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Kc(a,b,c,d,e){return{blockedOn:a,topLevelType:b,eventSystemFlags:32|c,nativeEvent:e,container:d}}function Lc(a,b){switch(a){case"focus":case"blur":Bc=null;break;case"dragenter":case"dragleave":Cc=null;break;case"mouseover":case"mouseout":Dc=null;break;case"pointerover":case"pointerout":Ec.delete(b.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fc.delete(b.pointerId)}}function Mc(a,b,c,d,e,f){return null===a||a.nativeEvent!==f?(a=Kc(b,c,d,e,f),null!==b&&(null!==(b=Nc(b))&&xc(b)),a):(a.eventSystemFlags|=d,a)}function Pc(a){var b=tc(a.target);if(null!==b){var c=dc(b);if(null!==c)if(13===(b=c.tag)){if(null!==(b=ec(c)))return a.blockedOn=b,void r.unstable_runWithPriority(a.priority,(function(){yc(c)}))}else if(3===b&&c.stateNode.hydrate)return void(a.blockedOn=3===c.tag?c.stateNode.containerInfo:null)}a.blockedOn=null}function Qc(a){if(null!==a.blockedOn)return!1;var b=Rc(a.topLevelType,a.eventSystemFlags,a.container,a.nativeEvent);if(null!==b){var c=Nc(b);return null!==c&&xc(c),a.blockedOn=b,!1}return!0}function Sc(a,b,c){Qc(a)&&c.delete(b)}function Tc(){for(zc=!1;0<Ac.length;){var a=Ac[0];if(null!==a.blockedOn){null!==(a=Nc(a.blockedOn))&&wc(a);break}var b=Rc(a.topLevelType,a.eventSystemFlags,a.container,a.nativeEvent);null!==b?a.blockedOn=b:Ac.shift()}null!==Bc&&Qc(Bc)&&(Bc=null),null!==Cc&&Qc(Cc)&&(Cc=null),null!==Dc&&Qc(Dc)&&(Dc=null),Ec.forEach(Sc),Fc.forEach(Sc)}function Uc(a,b){a.blockedOn===b&&(a.blockedOn=null,zc||(zc=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Tc)))}function Vc(a){function b(b){return Uc(b,a)}if(0<Ac.length){Uc(Ac[0],a);for(var c=1;c<Ac.length;c++){var d=Ac[c];d.blockedOn===a&&(d.blockedOn=null)}}for(null!==Bc&&Uc(Bc,a),null!==Cc&&Uc(Cc,a),null!==Dc&&Uc(Dc,a),Ec.forEach(b),Fc.forEach(b),c=0;c<Gc.length;c++)(d=Gc[c]).blockedOn===a&&(d.blockedOn=null);for(;0<Gc.length&&null===(c=Gc[0]).blockedOn;)Pc(c),null===c.blockedOn&&Gc.shift()}var Wc={},Yc=new Map,Zc=new Map,$c=["abort","abort",Xb,"animationEnd",Yb,"animationIteration",Zb,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",$b,"transitionEnd","waiting","waiting"];function ad(a,b){for(var c=0;c<a.length;c+=2){var d=a[c],e=a[c+1],f="on"+(e[0].toUpperCase()+e.slice(1));f={phasedRegistrationNames:{bubbled:f,captured:f+"Capture"},dependencies:[d],eventPriority:b},Zc.set(d,b),Yc.set(d,f),Wc[e]=f}}ad("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),ad("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),ad($c,2);for(var bd="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),cd=0;cd<bd.length;cd++)Zc.set(bd[cd],0);var dd=r.unstable_UserBlockingPriority,ed=r.unstable_runWithPriority,fd=!0;function F(a,b){vc(b,a,!1)}function vc(a,b,c){var d=Zc.get(b);switch(void 0===d?2:d){case 0:d=gd.bind(null,b,1,a);break;case 1:d=hd.bind(null,b,1,a);break;default:d=id.bind(null,b,1,a)}c?a.addEventListener(b,d,!0):a.addEventListener(b,d,!1)}function gd(a,b,c,d){Ja||Ha();var e=id,f=Ja;Ja=!0;try{Ga(e,a,b,c,d)}finally{(Ja=f)||La()}}function hd(a,b,c,d){ed(dd,id.bind(null,a,b,c,d))}function id(a,b,c,d){if(fd)if(0<Ac.length&&-1<Hc.indexOf(a))a=Kc(null,a,b,c,d),Ac.push(a);else{var e=Rc(a,b,c,d);if(null===e)Lc(a,d);else if(-1<Hc.indexOf(a))a=Kc(e,a,b,c,d),Ac.push(a);else if(!function(a,b,c,d,e){switch(b){case"focus":return Bc=Mc(Bc,a,b,c,d,e),!0;case"dragenter":return Cc=Mc(Cc,a,b,c,d,e),!0;case"mouseover":return Dc=Mc(Dc,a,b,c,d,e),!0;case"pointerover":var f=e.pointerId;return Ec.set(f,Mc(Ec.get(f)||null,a,b,c,d,e)),!0;case"gotpointercapture":return f=e.pointerId,Fc.set(f,Mc(Fc.get(f)||null,a,b,c,d,e)),!0}return!1}(e,a,b,c,d)){Lc(a,d),a=rc(a,d,null,b);try{Ma(sc,a)}finally{qc(a)}}}}function Rc(a,b,c,d){if(null!==(c=tc(c=nc(d)))){var e=dc(c);if(null===e)c=null;else{var f=e.tag;if(13===f){if(null!==(c=ec(e)))return c;c=null}else if(3===f){if(e.stateNode.hydrate)return 3===e.tag?e.stateNode.containerInfo:null;c=null}else e!==c&&(c=null)}}a=rc(a,d,c,b);try{Ma(sc,a)}finally{qc(a)}return null}var jd={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kd=["Webkit","ms","Moz","O"];function ld(a,b,c){return null==b||"boolean"==typeof b||""===b?"":c||"number"!=typeof b||0===b||jd.hasOwnProperty(a)&&jd[a]?(""+b).trim():b+"px"}function md(a,b){for(var c in a=a.style,b)if(b.hasOwnProperty(c)){var d=0===c.indexOf("--"),e=ld(c,b[c],d);"float"===c&&(c="cssFloat"),d?a.setProperty(c,e):a[c]=e}}Object.keys(jd).forEach((function(a){kd.forEach((function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1),jd[b]=jd[a]}))}));var nd=n({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function od(a,b){if(b){if(nd[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML))throw Error(u(137,a,""));if(null!=b.dangerouslySetInnerHTML){if(null!=b.children)throw Error(u(60));if("object"!=typeof b.dangerouslySetInnerHTML||!("__html"in b.dangerouslySetInnerHTML))throw Error(u(61))}if(null!=b.style&&"object"!=typeof b.style)throw Error(u(62,""))}}function pd(a,b){if(-1===a.indexOf("-"))return"string"==typeof b.is;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qd=Mb_html;function rd(a,b){var c=cc(a=9===a.nodeType||11===a.nodeType?a:a.ownerDocument);b=wa[b];for(var d=0;d<b.length;d++)uc(b[d],a,c)}function sd(){}function td(a){if(void 0===(a=a||("undefined"!=typeof document?document:void 0)))return null;try{return a.activeElement||a.body}catch(b){return a.body}}function ud(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function vd(a,b){var d,c=ud(a);for(a=0;c;){if(3===c.nodeType){if(d=a+c.textContent.length,a<=b&&d>=b)return{node:c,offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=ud(c)}}function xd(){for(var a=window,b=td();b instanceof a.HTMLIFrameElement;){try{var c="string"==typeof b.contentWindow.location.href}catch(d){c=!1}if(!c)break;b=td((a=b.contentWindow).document)}return b}function yd(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&("input"===b&&("text"===a.type||"search"===a.type||"tel"===a.type||"url"===a.type||"password"===a.type)||"textarea"===b||"true"===a.contentEditable)}var Dd=null,Ed=null;function Fd(a,b){switch(a){case"button":case"input":case"select":case"textarea":return!!b.autoFocus}return!1}function Gd(a,b){return"textarea"===a||"option"===a||"noscript"===a||"string"==typeof b.children||"number"==typeof b.children||"object"==typeof b.dangerouslySetInnerHTML&&null!==b.dangerouslySetInnerHTML&&null!=b.dangerouslySetInnerHTML.__html}var Hd="function"==typeof setTimeout?setTimeout:void 0,Id="function"==typeof clearTimeout?clearTimeout:void 0;function Jd(a){for(;null!=a;a=a.nextSibling){var b=a.nodeType;if(1===b||3===b)break}return a}function Kd(a){a=a.previousSibling;for(var b=0;a;){if(8===a.nodeType){var c=a.data;if("$"===c||"$!"===c||"$?"===c){if(0===b)return a;b--}else"/$"===c&&b++}a=a.previousSibling}return null}var Ld=Math.random().toString(36).slice(2),Md="__reactInternalInstance$"+Ld,Nd="__reactEventHandlers$"+Ld,Od="__reactContainere$"+Ld;function tc(a){var b=a[Md];if(b)return b;for(var c=a.parentNode;c;){if(b=c[Od]||c[Md]){if(c=b.alternate,null!==b.child||null!==c&&null!==c.child)for(a=Kd(a);null!==a;){if(c=a[Md])return c;a=Kd(a)}return b}c=(a=c).parentNode}return null}function Nc(a){return!(a=a[Md]||a[Od])||5!==a.tag&&6!==a.tag&&13!==a.tag&&3!==a.tag?null:a}function Pd(a){if(5===a.tag||6===a.tag)return a.stateNode;throw Error(u(33))}function Qd(a){return a[Nd]||null}function Rd(a){do{a=a.return}while(a&&5!==a.tag);return a||null}function Sd(a,b){var c=a.stateNode;if(!c)return null;var d=la(c);if(!d)return null;c=d[b];a:switch(b){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(d=!("button"===(a=a.type)||"input"===a||"select"===a||"textarea"===a)),a=!d;break a;default:a=!1}if(a)return null;if(c&&"function"!=typeof c)throw Error(u(231,b,typeof c));return c}function Td(a,b,c){(b=Sd(a,c.dispatchConfig.phasedRegistrationNames[b]))&&(c._dispatchListeners=ic(c._dispatchListeners,b),c._dispatchInstances=ic(c._dispatchInstances,a))}function Ud(a){if(a&&a.dispatchConfig.phasedRegistrationNames){for(var b=a._targetInst,c=[];b;)c.push(b),b=Rd(b);for(b=c.length;0<b--;)Td(c[b],"captured",a);for(b=0;b<c.length;b++)Td(c[b],"bubbled",a)}}function Vd(a,b,c){a&&c&&c.dispatchConfig.registrationName&&(b=Sd(a,c.dispatchConfig.registrationName))&&(c._dispatchListeners=ic(c._dispatchListeners,b),c._dispatchInstances=ic(c._dispatchInstances,a))}function Wd(a){a&&a.dispatchConfig.registrationName&&Vd(a._targetInst,null,a)}function Xd(a){jc(a,Ud)}var Yd=null,Zd=null,$d=null;function ae(){if($d)return $d;var a,d,b=Zd,c=b.length,e="value"in Yd?Yd.value:Yd.textContent,f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var g=c-a;for(d=1;d<=g&&b[c-d]===e[f-d];d++);return $d=e.slice(a,1<d?1-d:void 0)}function be(){return!0}function ce(){return!1}function G(a,b,c,d){for(var e in this.dispatchConfig=a,this._targetInst=b,this.nativeEvent=c,a=this.constructor.Interface)a.hasOwnProperty(e)&&((b=a[e])?this[e]=b(c):"target"===e?this.target=d:this[e]=c[e]);return this.isDefaultPrevented=(null!=c.defaultPrevented?c.defaultPrevented:!1===c.returnValue)?be:ce,this.isPropagationStopped=ce,this}function ee(a,b,c,d){if(this.eventPool.length){var e=this.eventPool.pop();return this.call(e,a,b,c,d),e}return new this(a,b,c,d)}function fe(a){if(!(a instanceof this))throw Error(u(279));a.destructor(),10>this.eventPool.length&&this.eventPool.push(a)}function de(a){a.eventPool=[],a.getPooled=ee,a.release=fe}n(G.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():"unknown"!=typeof a.returnValue&&(a.returnValue=!1),this.isDefaultPrevented=be)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():"unknown"!=typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=be)},persist:function(){this.isPersistent=be},isPersistent:ce,destructor:function(){var b,a=this.constructor.Interface;for(b in a)this[b]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=ce,this._dispatchInstances=this._dispatchListeners=null}}),G.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},G.extend=function(a){function b(){}function c(){return d.apply(this,arguments)}var d=this;b.prototype=d.prototype;var e=new b;return n(e,c.prototype),c.prototype=e,c.prototype.constructor=c,c.Interface=n({},d.Interface,a),c.extend=d.extend,de(c),c},de(G);var ge=G.extend({data:null}),he=G.extend({data:null}),ie=[9,13,27,32],je=ya&&"CompositionEvent"in window,ke=null;ya&&"documentMode"in document&&(ke=document.documentMode);var le=ya&&"TextEvent"in window&&!ke,me=ya&&(!je||ke&&8<ke&&11>=ke),ne=String.fromCharCode(32),oe={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},pe=!1;function qe(a,b){switch(a){case"keyup":return-1!==ie.indexOf(b.keyCode);case"keydown":return 229!==b.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function re(a){return"object"==typeof(a=a.detail)&&"data"in a?a.data:null}var se=!1;var ve={eventTypes:oe,extractEvents:function(a,b,c,d){var e;if(je)b:{switch(a){case"compositionstart":var f=oe.compositionStart;break b;case"compositionend":f=oe.compositionEnd;break b;case"compositionupdate":f=oe.compositionUpdate;break b}f=void 0}else se?qe(a,c)&&(f=oe.compositionEnd):"keydown"===a&&229===c.keyCode&&(f=oe.compositionStart);return f?(me&&"ko"!==c.locale&&(se||f!==oe.compositionStart?f===oe.compositionEnd&&se&&(e=ae()):(Zd="value"in(Yd=d)?Yd.value:Yd.textContent,se=!0)),f=ge.getPooled(f,b,c,d),e?f.data=e:null!==(e=re(c))&&(f.data=e),Xd(f),e=f):e=null,(a=le?function(a,b){switch(a){case"compositionend":return re(b);case"keypress":return 32!==b.which?null:(pe=!0,ne);case"textInput":return(a=b.data)===ne&&pe?null:a;default:return null}}(a,c):function(a,b){if(se)return"compositionend"===a||!je&&qe(a,b)?(a=ae(),$d=Zd=Yd=null,se=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case"compositionend":return me&&"ko"!==b.locale?null:b.data;default:return null}}(a,c))?((b=he.getPooled(oe.beforeInput,b,c,d)).data=a,Xd(b)):b=null,null===e?b:null===b?e:[e,b]}},we={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xe(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return"input"===b?!!we[a.type]:"textarea"===b}var ye={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function ze(a,b,c){return(a=G.getPooled(ye.change,a,b,c)).type="change",Da(c),Xd(a),a}var Ae=null,Be=null;function Ce(a){mc(a)}function De(a){if(yb(Pd(a)))return a}function Ee(a,b){if("change"===a)return b}var Fe=!1;function Ge(){Ae&&(Ae.detachEvent("onpropertychange",He),Be=Ae=null)}function He(a){if("value"===a.propertyName&&De(Be))if(a=ze(Be,a,nc(a)),Ja)mc(a);else{Ja=!0;try{Fa(Ce,a)}finally{Ja=!1,La()}}}function Ie(a,b,c){"focus"===a?(Ge(),Be=c,(Ae=b).attachEvent("onpropertychange",He)):"blur"===a&&Ge()}function Je(a){if("selectionchange"===a||"keyup"===a||"keydown"===a)return De(Be)}function Ke(a,b){if("click"===a)return De(b)}function Le(a,b){if("input"===a||"change"===a)return De(b)}ya&&(Fe=oc("input")&&(!document.documentMode||9<document.documentMode));var Me={eventTypes:ye,_isInputEventSupported:Fe,extractEvents:function(a,b,c,d){var e=b?Pd(b):window,f=e.nodeName&&e.nodeName.toLowerCase();if("select"===f||"input"===f&&"file"===e.type)var g=Ee;else if(xe(e))if(Fe)g=Le;else{g=Je;var h=Ie}else(f=e.nodeName)&&"input"===f.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)&&(g=Ke);if(g&&(g=g(a,b)))return ze(g,c,d);h&&h(a,e,b),"blur"===a&&(a=e._wrapperState)&&a.controlled&&"number"===e.type&&Db(e,"number",e.value)}},Ne=G.extend({view:null,detail:null}),Oe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pe(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):!!(a=Oe[a])&&!!b[a]}function Qe(){return Pe}var Re=0,Se=0,Te=!1,Ue=!1,Ve=Ne.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Qe,button:null,buttons:null,relatedTarget:function(a){return a.relatedTarget||(a.fromElement===a.srcElement?a.toElement:a.fromElement)},movementX:function(a){if("movementX"in a)return a.movementX;var b=Re;return Re=a.screenX,Te?"mousemove"===a.type?a.screenX-b:0:(Te=!0,0)},movementY:function(a){if("movementY"in a)return a.movementY;var b=Se;return Se=a.screenY,Ue?"mousemove"===a.type?a.screenY-b:0:(Ue=!0,0)}}),We=Ve.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Xe={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Ye={eventTypes:Xe,extractEvents:function(a,b,c,d,e){var f="mouseover"===a||"pointerover"===a,g="mouseout"===a||"pointerout"===a;if(f&&0==(32&e)&&(c.relatedTarget||c.fromElement)||!g&&!f)return null;(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,g)?(g=b,null!==(b=(b=c.relatedTarget||c.toElement)?tc(b):null)&&(b!==dc(b)||5!==b.tag&&6!==b.tag)&&(b=null)):g=null;if(g===b)return null;if("mouseout"===a||"mouseover"===a)var k=Ve,l=Xe.mouseLeave,m=Xe.mouseEnter,p="mouse";else"pointerout"!==a&&"pointerover"!==a||(k=We,l=Xe.pointerLeave,m=Xe.pointerEnter,p="pointer");if(a=null==g?f:Pd(g),f=null==b?f:Pd(b),(l=k.getPooled(l,g,c,d)).type=p+"leave",l.target=a,l.relatedTarget=f,(c=k.getPooled(m,b,c,d)).type=p+"enter",c.target=f,c.relatedTarget=a,p=b,(d=g)&&p)a:{for(m=p,g=0,a=k=d;a;a=Rd(a))g++;for(a=0,b=m;b;b=Rd(b))a++;for(;0<g-a;)k=Rd(k),g--;for(;0<a-g;)m=Rd(m),a--;for(;g--;){if(k===m||k===m.alternate)break a;k=Rd(k),m=Rd(m)}k=null}else k=null;for(m=k,k=[];d&&d!==m&&(null===(g=d.alternate)||g!==m);)k.push(d),d=Rd(d);for(d=[];p&&p!==m&&(null===(g=p.alternate)||g!==m);)d.push(p),p=Rd(p);for(p=0;p<k.length;p++)Vd(k[p],"bubbled",l);for(p=d.length;0<p--;)Vd(d[p],"captured",c);return 0==(64&e)?[l]:[l,c]}};var $e="function"==typeof Object.is?Object.is:function(a,b){return a===b&&(0!==a||1/a==1/b)||a!=a&&b!=b},af=Object.prototype.hasOwnProperty;function bf(a,b){if($e(a,b))return!0;if("object"!=typeof a||null===a||"object"!=typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++)if(!af.call(b,c[d])||!$e(a[c[d]],b[c[d]]))return!1;return!0}var cf=ya&&"documentMode"in document&&11>=document.documentMode,df={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},ef=null,ff=null,gf=null,hf=!1;function jf(a,b){var c=b.window===b?b.document:9===b.nodeType?b:b.ownerDocument;return hf||null==ef||ef!==td(c)?null:("selectionStart"in(c=ef)&&yd(c)?c={start:c.selectionStart,end:c.selectionEnd}:c={anchorNode:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset},gf&&bf(gf,c)?null:(gf=c,(a=G.getPooled(df.select,ff,a,b)).type="select",a.target=ef,Xd(a),a))}var kf={eventTypes:df,extractEvents:function(a,b,c,d,e,f){if(!(f=!(e=f||(d.window===d?d.document:9===d.nodeType?d:d.ownerDocument)))){a:{e=cc(e),f=wa.onSelect;for(var g=0;g<f.length;g++)if(!e.has(f[g])){e=!1;break a}e=!0}f=!e}if(f)return null;switch(e=b?Pd(b):window,a){case"focus":(xe(e)||"true"===e.contentEditable)&&(ef=e,ff=b,gf=null);break;case"blur":gf=ff=ef=null;break;case"mousedown":hf=!0;break;case"contextmenu":case"mouseup":case"dragend":return hf=!1,jf(c,d);case"selectionchange":if(cf)break;case"keydown":case"keyup":return jf(c,d)}return null}},lf=G.extend({animationName:null,elapsedTime:null,pseudoElement:null}),mf=G.extend({clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),nf=Ne.extend({relatedTarget:null});function of(a){var b=a.keyCode;return"charCode"in a?0===(a=a.charCode)&&13===b&&(a=13):a=b,10===a&&(a=13),32<=a||13===a?a:0}var pf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rf=Ne.extend({key:function(a){if(a.key){var b=pf[a.key]||a.key;if("Unidentified"!==b)return b}return"keypress"===a.type?13===(a=of(a))?"Enter":String.fromCharCode(a):"keydown"===a.type||"keyup"===a.type?qf[a.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Qe,charCode:function(a){return"keypress"===a.type?of(a):0},keyCode:function(a){return"keydown"===a.type||"keyup"===a.type?a.keyCode:0},which:function(a){return"keypress"===a.type?of(a):"keydown"===a.type||"keyup"===a.type?a.keyCode:0}}),sf=Ve.extend({dataTransfer:null}),tf=Ne.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Qe}),uf=G.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),vf=Ve.extend({deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:null,deltaMode:null}),wf={eventTypes:Wc,extractEvents:function(a,b,c,d){var e=Yc.get(a);if(!e)return null;switch(a){case"keypress":if(0===of(c))return null;case"keydown":case"keyup":a=rf;break;case"blur":case"focus":a=nf;break;case"click":if(2===c.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":a=Ve;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":a=sf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":a=tf;break;case Xb:case Yb:case Zb:a=lf;break;case $b:a=uf;break;case"scroll":a=Ne;break;case"wheel":a=vf;break;case"copy":case"cut":case"paste":a=mf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":a=We;break;default:a=G}return Xd(b=a.getPooled(e,b,c,d)),b}};if(pa)throw Error(u(101));pa=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),ra(),la=Qd,ma=Nc,na=Pd,xa({SimpleEventPlugin:wf,EnterLeaveEventPlugin:Ye,ChangeEventPlugin:Me,SelectEventPlugin:kf,BeforeInputEventPlugin:ve});var yf=[],zf=-1;function H(a){0>zf||(a.current=yf[zf],yf[zf]=null,zf--)}function I(a,b){zf++,yf[zf]=a.current,a.current=b}var Af={},J={current:Af},K={current:!1},Bf=Af;function Cf(a,b){var c=a.type.contextTypes;if(!c)return Af;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var f,e={};for(f in c)e[f]=b[f];return d&&((a=a.stateNode).__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e),e}function L(a){return null!=(a=a.childContextTypes)}function Df(){H(K),H(J)}function Ef(a,b,c){if(J.current!==Af)throw Error(u(168));I(J,b),I(K,c)}function Ff(a,b,c){var d=a.stateNode;if(a=b.childContextTypes,"function"!=typeof d.getChildContext)return c;for(var e in d=d.getChildContext())if(!(e in a))throw Error(u(108,pb(b)||"Unknown",e));return n({},c,{},d)}function Gf(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Af,Bf=J.current,I(J,a),I(K,K.current),!0}function Hf(a,b,c){var d=a.stateNode;if(!d)throw Error(u(169));c?(a=Ff(a,b,Bf),d.__reactInternalMemoizedMergedChildContext=a,H(K),H(J),I(J,a)):H(K),I(K,c)}var If=r.unstable_runWithPriority,Jf=r.unstable_scheduleCallback,Kf=r.unstable_cancelCallback,Lf=r.unstable_requestPaint,Mf=r.unstable_now,Nf=r.unstable_getCurrentPriorityLevel,Of=r.unstable_ImmediatePriority,Pf=r.unstable_UserBlockingPriority,Qf=r.unstable_NormalPriority,Rf=r.unstable_LowPriority,Sf=r.unstable_IdlePriority,Tf={},Uf=r.unstable_shouldYield,Vf=void 0!==Lf?Lf:function(){},Wf=null,Xf=null,Yf=!1,Zf=Mf(),$f=1e4>Zf?Mf:function(){return Mf()-Zf};function ag(){switch(Nf()){case Of:return 99;case Pf:return 98;case Qf:return 97;case Rf:return 96;case Sf:return 95;default:throw Error(u(332))}}function bg(a){switch(a){case 99:return Of;case 98:return Pf;case 97:return Qf;case 96:return Rf;case 95:return Sf;default:throw Error(u(332))}}function cg(a,b){return a=bg(a),If(a,b)}function dg(a,b,c){return a=bg(a),Jf(a,b,c)}function eg(a){return null===Wf?(Wf=[a],Xf=Jf(Of,fg)):Wf.push(a),Tf}function gg(){if(null!==Xf){var a=Xf;Xf=null,Kf(a)}fg()}function fg(){if(!Yf&&null!==Wf){Yf=!0;var a=0;try{var b=Wf;cg(99,(function(){for(;a<b.length;a++){var c=b[a];do{c=c(!0)}while(null!==c)}})),Wf=null}catch(c){throw null!==Wf&&(Wf=Wf.slice(a+1)),Jf(Of,gg),c}finally{Yf=!1}}}function hg(a,b,c){return 1073741821-(1+((1073741821-a+b/10)/(c/=10)|0))*c}function ig(a,b){if(a&&a.defaultProps)for(var c in b=n({},b),a=a.defaultProps)void 0===b[c]&&(b[c]=a[c]);return b}var jg={current:null},kg=null,lg=null,mg=null;function ng(){mg=lg=kg=null}function og(a){var b=jg.current;H(jg),a.type._context._currentValue=b}function pg(a,b){for(;null!==a;){var c=a.alternate;if(a.childExpirationTime<b)a.childExpirationTime=b,null!==c&&c.childExpirationTime<b&&(c.childExpirationTime=b);else{if(!(null!==c&&c.childExpirationTime<b))break;c.childExpirationTime=b}a=a.return}}function qg(a,b){kg=a,mg=lg=null,null!==(a=a.dependencies)&&null!==a.firstContext&&(a.expirationTime>=b&&(rg=!0),a.firstContext=null)}function sg(a,b){if(mg!==a&&!1!==b&&0!==b)if("number"==typeof b&&1073741823!==b||(mg=a,b=1073741823),b={context:a,observedBits:b,next:null},null===lg){if(null===kg)throw Error(u(308));lg=b,kg.dependencies={expirationTime:0,firstContext:b,responders:null}}else lg=lg.next=b;return a._currentValue}var tg=!1;function ug(a){a.updateQueue={baseState:a.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function vg(a,b){a=a.updateQueue,b.updateQueue===a&&(b.updateQueue={baseState:a.baseState,baseQueue:a.baseQueue,shared:a.shared,effects:a.effects})}function wg(a,b){return(a={expirationTime:a,suspenseConfig:b,tag:0,payload:null,callback:null,next:null}).next=a}function xg(a,b){if(null!==(a=a.updateQueue)){var c=(a=a.shared).pending;null===c?b.next=b:(b.next=c.next,c.next=b),a.pending=b}}function yg(a,b){var c=a.alternate;null!==c&&vg(c,a),null===(c=(a=a.updateQueue).baseQueue)?(a.baseQueue=b.next=b,b.next=b):(b.next=c.next,c.next=b)}function zg(a,b,c,d){var e=a.updateQueue;tg=!1;var f=e.baseQueue,g=e.shared.pending;if(null!==g){if(null!==f){var h=f.next;f.next=g.next,g.next=h}f=g,e.shared.pending=null,null!==(h=a.alternate)&&(null!==(h=h.updateQueue)&&(h.baseQueue=g))}if(null!==f){h=f.next;var k=e.baseState,l=0,m=null,p=null,x=null;if(null!==h)for(var z=h;;){if((g=z.expirationTime)<d){var ca={expirationTime:z.expirationTime,suspenseConfig:z.suspenseConfig,tag:z.tag,payload:z.payload,callback:z.callback,next:null};null===x?(p=x=ca,m=k):x=x.next=ca,g>l&&(l=g)}else{null!==x&&(x=x.next={expirationTime:1073741823,suspenseConfig:z.suspenseConfig,tag:z.tag,payload:z.payload,callback:z.callback,next:null}),Ag(g,z.suspenseConfig);a:{var D=a,t=z;switch(g=b,ca=c,t.tag){case 1:if("function"==typeof(D=t.payload)){k=D.call(ca,k,g);break a}k=D;break a;case 3:D.effectTag=-4097&D.effectTag|64;case 0:if(null==(g="function"==typeof(D=t.payload)?D.call(ca,k,g):D))break a;k=n({},k,g);break a;case 2:tg=!0}}null!==z.callback&&(a.effectTag|=32,null===(g=e.effects)?e.effects=[z]:g.push(z))}if(null===(z=z.next)||z===h){if(null===(g=e.shared.pending))break;z=f.next=g.next,g.next=h,e.baseQueue=f=g,e.shared.pending=null}}null===x?m=k:x.next=p,e.baseState=m,e.baseQueue=x,Bg(l),a.expirationTime=l,a.memoizedState=k}}function Cg(a,b,c){if(a=b.effects,b.effects=null,null!==a)for(b=0;b<a.length;b++){var d=a[b],e=d.callback;if(null!==e){if(d.callback=null,d=e,e=c,"function"!=typeof d)throw Error(u(191,d));d.call(e)}}}var Dg=Wa.ReactCurrentBatchConfig,Eg=(new aa.Component).refs;function Fg(a,b,c,d){c=null==(c=c(d,b=a.memoizedState))?b:n({},b,c),a.memoizedState=c,0===a.expirationTime&&(a.updateQueue.baseState=c)}var Jg={isMounted:function(a){return!!(a=a._reactInternalFiber)&&dc(a)===a},enqueueSetState:function(a,b,c){a=a._reactInternalFiber;var d=Gg(),e=Dg.suspense;(e=wg(d=Hg(d,a,e),e)).payload=b,null!=c&&(e.callback=c),xg(a,e),Ig(a,d)},enqueueReplaceState:function(a,b,c){a=a._reactInternalFiber;var d=Gg(),e=Dg.suspense;(e=wg(d=Hg(d,a,e),e)).tag=1,e.payload=b,null!=c&&(e.callback=c),xg(a,e),Ig(a,d)},enqueueForceUpdate:function(a,b){a=a._reactInternalFiber;var c=Gg(),d=Dg.suspense;(d=wg(c=Hg(c,a,d),d)).tag=2,null!=b&&(d.callback=b),xg(a,d),Ig(a,c)}};function Kg(a,b,c,d,e,f,g){return"function"==typeof(a=a.stateNode).shouldComponentUpdate?a.shouldComponentUpdate(d,f,g):!b.prototype||!b.prototype.isPureReactComponent||(!bf(c,d)||!bf(e,f))}function Lg(a,b,c){var d=!1,e=Af,f=b.contextType;return"object"==typeof f&&null!==f?f=sg(f):(e=L(b)?Bf:J.current,f=(d=null!=(d=b.contextTypes))?Cf(a,e):Af),b=new b(c,f),a.memoizedState=null!==b.state&&void 0!==b.state?b.state:null,b.updater=Jg,a.stateNode=b,b._reactInternalFiber=a,d&&((a=a.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,a.__reactInternalMemoizedMaskedChildContext=f),b}function Mg(a,b,c,d){a=b.state,"function"==typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d),"function"==typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d),b.state!==a&&Jg.enqueueReplaceState(b,b.state,null)}function Ng(a,b,c,d){var e=a.stateNode;e.props=c,e.state=a.memoizedState,e.refs=Eg,ug(a);var f=b.contextType;"object"==typeof f&&null!==f?e.context=sg(f):(f=L(b)?Bf:J.current,e.context=Cf(a,f)),zg(a,c,e,d),e.state=a.memoizedState,"function"==typeof(f=b.getDerivedStateFromProps)&&(Fg(a,b,f,c),e.state=a.memoizedState),"function"==typeof b.getDerivedStateFromProps||"function"==typeof e.getSnapshotBeforeUpdate||"function"!=typeof e.UNSAFE_componentWillMount&&"function"!=typeof e.componentWillMount||(b=e.state,"function"==typeof e.componentWillMount&&e.componentWillMount(),"function"==typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),b!==e.state&&Jg.enqueueReplaceState(e,e.state,null),zg(a,c,e,d),e.state=a.memoizedState),"function"==typeof e.componentDidMount&&(a.effectTag|=4)}var Og=Array.isArray;function Pg(a,b,c){if(null!==(a=c.ref)&&"function"!=typeof a&&"object"!=typeof a){if(c._owner){if(c=c._owner){if(1!==c.tag)throw Error(u(309));var d=c.stateNode}if(!d)throw Error(u(147,a));var e=""+a;return null!==b&&null!==b.ref&&"function"==typeof b.ref&&b.ref._stringRef===e?b.ref:((b=function(a){var b=d.refs;b===Eg&&(b=d.refs={}),null===a?delete b[e]:b[e]=a})._stringRef=e,b)}if("string"!=typeof a)throw Error(u(284));if(!c._owner)throw Error(u(290,a))}return a}function Qg(a,b){if("textarea"!==a.type)throw Error(u(31,"[object Object]"===Object.prototype.toString.call(b)?"object with keys {"+Object.keys(b).join(", ")+"}":b,""))}function Rg(a){function b(b,c){if(a){var d=b.lastEffect;null!==d?(d.nextEffect=c,b.lastEffect=c):b.firstEffect=b.lastEffect=c,c.nextEffect=null,c.effectTag=8}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,b),b=b.sibling;return a}function e(a,b){return(a=Sg(a,b)).index=0,a.sibling=null,a}function f(b,c,d){return b.index=d,a?null!==(d=b.alternate)?(d=d.index)<c?(b.effectTag=2,c):d:(b.effectTag=2,c):c}function g(b){return a&&null===b.alternate&&(b.effectTag=2),b}function h(a,b,c,d){return null===b||6!==b.tag?((b=Tg(c,a.mode,d)).return=a,b):((b=e(b,c)).return=a,b)}function k(a,b,c,d){return null!==b&&b.elementType===c.type?((d=e(b,c.props)).ref=Pg(a,b,c),d.return=a,d):((d=Ug(c.type,c.key,c.props,null,a.mode,d)).ref=Pg(a,b,c),d.return=a,d)}function l(a,b,c,d){return null===b||4!==b.tag||b.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation?((b=Vg(c,a.mode,d)).return=a,b):((b=e(b,c.children||[])).return=a,b)}function m(a,b,c,d,f){return null===b||7!==b.tag?((b=Wg(c,a.mode,d,f)).return=a,b):((b=e(b,c)).return=a,b)}function p(a,b,c){if("string"==typeof b||"number"==typeof b)return(b=Tg(""+b,a.mode,c)).return=a,b;if("object"==typeof b&&null!==b){switch(b.$$typeof){case Za:return(c=Ug(b.type,b.key,b.props,null,a.mode,c)).ref=Pg(a,null,b),c.return=a,c;case $a:return(b=Vg(b,a.mode,c)).return=a,b}if(Og(b)||nb(b))return(b=Wg(b,a.mode,c,null)).return=a,b;Qg(a,b)}return null}function x(a,b,c,d){var e=null!==b?b.key:null;if("string"==typeof c||"number"==typeof c)return null!==e?null:h(a,b,""+c,d);if("object"==typeof c&&null!==c){switch(c.$$typeof){case Za:return c.key===e?c.type===ab?m(a,b,c.props.children,d,e):k(a,b,c,d):null;case $a:return c.key===e?l(a,b,c,d):null}if(Og(c)||nb(c))return null!==e?null:m(a,b,c,d,null);Qg(a,c)}return null}function z(a,b,c,d,e){if("string"==typeof d||"number"==typeof d)return h(b,a=a.get(c)||null,""+d,e);if("object"==typeof d&&null!==d){switch(d.$$typeof){case Za:return a=a.get(null===d.key?c:d.key)||null,d.type===ab?m(b,a,d.props.children,e,d.key):k(b,a,d,e);case $a:return l(b,a=a.get(null===d.key?c:d.key)||null,d,e)}if(Og(d)||nb(d))return m(b,a=a.get(c)||null,d,e,null);Qg(b,d)}return null}function ca(e,g,h,k){for(var l=null,t=null,m=g,y=g=0,A=null;null!==m&&y<h.length;y++){m.index>y?(A=m,m=null):A=m.sibling;var q=x(e,m,h[y],k);if(null===q){null===m&&(m=A);break}a&&m&&null===q.alternate&&b(e,m),g=f(q,g,y),null===t?l=q:t.sibling=q,t=q,m=A}if(y===h.length)return c(e,m),l;if(null===m){for(;y<h.length;y++)null!==(m=p(e,h[y],k))&&(g=f(m,g,y),null===t?l=m:t.sibling=m,t=m);return l}for(m=d(e,m);y<h.length;y++)null!==(A=z(m,e,y,h[y],k))&&(a&&null!==A.alternate&&m.delete(null===A.key?y:A.key),g=f(A,g,y),null===t?l=A:t.sibling=A,t=A);return a&&m.forEach((function(a){return b(e,a)})),l}function D(e,g,h,l){var k=nb(h);if("function"!=typeof k)throw Error(u(150));if(null==(h=k.call(h)))throw Error(u(151));for(var m=k=null,t=g,y=g=0,A=null,q=h.next();null!==t&&!q.done;y++,q=h.next()){t.index>y?(A=t,t=null):A=t.sibling;var D=x(e,t,q.value,l);if(null===D){null===t&&(t=A);break}a&&t&&null===D.alternate&&b(e,t),g=f(D,g,y),null===m?k=D:m.sibling=D,m=D,t=A}if(q.done)return c(e,t),k;if(null===t){for(;!q.done;y++,q=h.next())null!==(q=p(e,q.value,l))&&(g=f(q,g,y),null===m?k=q:m.sibling=q,m=q);return k}for(t=d(e,t);!q.done;y++,q=h.next())null!==(q=z(t,e,y,q.value,l))&&(a&&null!==q.alternate&&t.delete(null===q.key?y:q.key),g=f(q,g,y),null===m?k=q:m.sibling=q,m=q);return a&&t.forEach((function(a){return b(e,a)})),k}return function(a,d,f,h){var k="object"==typeof f&&null!==f&&f.type===ab&&null===f.key;k&&(f=f.props.children);var l="object"==typeof f&&null!==f;if(l)switch(f.$$typeof){case Za:a:{for(l=f.key,k=d;null!==k;){if(k.key===l){switch(k.tag){case 7:if(f.type===ab){c(a,k.sibling),(d=e(k,f.props.children)).return=a,a=d;break a}break;default:if(k.elementType===f.type){c(a,k.sibling),(d=e(k,f.props)).ref=Pg(a,k,f),d.return=a,a=d;break a}}c(a,k);break}b(a,k),k=k.sibling}f.type===ab?((d=Wg(f.props.children,a.mode,h,f.key)).return=a,a=d):((h=Ug(f.type,f.key,f.props,null,a.mode,h)).ref=Pg(a,d,f),h.return=a,a=h)}return g(a);case $a:a:{for(k=f.key;null!==d;){if(d.key===k){if(4===d.tag&&d.stateNode.containerInfo===f.containerInfo&&d.stateNode.implementation===f.implementation){c(a,d.sibling),(d=e(d,f.children||[])).return=a,a=d;break a}c(a,d);break}b(a,d),d=d.sibling}(d=Vg(f,a.mode,h)).return=a,a=d}return g(a)}if("string"==typeof f||"number"==typeof f)return f=""+f,null!==d&&6===d.tag?(c(a,d.sibling),(d=e(d,f)).return=a,a=d):(c(a,d),(d=Tg(f,a.mode,h)).return=a,a=d),g(a);if(Og(f))return ca(a,d,f,h);if(nb(f))return D(a,d,f,h);if(l&&Qg(a,f),void 0===f&&!k)switch(a.tag){case 1:case 0:throw a=a.type,Error(u(152,a.displayName||a.name||"Component"))}return c(a,d)}}var Xg=Rg(!0),Yg=Rg(!1),Zg={},$g={current:Zg},ah={current:Zg},bh={current:Zg};function ch(a){if(a===Zg)throw Error(u(174));return a}function dh(a,b){switch(I(bh,b),I(ah,a),I($g,Zg),a=b.nodeType){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:Ob(null,"");break;default:b=Ob(b=(a=8===a?b.parentNode:b).namespaceURI||null,a=a.tagName)}H($g),I($g,b)}function eh(){H($g),H(ah),H(bh)}function fh(a){ch(bh.current);var b=ch($g.current),c=Ob(b,a.type);b!==c&&(I(ah,a),I($g,c))}function gh(a){ah.current===a&&(H($g),H(ah))}var M={current:0};function hh(a){for(var b=a;null!==b;){if(13===b.tag){var c=b.memoizedState;if(null!==c&&(null===(c=c.dehydrated)||"$?"===c.data||"$!"===c.data))return b}else if(19===b.tag&&void 0!==b.memoizedProps.revealOrder){if(0!=(64&b.effectTag))return b}else if(null!==b.child){b.child.return=b,b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return,b=b.sibling}return null}function ih(a,b){return{responder:a,props:b}}var jh=Wa.ReactCurrentDispatcher,kh=Wa.ReactCurrentBatchConfig,lh=0,N=null,O=null,P=null,mh=!1;function Q(){throw Error(u(321))}function nh(a,b){if(null===b)return!1;for(var c=0;c<b.length&&c<a.length;c++)if(!$e(a[c],b[c]))return!1;return!0}function oh(a,b,c,d,e,f){if(lh=f,N=b,b.memoizedState=null,b.updateQueue=null,b.expirationTime=0,jh.current=null===a||null===a.memoizedState?ph:qh,a=c(d,e),b.expirationTime===lh){f=0;do{if(b.expirationTime=0,!(25>f))throw Error(u(301));f+=1,P=O=null,b.updateQueue=null,jh.current=rh,a=c(d,e)}while(b.expirationTime===lh)}if(jh.current=sh,b=null!==O&&null!==O.next,lh=0,P=O=N=null,mh=!1,b)throw Error(u(300));return a}function th(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===P?N.memoizedState=P=a:P=P.next=a,P}function uh(){if(null===O){var a=N.alternate;a=null!==a?a.memoizedState:null}else a=O.next;var b=null===P?N.memoizedState:P.next;if(null!==b)P=b,O=a;else{if(null===a)throw Error(u(310));a={memoizedState:(O=a).memoizedState,baseState:O.baseState,baseQueue:O.baseQueue,queue:O.queue,next:null},null===P?N.memoizedState=P=a:P=P.next=a}return P}function vh(a,b){return"function"==typeof b?b(a):b}function wh(a){var b=uh(),c=b.queue;if(null===c)throw Error(u(311));c.lastRenderedReducer=a;var d=O,e=d.baseQueue,f=c.pending;if(null!==f){if(null!==e){var g=e.next;e.next=f.next,f.next=g}d.baseQueue=e=f,c.pending=null}if(null!==e){e=e.next,d=d.baseState;var h=g=f=null,k=e;do{var l=k.expirationTime;if(l<lh){var m={expirationTime:k.expirationTime,suspenseConfig:k.suspenseConfig,action:k.action,eagerReducer:k.eagerReducer,eagerState:k.eagerState,next:null};null===h?(g=h=m,f=d):h=h.next=m,l>N.expirationTime&&(N.expirationTime=l,Bg(l))}else null!==h&&(h=h.next={expirationTime:1073741823,suspenseConfig:k.suspenseConfig,action:k.action,eagerReducer:k.eagerReducer,eagerState:k.eagerState,next:null}),Ag(l,k.suspenseConfig),d=k.eagerReducer===a?k.eagerState:a(d,k.action);k=k.next}while(null!==k&&k!==e);null===h?f=d:h.next=g,$e(d,b.memoizedState)||(rg=!0),b.memoizedState=d,b.baseState=f,b.baseQueue=h,c.lastRenderedState=d}return[b.memoizedState,c.dispatch]}function xh(a){var b=uh(),c=b.queue;if(null===c)throw Error(u(311));c.lastRenderedReducer=a;var d=c.dispatch,e=c.pending,f=b.memoizedState;if(null!==e){c.pending=null;var g=e=e.next;do{f=a(f,g.action),g=g.next}while(g!==e);$e(f,b.memoizedState)||(rg=!0),b.memoizedState=f,null===b.baseQueue&&(b.baseState=f),c.lastRenderedState=f}return[f,d]}function yh(a){var b=th();return"function"==typeof a&&(a=a()),b.memoizedState=b.baseState=a,a=(a=b.queue={pending:null,dispatch:null,lastRenderedReducer:vh,lastRenderedState:a}).dispatch=zh.bind(null,N,a),[b.memoizedState,a]}function Ah(a,b,c,d){return a={tag:a,create:b,destroy:c,deps:d,next:null},null===(b=N.updateQueue)?(b={lastEffect:null},N.updateQueue=b,b.lastEffect=a.next=a):null===(c=b.lastEffect)?b.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,b.lastEffect=a),a}function Bh(){return uh().memoizedState}function Ch(a,b,c,d){var e=th();N.effectTag|=a,e.memoizedState=Ah(1|b,c,void 0,void 0===d?null:d)}function Dh(a,b,c,d){var e=uh();d=void 0===d?null:d;var f=void 0;if(null!==O){var g=O.memoizedState;if(f=g.destroy,null!==d&&nh(d,g.deps))return void Ah(b,c,f,d)}N.effectTag|=a,e.memoizedState=Ah(1|b,c,f,d)}function Eh(a,b){return Ch(516,4,a,b)}function Fh(a,b){return Dh(516,4,a,b)}function Gh(a,b){return Dh(4,2,a,b)}function Hh(a,b){return"function"==typeof b?(a=a(),b(a),function(){b(null)}):null!=b?(a=a(),b.current=a,function(){b.current=null}):void 0}function Ih(a,b,c){return c=null!=c?c.concat([a]):null,Dh(4,2,Hh.bind(null,b,a),c)}function Jh(){}function Kh(a,b){return th().memoizedState=[a,void 0===b?null:b],a}function Lh(a,b){var c=uh();b=void 0===b?null:b;var d=c.memoizedState;return null!==d&&null!==b&&nh(b,d[1])?d[0]:(c.memoizedState=[a,b],a)}function Mh(a,b){var c=uh();b=void 0===b?null:b;var d=c.memoizedState;return null!==d&&null!==b&&nh(b,d[1])?d[0]:(a=a(),c.memoizedState=[a,b],a)}function Nh(a,b,c){var d=ag();cg(98>d?98:d,(function(){a(!0)})),cg(97<d?97:d,(function(){var d=kh.suspense;kh.suspense=void 0===b?null:b;try{a(!1),c()}finally{kh.suspense=d}}))}function zh(a,b,c){var d=Gg(),e=Dg.suspense;e={expirationTime:d=Hg(d,a,e),suspenseConfig:e,action:c,eagerReducer:null,eagerState:null,next:null};var f=b.pending;if(null===f?e.next=e:(e.next=f.next,f.next=e),b.pending=e,f=a.alternate,a===N||null!==f&&f===N)mh=!0,e.expirationTime=lh,N.expirationTime=lh;else{if(0===a.expirationTime&&(null===f||0===f.expirationTime)&&null!==(f=b.lastRenderedReducer))try{var g=b.lastRenderedState,h=f(g,c);if(e.eagerReducer=f,e.eagerState=h,$e(h,g))return}catch(k){}Ig(a,d)}}var sh={readContext:sg,useCallback:Q,useContext:Q,useEffect:Q,useImperativeHandle:Q,useLayoutEffect:Q,useMemo:Q,useReducer:Q,useRef:Q,useState:Q,useDebugValue:Q,useResponder:Q,useDeferredValue:Q,useTransition:Q},ph={readContext:sg,useCallback:Kh,useContext:sg,useEffect:Eh,useImperativeHandle:function(a,b,c){return c=null!=c?c.concat([a]):null,Ch(4,2,Hh.bind(null,b,a),c)},useLayoutEffect:function(a,b){return Ch(4,2,a,b)},useMemo:function(a,b){var c=th();return b=void 0===b?null:b,a=a(),c.memoizedState=[a,b],a},useReducer:function(a,b,c){var d=th();return b=void 0!==c?c(b):b,d.memoizedState=d.baseState=b,a=(a=d.queue={pending:null,dispatch:null,lastRenderedReducer:a,lastRenderedState:b}).dispatch=zh.bind(null,N,a),[d.memoizedState,a]},useRef:function(a){return a={current:a},th().memoizedState=a},useState:yh,useDebugValue:Jh,useResponder:ih,useDeferredValue:function(a,b){var c=yh(a),d=c[0],e=c[1];return Eh((function(){var c=kh.suspense;kh.suspense=void 0===b?null:b;try{e(a)}finally{kh.suspense=c}}),[a,b]),d},useTransition:function(a){var b=yh(!1),c=b[0];return b=b[1],[Kh(Nh.bind(null,b,a),[b,a]),c]}},qh={readContext:sg,useCallback:Lh,useContext:sg,useEffect:Fh,useImperativeHandle:Ih,useLayoutEffect:Gh,useMemo:Mh,useReducer:wh,useRef:Bh,useState:function(){return wh(vh)},useDebugValue:Jh,useResponder:ih,useDeferredValue:function(a,b){var c=wh(vh),d=c[0],e=c[1];return Fh((function(){var c=kh.suspense;kh.suspense=void 0===b?null:b;try{e(a)}finally{kh.suspense=c}}),[a,b]),d},useTransition:function(a){var b=wh(vh),c=b[0];return b=b[1],[Lh(Nh.bind(null,b,a),[b,a]),c]}},rh={readContext:sg,useCallback:Lh,useContext:sg,useEffect:Fh,useImperativeHandle:Ih,useLayoutEffect:Gh,useMemo:Mh,useReducer:xh,useRef:Bh,useState:function(){return xh(vh)},useDebugValue:Jh,useResponder:ih,useDeferredValue:function(a,b){var c=xh(vh),d=c[0],e=c[1];return Fh((function(){var c=kh.suspense;kh.suspense=void 0===b?null:b;try{e(a)}finally{kh.suspense=c}}),[a,b]),d},useTransition:function(a){var b=xh(vh),c=b[0];return b=b[1],[Lh(Nh.bind(null,b,a),[b,a]),c]}},Oh=null,Ph=null,Qh=!1;function Rh(a,b){var c=Sh(5,null,null,0);c.elementType="DELETED",c.type="DELETED",c.stateNode=b,c.return=a,c.effectTag=8,null!==a.lastEffect?(a.lastEffect.nextEffect=c,a.lastEffect=c):a.firstEffect=a.lastEffect=c}function Th(a,b){switch(a.tag){case 5:var c=a.type;return null!==(b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b)&&(a.stateNode=b,!0);case 6:return null!==(b=""===a.pendingProps||3!==b.nodeType?null:b)&&(a.stateNode=b,!0);case 13:default:return!1}}function Uh(a){if(Qh){var b=Ph;if(b){var c=b;if(!Th(a,b)){if(!(b=Jd(c.nextSibling))||!Th(a,b))return a.effectTag=-1025&a.effectTag|2,Qh=!1,void(Oh=a);Rh(Oh,c)}Oh=a,Ph=Jd(b.firstChild)}else a.effectTag=-1025&a.effectTag|2,Qh=!1,Oh=a}}function Vh(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag&&13!==a.tag;)a=a.return;Oh=a}function Wh(a){if(a!==Oh)return!1;if(!Qh)return Vh(a),Qh=!0,!1;var b=a.type;if(5!==a.tag||"head"!==b&&"body"!==b&&!Gd(b,a.memoizedProps))for(b=Ph;b;)Rh(a,b),b=Jd(b.nextSibling);if(Vh(a),13===a.tag){if(!(a=null!==(a=a.memoizedState)?a.dehydrated:null))throw Error(u(317));a:{for(a=a.nextSibling,b=0;a;){if(8===a.nodeType){var c=a.data;if("/$"===c){if(0===b){Ph=Jd(a.nextSibling);break a}b--}else"$"!==c&&"$!"!==c&&"$?"!==c||b++}a=a.nextSibling}Ph=null}}else Ph=Oh?Jd(a.stateNode.nextSibling):null;return!0}function Xh(){Ph=Oh=null,Qh=!1}var Yh=Wa.ReactCurrentOwner,rg=!1;function R(a,b,c,d){b.child=null===a?Yg(b,null,c,d):Xg(b,a.child,c,d)}function Zh(a,b,c,d,e){c=c.render;var f=b.ref;return qg(b,e),d=oh(a,b,c,d,f,e),null===a||rg?(b.effectTag|=1,R(a,b,d,e),b.child):(b.updateQueue=a.updateQueue,b.effectTag&=-517,a.expirationTime<=e&&(a.expirationTime=0),$h(a,b,e))}function ai(a,b,c,d,e,f){if(null===a){var g=c.type;return"function"!=typeof g||bi(g)||void 0!==g.defaultProps||null!==c.compare||void 0!==c.defaultProps?((a=Ug(c.type,null,d,null,b.mode,f)).ref=b.ref,a.return=b,b.child=a):(b.tag=15,b.type=g,ci(a,b,g,d,e,f))}return g=a.child,e<f&&(e=g.memoizedProps,(c=null!==(c=c.compare)?c:bf)(e,d)&&a.ref===b.ref)?$h(a,b,f):(b.effectTag|=1,(a=Sg(g,d)).ref=b.ref,a.return=b,b.child=a)}function ci(a,b,c,d,e,f){return null!==a&&bf(a.memoizedProps,d)&&a.ref===b.ref&&(rg=!1,e<f)?(b.expirationTime=a.expirationTime,$h(a,b,f)):di(a,b,c,d,f)}function ei(a,b){var c=b.ref;(null===a&&null!==c||null!==a&&a.ref!==c)&&(b.effectTag|=128)}function di(a,b,c,d,e){var f=L(c)?Bf:J.current;return f=Cf(b,f),qg(b,e),c=oh(a,b,c,d,f,e),null===a||rg?(b.effectTag|=1,R(a,b,c,e),b.child):(b.updateQueue=a.updateQueue,b.effectTag&=-517,a.expirationTime<=e&&(a.expirationTime=0),$h(a,b,e))}function fi(a,b,c,d,e){if(L(c)){var f=!0;Gf(b)}else f=!1;if(qg(b,e),null===b.stateNode)null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),Lg(b,c,d),Ng(b,c,d,e),d=!0;else if(null===a){var g=b.stateNode,h=b.memoizedProps;g.props=h;var k=g.context,l=c.contextType;"object"==typeof l&&null!==l?l=sg(l):l=Cf(b,l=L(c)?Bf:J.current);var m=c.getDerivedStateFromProps,p="function"==typeof m||"function"==typeof g.getSnapshotBeforeUpdate;p||"function"!=typeof g.UNSAFE_componentWillReceiveProps&&"function"!=typeof g.componentWillReceiveProps||(h!==d||k!==l)&&Mg(b,g,d,l),tg=!1;var x=b.memoizedState;g.state=x,zg(b,d,g,e),k=b.memoizedState,h!==d||x!==k||K.current||tg?("function"==typeof m&&(Fg(b,c,m,d),k=b.memoizedState),(h=tg||Kg(b,c,h,d,x,k,l))?(p||"function"!=typeof g.UNSAFE_componentWillMount&&"function"!=typeof g.componentWillMount||("function"==typeof g.componentWillMount&&g.componentWillMount(),"function"==typeof g.UNSAFE_componentWillMount&&g.UNSAFE_componentWillMount()),"function"==typeof g.componentDidMount&&(b.effectTag|=4)):("function"==typeof g.componentDidMount&&(b.effectTag|=4),b.memoizedProps=d,b.memoizedState=k),g.props=d,g.state=k,g.context=l,d=h):("function"==typeof g.componentDidMount&&(b.effectTag|=4),d=!1)}else g=b.stateNode,vg(a,b),h=b.memoizedProps,g.props=b.type===b.elementType?h:ig(b.type,h),k=g.context,"object"==typeof(l=c.contextType)&&null!==l?l=sg(l):l=Cf(b,l=L(c)?Bf:J.current),(p="function"==typeof(m=c.getDerivedStateFromProps)||"function"==typeof g.getSnapshotBeforeUpdate)||"function"!=typeof g.UNSAFE_componentWillReceiveProps&&"function"!=typeof g.componentWillReceiveProps||(h!==d||k!==l)&&Mg(b,g,d,l),tg=!1,k=b.memoizedState,g.state=k,zg(b,d,g,e),x=b.memoizedState,h!==d||k!==x||K.current||tg?("function"==typeof m&&(Fg(b,c,m,d),x=b.memoizedState),(m=tg||Kg(b,c,h,d,k,x,l))?(p||"function"!=typeof g.UNSAFE_componentWillUpdate&&"function"!=typeof g.componentWillUpdate||("function"==typeof g.componentWillUpdate&&g.componentWillUpdate(d,x,l),"function"==typeof g.UNSAFE_componentWillUpdate&&g.UNSAFE_componentWillUpdate(d,x,l)),"function"==typeof g.componentDidUpdate&&(b.effectTag|=4),"function"==typeof g.getSnapshotBeforeUpdate&&(b.effectTag|=256)):("function"!=typeof g.componentDidUpdate||h===a.memoizedProps&&k===a.memoizedState||(b.effectTag|=4),"function"!=typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&k===a.memoizedState||(b.effectTag|=256),b.memoizedProps=d,b.memoizedState=x),g.props=d,g.state=x,g.context=l,d=m):("function"!=typeof g.componentDidUpdate||h===a.memoizedProps&&k===a.memoizedState||(b.effectTag|=4),"function"!=typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&k===a.memoizedState||(b.effectTag|=256),d=!1);return gi(a,b,c,d,f,e)}function gi(a,b,c,d,e,f){ei(a,b);var g=0!=(64&b.effectTag);if(!d&&!g)return e&&Hf(b,c,!1),$h(a,b,f);d=b.stateNode,Yh.current=b;var h=g&&"function"!=typeof c.getDerivedStateFromError?null:d.render();return b.effectTag|=1,null!==a&&g?(b.child=Xg(b,a.child,null,f),b.child=Xg(b,null,h,f)):R(a,b,h,f),b.memoizedState=d.state,e&&Hf(b,c,!0),b.child}function hi(a){var b=a.stateNode;b.pendingContext?Ef(0,b.pendingContext,b.pendingContext!==b.context):b.context&&Ef(0,b.context,!1),dh(a,b.containerInfo)}var ni,pi,qi,ii={dehydrated:null,retryTime:0};function ji(a,b,c){var h,d=b.mode,e=b.pendingProps,f=M.current,g=!1;if((h=0!=(64&b.effectTag))||(h=0!=(2&f)&&(null===a||null!==a.memoizedState)),h?(g=!0,b.effectTag&=-65):null!==a&&null===a.memoizedState||void 0===e.fallback||!0===e.unstable_avoidThisFallback||(f|=1),I(M,1&f),null===a){if(void 0!==e.fallback&&Uh(b),g){if(g=e.fallback,(e=Wg(null,d,0,null)).return=b,0==(2&b.mode))for(a=null!==b.memoizedState?b.child.child:b.child,e.child=a;null!==a;)a.return=e,a=a.sibling;return(c=Wg(g,d,c,null)).return=b,e.sibling=c,b.memoizedState=ii,b.child=e,c}return d=e.children,b.memoizedState=null,b.child=Yg(b,null,d,c)}if(null!==a.memoizedState){if(d=(a=a.child).sibling,g){if(e=e.fallback,(c=Sg(a,a.pendingProps)).return=b,0==(2&b.mode)&&(g=null!==b.memoizedState?b.child.child:b.child)!==a.child)for(c.child=g;null!==g;)g.return=c,g=g.sibling;return(d=Sg(d,e)).return=b,c.sibling=d,c.childExpirationTime=0,b.memoizedState=ii,b.child=c,d}return c=Xg(b,a.child,e.children,c),b.memoizedState=null,b.child=c}if(a=a.child,g){if(g=e.fallback,(e=Wg(null,d,0,null)).return=b,e.child=a,null!==a&&(a.return=e),0==(2&b.mode))for(a=null!==b.memoizedState?b.child.child:b.child,e.child=a;null!==a;)a.return=e,a=a.sibling;return(c=Wg(g,d,c,null)).return=b,e.sibling=c,c.effectTag|=2,e.childExpirationTime=0,b.memoizedState=ii,b.child=e,c}return b.memoizedState=null,b.child=Xg(b,a,e.children,c)}function ki(a,b){a.expirationTime<b&&(a.expirationTime=b);var c=a.alternate;null!==c&&c.expirationTime<b&&(c.expirationTime=b),pg(a.return,b)}function li(a,b,c,d,e,f){var g=a.memoizedState;null===g?a.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:d,tail:c,tailExpiration:0,tailMode:e,lastEffect:f}:(g.isBackwards=b,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=c,g.tailExpiration=0,g.tailMode=e,g.lastEffect=f)}function mi(a,b,c){var d=b.pendingProps,e=d.revealOrder,f=d.tail;if(R(a,b,d.children,c),0!=(2&(d=M.current)))d=1&d|2,b.effectTag|=64;else{if(null!==a&&0!=(64&a.effectTag))a:for(a=b.child;null!==a;){if(13===a.tag)null!==a.memoizedState&&ki(a,c);else if(19===a.tag)ki(a,c);else if(null!==a.child){a.child.return=a,a=a.child;continue}if(a===b)break a;for(;null===a.sibling;){if(null===a.return||a.return===b)break a;a=a.return}a.sibling.return=a.return,a=a.sibling}d&=1}if(I(M,d),0==(2&b.mode))b.memoizedState=null;else switch(e){case"forwards":for(c=b.child,e=null;null!==c;)null!==(a=c.alternate)&&null===hh(a)&&(e=c),c=c.sibling;null===(c=e)?(e=b.child,b.child=null):(e=c.sibling,c.sibling=null),li(b,!1,e,c,f,b.lastEffect);break;case"backwards":for(c=null,e=b.child,b.child=null;null!==e;){if(null!==(a=e.alternate)&&null===hh(a)){b.child=e;break}a=e.sibling,e.sibling=c,c=e,e=a}li(b,!0,c,null,f,b.lastEffect);break;case"together":li(b,!1,null,null,void 0,b.lastEffect);break;default:b.memoizedState=null}return b.child}function $h(a,b,c){null!==a&&(b.dependencies=a.dependencies);var d=b.expirationTime;if(0!==d&&Bg(d),b.childExpirationTime<c)return null;if(null!==a&&b.child!==a.child)throw Error(u(153));if(null!==b.child){for(c=Sg(a=b.child,a.pendingProps),b.child=c,c.return=b;null!==a.sibling;)a=a.sibling,(c=c.sibling=Sg(a,a.pendingProps)).return=b;c.sibling=null}return b.child}function ri(a,b){switch(a.tailMode){case"hidden":b=a.tail;for(var c=null;null!==b;)null!==b.alternate&&(c=b),b=b.sibling;null===c?a.tail=null:c.sibling=null;break;case"collapsed":c=a.tail;for(var d=null;null!==c;)null!==c.alternate&&(d=c),c=c.sibling;null===d?b||null===a.tail?a.tail=null:a.tail.sibling=null:d.sibling=null}}function si(a,b,c){var d=b.pendingProps;switch(b.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return L(b.type)&&Df(),null;case 3:return eh(),H(K),H(J),(c=b.stateNode).pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),null!==a&&null!==a.child||!Wh(b)||(b.effectTag|=4),null;case 5:gh(b),c=ch(bh.current);var e=b.type;if(null!==a&&null!=b.stateNode)pi(a,b,e,d,c),a.ref!==b.ref&&(b.effectTag|=128);else{if(!d){if(null===b.stateNode)throw Error(u(166));return null}if(a=ch($g.current),Wh(b)){d=b.stateNode,e=b.type;var f=b.memoizedProps;switch(d[Md]=b,d[Nd]=f,e){case"iframe":case"object":case"embed":F("load",d);break;case"video":case"audio":for(a=0;a<ac.length;a++)F(ac[a],d);break;case"source":F("error",d);break;case"img":case"image":case"link":F("error",d),F("load",d);break;case"form":F("reset",d),F("submit",d);break;case"details":F("toggle",d);break;case"input":Ab(d,f),F("invalid",d),rd(c,"onChange");break;case"select":d._wrapperState={wasMultiple:!!f.multiple},F("invalid",d),rd(c,"onChange");break;case"textarea":Jb(d,f),F("invalid",d),rd(c,"onChange")}for(var g in od(e,f),a=null,f)if(f.hasOwnProperty(g)){var h=f[g];"children"===g?"string"==typeof h?d.textContent!==h&&(a=["children",h]):"number"==typeof h&&d.textContent!==""+h&&(a=["children",""+h]):va.hasOwnProperty(g)&&null!=h&&rd(c,g)}switch(e){case"input":xb(d),Eb(d,f,!0);break;case"textarea":xb(d),Lb(d);break;case"select":case"option":break;default:"function"==typeof f.onClick&&(d.onclick=sd)}c=a,b.updateQueue=c,null!==c&&(b.effectTag|=4)}else{switch(g=9===c.nodeType?c:c.ownerDocument,a===qd&&(a=Nb(e)),a===qd?"script"===e?((a=g.createElement("div")).innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):"string"==typeof d.is?a=g.createElement(e,{is:d.is}):(a=g.createElement(e),"select"===e&&(g=a,d.multiple?g.multiple=!0:d.size&&(g.size=d.size))):a=g.createElementNS(a,e),a[Md]=b,a[Nd]=d,ni(a,b),b.stateNode=a,g=pd(e,d),e){case"iframe":case"object":case"embed":F("load",a),h=d;break;case"video":case"audio":for(h=0;h<ac.length;h++)F(ac[h],a);h=d;break;case"source":F("error",a),h=d;break;case"img":case"image":case"link":F("error",a),F("load",a),h=d;break;case"form":F("reset",a),F("submit",a),h=d;break;case"details":F("toggle",a),h=d;break;case"input":Ab(a,d),h=zb(a,d),F("invalid",a),rd(c,"onChange");break;case"option":h=Gb(a,d);break;case"select":a._wrapperState={wasMultiple:!!d.multiple},h=n({},d,{value:void 0}),F("invalid",a),rd(c,"onChange");break;case"textarea":Jb(a,d),h=Ib(a,d),F("invalid",a),rd(c,"onChange");break;default:h=d}od(e,h);var k=h;for(f in k)if(k.hasOwnProperty(f)){var l=k[f];"style"===f?md(a,l):"dangerouslySetInnerHTML"===f?null!=(l=l?l.__html:void 0)&&Qb(a,l):"children"===f?"string"==typeof l?("textarea"!==e||""!==l)&&Rb(a,l):"number"==typeof l&&Rb(a,""+l):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(va.hasOwnProperty(f)?null!=l&&rd(c,f):null!=l&&Xa(a,f,l,g))}switch(e){case"input":xb(a),Eb(a,d,!1);break;case"textarea":xb(a),Lb(a);break;case"option":null!=d.value&&a.setAttribute("value",""+rb(d.value));break;case"select":a.multiple=!!d.multiple,null!=(c=d.value)?Hb(a,!!d.multiple,c,!1):null!=d.defaultValue&&Hb(a,!!d.multiple,d.defaultValue,!0);break;default:"function"==typeof h.onClick&&(a.onclick=sd)}Fd(e,d)&&(b.effectTag|=4)}null!==b.ref&&(b.effectTag|=128)}return null;case 6:if(a&&null!=b.stateNode)qi(0,b,a.memoizedProps,d);else{if("string"!=typeof d&&null===b.stateNode)throw Error(u(166));c=ch(bh.current),ch($g.current),Wh(b)?(c=b.stateNode,d=b.memoizedProps,c[Md]=b,c.nodeValue!==d&&(b.effectTag|=4)):((c=(9===c.nodeType?c:c.ownerDocument).createTextNode(d))[Md]=b,b.stateNode=c)}return null;case 13:return H(M),d=b.memoizedState,0!=(64&b.effectTag)?(b.expirationTime=c,b):(c=null!==d,d=!1,null===a?void 0!==b.memoizedProps.fallback&&Wh(b):(d=null!==(e=a.memoizedState),c||null===e||null!==(e=a.child.sibling)&&(null!==(f=b.firstEffect)?(b.firstEffect=e,e.nextEffect=f):(b.firstEffect=b.lastEffect=e,e.nextEffect=null),e.effectTag=8)),c&&!d&&0!=(2&b.mode)&&(null===a&&!0!==b.memoizedProps.unstable_avoidThisFallback||0!=(1&M.current)?S===ti&&(S=ui):(S!==ti&&S!==ui||(S=vi),0!==wi&&null!==T&&(xi(T,U),yi(T,wi)))),(c||d)&&(b.effectTag|=4),null);case 4:return eh(),null;case 10:return og(b),null;case 17:return L(b.type)&&Df(),null;case 19:if(H(M),null===(d=b.memoizedState))return null;if(e=0!=(64&b.effectTag),null===(f=d.rendering)){if(e)ri(d,!1);else if(S!==ti||null!==a&&0!=(64&a.effectTag))for(f=b.child;null!==f;){if(null!==(a=hh(f))){for(b.effectTag|=64,ri(d,!1),null!==(e=a.updateQueue)&&(b.updateQueue=e,b.effectTag|=4),null===d.lastEffect&&(b.firstEffect=null),b.lastEffect=d.lastEffect,d=b.child;null!==d;)f=c,(e=d).effectTag&=2,e.nextEffect=null,e.firstEffect=null,e.lastEffect=null,null===(a=e.alternate)?(e.childExpirationTime=0,e.expirationTime=f,e.child=null,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null):(e.childExpirationTime=a.childExpirationTime,e.expirationTime=a.expirationTime,e.child=a.child,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,f=a.dependencies,e.dependencies=null===f?null:{expirationTime:f.expirationTime,firstContext:f.firstContext,responders:f.responders}),d=d.sibling;return I(M,1&M.current|2),b.child}f=f.sibling}}else{if(!e)if(null!==(a=hh(f))){if(b.effectTag|=64,e=!0,null!==(c=a.updateQueue)&&(b.updateQueue=c,b.effectTag|=4),ri(d,!0),null===d.tail&&"hidden"===d.tailMode&&!f.alternate)return null!==(b=b.lastEffect=d.lastEffect)&&(b.nextEffect=null),null}else 2*$f()-d.renderingStartTime>d.tailExpiration&&1<c&&(b.effectTag|=64,e=!0,ri(d,!1),b.expirationTime=b.childExpirationTime=c-1);d.isBackwards?(f.sibling=b.child,b.child=f):(null!==(c=d.last)?c.sibling=f:b.child=f,d.last=f)}return null!==d.tail?(0===d.tailExpiration&&(d.tailExpiration=$f()+500),c=d.tail,d.rendering=c,d.tail=c.sibling,d.lastEffect=b.lastEffect,d.renderingStartTime=$f(),c.sibling=null,b=M.current,I(M,e?1&b|2:1&b),c):null}throw Error(u(156,b.tag))}function zi(a){switch(a.tag){case 1:L(a.type)&&Df();var b=a.effectTag;return 4096&b?(a.effectTag=-4097&b|64,a):null;case 3:if(eh(),H(K),H(J),0!=(64&(b=a.effectTag)))throw Error(u(285));return a.effectTag=-4097&b|64,a;case 5:return gh(a),null;case 13:return H(M),4096&(b=a.effectTag)?(a.effectTag=-4097&b|64,a):null;case 19:return H(M),null;case 4:return eh(),null;case 10:return og(a),null;default:return null}}function Ai(a,b){return{value:a,source:b,stack:qb(b)}}ni=function(a,b){for(var c=b.child;null!==c;){if(5===c.tag||6===c.tag)a.appendChild(c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c,c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},pi=function(a,b,c,d,e){var f=a.memoizedProps;if(f!==d){var h,k,g=b.stateNode;switch(ch($g.current),a=null,c){case"input":f=zb(g,f),d=zb(g,d),a=[];break;case"option":f=Gb(g,f),d=Gb(g,d),a=[];break;case"select":f=n({},f,{value:void 0}),d=n({},d,{value:void 0}),a=[];break;case"textarea":f=Ib(g,f),d=Ib(g,d),a=[];break;default:"function"!=typeof f.onClick&&"function"==typeof d.onClick&&(g.onclick=sd)}for(h in od(c,d),c=null,f)if(!d.hasOwnProperty(h)&&f.hasOwnProperty(h)&&null!=f[h])if("style"===h)for(k in g=f[h])g.hasOwnProperty(k)&&(c||(c={}),c[k]="");else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(va.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in d){var l=d[h];if(g=null!=f?f[h]:void 0,d.hasOwnProperty(h)&&l!==g&&(null!=l||null!=g))if("style"===h)if(g){for(k in g)!g.hasOwnProperty(k)||l&&l.hasOwnProperty(k)||(c||(c={}),c[k]="");for(k in l)l.hasOwnProperty(k)&&g[k]!==l[k]&&(c||(c={}),c[k]=l[k])}else c||(a||(a=[]),a.push(h,c)),c=l;else"dangerouslySetInnerHTML"===h?(l=l?l.__html:void 0,g=g?g.__html:void 0,null!=l&&g!==l&&(a=a||[]).push(h,l)):"children"===h?g===l||"string"!=typeof l&&"number"!=typeof l||(a=a||[]).push(h,""+l):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(va.hasOwnProperty(h)?(null!=l&&rd(e,h),a||g===l||(a=[])):(a=a||[]).push(h,l))}c&&(a=a||[]).push("style",c),e=a,(b.updateQueue=e)&&(b.effectTag|=4)}},qi=function(a,b,c,d){c!==d&&(b.effectTag|=4)};var Bi="function"==typeof WeakSet?WeakSet:Set;function Ci(a,b){var c=b.source,d=b.stack;null===d&&null!==c&&(d=qb(c)),null!==c&&pb(c.type),b=b.value,null!==a&&1===a.tag&&pb(a.type);try{console.error(b)}catch(e){setTimeout((function(){throw e}))}}function Fi(a){var b=a.ref;if(null!==b)if("function"==typeof b)try{b(null)}catch(c){Ei(a,c)}else b.current=null}function Gi(a,b){switch(b.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&b.effectTag&&null!==a){var c=a.memoizedProps,d=a.memoizedState;b=(a=b.stateNode).getSnapshotBeforeUpdate(b.elementType===b.type?c:ig(b.type,c),d),a.__reactInternalSnapshotBeforeUpdate=b}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(u(163))}function Hi(a,b){if(null!==(b=null!==(b=b.updateQueue)?b.lastEffect:null)){var c=b=b.next;do{if((c.tag&a)===a){var d=c.destroy;c.destroy=void 0,void 0!==d&&d()}c=c.next}while(c!==b)}}function Ii(a,b){if(null!==(b=null!==(b=b.updateQueue)?b.lastEffect:null)){var c=b=b.next;do{if((c.tag&a)===a){var d=c.create;c.destroy=d()}c=c.next}while(c!==b)}}function Ji(a,b,c){switch(c.tag){case 0:case 11:case 15:case 22:return void Ii(3,c);case 1:if(a=c.stateNode,4&c.effectTag)if(null===b)a.componentDidMount();else{var d=c.elementType===c.type?b.memoizedProps:ig(c.type,b.memoizedProps);a.componentDidUpdate(d,b.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}return void(null!==(b=c.updateQueue)&&Cg(c,b,a));case 3:if(null!==(b=c.updateQueue)){if(a=null,null!==c.child)switch(c.child.tag){case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}Cg(c,b,a)}return;case 5:return a=c.stateNode,void(null===b&&4&c.effectTag&&Fd(c.type,c.memoizedProps)&&a.focus());case 6:case 4:case 12:return;case 13:return void(null===c.memoizedState&&(c=c.alternate,null!==c&&(c=c.memoizedState,null!==c&&(c=c.dehydrated,null!==c&&Vc(c)))));case 19:case 17:case 20:case 21:return}throw Error(u(163))}function Ki(a,b,c){switch("function"==typeof Li&&Li(b),b.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(a=b.updateQueue)&&null!==(a=a.lastEffect)){var d=a.next;cg(97<c?97:c,(function(){var a=d;do{var c=a.destroy;if(void 0!==c){var g=b;try{c()}catch(h){Ei(g,h)}}a=a.next}while(a!==d)}))}break;case 1:Fi(b),"function"==typeof(c=b.stateNode).componentWillUnmount&&function(a,b){try{b.props=a.memoizedProps,b.state=a.memoizedState,b.componentWillUnmount()}catch(c){Ei(a,c)}}(b,c);break;case 5:Fi(b);break;case 4:Mi(a,b,c)}}function Ni(a){var b=a.alternate;a.return=null,a.child=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.alternate=null,a.firstEffect=null,a.lastEffect=null,a.pendingProps=null,a.memoizedProps=null,a.stateNode=null,null!==b&&Ni(b)}function Oi(a){return 5===a.tag||3===a.tag||4===a.tag}function Pi(a){a:{for(var b=a.return;null!==b;){if(Oi(b)){var c=b;break a}b=b.return}throw Error(u(160))}switch(b=c.stateNode,c.tag){case 5:var d=!1;break;case 3:case 4:b=b.containerInfo,d=!0;break;default:throw Error(u(161))}16&c.effectTag&&(Rb(b,""),c.effectTag&=-17);a:b:for(c=a;;){for(;null===c.sibling;){if(null===c.return||Oi(c.return)){c=null;break a}c=c.return}for(c.sibling.return=c.return,c=c.sibling;5!==c.tag&&6!==c.tag&&18!==c.tag;){if(2&c.effectTag)continue b;if(null===c.child||4===c.tag)continue b;c.child.return=c,c=c.child}if(!(2&c.effectTag)){c=c.stateNode;break a}}d?function Qi(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?8===c.nodeType?c.parentNode.insertBefore(a,b):c.insertBefore(a,b):(8===c.nodeType?(b=c.parentNode).insertBefore(a,c):(b=c).appendChild(a),null!==(c=c._reactRootContainer)&&void 0!==c||null!==b.onclick||(b.onclick=sd));else if(4!==d&&null!==(a=a.child))for(Qi(a,b,c),a=a.sibling;null!==a;)Qi(a,b,c),a=a.sibling}(a,c,b):function Ri(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?c.insertBefore(a,b):c.appendChild(a);else if(4!==d&&null!==(a=a.child))for(Ri(a,b,c),a=a.sibling;null!==a;)Ri(a,b,c),a=a.sibling}(a,c,b)}function Mi(a,b,c){for(var f,g,d=b,e=!1;;){if(!e){e=d.return;a:for(;;){if(null===e)throw Error(u(160));switch(f=e.stateNode,e.tag){case 5:g=!1;break a;case 3:case 4:f=f.containerInfo,g=!0;break a}e=e.return}e=!0}if(5===d.tag||6===d.tag){a:for(var h=a,k=d,l=c,m=k;;)if(Ki(h,m,l),null!==m.child&&4!==m.tag)m.child.return=m,m=m.child;else{if(m===k)break a;for(;null===m.sibling;){if(null===m.return||m.return===k)break a;m=m.return}m.sibling.return=m.return,m=m.sibling}g?(h=f,k=d.stateNode,8===h.nodeType?h.parentNode.removeChild(k):h.removeChild(k)):f.removeChild(d.stateNode)}else if(4===d.tag){if(null!==d.child){f=d.stateNode.containerInfo,g=!0,d.child.return=d,d=d.child;continue}}else if(Ki(a,d,c),null!==d.child){d.child.return=d,d=d.child;continue}if(d===b)break;for(;null===d.sibling;){if(null===d.return||d.return===b)return;4===(d=d.return).tag&&(e=!1)}d.sibling.return=d.return,d=d.sibling}}function Si(a,b){switch(b.tag){case 0:case 11:case 14:case 15:case 22:return void Hi(3,b);case 1:return;case 5:var c=b.stateNode;if(null!=c){var d=b.memoizedProps,e=null!==a?a.memoizedProps:d;a=b.type;var f=b.updateQueue;if(b.updateQueue=null,null!==f){for(c[Nd]=d,"input"===a&&"radio"===d.type&&null!=d.name&&Bb(c,d),pd(a,e),b=pd(a,d),e=0;e<f.length;e+=2){var g=f[e],h=f[e+1];"style"===g?md(c,h):"dangerouslySetInnerHTML"===g?Qb(c,h):"children"===g?Rb(c,h):Xa(c,g,h,b)}switch(a){case"input":Cb(c,d);break;case"textarea":Kb(c,d);break;case"select":b=c._wrapperState.wasMultiple,c._wrapperState.wasMultiple=!!d.multiple,null!=(a=d.value)?Hb(c,!!d.multiple,a,!1):b!==!!d.multiple&&(null!=d.defaultValue?Hb(c,!!d.multiple,d.defaultValue,!0):Hb(c,!!d.multiple,d.multiple?[]:"",!1))}}}return;case 6:if(null===b.stateNode)throw Error(u(162));return void(b.stateNode.nodeValue=b.memoizedProps);case 3:return void((b=b.stateNode).hydrate&&(b.hydrate=!1,Vc(b.containerInfo)));case 12:return;case 13:if(c=b,null===b.memoizedState?d=!1:(d=!0,c=b.child,Ti=$f()),null!==c)a:for(a=c;;){if(5===a.tag)f=a.stateNode,d?"function"==typeof(f=f.style).setProperty?f.setProperty("display","none","important"):f.display="none":(f=a.stateNode,e=null!=(e=a.memoizedProps.style)&&e.hasOwnProperty("display")?e.display:null,f.style.display=ld("display",e));else if(6===a.tag)a.stateNode.nodeValue=d?"":a.memoizedProps;else{if(13===a.tag&&null!==a.memoizedState&&null===a.memoizedState.dehydrated){(f=a.child.sibling).return=a,a=f;continue}if(null!==a.child){a.child.return=a,a=a.child;continue}}if(a===c)break;for(;null===a.sibling;){if(null===a.return||a.return===c)break a;a=a.return}a.sibling.return=a.return,a=a.sibling}return void Ui(b);case 19:return void Ui(b);case 17:return}throw Error(u(163))}function Ui(a){var b=a.updateQueue;if(null!==b){a.updateQueue=null;var c=a.stateNode;null===c&&(c=a.stateNode=new Bi),b.forEach((function(b){var d=Vi.bind(null,a,b);c.has(b)||(c.add(b),b.then(d,d))}))}}var Wi="function"==typeof WeakMap?WeakMap:Map;function Xi(a,b,c){(c=wg(c,null)).tag=3,c.payload={element:null};var d=b.value;return c.callback=function(){Yi||(Yi=!0,Zi=d),Ci(a,b)},c}function $i(a,b,c){(c=wg(c,null)).tag=3;var d=a.type.getDerivedStateFromError;if("function"==typeof d){var e=b.value;c.payload=function(){return Ci(a,b),d(e)}}var f=a.stateNode;return null!==f&&"function"==typeof f.componentDidCatch&&(c.callback=function(){"function"!=typeof d&&(null===aj?aj=new Set([this]):aj.add(this),Ci(a,b));var c=b.stack;this.componentDidCatch(b.value,{componentStack:null!==c?c:""})}),c}var Rj,bj=Math.ceil,cj=Wa.ReactCurrentDispatcher,dj=Wa.ReactCurrentOwner,ti=0,ui=3,vi=4,W=0,T=null,X=null,U=0,S=ti,kj=null,lj=1073741823,mj=1073741823,nj=null,wi=0,oj=!1,Ti=0,Y=null,Yi=!1,Zi=null,aj=null,qj=!1,rj=null,sj=90,tj=null,uj=0,vj=null,wj=0;function Gg(){return 0!=(48&W)?1073741821-($f()/10|0):0!==wj?wj:wj=1073741821-($f()/10|0)}function Hg(a,b,c){if(0==(2&(b=b.mode)))return 1073741823;var d=ag();if(0==(4&b))return 99===d?1073741823:1073741822;if(0!=(16&W))return U;if(null!==c)a=hg(a,0|c.timeoutMs||5e3,250);else switch(d){case 99:a=1073741823;break;case 98:a=hg(a,150,100);break;case 97:case 96:a=hg(a,5e3,250);break;case 95:a=2;break;default:throw Error(u(326))}return null!==T&&a===U&&--a,a}function Ig(a,b){if(50<uj)throw uj=0,vj=null,Error(u(185));if(null!==(a=xj(a,b))){var c=ag();1073741823===b?0!=(8&W)&&0==(48&W)?yj(a):(Z(a),0===W&&gg()):Z(a),0==(4&W)||98!==c&&99!==c||(null===tj?tj=new Map([[a,b]]):(void 0===(c=tj.get(a))||c>b)&&tj.set(a,b))}}function xj(a,b){a.expirationTime<b&&(a.expirationTime=b);var c=a.alternate;null!==c&&c.expirationTime<b&&(c.expirationTime=b);var d=a.return,e=null;if(null===d&&3===a.tag)e=a.stateNode;else for(;null!==d;){if(c=d.alternate,d.childExpirationTime<b&&(d.childExpirationTime=b),null!==c&&c.childExpirationTime<b&&(c.childExpirationTime=b),null===d.return&&3===d.tag){e=d.stateNode;break}d=d.return}return null!==e&&(T===e&&(Bg(b),S===vi&&xi(e,U)),yi(e,b)),e}function zj(a){var b=a.lastExpiredTime;if(0!==b)return b;if(!Aj(a,b=a.firstPendingTime))return b;var c=a.lastPingedTime;return 2>=(a=c>(a=a.nextKnownPendingLevel)?c:a)&&b!==a?0:a}function Z(a){if(0!==a.lastExpiredTime)a.callbackExpirationTime=1073741823,a.callbackPriority=99,a.callbackNode=eg(yj.bind(null,a));else{var b=zj(a),c=a.callbackNode;if(0===b)null!==c&&(a.callbackNode=null,a.callbackExpirationTime=0,a.callbackPriority=90);else{var d=Gg();if(1073741823===b?d=99:1===b||2===b?d=95:d=0>=(d=10*(1073741821-b)-10*(1073741821-d))?99:250>=d?98:5250>=d?97:95,null!==c){var e=a.callbackPriority;if(a.callbackExpirationTime===b&&e>=d)return;c!==Tf&&Kf(c)}a.callbackExpirationTime=b,a.callbackPriority=d,b=1073741823===b?eg(yj.bind(null,a)):dg(d,Bj.bind(null,a),{timeout:10*(1073741821-b)-$f()}),a.callbackNode=b}}}function Bj(a,b){if(wj=0,b)return Cj(a,b=Gg()),Z(a),null;var c=zj(a);if(0!==c){if(b=a.callbackNode,0!=(48&W))throw Error(u(327));if(Dj(),a===T&&c===U||Ej(a,c),null!==X){var d=W;W|=16;for(var e=Fj();;)try{Gj();break}catch(h){Hj(a,h)}if(ng(),W=d,cj.current=e,1===S)throw b=kj,Ej(a,c),xi(a,c),Z(a),b;if(null===X)switch(e=a.finishedWork=a.current.alternate,a.finishedExpirationTime=c,d=S,T=null,d){case ti:case 1:throw Error(u(345));case 2:Cj(a,2<c?2:c);break;case ui:if(xi(a,c),c===(d=a.lastSuspendedTime)&&(a.nextKnownPendingLevel=Ij(e)),1073741823===lj&&10<(e=Ti+500-$f())){if(oj){var f=a.lastPingedTime;if(0===f||f>=c){a.lastPingedTime=c,Ej(a,c);break}}if(0!==(f=zj(a))&&f!==c)break;if(0!==d&&d!==c){a.lastPingedTime=d;break}a.timeoutHandle=Hd(Jj.bind(null,a),e);break}Jj(a);break;case vi:if(xi(a,c),c===(d=a.lastSuspendedTime)&&(a.nextKnownPendingLevel=Ij(e)),oj&&(0===(e=a.lastPingedTime)||e>=c)){a.lastPingedTime=c,Ej(a,c);break}if(0!==(e=zj(a))&&e!==c)break;if(0!==d&&d!==c){a.lastPingedTime=d;break}if(1073741823!==mj?d=10*(1073741821-mj)-$f():1073741823===lj?d=0:(d=10*(1073741821-lj)-5e3,0>(d=(e=$f())-d)&&(d=0),(c=10*(1073741821-c)-e)<(d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*bj(d/1960))-d)&&(d=c)),10<d){a.timeoutHandle=Hd(Jj.bind(null,a),d);break}Jj(a);break;case 5:if(1073741823!==lj&&null!==nj){f=lj;var g=nj;if(0>=(d=0|g.busyMinDurationMs)?d=0:(e=0|g.busyDelayMs,d=(f=$f()-(10*(1073741821-f)-(0|g.timeoutMs||5e3)))<=e?0:e+d-f),10<d){xi(a,c),a.timeoutHandle=Hd(Jj.bind(null,a),d);break}}Jj(a);break;default:throw Error(u(329))}if(Z(a),a.callbackNode===b)return Bj.bind(null,a)}}return null}function yj(a){var b=a.lastExpiredTime;if(b=0!==b?b:1073741823,0!=(48&W))throw Error(u(327));if(Dj(),a===T&&b===U||Ej(a,b),null!==X){var c=W;W|=16;for(var d=Fj();;)try{Kj();break}catch(e){Hj(a,e)}if(ng(),W=c,cj.current=d,1===S)throw c=kj,Ej(a,b),xi(a,b),Z(a),c;if(null!==X)throw Error(u(261));a.finishedWork=a.current.alternate,a.finishedExpirationTime=b,T=null,Jj(a),Z(a)}return null}function Mj(a,b){var c=W;W|=1;try{return a(b)}finally{0===(W=c)&&gg()}}function Nj(a,b){var c=W;W&=-2,W|=8;try{return a(b)}finally{0===(W=c)&&gg()}}function Ej(a,b){a.finishedWork=null,a.finishedExpirationTime=0;var c=a.timeoutHandle;if(-1!==c&&(a.timeoutHandle=-1,Id(c)),null!==X)for(c=X.return;null!==c;){var d=c;switch(d.tag){case 1:null!=(d=d.type.childContextTypes)&&Df();break;case 3:eh(),H(K),H(J);break;case 5:gh(d);break;case 4:eh();break;case 13:case 19:H(M);break;case 10:og(d)}c=c.return}T=a,X=Sg(a.current,null),U=b,S=ti,kj=null,mj=lj=1073741823,nj=null,wi=0,oj=!1}function Hj(a,b){for(;;){try{if(ng(),jh.current=sh,mh)for(var c=N.memoizedState;null!==c;){var d=c.queue;null!==d&&(d.pending=null),c=c.next}if(lh=0,P=O=N=null,mh=!1,null===X||null===X.return)return S=1,kj=b,X=null;a:{var e=a,f=X.return,g=X,h=b;if(b=U,g.effectTag|=2048,g.firstEffect=g.lastEffect=null,null!==h&&"object"==typeof h&&"function"==typeof h.then){var k=h;if(0==(2&g.mode)){var l=g.alternate;l?(g.updateQueue=l.updateQueue,g.memoizedState=l.memoizedState,g.expirationTime=l.expirationTime):(g.updateQueue=null,g.memoizedState=null)}var m=0!=(1&M.current),p=f;do{var x;if(x=13===p.tag){var z=p.memoizedState;if(null!==z)x=null!==z.dehydrated;else{var ca=p.memoizedProps;x=void 0!==ca.fallback&&(!0!==ca.unstable_avoidThisFallback||!m)}}if(x){var D=p.updateQueue;if(null===D){var t=new Set;t.add(k),p.updateQueue=t}else D.add(k);if(0==(2&p.mode)){if(p.effectTag|=64,g.effectTag&=-2981,1===g.tag)if(null===g.alternate)g.tag=17;else{var y=wg(1073741823,null);y.tag=2,xg(g,y)}g.expirationTime=1073741823;break a}h=void 0,g=b;var A=e.pingCache;if(null===A?(A=e.pingCache=new Wi,h=new Set,A.set(k,h)):void 0===(h=A.get(k))&&(h=new Set,A.set(k,h)),!h.has(g)){h.add(g);var q=Oj.bind(null,e,k,g);k.then(q,q)}p.effectTag|=4096,p.expirationTime=b;break a}p=p.return}while(null!==p);h=Error((pb(g.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+qb(g))}5!==S&&(S=2),h=Ai(h,g),p=f;do{switch(p.tag){case 3:k=h,p.effectTag|=4096,p.expirationTime=b,yg(p,Xi(p,k,b));break a;case 1:k=h;var w=p.type,ub=p.stateNode;if(0==(64&p.effectTag)&&("function"==typeof w.getDerivedStateFromError||null!==ub&&"function"==typeof ub.componentDidCatch&&(null===aj||!aj.has(ub)))){p.effectTag|=4096,p.expirationTime=b,yg(p,$i(p,k,b));break a}}p=p.return}while(null!==p)}X=Pj(X)}catch(Xc){b=Xc;continue}break}}function Fj(){var a=cj.current;return cj.current=sh,null===a?sh:a}function Ag(a,b){a<lj&&2<a&&(lj=a),null!==b&&a<mj&&2<a&&(mj=a,nj=b)}function Bg(a){a>wi&&(wi=a)}function Kj(){for(;null!==X;)X=Qj(X)}function Gj(){for(;null!==X&&!Uf();)X=Qj(X)}function Qj(a){var b=Rj(a.alternate,a,U);return a.memoizedProps=a.pendingProps,null===b&&(b=Pj(a)),dj.current=null,b}function Pj(a){X=a;do{var b=X.alternate;if(a=X.return,0==(2048&X.effectTag)){if(b=si(b,X,U),1===U||1!==X.childExpirationTime){for(var c=0,d=X.child;null!==d;){var e=d.expirationTime,f=d.childExpirationTime;e>c&&(c=e),f>c&&(c=f),d=d.sibling}X.childExpirationTime=c}if(null!==b)return b;null!==a&&0==(2048&a.effectTag)&&(null===a.firstEffect&&(a.firstEffect=X.firstEffect),null!==X.lastEffect&&(null!==a.lastEffect&&(a.lastEffect.nextEffect=X.firstEffect),a.lastEffect=X.lastEffect),1<X.effectTag&&(null!==a.lastEffect?a.lastEffect.nextEffect=X:a.firstEffect=X,a.lastEffect=X))}else{if(null!==(b=zi(X)))return b.effectTag&=2047,b;null!==a&&(a.firstEffect=a.lastEffect=null,a.effectTag|=2048)}if(null!==(b=X.sibling))return b;X=a}while(null!==X);return S===ti&&(S=5),null}function Ij(a){var b=a.expirationTime;return b>(a=a.childExpirationTime)?b:a}function Jj(a){var b=ag();return cg(99,Sj.bind(null,a,b)),null}function Sj(a,b){do{Dj()}while(null!==rj);if(0!=(48&W))throw Error(u(327));var c=a.finishedWork,d=a.finishedExpirationTime;if(null===c)return null;if(a.finishedWork=null,a.finishedExpirationTime=0,c===a.current)throw Error(u(177));a.callbackNode=null,a.callbackExpirationTime=0,a.callbackPriority=90,a.nextKnownPendingLevel=0;var e=Ij(c);if(a.firstPendingTime=e,d<=a.lastSuspendedTime?a.firstSuspendedTime=a.lastSuspendedTime=a.nextKnownPendingLevel=0:d<=a.firstSuspendedTime&&(a.firstSuspendedTime=d-1),d<=a.lastPingedTime&&(a.lastPingedTime=0),d<=a.lastExpiredTime&&(a.lastExpiredTime=0),a===T&&(X=T=null,U=0),1<c.effectTag?null!==c.lastEffect?(c.lastEffect.nextEffect=c,e=c.firstEffect):e=c:e=c.firstEffect,null!==e){var f=W;W|=32,dj.current=null,Dd=fd;var g=xd();if(yd(g)){if("selectionStart"in g)var h={start:g.selectionStart,end:g.selectionEnd};else a:{var k=(h=(h=g.ownerDocument)&&h.defaultView||window).getSelection&&h.getSelection();if(k&&0!==k.rangeCount){h=k.anchorNode;var l=k.anchorOffset,m=k.focusNode;k=k.focusOffset;try{h.nodeType,m.nodeType}catch(wb){h=null;break a}var p=0,x=-1,z=-1,ca=0,D=0,t=g,y=null;b:for(;;){for(var A;t!==h||0!==l&&3!==t.nodeType||(x=p+l),t!==m||0!==k&&3!==t.nodeType||(z=p+k),3===t.nodeType&&(p+=t.nodeValue.length),null!==(A=t.firstChild);)y=t,t=A;for(;;){if(t===g)break b;if(y===h&&++ca===l&&(x=p),y===m&&++D===k&&(z=p),null!==(A=t.nextSibling))break;y=(t=y).parentNode}t=A}h=-1===x||-1===z?null:{start:x,end:z}}else h=null}h=h||{start:0,end:0}}else h=null;Ed={activeElementDetached:null,focusedElem:g,selectionRange:h},fd=!1,Y=e;do{try{Tj()}catch(wb){if(null===Y)throw Error(u(330));Ei(Y,wb),Y=Y.nextEffect}}while(null!==Y);Y=e;do{try{for(g=a,h=b;null!==Y;){var q=Y.effectTag;if(16&q&&Rb(Y.stateNode,""),128&q){var B=Y.alternate;if(null!==B){var w=B.ref;null!==w&&("function"==typeof w?w(null):w.current=null)}}switch(1038&q){case 2:Pi(Y),Y.effectTag&=-3;break;case 6:Pi(Y),Y.effectTag&=-3,Si(Y.alternate,Y);break;case 1024:Y.effectTag&=-1025;break;case 1028:Y.effectTag&=-1025,Si(Y.alternate,Y);break;case 4:Si(Y.alternate,Y);break;case 8:Mi(g,l=Y,h),Ni(l)}Y=Y.nextEffect}}catch(wb){if(null===Y)throw Error(u(330));Ei(Y,wb),Y=Y.nextEffect}}while(null!==Y);if(w=Ed,B=xd(),q=w.focusedElem,h=w.selectionRange,B!==q&&q&&q.ownerDocument&&function wd(a,b){return!(!a||!b)&&(a===b||(!a||3!==a.nodeType)&&(b&&3===b.nodeType?wd(a,b.parentNode):"contains"in a?a.contains(b):!!a.compareDocumentPosition&&!!(16&a.compareDocumentPosition(b))))}(q.ownerDocument.documentElement,q)){null!==h&&yd(q)&&(B=h.start,void 0===(w=h.end)&&(w=B),"selectionStart"in q?(q.selectionStart=B,q.selectionEnd=Math.min(w,q.value.length)):(w=(B=q.ownerDocument||document)&&B.defaultView||window).getSelection&&(w=w.getSelection(),l=q.textContent.length,g=Math.min(h.start,l),h=void 0===h.end?g:Math.min(h.end,l),!w.extend&&g>h&&(l=h,h=g,g=l),l=vd(q,g),m=vd(q,h),l&&m&&(1!==w.rangeCount||w.anchorNode!==l.node||w.anchorOffset!==l.offset||w.focusNode!==m.node||w.focusOffset!==m.offset)&&((B=B.createRange()).setStart(l.node,l.offset),w.removeAllRanges(),g>h?(w.addRange(B),w.extend(m.node,m.offset)):(B.setEnd(m.node,m.offset),w.addRange(B))))),B=[];for(w=q;w=w.parentNode;)1===w.nodeType&&B.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"==typeof q.focus&&q.focus(),q=0;q<B.length;q++)(w=B[q]).element.scrollLeft=w.left,w.element.scrollTop=w.top}fd=!!Dd,Ed=Dd=null,a.current=c,Y=e;do{try{for(q=a;null!==Y;){var ub=Y.effectTag;if(36&ub&&Ji(q,Y.alternate,Y),128&ub){B=void 0;var vb=Y.ref;if(null!==vb){var Xc=Y.stateNode;switch(Y.tag){case 5:B=Xc;break;default:B=Xc}"function"==typeof vb?vb(B):vb.current=B}}Y=Y.nextEffect}}catch(wb){if(null===Y)throw Error(u(330));Ei(Y,wb),Y=Y.nextEffect}}while(null!==Y);Y=null,Vf(),W=f}else a.current=c;if(qj)qj=!1,rj=a,sj=b;else for(Y=e;null!==Y;)b=Y.nextEffect,Y.nextEffect=null,Y=b;if(0===(b=a.firstPendingTime)&&(aj=null),1073741823===b?a===vj?uj++:(uj=0,vj=a):uj=0,"function"==typeof Uj&&Uj(c.stateNode,d),Z(a),Yi)throw Yi=!1,a=Zi,Zi=null,a;return 0!=(8&W)||gg(),null}function Tj(){for(;null!==Y;){var a=Y.effectTag;0!=(256&a)&&Gi(Y.alternate,Y),0==(512&a)||qj||(qj=!0,dg(97,(function(){return Dj(),null}))),Y=Y.nextEffect}}function Dj(){if(90!==sj){var a=97<sj?97:sj;return sj=90,cg(a,Vj)}}function Vj(){if(null===rj)return!1;var a=rj;if(rj=null,0!=(48&W))throw Error(u(331));var b=W;for(W|=32,a=a.current.firstEffect;null!==a;){try{var c=a;if(0!=(512&c.effectTag))switch(c.tag){case 0:case 11:case 15:case 22:Hi(5,c),Ii(5,c)}}catch(d){if(null===a)throw Error(u(330));Ei(a,d)}c=a.nextEffect,a.nextEffect=null,a=c}return W=b,gg(),!0}function Wj(a,b,c){xg(a,b=Xi(a,b=Ai(c,b),1073741823)),null!==(a=xj(a,1073741823))&&Z(a)}function Ei(a,b){if(3===a.tag)Wj(a,a,b);else for(var c=a.return;null!==c;){if(3===c.tag){Wj(c,a,b);break}if(1===c.tag){var d=c.stateNode;if("function"==typeof c.type.getDerivedStateFromError||"function"==typeof d.componentDidCatch&&(null===aj||!aj.has(d))){xg(c,a=$i(c,a=Ai(b,a),1073741823)),null!==(c=xj(c,1073741823))&&Z(c);break}}c=c.return}}function Oj(a,b,c){var d=a.pingCache;null!==d&&d.delete(b),T===a&&U===c?S===vi||S===ui&&1073741823===lj&&$f()-Ti<500?Ej(a,U):oj=!0:Aj(a,c)&&(0!==(b=a.lastPingedTime)&&b<c||(a.lastPingedTime=c,Z(a)))}function Vi(a,b){var c=a.stateNode;null!==c&&c.delete(b),0===(b=0)&&(b=Hg(b=Gg(),a,null)),null!==(a=xj(a,b))&&Z(a)}Rj=function(a,b,c){var d=b.expirationTime;if(null!==a){var e=b.pendingProps;if(a.memoizedProps!==e||K.current)rg=!0;else{if(d<c){switch(rg=!1,b.tag){case 3:hi(b),Xh();break;case 5:if(fh(b),4&b.mode&&1!==c&&e.hidden)return b.expirationTime=b.childExpirationTime=1,null;break;case 1:L(b.type)&&Gf(b);break;case 4:dh(b,b.stateNode.containerInfo);break;case 10:d=b.memoizedProps.value,e=b.type._context,I(jg,e._currentValue),e._currentValue=d;break;case 13:if(null!==b.memoizedState)return 0!==(d=b.child.childExpirationTime)&&d>=c?ji(a,b,c):(I(M,1&M.current),null!==(b=$h(a,b,c))?b.sibling:null);I(M,1&M.current);break;case 19:if(d=b.childExpirationTime>=c,0!=(64&a.effectTag)){if(d)return mi(a,b,c);b.effectTag|=64}if(null!==(e=b.memoizedState)&&(e.rendering=null,e.tail=null),I(M,M.current),!d)return null}return $h(a,b,c)}rg=!1}}else rg=!1;switch(b.expirationTime=0,b.tag){case 2:if(d=b.type,null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),a=b.pendingProps,e=Cf(b,J.current),qg(b,c),e=oh(null,b,d,a,e,c),b.effectTag|=1,"object"==typeof e&&null!==e&&"function"==typeof e.render&&void 0===e.$$typeof){if(b.tag=1,b.memoizedState=null,b.updateQueue=null,L(d)){var f=!0;Gf(b)}else f=!1;b.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,ug(b);var g=d.getDerivedStateFromProps;"function"==typeof g&&Fg(b,d,g,a),e.updater=Jg,b.stateNode=e,e._reactInternalFiber=b,Ng(b,d,a,c),b=gi(null,b,d,!0,f,c)}else b.tag=0,R(null,b,e,c),b=b.child;return b;case 16:a:{if(e=b.elementType,null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),a=b.pendingProps,function(a){if(-1===a._status){a._status=0;var b=a._ctor;b=b(),a._result=b,b.then((function(b){0===a._status&&(b=b.default,a._status=1,a._result=b)}),(function(b){0===a._status&&(a._status=2,a._result=b)}))}}(e),1!==e._status)throw e._result;switch(e=e._result,b.type=e,f=b.tag=function(a){if("function"==typeof a)return bi(a)?1:0;if(null!=a){if((a=a.$$typeof)===gb)return 11;if(a===jb)return 14}return 2}(e),a=ig(e,a),f){case 0:b=di(null,b,e,a,c);break a;case 1:b=fi(null,b,e,a,c);break a;case 11:b=Zh(null,b,e,a,c);break a;case 14:b=ai(null,b,e,ig(e.type,a),d,c);break a}throw Error(u(306,e,""))}return b;case 0:return d=b.type,e=b.pendingProps,di(a,b,d,e=b.elementType===d?e:ig(d,e),c);case 1:return d=b.type,e=b.pendingProps,fi(a,b,d,e=b.elementType===d?e:ig(d,e),c);case 3:if(hi(b),d=b.updateQueue,null===a||null===d)throw Error(u(282));if(d=b.pendingProps,e=null!==(e=b.memoizedState)?e.element:null,vg(a,b),zg(b,d,null,c),(d=b.memoizedState.element)===e)Xh(),b=$h(a,b,c);else{if((e=b.stateNode.hydrate)&&(Ph=Jd(b.stateNode.containerInfo.firstChild),Oh=b,e=Qh=!0),e)for(c=Yg(b,null,d,c),b.child=c;c;)c.effectTag=-3&c.effectTag|1024,c=c.sibling;else R(a,b,d,c),Xh();b=b.child}return b;case 5:return fh(b),null===a&&Uh(b),d=b.type,e=b.pendingProps,f=null!==a?a.memoizedProps:null,g=e.children,Gd(d,e)?g=null:null!==f&&Gd(d,f)&&(b.effectTag|=16),ei(a,b),4&b.mode&&1!==c&&e.hidden?(b.expirationTime=b.childExpirationTime=1,b=null):(R(a,b,g,c),b=b.child),b;case 6:return null===a&&Uh(b),null;case 13:return ji(a,b,c);case 4:return dh(b,b.stateNode.containerInfo),d=b.pendingProps,null===a?b.child=Xg(b,null,d,c):R(a,b,d,c),b.child;case 11:return d=b.type,e=b.pendingProps,Zh(a,b,d,e=b.elementType===d?e:ig(d,e),c);case 7:return R(a,b,b.pendingProps,c),b.child;case 8:case 12:return R(a,b,b.pendingProps.children,c),b.child;case 10:a:{d=b.type._context,e=b.pendingProps,g=b.memoizedProps,f=e.value;var h=b.type._context;if(I(jg,h._currentValue),h._currentValue=f,null!==g)if(h=g.value,0===(f=$e(h,f)?0:0|("function"==typeof d._calculateChangedBits?d._calculateChangedBits(h,f):1073741823))){if(g.children===e.children&&!K.current){b=$h(a,b,c);break a}}else for(null!==(h=b.child)&&(h.return=b);null!==h;){var k=h.dependencies;if(null!==k){g=h.child;for(var l=k.firstContext;null!==l;){if(l.context===d&&0!=(l.observedBits&f)){1===h.tag&&((l=wg(c,null)).tag=2,xg(h,l)),h.expirationTime<c&&(h.expirationTime=c),null!==(l=h.alternate)&&l.expirationTime<c&&(l.expirationTime=c),pg(h.return,c),k.expirationTime<c&&(k.expirationTime=c);break}l=l.next}}else g=10===h.tag&&h.type===b.type?null:h.child;if(null!==g)g.return=h;else for(g=h;null!==g;){if(g===b){g=null;break}if(null!==(h=g.sibling)){h.return=g.return,g=h;break}g=g.return}h=g}R(a,b,e.children,c),b=b.child}return b;case 9:return e=b.type,d=(f=b.pendingProps).children,qg(b,c),d=d(e=sg(e,f.unstable_observedBits)),b.effectTag|=1,R(a,b,d,c),b.child;case 14:return f=ig(e=b.type,b.pendingProps),ai(a,b,e,f=ig(e.type,f),d,c);case 15:return ci(a,b,b.type,b.pendingProps,d,c);case 17:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:ig(d,e),null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),b.tag=1,L(d)?(a=!0,Gf(b)):a=!1,qg(b,c),Lg(b,d,e),Ng(b,d,e,c),gi(null,b,d,!0,a,c);case 19:return mi(a,b,c)}throw Error(u(156,b.tag))};var Uj=null,Li=null;function Zj(a,b,c,d){this.tag=a,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=b,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Sh(a,b,c,d){return new Zj(a,b,c,d)}function bi(a){return!(!(a=a.prototype)||!a.isReactComponent)}function Sg(a,b){var c=a.alternate;return null===c?((c=Sh(a.tag,b,a.key,a.mode)).elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=b,c.effectTag=0,c.nextEffect=null,c.firstEffect=null,c.lastEffect=null),c.childExpirationTime=a.childExpirationTime,c.expirationTime=a.expirationTime,c.child=a.child,c.memoizedProps=a.memoizedProps,c.memoizedState=a.memoizedState,c.updateQueue=a.updateQueue,b=a.dependencies,c.dependencies=null===b?null:{expirationTime:b.expirationTime,firstContext:b.firstContext,responders:b.responders},c.sibling=a.sibling,c.index=a.index,c.ref=a.ref,c}function Ug(a,b,c,d,e,f){var g=2;if(d=a,"function"==typeof a)bi(a)&&(g=1);else if("string"==typeof a)g=5;else a:switch(a){case ab:return Wg(c.children,e,f,b);case fb:g=8,e|=7;break;case bb:g=8,e|=1;break;case cb:return(a=Sh(12,c,b,8|e)).elementType=cb,a.type=cb,a.expirationTime=f,a;case hb:return(a=Sh(13,c,b,e)).type=hb,a.elementType=hb,a.expirationTime=f,a;case ib:return(a=Sh(19,c,b,e)).elementType=ib,a.expirationTime=f,a;default:if("object"==typeof a&&null!==a)switch(a.$$typeof){case db:g=10;break a;case eb:g=9;break a;case gb:g=11;break a;case jb:g=14;break a;case kb:g=16,d=null;break a;case lb:g=22;break a}throw Error(u(130,null==a?a:typeof a,""))}return(b=Sh(g,c,b,e)).elementType=a,b.type=d,b.expirationTime=f,b}function Wg(a,b,c,d){return(a=Sh(7,a,d,b)).expirationTime=c,a}function Tg(a,b,c){return(a=Sh(6,a,null,b)).expirationTime=c,a}function Vg(a,b,c){return(b=Sh(4,null!==a.children?a.children:[],a.key,b)).expirationTime=c,b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},b}function ak(a,b,c){this.tag=b,this.current=null,this.containerInfo=a,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=c,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Aj(a,b){var c=a.firstSuspendedTime;return a=a.lastSuspendedTime,0!==c&&c>=b&&a<=b}function xi(a,b){var c=a.firstSuspendedTime,d=a.lastSuspendedTime;c<b&&(a.firstSuspendedTime=b),(d>b||0===c)&&(a.lastSuspendedTime=b),b<=a.lastPingedTime&&(a.lastPingedTime=0),b<=a.lastExpiredTime&&(a.lastExpiredTime=0)}function yi(a,b){b>a.firstPendingTime&&(a.firstPendingTime=b);var c=a.firstSuspendedTime;0!==c&&(b>=c?a.firstSuspendedTime=a.lastSuspendedTime=a.nextKnownPendingLevel=0:b>=a.lastSuspendedTime&&(a.lastSuspendedTime=b+1),b>a.nextKnownPendingLevel&&(a.nextKnownPendingLevel=b))}function Cj(a,b){var c=a.lastExpiredTime;(0===c||c>b)&&(a.lastExpiredTime=b)}function bk(a,b,c,d){var e=b.current,f=Gg(),g=Dg.suspense;f=Hg(f,e,g);a:if(c){b:{if(dc(c=c._reactInternalFiber)!==c||1!==c.tag)throw Error(u(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break b;case 1:if(L(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break b}}h=h.return}while(null!==h);throw Error(u(171))}if(1===c.tag){var k=c.type;if(L(k)){c=Ff(c,k,h);break a}}c=h}else c=Af;return null===b.context?b.context=c:b.pendingContext=c,(b=wg(f,g)).payload={element:a},null!==(d=void 0===d?null:d)&&(b.callback=d),xg(e,b),Ig(e,f),f}function ck(a){if(!(a=a.current).child)return null;switch(a.child.tag){case 5:default:return a.child.stateNode}}function dk(a,b){null!==(a=a.memoizedState)&&null!==a.dehydrated&&a.retryTime<b&&(a.retryTime=b)}function ek(a,b){dk(a,b),(a=a.alternate)&&dk(a,b)}function fk(a,b,c){var d=new ak(a,b,c=null!=c&&!0===c.hydrate),e=Sh(3,null,null,2===b?7:1===b?3:0);d.current=e,e.stateNode=d,ug(e),a[Od]=d.current,c&&0!==b&&function(a,b){var c=cc(b);Hc.forEach((function(a){uc(a,b,c)})),Ic.forEach((function(a){uc(a,b,c)}))}(0,9===a.nodeType?a:a.ownerDocument),this._internalRoot=d}function gk(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||" react-mount-point-unstable "!==a.nodeValue))}function ik(a,b,c,d,e){var f=c._reactRootContainer;if(f){var g=f._internalRoot;if("function"==typeof e){var h=e;e=function(){var a=ck(g);h.call(a)}}bk(b,g,a,e)}else{if(f=c._reactRootContainer=function(a,b){if(b||(b=!(!(b=a?9===a.nodeType?a.documentElement:a.firstChild:null)||1!==b.nodeType||!b.hasAttribute("data-reactroot"))),!b)for(var c;c=a.lastChild;)a.removeChild(c);return new fk(a,0,b?{hydrate:!0}:void 0)}(c,d),g=f._internalRoot,"function"==typeof e){var k=e;e=function(){var a=ck(g);k.call(a)}}Nj((function(){bk(b,g,a,e)}))}return ck(g)}function jk(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:$a,key:null==d?null:""+d,children:a,containerInfo:b,implementation:c}}function kk(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!gk(b))throw Error(u(200));return jk(a,b,null,c)}fk.prototype.render=function(a){bk(a,this._internalRoot,null,null)},fk.prototype.unmount=function(){var a=this._internalRoot,b=a.containerInfo;bk(null,a,null,(function(){b[Od]=null}))},wc=function(a){if(13===a.tag){var b=hg(Gg(),150,100);Ig(a,b),ek(a,b)}},xc=function(a){13===a.tag&&(Ig(a,3),ek(a,3))},yc=function(a){if(13===a.tag){var b=Gg();Ig(a,b=Hg(b,a,null)),ek(a,b)}},za=function(a,b,c){switch(b){case"input":if(Cb(a,c),b=c.name,"radio"===c.type&&null!=b){for(c=a;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+b)+'][type="radio"]'),b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=Qd(d);if(!e)throw Error(u(90));yb(d),Cb(d,e)}}}break;case"textarea":Kb(a,c);break;case"select":null!=(b=c.value)&&Hb(a,!!c.multiple,b,!1)}},Fa=Mj,Ga=function(a,b,c,d,e){var f=W;W|=4;try{return cg(98,a.bind(null,b,c,d,e))}finally{0===(W=f)&&gg()}},Ha=function(){0==(49&W)&&(function(){if(null!==tj){var a=tj;tj=null,a.forEach((function(a,c){Cj(c,a),Z(c)})),gg()}}(),Dj())},Ia=function(a,b){var c=W;W|=2;try{return a(b)}finally{0===(W=c)&&gg()}};var lk={Events:[Nc,Pd,Qd,xa,ta,Xd,function(a){jc(a,Wd)},Da,Ea,id,mc,Dj,{current:!1}]};!function(a){var b=a.findFiberByHostInstance;(function(a){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var b=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(b.isDisabled||!b.supportsFiber)return!0;try{var c=b.inject(a);Uj=function(a){try{b.onCommitFiberRoot(c,a,void 0,64==(64&a.current.effectTag))}catch(e){}},Li=function(a){try{b.onCommitFiberUnmount(c,a)}catch(e){}}}catch(d){}})(n({},a,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wa.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return null===(a=hc(a))?null:a.stateNode},findFiberByHostInstance:function(a){return b?b(a):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:tc,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"}),exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lk,exports.createPortal=kk,exports.findDOMNode=function(a){if(null==a)return null;if(1===a.nodeType)return a;var b=a._reactInternalFiber;if(void 0===b){if("function"==typeof a.render)throw Error(u(188));throw Error(u(268,Object.keys(a)))}return a=null===(a=hc(b))?null:a.stateNode},exports.flushSync=function(a,b){if(0!=(48&W))throw Error(u(187));var c=W;W|=1;try{return cg(99,a.bind(null,b))}finally{W=c,gg()}},exports.hydrate=function(a,b,c){if(!gk(b))throw Error(u(200));return ik(null,a,b,!0,c)},exports.render=function(a,b,c){if(!gk(b))throw Error(u(200));return ik(null,a,b,!1,c)},exports.unmountComponentAtNode=function(a){if(!gk(a))throw Error(u(40));return!!a._reactRootContainer&&(Nj((function(){ik(null,null,a,!1,(function(){a._reactRootContainer=null,a[Od]=null}))})),!0)},exports.unstable_batchedUpdates=Mj,exports.unstable_createPortal=function(a,b){return kk(a,b,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},exports.unstable_renderSubtreeIntoContainer=function(a,b,c,d){if(!gk(c))throw Error(u(200));if(null==a||void 0===a._reactInternalFiber)throw Error(u(38));return ik(a,b,c,!1,d)},exports.version="16.14.0"},function(module,exports,__webpack_require__){"use strict";var l=__webpack_require__(191),n="function"==typeof Symbol&&Symbol.for,p=n?Symbol.for("react.element"):60103,q=n?Symbol.for("react.portal"):60106,r=n?Symbol.for("react.fragment"):60107,t=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,v=n?Symbol.for("react.provider"):60109,w=n?Symbol.for("react.context"):60110,x=n?Symbol.for("react.forward_ref"):60112,y=n?Symbol.for("react.suspense"):60113,z=n?Symbol.for("react.memo"):60115,A=n?Symbol.for("react.lazy"):60116,B="function"==typeof Symbol&&Symbol.iterator;function C(a){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+a,c=1;c<arguments.length;c++)b+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+a+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E={};function F(a,b,c){this.props=a,this.context=b,this.refs=E,this.updater=c||D}function G(){}function H(a,b,c){this.props=a,this.context=b,this.refs=E,this.updater=c||D}F.prototype.isReactComponent={},F.prototype.setState=function(a,b){if("object"!=typeof a&&"function"!=typeof a&&null!=a)throw Error(C(85));this.updater.enqueueSetState(this,a,b,"setState")},F.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,"forceUpdate")},G.prototype=F.prototype;var I=H.prototype=new G;I.constructor=H,l(I,F.prototype),I.isPureReactComponent=!0;var J={current:null},K=Object.prototype.hasOwnProperty,L={key:!0,ref:!0,__self:!0,__source:!0};function M(a,b,c){var e,d={},g=null,k=null;if(null!=b)for(e in void 0!==b.ref&&(k=b.ref),void 0!==b.key&&(g=""+b.key),b)K.call(b,e)&&!L.hasOwnProperty(e)&&(d[e]=b[e]);var f=arguments.length-2;if(1===f)d.children=c;else if(1<f){for(var h=Array(f),m=0;m<f;m++)h[m]=arguments[m+2];d.children=h}if(a&&a.defaultProps)for(e in f=a.defaultProps)void 0===d[e]&&(d[e]=f[e]);return{$$typeof:p,type:a,key:g,ref:k,props:d,_owner:J.current}}function O(a){return"object"==typeof a&&null!==a&&a.$$typeof===p}var P=/\/+/g,Q=[];function R(a,b,c,e){if(Q.length){var d=Q.pop();return d.result=a,d.keyPrefix=b,d.func=c,d.context=e,d.count=0,d}return{result:a,keyPrefix:b,func:c,context:e,count:0}}function S(a){a.result=null,a.keyPrefix=null,a.func=null,a.context=null,a.count=0,10>Q.length&&Q.push(a)}function V(a,b,c){return null==a?0:function T(a,b,c,e){var d=typeof a;"undefined"!==d&&"boolean"!==d||(a=null);var g=!1;if(null===a)g=!0;else switch(d){case"string":case"number":g=!0;break;case"object":switch(a.$$typeof){case p:case q:g=!0}}if(g)return c(e,a,""===b?"."+U(a,0):b),1;if(g=0,b=""===b?".":b+":",Array.isArray(a))for(var k=0;k<a.length;k++){var f=b+U(d=a[k],k);g+=T(d,f,c,e)}else if(f=null===a||"object"!=typeof a?null:"function"==typeof(f=B&&a[B]||a["@@iterator"])?f:null,"function"==typeof f)for(a=f.call(a),k=0;!(d=a.next()).done;)g+=T(d=d.value,f=b+U(d,k++),c,e);else if("object"===d)throw c=""+a,Error(C(31,"[object Object]"===c?"object with keys {"+Object.keys(a).join(", ")+"}":c,""));return g}(a,"",b,c)}function U(a,b){return"object"==typeof a&&null!==a&&null!=a.key?function(a){var b={"=":"=0",":":"=2"};return"$"+(""+a).replace(/[=:]/g,(function(a){return b[a]}))}(a.key):b.toString(36)}function W(a,b){a.func.call(a.context,b,a.count++)}function aa(a,b,c){var e=a.result,d=a.keyPrefix;a=a.func.call(a.context,b,a.count++),Array.isArray(a)?X(a,e,c,(function(a){return a})):null!=a&&(O(a)&&(a=function(a,b){return{$$typeof:p,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}(a,d+(!a.key||b&&b.key===a.key?"":(""+a.key).replace(P,"$&/")+"/")+c)),e.push(a))}function X(a,b,c,e,d){var g="";null!=c&&(g=(""+c).replace(P,"$&/")+"/"),V(a,aa,b=R(b,g,e,d)),S(b)}var Y={current:null};function Z(){var a=Y.current;if(null===a)throw Error(C(321));return a}var ba={ReactCurrentDispatcher:Y,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:J,IsSomeRendererActing:{current:!1},assign:l};exports.Children={map:function(a,b,c){if(null==a)return a;var e=[];return X(a,e,null,b,c),e},forEach:function(a,b,c){if(null==a)return a;V(a,W,b=R(null,null,b,c)),S(b)},count:function(a){return V(a,(function(){return null}),null)},toArray:function(a){var b=[];return X(a,b,null,(function(a){return a})),b},only:function(a){if(!O(a))throw Error(C(143));return a}},exports.Component=F,exports.Fragment=r,exports.Profiler=u,exports.PureComponent=H,exports.StrictMode=t,exports.Suspense=y,exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ba,exports.cloneElement=function(a,b,c){if(null==a)throw Error(C(267,a));var e=l({},a.props),d=a.key,g=a.ref,k=a._owner;if(null!=b){if(void 0!==b.ref&&(g=b.ref,k=J.current),void 0!==b.key&&(d=""+b.key),a.type&&a.type.defaultProps)var f=a.type.defaultProps;for(h in b)K.call(b,h)&&!L.hasOwnProperty(h)&&(e[h]=void 0===b[h]&&void 0!==f?f[h]:b[h])}var h=arguments.length-2;if(1===h)e.children=c;else if(1<h){f=Array(h);for(var m=0;m<h;m++)f[m]=arguments[m+2];e.children=f}return{$$typeof:p,type:a.type,key:d,ref:g,props:e,_owner:k}},exports.createContext=function(a,b){return void 0===b&&(b=null),(a={$$typeof:w,_calculateChangedBits:b,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:v,_context:a},a.Consumer=a},exports.createElement=M,exports.createFactory=function(a){var b=M.bind(null,a);return b.type=a,b},exports.createRef=function(){return{current:null}},exports.forwardRef=function(a){return{$$typeof:x,render:a}},exports.isValidElement=O,exports.lazy=function(a){return{$$typeof:A,_ctor:a,_status:-1,_result:null}},exports.memo=function(a,b){return{$$typeof:z,type:a,compare:void 0===b?null:b}},exports.useCallback=function(a,b){return Z().useCallback(a,b)},exports.useContext=function(a,b){return Z().useContext(a,b)},exports.useDebugValue=function(){},exports.useEffect=function(a,b){return Z().useEffect(a,b)},exports.useImperativeHandle=function(a,b,c){return Z().useImperativeHandle(a,b,c)},exports.useLayoutEffect=function(a,b){return Z().useLayoutEffect(a,b)},exports.useMemo=function(a,b){return Z().useMemo(a,b)},exports.useReducer=function(a,b,c){return Z().useReducer(a,b,c)},exports.useRef=function(a){return Z().useRef(a)},exports.useState=function(a){return Z().useState(a)},exports.version="16.14.0"},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(423)},function(module,exports,__webpack_require__){"use strict";var f,g,h,k,l;if("undefined"==typeof window||"function"!=typeof MessageChannel){var p=null,q=null,t=function(){if(null!==p)try{var a=exports.unstable_now();p(!0,a),p=null}catch(b){throw setTimeout(t,0),b}},u=Date.now();exports.unstable_now=function(){return Date.now()-u},f=function(a){null!==p?setTimeout(f,0,a):(p=a,setTimeout(t,0))},g=function(a,b){q=setTimeout(a,b)},h=function(){clearTimeout(q)},k=function(){return!1},l=exports.unstable_forceFrameRate=function(){}}else{var w=window.performance,x=window.Date,y=window.setTimeout,z=window.clearTimeout;if("undefined"!=typeof console){var A=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof A&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"==typeof w&&"function"==typeof w.now)exports.unstable_now=function(){return w.now()};else{var B=x.now();exports.unstable_now=function(){return x.now()-B}}var C=!1,D=null,E=-1,F=5,G=0;k=function(){return exports.unstable_now()>=G},l=function(){},exports.unstable_forceFrameRate=function(a){0>a||125<a?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):F=0<a?Math.floor(1e3/a):5};var H=new MessageChannel,I=H.port2;H.port1.onmessage=function(){if(null!==D){var a=exports.unstable_now();G=a+F;try{D(!0,a)?I.postMessage(null):(C=!1,D=null)}catch(b){throw I.postMessage(null),b}}else C=!1},f=function(a){D=a,C||(C=!0,I.postMessage(null))},g=function(a,b){E=y((function(){a(exports.unstable_now())}),b)},h=function(){z(E),E=-1}}function J(a,b){var c=a.length;a.push(b);a:for(;;){var d=c-1>>>1,e=a[d];if(!(void 0!==e&&0<K(e,b)))break a;a[d]=b,a[c]=e,c=d}}function L(a){return void 0===(a=a[0])?null:a}function M(a){var b=a[0];if(void 0!==b){var c=a.pop();if(c!==b){a[0]=c;a:for(var d=0,e=a.length;d<e;){var m=2*(d+1)-1,n=a[m],v=m+1,r=a[v];if(void 0!==n&&0>K(n,c))void 0!==r&&0>K(r,n)?(a[d]=r,a[v]=c,d=v):(a[d]=n,a[m]=c,d=m);else{if(!(void 0!==r&&0>K(r,c)))break a;a[d]=r,a[v]=c,d=v}}}return b}return null}function K(a,b){var c=a.sortIndex-b.sortIndex;return 0!==c?c:a.id-b.id}var N=[],O=[],P=1,Q=null,R=3,S=!1,T=!1,U=!1;function V(a){for(var b=L(O);null!==b;){if(null===b.callback)M(O);else{if(!(b.startTime<=a))break;M(O),b.sortIndex=b.expirationTime,J(N,b)}b=L(O)}}function W(a){if(U=!1,V(a),!T)if(null!==L(N))T=!0,f(X);else{var b=L(O);null!==b&&g(W,b.startTime-a)}}function X(a,b){T=!1,U&&(U=!1,h()),S=!0;var c=R;try{for(V(b),Q=L(N);null!==Q&&(!(Q.expirationTime>b)||a&&!k());){var d=Q.callback;if(null!==d){Q.callback=null,R=Q.priorityLevel;var e=d(Q.expirationTime<=b);b=exports.unstable_now(),"function"==typeof e?Q.callback=e:Q===L(N)&&M(N),V(b)}else M(N);Q=L(N)}if(null!==Q)var m=!0;else{var n=L(O);null!==n&&g(W,n.startTime-b),m=!1}return m}finally{Q=null,R=c,S=!1}}function Y(a){switch(a){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var Z=l;exports.unstable_IdlePriority=5,exports.unstable_ImmediatePriority=1,exports.unstable_LowPriority=4,exports.unstable_NormalPriority=3,exports.unstable_Profiling=null,exports.unstable_UserBlockingPriority=2,exports.unstable_cancelCallback=function(a){a.callback=null},exports.unstable_continueExecution=function(){T||S||(T=!0,f(X))},exports.unstable_getCurrentPriorityLevel=function(){return R},exports.unstable_getFirstCallbackNode=function(){return L(N)},exports.unstable_next=function(a){switch(R){case 1:case 2:case 3:var b=3;break;default:b=R}var c=R;R=b;try{return a()}finally{R=c}},exports.unstable_pauseExecution=function(){},exports.unstable_requestPaint=Z,exports.unstable_runWithPriority=function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var c=R;R=a;try{return b()}finally{R=c}},exports.unstable_scheduleCallback=function(a,b,c){var d=exports.unstable_now();if("object"==typeof c&&null!==c){var e=c.delay;e="number"==typeof e&&0<e?d+e:d,c="number"==typeof c.timeout?c.timeout:Y(a)}else c=Y(a),e=d;return a={id:P++,callback:b,priorityLevel:a,startTime:e,expirationTime:c=e+c,sortIndex:-1},e>d?(a.sortIndex=e,J(O,a),null===L(N)&&a===L(O)&&(U?h():U=!0,g(W,e-d))):(a.sortIndex=c,J(N,a),T||S||(T=!0,f(X))),a},exports.unstable_shouldYield=function(){var a=exports.unstable_now();V(a);var b=L(N);return b!==Q&&null!==Q&&null!==b&&null!==b.callback&&b.startTime<=a&&b.expirationTime<Q.expirationTime||k()},exports.unstable_wrapCallback=function(a){var b=R;return function(){var c=R;R=b;try{return a.apply(this,arguments)}finally{R=c}}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Designer=void 0;const React=__webpack_require__(129),ko=__webpack_require__(0);class Designer extends React.Component{constructor(props){super(props),this.ref=React.createRef()}componentDidMount(){return __awaiter(this,void 0,void 0,(function*(){ko.applyBindingsToNode(this.ref.current,{component:"app"},null)}))}render(){return React.createElement("div",{className:"fit",ref:this.ref})}}exports.Designer=Designer},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";(function(setImmediate){var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.InversifyInjector=void 0,__webpack_require__(65);const injection_1=__webpack_require__(130),inversify_1=__webpack_require__(428);exports.InversifyInjector=class{constructor(){this.bindSingleton=this.bindSingleton.bind(this),this.bind=this.bind.bind(this),this.container=new inversify_1.Container}getFunctionArguments(func){if(!func)throw new Error('Parameter "func" cannot be empty');if("function"!=typeof func)throw new Error('Parameter "func" is not a function.');const signature=func.toString(),classMatches=signature.match(/(constructor\s*\(([^\(\)]*)\))/);if(classMatches&&classMatches.length>=1){return classMatches[2].split(",").map(arg=>arg.replace(/\/\*.*\*\//,"").trim()).filter(arg=>arg)}const functionMatches=signature.match(/^function.*?\(([^\(\)]*)\)/);if(functionMatches&&functionMatches.length>=1){return functionMatches[1].split(",").map(arg=>arg.replace(/\/\*.*\*\//,"").trim()).filter(arg=>arg)}return[]}decorateComponent(name,component){if(Reflect.hasOwnMetadata(inversify_1.METADATA_KEY.PARAM_TYPES,component))return;try{inversify_1.decorate(inversify_1.injectable(),component),Reflect.defineMetadata(injection_1.InjectableMetadataKey,{name:name},component)}catch(error){console.warn(`Unable to decorate component "${name}". ${error.stack||error.message}`)}const constructorArguments=this.getFunctionArguments(component);for(let i=0;i<constructorArguments.length;i++)try{inversify_1.decorate(inversify_1.inject(constructorArguments[i]),component,i)}catch(error){console.warn(`Unable to decorate constructor argument "${constructorArguments[i]}" for component "${name}". ${error.stack||error.message}`)}}bindInternal(name,component){return this.container.isBound(name)&&this.container.unbind(name),this.decorateComponent(name,component),this.container.bind(name).to(component)}bind(name,component){this.bindInternal(name,component)}bindSingleton(name,singletone){this.bindInternal(name,singletone).inSingletonScope()}bindFactory(name,factory){let injector=this;this.bindInternal(name,(function(){return factory(injector)}))}bindSingletonFactory(name,factory){const injector=this;this.bindInternal(name,(function(){return factory(injector)})).inSingletonScope()}bindInstance(name,instance){this.container.isBound(name)&&this.container.unbind(name),this.container.bind(name).toConstantValue(instance)}resolve(runtimeIdentifier){const component=this.container.get(runtimeIdentifier);if(!component)throw new Error(`Component ${runtimeIdentifier} not found.`);return component}resolveClass(constructorFunc){return this.container.resolve(constructorFunc)}bindModule(module){module.register(this)}bindCollection(collectionName){const kernel=this.container,result=[];let Placeholder=class{};Placeholder=__decorate([inversify_1.injectable()],Placeholder);let Collection=class{constructor(){try{const collection=kernel.getAll(collectionName+"C");result.push(...collection.slice(1))}catch(error){throw new Error(`Unable to resolve collection "${collectionName}": ${error.stack||error.message}`)}return result}};Collection=__decorate([inversify_1.injectable(),__metadata("design:paramtypes",[])],Collection),this.container.bind(collectionName).to(Collection).inSingletonScope(),this.container.bind(collectionName+"C").to(Placeholder)}bindCollectionLazily(collectionName){const kernel=this.container,result=[];let Placeholder=class{};Placeholder=__decorate([inversify_1.injectable()],Placeholder);let Collection=class{constructor(){return setImmediate(()=>{try{const collection=kernel.getAll(collectionName+"C");result.push(...collection.slice(1))}catch(error){throw new Error(`Unable to resolve collection "${collectionName}": ${error.stack||error.message}`)}}),result}};Collection=__decorate([inversify_1.injectable(),__metadata("design:paramtypes",[])],Collection),this.container.bind(collectionName).to(Collection).inSingletonScope(),this.container.bind(collectionName+"C").to(Placeholder)}bindToCollection(collectionName,component,name){this.decorateComponent(collectionName+"C",component),this.container.bind(collectionName+"C").to(component),name&&this.container.bind(name).to(component)}bindInstanceToCollection(collectionName,instance,name){this.container.bind(collectionName+"C").toConstantValue(instance),name&&this.container.bind(name).toConstantValue(instance)}}}).call(this,__webpack_require__(60).setImmediate)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var keys=__webpack_require__(18);exports.METADATA_KEY=keys;var container_1=__webpack_require__(429);exports.Container=container_1.Container;var literal_types_1=__webpack_require__(36);exports.BindingScopeEnum=literal_types_1.BindingScopeEnum,exports.BindingTypeEnum=literal_types_1.BindingTypeEnum,exports.TargetTypeEnum=literal_types_1.TargetTypeEnum;var container_module_1=__webpack_require__(445);exports.AsyncContainerModule=container_module_1.AsyncContainerModule,exports.ContainerModule=container_module_1.ContainerModule;var injectable_1=__webpack_require__(446);exports.injectable=injectable_1.injectable;var tagged_1=__webpack_require__(447);exports.tagged=tagged_1.tagged;var named_1=__webpack_require__(448);exports.named=named_1.named;var inject_1=__webpack_require__(194);exports.inject=inject_1.inject,exports.LazyServiceIdentifer=inject_1.LazyServiceIdentifer;var optional_1=__webpack_require__(449);exports.optional=optional_1.optional;var unmanaged_1=__webpack_require__(450);exports.unmanaged=unmanaged_1.unmanaged;var multi_inject_1=__webpack_require__(451);exports.multiInject=multi_inject_1.multiInject;var target_name_1=__webpack_require__(452);exports.targetName=target_name_1.targetName;var post_construct_1=__webpack_require__(453);exports.postConstruct=post_construct_1.postConstruct;var metadata_reader_1=__webpack_require__(192);exports.MetadataReader=metadata_reader_1.MetadataReader;var id_1=__webpack_require__(56);exports.id=id_1.id;var decorator_utils_1=__webpack_require__(44);exports.decorate=decorator_utils_1.decorate;var constraint_helpers_1=__webpack_require__(197);exports.traverseAncerstors=constraint_helpers_1.traverseAncerstors,exports.taggedConstraint=constraint_helpers_1.taggedConstraint,exports.namedConstraint=constraint_helpers_1.namedConstraint,exports.typeConstraint=constraint_helpers_1.typeConstraint;var serialization_1=__webpack_require__(79);exports.getServiceIdentifierAsString=serialization_1.getServiceIdentifierAsString;var binding_utils_1=__webpack_require__(454);exports.multiBindToService=binding_utils_1.multiBindToService},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P((function(resolve){resolve(result.value)})).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=this&&this.__generator||function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=y[2&op[0]?"return":op[0]?"throw":"next"])&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[0,t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}};Object.defineProperty(exports,"__esModule",{value:!0});var binding_1=__webpack_require__(430),ERROR_MSGS=__webpack_require__(29),literal_types_1=__webpack_require__(36),METADATA_KEY=__webpack_require__(18),metadata_reader_1=__webpack_require__(192),planner_1=__webpack_require__(431),resolver_1=__webpack_require__(438),binding_to_syntax_1=__webpack_require__(440),id_1=__webpack_require__(56),serialization_1=__webpack_require__(79),container_snapshot_1=__webpack_require__(443),lookup_1=__webpack_require__(444),Container=function(){function Container(containerOptions){var options=containerOptions||{};if("object"!=typeof options)throw new Error(""+ERROR_MSGS.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0===options.defaultScope)options.defaultScope=literal_types_1.BindingScopeEnum.Transient;else if(options.defaultScope!==literal_types_1.BindingScopeEnum.Singleton&&options.defaultScope!==literal_types_1.BindingScopeEnum.Transient&&options.defaultScope!==literal_types_1.BindingScopeEnum.Request)throw new Error(""+ERROR_MSGS.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0===options.autoBindInjectable)options.autoBindInjectable=!1;else if("boolean"!=typeof options.autoBindInjectable)throw new Error(""+ERROR_MSGS.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(void 0===options.skipBaseClassChecks)options.skipBaseClassChecks=!1;else if("boolean"!=typeof options.skipBaseClassChecks)throw new Error(""+ERROR_MSGS.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:options.autoBindInjectable,defaultScope:options.defaultScope,skipBaseClassChecks:options.skipBaseClassChecks},this.id=id_1.id(),this._bindingDictionary=new lookup_1.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new metadata_reader_1.MetadataReader}return Container.merge=function(container1,container2){var container=new Container,bindingDictionary=planner_1.getBindingDictionary(container),bindingDictionary1=planner_1.getBindingDictionary(container1),bindingDictionary2=planner_1.getBindingDictionary(container2);function copyDictionary(origin,destination){origin.traverse((function(key,value){value.forEach((function(binding){destination.add(binding.serviceIdentifier,binding.clone())}))}))}return copyDictionary(bindingDictionary1,bindingDictionary),copyDictionary(bindingDictionary2,bindingDictionary),container},Container.prototype.load=function(){for(var modules=[],_i=0;_i<arguments.length;_i++)modules[_i]=arguments[_i];for(var getHelpers=this._getContainerModuleHelpersFactory(),_a=0,modules_1=modules;_a<modules_1.length;_a++){var currentModule=modules_1[_a],containerModuleHelpers=getHelpers(currentModule.id);currentModule.registry(containerModuleHelpers.bindFunction,containerModuleHelpers.unbindFunction,containerModuleHelpers.isboundFunction,containerModuleHelpers.rebindFunction)}},Container.prototype.loadAsync=function(){for(var modules=[],_i=0;_i<arguments.length;_i++)modules[_i]=arguments[_i];return __awaiter(this,void 0,void 0,(function(){var getHelpers,_a,modules_2,currentModule,containerModuleHelpers;return __generator(this,(function(_b){switch(_b.label){case 0:getHelpers=this._getContainerModuleHelpersFactory(),_a=0,modules_2=modules,_b.label=1;case 1:return _a<modules_2.length?(currentModule=modules_2[_a],containerModuleHelpers=getHelpers(currentModule.id),[4,currentModule.registry(containerModuleHelpers.bindFunction,containerModuleHelpers.unbindFunction,containerModuleHelpers.isboundFunction,containerModuleHelpers.rebindFunction)]):[3,4];case 2:_b.sent(),_b.label=3;case 3:return _a++,[3,1];case 4:return[2]}}))}))},Container.prototype.unload=function(){for(var _this=this,modules=[],_i=0;_i<arguments.length;_i++)modules[_i]=arguments[_i];var conditionFactory=function(expected){return function(item){return item.moduleId===expected}};modules.forEach((function(module){var condition=conditionFactory(module.id);_this._bindingDictionary.removeByCondition(condition)}))},Container.prototype.bind=function(serviceIdentifier){var scope=this.options.defaultScope||literal_types_1.BindingScopeEnum.Transient,binding=new binding_1.Binding(serviceIdentifier,scope);return this._bindingDictionary.add(serviceIdentifier,binding),new binding_to_syntax_1.BindingToSyntax(binding)},Container.prototype.rebind=function(serviceIdentifier){return this.unbind(serviceIdentifier),this.bind(serviceIdentifier)},Container.prototype.unbind=function(serviceIdentifier){try{this._bindingDictionary.remove(serviceIdentifier)}catch(e){throw new Error(ERROR_MSGS.CANNOT_UNBIND+" "+serialization_1.getServiceIdentifierAsString(serviceIdentifier))}},Container.prototype.unbindAll=function(){this._bindingDictionary=new lookup_1.Lookup},Container.prototype.isBound=function(serviceIdentifier){var bound=this._bindingDictionary.hasKey(serviceIdentifier);return!bound&&this.parent&&(bound=this.parent.isBound(serviceIdentifier)),bound},Container.prototype.isBoundNamed=function(serviceIdentifier,named){return this.isBoundTagged(serviceIdentifier,METADATA_KEY.NAMED_TAG,named)},Container.prototype.isBoundTagged=function(serviceIdentifier,key,value){var bound=!1;if(this._bindingDictionary.hasKey(serviceIdentifier)){var bindings=this._bindingDictionary.get(serviceIdentifier),request_1=planner_1.createMockRequest(this,serviceIdentifier,key,value);bound=bindings.some((function(b){return b.constraint(request_1)}))}return!bound&&this.parent&&(bound=this.parent.isBoundTagged(serviceIdentifier,key,value)),bound},Container.prototype.snapshot=function(){this._snapshots.push(container_snapshot_1.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},Container.prototype.restore=function(){var snapshot=this._snapshots.pop();if(void 0===snapshot)throw new Error(ERROR_MSGS.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=snapshot.bindings,this._middleware=snapshot.middleware},Container.prototype.createChild=function(containerOptions){var child=new Container(containerOptions||this.options);return child.parent=this,child},Container.prototype.applyMiddleware=function(){for(var middlewares=[],_i=0;_i<arguments.length;_i++)middlewares[_i]=arguments[_i];var initial=this._middleware?this._middleware:this._planAndResolve();this._middleware=middlewares.reduce((function(prev,curr){return curr(prev)}),initial)},Container.prototype.applyCustomMetadataReader=function(metadataReader){this._metadataReader=metadataReader},Container.prototype.get=function(serviceIdentifier){return this._get(!1,!1,literal_types_1.TargetTypeEnum.Variable,serviceIdentifier)},Container.prototype.getTagged=function(serviceIdentifier,key,value){return this._get(!1,!1,literal_types_1.TargetTypeEnum.Variable,serviceIdentifier,key,value)},Container.prototype.getNamed=function(serviceIdentifier,named){return this.getTagged(serviceIdentifier,METADATA_KEY.NAMED_TAG,named)},Container.prototype.getAll=function(serviceIdentifier){return this._get(!0,!0,literal_types_1.TargetTypeEnum.Variable,serviceIdentifier)},Container.prototype.getAllTagged=function(serviceIdentifier,key,value){return this._get(!1,!0,literal_types_1.TargetTypeEnum.Variable,serviceIdentifier,key,value)},Container.prototype.getAllNamed=function(serviceIdentifier,named){return this.getAllTagged(serviceIdentifier,METADATA_KEY.NAMED_TAG,named)},Container.prototype.resolve=function(constructorFunction){var tempContainer=this.createChild();return tempContainer.bind(constructorFunction).toSelf(),tempContainer.get(constructorFunction)},Container.prototype._getContainerModuleHelpersFactory=function(){var _this=this,setModuleId=function(bindingToSyntax,moduleId){bindingToSyntax._binding.moduleId=moduleId},getRebindFunction=function(moduleId){return function(serviceIdentifier){var bindingToSyntax=_this.rebind.bind(_this)(serviceIdentifier);return setModuleId(bindingToSyntax,moduleId),bindingToSyntax}};return function(mId){return{bindFunction:(moduleId=mId,function(serviceIdentifier){var bindingToSyntax=_this.bind.bind(_this)(serviceIdentifier);return setModuleId(bindingToSyntax,moduleId),bindingToSyntax}),isboundFunction:function(serviceIdentifier){return _this.isBound.bind(_this)(serviceIdentifier)},rebindFunction:getRebindFunction(mId),unbindFunction:function(serviceIdentifier){_this.unbind.bind(_this)(serviceIdentifier)}};var moduleId}},Container.prototype._get=function(avoidConstraints,isMultiInject,targetType,serviceIdentifier,key,value){var result=null,defaultArgs={avoidConstraints:avoidConstraints,contextInterceptor:function(context){return context},isMultiInject:isMultiInject,key:key,serviceIdentifier:serviceIdentifier,targetType:targetType,value:value};if(this._middleware){if(null==(result=this._middleware(defaultArgs)))throw new Error(ERROR_MSGS.INVALID_MIDDLEWARE_RETURN)}else result=this._planAndResolve()(defaultArgs);return result},Container.prototype._planAndResolve=function(){var _this=this;return function(args){var context=planner_1.plan(_this._metadataReader,_this,args.isMultiInject,args.targetType,args.serviceIdentifier,args.key,args.value,args.avoidConstraints);return context=args.contextInterceptor(context),resolver_1.resolve(context)}},Container}();exports.Container=Container},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var literal_types_1=__webpack_require__(36),id_1=__webpack_require__(56),Binding=function(){function Binding(serviceIdentifier,scope){this.id=id_1.id(),this.activated=!1,this.serviceIdentifier=serviceIdentifier,this.scope=scope,this.type=literal_types_1.BindingTypeEnum.Invalid,this.constraint=function(request){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return Binding.prototype.clone=function(){var clone=new Binding(this.serviceIdentifier,this.scope);return clone.activated=!1,clone.implementationType=this.implementationType,clone.dynamicValue=this.dynamicValue,clone.scope=this.scope,clone.type=this.type,clone.factory=this.factory,clone.provider=this.provider,clone.constraint=this.constraint,clone.onActivation=this.onActivation,clone.cache=this.cache,clone},Binding}();exports.Binding=Binding},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var binding_count_1=__webpack_require__(432),ERROR_MSGS=__webpack_require__(29),literal_types_1=__webpack_require__(36),METADATA_KEY=__webpack_require__(18),exceptions_1=__webpack_require__(193),serialization_1=__webpack_require__(79),context_1=__webpack_require__(433),metadata_1=__webpack_require__(33),plan_1=__webpack_require__(434),reflection_utils_1=__webpack_require__(435),request_1=__webpack_require__(437),target_1=__webpack_require__(195);function getBindingDictionary(cntnr){return cntnr._bindingDictionary}function _getActiveBindings(metadataReader,avoidConstraints,context,parentRequest,target){var bindings=getBindings(context.container,target.serviceIdentifier),activeBindings=[];return bindings.length===binding_count_1.BindingCount.NoBindingsAvailable&&context.container.options.autoBindInjectable&&"function"==typeof target.serviceIdentifier&&metadataReader.getConstructorMetadata(target.serviceIdentifier).compilerGeneratedMetadata&&(context.container.bind(target.serviceIdentifier).toSelf(),bindings=getBindings(context.container,target.serviceIdentifier)),activeBindings=avoidConstraints?bindings:bindings.filter((function(binding){var request=new request_1.Request(binding.serviceIdentifier,context,parentRequest,binding,target);return binding.constraint(request)})),function(serviceIdentifier,bindings,target,container){switch(bindings.length){case binding_count_1.BindingCount.NoBindingsAvailable:if(target.isOptional())return bindings;var serviceIdentifierString=serialization_1.getServiceIdentifierAsString(serviceIdentifier),msg=ERROR_MSGS.NOT_REGISTERED;throw msg+=serialization_1.listMetadataForTarget(serviceIdentifierString,target),msg+=serialization_1.listRegisteredBindingsForServiceIdentifier(container,serviceIdentifierString,getBindings),new Error(msg);case binding_count_1.BindingCount.OnlyOneBindingAvailable:if(!target.isArray())return bindings;case binding_count_1.BindingCount.MultipleBindingsAvailable:default:if(target.isArray())return bindings;serviceIdentifierString=serialization_1.getServiceIdentifierAsString(serviceIdentifier),msg=ERROR_MSGS.AMBIGUOUS_MATCH+" "+serviceIdentifierString;throw msg+=serialization_1.listRegisteredBindingsForServiceIdentifier(container,serviceIdentifierString,getBindings),new Error(msg)}}(target.serviceIdentifier,activeBindings,target,context.container),activeBindings}function getBindings(container,serviceIdentifier){var bindings=[],bindingDictionary=getBindingDictionary(container);return bindingDictionary.hasKey(serviceIdentifier)?bindings=bindingDictionary.get(serviceIdentifier):null!==container.parent&&(bindings=getBindings(container.parent,serviceIdentifier)),bindings}exports.getBindingDictionary=getBindingDictionary,exports.plan=function(metadataReader,container,isMultiInject,targetType,serviceIdentifier,key,value,avoidConstraints){void 0===avoidConstraints&&(avoidConstraints=!1);var context=new context_1.Context(container),target=function(isMultiInject,targetType,serviceIdentifier,name,key,value){var metadataKey=isMultiInject?METADATA_KEY.MULTI_INJECT_TAG:METADATA_KEY.INJECT_TAG,injectMetadata=new metadata_1.Metadata(metadataKey,serviceIdentifier),target=new target_1.Target(targetType,name,serviceIdentifier,injectMetadata);if(void 0!==key){var tagMetadata=new metadata_1.Metadata(key,value);target.metadata.push(tagMetadata)}return target}(isMultiInject,targetType,serviceIdentifier,"",key,value);try{return function _createSubRequests(metadataReader,avoidConstraints,serviceIdentifier,context,parentRequest,target){var activeBindings,childRequest;if(null===parentRequest){activeBindings=_getActiveBindings(metadataReader,avoidConstraints,context,null,target),childRequest=new request_1.Request(serviceIdentifier,context,null,activeBindings,target);var thePlan=new plan_1.Plan(context,childRequest);context.addPlan(thePlan)}else activeBindings=_getActiveBindings(metadataReader,avoidConstraints,context,parentRequest,target),childRequest=parentRequest.addChildRequest(target.serviceIdentifier,activeBindings,target);activeBindings.forEach((function(binding){var subChildRequest=null;if(target.isArray())subChildRequest=childRequest.addChildRequest(binding.serviceIdentifier,binding,target);else{if(binding.cache)return;subChildRequest=childRequest}if(binding.type===literal_types_1.BindingTypeEnum.Instance&&null!==binding.implementationType){var dependencies=reflection_utils_1.getDependencies(metadataReader,binding.implementationType);if(!context.container.options.skipBaseClassChecks){var baseClassDependencyCount=reflection_utils_1.getBaseClassDependencyCount(metadataReader,binding.implementationType);if(dependencies.length<baseClassDependencyCount){var error=ERROR_MSGS.ARGUMENTS_LENGTH_MISMATCH(reflection_utils_1.getFunctionName(binding.implementationType));throw new Error(error)}}dependencies.forEach((function(dependency){_createSubRequests(metadataReader,!1,dependency.serviceIdentifier,context,subChildRequest,dependency)}))}}))}(metadataReader,avoidConstraints,serviceIdentifier,context,null,target),context}catch(error){throw exceptions_1.isStackOverflowExeption(error)&&context.plan&&serialization_1.circularDependencyToException(context.plan.rootRequest),error}},exports.createMockRequest=function(container,serviceIdentifier,key,value){var target=new target_1.Target(literal_types_1.TargetTypeEnum.Variable,"",serviceIdentifier,new metadata_1.Metadata(key,value)),context=new context_1.Context(container);return new request_1.Request(serviceIdentifier,context,null,[],target)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.BindingCount={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var id_1=__webpack_require__(56),Context=function(){function Context(container){this.id=id_1.id(),this.container=container}return Context.prototype.addPlan=function(plan){this.plan=plan},Context.prototype.setCurrentRequest=function(currentRequest){this.currentRequest=currentRequest},Context}();exports.Context=Context},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Plan=function(parentContext,rootRequest){this.parentContext=parentContext,this.rootRequest=rootRequest};exports.Plan=Plan},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var inject_1=__webpack_require__(194),ERROR_MSGS=__webpack_require__(29),literal_types_1=__webpack_require__(36),METADATA_KEY=__webpack_require__(18),serialization_1=__webpack_require__(79);exports.getFunctionName=serialization_1.getFunctionName;var target_1=__webpack_require__(195);function getTargets(metadataReader,constructorName,func,isBaseClass){var metadata=metadataReader.getConstructorMetadata(func),serviceIdentifiers=metadata.compilerGeneratedMetadata;if(void 0===serviceIdentifiers){var msg=ERROR_MSGS.MISSING_INJECTABLE_ANNOTATION+" "+constructorName+".";throw new Error(msg)}var constructorArgsMetadata=metadata.userGeneratedMetadata,keys=Object.keys(constructorArgsMetadata),constructorTargets=function(isBaseClass,constructorName,serviceIdentifiers,constructorArgsMetadata,iterations){for(var targets=[],i=0;i<iterations;i++){var target=getConstructorArgsAsTarget(i,isBaseClass,constructorName,serviceIdentifiers,constructorArgsMetadata);null!==target&&targets.push(target)}return targets}(isBaseClass,constructorName,serviceIdentifiers,constructorArgsMetadata,0===func.length&&keys.length>0?keys.length:func.length),propertyTargets=function getClassPropsAsTargets(metadataReader,constructorFunc){for(var classPropsMetadata=metadataReader.getPropertiesMetadata(constructorFunc),targets=[],keys=Object.keys(classPropsMetadata),_i=0,keys_1=keys;_i<keys_1.length;_i++){var key=keys_1[_i],targetMetadata=classPropsMetadata[key],metadata=formatTargetMetadata(classPropsMetadata[key]),targetName=metadata.targetName||key,serviceIdentifier=metadata.inject||metadata.multiInject,target=new target_1.Target(literal_types_1.TargetTypeEnum.ClassProperty,targetName,serviceIdentifier);target.metadata=targetMetadata,targets.push(target)}var baseConstructor=Object.getPrototypeOf(constructorFunc.prototype).constructor;if(baseConstructor!==Object){var baseTargets=getClassPropsAsTargets(metadataReader,baseConstructor);targets=targets.concat(baseTargets)}return targets}(metadataReader,func);return constructorTargets.concat(propertyTargets)}function getConstructorArgsAsTarget(index,isBaseClass,constructorName,serviceIdentifiers,constructorArgsMetadata){var targetMetadata=constructorArgsMetadata[index.toString()]||[],metadata=formatTargetMetadata(targetMetadata),isManaged=!0!==metadata.unmanaged,serviceIdentifier=serviceIdentifiers[index],injectIdentifier=metadata.inject||metadata.multiInject;if((serviceIdentifier=injectIdentifier||serviceIdentifier)instanceof inject_1.LazyServiceIdentifer&&(serviceIdentifier=serviceIdentifier.unwrap()),isManaged){if(!isBaseClass&&(serviceIdentifier===Object||serviceIdentifier===Function||void 0===serviceIdentifier)){var msg=ERROR_MSGS.MISSING_INJECT_ANNOTATION+" argument "+index+" in class "+constructorName+".";throw new Error(msg)}var target=new target_1.Target(literal_types_1.TargetTypeEnum.ConstructorArgument,metadata.targetName,serviceIdentifier);return target.metadata=targetMetadata,target}return null}function formatTargetMetadata(targetMetadata){var targetMetadataMap={};return targetMetadata.forEach((function(m){targetMetadataMap[m.key.toString()]=m.value})),{inject:targetMetadataMap[METADATA_KEY.INJECT_TAG],multiInject:targetMetadataMap[METADATA_KEY.MULTI_INJECT_TAG],targetName:targetMetadataMap[METADATA_KEY.NAME_TAG],unmanaged:targetMetadataMap[METADATA_KEY.UNMANAGED_TAG]}}exports.getDependencies=function(metadataReader,func){return getTargets(metadataReader,serialization_1.getFunctionName(func),func,!1)},exports.getBaseClassDependencyCount=function getBaseClassDependencyCount(metadataReader,func){var baseConstructor=Object.getPrototypeOf(func.prototype).constructor;if(baseConstructor!==Object){var targets=getTargets(metadataReader,serialization_1.getFunctionName(baseConstructor),baseConstructor,!0),metadata=targets.map((function(t){return t.metadata.filter((function(m){return m.key===METADATA_KEY.UNMANAGED_TAG}))})),unmanagedCount=[].concat.apply([],metadata).length,dependencyCount=targets.length-unmanagedCount;return dependencyCount>0?dependencyCount:getBaseClassDependencyCount(metadataReader,baseConstructor)}return 0}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var QueryableString=function(){function QueryableString(str){this.str=str}return QueryableString.prototype.startsWith=function(searchString){return 0===this.str.indexOf(searchString)},QueryableString.prototype.endsWith=function(searchString){var reverseString,reverseSearchString=searchString.split("").reverse().join("");return reverseString=this.str.split("").reverse().join(""),this.startsWith.call({str:reverseString},reverseSearchString)},QueryableString.prototype.contains=function(searchString){return-1!==this.str.indexOf(searchString)},QueryableString.prototype.equals=function(compareString){return this.str===compareString},QueryableString.prototype.value=function(){return this.str},QueryableString}();exports.QueryableString=QueryableString},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var id_1=__webpack_require__(56),Request=function(){function Request(serviceIdentifier,parentContext,parentRequest,bindings,target){this.id=id_1.id(),this.serviceIdentifier=serviceIdentifier,this.parentContext=parentContext,this.parentRequest=parentRequest,this.target=target,this.childRequests=[],this.bindings=Array.isArray(bindings)?bindings:[bindings],this.requestScope=null===parentRequest?new Map:null}return Request.prototype.addChildRequest=function(serviceIdentifier,bindings,target){var child=new Request(serviceIdentifier,this.parentContext,this,bindings,target);return this.childRequests.push(child),child},Request}();exports.Request=Request},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ERROR_MSGS=__webpack_require__(29),literal_types_1=__webpack_require__(36),exceptions_1=__webpack_require__(193),serialization_1=__webpack_require__(79),instantiation_1=__webpack_require__(439),invokeFactory=function(factoryType,serviceIdentifier,fn){try{return fn()}catch(error){throw exceptions_1.isStackOverflowExeption(error)?new Error(ERROR_MSGS.CIRCULAR_DEPENDENCY_IN_FACTORY(factoryType,serviceIdentifier.toString())):error}},_resolveRequest=function(requestScope){return function(request){request.parentContext.setCurrentRequest(request);var bindings=request.bindings,childRequests=request.childRequests,targetIsAnArray=request.target&&request.target.isArray(),targetParentIsNotAnArray=!(request.parentRequest&&request.parentRequest.target&&request.target&&request.parentRequest.target.matchesArray(request.target.serviceIdentifier));if(targetIsAnArray&&targetParentIsNotAnArray)return childRequests.map((function(childRequest){return _resolveRequest(requestScope)(childRequest)}));var result=null;if(!request.target.isOptional()||0!==bindings.length){var binding_1=bindings[0],isSingleton=binding_1.scope===literal_types_1.BindingScopeEnum.Singleton,isRequestSingleton=binding_1.scope===literal_types_1.BindingScopeEnum.Request;if(isSingleton&&binding_1.activated)return binding_1.cache;if(isRequestSingleton&&null!==requestScope&&requestScope.has(binding_1.id))return requestScope.get(binding_1.id);if(binding_1.type===literal_types_1.BindingTypeEnum.ConstantValue)result=binding_1.cache;else if(binding_1.type===literal_types_1.BindingTypeEnum.Function)result=binding_1.cache;else if(binding_1.type===literal_types_1.BindingTypeEnum.Constructor)result=binding_1.implementationType;else if(binding_1.type===literal_types_1.BindingTypeEnum.DynamicValue&&null!==binding_1.dynamicValue)result=invokeFactory("toDynamicValue",binding_1.serviceIdentifier,(function(){return binding_1.dynamicValue(request.parentContext)}));else if(binding_1.type===literal_types_1.BindingTypeEnum.Factory&&null!==binding_1.factory)result=invokeFactory("toFactory",binding_1.serviceIdentifier,(function(){return binding_1.factory(request.parentContext)}));else if(binding_1.type===literal_types_1.BindingTypeEnum.Provider&&null!==binding_1.provider)result=invokeFactory("toProvider",binding_1.serviceIdentifier,(function(){return binding_1.provider(request.parentContext)}));else{if(binding_1.type!==literal_types_1.BindingTypeEnum.Instance||null===binding_1.implementationType){var serviceIdentifier=serialization_1.getServiceIdentifierAsString(request.serviceIdentifier);throw new Error(ERROR_MSGS.INVALID_BINDING_TYPE+" "+serviceIdentifier)}result=instantiation_1.resolveInstance(binding_1.implementationType,childRequests,_resolveRequest(requestScope))}return"function"==typeof binding_1.onActivation&&(result=binding_1.onActivation(request.parentContext,result)),isSingleton&&(binding_1.cache=result,binding_1.activated=!0),isRequestSingleton&&null!==requestScope&&!requestScope.has(binding_1.id)&&requestScope.set(binding_1.id,result),result}}};exports.resolve=function(context){return _resolveRequest(context.plan.rootRequest.requestScope)(context.plan.rootRequest)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var error_msgs_1=__webpack_require__(29),literal_types_1=__webpack_require__(36),METADATA_KEY=__webpack_require__(18);exports.resolveInstance=function(constr,childRequests,resolveRequest){var Func,injections,result=null;if(childRequests.length>0){var constructorInjections=childRequests.filter((function(childRequest){return null!==childRequest.target&&childRequest.target.type===literal_types_1.TargetTypeEnum.ConstructorArgument})).map(resolveRequest);injections=constructorInjections,result=function(instance,childRequests,resolveRequest){var propertyInjectionsRequests=childRequests.filter((function(childRequest){return null!==childRequest.target&&childRequest.target.type===literal_types_1.TargetTypeEnum.ClassProperty})),propertyInjections=propertyInjectionsRequests.map(resolveRequest);return propertyInjectionsRequests.forEach((function(r,index){var propertyName;propertyName=r.target.name.value();var injection=propertyInjections[index];instance[propertyName]=injection})),instance}(result=new((Func=constr).bind.apply(Func,[void 0].concat(injections))),childRequests,resolveRequest)}else result=new constr;return function(constr,result){if(Reflect.hasMetadata(METADATA_KEY.POST_CONSTRUCT,constr)){var data=Reflect.getMetadata(METADATA_KEY.POST_CONSTRUCT,constr);try{result[data.value]()}catch(e){throw new Error(error_msgs_1.POST_CONSTRUCT_ERROR(constr.name,e.message))}}}(constr,result),result}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ERROR_MSGS=__webpack_require__(29),literal_types_1=__webpack_require__(36),binding_in_when_on_syntax_1=__webpack_require__(441),binding_when_on_syntax_1=__webpack_require__(196),BindingToSyntax=function(){function BindingToSyntax(binding){this._binding=binding}return BindingToSyntax.prototype.to=function(constructor){return this._binding.type=literal_types_1.BindingTypeEnum.Instance,this._binding.implementationType=constructor,new binding_in_when_on_syntax_1.BindingInWhenOnSyntax(this._binding)},BindingToSyntax.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error(""+ERROR_MSGS.INVALID_TO_SELF_VALUE);var self=this._binding.serviceIdentifier;return this.to(self)},BindingToSyntax.prototype.toConstantValue=function(value){return this._binding.type=literal_types_1.BindingTypeEnum.ConstantValue,this._binding.cache=value,this._binding.dynamicValue=null,this._binding.implementationType=null,new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding)},BindingToSyntax.prototype.toDynamicValue=function(func){return this._binding.type=literal_types_1.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=func,this._binding.implementationType=null,new binding_in_when_on_syntax_1.BindingInWhenOnSyntax(this._binding)},BindingToSyntax.prototype.toConstructor=function(constructor){return this._binding.type=literal_types_1.BindingTypeEnum.Constructor,this._binding.implementationType=constructor,new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding)},BindingToSyntax.prototype.toFactory=function(factory){return this._binding.type=literal_types_1.BindingTypeEnum.Factory,this._binding.factory=factory,new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding)},BindingToSyntax.prototype.toFunction=function(func){if("function"!=typeof func)throw new Error(ERROR_MSGS.INVALID_FUNCTION_BINDING);var bindingWhenOnSyntax=this.toConstantValue(func);return this._binding.type=literal_types_1.BindingTypeEnum.Function,bindingWhenOnSyntax},BindingToSyntax.prototype.toAutoFactory=function(serviceIdentifier){return this._binding.type=literal_types_1.BindingTypeEnum.Factory,this._binding.factory=function(context){return function(){return context.container.get(serviceIdentifier)}},new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding)},BindingToSyntax.prototype.toProvider=function(provider){return this._binding.type=literal_types_1.BindingTypeEnum.Provider,this._binding.provider=provider,new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding)},BindingToSyntax.prototype.toService=function(service){this.toDynamicValue((function(context){return context.container.get(service)}))},BindingToSyntax}();exports.BindingToSyntax=BindingToSyntax},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var binding_in_syntax_1=__webpack_require__(442),binding_on_syntax_1=__webpack_require__(131),binding_when_syntax_1=__webpack_require__(132),BindingInWhenOnSyntax=function(){function BindingInWhenOnSyntax(binding){this._binding=binding,this._bindingWhenSyntax=new binding_when_syntax_1.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new binding_on_syntax_1.BindingOnSyntax(this._binding),this._bindingInSyntax=new binding_in_syntax_1.BindingInSyntax(binding)}return BindingInWhenOnSyntax.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},BindingInWhenOnSyntax.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},BindingInWhenOnSyntax.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},BindingInWhenOnSyntax.prototype.when=function(constraint){return this._bindingWhenSyntax.when(constraint)},BindingInWhenOnSyntax.prototype.whenTargetNamed=function(name){return this._bindingWhenSyntax.whenTargetNamed(name)},BindingInWhenOnSyntax.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},BindingInWhenOnSyntax.prototype.whenTargetTagged=function(tag,value){return this._bindingWhenSyntax.whenTargetTagged(tag,value)},BindingInWhenOnSyntax.prototype.whenInjectedInto=function(parent){return this._bindingWhenSyntax.whenInjectedInto(parent)},BindingInWhenOnSyntax.prototype.whenParentNamed=function(name){return this._bindingWhenSyntax.whenParentNamed(name)},BindingInWhenOnSyntax.prototype.whenParentTagged=function(tag,value){return this._bindingWhenSyntax.whenParentTagged(tag,value)},BindingInWhenOnSyntax.prototype.whenAnyAncestorIs=function(ancestor){return this._bindingWhenSyntax.whenAnyAncestorIs(ancestor)},BindingInWhenOnSyntax.prototype.whenNoAncestorIs=function(ancestor){return this._bindingWhenSyntax.whenNoAncestorIs(ancestor)},BindingInWhenOnSyntax.prototype.whenAnyAncestorNamed=function(name){return this._bindingWhenSyntax.whenAnyAncestorNamed(name)},BindingInWhenOnSyntax.prototype.whenAnyAncestorTagged=function(tag,value){return this._bindingWhenSyntax.whenAnyAncestorTagged(tag,value)},BindingInWhenOnSyntax.prototype.whenNoAncestorNamed=function(name){return this._bindingWhenSyntax.whenNoAncestorNamed(name)},BindingInWhenOnSyntax.prototype.whenNoAncestorTagged=function(tag,value){return this._bindingWhenSyntax.whenNoAncestorTagged(tag,value)},BindingInWhenOnSyntax.prototype.whenAnyAncestorMatches=function(constraint){return this._bindingWhenSyntax.whenAnyAncestorMatches(constraint)},BindingInWhenOnSyntax.prototype.whenNoAncestorMatches=function(constraint){return this._bindingWhenSyntax.whenNoAncestorMatches(constraint)},BindingInWhenOnSyntax.prototype.onActivation=function(handler){return this._bindingOnSyntax.onActivation(handler)},BindingInWhenOnSyntax}();exports.BindingInWhenOnSyntax=BindingInWhenOnSyntax},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var literal_types_1=__webpack_require__(36),binding_when_on_syntax_1=__webpack_require__(196),BindingInSyntax=function(){function BindingInSyntax(binding){this._binding=binding}return BindingInSyntax.prototype.inRequestScope=function(){return this._binding.scope=literal_types_1.BindingScopeEnum.Request,new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding)},BindingInSyntax.prototype.inSingletonScope=function(){return this._binding.scope=literal_types_1.BindingScopeEnum.Singleton,new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding)},BindingInSyntax.prototype.inTransientScope=function(){return this._binding.scope=literal_types_1.BindingScopeEnum.Transient,new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding)},BindingInSyntax}();exports.BindingInSyntax=BindingInSyntax},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ContainerSnapshot=function(){function ContainerSnapshot(){}return ContainerSnapshot.of=function(bindings,middleware){var snapshot=new ContainerSnapshot;return snapshot.bindings=bindings,snapshot.middleware=middleware,snapshot},ContainerSnapshot}();exports.ContainerSnapshot=ContainerSnapshot},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ERROR_MSGS=__webpack_require__(29),Lookup=function(){function Lookup(){this._map=new Map}return Lookup.prototype.getMap=function(){return this._map},Lookup.prototype.add=function(serviceIdentifier,value){if(null==serviceIdentifier)throw new Error(ERROR_MSGS.NULL_ARGUMENT);if(null==value)throw new Error(ERROR_MSGS.NULL_ARGUMENT);var entry=this._map.get(serviceIdentifier);void 0!==entry?(entry.push(value),this._map.set(serviceIdentifier,entry)):this._map.set(serviceIdentifier,[value])},Lookup.prototype.get=function(serviceIdentifier){if(null==serviceIdentifier)throw new Error(ERROR_MSGS.NULL_ARGUMENT);var entry=this._map.get(serviceIdentifier);if(void 0!==entry)return entry;throw new Error(ERROR_MSGS.KEY_NOT_FOUND)},Lookup.prototype.remove=function(serviceIdentifier){if(null==serviceIdentifier)throw new Error(ERROR_MSGS.NULL_ARGUMENT);if(!this._map.delete(serviceIdentifier))throw new Error(ERROR_MSGS.KEY_NOT_FOUND)},Lookup.prototype.removeByCondition=function(condition){var _this=this;this._map.forEach((function(entries,key){var updatedEntries=entries.filter((function(entry){return!condition(entry)}));updatedEntries.length>0?_this._map.set(key,updatedEntries):_this._map.delete(key)}))},Lookup.prototype.hasKey=function(serviceIdentifier){if(null==serviceIdentifier)throw new Error(ERROR_MSGS.NULL_ARGUMENT);return this._map.has(serviceIdentifier)},Lookup.prototype.clone=function(){var copy=new Lookup;return this._map.forEach((function(value,key){value.forEach((function(b){return copy.add(key,b.clone())}))})),copy},Lookup.prototype.traverse=function(func){this._map.forEach((function(value,key){func(key,value)}))},Lookup}();exports.Lookup=Lookup},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var id_1=__webpack_require__(56),ContainerModule=function(registry){this.id=id_1.id(),this.registry=registry};exports.ContainerModule=ContainerModule;var AsyncContainerModule=function(registry){this.id=id_1.id(),this.registry=registry};exports.AsyncContainerModule=AsyncContainerModule},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ERRORS_MSGS=__webpack_require__(29),METADATA_KEY=__webpack_require__(18);exports.injectable=function(){return function(target){if(Reflect.hasOwnMetadata(METADATA_KEY.PARAM_TYPES,target))throw new Error(ERRORS_MSGS.DUPLICATED_INJECTABLE_DECORATOR);var types=Reflect.getMetadata(METADATA_KEY.DESIGN_PARAM_TYPES,target)||[];return Reflect.defineMetadata(METADATA_KEY.PARAM_TYPES,types,target),target}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var metadata_1=__webpack_require__(33),decorator_utils_1=__webpack_require__(44);exports.tagged=function(metadataKey,metadataValue){return function(target,targetKey,index){var metadata=new metadata_1.Metadata(metadataKey,metadataValue);"number"==typeof index?decorator_utils_1.tagParameter(target,targetKey,index,metadata):decorator_utils_1.tagProperty(target,targetKey,metadata)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var METADATA_KEY=__webpack_require__(18),metadata_1=__webpack_require__(33),decorator_utils_1=__webpack_require__(44);exports.named=function(name){return function(target,targetKey,index){var metadata=new metadata_1.Metadata(METADATA_KEY.NAMED_TAG,name);"number"==typeof index?decorator_utils_1.tagParameter(target,targetKey,index,metadata):decorator_utils_1.tagProperty(target,targetKey,metadata)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var METADATA_KEY=__webpack_require__(18),metadata_1=__webpack_require__(33),decorator_utils_1=__webpack_require__(44);exports.optional=function(){return function(target,targetKey,index){var metadata=new metadata_1.Metadata(METADATA_KEY.OPTIONAL_TAG,!0);"number"==typeof index?decorator_utils_1.tagParameter(target,targetKey,index,metadata):decorator_utils_1.tagProperty(target,targetKey,metadata)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var METADATA_KEY=__webpack_require__(18),metadata_1=__webpack_require__(33),decorator_utils_1=__webpack_require__(44);exports.unmanaged=function(){return function(target,targetKey,index){var metadata=new metadata_1.Metadata(METADATA_KEY.UNMANAGED_TAG,!0);decorator_utils_1.tagParameter(target,targetKey,index,metadata)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var METADATA_KEY=__webpack_require__(18),metadata_1=__webpack_require__(33),decorator_utils_1=__webpack_require__(44);exports.multiInject=function(serviceIdentifier){return function(target,targetKey,index){var metadata=new metadata_1.Metadata(METADATA_KEY.MULTI_INJECT_TAG,serviceIdentifier);"number"==typeof index?decorator_utils_1.tagParameter(target,targetKey,index,metadata):decorator_utils_1.tagProperty(target,targetKey,metadata)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var METADATA_KEY=__webpack_require__(18),metadata_1=__webpack_require__(33),decorator_utils_1=__webpack_require__(44);exports.targetName=function(name){return function(target,targetKey,index){var metadata=new metadata_1.Metadata(METADATA_KEY.NAME_TAG,name);decorator_utils_1.tagParameter(target,targetKey,index,metadata)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ERRORS_MSGS=__webpack_require__(29),METADATA_KEY=__webpack_require__(18),metadata_1=__webpack_require__(33);exports.postConstruct=function(){return function(target,propertyKey,descriptor){var metadata=new metadata_1.Metadata(METADATA_KEY.POST_CONSTRUCT,propertyKey);if(Reflect.hasOwnMetadata(METADATA_KEY.POST_CONSTRUCT,target.constructor))throw new Error(ERRORS_MSGS.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(METADATA_KEY.POST_CONSTRUCT,metadata,target.constructor)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.multiBindToService=function(container){return function(service){return function(){for(var types=[],_i=0;_i<arguments.length;_i++)types[_i]=arguments[_i];return types.forEach((function(t){return container.bind(t).toService(service)}))}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.InjectableMetadataKey=void 0,exports.InjectableMetadataKey="paperbits-injectable"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CoreDesignModule=void 0;const hinter_1=__webpack_require__(457),confirmation_1=__webpack_require__(458),bindingHandlers_lightbox_1=__webpack_require__(198),bindingHandlers_grid_1=__webpack_require__(199),bindingHandlers_draggables_1=__webpack_require__(201),core_module_1=__webpack_require__(499),videoPlayer_design_module_1=__webpack_require__(729),picture_design_module_1=__webpack_require__(734),youtubePlayer_design_module_1=__webpack_require__(739),buttonEditor_module_1=__webpack_require__(743),testimonialsEditor_module_1=__webpack_require__(747),columnEditor_module_1=__webpack_require__(750),sectionEditor_module_1=__webpack_require__(753),rowEditor_module_1=__webpack_require__(758),block_module_1=__webpack_require__(761),page_design_module_1=__webpack_require__(769),media_module_1=__webpack_require__(779),navigation_module_1=__webpack_require__(284),settings_module_1=__webpack_require__(794),workshops_1=__webpack_require__(799),textblockEditor_module_1=__webpack_require__(801),dropbucket_module_1=__webpack_require__(813),viewport_selector_1=__webpack_require__(817),ko_1=__webpack_require__(819),bindingHandlers_1=__webpack_require__(825),editing_1=__webpack_require__(66),hyperlinkSelector_1=__webpack_require__(831),widgetSelector_1=__webpack_require__(833),urlSelector_1=__webpack_require__(836),layout_design_module_1=__webpack_require__(839),urlHyperlinkProvider_1=__webpack_require__(211),media_1=__webpack_require__(134),draggables_1=__webpack_require__(294),errors_1=__webpack_require__(853),placeholderViewModel_1=__webpack_require__(38),ui_1=__webpack_require__(855),validators_1=__webpack_require__(860),cropper_1=__webpack_require__(283),ko_2=__webpack_require__(862),cardEditor_module_1=__webpack_require__(864),mediaPermalinkResolver_design_1=__webpack_require__(867),gridEditor_module_1=__webpack_require__(868),gridCellEditor_module_1=__webpack_require__(873),tray_1=__webpack_require__(876),ko_3=__webpack_require__(216),ko_4=__webpack_require__(262),ko_5=__webpack_require__(878),designerUserService_1=__webpack_require__(295),ko_6=__webpack_require__(881);__webpack_require__(886),__webpack_require__(887),__webpack_require__(888),__webpack_require__(889);const ko_7=__webpack_require__(100),viewStack_1=__webpack_require__(296),mediaDisplay_1=__webpack_require__(890),lightbox_1=__webpack_require__(892),caching_1=__webpack_require__(894);exports.CoreDesignModule=class{register(injector){injector.bindModule(new core_module_1.CoreModule),injector.bindCollection("styleGroups"),injector.bindCollection("dropHandlers"),injector.bindCollectionLazily("workshopSections"),injector.bindCollection("trayCommands"),injector.bindCollection("hyperlinkProviders"),injector.bindSingleton("viewManager",ui_1.DefaultViewManager),injector.bindSingleton("tray",tray_1.Tray),injector.bindSingleton("viewStack",viewStack_1.ViewStack),injector.bind("mediaDisplay",mediaDisplay_1.MediaDisplay),injector.bindSingleton("changesCache",caching_1.LocalStorageCache),injector.bind("mediaHyperlinkProvider",media_1.MediaHyperlinkProvider),injector.bind("urlHyperlinkProvider",urlHyperlinkProvider_1.UrlHyperlinkProvider),injector.bind("gridEditor",ko_2.GridEditor),injector.bindToCollection("autostart",validators_1.KnockoutValidation),injector.bindToCollection("autostart",bindingHandlers_1.ResizableBindingHandler),injector.bindToCollection("autostart",cropper_1.CropperBindingHandler),injector.bindToCollection("autostart",bindingHandlers_1.BalloonBindingHandler),injector.bindToCollection("autostart",errors_1.UnhandledErrorHandler),injector.bind("tooltip",ui_1.Tooltip),injector.bindSingleton("dragManager",draggables_1.DragManager),injector.bindSingleton("lightbox",lightbox_1.Lightbox),injector.bind("placeholderWidget",placeholderViewModel_1.PlaceholderViewModel),injector.bindSingleton("htmlEditorProvider",editing_1.HtmlEditorProvider),injector.bindSingleton("mediaHandler",editing_1.MediaHandlers),injector.bind("workshops",workshops_1.Workshops),injector.bind("viewportSelector",viewport_selector_1.ViewportSelector),injector.bind("localeSelector",ko_1.LocaleSelector),injector.bind("localeEditor",ko_1.LocaleEditor),injector.bind("hyperlinkSelector",hyperlinkSelector_1.HyperlinkSelector),injector.bind("widgetSelector",widgetSelector_1.WidgetSelector),injector.bind("urlSelector",urlSelector_1.UrlSelector),injector.bind("confirmation",confirmation_1.Confirmation),injector.bind("roleSelector",ko_6.RoleSelector),injector.bind("roleInput",ko_6.RoleInput),injector.bind("spinner",ko_5.Spinner),injector.bindSingleton("mediaPermalinkResolver",mediaPermalinkResolver_design_1.MediaPermalinkResolver),injector.bindModule(new textblockEditor_module_1.TextblockEditorModule),injector.bindModule(new picture_design_module_1.PictureDesignModule),injector.bindModule(new buttonEditor_module_1.ButtonEditorModule),injector.bindModule(new videoPlayer_design_module_1.VideoPlayerDesignModule),injector.bindModule(new youtubePlayer_design_module_1.YoutubePlayerDesignModule),injector.bindModule(new testimonialsEditor_module_1.TestimonialsEditorModule),injector.bindModule(new ko_4.MenuEditorModule),injector.bindModule(new dropbucket_module_1.DropbucketModule),injector.bindModule(new page_design_module_1.PageDesignModule),injector.bindModule(new media_module_1.MediaWorkshopModule),injector.bindModule(new layout_design_module_1.LayoutDesignModule),injector.bindModule(new block_module_1.BlockWorkshopModule),injector.bindModule(new navigation_module_1.NavigationWorkshopModule),injector.bindModule(new settings_module_1.SettingsWorkshopModule),injector.bindModule(new columnEditor_module_1.ColumnEditorModule),injector.bindModule(new rowEditor_module_1.RowEditorModule),injector.bindModule(new sectionEditor_module_1.SectionEditorModule),injector.bindModule(new gridEditor_module_1.GridEditorModule),injector.bindModule(new gridCellEditor_module_1.GridCellEditorModule),injector.bindModule(new ko_7.ContentEditorModule),injector.bindModule(new cardEditor_module_1.CardEditorModule),injector.bindModule(new ko_3.CollapsiblePanelEditorModule),injector.bindToCollection("hyperlinkProviders",urlHyperlinkProvider_1.UrlHyperlinkProvider),injector.bindToCollection("autostart",bindingHandlers_1.HostBindingHandler),injector.bindToCollection("autostart",bindingHandlers_draggables_1.DraggablesBindingHandler),injector.bindToCollection("autostart",bindingHandlers_grid_1.GridBindingHandler),injector.bindToCollection("autostart",bindingHandlers_lightbox_1.LightboxBindingHandler),injector.bindToCollection("autostart",hinter_1.Hinter),injector.bindInstance("reservedPermalinks",["/","/404","/500"]),injector.resolve("workshopSections");const userService=new designerUserService_1.DesignerUserService;injector.bindInstance("userService",userService),injector.bindInstance("designerUserService",userService)}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Hinter=void 0;exports.Hinter=class{constructor(eventManager,viewManager,router,layoutService){this.eventManager=eventManager,this.viewManager=viewManager,this.router=router,this.layoutService=layoutService,this.noHints=!1,this.eventManager.addEventListener("DesignTimeNavigationHint",this.showDesignTimeNavigationHint.bind(this)),this.eventManager.addEventListener("InactiveLayoutHint",this.showInactiveLayoutHint.bind(this))}showDesignTimeNavigationHint(){this.noHints||(this.noHints=!0,this.viewManager.notifyInfo("Did you know?","When you're in the administrative view, you still can navigate any website hyperlinks by holding CTRL or ⌘ key and clicking on it."),setTimeout(()=>this.noHints=!1,8e3))}showInactiveLayoutHint(){return __awaiter(this,void 0,void 0,(function*(){if(this.noHints)return;this.noHints=!0;const url=this.router.getPath(),layoutContract=yield this.layoutService.getLayoutByPermalink(url);this.viewManager.notifyInfo("Did you know?",`This section is a part of "<b>${layoutContract.title}</b>" layout. Would you like to open it for editing?`,[{title:"Edit layout",iconClass:"paperbits-edit-72",action:()=>__awaiter(this,void 0,void 0,(function*(){this.viewManager.setHost({name:"layout-host",params:{layoutKey:layoutContract.key}})}))}]),setTimeout(()=>this.noHints=!1,8e3)}))}}},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Confirmation=void 0;const ko=__webpack_require__(0),confirmation_html_1=__webpack_require__(459),decorators_1=__webpack_require__(2);let Confirmation=class{constructor(){this.message=ko.observable("Are you sure?")}onMounted(){return __awaiter(this,void 0,void 0,(function*(){if(this.getMessage){const message=yield this.getMessage();this.message(message)}}))}confirm(){this.onConfirm&&this.onConfirm()}decline(){this.onDecline&&this.onDecline()}};__decorate([decorators_1.Param(),__metadata("design:type",Function)],Confirmation.prototype,"getMessage",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],Confirmation.prototype,"onConfirm",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],Confirmation.prototype,"onDecline",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],Confirmation.prototype,"onMounted",null),Confirmation=__decorate([decorators_1.Component({selector:"confirmation",template:confirmation_html_1.default}),__metadata("design:paramtypes",[])],Confirmation),exports.Confirmation=Confirmation},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="confirmation">\r\n    <h1>Confirm</h1>\r\n    <hr>\r\n    <div class="flex flex-row">\r\n        <div class="flex-item" data-bind="html: message">\r\n        </div>\r\n    </div>\r\n    <div class="flex flex-row">\r\n        <div class="flex-item btn-group">\r\n            <button class="btn" data-bind="click: confirm, focus: true">\r\n                <i class="paperbits-icon paperbits-check-2"></i>\r\n                Yes\r\n            </button>\r\n            <button class="btn" data-bind="click: decline">\r\n                <i class="paperbits-icon paperbits-simple-remove"></i>\r\n                No\r\n            </button>\r\n        </div>\r\n    </div>\r\n</div>'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Component=exports.Encapsulation=void 0,__webpack_require__(65);const ko=__webpack_require__(0);__webpack_require__(461),function(Encapsulation){Encapsulation.none="none",Encapsulation.shadowDom="shadowDom"}(exports.Encapsulation||(exports.Encapsulation={})),exports.Component=function(config){return function(target){ko.components.register(config.selector,{template:config.template,viewModel:target,synchronous:!1,encapsulation:config.encapsulation}),config.childTemplates&&Object.keys(config.childTemplates).forEach(templateName=>{if(ko.templates[templateName])throw new Error(`Template "${templateName}" already defined.`);ko.templates[templateName]=config.childTemplates[templateName]}),Reflect.defineMetadata("knockout-component",{name:config.selector,constructor:target},target)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const ko=__webpack_require__(0);!function(){const templates={},data={},engine=new ko.nativeTemplateEngine;ko.templateSources.stringTemplate=function(template){this.templateName=template},ko.utils.extend(ko.templateSources.stringTemplate.prototype,{data:function(key,value){if(data[this.templateName]=data[this.templateName]||{},1===arguments.length)return data[this.templateName][key];data[this.templateName][key]=value},text:function(value){if(0===arguments.length)return templates[this.templateName];templates[this.templateName]=value}}),engine.makeTemplateSource=function(template,doc){let elem;return"string"==typeof template?(elem=(doc||document).getElementById(template),elem?new ko.templateSources.domElement(elem):new ko.templateSources.stringTemplate(template)):template&&1===template.nodeType||8===template.nodeType?new ko.templateSources.anonymousTemplate(template):void 0},ko.templates=templates,ko.setTemplateEngine(engine)}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RuntimeComponent=void 0;const ko=__webpack_require__(0);exports.RuntimeComponent=function(config){return target=>{class RuntimeComponentProxy extends HTMLElement{constructor(){super()}static get observedAttributes(){return["params"]}connectedCallback(){const element=this;setTimeout(()=>{const params=element.getAttribute("params"),paramsObservable=ko.observable(params);ko.applyBindingsToNode(element,{component:{name:config.selector,viewModel:target,params:paramsObservable}},null)},10)}attributeChangedCallback(name,oldValue,newValue){!!ko.contextFor(this)&&(this.disconnectedCallback(),this.connectedCallback())}disconnectedCallback(){ko.cleanNode(this)}}customElements.define(config.selector,RuntimeComponentProxy)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Event=void 0,__webpack_require__(65),exports.Event=function(name){return function(target,propertyKey){let props=Reflect.getMetadata("events",target.constructor);props||(props=[]),props.push(propertyKey),Reflect.defineMetadata("events",props,target.constructor)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.OnMounted=void 0,__webpack_require__(65),exports.OnMounted=function(name){return function(target,propertyKey){let props=Reflect.getMetadata("onmounted",target.constructor);props||(props=[]),props.push(propertyKey),Reflect.defineMetadata("onmounted",props,target.constructor)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.OnDestroyed=void 0,__webpack_require__(65),exports.OnDestroyed=function(name){return function(target,propertyKey){let props=Reflect.getMetadata("ondestroyed",target.constructor);props||(props=[]),props.push(propertyKey),Reflect.defineMetadata("ondestroyed",props,target.constructor)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Param=void 0,__webpack_require__(65),exports.Param=function(name){return function(target,propertyKey){let props=Reflect.getMetadata("params",target.constructor);props||(props=[]),props.push(propertyKey),Reflect.defineMetadata("params",props,target.constructor)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Toast=void 0;const ko=__webpack_require__(0);exports.Toast=class{constructor(title,content,state="progress",progress=0,commands=[]){this.title=ko.observable(title),this.content=ko.observable(content),this.progress=ko.observable(),this.progress.subscribe(this.onProgressUpdate.bind(this)),this.state=ko.observable(state),this.commands=ko.observableArray(commands),this.progress(progress)}onProgressUpdate(progress){100===progress&&this.state("success")}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GridHelper=void 0;const ko=__webpack_require__(0);class GridHelper{static getWidgetStack(element){var _a;const stack=[];do{const context=ko.contextFor(element);if(!(null===(_a=null==context?void 0:context.$data)||void 0===_a?void 0:_a.widgetBinding)||context.$data.widgetBinding.readonly){if(!(element=null==element?void 0:element.parentElement))return stack;continue}const binding=context.$data.widgetBinding;stack.push({element:element,binding:binding}),element=null==element?void 0:element.parentElement}while(element);return stack}static GetSelfAndParentViewModels(element){const context=ko.contextFor(element);if(!context)return[];const viewModels=[];context.$data&&viewModels.push(context.$data);let current=null;return context.$parents.forEach(viewModel=>{viewModel&&viewModel!==current&&(viewModels.push(viewModel),current=viewModel)}),viewModels}static GetParentViewModels(element){const context=ko.contextFor(element);if(!context)return[];const viewModels=[];let current=context.$data;return context.$parents.forEach(viewModel=>{viewModel&&viewModel!==current&&(viewModels.push(viewModel),current=viewModel)}),viewModels}static getParentWidgetBinding(element){const viewModels=this.GetParentViewModels(element);if(0===viewModels.length)return null;return viewModels[0].widgetBinding}static getParentWidgetBindings(element){const bindings=[];return this.GetParentViewModels(element).forEach(x=>{const binding=x.widgetBinding;binding&&bindings.push(binding)}),bindings}static getComponentRoots(elements){let current=null;const roots=[];return elements.reverse().forEach(x=>{const context=ko.contextFor(x);context&&context!==current&&(roots.push(x),current=context)}),roots.reverse()}static getWidgetBinding(element){const viewModels=this.GetSelfAndParentViewModels(element);return viewModels.length>0?viewModels[0].widgetBinding:null}static getModel(element){const widgetModel=GridHelper.getWidgetBinding(element);return widgetModel&&widgetModel.model?widgetModel.model:null}}exports.GridHelper=GridHelper},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HtmlEditorEvents=void 0;class HtmlEditorEvents{}exports.HtmlEditorEvents=HtmlEditorEvents,HtmlEditorEvents.onSelectionChange="onSelectionChange",HtmlEditorEvents.onEditorDisabled="onEditorDisabled"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HtmlEditorProvider=void 0;exports.HtmlEditorProvider=class{constructor(eventManager){this.getCurrentHtmlEditor=this.getCurrentHtmlEditor.bind(this),this.setCurrentHtmlEditor=this.setCurrentHtmlEditor.bind(this),eventManager.addEventListener("htmlEditorChanged",this.setCurrentHtmlEditor)}setCurrentHtmlEditor(htmlEditor){this.htmlEditor=htmlEditor}getCurrentHtmlEditor(){return this.htmlEditor}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.formattableStates=void 0,exports.formattableStates=["bold","italic","underlined","highlighted","hyperlink","h1","h2","h3","h4","h5","h6","quote","code","ol","ul","alignedLeft","alignedRight","alignedCenter","justified"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MediaHandlers=void 0;exports.MediaHandlers=class{constructor(mediaTypePrefixes,fileExtensions){this.mediaTypePrefixes=mediaTypePrefixes,this.fileExtensions=fileExtensions}matches(dataTransfer){return!(dataTransfer.mimeType&&!this.mediaTypePrefixes.some(m=>dataTransfer.mimeType.startsWith(m)))&&!(dataTransfer.name&&!this.fileExtensions.some(e=>dataTransfer.name.endsWith(e)))}getContentDescriptorFromDataTransfer(item){return null}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.alignmentStyleKeys=exports.SelectionState=void 0;exports.SelectionState=class{constructor(){this.block="paragraph"}},exports.alignmentStyleKeys={left:"utils/text/alignLeft",center:"utils/text/alignCenter",right:"utils/text/alignRight",justify:"utils/text/justify"}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CoreModule=void 0;const blocks_1=__webpack_require__(67),blogs_1=__webpack_require__(516),configuration_1=__webpack_require__(521),events_1=__webpack_require__(46),http_1=__webpack_require__(204),layoutService_1=__webpack_require__(534),localization_1=__webpack_require__(207),media_1=__webpack_require__(134),persistence_1=__webpack_require__(23),mediaPermalinkResolver_1=__webpack_require__(544),navigation_1=__webpack_require__(37),pages_1=__webpack_require__(210),pagePermalinkResolver_1=__webpack_require__(560),permalinks_1=__webpack_require__(57),routing_1=__webpack_require__(136),sites_1=__webpack_require__(569),urls_1=__webpack_require__(573),urlPermalinkResolver_1=__webpack_require__(577),widgets_1=__webpack_require__(578),background_1=__webpack_require__(82),button_module_1=__webpack_require__(586),card_module_1=__webpack_require__(595),ko_1=__webpack_require__(216),column_module_1=__webpack_require__(660),ko_2=__webpack_require__(100),gridCell_module_1=__webpack_require__(667),grid_module_1=__webpack_require__(236),bindingHandlers_background_1=__webpack_require__(239),bindingHandlers_secured_1=__webpack_require__(240),bindingHandlers_widget_1=__webpack_require__(241),knockout_loaders_1=__webpack_require__(242),ko_module_1=__webpack_require__(243),viewModelBinderSelector_1=__webpack_require__(148),ko_3=__webpack_require__(262),navbar_module_1=__webpack_require__(689),picture_module_1=__webpack_require__(694),row_module_1=__webpack_require__(698),section_module_1=__webpack_require__(702),testimonials_module_1=__webpack_require__(705),textblock_module_1=__webpack_require__(711),videoPlayer_publish_module_1=__webpack_require__(721),youtubePlayer_publish_module_1=__webpack_require__(725);exports.CoreModule=class{register(injector){injector.bindCollection("autostart"),injector.bindCollection("styleHandlers"),injector.bindCollectionLazily("widgetHandlers"),injector.bindCollectionLazily("routeGuards"),injector.bindCollectionLazily("modelBinders"),injector.bindCollectionLazily("viewModelBinders"),injector.bindCollectionLazily("permalinkResolvers"),injector.bindSingleton("settingsProvider",configuration_1.SettingsProvider),injector.bindSingleton("router",routing_1.DefaultRouter),injector.bindSingleton("httpClient",http_1.XmlHttpRequestClient),injector.bindSingleton("eventManager",events_1.DefaultEventManager),injector.bindSingleton("globalEventHandler",events_1.GlobalEventHandler),injector.bindSingleton("changeCommitter",persistence_1.DefaultChangeCommitter),injector.bindSingleton("widgetService",widgets_1.WidgetService),injector.bindSingleton("permalinkService",permalinks_1.DefaultPermalinkService),injector.bindSingleton("layoutService",layoutService_1.LayoutService),injector.bindSingleton("pageService",pages_1.PageService),injector.bindSingleton("blogService",blogs_1.BlogService),injector.bindSingleton("mediaService",media_1.MediaService),injector.bindSingleton("blockService",blocks_1.BlockService),injector.bindSingleton("navigationService",navigation_1.NavigationService),injector.bindSingleton("siteService",sites_1.SiteService),injector.bindSingleton("urlService",urls_1.UrlService),injector.bindSingleton("localeService",localization_1.LocaleService),injector.bindSingleton("permalinkResolver",permalinks_1.PermalinkResolver),injector.bindToCollection("permalinkResolvers",mediaPermalinkResolver_1.MediaPermalinkResolver,"mediaPermalinkResolver"),injector.bindToCollection("permalinkResolvers",pagePermalinkResolver_1.PagePermalinkResolver,"pagePermalinkResolver"),injector.bindToCollection("permalinkResolvers",urlPermalinkResolver_1.UrlPermalinkResolver,"urlPermalinkResolver"),injector.bind("modelBinderSelector",widgets_1.ModelBinderSelector),injector.bind("viewModelBinderSelector",viewModelBinderSelector_1.ViewModelBinderSelector),injector.bind("backgroundModelBinder",background_1.BackgroundModelBinder),injector.bindModule(new knockout_loaders_1.KnockoutRegistrationLoaders),injector.bindModule(new ko_module_1.KoModule),injector.bindModule(new ko_2.ContentModule),injector.bindModule(new column_module_1.ColumnModule),injector.bindModule(new row_module_1.RowModule),injector.bindModule(new textblock_module_1.TextblockModule),injector.bindModule(new section_module_1.SectionModule),injector.bindModule(new grid_module_1.GridModule),injector.bindModule(new gridCell_module_1.GridCellModule),injector.bindModule(new navbar_module_1.NavbarModule),injector.bindModule(new button_module_1.ButtonModule),injector.bindModule(new ko_3.MenuModule),injector.bindModule(new picture_module_1.PictureModule),injector.bindModule(new videoPlayer_publish_module_1.VideoPlayerModule),injector.bindModule(new youtubePlayer_publish_module_1.YoutubePlayerPublishModule),injector.bindModule(new testimonials_module_1.TestimonialsModule),injector.bindModule(new card_module_1.CardModule),injector.bindModule(new ko_1.CollapsiblePanelModule),injector.bindToCollection("routeGuards",routing_1.DefaultRouteGuard),injector.bindToCollection("autostart",bindingHandlers_widget_1.WidgetBindingHandler),injector.bindToCollection("autostart",bindingHandlers_background_1.BackgroundBindingHandler),injector.bindToCollection("autostart",bindingHandlers_secured_1.SecuredBindingHandler)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.BlockService=void 0;const Utils=__webpack_require__(6),persistence_1=__webpack_require__(23),IBlockService_1=__webpack_require__(203);exports.BlockService=class{constructor(objectStorage,httpClient,settingsProvider){this.objectStorage=objectStorage,this.httpClient=httpClient,this.settingsProvider=settingsProvider}getBlockByKey(key){if(!key)throw new Error('Parameter "key" not specified.');return key.startsWith("blocks")?this.objectStorage.getObject(key):null}search(type,pattern){return __awaiter(this,void 0,void 0,(function*(){let results=[];if(type===IBlockService_1.BlockType.saved){const query=persistence_1.Query.from().where("type",persistence_1.Operator.equals,type);pattern.length>0&&query.where("title",persistence_1.Operator.contains,pattern).orderBy("title");results=(yield this.objectStorage.searchObjects("blocks",query)).value}else{const data=yield this.loadBlockSnippets();if(!data)return[];const blocks=data.blocks,blockKeys=Object.keys(blocks);for(const blockKey of blockKeys)-1!==blocks[blockKey].title.indexOf(pattern)&&(results[blockKey]=blocks[blockKey])}return results}))}deleteBlock(block){return __awaiter(this,void 0,void 0,(function*(){if(!block)throw new Error('Parameter "block" not specified.');yield this.objectStorage.deleteObject(block.key)}))}createBlock(title,description,content,type){return __awaiter(this,void 0,void 0,(function*(){const identifier=Utils.guid(),blockKey="blocks/"+Utils.guid(),contentKey="files/"+identifier,block={type:type,key:blockKey,title:title,description:description,contentKey:contentKey};yield this.objectStorage.addObject(blockKey,block),yield this.objectStorage.addObject(contentKey,content)}))}updateBlock(block){if(!block)throw new Error('Parameter "block" not specified.');return this.objectStorage.updateObject(block.key,block)}getBlockContent(key,blockType){return __awaiter(this,void 0,void 0,(function*(){if(!key)throw new Error('Parameter "key" not specified.');if(!blockType||blockType===IBlockService_1.BlockType.saved){const block=yield this.getBlockByKey(key);return yield this.objectStorage.getObject(block.contentKey)}const data=yield this.loadBlockSnippets();if(!data)return null;const block=this.getObjectByPath(data,key);return block?this.getObjectByPath(data,block.contentKey):null}))}loadBlockSnippets(){return __awaiter(this,void 0,void 0,(function*(){return this.blocksData||(yield this.loadData()),this.blocksData}))}loadData(){return __awaiter(this,void 0,void 0,(function*(){try{const blocksUrl=yield this.settingsProvider.getSetting("blockSnippetsUrl");if(!blocksUrl)return void console.warn("Settings for blocksUrl not found.");const response=yield this.httpClient.send({url:blocksUrl,method:"GET"});this.blocksData=response.toObject()}catch(error){console.error("Load blocks error: ",error)}}))}getObjectByPath(obj,pathKey){for(let i=0,path=pathKey.split("/"),len=path.length;i<len;i++)obj=obj[path[i]];return obj}}},function(module,exports,__webpack_require__){"use strict";exports.byteLength=function(b64){var lens=getLens(b64),validLen=lens[0],placeHoldersLen=lens[1];return 3*(validLen+placeHoldersLen)/4-placeHoldersLen},exports.toByteArray=function(b64){var tmp,i,lens=getLens(b64),validLen=lens[0],placeHoldersLen=lens[1],arr=new Arr(function(b64,validLen,placeHoldersLen){return 3*(validLen+placeHoldersLen)/4-placeHoldersLen}(0,validLen,placeHoldersLen)),curByte=0,len=placeHoldersLen>0?validLen-4:validLen;for(i=0;i<len;i+=4)tmp=revLookup[b64.charCodeAt(i)]<<18|revLookup[b64.charCodeAt(i+1)]<<12|revLookup[b64.charCodeAt(i+2)]<<6|revLookup[b64.charCodeAt(i+3)],arr[curByte++]=tmp>>16&255,arr[curByte++]=tmp>>8&255,arr[curByte++]=255&tmp;2===placeHoldersLen&&(tmp=revLookup[b64.charCodeAt(i)]<<2|revLookup[b64.charCodeAt(i+1)]>>4,arr[curByte++]=255&tmp);1===placeHoldersLen&&(tmp=revLookup[b64.charCodeAt(i)]<<10|revLookup[b64.charCodeAt(i+1)]<<4|revLookup[b64.charCodeAt(i+2)]>>2,arr[curByte++]=tmp>>8&255,arr[curByte++]=255&tmp);return arr},exports.fromByteArray=function(uint8){for(var tmp,len=uint8.length,extraBytes=len%3,parts=[],i=0,len2=len-extraBytes;i<len2;i+=16383)parts.push(encodeChunk(uint8,i,i+16383>len2?len2:i+16383));1===extraBytes?(tmp=uint8[len-1],parts.push(lookup[tmp>>2]+lookup[tmp<<4&63]+"==")):2===extraBytes&&(tmp=(uint8[len-2]<<8)+uint8[len-1],parts.push(lookup[tmp>>10]+lookup[tmp>>4&63]+lookup[tmp<<2&63]+"="));return parts.join("")};for(var lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;function getLens(b64){var len=b64.length;if(len%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var validLen=b64.indexOf("=");return-1===validLen&&(validLen=len),[validLen,validLen===len?0:4-validLen%4]}function encodeChunk(uint8,start,end){for(var tmp,num,output=[],i=start;i<end;i+=3)tmp=(uint8[i]<<16&16711680)+(uint8[i+1]<<8&65280)+(255&uint8[i+2]),output.push(lookup[(num=tmp)>>18&63]+lookup[num>>12&63]+lookup[num>>6&63]+lookup[63&num]);return output.join("")}revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63},function(module,exports){exports.read=function(buffer,offset,isLE,mLen,nBytes){var e,m,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,nBits=-7,i=isLE?nBytes-1:0,d=isLE?-1:1,s=buffer[offset+i];for(i+=d,e=s&(1<<-nBits)-1,s>>=-nBits,nBits+=eLen;nBits>0;e=256*e+buffer[offset+i],i+=d,nBits-=8);for(m=e&(1<<-nBits)-1,e>>=-nBits,nBits+=mLen;nBits>0;m=256*m+buffer[offset+i],i+=d,nBits-=8);if(0===e)e=1-eBias;else{if(e===eMax)return m?NaN:1/0*(s?-1:1);m+=Math.pow(2,mLen),e-=eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)},exports.write=function(buffer,value,offset,isLE,mLen,nBytes){var e,m,c,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,rt=23===mLen?Math.pow(2,-24)-Math.pow(2,-77):0,i=isLE?0:nBytes-1,d=isLE?1:-1,s=value<0||0===value&&1/value<0?1:0;for(value=Math.abs(value),isNaN(value)||value===1/0?(m=isNaN(value)?1:0,e=eMax):(e=Math.floor(Math.log(value)/Math.LN2),value*(c=Math.pow(2,-e))<1&&(e--,c*=2),(value+=e+eBias>=1?rt/c:rt*Math.pow(2,1-eBias))*c>=2&&(e++,c/=2),e+eBias>=eMax?(m=0,e=eMax):e+eBias>=1?(m=(value*c-1)*Math.pow(2,mLen),e+=eBias):(m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen),e=0));mLen>=8;buffer[offset+i]=255&m,i+=d,m/=256,mLen-=8);for(e=e<<mLen|m,eLen+=mLen;eLen>0;buffer[offset+i]=255&e,i+=d,e/=256,eLen-=8);buffer[offset+i-d]|=128*s}},function(module,exports){var toString={}.toString;module.exports=Array.isArray||function(arr){return"[object Array]"==toString.call(arr)}},function(module,exports,__webpack_require__){"use strict";var isMergeableObject=function(value){return function(value){return!!value&&"object"==typeof value}(value)&&!function(value){var stringValue=Object.prototype.toString.call(value);return"[object RegExp]"===stringValue||"[object Date]"===stringValue||function(value){return value.$$typeof===REACT_ELEMENT_TYPE}(value)}(value)};var REACT_ELEMENT_TYPE="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function cloneUnlessOtherwiseSpecified(value,options){return!1!==options.clone&&options.isMergeableObject(value)?deepmerge((val=value,Array.isArray(val)?[]:{}),value,options):value;var val}function defaultArrayMerge(target,source,options){return target.concat(source).map((function(element){return cloneUnlessOtherwiseSpecified(element,options)}))}function getKeys(target){return Object.keys(target).concat(function(target){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(target).filter((function(symbol){return target.propertyIsEnumerable(symbol)})):[]}(target))}function propertyIsOnObject(object,property){try{return property in object}catch(_){return!1}}function mergeObject(target,source,options){var destination={};return options.isMergeableObject(target)&&getKeys(target).forEach((function(key){destination[key]=cloneUnlessOtherwiseSpecified(target[key],options)})),getKeys(source).forEach((function(key){(function(target,key){return propertyIsOnObject(target,key)&&!(Object.hasOwnProperty.call(target,key)&&Object.propertyIsEnumerable.call(target,key))})(target,key)||(propertyIsOnObject(target,key)&&options.isMergeableObject(source[key])?destination[key]=function(key,options){if(!options.customMerge)return deepmerge;var customMerge=options.customMerge(key);return"function"==typeof customMerge?customMerge:deepmerge}(key,options)(target[key],source[key],options):destination[key]=cloneUnlessOtherwiseSpecified(source[key],options))})),destination}function deepmerge(target,source,options){(options=options||{}).arrayMerge=options.arrayMerge||defaultArrayMerge,options.isMergeableObject=options.isMergeableObject||isMergeableObject,options.cloneUnlessOtherwiseSpecified=cloneUnlessOtherwiseSpecified;var sourceIsArray=Array.isArray(source);return sourceIsArray===Array.isArray(target)?sourceIsArray?options.arrayMerge(target,source,options):mergeObject(target,source,options):cloneUnlessOtherwiseSpecified(source,options)}deepmerge.all=function(array,options){if(!Array.isArray(array))throw new Error("first argument should be an array");return array.reduce((function(prev,next){return deepmerge(prev,next,options)}),{})};var deepmerge_1=deepmerge;module.exports=deepmerge_1},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.AnchorMiddleware=void 0;exports.AnchorMiddleware=class{constructor(pageService,router){this.pageService=pageService,this.router=router}applyChanges(key,changesObject){return __awaiter(this,void 0,void 0,(function*(){}))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.OfflineObjectStorage=void 0;const Objects=__webpack_require__(30),persistence_1=__webpack_require__(23);exports.OfflineObjectStorage=class{constructor(changesCache,eventManager){this.changesCache=changesCache,this.eventManager=eventManager,this.changesObjectCacheKey="changesObject",this.stateObjectCacheKey="stateObject",this.stateObject={},this.changesObject={},this.remoteObjectStorage=null,this.isOnline=!0,this.autosave=!1,this.middlewares=[],this.past=[],this.future=[],eventManager&&(this.eventManager.addEventListener("onUndo",()=>this.undo()),this.eventManager.addEventListener("onRedo",()=>this.redo()))}initialize(){return this.initializePromise||(this.initializePromise=new Promise(resolve=>__awaiter(this,void 0,void 0,(function*(){const cachedChangesObject=yield this.changesCache.getItem(this.changesObjectCacheKey);cachedChangesObject&&Object.assign(this.changesObject,cachedChangesObject);const cachedStateObject=yield this.changesCache.getItem(this.stateObjectCacheKey);cachedStateObject&&Object.assign(this.stateObject,cachedStateObject),resolve()})))),this.initializePromise}canUndo(){return this.past.length>0}canRedo(){return this.future.length>0}setRemoteObjectStorage(underlyingStorage){this.remoteObjectStorage=underlyingStorage}registerMiddleware(middleware){this.middlewares.push(middleware)}addObject(path,dataObject){return __awaiter(this,void 0,void 0,(function*(){if(!path)throw new Error("Could not add object: Key is undefined.");yield this.initialize();const dataObjectClone=Objects.clone(dataObject);let compensationOfState,compensationOfChanges;this.do(()=>{compensationOfState=Objects.setValueWithCompensation(path,this.stateObject,dataObjectClone),compensationOfChanges=Objects.setValueWithCompensation(path,this.changesObject,dataObjectClone),Objects.cleanupObject(this.stateObject,!0),Objects.cleanupObject(this.changesObject,!0),this.changesCache.setItem(this.changesObjectCacheKey,this.changesObject),this.changesCache.setItem(this.stateObjectCacheKey,this.stateObject)},()=>{Objects.setValueWithCompensation(path,this.stateObject,compensationOfState),Objects.setValueWithCompensation(path,this.changesObject,compensationOfChanges),Objects.cleanupObject(this.stateObject,!0),Objects.cleanupObject(this.changesObject,!0),this.changesCache.setItem(this.changesObjectCacheKey,this.changesObject),this.changesCache.setItem(this.stateObjectCacheKey,this.stateObject)})}))}patchObject(path,dataObject){return __awaiter(this,void 0,void 0,(function*(){throw new Error("Not implemented")}))}updateObject(path,dataObject){return __awaiter(this,void 0,void 0,(function*(){if(!path)throw new Error('Parameter "path" not specified.');if(void 0===dataObject)throw new Error('Parameter "dataObject" not specified.');yield this.initialize();const dataObjectClone1=Objects.clone(dataObject),dataObjectClone2=Objects.clone(dataObject);let compensationOfState,compensationOfChanges;this.do(()=>{compensationOfState=Objects.setValueWithCompensation(path,this.stateObject,dataObjectClone1),compensationOfChanges=Objects.setValueWithCompensation(path,this.changesObject,dataObjectClone2),Objects.cleanupObject(this.stateObject,!0),Objects.cleanupObject(this.changesObject),this.changesCache.setItem(this.changesObjectCacheKey,this.changesObject),this.changesCache.setItem(this.stateObjectCacheKey,this.stateObject)},()=>{Objects.setValueWithCompensation(path,this.stateObject,compensationOfState),Objects.setValueWithCompensation(path,this.changesObject,compensationOfChanges),Objects.cleanupObject(this.stateObject,!0),Objects.cleanupObject(this.changesObject),this.changesCache.setItem(this.changesObjectCacheKey,this.changesObject),this.changesCache.setItem(this.stateObjectCacheKey,this.stateObject)})}))}getObject(path){return __awaiter(this,void 0,void 0,(function*(){if(!path)throw new Error('Parameter "path" not specified.');yield this.initialize();const locallyChangedObject=Objects.getObjectAt(path,this.changesObject);if(locallyChangedObject)return Objects.clone(locallyChangedObject);if(null===locallyChangedObject)return;let locallyCachedObject=Objects.getObjectAt(path,this.stateObject);if(locallyCachedObject)return Objects.clone(locallyCachedObject);const remoteObjectStorageResult=yield this.remoteObjectStorage.getObject(path);return remoteObjectStorageResult&&(locallyCachedObject=Objects.clone(remoteObjectStorageResult),Objects.setValue(path,this.stateObject,locallyCachedObject),this.changesCache.setItem(this.stateObjectCacheKey,this.stateObject)),remoteObjectStorageResult}))}deleteObject(path){return __awaiter(this,void 0,void 0,(function*(){if(!path)throw new Error('Parameter "path" not specified.');let compensationOfState,compensationOfChanges;yield this.initialize();this.do(()=>{compensationOfState=Objects.setValueWithCompensation(path,this.stateObject,null),compensationOfChanges=Objects.setValueWithCompensation(path,this.changesObject,null),Objects.cleanupObject(this.stateObject,!0),Objects.cleanupObject(this.changesObject),this.changesCache.setItem(this.changesObjectCacheKey,this.changesObject),this.changesCache.setItem(this.stateObjectCacheKey,this.stateObject)},()=>{Objects.setValueWithCompensation(path,this.stateObject,compensationOfState),Objects.setValueWithCompensation(path,this.changesObject,compensationOfChanges),Objects.cleanupObject(this.stateObject,!0),Objects.cleanupObject(this.changesObject),this.changesCache.setItem(this.changesObjectCacheKey,this.changesObject),this.changesCache.setItem(this.stateObjectCacheKey,this.stateObject)})}))}do(doCommand,undoCommand){const record={do:doCommand,undo:undoCommand};record.do(),this.past.push(record),this.past.length>10&&this.past.shift(),this.autosave&&this.saveChanges(),this.eventManager&&this.eventManager.dispatchEvent("onDataChange")}undo(){if(!this.canUndo())return;const record=this.past.pop();record.undo(),this.future.push(record),this.autosave&&this.saveChanges(),this.eventManager&&(this.eventManager.dispatchEvent("onDataPush"),this.eventManager.dispatchEvent("onDataChange"))}redo(){if(!this.canRedo())return;const record=this.future.pop();record.do(),this.past.push(record),this.eventManager&&(this.eventManager.dispatchEvent("onDataPush"),this.eventManager.dispatchEvent("onDataChange"))}searchLocalChanges(path,query){return __awaiter(this,void 0,void 0,(function*(){const searchObj=Objects.getObjectAt(path,this.changesObject);if(!searchObj)return{value:[],totalCount:0};let collection=Object.values(searchObj).filter(x=>!!x);if(query&&(query.filters.length>0&&(collection=collection.filter(x=>{let meetsCriteria=!0;for(const filter of query.filters){let left=Objects.getObjectAt(filter.left,x),right=filter.right;if(right&&void 0===left){meetsCriteria=!1;continue}if("boolean"==typeof filter.right){if(filter.operator!==persistence_1.Operator.equals)return console.warn("Boolean query operator can be only equals"),void(meetsCriteria=!1);(void 0!==left&&!1!==left||!0!==filter.right)&&(void 0!==filter.right&&!1!==filter.right||!0!==left)||(meetsCriteria=!1);continue}if(!left){meetsCriteria=!1;continue}const operator=filter.operator;switch("string"==typeof left&&(left=left.toUpperCase()),"string"==typeof right&&(right=right.toUpperCase()),operator){case persistence_1.Operator.contains:left&&!left.includes(right)&&(meetsCriteria=!1);break;case persistence_1.Operator.equals:left!==right&&(meetsCriteria=!1);break;default:throw new Error("Cannot translate operator into Firebase Realtime Database query.")}}return meetsCriteria})),query.orderingBy)){const property=query.orderingBy;collection=collection.sort((x,y)=>{const a=Objects.getObjectAt(property,x),b=Objects.getObjectAt(property,y),modifier=query.orderDirection===persistence_1.OrderDirection.accending?1:-1;return a>b?modifier:a<b?-modifier:0})}return{value:collection,totalCount:collection.length}}))}convertPage(remotePage){const resultPage={value:remotePage.value,takeNext:n=>__awaiter(this,void 0,void 0,(function*(){const nextRemotePage=yield remotePage.takeNext();return this.convertPage(nextRemotePage)}))};return remotePage.takeNext||(resultPage.takeNext=null),resultPage}searchObjects(path,query=persistence_1.Query.from()){return __awaiter(this,void 0,void 0,(function*(){if(!path)throw new Error('Parameter "path" not specified.');yield this.initialize();const resultPage={value:[],takeNext:null},localSearchResults=yield this.searchLocalChanges(path,query),remoteQuery=query.copy(),pageOfRemoteSearchResults=yield this.remoteObjectStorage.searchObjects(path,remoteQuery),remoteSearchResults=pageOfRemoteSearchResults.value;pageOfRemoteSearchResults.takeNext&&(resultPage.takeNext=()=>__awaiter(this,void 0,void 0,(function*(){const nextRemotePage=yield pageOfRemoteSearchResults.takeNext();return this.convertPage(nextRemotePage)})));const changesAt=Objects.getObjectAt(path,Objects.clone(this.changesObject));return changesAt&&Object.keys(changesAt).forEach(key=>{const index=remoteSearchResults.findIndex(x=>x.key===key);index>=0&&null===changesAt[key]&&remoteSearchResults.splice(index,1)}),resultPage.value=localSearchResults.value.concat(remoteSearchResults),resultPage}))}hasUnsavedChanges(){return __awaiter(this,void 0,void 0,(function*(){return yield this.initialize(),Object.keys(this.changesObject).length>0}))}hasUnsavedChangesAt(key){return __awaiter(this,void 0,void 0,(function*(){return yield this.initialize(),!!Objects.getObjectAt(key,this.changesObject)}))}discardChanges(){return __awaiter(this,void 0,void 0,(function*(){Object.keys(this.changesObject).forEach(key=>delete this.changesObject[key]),Object.keys(this.stateObject).forEach(key=>delete this.stateObject[key]),this.changesCache.setItem(this.changesObjectCacheKey,this.changesObject)}))}saveChanges(){return __awaiter(this,void 0,void 0,(function*(){const entities=Object.keys(this.changesObject);0!==entities.length&&(yield this.remoteObjectStorage.saveChanges(this.changesObject),entities.forEach(key=>delete this.changesObject[key]),this.changesCache.setItem(this.changesObjectCacheKey,this.changesObject),this.eventManager.dispatchEvent("onDataChange"))}))}loadData(){return __awaiter(this,void 0,void 0,(function*(){if(this.remoteObjectStorage.loadData){(yield this.remoteObjectStorage.loadData())&&(yield this.discardChanges(),this.eventManager.dispatchEvent("onDataPush"),this.eventManager.dispatchEvent("onDataChange"))}else console.warn("current ObjectStorage does not implement loadData");return this.stateObject}))}}},function(module,exports,__webpack_require__){"use strict";var OrderDirection;Object.defineProperty(exports,"__esModule",{value:!0}),exports.Query=exports.OrderDirection=exports.Operator=void 0,function(Operator){Operator[Operator.equals=0]="equals",Operator[Operator.contains=1]="contains"}(exports.Operator||(exports.Operator={})),function(OrderDirection){OrderDirection[OrderDirection.accending=0]="accending",OrderDirection[OrderDirection.descending=1]="descending"}(OrderDirection=exports.OrderDirection||(exports.OrderDirection={}));class Query{constructor(){this.filters=[],this.skipping=0,this.orderDirection=OrderDirection.accending}where(left,operator,right){return this.filters.push({left:left,operator:operator,right:right}),this}orderBy(property){return this.orderingBy=property,this.orderDirection=OrderDirection.accending,this}orderByDesc(property){return this.orderingBy=property,this.orderDirection=OrderDirection.descending,this}static from(){return new Query}copy(){const query=new Query;return query.filters=this.filters,query.selecting=this.selecting,query.orderingBy=this.orderingBy,query.orderDirection=this.orderDirection,query}}exports.Query=Query},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SavingHandler=void 0;exports.SavingHandler=class{constructor(eventManager,offlineObjectStorage,viewManager){eventManager.addEventListener("onSaveChanges",()=>__awaiter(this,void 0,void 0,(function*(){(yield offlineObjectStorage.hasUnsavedChanges())&&(yield offlineObjectStorage.saveChanges(),viewManager.notifySuccess("Changes saved","All changes saved successfully."))})))}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.LoadingHandler=void 0;exports.LoadingHandler=class{constructor(eventManager,offlineObjectStorage,viewManager){eventManager.addEventListener("onLoadData",()=>__awaiter(this,void 0,void 0,(function*(){yield offlineObjectStorage.loadData()})))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.DefaultChangeCommitter=void 0;exports.DefaultChangeCommitter=class{commit(){return __awaiter(this,void 0,void 0,(function*(){}))}}},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(517),exports),__exportStar(__webpack_require__(518),exports),__exportStar(__webpack_require__(519),exports),__exportStar(__webpack_require__(520),exports)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BlogHyperlinkProvider=void 0;const hyperlinkModel_1=__webpack_require__(80);exports.BlogHyperlinkProvider=class{constructor(){this.name="Blog posts",this.componentName="blog-selector",this.iconClass="paperbits-icon paperbits-single-content-03"}canHandleHyperlink(contentItemKey){return contentItemKey.startsWith("posts/")}getHyperlinkFromResource(post){const hyperlinkModel=new hyperlinkModel_1.HyperlinkModel;return hyperlinkModel.title=post.title,hyperlinkModel.targetKey=post.key,hyperlinkModel.href=post.permalink,hyperlinkModel}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.BlogService=void 0;const Utils=__webpack_require__(6),persistence_1=__webpack_require__(23);exports.BlogService=class{constructor(objectStorage,blockService){this.objectStorage=objectStorage,this.blockService=blockService}getBlogPostByPermalink(permalink){return __awaiter(this,void 0,void 0,(function*(){if(!permalink)throw new Error('Parameter "permalink" not specified.');const query=persistence_1.Query.from().where("permalink",persistence_1.Operator.equals,permalink),result=(yield this.objectStorage.searchObjects("posts",query)).value,posts=Object.values(result);return posts.length>0?posts[0]:null}))}getBlogPostByKey(key){return __awaiter(this,void 0,void 0,(function*(){return yield this.objectStorage.getObject(key)}))}search(pattern){return __awaiter(this,void 0,void 0,(function*(){const query=persistence_1.Query.from().where("title",persistence_1.Operator.contains,pattern).orderBy("title");return(yield this.objectStorage.searchObjects("posts",query)).value}))}deleteBlogPost(blogPost){return __awaiter(this,void 0,void 0,(function*(){const deleteContentPromise=this.objectStorage.deleteObject(blogPost.contentKey),deleteBlogPostPromise=this.objectStorage.deleteObject(blogPost.key);yield Promise.all([deleteContentPromise,deleteBlogPostPromise])}))}createBlogPost(url,title,description,keywords){return __awaiter(this,void 0,void 0,(function*(){const identifier=Utils.guid(),postKey="posts/"+identifier,contentKey="files/"+identifier,post={key:postKey,title:title,description:description,keywords:keywords,permalink:url,contentKey:contentKey};yield this.objectStorage.addObject(postKey,post);const template=yield this.blockService.getBlockContent("blocks/new-page-template");return yield this.objectStorage.addObject(contentKey,template),post}))}updateBlogPost(blogPost){return __awaiter(this,void 0,void 0,(function*(){yield this.objectStorage.updateObject(blogPost.key,blogPost)}))}getBlogPostContent(postKey){return __awaiter(this,void 0,void 0,(function*(){const page=yield this.getBlogPostByKey(postKey);return yield this.objectStorage.getObject(page.contentKey)}))}updateBlogPostContent(postKey,content){return __awaiter(this,void 0,void 0,(function*(){if(!postKey)throw new Error('Parameter "postKey" not specified.');if(!content)throw new Error('Parameter "content" not specified.');const page=yield this.getBlogPostByKey(postKey);this.objectStorage.updateObject(page.contentKey,content)}))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(522),exports),__exportStar(__webpack_require__(523),exports)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Settings=void 0,function(Settings){let Config;!function(Config){Config.GoogleMaps="googleMaps",Config.GoogleTagManager="gtm",Config.Intercom="intercom",Config.GoogleFonts="googleFonts"}(Config=Settings.Config||(Settings.Config={}))}(exports.Settings||(exports.Settings={}))},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SettingsProvider=void 0;exports.SettingsProvider=class{constructor(httpClient,eventManager){this.httpClient=httpClient,this.eventManager=eventManager}loadSettings(){return __awaiter(this,void 0,void 0,(function*(){const response=yield this.httpClient.send({url:"/config.json"});return this.configuration=response.toObject(),this.configuration}))}getSetting(name){return __awaiter(this,void 0,void 0,(function*(){return yield this.getSettings(),this.configuration[name]}))}onSettingChange(name,eventHandler){this.eventManager.addEventListener("onSettingChange",setting=>{setting.name===name&&eventHandler(setting.value)})}setSetting(name,value){this.configuration[name]=value,this.eventManager.dispatchEvent("onSettingChange",{name:name,value:value})}getSettings(){return this.loadingPromise||(this.loadingPromise=this.loadSettings()),this.loadingPromise}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DefaultEventManager=void 0,__webpack_require__(133);exports.DefaultEventManager=class{constructor(){this.eventListeners=[]}addEventListener(eventName,eventHandler){this.eventListeners.some(listener=>listener.eventName===eventName&&listener.eventHandler===eventHandler)||this.eventListeners.push({eventName:eventName,eventHandler:eventHandler})}removeEventListener(eventName,eventHandler){const listener=this.eventListeners.find(listener=>listener.eventName===eventName&&listener.eventHandler===eventHandler);listener&&this.eventListeners.remove(listener)}dispatchEvent(eventName,args){this.eventListeners.filter(listener=>listener.eventName===eventName).forEach(x=>x.eventHandler(args))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GlobalEventHandler=void 0;const keyboard_1=__webpack_require__(93);exports.GlobalEventHandler=class{constructor(eventManager){this.eventManager=eventManager,this.onKeyDown=this.onKeyDown.bind(this),this.onCtrlS=this.onCtrlS.bind(this),this.onCtrlO=this.onCtrlO.bind(this),this.onEscape=this.onEscape.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.onDragEnter=this.onDragEnter.bind(this),this.onDragStart=this.onDragStart.bind(this),this.onDragOver=this.onDragOver.bind(this),this.onDragLeave=this.onDragLeave.bind(this),this.onDragDrop=this.onDragDrop.bind(this),this.onDragEnd=this.onDragEnd.bind(this),this.onPaste=this.onPaste.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onError=this.onError.bind(this),this.onUnhandledRejection=this.onUnhandledRejection.bind(this),this.addDragStartListener=this.addDragStartListener.bind(this),this.addDragEnterListener=this.addDragEnterListener.bind(this),this.addDragDropListener=this.addDragDropListener.bind(this),this.addDragEndListener=this.addDragEndListener.bind(this),this.addDragLeaveListener=this.addDragLeaveListener.bind(this),this.addDragLeaveScreenListener=this.addDragLeaveScreenListener.bind(this),this.addKeyDownListener=this.addKeyDownListener.bind(this),this.addKeyUpListener=this.addKeyUpListener.bind(this),this.documents=[]}appendDocument(doc){this.documents.indexOf(doc)>-1||(this.documents.push(doc),doc.addEventListener("keydown",this.onKeyDown,!0),doc.addEventListener("keyup",this.onKeyUp,!0),doc.addEventListener("dragenter",this.onDragEnter,!0),doc.addEventListener("dragstart",this.onDragStart,!0),doc.addEventListener("dragover",this.onDragOver,!0),doc.addEventListener("dragleave",this.onDragLeave.bind(this)),doc.addEventListener("drop",this.onDragDrop,!0),doc.addEventListener("dragend",this.onDragEnd,!0),doc.addEventListener("paste",this.onPaste,!0),doc.addEventListener("mousemove",this.onPointerMove,!0),doc.addEventListener("mousedown",this.onPointerDown,!0),doc.addEventListener("mouseup",this.onPointerUp,!0),doc.defaultView.window.addEventListener("error",this.onError,!0),doc.defaultView.window.addEventListener("unhandledrejection",this.onUnhandledRejection,!0))}removeDocument(doc){this.documents.remove(doc),doc.removeEventListener("keydown",this.onKeyDown,!0),doc.removeEventListener("keyup",this.onKeyUp,!0),doc.removeEventListener("dragenter",this.onDragEnter,!0),doc.removeEventListener("dragstart",this.onDragStart,!0),doc.removeEventListener("dragover",this.onDragOver,!0),doc.removeEventListener("dragleave",this.onDragLeave.bind(this)),doc.removeEventListener("drop",this.onDragDrop,!0),doc.removeEventListener("dragend",this.onDragEnd,!0),doc.removeEventListener("paste",this.onPaste,!0),doc.removeEventListener("mousemove",this.onPointerMove,!0),doc.removeEventListener("mousedown",this.onPointerDown,!0),doc.removeEventListener("mouseup",this.onPointerUp,!0),doc.defaultView.window.removeEventListener("error",this.onError,!0),doc.defaultView.window.removeEventListener("unhandledrejection",this.onUnhandledRejection,!0)}onKeyDown(event){this.eventManager.dispatchEvent("onKeyDown",event),event.ctrlKey&&event.keyCode===keyboard_1.Keys.S&&(event.preventDefault(),this.onCtrlS()),event.ctrlKey&&event.keyCode===keyboard_1.Keys.O&&(event.preventDefault(),this.onCtrlO()),event.ctrlKey&&event.keyCode===keyboard_1.Keys.P&&(event.preventDefault(),this.onCtrlP()),event.keyCode===keyboard_1.Keys.Delete&&this.onDelete(),event.keyCode===keyboard_1.Keys.Esc&&(event.preventDefault(),this.onEscape())}onKeyUp(event){this.eventManager.dispatchEvent("onKeyUp",event)}onCtrlS(){this.eventManager.dispatchEvent("onSaveChanges")}onCtrlO(){this.eventManager.dispatchEvent("onLoadData")}onCtrlP(){this.eventManager.dispatchEvent("onPublish")}onEscape(){this.eventManager.dispatchEvent("onEscape")}onDelete(){this.eventManager.dispatchEvent("onDelete")}onPointerMove(event){this.eventManager.dispatchEvent("onPointerMove",event)}onPointerDown(event){this.eventManager.dispatchEvent("onPointerDown",event)}onPointerUp(event){this.eventManager.dispatchEvent("onPointerUp",event)}onDragStart(event){this.eventManager.dispatchEvent("onDragStart")}onDragEnter(event){this.eventManager.dispatchEvent("onDragEnter"),event.preventDefault()}onDragOver(event){event.preventDefault(),this.eventManager.dispatchEvent("onDragOver")}onDragLeave(event){this.eventManager.dispatchEvent("onDragLeave"),0===event.screenX&&0===event.screenY&&this.eventManager.dispatchEvent("onDragLeaveScreen")}onDragDrop(event){this.eventManager.dispatchEvent("onDragDrop",event),event.preventDefault()}onDragEnd(){this.eventManager.dispatchEvent("onDragEnd")}onPaste(event){this.eventManager.dispatchEvent("onPaste",event)}onError(event){this.eventManager.dispatchEvent("onError",event)}onUnhandledRejection(event){this.eventManager.dispatchEvent("onUnhandledRejection",event)}addDragStartListener(callback){this.eventManager.addEventListener("onDragStart",callback)}addDragEnterListener(callback){this.eventManager.addEventListener("onDragEnter",callback)}addDragOverListener(callback){this.eventManager.addEventListener("onDragOver",callback)}addDragLeaveListener(callback){this.eventManager.addEventListener("onDragLeave",callback)}addDragLeaveScreenListener(callback){this.eventManager.addEventListener("onDragLeaveScreen",callback)}addDragDropListener(callback){this.eventManager.addEventListener("onDragDrop",callback)}addDragEndListener(callback){this.eventManager.addEventListener("onDragEnd",callback)}addPasteListener(callback){this.eventManager.addEventListener("onPaste",callback)}addPointerMoveEventListener(callback){this.eventManager.addEventListener("onPointerMove",callback)}addKeyDownListener(callback){this.eventManager.addEventListener("onKeyDown",callback)}addKeyUpListener(callback){this.eventManager.addEventListener("onKeyUp",callback)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CommonEvents=void 0,exports.CommonEvents={onViewportChange:"onViewportChange"}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HttpMethod=void 0;class HttpMethod{}exports.HttpMethod=HttpMethod,HttpMethod.head="HEAD",HttpMethod.get="GET",HttpMethod.post="POST",HttpMethod.put="PUT",HttpMethod.patch="PATCH",HttpMethod.delete="DELETE"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.XmlHttpRequestClient=void 0;const XMLHttpRequest=__webpack_require__(533),httpResponse_1=__webpack_require__(205);exports.XmlHttpRequestClient=class{constructor(){this.send=this.send.bind(this)}parseHeaderString(headerString){if(!headerString)return[];const headers=[],headerPairs=headerString.split("\r\n");for(const headerPair of headerPairs){const index=headerPair.indexOf(": ");if(index>0){const header={name:headerPair.substring(0,index),value:headerPair.substring(index+2)};headers.push(header)}}return headers}send(request){return request.method||(request.method="GET"),request.headers||(request.headers=[]),new Promise((resolve,reject)=>{const xhr=new XMLHttpRequest;xhr.responseType="arraybuffer",xhr.onreadystatechange=(()=>{if(4!==xhr.readyState)return;if(0===xhr.status)return void reject({message:"Could not complete the request. Please try again later.",code:"RequestError",requestedUrl:request.url,details:[]});const response=new httpResponse_1.HttpResponse;response.statusCode=xhr.status,response.statusText=xhr.statusText,response.headers=this.parseHeaderString(xhr.getAllResponseHeaders()),response.body=new Uint8Array(xhr.response),resolve(response)}).bind(this),xhr.ontimeout=(()=>{reject({message:"Request timed out. Please try again later.",code:"RequestError",details:[]})}).bind(this),xhr.open(request.method,request.url,!0),request.headers.forEach(header=>{xhr.setRequestHeader(header.name,header.value)}),xhr.send(request.body)})}}},function(module,exports){module.exports=XMLHttpRequest},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.LayoutService=void 0;const Utils=__webpack_require__(6),Constants=__webpack_require__(206),persistence_1=__webpack_require__(23),layoutTemplate_1=__webpack_require__(535);exports.LayoutService=class{constructor(objectStorage,localeService){this.objectStorage=objectStorage,this.localeService=localeService,this.layoutsPath="layouts"}copyMetadata(sourceMetadata,targetMetadata){if(!sourceMetadata)throw new Error('Parameter "sourceMetadata" not specified.');if(!targetMetadata)throw new Error('Parameter "targetMetadata" not specified.');return targetMetadata.title=sourceMetadata.title,targetMetadata.description=sourceMetadata.description,targetMetadata.permalinkTemplate=sourceMetadata.permalinkTemplate,targetMetadata}localizedContractToContract(defaultLocale,currentLocale,requestedLocale,localizedPageContract){const locales=localizedPageContract[Constants.localePrefix],metadata=(requestedLocale?locales[requestedLocale]:locales[currentLocale])||this.copyMetadata(locales[defaultLocale],{});if(!metadata)return null;return Object.assign({key:localizedPageContract.key},metadata)}getLayoutByKey(key,requestedLocale){return __awaiter(this,void 0,void 0,(function*(){if(!key)throw new Error('Parameter "key" not specified.');const layoutContract=yield this.objectStorage.getObject(key);if(!layoutContract)return null;const defaultLocale=yield this.localeService.getDefaultLocale(),currentLocale=yield this.localeService.getCurrentLocale();return this.localizedContractToContract(defaultLocale,currentLocale,requestedLocale,layoutContract)}))}convertPage(localizedPage,defaultLocale,searchLocale,requestedLocale){const resultPage={value:localizedPage.value.map(x=>this.localizedContractToContract(defaultLocale,searchLocale,requestedLocale,x)),takeNext:()=>__awaiter(this,void 0,void 0,(function*(){const nextLocalizedPage=yield localizedPage.takeNext();return this.convertPage(nextLocalizedPage,defaultLocale,searchLocale,requestedLocale)}))};return localizedPage.takeNext||(resultPage.takeNext=null),resultPage}search(query,requestedLocale){return __awaiter(this,void 0,void 0,(function*(){if(!query)throw new Error('Parameter "query" not specified.');const defaultLocale=yield this.localeService.getDefaultLocale(),currentLocale=yield this.localeService.getCurrentLocale(),searchLocale=requestedLocale||currentLocale,localizedQuery=Utils.localizeQuery(query,searchLocale);try{const pageOfResults=yield this.objectStorage.searchObjects(this.layoutsPath,localizedQuery);return this.convertPage(pageOfResults,defaultLocale,searchLocale,requestedLocale)}catch(error){throw new Error("Unable to search pages: "+(error.stack||error.message))}}))}deleteLayout(layout){return __awaiter(this,void 0,void 0,(function*(){if(!layout)throw new Error('Parameter "layout" not specified.');const localizedLayoutContract=yield this.objectStorage.getObject(layout.key);if(localizedLayoutContract.locales){const contentKeys=Object.values(localizedLayoutContract.locales).map(x=>x.contentKey);for(const contentKey of contentKeys)yield this.objectStorage.deleteObject(contentKey)}yield this.objectStorage.deleteObject(layout.key)}))}createLayout(title,description,permalinkTemplate){return __awaiter(this,void 0,void 0,(function*(){const locale=yield this.localeService.getDefaultLocale(),identifier=Utils.guid(),layoutKey=`${this.layoutsPath}/${identifier}`,contentKey="files/"+identifier,localizedLayout={key:layoutKey,locales:{[locale]:{title:title,description:description,permalinkTemplate:permalinkTemplate,contentKey:contentKey}}};yield this.objectStorage.addObject(layoutKey,localizedLayout),yield this.objectStorage.addObject(contentKey,layoutTemplate_1.layoutTemplate);return{key:layoutKey,title:title,description:description,permalinkTemplate:permalinkTemplate,contentKey:contentKey}}))}updateLayout(layout,requestedLocale){return __awaiter(this,void 0,void 0,(function*(){if(!layout)throw new Error('Parameter "layout" not specified.');requestedLocale||(requestedLocale=yield this.localeService.getCurrentLocale());const layoutContract=yield this.objectStorage.getObject(layout.key);if(!layoutContract)throw new Error(`Could not update layout. Layout with key "${layout.key}" doesn't exist.`);const existingLocaleMetadata=layoutContract.locales[requestedLocale]||{};layoutContract.locales[requestedLocale]=this.copyMetadata(layout,existingLocaleMetadata),yield this.objectStorage.updateObject(layout.key,layoutContract)}))}getLayoutByPermalinkTemplate(permalinkTemplate){return __awaiter(this,void 0,void 0,(function*(){if(!permalinkTemplate)throw new Error('Parameter "permalinkTemplate" not specified.');const defaultLocale=yield this.localeService.getDefaultLocale(),query=persistence_1.Query.from().where(`locales/${defaultLocale}/permalinkTemplate`,persistence_1.Operator.equals,permalinkTemplate),result=(yield this.objectStorage.searchObjects(this.layoutsPath,query)).value,layouts=Object.keys(result).map(key=>result[key]);return layouts.length>0?layouts[0]:null}))}sort(patterns){const result=[];for(const pattern of patterns){const segments=pattern.split("/").filter(x=>!!x);let score=0;for(let i=0;i<segments.length;i++){const segment=segments[i];let weight;weight=segment.startsWith("{")?2:"*"===segment?1:3,score+=weight/(i+1)}result.push({score:score,pattern:pattern})}return result.sort((function(a,b){return a.score<b.score?1:a.score>b.score?-1:0})).map(x=>x.pattern)}matchPermalink(permalink,template,locale){if(locale){const localePrefix=`/${locale}/`;permalink.startsWith(localePrefix)&&(permalink=permalink.replace(localePrefix,"/"))}const tokens=[],permalinkSegments=permalink.split("/"),templateSegments=template.split("/");if(permalinkSegments.length!==templateSegments.length&&-1===template.indexOf("*"))return{match:!1,tokens:tokens};for(let i=0;i<templateSegments.length;i++){const permalinkSegment=permalinkSegments[i],templateSegment=templateSegments[i];if("*"===templateSegment)return""!==permalinkSegment&&void 0!==permalinkSegment?{match:!0,tokens:tokens}:{match:!1,tokens:[]};if(templateSegment.startsWith("{"))tokens.push({index:i,name:templateSegment.replace(/{|}/g,"")});else if(permalinkSegment!==templateSegment)return{match:!1,tokens:[]}}return{match:!0,tokens:tokens}}getLayoutByPermalink(permalink,requestedLocale){return __awaiter(this,void 0,void 0,(function*(){if(!permalink)return null;const defaultLocale=yield this.localeService.getDefaultLocale(),currentLocale=yield this.localeService.getCurrentLocale(),query=persistence_1.Query.from(),result=(yield this.objectStorage.searchObjects(this.layoutsPath,query)).value,layouts=Object.keys(result).map(key=>result[key]);if(layouts&&layouts.length){let permalinkTemplates=layouts.map(x=>{var _a;return null===(_a=x.locales[defaultLocale])||void 0===_a?void 0:_a.permalinkTemplate});permalinkTemplates=this.sort(permalinkTemplates);const matchingTemplate=permalinkTemplates.find(template=>this.matchPermalink(permalink,template,requestedLocale||currentLocale).match),matchingLayout=layouts.find(x=>x.locales[defaultLocale].permalinkTemplate===(matchingTemplate||"/"));return matchingLayout?this.localizedContractToContract(defaultLocale,currentLocale,requestedLocale,matchingLayout):null}return null}))}getLayoutContent(layoutKey,requestedLocale){return __awaiter(this,void 0,void 0,(function*(){if(!layoutKey)throw new Error('Parameter "layoutKey" not specified.');requestedLocale||(requestedLocale=yield this.localeService.getCurrentLocale());const defaultLocale=yield this.localeService.getDefaultLocale(),localizedLayoutContract=yield this.objectStorage.getObject(layoutKey);let layoutContent,layoutMetadata=localizedLayoutContract.locales[requestedLocale];if(layoutMetadata||(layoutMetadata=localizedLayoutContract.locales[defaultLocale]),layoutMetadata.contentKey)layoutContent=yield this.objectStorage.getObject(layoutMetadata.contentKey);else{const layoutDefaultLocaleMetadata=localizedLayoutContract.locales[defaultLocale];layoutContent=yield this.objectStorage.getObject(layoutDefaultLocaleMetadata.contentKey)}return layoutContent.type="layout",layoutContent}))}updateLayoutContent(layoutKey,content,requestedLocale){return __awaiter(this,void 0,void 0,(function*(){if(!layoutKey)throw new Error('Parameter "layoutKey" not specified.');if(!content)throw new Error('Parameter "content" not specified.');const localizedLayoutContract=yield this.objectStorage.getObject(layoutKey);if(!localizedLayoutContract)throw new Error(`Layout with key "${layoutKey}" not found.`);requestedLocale||(requestedLocale=yield this.localeService.getCurrentLocale());let layoutMetadata=localizedLayoutContract.locales[requestedLocale];if(layoutMetadata){if(!layoutMetadata.contentKey){const identifier=Utils.guid();layoutMetadata.contentKey="files/"+identifier,yield this.objectStorage.updateObject(layoutKey,layoutMetadata)}}else{const defaultLocale=yield this.localeService.getDefaultLocale(),defaultLayoutMetadata=localizedLayoutContract.locales[defaultLocale],identifier=Utils.guid();layoutMetadata=this.copyMetadata(defaultLayoutMetadata,{contentKey:"files/"+identifier}),localizedLayoutContract.locales[requestedLocale]=layoutMetadata,yield this.objectStorage.updateObject(layoutKey,localizedLayoutContract)}yield this.objectStorage.updateObject(layoutMetadata.contentKey,content)}))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.layoutTemplate=void 0,exports.layoutTemplate={type:"layout",nodes:[{type:"layout-section",styles:null,nodes:[{type:"grid",nodes:[{type:"grid-cell",nodes:[{type:"page"}],role:"article",styles:{instance:{"grid-cell":{xs:{position:{col:1,row:1},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}}},id:"myaxhjsvdw",padding:{xs:{top:5,left:5,right:5,bottom:5},md:{top:15,left:15,right:15,bottom:15}}}}}],styles:{instance:{grid:{xs:{rows:["auto"],cols:["1fr"]}},id:"cmwjhkfdnp",size:{sm:{maxWidth:540},md:{maxWidth:720},lg:{maxWidth:960},xl:{maxWidth:1140}},margin:{xs:{top:10,left:"auto",right:"auto",bottom:10},md:{top:15,bottom:15},xl:{top:25,bottom:25}}}}}]}]}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.LocaleService=void 0;exports.LocaleService=class{constructor(objectStorage){this.objectStorage=objectStorage,this.currentLocale="en-us"}getLocales(){return __awaiter(this,void 0,void 0,(function*(){const localeEnUs={key:"locales/en-us",code:"en-us",displayName:"English (US)"},result=yield this.objectStorage.getObject("locales");if(!result)return[localeEnUs];const locales=Object.values(result);return[localeEnUs].concat(locales)}))}createLocale(code,displayName){return __awaiter(this,void 0,void 0,(function*(){const key="locales/"+code,locale={key:key,code:code,displayName:displayName};yield this.objectStorage.addObject(key,locale)}))}deleteLocale(code){return __awaiter(this,void 0,void 0,(function*(){}))}getDefaultLocale(){return __awaiter(this,void 0,void 0,(function*(){return"en-us"}))}getCurrentLocale(){return __awaiter(this,void 0,void 0,(function*(){return this.currentLocale}))}setCurrentLocale(localeCode){return __awaiter(this,void 0,void 0,(function*(){this.currentLocale=localeCode}))}isLocalizationEnabled(){return __awaiter(this,void 0,void 0,(function*(){return!0}))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MediaHyperlinkProvider=void 0;const hyperlinkModel_1=__webpack_require__(80),Constants=__webpack_require__(208);exports.MediaHyperlinkProvider=class{constructor(){this.name="Media",this.componentName="media-selector",this.iconClass="paperbits-icon paperbits-image-2"}canHandleHyperlink(contentItemKey){return contentItemKey.startsWith(Constants.mediaRoot+"/")}getHyperlinkFromResource(media){const hyperlinkModel=new hyperlinkModel_1.HyperlinkModel;return hyperlinkModel.title=media.fileName,hyperlinkModel.targetKey=media.key,hyperlinkModel.href=media.permalink,hyperlinkModel}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MediaService=void 0;const Utils=__webpack_require__(6),Constants=__webpack_require__(208),persistence_1=__webpack_require__(23);exports.MediaService=class{constructor(objectStorage,blobStorage){this.objectStorage=objectStorage,this.blobStorage=blobStorage}getMediaByPermalink(permalink){return __awaiter(this,void 0,void 0,(function*(){if(!permalink)throw new Error('Parameter "permalink" not specified.');const query=persistence_1.Query.from().where("permalink",persistence_1.Operator.equals,permalink),result=(yield this.objectStorage.searchObjects(Constants.mediaRoot,query)).value,uploads=Object.values(result);return uploads.length>0?uploads[0]:null}))}getMediaByKey(key){return __awaiter(this,void 0,void 0,(function*(){if(!key)throw new Error('Parameter "key" not specified.');const media=yield this.objectStorage.getObject(key);if(!media)return console.warn(`Media with key ${key} not found.`),null;if(media.blobKey){const downloadUrl=yield this.getDownloadUrlFromBlobKey(media.blobKey);media.downloadUrl=downloadUrl||media.downloadUrl}return media}))}getDownloadUrlFromBlobKey(blobKey){return __awaiter(this,void 0,void 0,(function*(){try{return yield this.blobStorage.getDownloadUrl(blobKey)}catch(error){}}))}convertPage(pageOfMedia){const resultPage={value:pageOfMedia.value,takeNext:()=>__awaiter(this,void 0,void 0,(function*(){const nextPage=yield pageOfMedia.takeNext();return this.convertPage(nextPage)}))};return pageOfMedia.takeNext||(resultPage.takeNext=null),resultPage}search(query){return __awaiter(this,void 0,void 0,(function*(){if(!query)throw new Error('Parameter "query" not specified.');try{const pageOfResults=yield this.objectStorage.searchObjects(Constants.mediaRoot,query);return this.convertPage(pageOfResults)}catch(error){throw new Error("Unable to search media: "+(error.stack||error.message))}}))}deleteMedia(media){return __awaiter(this,void 0,void 0,(function*(){if(!media)throw new Error('Parameter "media" not specified.');try{yield this.objectStorage.deleteObject(media.key),yield this.blobStorage.deleteBlob(media.blobKey)}catch(error){console.warn(error)}}))}createMedia(name,content,mimeType){const blobKey=Utils.guid(),media={key:`${Constants.mediaRoot}/${blobKey}`,fileName:name,blobKey:blobKey,description:"",keywords:"",permalink:"/content/"+name,mimeType:mimeType};return this.uploadContent(content,media)}createMediaUrl(name,downloadUrl,mimeType){return __awaiter(this,void 0,void 0,(function*(){const blobKey=Utils.guid(),media={key:`${Constants.mediaRoot}/${blobKey}`,fileName:name,blobKey:void 0,downloadUrl:downloadUrl,description:"",keywords:"",permalink:"/content/"+name,mimeType:mimeType};return yield this.updateMedia(media),media}))}uploadContent(content,media){return new Promise((resolve,reject)=>__awaiter(this,void 0,void 0,(function*(){yield this.blobStorage.uploadBlob(media.blobKey,content,media.mimeType);const uri=yield this.blobStorage.getDownloadUrl(media.blobKey);media.downloadUrl?(media.downloadUrl=uri,yield this.objectStorage.updateObject(media.key,media)):(media.downloadUrl=uri,yield this.objectStorage.addObject(media.key,media)),resolve(media)})))}updateMedia(media){if(!media)throw new Error('Parameter "media" not specified.');return this.objectStorage.updateObject(media.key,media)}updateMediaContent(media,content){if(!media)throw new Error('Parameter "media" not specified.');if(!content)throw new Error('Parameter "content" not specified.');return this.uploadContent(content,media)}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MediaPermalinkResolver=void 0;const permalinks_1=__webpack_require__(57);exports.MediaPermalinkResolver=class{constructor(mediaService){this.mediaService=mediaService,this.mediaPath="uploads/"}canHandleTarget(targetKey){return targetKey.startsWith("uploads/")}getUrlByTargetKey(mediaKey){return __awaiter(this,void 0,void 0,(function*(){if(!mediaKey)throw new Error('Parameter "mediaKey" not specified.');try{const contentItem=yield this.mediaService.getMediaByKey(mediaKey);return contentItem?contentItem.permalink:(console.warn(`Could not find permalink by key ${mediaKey}.`),null)}catch(error){return""}}))}getHyperlink(mediaContract,hyperlinkContract){return __awaiter(this,void 0,void 0,(function*(){const hyperlinkModel=new permalinks_1.HyperlinkModel;return hyperlinkModel.targetKey=mediaContract.key,hyperlinkModel.href=mediaContract.permalink,hyperlinkModel.title=mediaContract.fileName||mediaContract.permalink,hyperlinkContract&&(hyperlinkModel.target=hyperlinkContract.target,hyperlinkModel.anchor=hyperlinkContract.anchor,hyperlinkModel.anchorName=hyperlinkContract.anchorName),hyperlinkModel}))}getHyperlinkByTargetKey(targetKey){return __awaiter(this,void 0,void 0,(function*(){if(!targetKey)throw new Error("Target key cannot be null or empty.");if(!targetKey.startsWith(this.mediaPath))return null;const mediaContract=yield this.mediaService.getMediaByKey(targetKey);if(!mediaContract)return console.warn(`Could create hyperlink for target with key ${targetKey}.`),null;return yield this.getHyperlink(mediaContract)}))}getContentItemByPermalink(permalink){return __awaiter(this,void 0,void 0,(function*(){if(!permalink)throw new Error('Parameter "permalink" not specified.');return yield this.mediaService.getMediaByPermalink(permalink)}))}getHyperlinkFromContract(hyperlinkContract,locale){return __awaiter(this,void 0,void 0,(function*(){if(!hyperlinkContract.targetKey)throw new Error("Target key cannot be null or empty.");if(!hyperlinkContract.targetKey.startsWith(this.mediaPath))return null;let hyperlinkModel;if(hyperlinkContract.targetKey){const mediaContract=yield this.mediaService.getMediaByKey(hyperlinkContract.targetKey);if(mediaContract)return this.getHyperlink(mediaContract,hyperlinkContract)}return hyperlinkModel=new permalinks_1.HyperlinkModel,hyperlinkModel.title="Unset link",hyperlinkModel.target=hyperlinkContract.target,hyperlinkModel.targetKey=hyperlinkContract.targetKey,hyperlinkModel.href="#",hyperlinkModel.anchor=hyperlinkContract.anchor,hyperlinkModel.anchorName=hyperlinkContract.anchorName,hyperlinkModel}))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.DefaultPermalinkService=void 0;exports.DefaultPermalinkService=class{constructor(permalinkResolver,reservedPermalinks){this.permalinkResolver=permalinkResolver,this.reservedPermalinks=reservedPermalinks}isPermalinkDefined(permalink){return __awaiter(this,void 0,void 0,(function*(){if(!permalink)return!1;if(this.reservedPermalinks.includes(permalink))return!0;return!(yield this.permalinkResolver.getContentItemByPermalink(permalink))}))}getPermalink(uri){return __awaiter(this,void 0,void 0,(function*(){const contentItem=yield this.permalinkResolver.getContentItemByPermalink(uri);if(!contentItem)return null;return{key:"",uri:uri,targetKey:contentItem.key}}))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NavigationEvents=void 0;class NavigationEvents{}exports.NavigationEvents=NavigationEvents,NavigationEvents.onNavigationItemUpdate="onNavigationItemUpdate"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NavigationItemModel=void 0;exports.NavigationItemModel=class{constructor(){this.nodes=[]}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.NavigationService=void 0;exports.NavigationService=class{constructor(objectStorage){this.objectStorage=objectStorage}find(items,key){for(const item of items){if(item.key===key)return item;if(item.navigationItems){const child=this.find(item.navigationItems,key);if(child)return child}}}getNavigationItem(navigationItemKey){return __awaiter(this,void 0,void 0,(function*(){const items=yield this.getNavigationItems();return this.find(items,navigationItemKey)}))}getNavigationItems(){return __awaiter(this,void 0,void 0,(function*(){const result=yield this.objectStorage.getObject("navigationItems");return result?Object.values(result):[]}))}updateNavigation(navigationItems){return __awaiter(this,void 0,void 0,(function*(){yield this.objectStorage.updateObject("navigationItems",navigationItems)}))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PageHyperlinkProvider=void 0;exports.PageHyperlinkProvider=class{constructor(){this.name="Pages",this.componentName="page-selector",this.iconClass="paperbits-icon paperbits-menu-4"}canHandleHyperlink(contentItemKey){return contentItemKey.startsWith("pages/")}getHyperlinkFromResource(hyperlinkModel){return hyperlinkModel}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PageService=void 0;const Utils=__webpack_require__(6),Constants=__webpack_require__(206),persistence_1=__webpack_require__(23);exports.PageService=class{constructor(objectStorage,blockService,localeService){this.objectStorage=objectStorage,this.blockService=blockService,this.localeService=localeService,this.pagesPath="pages"}copyMetadata(sourceMetadata,targetMetadata){if(!sourceMetadata)throw new Error('Parameter "sourceMetadata" not specified.');if(!targetMetadata)throw new Error('Parameter "targetMetadata" not specified.');return targetMetadata.title=sourceMetadata.title,targetMetadata.description=sourceMetadata.description,targetMetadata.keywords=sourceMetadata.keywords,targetMetadata.permalink=sourceMetadata.permalink,targetMetadata.jsonLd=sourceMetadata.jsonLd,targetMetadata.socialShareData=sourceMetadata.socialShareData,targetMetadata}localizedContractToContract(defaultLocale,currentLocale,requestedLocale,localizedPageContract){const locales=localizedPageContract[Constants.localePrefix],pageMetadata=(requestedLocale?locales[requestedLocale]:locales[currentLocale])||this.copyMetadata(locales[defaultLocale],{});if(!pageMetadata)return null;return Object.assign({key:localizedPageContract.key},pageMetadata)}getPageByPermalink(permalink,requestedLocale=null){return __awaiter(this,void 0,void 0,(function*(){if(!permalink)throw new Error('Parameter "permalink" not specified.');const defaultLocale=yield this.localeService.getDefaultLocale(),currentLocale=yield this.localeService.getCurrentLocale(),permalinkProperty=`${Constants.localePrefix}/${defaultLocale}/permalink`,query=persistence_1.Query.from().where(permalinkProperty,persistence_1.Operator.equals,permalink);try{const result=(yield this.objectStorage.searchObjects(this.pagesPath,query)).value;if(!result)return null;const pages=Object.values(result);if(0===pages.length)return null;const firstPage=pages[0];return this.localizedContractToContract(defaultLocale,currentLocale,requestedLocale,firstPage)}catch(error){throw new Error("Unable to search pages: "+(error.stack||error.message))}}))}getPageByKey(key,requestedLocale){return __awaiter(this,void 0,void 0,(function*(){if(!key)throw new Error('Parameter "key" not specified.');const pageContract=yield this.objectStorage.getObject(key);if(!pageContract)return null;const defaultLocale=yield this.localeService.getDefaultLocale(),currentLocale=yield this.localeService.getCurrentLocale();return this.localizedContractToContract(defaultLocale,currentLocale,requestedLocale,pageContract)}))}convertPage(localizedPage,defaultLocale,searchLocale,requestedLocale){const resultPage={value:localizedPage.value.map(x=>this.localizedContractToContract(defaultLocale,searchLocale,requestedLocale,x)),takeNext:()=>__awaiter(this,void 0,void 0,(function*(){const nextLocalizedPage=yield localizedPage.takeNext();return this.convertPage(nextLocalizedPage,defaultLocale,searchLocale,requestedLocale)}))};return localizedPage.takeNext||(resultPage.takeNext=null),resultPage}search(query,requestedLocale){return __awaiter(this,void 0,void 0,(function*(){if(!query)throw new Error('Parameter "query" not specified.');const defaultLocale=yield this.localeService.getDefaultLocale(),currentLocale=yield this.localeService.getCurrentLocale(),searchLocale=requestedLocale||currentLocale,localizedQuery=Utils.localizeQuery(query,searchLocale);try{const pageOfResults=yield this.objectStorage.searchObjects(this.pagesPath,localizedQuery);return this.convertPage(pageOfResults,defaultLocale,searchLocale,requestedLocale)}catch(error){throw new Error("Unable to search pages: "+(error.stack||error.message))}}))}deletePage(page){return __awaiter(this,void 0,void 0,(function*(){if(!page)throw new Error('Parameter "page" not specified.');try{const localizedPageContract=yield this.objectStorage.getObject(page.key);if(localizedPageContract.locales){const contentKeys=Object.values(localizedPageContract.locales).map(x=>x.contentKey);for(const contentKey of contentKeys)yield this.objectStorage.deleteObject(contentKey)}yield this.objectStorage.deleteObject(page.key)}catch(error){throw new Error(`Unable to delete page ${page.title}: ${error.stack||error.message}`)}}))}createPage(permalink,title,description,keywords){return __awaiter(this,void 0,void 0,(function*(){const locale=yield this.localeService.getDefaultLocale(),identifier=Utils.guid(),pageKey=`${this.pagesPath}/${identifier}`,contentKey="files/"+identifier,localizedPage={key:pageKey,locales:{[locale]:{title:title,description:description,keywords:keywords,permalink:permalink,contentKey:contentKey}}};yield this.objectStorage.addObject(pageKey,localizedPage);const template=yield this.blockService.getBlockContent("blocks/new-page-template");template.key=contentKey,yield this.objectStorage.addObject(contentKey,template);return{key:pageKey,title:title,description:description,keywords:keywords,permalink:permalink,contentKey:contentKey}}))}updatePage(page,requestedLocale){return __awaiter(this,void 0,void 0,(function*(){if(!page)throw new Error('Parameter "page" not specified.');requestedLocale||(requestedLocale=yield this.localeService.getCurrentLocale());const pageContract=yield this.objectStorage.getObject(page.key);if(!pageContract)throw new Error(`Could not update page. Page with key "${page.key}" doesn't exist.`);const existingLocaleMetadata=pageContract.locales[requestedLocale]||{};pageContract.locales[requestedLocale]=this.copyMetadata(page,existingLocaleMetadata),yield this.objectStorage.updateObject(page.key,pageContract)}))}getPageContent(pageKey,requestedLocale){return __awaiter(this,void 0,void 0,(function*(){if(!pageKey)throw new Error('Parameter "pageKey" not specified.');requestedLocale||(requestedLocale=yield this.localeService.getCurrentLocale());const defaultLocale=yield this.localeService.getDefaultLocale(),localizedPageContract=yield this.objectStorage.getObject(pageKey);let pageContent,pageMetadata=localizedPageContract.locales[requestedLocale];if(pageMetadata||(pageMetadata=localizedPageContract.locales[defaultLocale]),pageMetadata.contentKey)pageContent=yield this.objectStorage.getObject(pageMetadata.contentKey);else{const pageDefaultLocaleMetadata=localizedPageContract.locales[defaultLocale];pageContent=yield this.objectStorage.getObject(pageDefaultLocaleMetadata.contentKey)}return pageContent}))}updatePageContent(pageKey,content,requestedLocale){return __awaiter(this,void 0,void 0,(function*(){if(!pageKey)throw new Error('Parameter "pageKey" not specified.');if(!content)throw new Error('Parameter "content" not specified.');const localizedPageContract=yield this.objectStorage.getObject(pageKey);if(!localizedPageContract)throw new Error(`Page with key "${pageKey}" not found.`);requestedLocale||(requestedLocale=yield this.localeService.getCurrentLocale());let pageMetadata=localizedPageContract.locales[requestedLocale];if(pageMetadata){if(!pageMetadata.contentKey){const identifier=Utils.guid();pageMetadata.contentKey="files/"+identifier,yield this.objectStorage.updateObject(pageKey,pageMetadata)}}else{const defaultLocale=yield this.localeService.getDefaultLocale(),defaultPageMetadata=localizedPageContract.locales[defaultLocale],identifier=Utils.guid();pageMetadata=this.copyMetadata(defaultPageMetadata,{contentKey:"files/"+identifier}),localizedPageContract.locales[requestedLocale]=pageMetadata,yield this.objectStorage.updateObject(pageKey,localizedPageContract)}yield this.objectStorage.updateObject(pageMetadata.contentKey,content)}))}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PagePermalinkResolver=void 0;const permalinks_1=__webpack_require__(57);exports.PagePermalinkResolver=class{constructor(pageService,localeService){this.pageService=pageService,this.localeService=localeService}canHandleTarget(targetKey){return targetKey.startsWith("pages/")}getUrlByTargetKey(targetKey,locale){return __awaiter(this,void 0,void 0,(function*(){if(!targetKey)throw new Error("Target key cannot be null or empty.");if(!targetKey.startsWith("pages/"))return null;const defaultLocale=yield this.localeService.getDefaultLocale();let pageContract=yield this.pageService.getPageByKey(targetKey,locale);if(pageContract)locale&&locale!==defaultLocale&&(pageContract.permalink=`/${locale}${pageContract.permalink}`);else if(pageContract=yield this.pageService.getPageByKey(targetKey,defaultLocale),!pageContract)return console.warn(`Could not find content item with key ${targetKey}.`),null;return pageContract.permalink}))}getHyperlink(pageContract,hyperlinkContract){return __awaiter(this,void 0,void 0,(function*(){const hyperlinkModel=new permalinks_1.HyperlinkModel;return hyperlinkModel.targetKey=pageContract.key,hyperlinkModel.href=pageContract.permalink,hyperlinkModel.title=pageContract.title||pageContract.permalink,hyperlinkContract&&(hyperlinkModel.target=hyperlinkContract.target,hyperlinkModel.anchor=hyperlinkContract.anchor,hyperlinkModel.anchorName=hyperlinkContract.anchorName),hyperlinkModel}))}getHyperlinkFromContract(hyperlinkContract,locale){return __awaiter(this,void 0,void 0,(function*(){if(!hyperlinkContract.targetKey)throw new Error("Target key cannot be null or empty.");if(!hyperlinkContract.targetKey.startsWith("pages/"))return null;let hyperlinkModel;if(hyperlinkContract.targetKey){const pageContract=yield this.pageService.getPageByKey(hyperlinkContract.targetKey,locale);if(pageContract)return this.getHyperlink(pageContract,hyperlinkContract)}return hyperlinkModel=new permalinks_1.HyperlinkModel,hyperlinkModel.title="Unset link",hyperlinkModel.target=hyperlinkContract.target,hyperlinkModel.targetKey=hyperlinkContract.targetKey,hyperlinkModel.href="#",hyperlinkModel.anchor=hyperlinkContract.anchor,hyperlinkModel.anchorName=hyperlinkContract.anchorName,hyperlinkModel}))}getHyperlinkByTargetKey(targetKey,locale){return __awaiter(this,void 0,void 0,(function*(){if(!targetKey)throw new Error("Target key cannot be null or empty.");if(!targetKey.startsWith("pages/"))return null;const defaultLocale=yield this.localeService.getDefaultLocale();let pageContract=yield this.pageService.getPageByKey(targetKey,locale);if(pageContract)locale&&locale!==defaultLocale&&(pageContract.permalink=`/${locale}${pageContract.permalink}`);else if(pageContract=yield this.pageService.getPageByKey(targetKey,defaultLocale),!pageContract)return console.warn(`Could create hyperlink for target with key ${targetKey} in locale ${locale}.`),null;return yield this.getHyperlink(pageContract)}))}getContentByPermalink(permalink,locale){return __awaiter(this,void 0,void 0,(function*(){if(!permalink)throw new Error('Parameter "permalink" not specified.');let pageContract=yield this.pageService.getPageByPermalink(permalink,locale);if(!pageContract){const defaultLocale=yield this.localeService.getDefaultLocale();if(pageContract=yield this.pageService.getPageByPermalink(permalink,defaultLocale),!pageContract)return null}return yield this.pageService.getPageContent(pageContract.key)}))}getContentItemByPermalink(permalink,locale){return __awaiter(this,void 0,void 0,(function*(){if(!permalink)throw new Error('Parameter "permalink" not specified.');return yield this.pageService.getPageByPermalink(permalink,locale)}))}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.DefaultRouter=void 0;const _1=__webpack_require__(136);exports.DefaultRouter=class{constructor(routeGuards,eventManager){this.routeGuards=routeGuards,this.eventManager=eventManager,this.notifyListeners=!0,this.currentRoute=this.getRouteFromLocation()}getRouteFromLocation(){const path=location.pathname,hash=location.hash.startsWith("#")?location.hash.slice(1):null;return{url:path+(hash?"#"+hash:""),path:path,hash:hash,metadata:{},previous:null}}addRouteChangeListener(eventHandler){this.eventManager.addEventListener(_1.RouterEvents.onRouteChange,eventHandler)}removeRouteChangeListener(eventHandler){this.eventManager.removeEventListener(_1.RouterEvents.onRouteChange,eventHandler)}addHistoryUpdateListener(eventHandler){this.eventManager.addEventListener(_1.RouterEvents.onHistoryUpdate,eventHandler)}removeHistoryUpdateListener(eventHandler){this.eventManager.removeEventListener(_1.RouterEvents.onHistoryUpdate,eventHandler)}navigateTo(url,title=null,metadata={}){return __awaiter(this,void 0,void 0,(function*(){const route=this.getRoute(url,title,metadata);if(!route)return;(yield this.canActivate(route))&&(this.currentRoute=route,this.notifyListeners&&this.scheduleNotification(route))}))}scheduleNotification(route){clearTimeout(this.notificationTimeout),this.notificationTimeout=setTimeout(()=>{this.eventManager.dispatchEvent(_1.RouterEvents.onRouteChange,route)},100)}updateHistory(url,title){const route=this.getRoute(url,title);route&&this.notifyListeners&&this.eventManager.dispatchEvent(_1.RouterEvents.onHistoryUpdate,route)}getRoute(url,title=null,metadata={}){if(!url)return;const isFullUrl=url&&(url.startsWith("http://")||url.startsWith("https://")),isLocalUrl=url.startsWith(location.origin);if(isFullUrl&&!isLocalUrl)return void window.open(url,"_blank");const parts=(url=isFullUrl?url.substring(location.origin.length):url).split("#");return{url:url,path:parts.length>1?parts[0]||location.pathname:parts[0],title:title,metadata:metadata,hash:parts.length>1?parts[1]:"",previous:this.currentRoute}}canActivate(route){return __awaiter(this,void 0,void 0,(function*(){for(const routeGuard of this.routeGuards)try{if(!(yield routeGuard.canActivate(route)))return!1}catch(error){throw new Error("Unable to invoke route a guard: "+(error.stack||error.message))}return!0}))}getCurrentUrl(){let permalink=this.currentRoute.path;const hash=this.getHash();return this.currentRoute.hash&&(permalink+="#"+hash),permalink}getCurrentUrlMetadata(){return this.currentRoute.metadata}getPath(){return this.currentRoute.path}getHash(){return this.currentRoute.hash}getCurrentRoute(){return this.currentRoute}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.DefaultRouteGuard=void 0;exports.DefaultRouteGuard=class{canActivate(route){return __awaiter(this,void 0,void 0,(function*(){return!0}))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RouterEvents=void 0;class RouterEvents{}exports.RouterEvents=RouterEvents,RouterEvents.onRouteChange="onRouteChange",RouterEvents.onHistoryUpdate="onHistoryUpdate"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HistoryRouteHandler=void 0;exports.HistoryRouteHandler=class{constructor(router){this.router=router,this.internalPushState=history.pushState,history.pushState=this.externalPushState.bind(this),this.onRouteChange=this.onRouteChange.bind(this),router.addRouteChangeListener(this.onRouteChange),router.addHistoryUpdateListener(this.onRouteChange),window.addEventListener("popstate",this.onPopState.bind(this))}onPopState(event){const url=location.pathname+location.hash;this.router.navigateTo(url)}externalPushState(route){this.router.navigateTo(route.url)}onRouteChange(route){this.internalPushState.call(history,route,route.title,route.url)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LocationRouteHandler=void 0;exports.LocationRouteHandler=class{constructor(router){this.router=router,window.addEventListener("popstate",this.onPopState.bind(this)),router.addRouteChangeListener(this.onRouteChange)}onPopState(event){const url=location.pathname+location.hash;this.router.navigateTo(url)}onRouteChange(route){const locationHash=location.hash.slice(1);route.path===location.pathname&&route.hash===locationHash||location.assign(route.url)}}},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(570),exports),__exportStar(__webpack_require__(571),exports),__exportStar(__webpack_require__(572),exports)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SiteService=void 0;exports.SiteService=class{constructor(objectStorage){this.objectStorage=objectStorage}getSettings(){return __awaiter(this,void 0,void 0,(function*(){return yield this.objectStorage.getObject("settings")}))}setSettings(settings){return __awaiter(this,void 0,void 0,(function*(){if(!settings)throw new Error('Parameter "settings" not specified.');yield this.objectStorage.updateObject("settings",settings)}))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(574),exports),__exportStar(__webpack_require__(575),exports),__exportStar(__webpack_require__(211),exports),__exportStar(__webpack_require__(576),exports)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.UrlService=void 0;const Utils=__webpack_require__(6);exports.UrlService=class{constructor(objectStorage){this.objectStorage=objectStorage}getUrlByKey(key){return __awaiter(this,void 0,void 0,(function*(){return yield this.objectStorage.getObject(key)}))}convertPage(pageOfUrls){const resultPage={value:pageOfUrls.value,takeNext:()=>__awaiter(this,void 0,void 0,(function*(){const nextLocalizedPage=yield pageOfUrls.takeNext();return this.convertPage(nextLocalizedPage)}))};return pageOfUrls.takeNext||(resultPage.takeNext=null),resultPage}search(query){return __awaiter(this,void 0,void 0,(function*(){if(!query)throw new Error('Parameter "query" not specified.');try{const pageOfResults=yield this.objectStorage.searchObjects("urls",query);return this.convertPage(pageOfResults)}catch(error){throw new Error("Unable to search url: "+(error.stack||error.message))}}))}deleteUrl(url){return __awaiter(this,void 0,void 0,(function*(){const deleteUrlPromise=this.objectStorage.deleteObject(url.key);yield Promise.all([deleteUrlPromise])}))}createUrl(permalink,title,description){return __awaiter(this,void 0,void 0,(function*(){const key="urls/"+Utils.guid(),contract={key:key,title:title,description:description,permalink:permalink};return yield this.objectStorage.addObject(key,contract),contract}))}updateUrl(url){return __awaiter(this,void 0,void 0,(function*(){yield this.objectStorage.updateObject(url.key,url)}))}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.UrlPermalinkResolver=void 0;const permalinks_1=__webpack_require__(57);exports.UrlPermalinkResolver=class{constructor(urlService){this.urlService=urlService}canHandleTarget(targetKey){return targetKey.startsWith("urls/")}getUrlByTargetKey(targetKey){return __awaiter(this,void 0,void 0,(function*(){if(!targetKey)throw new Error("Target key cannot be null or empty.");if(!targetKey.startsWith("urls/"))return null;try{const contentItem=yield this.urlService.getUrlByKey(targetKey);return contentItem?contentItem.permalink:(console.warn(`Could not find permalink by key ${targetKey}.`),null)}catch(error){return null}}))}getHyperlink(urlContract,target="_self"){return __awaiter(this,void 0,void 0,(function*(){const hyperlinkModel=new permalinks_1.HyperlinkModel;return hyperlinkModel.targetKey=urlContract.key,hyperlinkModel.href=urlContract.permalink,hyperlinkModel.title=urlContract.title||urlContract.permalink,hyperlinkModel.target=target,hyperlinkModel}))}getHyperlinkFromContract(hyperlinkContract,locale){return __awaiter(this,void 0,void 0,(function*(){if(!hyperlinkContract.targetKey)throw new Error("Target key cannot be null or empty.");if(!hyperlinkContract.targetKey.startsWith("urls/"))return null;let hyperlinkModel;if(hyperlinkContract.targetKey){const urlContract=yield this.urlService.getUrlByKey(hyperlinkContract.targetKey,locale);if(urlContract)return this.getHyperlink(urlContract,hyperlinkContract.target)}return hyperlinkModel=new permalinks_1.HyperlinkModel,hyperlinkModel.title="Unset link",hyperlinkModel.target=hyperlinkContract.target,hyperlinkModel.targetKey=hyperlinkContract.targetKey,hyperlinkModel.href="#",hyperlinkModel.anchor=hyperlinkContract.anchor,hyperlinkModel}))}getHyperlinkByTargetKey(targetKey,locale){return __awaiter(this,void 0,void 0,(function*(){if(!targetKey)throw new Error("Target key cannot be null or empty.");if(!targetKey.startsWith("urls/"))return null;const contentItem=yield this.urlService.getUrlByKey(targetKey,locale);if(!contentItem)return null;return yield this.getHyperlink(contentItem)}))}}},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(579),exports),__exportStar(__webpack_require__(580),exports),__exportStar(__webpack_require__(581),exports),__exportStar(__webpack_require__(582),exports),__exportStar(__webpack_require__(81),exports),__exportStar(__webpack_require__(584),exports)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PlaceholderModel=void 0;exports.PlaceholderModel=class{constructor(message){this.message=message}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.WidgetService=void 0;exports.WidgetService=class{constructor(widgetHandlers){this.widgetHandlers=widgetHandlers,this.getWidgetOrders=this.getWidgetOrders.bind(this)}getWidgetOrders(){return __awaiter(this,void 0,void 0,(function*(){const widgetOrders=new Array,tasks=this.widgetHandlers.map(handler=>__awaiter(this,void 0,void 0,(function*(){if(handler.getWidgetOrder){const order=yield handler.getWidgetOrder();widgetOrders.push(order)}})));return yield Promise.all(tasks),widgetOrders}))}getWidgetHandler(type){return this.widgetHandlers.find(x=>x instanceof type)}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.BackgroundModelBinder=void 0;const backgroundModel_1=__webpack_require__(212);exports.BackgroundModelBinder=class{constructor(mediaPermalinkResolver){this.mediaPermalinkResolver=mediaPermalinkResolver}contractToModel(contract){return __awaiter(this,void 0,void 0,(function*(){const model=new backgroundModel_1.BackgroundModel;return contract.color&&(model.colorKey=contract.color),contract.size&&(model.size=contract.size),contract.position&&(model.position=contract.position),contract.picture&&contract.picture.sourceKey&&(model.sourceType="picture",model.sourceKey=contract.picture.sourceKey,model.sourceUrl=yield this.mediaPermalinkResolver.getUrlByTargetKey(contract.picture.sourceKey)),model}))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ButtonModule=void 0;const buttonViewModel_1=__webpack_require__(213),buttonModelBinder_1=__webpack_require__(588),buttonViewModelBinder_1=__webpack_require__(594);exports.ButtonModule=class{register(injector){injector.bind("button",buttonViewModel_1.Button),injector.bindToCollection("modelBinders",buttonModelBinder_1.ButtonModelBinder),injector.bindToCollection("viewModelBinders",buttonViewModelBinder_1.ButtonViewModelBinder)}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<a role="button" data-bind="text: label, hyperlink: hyperlink, secured: roles, styled: styles"></a>'},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ButtonModelBinder=void 0;const buttonModel_1=__webpack_require__(95),user_1=__webpack_require__(58);exports.ButtonModelBinder=class{constructor(permalinkResolver){this.permalinkResolver=permalinkResolver}canHandleContract(contract){return"button"===contract.type}canHandleModel(model){return model instanceof buttonModel_1.ButtonModel}contractToModel(contract){return __awaiter(this,void 0,void 0,(function*(){const model=new buttonModel_1.ButtonModel;return model.label=contract.label,model.roles=contract.roles||[user_1.BuiltInRoles.everyone.key],model.styles=contract.styles||{appearance:"components/button/default"},contract.hyperlink&&(model.hyperlink=yield this.permalinkResolver.getHyperlinkFromContract(contract.hyperlink)),model}))}modelToContract(model){const roles=model.roles&&1===model.roles.length&&model.roles[0]===user_1.BuiltInRoles.everyone.key?null:model.roles,buttonConfig={type:"button",label:model.label,styles:model.styles,roles:roles};return model.hyperlink&&(buttonConfig.hyperlink={target:model.hyperlink.target,targetKey:model.hyperlink.targetKey}),buttonConfig}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.VisibilityGuard=void 0;exports.VisibilityGuard=class{constructor(userService,eventManager){this.userService=userService,this.eventManager=eventManager,this.setVisibility(),this.eventManager.addEventListener("onUserRoleChange",this.setVisibility)}setVisibility(){return __awaiter(this,void 0,void 0,(function*(){const userRoles=yield this.userService.getUserRoles();document.querySelectorAll("[data-role]").forEach(element=>{const requiredRoles=element.getAttribute("data-role").split(",");userRoles.some(userRole=>requiredRoles.includes(userRole))?element.classList.remove("hidden"):element.classList.add("hidden")})}))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BuiltInRoles=void 0;class BuiltInRoles{}exports.BuiltInRoles=BuiltInRoles,BuiltInRoles.everyone={key:"everyone",name:"Everyone"},BuiltInRoles.anonymous={key:"anonymous",name:"Anonymous"},BuiltInRoles.authenticated={key:"authenticated",name:"Authenticated"}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ButtonViewModelBinder=void 0;const buttonViewModel_1=__webpack_require__(213),buttonModel_1=__webpack_require__(95);exports.ButtonViewModelBinder=class{constructor(eventManager,styleCompiler){this.eventManager=eventManager,this.styleCompiler=styleCompiler}modelToViewModel(model,viewModel,bindingContext){return __awaiter(this,void 0,void 0,(function*(){return viewModel||(viewModel=new buttonViewModel_1.Button),viewModel.label(model.label),viewModel.hyperlink(model.hyperlink),viewModel.roles(model.roles),model.styles&&viewModel.styles(yield this.styleCompiler.getStyleModelAsync(model.styles,null==bindingContext?void 0:bindingContext.styleManager)),viewModel.widgetBinding={displayName:"Button",readonly:!!bindingContext&&bindingContext.readonly,model:model,draggable:!0,flow:"inline",editor:"button-editor",applyChanges:()=>__awaiter(this,void 0,void 0,(function*(){yield this.modelToViewModel(model,viewModel,bindingContext),this.eventManager.dispatchEvent("onContentUpdate")}))},viewModel}))}canHandleModel(model){return model instanceof buttonModel_1.ButtonModel}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CardModule=void 0;const cardViewModel_1=__webpack_require__(214),cardModelBinder_1=__webpack_require__(597),cardViewModelBinder_1=__webpack_require__(598);exports.CardModule=class{register(injector){injector.bind("card",cardViewModel_1.CardViewModel),injector.bindToCollection("modelBinders",cardModelBinder_1.CardModelBinder),injector.bindToCollection("viewModelBinders",cardViewModelBinder_1.CardViewModelBinder)}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="card" data-bind="styled: styles">\r\n    \x3c!-- ko foreach: { data: widgets, as: \'widget\'  } --\x3e\r\n    \x3c!-- ko widget: widget --\x3e\r\n    \x3c!-- /ko --\x3e\r\n    \x3c!-- /ko --\x3e\r\n</div>'},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.CardModelBinder=void 0;const Utils=__webpack_require__(6),cardModel_1=__webpack_require__(96);exports.CardModelBinder=class{constructor(modelBinderSelector){this.modelBinderSelector=modelBinderSelector,this.contractToModel=this.contractToModel.bind(this)}canHandleContract(contract){return"card"===contract.type}canHandleModel(model){return model instanceof cardModel_1.CardModel}contractToModel(contract,bindingContext){return __awaiter(this,void 0,void 0,(function*(){const model=new cardModel_1.CardModel;contract.alignment&&(contract.alignment=Utils.optimizeBreakpoints(contract.alignment),model.alignment=contract.alignment),model.overflowX=contract.overflowX,model.overflowY=contract.overflowY,model.styles=contract.styles,contract.nodes||(contract.nodes=[]);const modelPromises=contract.nodes.map(contract=>__awaiter(this,void 0,void 0,(function*(){return this.modelBinderSelector.getModelBinderByContract(contract).contractToModel(contract,bindingContext)})));return model.widgets=yield Promise.all(modelPromises),model}))}modelToContract(model){const contract={type:"card",styles:model.styles,nodes:[]};return contract.alignment=model.alignment,contract.overflowX=model.overflowX,contract.overflowY=model.overflowY,model.widgets.forEach(widgetModel=>{const modelBinder=this.modelBinderSelector.getModelBinderByModel(widgetModel);contract.nodes.push(modelBinder.modelToContract(widgetModel))}),contract}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.CardViewModelBinder=void 0;const cardViewModel_1=__webpack_require__(214),cardModel_1=__webpack_require__(96),placeholderViewModel_1=__webpack_require__(38),cardHandlers_1=__webpack_require__(215);exports.CardViewModelBinder=class{constructor(viewModelBinderSelector,eventManager,styleCompiler){this.viewModelBinderSelector=viewModelBinderSelector,this.eventManager=eventManager,this.styleCompiler=styleCompiler}modelToViewModel(model,viewModel,bindingContext){return __awaiter(this,void 0,void 0,(function*(){viewModel||(viewModel=new cardViewModel_1.CardViewModel);const widgetViewModels=[];for(const widgetModel of model.widgets){const widgetViewModelBinder=this.viewModelBinderSelector.getViewModelBinderByModel(widgetModel),widgetViewModel=yield widgetViewModelBinder.modelToViewModel(widgetModel,null,bindingContext);widgetViewModels.push(widgetViewModel)}if(0===widgetViewModels.length&&widgetViewModels.push(new placeholderViewModel_1.PlaceholderViewModel("Card")),model.styles&&viewModel.styles(yield this.styleCompiler.getStyleModelAsync(model.styles,null==bindingContext?void 0:bindingContext.styleManager)),viewModel.widgets(widgetViewModels),!viewModel.widgetBinding){const binding={name:"card",displayName:"Card",readonly:!!bindingContext&&bindingContext.readonly,flow:"inline",model:model,draggable:!0,editor:"card-editor",handler:cardHandlers_1.CardHandlers,applyChanges:changes=>__awaiter(this,void 0,void 0,(function*(){yield this.modelToViewModel(model,viewModel,bindingContext),this.eventManager.dispatchEvent("onContentUpdate")}))};viewModel.widgetBinding=binding}return viewModel}))}canHandleModel(model){return model instanceof cardModel_1.CardModel}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="placeholder" data-bind="attr: { placeholder: title }"></div>'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CollapsiblePanelModule=void 0;const collapsiblePanelViewModel_1=__webpack_require__(137),collapsiblePanelModelBinder_1=__webpack_require__(217),collapsiblePanelViewModelBinder_1=__webpack_require__(218);exports.CollapsiblePanelModule=class{register(injector){injector.bind("collapsiblePanel",collapsiblePanelViewModel_1.CollapsiblePanel),injector.bindToCollection("modelBinders",collapsiblePanelModelBinder_1.CollapsiblePanelModelBinder),injector.bindToCollection("viewModelBinders",collapsiblePanelViewModelBinder_1.CollapsiblePanelViewModelBinder)}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="collapsible collapsible-panel">\r\n    <div class="backdrop"></div>\r\n    <div class="collapsible-content" data-bind="styled: $component.styles">\r\n        \x3c!-- ko foreach: { data: widgets, as: \'widget\'  } --\x3e\r\n        \x3c!-- ko widget: widget --\x3e\r\n        \x3c!-- /ko --\x3e\r\n        \x3c!-- /ko --\x3e\r\n\r\n        <button class="collapsible-panel-close" aria-label="Toggle" data-toggle="modal">\r\n            <i class="icon icon-simple-remove"></i>\r\n        </button>\r\n    </div>\r\n\r\n    <button class="collapsible-panel-open" aria-label="Toggle" data-toggle="modal">\r\n        <i class="icon icon-menu-8"></i>\r\n    </button>\r\n</div>'},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(38),exports),__exportStar(__webpack_require__(219),exports)},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(220),exports),__exportStar(__webpack_require__(84),exports),__exportStar(__webpack_require__(217),exports)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CollapsiblePanelEditorModule=void 0;const collapsiblePanelEditor_1=__webpack_require__(221),collapsiblePanelHandlers_1=__webpack_require__(220);exports.CollapsiblePanelEditorModule=class{register(injector){injector.bind("collapsiblePanelEditor",collapsiblePanelEditor_1.CollapsiblePanelEditor),injector.bindToCollection("widgetHandlers",collapsiblePanelHandlers_1.CollapsiblePanelHandlers,"collapsiblePanelHandler")}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<fieldset class="form flex-item flex-item-grow" data-bind="scrollable: true">\r\n    <background params="{ background: backgroundConfig, onUpdate: onBackgroundChange }"></background>\r\n    <container params="{ container: containerConfig, onUpdate: onContainerChange }"></container>\r\n    <size-editor params="{ sizeConfig: sizeConfig, onUpdate: onSizeChange, features: \'minMaxWidth\' }"></size-editor>\r\n</fieldset>'},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.AnimationStylePlugin=void 0;const Objects=__webpack_require__(19),styles_1=__webpack_require__(8),stylePlugin_1=__webpack_require__(16);class AnimationStylePlugin extends stylePlugin_1.StylePlugin{constructor(themeContract){super(),this.themeContract=themeContract,this.name="animation"}setThemeContract(themeContract){this.themeContract=themeContract}configToStyleRules(pluginConfig){return __awaiter(this,void 0,void 0,(function*(){const contract=Objects.getObjectAt(pluginConfig.animationKey,this.themeContract);return[new styles_1.StyleRule("animationName",contract.name),new styles_1.StyleRule("animationDuration",pluginConfig.duration?pluginConfig.duration+"s":"0"),new styles_1.StyleRule("animationIterationCount",pluginConfig.iterationCount||"infinite"),new styles_1.StyleRule("animationTimingFunction",pluginConfig.timingFunction||"linear")]}))}}exports.AnimationStylePlugin=AnimationStylePlugin},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FontFace=void 0;exports.FontFace=class{toJssString(){return`{\n            "src": "url(${this.src})",\n            "fontFamily": "${this.fontFamily}",\n            "fontStyle": "${this.fontStyle}",\n            "fontWeight": "${this.fontWeight}"\n        }`}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StyleMediaQuery=void 0;exports.StyleMediaQuery=class{constructor(minWidth){this.minWidth=minWidth,this.styles=[],this.globalStyles=[]}toJssString(){const stylesJss=this.styles.map(style=>style.toJssString()).join(),globalStylesJss=this.globalStyles.map(style=>style.toJssString()).join(),general=stylesJss||"",global=globalStylesJss?`"@global": {${globalStylesJss}}`:"";return`"@media(min-width:${this.minWidth}px)":{${[global,general].filter(x=>!!x).join(",")}}`}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StyleRule=void 0;exports.StyleRule=class{constructor(name,value){this.name=name,this.value=value}toJssString(){return`"${this.name}":"${this.value}"`}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Style=void 0;const Utils=__webpack_require__(6);exports.Style=class{constructor(selector){this.selector=Utils.camelCaseToKebabCase(selector),this.rules=[],this.nestedStyles=[],this.nestedGlobalStyles=[],this.modifierStyles=[],this.pseudoStyles=[],this.nestedMediaQueries=[]}addRule(rule){this.rules.push(rule)}addRules(rules){this.rules.push(...rules)}getRulesJssString(){return`{ ${[this.rules.filter(x=>!!x.value).map(rule=>rule.toJssString()).filter(x=>!!x).join(","),this.modifierStyles.map(style=>`"&.${style.selector}": ${style.getRulesJssString()}`).filter(x=>!!x).join(","),this.pseudoStyles.map(style=>`"&:${style.selector}": ${style.getRulesJssString()}`).filter(x=>!!x).join(","),this.nestedStyles.map(style=>`"& .${style.selector}": ${style.getRulesJssString()}`).filter(x=>!!x).join(","),this.nestedGlobalStyles.map(style=>`"& ${style.selector}": ${style.getRulesJssString()}`).filter(x=>!!x).join(",")].filter(x=>!!x).join(",")} }`}toJssString(){const rulesJssString=this.getRulesJssString();return`"${this.selector}":${rulesJssString}`}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StyleSheet=void 0;exports.StyleSheet=class{constructor(key){this.key=key,this.styles=[],this.globalStyles=[],this.mediaQueries=[],this.fontFaces=[]}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StyleManager=void 0;exports.StyleManager=class{constructor(eventManager=null){this.eventManager=eventManager,this.styleSheets={}}setStyleSheet(styleSheet){this.styleSheets[styleSheet.key]=styleSheet,this.eventManager&&this.eventManager.dispatchEvent("onStyleChange",styleSheet)}getStyleSheet(key){return this.styleSheets[key]}getAllStyleSheets(){return Object.values(this.styleSheets)}removeStyleSheet(key){this.eventManager&&this.eventManager.dispatchEvent("onStyleRemove",key)}removeAllStyleSheets(){this.styleSheets={}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.BorderRadiusStylePlugin=void 0;const styles_1=__webpack_require__(8),stylePlugin_1=__webpack_require__(16);class BorderRadiusStylePlugin extends stylePlugin_1.StylePlugin{constructor(){super(...arguments),this.name="borderRadius"}configToStyleRules(pluginConfig){return __awaiter(this,void 0,void 0,(function*(){return[new styles_1.StyleRule("borderTopLeftRadius",stylePlugin_1.StylePlugin.parseSize(pluginConfig.topLeftRadius)),new styles_1.StyleRule("borderTopRightRadius",stylePlugin_1.StylePlugin.parseSize(pluginConfig.topRightRadius)),new styles_1.StyleRule("borderBottomLeftRadius",stylePlugin_1.StylePlugin.parseSize(pluginConfig.bottomLeftRadius)),new styles_1.StyleRule("borderBottomRightRadius",stylePlugin_1.StylePlugin.parseSize(pluginConfig.bottomRightRadius))]}))}}exports.BorderRadiusStylePlugin=BorderRadiusStylePlugin},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.BorderStylePlugin=void 0;const Objects=__webpack_require__(19),stylePlugin_1=__webpack_require__(16),styles_1=__webpack_require__(8);class BorderStylePlugin extends stylePlugin_1.StylePlugin{constructor(themeContract){super(),this.themeContract=themeContract,this.name="border"}setThemeContract(themeContract){this.themeContract=themeContract}configToStyleRules(pluginConfig){return __awaiter(this,void 0,void 0,(function*(){const result=[];if(pluginConfig.top&&pluginConfig.top.width&&pluginConfig.top.style&&pluginConfig.top.colorKey){const borderTopColorPluginConfig=Objects.getObjectAt(pluginConfig.top.colorKey,this.themeContract);borderTopColorPluginConfig&&result.push(new styles_1.StyleRule("borderTop",`${stylePlugin_1.StylePlugin.parseSize(pluginConfig.top.width)} ${pluginConfig.top.style} ${borderTopColorPluginConfig.value}`))}else result.push(new styles_1.StyleRule("borderTop","none"));if(pluginConfig.left&&pluginConfig.left.width&&pluginConfig.left.style&&pluginConfig.left.colorKey){const borderLeftColorPluginConfig=Objects.getObjectAt(pluginConfig.left.colorKey,this.themeContract);borderLeftColorPluginConfig&&result.push(new styles_1.StyleRule("borderLeft",`${stylePlugin_1.StylePlugin.parseSize(pluginConfig.left.width)} ${pluginConfig.left.style} ${borderLeftColorPluginConfig.value}`))}else result.push(new styles_1.StyleRule("borderLeft","none"));if(pluginConfig.right&&pluginConfig.right.width&&pluginConfig.right.style&&pluginConfig.right.colorKey){const borderRightColorPluginConfig=Objects.getObjectAt(pluginConfig.right.colorKey,this.themeContract);borderRightColorPluginConfig&&result.push(new styles_1.StyleRule("borderRight",`${stylePlugin_1.StylePlugin.parseSize(pluginConfig.right.width)} ${pluginConfig.right.style} ${borderRightColorPluginConfig.value}`))}else result.push(new styles_1.StyleRule("borderRight","none"));if(pluginConfig.bottom&&pluginConfig.bottom.width&&pluginConfig.bottom.style&&pluginConfig.bottom.colorKey){const borderBottomColorpluginConfig=Objects.getObjectAt(pluginConfig.bottom.colorKey,this.themeContract);borderBottomColorpluginConfig&&result.push(new styles_1.StyleRule("borderBottom",`${stylePlugin_1.StylePlugin.parseSize(pluginConfig.bottom.width)} ${pluginConfig.bottom.style} ${borderBottomColorpluginConfig.value}`))}else result.push(new styles_1.StyleRule("borderBottom","none"));return result}))}}exports.BorderStylePlugin=BorderStylePlugin},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.FontsStylePlugin=void 0;const styles_1=__webpack_require__(8);exports.FontsStylePlugin=class{constructor(permalinkResolver,themeContract){this.permalinkResolver=permalinkResolver,this.themeContract=themeContract,this.displayName="Font"}contractToFontFaces(){return __awaiter(this,void 0,void 0,(function*(){const fontFaces=[];if(!this.themeContract.fonts)return fontFaces;for(const fontKey of Object.keys(this.themeContract.fonts)){const fontContract=this.themeContract.fonts[fontKey];for(const variant of fontContract.variants){let fontVariantUrl;if(variant.sourceKey)fontVariantUrl=yield this.permalinkResolver.getUrlByTargetKey(variant.sourceKey);else{if(!variant.file)throw new Error("Font variant URL is empty.");fontVariantUrl=variant.file}const fontFace=new styles_1.FontFace;fontFace.fontFamily=fontContract.family,fontFace.src=fontVariantUrl,fontFace.fontStyle=variant.style||"normal",fontFace.fontWeight=variant.weight||"normal",fontFaces.push(fontFace)}}return fontFaces}))}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MarginStylePlugin=void 0;const styles_1=__webpack_require__(8),stylePlugin_1=__webpack_require__(16);class MarginStylePlugin extends stylePlugin_1.StylePlugin{constructor(){super(...arguments),this.name="margin"}configToStyleRules(pluginConfig){return __awaiter(this,void 0,void 0,(function*(){const result=[];return result.push(new styles_1.StyleRule("marginTop",stylePlugin_1.StylePlugin.parseSize(pluginConfig.top))),result.push(new styles_1.StyleRule("marginLeft",stylePlugin_1.StylePlugin.parseSize(pluginConfig.left))),result.push(new styles_1.StyleRule("marginRight",stylePlugin_1.StylePlugin.parseSize(pluginConfig.right))),result.push(new styles_1.StyleRule("marginBottom",stylePlugin_1.StylePlugin.parseSize(pluginConfig.bottom))),result}))}}exports.MarginStylePlugin=MarginStylePlugin},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ShadowStylePlugin=void 0;const Objects=__webpack_require__(19),stylePlugin_1=__webpack_require__(16),styles_1=__webpack_require__(8);class ShadowStylePlugin extends stylePlugin_1.StylePlugin{constructor(themeContract){super(),this.themeContract=themeContract,this.name="shadow"}setThemeContract(themeContract){this.themeContract=themeContract}static contractToStyleRules(contract){if(!contract.color)return[new styles_1.StyleRule("boxShadow","none")];const offsetX=stylePlugin_1.StylePlugin.parseSize(contract.offsetX),offsetY=stylePlugin_1.StylePlugin.parseSize(contract.offsetY),blur=stylePlugin_1.StylePlugin.parseSize(contract.blur),spread=stylePlugin_1.StylePlugin.parseSize(contract.spread),color=contract.color||"#000",inset=contract.inset?"inset":void 0;return[new styles_1.StyleRule("boxShadow",[offsetX,offsetY,blur,spread,color,inset].join(" "))]}configToStyleRules(pluginConfig){return __awaiter(this,void 0,void 0,(function*(){if(!pluginConfig||!pluginConfig.shadowKey)return[];const shadowContract=Objects.getObjectAt(pluginConfig.shadowKey,this.themeContract);return shadowContract?ShadowStylePlugin.contractToStyleRules(shadowContract):(console.warn(`Shadow with key "${pluginConfig.shadowKey}" not found. Elements using it will fallback to parent's definition.`),[])}))}}exports.ShadowStylePlugin=ShadowStylePlugin},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.TypographyStylePlugin=void 0;const Objects=__webpack_require__(19),stylePlugin_1=__webpack_require__(16),styles_1=__webpack_require__(8);class TypographyStylePlugin extends stylePlugin_1.StylePlugin{constructor(themeContract){super(),this.themeContract=themeContract,this.name="typography"}setThemeContract(themeContract){this.themeContract=themeContract}configToStyleRules(pluginConfig){return __awaiter(this,void 0,void 0,(function*(){const result=[];if(pluginConfig.fontWeight&&result.push(new styles_1.StyleRule("fontWeight",pluginConfig.fontWeight)),pluginConfig.fontStyle&&result.push(new styles_1.StyleRule("fontStyle",pluginConfig.fontStyle)),pluginConfig.fontSize&&result.push(new styles_1.StyleRule("fontSize",stylePlugin_1.StylePlugin.parseSize(pluginConfig.fontSize))),pluginConfig.fontKey){const fontContract=Objects.getObjectAt(pluginConfig.fontKey,this.themeContract);fontContract?result.push(new styles_1.StyleRule("fontFamily",fontContract.family)):console.warn(`Font with key "${pluginConfig.fontKey}" not found. Elements using it will fallback to parent's definition.`)}if(pluginConfig.lineHeight&&result.push(new styles_1.StyleRule("lineHeight",stylePlugin_1.StylePlugin.parseSize(pluginConfig.lineHeight))),pluginConfig.letterSpacing&&result.push(new styles_1.StyleRule("letterSpacing",stylePlugin_1.StylePlugin.parseSize(pluginConfig.letterSpacing))),pluginConfig.colorKey){const colorContract=Objects.getObjectAt(pluginConfig.colorKey,this.themeContract);colorContract?result.push(new styles_1.StyleRule("color",""+colorContract.value||"transparent")):console.warn(`Color with key "${pluginConfig.colorKey}" not found. Elements using it will fallback to parent's definition.`)}if(pluginConfig.shadowKey){const shadowContract=Objects.getObjectAt(pluginConfig.shadowKey,this.themeContract);if(shadowContract)if(shadowContract.color){const x=stylePlugin_1.StylePlugin.parseSize(shadowContract.offsetX),y=stylePlugin_1.StylePlugin.parseSize(shadowContract.offsetY),blur=stylePlugin_1.StylePlugin.parseSize(shadowContract.blur),color=shadowContract.color||"#000";result.push(new styles_1.StyleRule("textShadow",[x,y,blur,color].join(" ")))}else result.push(new styles_1.StyleRule("textShadow","none"));else console.warn(`Shadow with key "${pluginConfig.shadowKey}" not found. Elements using it will fallback to parent's definition.`)}return pluginConfig.textAlign&&result.push(new styles_1.StyleRule("textAlign",pluginConfig.textAlign)),pluginConfig.textTransform&&result.push(new styles_1.StyleRule("textTransform",pluginConfig.textTransform)),pluginConfig.textDecoration&&result.push(new styles_1.StyleRule("textDecoration",pluginConfig.textDecoration)),result}))}}exports.TypographyStylePlugin=TypographyStylePlugin},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListStylePlugin=void 0;const stylePlugin_1=__webpack_require__(16),styles_1=__webpack_require__(8);class ListStylePlugin extends stylePlugin_1.StylePlugin{constructor(){super(),this.name="list"}configToStyleRules(pluginConfig){return __awaiter(this,void 0,void 0,(function*(){const result=[];return pluginConfig.styleType&&result.push(new styles_1.StyleRule("listStyleType",pluginConfig.styleType)),result}))}}exports.ListStylePlugin=ListStylePlugin},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ComponentsStylePlugin=void 0;const styles_1=__webpack_require__(8),stylePlugin_1=__webpack_require__(16);class ComponentsStylePlugin extends stylePlugin_1.StylePlugin{constructor(styleCompiler){super(),this.styleCompiler=styleCompiler,this.name="components"}configToNestedStyles(componentsConfig){return __awaiter(this,void 0,void 0,(function*(){const resultStyles=[];for(const componentName of Object.keys(componentsConfig)){const componentConfig=componentsConfig[componentName],defaultVariation=componentConfig.default,componentStyle=defaultVariation?yield this.styleCompiler.getVariationStyle(defaultVariation,componentName):new styles_1.Style(componentName),variationNames=Object.keys(componentConfig);for(const variationName of variationNames){if("default"===variationName)continue;const variationStyle=yield this.styleCompiler.getVariationStyle(componentConfig[variationName],componentName,variationName);componentStyle.modifierStyles.push(variationStyle)}resultStyles.push(componentStyle)}return resultStyles}))}}exports.ComponentsStylePlugin=ComponentsStylePlugin},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.StatesStylePlugin=void 0;const stylePlugin_1=__webpack_require__(16);class StatesStylePlugin extends stylePlugin_1.StylePlugin{constructor(styleCompiler){super(),this.styleCompiler=styleCompiler,this.name="states"}configToPseudoStyles(statesConfig){return __awaiter(this,void 0,void 0,(function*(){const stateStyles=[];for(const stateName of Object.keys(statesConfig)){const stateConfig=statesConfig[stateName],stateStyle=yield this.styleCompiler.getStateStyle(stateConfig,stateName);stateStyles.push(stateStyle)}return stateStyles}))}}exports.StatesStylePlugin=StatesStylePlugin},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ContainerStylePlugin=void 0;const stylePlugin_1=__webpack_require__(16),styles_1=__webpack_require__(8);class ContainerStylePlugin extends stylePlugin_1.StylePlugin{constructor(){super(),this.displayName="Container"}configToStyleRules(pluginConfig){return __awaiter(this,void 0,void 0,(function*(){const rules=[new styles_1.StyleRule("display","flex"),new styles_1.StyleRule("flexWrap","wrap"),new styles_1.StyleRule("justifyContent","center"),new styles_1.StyleRule("alignContent","center")];if(pluginConfig.alignment){if(pluginConfig.alignment.horizontal){let value=pluginConfig.alignment.horizontal;"start"!==pluginConfig.alignment.horizontal&&"end"!==pluginConfig.alignment.horizontal||(value="flex-"+value),"around"!==pluginConfig.alignment.horizontal&&"between"!==pluginConfig.alignment.horizontal||(value="space-"+value),rules.push(new styles_1.StyleRule("justifyContent",value))}if(pluginConfig.alignment.vertical){let value=pluginConfig.alignment.vertical;"start"!==pluginConfig.alignment.vertical&&"end"!==pluginConfig.alignment.vertical||(value="flex-"+value),"around"!==pluginConfig.alignment.vertical&&"between"!==pluginConfig.alignment.vertical||(value="space-"+value),rules.push(new styles_1.StyleRule("alignContent",value))}}return pluginConfig.overflow&&(pluginConfig.overflow.vertical&&pluginConfig.overflow.horizontal?rules.push(new styles_1.StyleRule("overflow","auto")):pluginConfig.overflow.vertical?rules.push(new styles_1.StyleRule("overflowY","auto")):rules.push(new styles_1.StyleRule("overflowX","auto"))),rules}))}}exports.ContainerStylePlugin=ContainerStylePlugin},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SizeStylePlugin=void 0;const styles_1=__webpack_require__(8),stylePlugin_1=__webpack_require__(16);class SizeStylePlugin extends stylePlugin_1.StylePlugin{constructor(){super(),this.displayName="Container"}configToStyleRules(pluginConfig){return __awaiter(this,void 0,void 0,(function*(){const result=[];return pluginConfig.width&&result.push(new styles_1.StyleRule("width",stylePlugin_1.StylePlugin.parseSize(pluginConfig.width))),pluginConfig.height&&result.push(new styles_1.StyleRule("height",stylePlugin_1.StylePlugin.parseSize(pluginConfig.height))),pluginConfig.minWidth&&result.push(new styles_1.StyleRule("minWidth",stylePlugin_1.StylePlugin.parseSize(pluginConfig.minWidth))),pluginConfig.minHeight&&result.push(new styles_1.StyleRule("minHeight",stylePlugin_1.StylePlugin.parseSize(pluginConfig.minHeight))),pluginConfig.maxWidth&&result.push(new styles_1.StyleRule("maxWidth",stylePlugin_1.StylePlugin.parseSize(pluginConfig.maxWidth))),pluginConfig.maxHeight&&result.push(new styles_1.StyleRule("maxHeight",stylePlugin_1.StylePlugin.parseSize(pluginConfig.maxHeight))),pluginConfig.stretch&&result.push(new styles_1.StyleRule("flexGrow",1)),result}))}}exports.SizeStylePlugin=SizeStylePlugin},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.TransitionStylePlugin=void 0;const styles_1=__webpack_require__(8),stylePlugin_1=__webpack_require__(16);class TransitionStylePlugin extends stylePlugin_1.StylePlugin{constructor(){super(),this.name="transition"}configToStyleRules(pluginConfig){return __awaiter(this,void 0,void 0,(function*(){return[new styles_1.StyleRule("transitionDelay",pluginConfig.delay?pluginConfig.delay+"s":"0"),new styles_1.StyleRule("transitionDuration",pluginConfig.duration?pluginConfig.duration+"s":"0"),new styles_1.StyleRule("transitionProperty","all"),new styles_1.StyleRule("transitionTimingFunction",pluginConfig.timingFunction||"linear")]}))}}exports.TransitionStylePlugin=TransitionStylePlugin},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.StickToStylePlugin=void 0;const stylePlugin_1=__webpack_require__(16),styles_1=__webpack_require__(8);class StickToStylePlugin extends stylePlugin_1.StylePlugin{constructor(){super(),this.displayName="Stick to"}configToStyleRules(pluginConfig){return __awaiter(this,void 0,void 0,(function*(){if(!pluginConfig||"none"===pluginConfig)return[];const rules=[];switch(rules.push(new styles_1.StyleRule("position","sticky")),rules.push(new styles_1.StyleRule("zIndex","1020")),pluginConfig){case"top":rules.push(new styles_1.StyleRule("top","0"));break;case"bottom":rules.push(new styles_1.StyleRule("bottom","0"));break;default:throw new Error('Unknown option value for "stickTo" plugin: '+pluginConfig)}return rules}))}}exports.StickToStylePlugin=StickToStylePlugin},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.TransformStylePlugin=void 0;const styles_1=__webpack_require__(8),stylePlugin_1=__webpack_require__(16);class TransformStylePlugin extends stylePlugin_1.StylePlugin{constructor(){super(...arguments),this.name="transform"}configToStyleRules(pluginConfig){return __awaiter(this,void 0,void 0,(function*(){const transformOperations=[];if(pluginConfig.translate){const translateX=stylePlugin_1.StylePlugin.parseSize(pluginConfig.translate.x),translateY=stylePlugin_1.StylePlugin.parseSize(pluginConfig.translate.y);transformOperations.push(`translate(${translateX},${translateY})`)}if(pluginConfig.scale){const scaleX=pluginConfig.scale.x||1,scaleY=pluginConfig.scale.y||1;transformOperations.push(`scale(${scaleX},${scaleY})`)}return pluginConfig.rotate&&transformOperations.push(`rotate(${pluginConfig.rotate}deg)`),[new styles_1.StyleRule("transform",transformOperations.join(" "))]}))}}exports.TransformStylePlugin=TransformStylePlugin},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PaddingStylePlugin=void 0;const styles_1=__webpack_require__(8),stylePlugin_1=__webpack_require__(16);class PaddingStylePlugin extends stylePlugin_1.StylePlugin{constructor(){super(...arguments),this.name="padding"}configToStyleRules(pluginConfig){return __awaiter(this,void 0,void 0,(function*(){return[new styles_1.StyleRule("paddingTop",stylePlugin_1.StylePlugin.parseSize(pluginConfig.top)),new styles_1.StyleRule("paddingLeft",stylePlugin_1.StylePlugin.parseSize(pluginConfig.left)),new styles_1.StyleRule("paddingRight",stylePlugin_1.StylePlugin.parseSize(pluginConfig.right)),new styles_1.StyleRule("paddingBottom",stylePlugin_1.StylePlugin.parseSize(pluginConfig.bottom))]}))}}exports.PaddingStylePlugin=PaddingStylePlugin},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.GridStylePlugin=void 0;const stylePlugin_1=__webpack_require__(16),styles_1=__webpack_require__(8);class GridStylePlugin extends stylePlugin_1.StylePlugin{constructor(){super(),this.displayName="Grid"}configToStyleRules(pluginConfig){return __awaiter(this,void 0,void 0,(function*(){return[new styles_1.StyleRule("display","grid"),new styles_1.StyleRule("gridTemplateColumns",pluginConfig.cols.join(" ")),new styles_1.StyleRule("gridTemplateRows",pluginConfig.rows.join(" ")),new styles_1.StyleRule("gridColumnGap",pluginConfig.colGap),new styles_1.StyleRule("gridRowGap",pluginConfig.rowGap),new styles_1.StyleRule("width","100%"),new styles_1.StyleRule("flex",1)]}))}}exports.GridStylePlugin=GridStylePlugin},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.GridCellStylePlugin=void 0;const stylePlugin_1=__webpack_require__(16),styles_1=__webpack_require__(8);class GridCellStylePlugin extends stylePlugin_1.StylePlugin{constructor(){super(),this.displayName="Grid area"}configToStyleRules(pluginConfig){return __awaiter(this,void 0,void 0,(function*(){const rules=[new styles_1.StyleRule("display","flex"),new styles_1.StyleRule("flexWrap","wrap"),new styles_1.StyleRule("justifyContent","center"),new styles_1.StyleRule("alignContent","center"),new styles_1.StyleRule("alignItems","center"),new styles_1.StyleRule("minWidth","0")];if(pluginConfig.position&&(rules.push(new styles_1.StyleRule("gridColumnStart",pluginConfig.position.col)),rules.push(new styles_1.StyleRule("gridColumnEnd",pluginConfig.position.col+pluginConfig.span.cols)),rules.push(new styles_1.StyleRule("gridRowStart",pluginConfig.position.row)),rules.push(new styles_1.StyleRule("gridRowEnd",pluginConfig.position.row+pluginConfig.span.rows))),pluginConfig.alignment){if(pluginConfig.alignment.horizontal){let value=pluginConfig.alignment.horizontal;"start"!==pluginConfig.alignment.horizontal&&"end"!==pluginConfig.alignment.horizontal||(value="flex-"+value),"around"!==pluginConfig.alignment.horizontal&&"between"!==pluginConfig.alignment.horizontal||(value="space-"+value),rules.push(new styles_1.StyleRule("justifyContent",value))}if(pluginConfig.alignment.vertical){let value=pluginConfig.alignment.vertical;"start"!==pluginConfig.alignment.vertical&&"end"!==pluginConfig.alignment.vertical||(value="flex-"+value),"around"!==pluginConfig.alignment.vertical&&"between"!==pluginConfig.alignment.vertical||(value="space-"+value),rules.push(new styles_1.StyleRule("alignContent",value)),rules.push(new styles_1.StyleRule("alignItems",value))}}return pluginConfig.overflow&&(pluginConfig.overflow.vertical&&pluginConfig.overflow.horizontal?rules.push(new styles_1.StyleRule("overflow","auto")):pluginConfig.overflow.vertical?rules.push(new styles_1.StyleRule("overflowY","auto")):rules.push(new styles_1.StyleRule("overflowX","auto")),rules.push(new styles_1.StyleRule("position","absolute")),rules.push(new styles_1.StyleRule("top","0")),rules.push(new styles_1.StyleRule("left","0")),rules.push(new styles_1.StyleRule("right","0")),rules.push(new styles_1.StyleRule("bottom","0"))),rules}))}}exports.GridCellStylePlugin=GridCellStylePlugin},function(module,exports){module.exports=function(originalModule){if(!originalModule.webpackPolyfill){var module=Object.create(originalModule);module.children||(module.children=[]),Object.defineProperty(module,"loaded",{enumerable:!0,get:function(){return module.l}}),Object.defineProperty(module,"id",{enumerable:!0,get:function(){return module.i}}),Object.defineProperty(module,"exports",{enumerable:!0}),module.webpackPolyfill=1}return module}},function(module,exports){module.exports=function(module){return module.webpackPolyfill||(module.deprecate=function(){},module.paths=[],module.children||(module.children=[]),Object.defineProperty(module,"loaded",{enumerable:!0,get:function(){return module.l}}),Object.defineProperty(module,"id",{enumerable:!0,get:function(){return module.i}}),module.webpackPolyfill=1),module}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ColumnModule=void 0;const columnViewModel_1=__webpack_require__(227),columnModelBinder_1=__webpack_require__(662),columnViewModelBinder_1=__webpack_require__(663);exports.ColumnModule=class{register(injector){injector.bind("column",columnViewModel_1.ColumnViewModel),injector.bindToCollection("modelBinders",columnModelBinder_1.ColumnModelBinder),injector.bindToCollection("viewModelBinders",columnViewModelBinder_1.ColumnViewModelBinder)}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="col" data-bind="css: css">\r\n    \x3c!-- ko foreach: { data: widgets, as: \'widget\'  } --\x3e\r\n    \x3c!-- ko widget: widget --\x3e\x3c!-- /ko --\x3e\r\n    \x3c!-- /ko --\x3e\r\n</div>'},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ColumnModelBinder=void 0;const Utils=__webpack_require__(6),columnModel_1=__webpack_require__(99);exports.ColumnModelBinder=class{constructor(modelBinderSelector){this.modelBinderSelector=modelBinderSelector,this.contractToModel=this.contractToModel.bind(this)}canHandleContract(contract){return"layout-column"===contract.type}canHandleModel(model){return model instanceof columnModel_1.ColumnModel}contractToModel(contract,bindingContext){return __awaiter(this,void 0,void 0,(function*(){const columnModel=new columnModel_1.ColumnModel;contract.size&&(contract.size=Utils.optimizeBreakpoints(contract.size),columnModel.size=contract.size),contract.alignment&&(contract.alignment=Utils.optimizeBreakpoints(contract.alignment),columnModel.alignment=contract.alignment),contract.offset&&(contract.offset=Utils.optimizeBreakpoints(contract.offset),columnModel.offset=contract.offset),contract.order&&(contract.order=Utils.optimizeBreakpoints(contract.order),columnModel.order=contract.order),columnModel.overflowX=contract.overflowX,columnModel.overflowY=contract.overflowY,contract.nodes||(contract.nodes=[]);const modelPromises=contract.nodes.map(contract=>__awaiter(this,void 0,void 0,(function*(){return this.modelBinderSelector.getModelBinderByContract(contract).contractToModel(contract,bindingContext)})));return columnModel.widgets=yield Promise.all(modelPromises),columnModel}))}modelToContract(model){const contract={type:"layout-column",nodes:[]};return contract.size=model.size,contract.alignment=model.alignment,contract.offset=model.offset,contract.order=model.order,contract.overflowX=model.overflowX,contract.overflowY=model.overflowY,model.widgets.forEach(widgetModel=>{const modelBinder=this.modelBinderSelector.getModelBinderByModel(widgetModel);contract.nodes.push(modelBinder.modelToContract(widgetModel))}),contract}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ColumnViewModelBinder=void 0;const Utils=__webpack_require__(6),columnViewModel_1=__webpack_require__(227),columnModel_1=__webpack_require__(99),placeholderViewModel_1=__webpack_require__(38),columnHandlers_1=__webpack_require__(228);exports.ColumnViewModelBinder=class{constructor(viewModelBinderSelector,eventManager){this.viewModelBinderSelector=viewModelBinderSelector,this.eventManager=eventManager}toTitleCase(str){return str.charAt(0).toUpperCase()+str.slice(1)}getAlignmentClass(styles,alignmentString,targetBreakpoint){if(!alignmentString)return;const alignment=alignmentString.split(" "),vertical=alignment[0],horizontal=alignment[1],x=styles.alignX||{},y=styles.alignY||{};x[targetBreakpoint]="utils/content/alignHorizontally"+this.toTitleCase(horizontal),y[targetBreakpoint]="utils/content/alignVertically"+this.toTitleCase(vertical),styles.alignX=x,styles.alignY=y}modelToViewModel(model,columnViewModel,bindingContext){return __awaiter(this,void 0,void 0,(function*(){columnViewModel||(columnViewModel=new columnViewModel_1.ColumnViewModel);const viewModels=[];for(const widgetModel of model.widgets){const widgetViewModelBinder=this.viewModelBinderSelector.getViewModelBinderByModel(widgetModel),widgetViewModel=yield widgetViewModelBinder.modelToViewModel(widgetModel,null,bindingContext);viewModels.push(widgetViewModel)}0===viewModels.length&&viewModels.push(new placeholderViewModel_1.PlaceholderViewModel("Column")),columnViewModel.widgets(viewModels),model.size&&(model.size=Utils.optimizeBreakpoints(model.size),columnViewModel.sizeXs(model.size.xs),columnViewModel.sizeSm(model.size.sm),columnViewModel.sizeMd(model.size.md),columnViewModel.sizeLg(model.size.lg),columnViewModel.sizeXl(model.size.xl)),model.alignment&&(model.alignment=Utils.optimizeBreakpoints(model.alignment),columnViewModel.alignmentXs(model.alignment.xs),columnViewModel.alignmentSm(model.alignment.sm),columnViewModel.alignmentMd(model.alignment.md),columnViewModel.alignmentLg(model.alignment.lg),columnViewModel.alignmentXl(model.alignment.xl)),model.alignment&&(model.alignment=Utils.optimizeBreakpoints(model.alignment),columnViewModel.alignmentXs(model.alignment.xs),columnViewModel.alignmentSm(model.alignment.sm),columnViewModel.alignmentMd(model.alignment.md),columnViewModel.alignmentLg(model.alignment.lg),columnViewModel.alignmentXl(model.alignment.xl)),model.offset&&(model.offset=Utils.optimizeBreakpoints(model.offset),columnViewModel.offsetXs(model.offset.xs),columnViewModel.offsetSm(model.offset.sm),columnViewModel.offsetMd(model.offset.md),columnViewModel.offsetLg(model.offset.lg),columnViewModel.offsetXl(model.offset.xl)),model.order&&(model.order=Utils.optimizeBreakpoints(model.order),columnViewModel.orderXs(model.order.xs),columnViewModel.orderSm(model.order.sm),columnViewModel.orderMd(model.order.md),columnViewModel.orderLg(model.order.lg),columnViewModel.orderXl(model.order.xl)),columnViewModel.overflowX(model.overflowX),columnViewModel.overflowY(model.overflowY);const binding={name:"column",displayName:"Column",readonly:!!bindingContext&&bindingContext.readonly,flow:"inline",model:model,draggable:!1,editor:"layout-column-editor",handler:columnHandlers_1.ColumnHandlers,applyChanges:changes=>__awaiter(this,void 0,void 0,(function*(){yield this.modelToViewModel(model,columnViewModel,bindingContext),this.eventManager.dispatchEvent("onContentUpdate")}))};return columnViewModel.widgetBinding=binding,columnViewModel}))}canHandleModel(model){return model instanceof columnModel_1.ColumnModel}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ContentModule=void 0;const contentViewModel_1=__webpack_require__(140),contentModelBinder_1=__webpack_require__(229),contentViewModelBinder_1=__webpack_require__(230);exports.ContentModule=class{register(injector){injector.bind("contentWidget",contentViewModel_1.ContentViewModel),injector.bindToCollection("modelBinders",contentModelBinder_1.ContentModelBinder,"contentModelBinder"),injector.bindToCollection("viewModelBinders",contentViewModelBinder_1.ContentViewModelBinder,"contentViewModelBinder")}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default="<main>\r\n    \x3c!-- ko foreach: { data: widgets, as: 'widget' } --\x3e\r\n    \x3c!-- ko widget: widget --\x3e\r\n    \x3c!-- /ko --\x3e\r\n    \x3c!-- /ko --\x3e\r\n</main>"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ContentEditorModule=void 0;const contentHandlers_1=__webpack_require__(142);exports.ContentEditorModule=class{register(injector){injector.bindToCollection("widgetHandlers",contentHandlers_1.ContentHandlers,"pageHandlers")}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GridCellModule=void 0;const gridCellViewModel_1=__webpack_require__(231),gridCellModelBinder_1=__webpack_require__(669),gridCellViewModelBinder_1=__webpack_require__(670);exports.GridCellModule=class{register(injector){injector.bind("gridCell",gridCellViewModel_1.GridCellViewModel),injector.bindToCollection("modelBinders",gridCellModelBinder_1.GridCellModelBinder,"gridCellModelBinder"),injector.bindToCollection("viewModelBinders",gridCellViewModelBinder_1.GridCellViewModelBinder)}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default="<div data-bind=\"styled: $component.styles\">\r\n    \x3c!-- ko foreach: { data: widgets, as: 'widget'  } --\x3e\r\n    \x3c!-- ko widget: widget --\x3e\r\n    \x3c!-- /ko --\x3e\r\n    \x3c!-- /ko --\x3e\r\n</div>"},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.GridCellModelBinder=void 0;const gridCellModel_1=__webpack_require__(143),content_1=__webpack_require__(232);class GridCellModelBinder extends content_1.ContentModelBinder{constructor(modelBinderSelector){super(modelBinderSelector),this.modelBinderSelector=modelBinderSelector}canHandleContract(contract){return"grid-cell"===contract.type}canHandleModel(model){return model instanceof gridCellModel_1.GridCellModel}contractToModel(contract,bindingContext){return __awaiter(this,void 0,void 0,(function*(){const gridCellModel=new gridCellModel_1.GridCellModel;return contract.styles&&(gridCellModel.styles=contract.styles),gridCellModel.role=contract.role,contract.nodes||(contract.nodes=[]),gridCellModel.widgets=yield this.getChildModels(contract.nodes,bindingContext),gridCellModel}))}modelToContract(model){const contract={type:"grid-cell",nodes:[],role:model.role,styles:model.styles};return model.widgets.forEach(widgetModel=>{const modelBinder=this.modelBinderSelector.getModelBinderByModel(widgetModel);contract.nodes.push(modelBinder.modelToContract(widgetModel))}),contract}}exports.GridCellModelBinder=GridCellModelBinder},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.GridCellViewModelBinder=void 0;const gridCellViewModel_1=__webpack_require__(231),gridCellModel_1=__webpack_require__(143),placeholderViewModel_1=__webpack_require__(38),gridCellHandlers_1=__webpack_require__(233);exports.GridCellViewModelBinder=class{constructor(viewModelBinderSelector,eventManager,styleCompiler){this.viewModelBinderSelector=viewModelBinderSelector,this.eventManager=eventManager,this.styleCompiler=styleCompiler}modelToViewModel(model,viewModel,bindingContext){return __awaiter(this,void 0,void 0,(function*(){viewModel||(viewModel=new gridCellViewModel_1.GridCellViewModel);const widgetViewModels=[];for(const widgetModel of model.widgets){const widgetViewModelBinder=this.viewModelBinderSelector.getViewModelBinderByModel(widgetModel),widgetViewModel=yield widgetViewModelBinder.modelToViewModel(widgetModel,null,bindingContext);widgetViewModels.push(widgetViewModel)}if(0===widgetViewModels.length&&widgetViewModels.push(new placeholderViewModel_1.PlaceholderViewModel(model.role)),model.styles){const styleModel=yield this.styleCompiler.getStyleModelAsync(model.styles,null==bindingContext?void 0:bindingContext.styleManager);viewModel.styles(styleModel)}viewModel.role(model.role),viewModel.widgets(widgetViewModels);const binding={name:"grid-cell",displayName:model.role.charAt(0).toUpperCase()+model.role.slice(1),readonly:!!bindingContext&&bindingContext.readonly,flow:"inline",model:model,draggable:!1,editor:"grid-cell-editor",handler:gridCellHandlers_1.GridCellHandlers,applyChanges:changes=>__awaiter(this,void 0,void 0,(function*(){yield this.modelToViewModel(model,viewModel,bindingContext),this.eventManager.dispatchEvent("onContentUpdate")}))};return viewModel.widgetBinding=binding,viewModel}))}canHandleModel(model){return model instanceof gridCellModel_1.GridCellModel}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default="<div data-bind=\"styled: styles\">\r\n    \x3c!-- ko foreach: { data: widgets, as: 'widget' } --\x3e\r\n    \x3c!-- ko widget: widget --\x3e\r\n    \x3c!-- /ko --\x3e\r\n    \x3c!-- /ko --\x3e\r\n</div>"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const ko=__webpack_require__(0);ko.bindingHandlers.focus={init:(element,valueAccessor)=>{const options=ko.unwrap(valueAccessor());setTimeout(()=>{const type=typeof options;("boolean"===type&&options||"object"===type&&options.childSelector&&(element=element.querySelector(options.childSelector)))&&element.focus()},100)}}},function(module,__webpack_exports__,__webpack_require__){"use strict";function get(element){return getComputedStyle(element)}function set(element,obj){for(var key in obj){var val=obj[key];"number"==typeof val&&(val+="px"),element.style[key]=val}return element}function div(className){var div=document.createElement("div");return div.className=className,div}__webpack_require__.r(__webpack_exports__);var elMatches="undefined"!=typeof Element&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);function matches(element,query){if(!elMatches)throw new Error("No element matching method supported");return elMatches.call(element,query)}function remove(element){element.remove?element.remove():element.parentNode&&element.parentNode.removeChild(element)}function queryChildren(element,selector){return Array.prototype.filter.call(element.children,(function(child){return matches(child,selector)}))}var cls_main="ps",cls_rtl="ps__rtl",cls_element={thumb:function(x){return"ps__thumb-"+x},rail:function(x){return"ps__rail-"+x},consuming:"ps__child--consume"},cls_state={focus:"ps--focus",clicking:"ps--clicking",active:function(x){return"ps--active-"+x},scrolling:function(x){return"ps--scrolling-"+x}},scrollingClassTimeout={x:null,y:null};function addScrollingClass(i,x){var classList=i.element.classList,className=cls_state.scrolling(x);classList.contains(className)?clearTimeout(scrollingClassTimeout[x]):classList.add(className)}function removeScrollingClass(i,x){scrollingClassTimeout[x]=setTimeout((function(){return i.isAlive&&i.element.classList.remove(cls_state.scrolling(x))}),i.settings.scrollingThreshold)}var EventElement=function(element){this.element=element,this.handlers={}},prototypeAccessors={isEmpty:{configurable:!0}};EventElement.prototype.bind=function(eventName,handler){void 0===this.handlers[eventName]&&(this.handlers[eventName]=[]),this.handlers[eventName].push(handler),this.element.addEventListener(eventName,handler,!1)},EventElement.prototype.unbind=function(eventName,target){var this$1=this;this.handlers[eventName]=this.handlers[eventName].filter((function(handler){return!(!target||handler===target)||(this$1.element.removeEventListener(eventName,handler,!1),!1)}))},EventElement.prototype.unbindAll=function(){for(var name in this.handlers)this.unbind(name)},prototypeAccessors.isEmpty.get=function(){var this$1=this;return Object.keys(this.handlers).every((function(key){return 0===this$1.handlers[key].length}))},Object.defineProperties(EventElement.prototype,prototypeAccessors);var EventManager=function(){this.eventElements=[]};function createEvent(name){if("function"==typeof window.CustomEvent)return new CustomEvent(name);var evt=document.createEvent("CustomEvent");return evt.initCustomEvent(name,!1,!1,void 0),evt}function processScrollDiff(i,axis,diff,useScrollingClass,forceFireReachEvent){var fields;if(void 0===useScrollingClass&&(useScrollingClass=!0),void 0===forceFireReachEvent&&(forceFireReachEvent=!1),"top"===axis)fields=["contentHeight","containerHeight","scrollTop","y","up","down"];else{if("left"!==axis)throw new Error("A proper axis should be provided");fields=["contentWidth","containerWidth","scrollLeft","x","left","right"]}!function(i,diff,ref,useScrollingClass,forceFireReachEvent){var contentHeight=ref[0],containerHeight=ref[1],scrollTop=ref[2],y=ref[3],up=ref[4],down=ref[5];void 0===useScrollingClass&&(useScrollingClass=!0);void 0===forceFireReachEvent&&(forceFireReachEvent=!1);var element=i.element;i.reach[y]=null,element[scrollTop]<1&&(i.reach[y]="start");element[scrollTop]>i[contentHeight]-i[containerHeight]-1&&(i.reach[y]="end");diff&&(element.dispatchEvent(createEvent("ps-scroll-"+y)),diff<0?element.dispatchEvent(createEvent("ps-scroll-"+up)):diff>0&&element.dispatchEvent(createEvent("ps-scroll-"+down)),useScrollingClass&&function(i,x){addScrollingClass(i,x),removeScrollingClass(i,x)}(i,y));i.reach[y]&&(diff||forceFireReachEvent)&&element.dispatchEvent(createEvent("ps-"+y+"-reach-"+i.reach[y]))}(i,diff,fields,useScrollingClass,forceFireReachEvent)}function toInt(x){return parseInt(x,10)||0}EventManager.prototype.eventElement=function(element){var ee=this.eventElements.filter((function(ee){return ee.element===element}))[0];return ee||(ee=new EventElement(element),this.eventElements.push(ee)),ee},EventManager.prototype.bind=function(element,eventName,handler){this.eventElement(element).bind(eventName,handler)},EventManager.prototype.unbind=function(element,eventName,handler){var ee=this.eventElement(element);ee.unbind(eventName,handler),ee.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(ee),1)},EventManager.prototype.unbindAll=function(){this.eventElements.forEach((function(e){return e.unbindAll()})),this.eventElements=[]},EventManager.prototype.once=function(element,eventName,handler){var ee=this.eventElement(element),onceHandler=function(evt){ee.unbind(eventName,onceHandler),handler(evt)};ee.bind(eventName,onceHandler)};var env={isWebKit:"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style,supportsTouch:"undefined"!=typeof window&&("ontouchstart"in window||"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>0||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:"undefined"!=typeof navigator&&navigator.msMaxTouchPoints,isChrome:"undefined"!=typeof navigator&&/Chrome/i.test(navigator&&navigator.userAgent)};function updateGeometry(i){var element=i.element,roundedScrollTop=Math.floor(element.scrollTop),rect=element.getBoundingClientRect();i.containerWidth=Math.ceil(rect.width),i.containerHeight=Math.ceil(rect.height),i.contentWidth=element.scrollWidth,i.contentHeight=element.scrollHeight,element.contains(i.scrollbarXRail)||(queryChildren(element,cls_element.rail("x")).forEach((function(el){return remove(el)})),element.appendChild(i.scrollbarXRail)),element.contains(i.scrollbarYRail)||(queryChildren(element,cls_element.rail("y")).forEach((function(el){return remove(el)})),element.appendChild(i.scrollbarYRail)),!i.settings.suppressScrollX&&i.containerWidth+i.settings.scrollXMarginOffset<i.contentWidth?(i.scrollbarXActive=!0,i.railXWidth=i.containerWidth-i.railXMarginWidth,i.railXRatio=i.containerWidth/i.railXWidth,i.scrollbarXWidth=getThumbSize(i,toInt(i.railXWidth*i.containerWidth/i.contentWidth)),i.scrollbarXLeft=toInt((i.negativeScrollAdjustment+element.scrollLeft)*(i.railXWidth-i.scrollbarXWidth)/(i.contentWidth-i.containerWidth))):i.scrollbarXActive=!1,!i.settings.suppressScrollY&&i.containerHeight+i.settings.scrollYMarginOffset<i.contentHeight?(i.scrollbarYActive=!0,i.railYHeight=i.containerHeight-i.railYMarginHeight,i.railYRatio=i.containerHeight/i.railYHeight,i.scrollbarYHeight=getThumbSize(i,toInt(i.railYHeight*i.containerHeight/i.contentHeight)),i.scrollbarYTop=toInt(roundedScrollTop*(i.railYHeight-i.scrollbarYHeight)/(i.contentHeight-i.containerHeight))):i.scrollbarYActive=!1,i.scrollbarXLeft>=i.railXWidth-i.scrollbarXWidth&&(i.scrollbarXLeft=i.railXWidth-i.scrollbarXWidth),i.scrollbarYTop>=i.railYHeight-i.scrollbarYHeight&&(i.scrollbarYTop=i.railYHeight-i.scrollbarYHeight),function(element,i){var xRailOffset={width:i.railXWidth},roundedScrollTop=Math.floor(element.scrollTop);i.isRtl?xRailOffset.left=i.negativeScrollAdjustment+element.scrollLeft+i.containerWidth-i.contentWidth:xRailOffset.left=element.scrollLeft;i.isScrollbarXUsingBottom?xRailOffset.bottom=i.scrollbarXBottom-roundedScrollTop:xRailOffset.top=i.scrollbarXTop+roundedScrollTop;set(i.scrollbarXRail,xRailOffset);var yRailOffset={top:roundedScrollTop,height:i.railYHeight};i.isScrollbarYUsingRight?i.isRtl?yRailOffset.right=i.contentWidth-(i.negativeScrollAdjustment+element.scrollLeft)-i.scrollbarYRight-i.scrollbarYOuterWidth-9:yRailOffset.right=i.scrollbarYRight-element.scrollLeft:i.isRtl?yRailOffset.left=i.negativeScrollAdjustment+element.scrollLeft+2*i.containerWidth-i.contentWidth-i.scrollbarYLeft-i.scrollbarYOuterWidth:yRailOffset.left=i.scrollbarYLeft+element.scrollLeft;set(i.scrollbarYRail,yRailOffset),set(i.scrollbarX,{left:i.scrollbarXLeft,width:i.scrollbarXWidth-i.railBorderXWidth}),set(i.scrollbarY,{top:i.scrollbarYTop,height:i.scrollbarYHeight-i.railBorderYWidth})}(element,i),i.scrollbarXActive?element.classList.add(cls_state.active("x")):(element.classList.remove(cls_state.active("x")),i.scrollbarXWidth=0,i.scrollbarXLeft=0,element.scrollLeft=!0===i.isRtl?i.contentWidth:0),i.scrollbarYActive?element.classList.add(cls_state.active("y")):(element.classList.remove(cls_state.active("y")),i.scrollbarYHeight=0,i.scrollbarYTop=0,element.scrollTop=0)}function getThumbSize(i,thumbSize){return i.settings.minScrollbarLength&&(thumbSize=Math.max(thumbSize,i.settings.minScrollbarLength)),i.settings.maxScrollbarLength&&(thumbSize=Math.min(thumbSize,i.settings.maxScrollbarLength)),thumbSize}function bindMouseScrollHandler(i,ref){var containerHeight=ref[0],contentHeight=ref[1],pageY=ref[2],railYHeight=ref[3],scrollbarY=ref[4],scrollbarYHeight=ref[5],scrollTop=ref[6],y=ref[7],scrollbarYRail=ref[8],element=i.element,startingScrollTop=null,startingMousePageY=null,scrollBy=null;function mouseMoveHandler(e){e.touches&&e.touches[0]&&(e[pageY]=e.touches[0].pageY),element[scrollTop]=startingScrollTop+scrollBy*(e[pageY]-startingMousePageY),addScrollingClass(i,y),updateGeometry(i),e.stopPropagation(),e.preventDefault()}function mouseUpHandler(){removeScrollingClass(i,y),i[scrollbarYRail].classList.remove(cls_state.clicking),i.event.unbind(i.ownerDocument,"mousemove",mouseMoveHandler)}function bindMoves(e,touchMode){startingScrollTop=element[scrollTop],touchMode&&e.touches&&(e[pageY]=e.touches[0].pageY),startingMousePageY=e[pageY],scrollBy=(i[contentHeight]-i[containerHeight])/(i[railYHeight]-i[scrollbarYHeight]),touchMode?i.event.bind(i.ownerDocument,"touchmove",mouseMoveHandler):(i.event.bind(i.ownerDocument,"mousemove",mouseMoveHandler),i.event.once(i.ownerDocument,"mouseup",mouseUpHandler),e.preventDefault()),i[scrollbarYRail].classList.add(cls_state.clicking),e.stopPropagation()}i.event.bind(i[scrollbarY],"mousedown",(function(e){bindMoves(e)})),i.event.bind(i[scrollbarY],"touchstart",(function(e){bindMoves(e,!0)}))}var handlers={"click-rail":function(i){i.element,i.event.bind(i.scrollbarY,"mousedown",(function(e){return e.stopPropagation()})),i.event.bind(i.scrollbarYRail,"mousedown",(function(e){var direction=e.pageY-window.pageYOffset-i.scrollbarYRail.getBoundingClientRect().top>i.scrollbarYTop?1:-1;i.element.scrollTop+=direction*i.containerHeight,updateGeometry(i),e.stopPropagation()})),i.event.bind(i.scrollbarX,"mousedown",(function(e){return e.stopPropagation()})),i.event.bind(i.scrollbarXRail,"mousedown",(function(e){var direction=e.pageX-window.pageXOffset-i.scrollbarXRail.getBoundingClientRect().left>i.scrollbarXLeft?1:-1;i.element.scrollLeft+=direction*i.containerWidth,updateGeometry(i),e.stopPropagation()}))},"drag-thumb":function(i){bindMouseScrollHandler(i,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x","scrollbarXRail"]),bindMouseScrollHandler(i,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y","scrollbarYRail"])},keyboard:function(i){var element=i.element;i.event.bind(i.ownerDocument,"keydown",(function(e){if(!(e.isDefaultPrevented&&e.isDefaultPrevented()||e.defaultPrevented)&&(matches(element,":hover")||matches(i.scrollbarX,":focus")||matches(i.scrollbarY,":focus"))){var el,activeElement=document.activeElement?document.activeElement:i.ownerDocument.activeElement;if(activeElement){if("IFRAME"===activeElement.tagName)activeElement=activeElement.contentDocument.activeElement;else for(;activeElement.shadowRoot;)activeElement=activeElement.shadowRoot.activeElement;if(matches(el=activeElement,"input,[contenteditable]")||matches(el,"select,[contenteditable]")||matches(el,"textarea,[contenteditable]")||matches(el,"button,[contenteditable]"))return}var deltaX=0,deltaY=0;switch(e.which){case 37:deltaX=e.metaKey?-i.contentWidth:e.altKey?-i.containerWidth:-30;break;case 38:deltaY=e.metaKey?i.contentHeight:e.altKey?i.containerHeight:30;break;case 39:deltaX=e.metaKey?i.contentWidth:e.altKey?i.containerWidth:30;break;case 40:deltaY=e.metaKey?-i.contentHeight:e.altKey?-i.containerHeight:-30;break;case 32:deltaY=e.shiftKey?i.containerHeight:-i.containerHeight;break;case 33:deltaY=i.containerHeight;break;case 34:deltaY=-i.containerHeight;break;case 36:deltaY=i.contentHeight;break;case 35:deltaY=-i.contentHeight;break;default:return}i.settings.suppressScrollX&&0!==deltaX||i.settings.suppressScrollY&&0!==deltaY||(element.scrollTop-=deltaY,element.scrollLeft+=deltaX,updateGeometry(i),function(deltaX,deltaY){var scrollTop=Math.floor(element.scrollTop);if(0===deltaX){if(!i.scrollbarYActive)return!1;if(0===scrollTop&&deltaY>0||scrollTop>=i.contentHeight-i.containerHeight&&deltaY<0)return!i.settings.wheelPropagation}var scrollLeft=element.scrollLeft;if(0===deltaY){if(!i.scrollbarXActive)return!1;if(0===scrollLeft&&deltaX<0||scrollLeft>=i.contentWidth-i.containerWidth&&deltaX>0)return!i.settings.wheelPropagation}return!0}(deltaX,deltaY)&&e.preventDefault())}}))},wheel:function(i){var element=i.element;function mousewheelHandler(e){var ref=function(e){var deltaX=e.deltaX,deltaY=-1*e.deltaY;return void 0!==deltaX&&void 0!==deltaY||(deltaX=-1*e.wheelDeltaX/6,deltaY=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(deltaX*=10,deltaY*=10),deltaX!=deltaX&&deltaY!=deltaY&&(deltaX=0,deltaY=e.wheelDelta),e.shiftKey?[-deltaY,-deltaX]:[deltaX,deltaY]}(e),deltaX=ref[0],deltaY=ref[1];if(!function(target,deltaX,deltaY){if(!env.isWebKit&&element.querySelector("select:focus"))return!0;if(!element.contains(target))return!1;for(var cursor=target;cursor&&cursor!==element;){if(cursor.classList.contains(cls_element.consuming))return!0;var style=get(cursor);if(deltaY&&style.overflowY.match(/(scroll|auto)/)){var maxScrollTop=cursor.scrollHeight-cursor.clientHeight;if(maxScrollTop>0&&(cursor.scrollTop>0&&deltaY<0||cursor.scrollTop<maxScrollTop&&deltaY>0))return!0}if(deltaX&&style.overflowX.match(/(scroll|auto)/)){var maxScrollLeft=cursor.scrollWidth-cursor.clientWidth;if(maxScrollLeft>0&&(cursor.scrollLeft>0&&deltaX<0||cursor.scrollLeft<maxScrollLeft&&deltaX>0))return!0}cursor=cursor.parentNode}return!1}(e.target,deltaX,deltaY)){var shouldPrevent=!1;i.settings.useBothWheelAxes?i.scrollbarYActive&&!i.scrollbarXActive?(deltaY?element.scrollTop-=deltaY*i.settings.wheelSpeed:element.scrollTop+=deltaX*i.settings.wheelSpeed,shouldPrevent=!0):i.scrollbarXActive&&!i.scrollbarYActive&&(deltaX?element.scrollLeft+=deltaX*i.settings.wheelSpeed:element.scrollLeft-=deltaY*i.settings.wheelSpeed,shouldPrevent=!0):(element.scrollTop-=deltaY*i.settings.wheelSpeed,element.scrollLeft+=deltaX*i.settings.wheelSpeed),updateGeometry(i),(shouldPrevent=shouldPrevent||function(deltaX,deltaY){var roundedScrollTop=Math.floor(element.scrollTop),isTop=0===element.scrollTop,isBottom=roundedScrollTop+element.offsetHeight===element.scrollHeight,isLeft=0===element.scrollLeft,isRight=element.scrollLeft+element.offsetWidth===element.scrollWidth;return!(Math.abs(deltaY)>Math.abs(deltaX)?isTop||isBottom:isLeft||isRight)||!i.settings.wheelPropagation}(deltaX,deltaY))&&!e.ctrlKey&&(e.stopPropagation(),e.preventDefault())}}void 0!==window.onwheel?i.event.bind(element,"wheel",mousewheelHandler):void 0!==window.onmousewheel&&i.event.bind(element,"mousewheel",mousewheelHandler)},touch:function(i){if(env.supportsTouch||env.supportsIePointer){var element=i.element,startOffset={},startTime=0,speed={},easingLoop=null;env.supportsTouch?(i.event.bind(element,"touchstart",touchStart),i.event.bind(element,"touchmove",touchMove),i.event.bind(element,"touchend",touchEnd)):env.supportsIePointer&&(window.PointerEvent?(i.event.bind(element,"pointerdown",touchStart),i.event.bind(element,"pointermove",touchMove),i.event.bind(element,"pointerup",touchEnd)):window.MSPointerEvent&&(i.event.bind(element,"MSPointerDown",touchStart),i.event.bind(element,"MSPointerMove",touchMove),i.event.bind(element,"MSPointerUp",touchEnd)))}function applyTouchMove(differenceX,differenceY){element.scrollTop-=differenceY,element.scrollLeft-=differenceX,updateGeometry(i)}function getTouch(e){return e.targetTouches?e.targetTouches[0]:e}function shouldHandle(e){return(!e.pointerType||"pen"!==e.pointerType||0!==e.buttons)&&(!(!e.targetTouches||1!==e.targetTouches.length)||!(!e.pointerType||"mouse"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE))}function touchStart(e){if(shouldHandle(e)){var touch=getTouch(e);startOffset.pageX=touch.pageX,startOffset.pageY=touch.pageY,startTime=(new Date).getTime(),null!==easingLoop&&clearInterval(easingLoop)}}function touchMove(e){if(shouldHandle(e)){var touch=getTouch(e),currentOffset={pageX:touch.pageX,pageY:touch.pageY},differenceX=currentOffset.pageX-startOffset.pageX,differenceY=currentOffset.pageY-startOffset.pageY;if(function(target,deltaX,deltaY){if(!element.contains(target))return!1;for(var cursor=target;cursor&&cursor!==element;){if(cursor.classList.contains(cls_element.consuming))return!0;var style=get(cursor);if(deltaY&&style.overflowY.match(/(scroll|auto)/)){var maxScrollTop=cursor.scrollHeight-cursor.clientHeight;if(maxScrollTop>0&&(cursor.scrollTop>0&&deltaY<0||cursor.scrollTop<maxScrollTop&&deltaY>0))return!0}if(deltaX&&style.overflowX.match(/(scroll|auto)/)){var maxScrollLeft=cursor.scrollWidth-cursor.clientWidth;if(maxScrollLeft>0&&(cursor.scrollLeft>0&&deltaX<0||cursor.scrollLeft<maxScrollLeft&&deltaX>0))return!0}cursor=cursor.parentNode}return!1}(e.target,differenceX,differenceY))return;applyTouchMove(differenceX,differenceY),startOffset=currentOffset;var currentTime=(new Date).getTime(),timeGap=currentTime-startTime;timeGap>0&&(speed.x=differenceX/timeGap,speed.y=differenceY/timeGap,startTime=currentTime),function(deltaX,deltaY){var scrollTop=Math.floor(element.scrollTop),scrollLeft=element.scrollLeft,magnitudeX=Math.abs(deltaX),magnitudeY=Math.abs(deltaY);if(magnitudeY>magnitudeX){if(deltaY<0&&scrollTop===i.contentHeight-i.containerHeight||deltaY>0&&0===scrollTop)return 0===window.scrollY&&deltaY>0&&env.isChrome}else if(magnitudeX>magnitudeY&&(deltaX<0&&scrollLeft===i.contentWidth-i.containerWidth||deltaX>0&&0===scrollLeft))return!0;return!0}(differenceX,differenceY)&&e.preventDefault()}}function touchEnd(){i.settings.swipeEasing&&(clearInterval(easingLoop),easingLoop=setInterval((function(){i.isInitialized?clearInterval(easingLoop):speed.x||speed.y?Math.abs(speed.x)<.01&&Math.abs(speed.y)<.01?clearInterval(easingLoop):(applyTouchMove(30*speed.x,30*speed.y),speed.x*=.8,speed.y*=.8):clearInterval(easingLoop)}),10))}}},PerfectScrollbar=function(element,userSettings){var this$1=this;if(void 0===userSettings&&(userSettings={}),"string"==typeof element&&(element=document.querySelector(element)),!element||!element.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");for(var key in this.element=element,element.classList.add(cls_main),this.settings={handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!0,wheelSpeed:1},userSettings)this.settings[key]=userSettings[key];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var result,originalScrollLeft,focus=function(){return element.classList.add(cls_state.focus)},blur=function(){return element.classList.remove(cls_state.focus)};this.isRtl="rtl"===get(element).direction,!0===this.isRtl&&element.classList.add(cls_rtl),this.isNegativeScroll=(originalScrollLeft=element.scrollLeft,element.scrollLeft=-1,result=element.scrollLeft<0,element.scrollLeft=originalScrollLeft,result),this.negativeScrollAdjustment=this.isNegativeScroll?element.scrollWidth-element.clientWidth:0,this.event=new EventManager,this.ownerDocument=element.ownerDocument||document,this.scrollbarXRail=div(cls_element.rail("x")),element.appendChild(this.scrollbarXRail),this.scrollbarX=div(cls_element.thumb("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",focus),this.event.bind(this.scrollbarX,"blur",blur),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var railXStyle=get(this.scrollbarXRail);this.scrollbarXBottom=parseInt(railXStyle.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=toInt(railXStyle.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=toInt(railXStyle.borderLeftWidth)+toInt(railXStyle.borderRightWidth),set(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=toInt(railXStyle.marginLeft)+toInt(railXStyle.marginRight),set(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=div(cls_element.rail("y")),element.appendChild(this.scrollbarYRail),this.scrollbarY=div(cls_element.thumb("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",focus),this.event.bind(this.scrollbarY,"blur",blur),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;var railYStyle=get(this.scrollbarYRail);this.scrollbarYRight=parseInt(railYStyle.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=toInt(railYStyle.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?function(element){var styles=get(element);return toInt(styles.width)+toInt(styles.paddingLeft)+toInt(styles.paddingRight)+toInt(styles.borderLeftWidth)+toInt(styles.borderRightWidth)}(this.scrollbarY):null,this.railBorderYWidth=toInt(railYStyle.borderTopWidth)+toInt(railYStyle.borderBottomWidth),set(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=toInt(railYStyle.marginTop)+toInt(railYStyle.marginBottom),set(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:element.scrollLeft<=0?"start":element.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:element.scrollTop<=0?"start":element.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach((function(handlerName){return handlers[handlerName](this$1)})),this.lastScrollTop=Math.floor(element.scrollTop),this.lastScrollLeft=element.scrollLeft,this.event.bind(this.element,"scroll",(function(e){return this$1.onScroll(e)})),updateGeometry(this)};PerfectScrollbar.prototype.update=function(){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,set(this.scrollbarXRail,{display:"block"}),set(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=toInt(get(this.scrollbarXRail).marginLeft)+toInt(get(this.scrollbarXRail).marginRight),this.railYMarginHeight=toInt(get(this.scrollbarYRail).marginTop)+toInt(get(this.scrollbarYRail).marginBottom),set(this.scrollbarXRail,{display:"none"}),set(this.scrollbarYRail,{display:"none"}),updateGeometry(this),processScrollDiff(this,"top",0,!1,!0),processScrollDiff(this,"left",0,!1,!0),set(this.scrollbarXRail,{display:""}),set(this.scrollbarYRail,{display:""}))},PerfectScrollbar.prototype.onScroll=function(e){this.isAlive&&(updateGeometry(this),processScrollDiff(this,"top",this.element.scrollTop-this.lastScrollTop),processScrollDiff(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=Math.floor(this.element.scrollTop),this.lastScrollLeft=this.element.scrollLeft)},PerfectScrollbar.prototype.destroy=function(){this.isAlive&&(this.event.unbindAll(),remove(this.scrollbarX),remove(this.scrollbarY),remove(this.scrollbarXRail),remove(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)},PerfectScrollbar.prototype.removePsClasses=function(){this.element.className=this.element.className.split(" ").filter((function(name){return!name.match(/^ps([-_].+|)$/)})).join(" ")},__webpack_exports__.default=PerfectScrollbar},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const ko=__webpack_require__(0);ko.bindingHandlers.angle={init:(element,valueAccessor)=>{const angleObservable=valueAccessor(),rect=element.getBoundingClientRect(),centerX=Math.floor(rect.width/2),centerY=Math.floor(rect.height/2);let tracking=!1;const determineAngle=(x,y)=>{const dx=centerX-x,dy=centerY-y;let theta=180*Math.atan2(dy,dx)/Math.PI;theta+=-90,theta<0&&(theta+=360),angleObservable(Math.floor(theta))},onMouseDown=event=>{tracking=!0,determineAngle(event.offsetX,event.offsetY)},onMouseUp=event=>{tracking=!1,determineAngle(event.offsetX,event.offsetY)},onMouseMove=event=>{tracking&&determineAngle(event.offsetX,event.offsetY)};element.addEventListener("mousedown",onMouseDown),element.addEventListener("mouseup",onMouseUp,!0),element.addEventListener("mousemove",onMouseMove,!0),ko.utils.domNodeDisposal.addDisposeCallback(element,()=>{element.removeEventListener("mousedown",onMouseDown),element.removeEventListener("mouseup",onMouseUp,!0),element.removeEventListener("mousemove",onMouseMove,!0)})}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0});const ko=__webpack_require__(0);ko.bindingHandlers.confirm={init:(element,valueAccessor)=>{const observable=ko.unwrap(valueAccessor()),message=observable.message,onConfirm=observable.onConfirm;let balloon;ko.applyBindingsToNode(element,{balloon:{component:{name:"confirmation",params:{getMessage:()=>__awaiter(void 0,void 0,void 0,(function*(){return message})),onConfirm:()=>__awaiter(void 0,void 0,void 0,(function*(){onConfirm()})),onDecline:()=>{balloon.close()}}},onCreated:balloonHandle=>{balloon=balloonHandle},position:"top"}},null)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const ko=__webpack_require__(0),editing_1=__webpack_require__(66);function snapToGrid(element){const gridBinding=editing_1.GridHelper.getParentWidgetBinding(element),cellBinding=editing_1.GridHelper.getWidgetBinding(element),gridRect=element.parentElement.getBoundingClientRect(),colSizes=gridBinding.model.styles.instance.grid.cols.map(colSizeInPercent=>gridRect.width*parseInt(colSizeInPercent.replace("%",""))/100),rowSizes=gridBinding.model.styles.instance.grid.rows.map(rowSizeInPercent=>gridRect.height*parseInt(rowSizeInPercent.replace("%",""))/100),cellRect=element.getBoundingClientRect(),colEdges=[0],rowEdges=[0];let previousColEdge=0;for(const colSize of colSizes)previousColEdge+=colSize,colEdges.push(previousColEdge);let previousRowEdge=0;for(const rowSize of rowSizes)previousRowEdge+=rowSize,rowEdges.push(previousRowEdge);const leftX=cellRect.left-gridRect.left,rightX=cellRect.right-gridRect.left,topY=cellRect.top-gridRect.top,bottomY=cellRect.bottom-gridRect.top;let leftEdgeColumnIndex=colEdges.findIndex(edge=>edge>leftX),rightEdgeColumnIndex=colEdges.findIndex(edge=>edge>rightX);leftX>(colEdges[leftEdgeColumnIndex-1]+colEdges[leftEdgeColumnIndex])/2&&leftEdgeColumnIndex++,rightX>(colEdges[rightEdgeColumnIndex-1]+colEdges[rightEdgeColumnIndex])/2&&rightEdgeColumnIndex++;const colSpan=rightEdgeColumnIndex-leftEdgeColumnIndex;let topEdgeRowIndex=rowEdges.findIndex(edge=>edge>topY),bottomEdgeRowIndex=rowEdges.findIndex(edge=>edge>bottomY);topY>(rowEdges[topEdgeRowIndex-1]+rowEdges[topEdgeRowIndex])/2&&topEdgeRowIndex++,bottomY>(rowEdges[bottomEdgeRowIndex-1]+rowEdges[bottomEdgeRowIndex])/2&&bottomEdgeRowIndex++;const rowSpan=bottomEdgeRowIndex-topEdgeRowIndex,cell=cellBinding.model.styles.instance["grid-cell"].md;cell.position.col=leftEdgeColumnIndex,cell.position.row=topEdgeRowIndex,cell.span.cols=colSpan,cell.span.rows=rowSpan,cellBinding.applyChanges(cellBinding.model),element.removeAttribute("style")}ko.bindingHandlers.gridCellEditor={init:(element,valueAccessor)=>{ko.unwrap(valueAccessor());ko.applyBindingsToNode(element,{dragsource:{inertia:!1,sticky:!0,ondragstart:(sourceData,dragged)=>{const elementRect=element.getBoundingClientRect();element.style.width=elementRect.width+"px",element.style.height=elementRect.height+"px",dragged.style.position="fixed"},ondragend:()=>{snapToGrid(element)}},resizable:{directions:"vertically horizontally",onresize:()=>{snapToGrid(element)}}},null)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const ko=__webpack_require__(0);ko.extenders.max=(target,max)=>{const result=ko.pureComputed({read:target,write:newValue=>{const current=target();newValue<=max?target(newValue):newValue!==current&&target.notifySubscribers(newValue)}}).extend({notify:"always"});return result(target()),result}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuModule=void 0;const menuModelBinder_1=__webpack_require__(680),menuViewModelBinder_1=__webpack_require__(264);exports.MenuModule=class{register(injector){injector.bindToCollection("modelBinders",menuModelBinder_1.MenuModelBinder,"menuModelBinder"),injector.bindToCollection("viewModelBinders",menuViewModelBinder_1.MenuViewModelBinder,"menuViewModelBinder");const getDropdownStyle=key=>({key:key,category:"appearance",displayName:"Menu dropdown",background:{colorKey:"colors/defaultBg"},shadow:{shadowKey:"shadows/shadow2"},padding:{top:5,left:5,right:5,bottom:5},components:{navLink:{default:getNavLinkStyle(key+"/components/navLink/default"),active:getActiveNavLinkStyle(key+"/components/navLink/active")}}}),getNavLinkStyle=key=>({key:key,allowedStates:["hover","focus","active","disabled"],displayName:"Navigation link",typography:{colorKey:"colors/default"}}),getActiveNavLinkStyle=key=>({key:key,allowedStates:["hover","focus","active","disabled"],displayName:"Navigation link (active)",typography:{fontWeight:"bold"}}),styleHandler={key:"menu",migrate:style=>{if(!style)return;Object.keys(style).forEach(variationKey=>{const components=style[variationKey].components;if(!components)return;const navItem=components.navItem;if(!navItem)return;components.navLink=navItem,delete components.navItem;Object.keys(navItem).forEach(variationKey=>{const navItemVariation=navItem[variationKey];navItemVariation.key=navItemVariation.key.replaceAll("/navItem/","/navLink/")})})},getDefaultStyle:(key="components/menu/default")=>{const regex=/components\/(\w*)\/(\w*)/gm;let matches;const components=[];for(;null!==(matches=regex.exec(key));){matches.index===regex.lastIndex&&regex.lastIndex++;const component=matches[1];matches[2];components.push(component)}switch(components[components.length-1]){case"menu":return(key=>({default:{displayName:"Normal menu",key:key,category:"appearance",components:{dropdown:{default:getDropdownStyle(key+"/components/dropdown/default")},navLink:{default:getNavLinkStyle(key+"/components/navLink/default"),active:getActiveNavLinkStyle(key+"/components/navLink/active")}}}}))(key);case"navLink":return getNavLinkStyle(key);case"dropdown":return getDropdownStyle(key);default:return null}}};injector.bindInstanceToCollection("styleHandlers",styleHandler)}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuModelBinder=void 0;const navigation_1=__webpack_require__(37),user_1=__webpack_require__(58),anchorUtils_1=__webpack_require__(263),menuModel_1=__webpack_require__(101);exports.MenuModelBinder=class{constructor(permalinkResolver,navigationService,localeService){this.permalinkResolver=permalinkResolver,this.navigationService=navigationService,this.localeService=localeService}canHandleContract(contract){return"menu"===contract.type}canHandleModel(model){return model instanceof menuModel_1.MenuModel}getLanguageNavigationMenu(bindingContext){return __awaiter(this,void 0,void 0,(function*(){const locales=yield this.localeService.getLocales(),defaultLocale=yield this.localeService.getDefaultLocale(),requestedLocaleCode=(null==bindingContext?void 0:bindingContext.locale)||defaultLocale,requestedLocale=locales.find(x=>x.code===requestedLocaleCode),languageNavItems=[];for(const locale of locales){const targetUrl=(null==bindingContext?void 0:bindingContext.contentItemKey)?yield this.permalinkResolver.getUrlByTargetKey(bindingContext.contentItemKey,locale.code):"/";languageNavItems.push({label:locale.displayName,targetUrl:targetUrl})}return{label:null==requestedLocale?void 0:requestedLocale.displayName,nodes:languageNavItems}}))}processNavigationItem(locale,contract,permalink,minHeading,maxHeading,level=0){return __awaiter(this,void 0,void 0,(function*(){const navitemModel=new navigation_1.NavigationItemModel;if(navitemModel.label=contract.label,contract.navigationItems){const tasks=[];contract.navigationItems.forEach(child=>{tasks.push(this.processNavigationItem(locale,child,permalink,minHeading,maxHeading,level+1))});(yield Promise.all(tasks)).forEach(child=>{navitemModel.nodes.push(child)})}if(!contract.targetKey)return navitemModel;const targetUrl=yield this.permalinkResolver.getUrlByTargetKey(contract.targetKey,locale);if(navitemModel.targetUrl=targetUrl,targetUrl===permalink&&(navitemModel.isActive=!0),level>0&&minHeading&&maxHeading&&navitemModel.targetUrl===permalink){const localNavItems=yield this.processAnchorItems(permalink,locale,minHeading,maxHeading);navitemModel.nodes.push(...localNavItems)}return navitemModel}))}processAnchorItems(permalink,locale,minHeading,maxHeading){return __awaiter(this,void 0,void 0,(function*(){const content=yield this.permalinkResolver.getContentByPermalink(permalink,locale);if(!content)return[];const children=anchorUtils_1.AnchorUtils.getHeadingNodes(content,minHeading,maxHeading);return 0===children.length?[]:children.map(item=>{var _a,_b;const itemModel=new navigation_1.NavigationItemModel;return itemModel.label=item.nodes[0].text,itemModel.targetUrl="#"+(item.identifier||(null===(_a=item.attrs)||void 0===_a?void 0:_a.id)||(null===(_b=item.attrs)||void 0===_b?void 0:_b.key)),itemModel})}))}contractToModel(contract,bindingContext){return __awaiter(this,void 0,void 0,(function*(){if(!contract)throw new Error('Parameter "contract" not specified.');const menuModel=new menuModel_1.MenuModel;menuModel.minHeading=contract.minHeading,menuModel.maxHeading=contract.maxHeading,menuModel.items=[],menuModel.layout=contract.layout,menuModel.roles=contract.roles||[user_1.BuiltInRoles.everyone.key],menuModel.styles=contract.styles||{appearance:"components/menu/default"};const currentPageUrl=null==bindingContext?void 0:bindingContext.navigationPath;if(contract.navigationItemKey){let root;if("@locales"===contract.navigationItemKey)root=yield this.getLanguageNavigationMenu(bindingContext);else{const rootNavigationItem=yield this.navigationService.getNavigationItem(contract.navigationItemKey);rootNavigationItem&&(root=yield this.processNavigationItem(null==bindingContext?void 0:bindingContext.locale,rootNavigationItem,currentPageUrl,menuModel.minHeading,menuModel.maxHeading))}root&&(menuModel.items=root.nodes,menuModel.navigationItem=root,menuModel.navigationItem.key=contract.navigationItemKey)}if(0===menuModel.items.length&&menuModel.minHeading&&menuModel.maxHeading){const localNavItems=yield this.processAnchorItems(currentPageUrl,null==bindingContext?void 0:bindingContext.locale,menuModel.minHeading,menuModel.maxHeading);menuModel.items.push(...localNavItems)}return menuModel}))}modelToContract(model){var _a;const roles=model.roles&&1===model.roles.length&&model.roles[0]===user_1.BuiltInRoles.everyone.key?null:model.roles;return{type:"menu",minHeading:model.minHeading,maxHeading:model.maxHeading,navigationItemKey:null===(_a=model.navigationItem)||void 0===_a?void 0:_a.key,layout:model.layout,styles:model.styles,roles:roles}}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<nav data-bind="secured: roles, styled: styles">\r\n    \x3c!--ko if: $component.nodes().length > 0 --\x3e\r\n\r\n    \x3c!-- ko if: $component.layout() === \'horizontal\' --\x3e\r\n    <div class="menu menu-horizontal" data-bind="template: { name: \'horizontalMenu\', data: $component }"></div>\r\n    \x3c!--/ko--\x3e\r\n\r\n    \x3c!-- ko if: $component.layout() === \'vertical\' --\x3e\r\n    <div class="menu menu-vertical" data-bind="template: { name: \'verticalMenu\', data: $component }"></div>\r\n    \x3c!--/ko--\x3e\r\n\r\n    \x3c!--/ko--\x3e\r\n\r\n    \x3c!--ko if: $component.nodes().length === 0 --\x3e\r\n    <p class="not-configured">It seems that you don\'t have navigation items here.</p>\r\n    \x3c!--/ko--\x3e\r\n</nav>'},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<ul class="nav" data-bind="foreach: { data: $data.nodes, as: \'item\' }">\r\n    \x3c!-- ko if: item.nodes().length > 0 --\x3e\r\n    <li class="nav-item collapsible" data-bind="css: { \'expanded\': expanded }">\r\n        <a href="#" class="nav-link" data-toggle="collapsible" data-bind="text: item.label, attr: { href: item.url }, css: { \'nav-link-active\': item.isActive }"></a>\r\n        \x3c!--ko if: item.nodes().length > 0 --\x3e\r\n        <div class="dropdown collapsible-content">\r\n            \x3c!-- ko template: { name: \'horizontalMenu\', data: item } --\x3e\r\n            \x3c!-- /ko --\x3e\r\n        </div>\r\n        \x3c!-- /ko --\x3e\r\n    </li>\r\n    \x3c!-- /ko --\x3e\r\n\r\n    \x3c!-- ko ifnot: item.nodes().length > 0 --\x3e\r\n    <li class="nav-item">\r\n        <a href="#" class="nav-link" data-bind="text: item.label, attr: { href: item.url }, css: { \'nav-link-active\': item.isActive }"></a>\r\n    </li>\r\n    \x3c!-- /ko --\x3e\r\n</ul>'},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<ul class="nav" data-bind="foreach: { data: $data.nodes, as: \'item\' }">\r\n    \x3c!-- ko if: item.nodes().length > 0 --\x3e\r\n    <li class="nav-item collapsible" data-bind="css: { \'expanded\': expanded }">\r\n        <a href="#" class="nav-link" data-toggle="collapsible" data-bind="text: item.label, attr: { href: item.url }, css: { \'nav-link-active\': item.isActive }"></a>\r\n        \x3c!--ko if: item.nodes().length > 0 --\x3e\r\n        \x3c!-- ko template: { name: \'verticalMenu\', data: item } --\x3e\r\n        \x3c!-- /ko --\x3e\r\n        \x3c!-- /ko --\x3e\r\n    </li>\r\n    \x3c!-- /ko --\x3e\r\n\r\n    \x3c!-- ko ifnot: item.nodes().length > 0 --\x3e\r\n    <li class="nav-item">\r\n        <a href="#" class="nav-link" data-bind="text: item.label, attr: { href: item.url }, css: { \'nav-link-active\': item.isActive }"></a>\r\n    </li>\r\n    \x3c!-- /ko --\x3e\r\n</ul>'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuItemViewModel=void 0;const ko=__webpack_require__(0);exports.MenuItemViewModel=class{constructor(){this.label=ko.observable(),this.url=ko.observable(),this.level=ko.observable(),this.nodes=ko.observableArray([]),this.isActive=ko.observable(!1),this.expanded=ko.observable(!1)}toggle(){this.expanded(!this.expanded())}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuEditorModule=void 0;const styleGuideSnippet_html_1=__webpack_require__(686),menuEditor_1=__webpack_require__(266),menuHandlers_1=__webpack_require__(688);exports.MenuEditorModule=class{register(injector){injector.bind("menuEditor",menuEditor_1.MenuEditor),injector.bindToCollection("widgetHandlers",menuHandlers_1.MenuHandlers,"menuHandler");const styleGroup={key:"menu",name:"components_menu",groupName:"Menus",selectorTemplate:null,styleTemplate:styleGuideSnippet_html_1.default};injector.bindInstanceToCollection("styleGroups",styleGroup)}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<nav data-bind="stylePreview: variation.key" class="design-menu-horizontal">\r\n    <div class="menu menu-horizontal">\r\n        <ul class="nav">\r\n            <li class="nav-item collapsible expanded">\r\n                <a href="#" class="nav-link" data-bind="styleable: variation.components.navLink.default">\r\n                    Nav link\r\n                </a>\r\n                <div class="dropdown collapsible-content" data-bind="styleable: variation.key + \'/components/dropdown/default\'">\r\n                    <ul class="nav nav-horizontal">\r\n                        <li class="nav-item">\r\n                            <a href="#" class="nav-link" data-bind="styleable: variation.key + \'/components/dropdown/default/components/navLink/default\'">\r\n                                Nav link\r\n                            </a>\r\n                        </li>\r\n                        <li class="nav-item">\r\n                            <a href="#" class="nav-link nav-link-active" data-bind="styleable: variation.key + \'/components/dropdown/default/components/navLink/active\'">\r\n                                Nav link (active)\r\n                            </a>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n            </li>\r\n            <li class="nav-item">\r\n                <a href="#" class="nav-link nav-link-active" data-bind="styleable: variation.key + \'/components/navLink/active\'">\r\n                    Nav link (active)\r\n                </a>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</nav>'},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<fieldset class="form" data-bind="scrollable: true">\r\n    <div class="form-group">\r\n        <label class="form-label">Root navigation item</label>\r\n        <a href="#" class="form-control" data-bind="balloon: { component: { name: \'navigation-item-selector\', params: { onSelect: $component.onNavigationItemChange } } }">\r\n            <i class="paperbits-icon paperbits-menu-34 pull-right"></i>\r\n            <span data-bind="text: navigationItemTitle"></span>\r\n        </a>\r\n    </div>\r\n\r\n    <div class="form-group">\r\n        <label for="showHeadings" class="form-label">\r\n            <input id="showHeadings" type="checkbox" name="showHeadings" data-bind="checked: showHeadings">\r\n            Show page headings\r\n        </label>\r\n    </div>\r\n\r\n    \x3c!-- ko if: showHeadings --\x3e\r\n\r\n    <div class="form-group">\r\n        <label for="minHeadingLevel" class="form-label">Min heading level</label>\r\n        <select id="minHeadingLevel" class="form-control" data-bind="options: headingLevelOptions, value: minHeadingLevel, optionsText: \'label\', optionsValue: \'value\'"></select>\r\n    </div>\r\n\r\n    <div class="form-group">\r\n        <label for="maxHeadingLevel" class="form-label">Max heading level</label>\r\n        <select id="maxHeadingLevel" class="form-control" data-bind="options: headingLevelOptions, value: maxHeadingLevel, optionsText: \'label\', optionsValue: \'value\'"></select>\r\n    </div>\r\n\r\n    \x3c!-- /ko --\x3e\r\n\r\n    <div class="form-group">\r\n        <label for="layout" class="form-label">\r\n            Layout\r\n        </label>\r\n        <select id="layout" class="form-control" data-bind="options: layoutOptions, value: layout, optionsText: \'label\', optionsValue: \'value\'">\r\n        </select>\r\n    </div>\r\n\r\n    <div class="form-group">\r\n        <label for="appearanceStyle" class="form-label">\r\n            Appearance\r\n            <button class="btn btn-info" type="button" data-bind="tooltip: \'Predefined appearance from style guide.\'"></button>\r\n        </label>\r\n        <select id="appearanceStyle" class="form-control" data-bind="options: appearanceStyles, value: appearanceStyle, optionsText: \'displayName\', optionsValue: \'key\'"></select>\r\n    </div>\r\n\r\n    <role-input params="{ selection: model.roles, onChange: onRoleSelect }"></role-input>\r\n</fieldset>'},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuHandlers=void 0;const menuModel_1=__webpack_require__(101);exports.MenuHandlers=class{getWidgetOrder(){return __awaiter(this,void 0,void 0,(function*(){return{name:"menu",displayName:"Menu",iconClass:"paperbits-menu-34",requires:["js"],createModel:()=>__awaiter(this,void 0,void 0,(function*(){return new menuModel_1.MenuModel}))}}))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NavbarModule=void 0;const navbarViewModel_1=__webpack_require__(267),navbarModelBinder_1=__webpack_require__(691),navbarViewModelBinder_1=__webpack_require__(692);exports.NavbarModule=class{register(injector){injector.bind("navbar",navbarViewModel_1.NavbarViewModel),injector.bindToCollection("modelBinders",navbarModelBinder_1.NavbarModelBinder,"navbarModelBinder"),injector.bindToCollection("viewModelBinders",navbarViewModelBinder_1.NavbarViewModelBinder)}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<nav class="navbar navbar-expand-lg w-100" data-bind="styled: styles">\r\n    <a class="navbar-brand" href="/" data-bind="if: $component.pictureSourceUrl">\r\n        <img data-bind="attr: { src: $component.pictureSourceUrl }, size: { width: pictureWidth, height: pictureHeight }">\r\n    </a>\r\n    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapse" aria-controls="collapse" aria-expanded="false" aria-label="Toggle navigation">\r\n        <span class="navbar-toggler-icon"></span>\r\n    </button>\r\n    \x3c!--ko if: navigationRoot--\x3e\r\n    <div id="collapse" class="collapse navbar-collapse" data-bind="with: navigationRoot">\r\n        <ul class="nav navbar-nav ml-auto" data-bind="foreach: nodes()">\r\n            \x3c!--ko if: nodes().length > 0 --\x3e\r\n            <li class="nav-item dropdown">\r\n                <a class="nav-link dropdown-toggle" data-toggle="dropdown" data-bind="attr: { href: url }">\r\n                    <span data-bind="text: label"></span>\r\n                    <span class="caret"></span>\r\n                </a>\r\n                \x3c!--ko template: { name: \'navigationItemTemplate\', data: $data }--\x3e\r\n                \x3c!--/ko--\x3e\r\n            </li>\r\n            \x3c!--/ko--\x3e\r\n            \x3c!--ko ifnot: nodes().length > 0 --\x3e\r\n            <li class="nav-item">\r\n                <a class="nav-link" data-bind="text: label, attr: { href: url }, css: { \'nav-link-active\': isActive }"></a>\r\n            </li>\r\n            \x3c!--/ko--\x3e\r\n        </ul>\r\n    </div>\r\n    \x3c!--/ko--\x3e\r\n    \x3c!--ko ifnot: navigationRoot --\x3e\r\n    <p class="not-configured">It seems that you don\'t have navigation items here.</p>\r\n    \x3c!--/ko--\x3e\r\n</nav>\r\n\r\n<script id="navigationItemTemplate" type="text/html">\r\n    <ul class="dropdown-menu" data-bind="foreach: nodes()">\r\n        \x3c!--ko if: nodes().length > 0 --\x3e\r\n        <li class="dropdown dropdown-submenu">\r\n            <a class="nav-link dropdown-toggle" data-toggle="dropdown" data-bind="attr: { href: url }">\r\n                <span data-bind="text: label"></span>\r\n                \x3c!--<span class="caret"></span>--\x3e\r\n            </a>\r\n            \x3c!--ko template: { name: \'navigationItemTemplate\', data: $data }--\x3e\r\n            \x3c!--/ko--\x3e\r\n        </li>\r\n        \x3c!--/ko--\x3e\r\n        \x3c!--ko ifnot: nodes().length > 0 --\x3e\r\n        <li>\r\n            <a class="nav-link" data-bind="text: label, attr: { href: url }"></a>\r\n        </li>\r\n        \x3c!--/ko--\x3e\r\n    </ul>\r\n<\/script>'},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.NavbarModelBinder=void 0;const navigation_1=__webpack_require__(37),navbarModel_1=__webpack_require__(268);exports.NavbarModelBinder=class{constructor(mediaPermalinkResolver,navigationService,permalinkResolver,router){this.mediaPermalinkResolver=mediaPermalinkResolver,this.navigationService=navigationService,this.permalinkResolver=permalinkResolver,this.router=router}contractToModel(contract,bindingContext){return __awaiter(this,void 0,void 0,(function*(){if(!contract)throw new Error('Parameter "contract" not specified.');const navbarModel=new navbarModel_1.NavbarModel,navigationItemContract=yield this.navigationService.getNavigationItem(contract.rootKey);if(navigationItemContract){const navbarItemModel=yield this.navigationItemToNavbarItemModel(navigationItemContract,null==bindingContext?void 0:bindingContext.locale);navbarModel.root=navbarItemModel}return navbarModel.rootKey=contract.rootKey,navbarModel.pictureSourceKey=contract.pictureSourceKey,contract.pictureSourceKey&&(navbarModel.pictureSourceKey=contract.pictureSourceKey,navbarModel.pictureSourceUrl=yield this.mediaPermalinkResolver.getUrlByTargetKey(contract.pictureSourceKey),navbarModel.pictureWidth=contract.pictureWidth,navbarModel.pictureHeight=contract.pictureHeight,navbarModel.pictureSourceUrl||console.warn(`Unable to set navbar branding. Media with source key ${contract.pictureSourceKey} not found.`)),navbarModel.styles=contract.styles||{appearance:"components/navbar/default"},navbarModel}))}canHandleContract(contract){return"navbar"===contract.type}canHandleModel(model){return model instanceof navbarModel_1.NavbarModel}navigationItemToNavbarItemModel(contract,locale){return __awaiter(this,void 0,void 0,(function*(){if(!contract)throw new Error('Parameter "contract" not specified.');const navigationItem=new navigation_1.NavigationItemModel;if(navigationItem.label=contract.label,contract.navigationItems){const tasks=[];contract.navigationItems.forEach(child=>{tasks.push(this.navigationItemToNavbarItemModel(child,locale))});(yield Promise.all(tasks)).forEach(child=>{navigationItem.nodes.push(child)})}else if(contract.targetKey){const targetUrl=yield this.permalinkResolver.getUrlByTargetKey(contract.targetKey,locale);navigationItem.targetUrl=targetUrl}else console.warn(`Navigation item "${navigationItem.label}" has no permalink assigned to it.`);return navigationItem.isActive=navigationItem.targetUrl===this.router.getPath(),navigationItem}))}modelToContract(navbarModel){return{type:"navbar",rootKey:navbarModel.rootKey,pictureSourceKey:navbarModel.pictureSourceKey,pictureWidth:navbarModel.pictureWidth,pictureHeight:navbarModel.pictureHeight,styles:navbarModel.styles}}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.NavbarViewModelBinder=void 0;const navbarViewModel_1=__webpack_require__(267),navbarItemViewModel_1=__webpack_require__(693),navigation_1=__webpack_require__(37),navbarModel_1=__webpack_require__(268);exports.NavbarViewModelBinder=class{constructor(eventManager,navbarModelBinder,styleCompiler){this.eventManager=eventManager,this.navbarModelBinder=navbarModelBinder,this.styleCompiler=styleCompiler}navbarItemModelToNavbarItemViewModel(navbarItemModel){const label=navbarItemModel.label,navbarItemViewModel=new navbarItemViewModel_1.NavbarItemViewModel(label);if(navbarItemModel.nodes.length>0){navbarItemModel.nodes.map(childNode=>this.navbarItemModelToNavbarItemViewModel(childNode)).forEach(child=>{navbarItemViewModel.nodes.push(child)})}else navbarItemViewModel.url(navbarItemModel.targetUrl),navbarItemViewModel.isActive(navbarItemModel.isActive);return navbarItemViewModel}modelToViewModel(model,viewModel,bindingContext){return __awaiter(this,void 0,void 0,(function*(){let onUpdate;if(viewModel||(viewModel=new navbarViewModel_1.NavbarViewModel,onUpdate=updatedRootModel=>__awaiter(this,void 0,void 0,(function*(){updatedRootModel.key===model.rootKey&&viewModel.navigationRoot(this.navbarItemModelToNavbarItemViewModel(updatedRootModel))}))),model.root){const navigationRoot=this.navbarItemModelToNavbarItemViewModel(model.root);viewModel.navigationRoot(navigationRoot)}return viewModel.pictureSourceUrl(model.pictureSourceUrl),viewModel.pictureWidth(model.pictureWidth),viewModel.pictureHeight(model.pictureHeight),model.styles&&viewModel.styles(yield this.styleCompiler.getStyleModelAsync(model.styles,null==bindingContext?void 0:bindingContext.styleManager)),viewModel.widgetBinding={displayName:"Navigation bar",readonly:!!bindingContext&&bindingContext.readonly,model:model,draggable:!0,applyChanges:()=>__awaiter(this,void 0,void 0,(function*(){yield this.modelToViewModel(model,viewModel,bindingContext),this.eventManager.dispatchEvent("onContentUpdate")})),onCreate:()=>{this.eventManager.addEventListener(navigation_1.NavigationEvents.onNavigationItemUpdate,onUpdate)},onDispose:()=>{this.eventManager.removeEventListener(navigation_1.NavigationEvents.onNavigationItemUpdate,onUpdate)}},viewModel}))}canHandleModel(model){return model instanceof navbarModel_1.NavbarModel}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NavbarItemViewModel=void 0;const ko=__webpack_require__(0);exports.NavbarItemViewModel=class{constructor(label,url){this.label=ko.observable(label),this.url=ko.observable(url),this.isActive=ko.observable(),this.nodes=ko.observableArray()}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PictureModule=void 0;const pictureModelBinder_1=__webpack_require__(695),pictureViewModelBinder_1=__webpack_require__(696),pictureViewModel_1=__webpack_require__(269);exports.PictureModule=class{register(injector){injector.bind("picture",pictureViewModel_1.PictureViewModel),injector.bindToCollection("modelBinders",pictureModelBinder_1.PictureModelBinder),injector.bindToCollection("viewModelBinders",pictureViewModelBinder_1.PictureViewModelBinder)}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PictureModelBinder=void 0;const pictureModel_1=__webpack_require__(102);exports.PictureModelBinder=class{constructor(permalinkResolver){this.permalinkResolver=permalinkResolver}canHandleContract(contract){return"picture"===contract.type}canHandleModel(model){return model instanceof pictureModel_1.PictureModel}contractToModel(contract,bindingContext){return __awaiter(this,void 0,void 0,(function*(){const model=new pictureModel_1.PictureModel;if(model.caption=contract.caption,model.width=contract.width,model.height=contract.height,model.styles=contract.styles||{appearance:"components/picture/default"},model.sourceKey=contract.sourceKey,contract.hyperlink)try{model.hyperlink=yield this.permalinkResolver.getHyperlinkByTargetKey(contract.hyperlink.targetKey,null==bindingContext?void 0:bindingContext.locale)}catch(error){console.log(error)}return model}))}modelToContract(pictureModel){const pictureContract={type:"picture",caption:pictureModel.caption,width:pictureModel.width,height:pictureModel.height,styles:pictureModel.styles};return pictureModel.sourceKey&&(pictureContract.sourceKey=pictureModel.sourceKey),pictureModel.hyperlink&&(pictureContract.hyperlink={target:pictureModel.hyperlink.target,targetKey:pictureModel.hyperlink.targetKey}),pictureContract}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PictureViewModelBinder=void 0;const pictureViewModel_1=__webpack_require__(269),pictureModel_1=__webpack_require__(102);exports.PictureViewModelBinder=class{constructor(eventManager,styleCompiler,mediaPermalinkResolver){this.eventManager=eventManager,this.styleCompiler=styleCompiler,this.mediaPermalinkResolver=mediaPermalinkResolver}modelToViewModel(model,viewModel,bindingContext){return __awaiter(this,void 0,void 0,(function*(){viewModel||(viewModel=new pictureViewModel_1.PictureViewModel);let sourceUrl=null;model.sourceKey&&(sourceUrl=yield this.mediaPermalinkResolver.getUrlByTargetKey(model.sourceKey),sourceUrl||console.warn(`Unable to set picture. Media with source key ${model.sourceKey} not found.`)),viewModel.sourceUrl(sourceUrl),viewModel.caption(model.caption),viewModel.hyperlink(model.hyperlink),viewModel.width(model.width),viewModel.height(model.height),model.styles&&viewModel.styles(yield this.styleCompiler.getStyleModelAsync(model.styles,null==bindingContext?void 0:bindingContext.styleManager));const binding={name:"picture",displayName:"Picture",readonly:!!bindingContext&&bindingContext.readonly,model:model,draggable:!0,editor:"picture-editor",applyChanges:changes=>__awaiter(this,void 0,void 0,(function*(){yield this.modelToViewModel(model,viewModel,bindingContext),this.eventManager.dispatchEvent("onContentUpdate")}))};return viewModel.widgetBinding=binding,viewModel}))}canHandleModel(model){return model instanceof pictureModel_1.PictureModel}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="inline-block">\r\n    \x3c!-- ko if: hyperlink --\x3e\r\n    <a data-bind="hyperlink: hyperlink">\r\n        \x3c!-- ko if: sourceUrl --\x3e\r\n        <img class="content" data-bind="styled: styles, attr: { src: sourceUrl, alt: caption }, size: { width: width, height: height }">\r\n        \x3c!-- /ko--\x3e\r\n\r\n        \x3c!-- ko ifnot: sourceUrl --\x3e\r\n        <div class="empty-picture" data-bind="styled: styles, size: { width: width, height: height }">\r\n            <svg viewBox="0 0 24 24" width="80px" height="80px">\r\n                <g fill="#020202">\r\n                    <path d="M23,2H1A1,1,0,0,0,0,3V21a1,1,0,0,0,1,1H23a1,1,0,0,0,1-1V3A1,1,0,0,0,23,2ZM22,4V14.3L17.759,9.35A1,1,0,0,0,17.005,9a.879.879,0,0,0-.757.342l-6.3,7.195L6.707,13.293A.988.988,0,0,0,5.955,13a1,1,0,0,0-.723.358L2,17.238V4Z" fill="#020202"/>\r\n                    <circle data-color="color-2" cx="9" cy="8" r="2"/>\r\n                </g>\r\n            </svg>\r\n        </div>\r\n        \x3c!-- /ko--\x3e\r\n    </a>\r\n    \x3c!-- /ko --\x3e\r\n    \x3c!-- ko ifnot: hyperlink --\x3e\r\n    \x3c!-- ko if: sourceUrl --\x3e\r\n    <img class="content" data-bind="styled: styles, attr: { src: sourceUrl, alt: caption }, size: { width: width, height: height }">\r\n    \x3c!-- /ko--\x3e\r\n\r\n    \x3c!-- ko ifnot: sourceUrl --\x3e\r\n    <div class="empty-media" data-bind="styled: styles, size: { width: width, height: height }">\r\n        <svg viewBox="0 0 24 24" width="80" height="80">\r\n            <g fill="#ccc">\r\n                <path d="M23,2H1A1,1,0,0,0,0,3V21a1,1,0,0,0,1,1H23a1,1,0,0,0,1-1V3A1,1,0,0,0,23,2ZM22,4V14.3L17.759,9.35A1,1,0,0,0,17.005,9a.879.879,0,0,0-.757.342l-6.3,7.195L6.707,13.293A.988.988,0,0,0,5.955,13a1,1,0,0,0-.723.358L2,17.238V4Z"/>\r\n                <circle cx="9" cy="8" r="2"/>\r\n            </g>\r\n        </svg>\r\n    </div>\r\n    \x3c!-- /ko--\x3e\r\n    \x3c!-- /ko --\x3e\r\n</div>'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RowModule=void 0;const rowViewModel_1=__webpack_require__(270),rowModelBinder_1=__webpack_require__(700),rowViewModelBinder_1=__webpack_require__(701);exports.RowModule=class{register(injector){injector.bind("row",rowViewModel_1.RowViewModel),injector.bindToCollection("modelBinders",rowModelBinder_1.RowModelBinder),injector.bindToCollection("viewModelBinders",rowViewModelBinder_1.RowViewModelBinder)}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="row" data-bind="css: css">\r\n    \x3c!-- ko foreach: { data: widgets, as: \'widget\'  } --\x3e\r\n    \x3c!-- ko widget: widget --\x3e\r\n    \x3c!-- /ko --\x3e\r\n    \x3c!-- /ko --\x3e\r\n</div>\r\n\r\n'},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.RowModelBinder=void 0;const rowModel_1=__webpack_require__(149);exports.RowModelBinder=class{constructor(modelBinderSelector){this.modelBinderSelector=modelBinderSelector,this.contractToModel=this.contractToModel.bind(this)}canHandleContract(contract){return"layout-row"===contract.type}canHandleModel(model){return model instanceof rowModel_1.RowModel}contractToModel(contract,bindingContext){return __awaiter(this,void 0,void 0,(function*(){const rowModel=new rowModel_1.RowModel;contract.align&&(contract.align.sm&&(rowModel.alignSm=contract.align.sm),contract.align.md&&(rowModel.alignMd=contract.align.md),contract.align.lg&&(rowModel.alignLg=contract.align.lg)),contract.justify&&(contract.justify.sm&&(rowModel.justifySm=contract.justify.sm),contract.justify.md&&(rowModel.justifyMd=contract.justify.md),contract.justify.lg&&(rowModel.justifyLg=contract.justify.lg)),contract.nodes||(contract.nodes=[]);const modelPromises=contract.nodes.map(contract=>__awaiter(this,void 0,void 0,(function*(){const modelBinder=this.modelBinderSelector.getModelBinderByContract(contract);return yield modelBinder.contractToModel(contract,bindingContext)})));return rowModel.widgets=yield Promise.all(modelPromises),rowModel}))}modelToContract(rowModel){const rowConfig={type:"layout-row",nodes:[],align:{}};return rowConfig.align.sm=rowModel.alignSm,rowConfig.align.md=rowModel.alignMd,rowConfig.align.lg=rowModel.alignLg,rowConfig.justify={},rowConfig.justify.sm=rowModel.justifySm,rowConfig.justify.md=rowModel.justifyMd,rowConfig.justify.lg=rowModel.justifyLg,rowModel.widgets.forEach(widgetModel=>{const modelBinder=this.modelBinderSelector.getModelBinderByModel(widgetModel);rowConfig.nodes.push(modelBinder.modelToContract(widgetModel))}),rowConfig}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.RowViewModelBinder=void 0;const rowViewModel_1=__webpack_require__(270),rowModel_1=__webpack_require__(149),placeholderViewModel_1=__webpack_require__(38),rowHandlers_1=__webpack_require__(271);exports.RowViewModelBinder=class{constructor(viewModelBinderSelector,eventManager){this.viewModelBinderSelector=viewModelBinderSelector,this.eventManager=eventManager}modelToViewModel(model,viewModel,bindingContext){return __awaiter(this,void 0,void 0,(function*(){viewModel||(viewModel=new rowViewModel_1.RowViewModel);const viewModels=[];for(const widgetModel of model.widgets){const widgetViewModelBinder=this.viewModelBinderSelector.getViewModelBinderByModel(widgetModel),widgetViewModel=yield widgetViewModelBinder.modelToViewModel(widgetModel,null,bindingContext);viewModels.push(widgetViewModel)}0===viewModels.length&&viewModels.push(new placeholderViewModel_1.PlaceholderViewModel("Row")),viewModel.widgets(viewModels),viewModel.alignSm(model.alignSm),viewModel.alignMd(model.alignMd),viewModel.alignLg(model.alignLg),viewModel.justifySm(model.justifySm),viewModel.justifyMd(model.justifyMd),viewModel.justifyLg(model.justifyLg);const binding={name:"row",displayName:"Row",readonly:!!bindingContext&&bindingContext.readonly,model:model,draggable:!1,handler:rowHandlers_1.RowHandlers,applyChanges:()=>__awaiter(this,void 0,void 0,(function*(){yield this.modelToViewModel(model,viewModel,bindingContext),this.eventManager.dispatchEvent("onContentUpdate")}))};return viewModel.widgetBinding=binding,viewModel}))}canHandleModel(model){return model instanceof rowModel_1.RowModel}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SectionModule=void 0;const sectionViewModel_1=__webpack_require__(272),sectionModelBinder_1=__webpack_require__(235),sectionViewModelBinder_1=__webpack_require__(704);exports.SectionModule=class{register(injector){injector.bind("section",sectionViewModel_1.SectionViewModel),injector.bindToCollection("modelBinders",sectionModelBinder_1.SectionModelBinder,"sectionModelBinder"),injector.bindToCollection("viewModelBinders",sectionViewModelBinder_1.SectionViewModelBinder)}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default="<section data-bind=\"styled: styles\">\r\n    \x3c!-- ko foreach: { data: widgets, as: 'widget' } --\x3e\r\n    \x3c!-- ko widget: widget --\x3e\r\n    \x3c!-- /ko --\x3e\r\n    \x3c!-- /ko --\x3e\r\n</section>"},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SectionViewModelBinder=void 0;const sectionViewModel_1=__webpack_require__(272),sectionModel_1=__webpack_require__(86),placeholderViewModel_1=__webpack_require__(38),sectionHandlers_1=__webpack_require__(144);exports.SectionViewModelBinder=class{constructor(viewModelBinderSelector,eventManager,styleCompiler){this.viewModelBinderSelector=viewModelBinderSelector,this.eventManager=eventManager,this.styleCompiler=styleCompiler}modelToViewModel(model,viewModel,bindingContext){return __awaiter(this,void 0,void 0,(function*(){viewModel||(viewModel=new sectionViewModel_1.SectionViewModel);const viewModels=[];for(const widgetModel of model.widgets){const widgetViewModelBinder=this.viewModelBinderSelector.getViewModelBinderByModel(widgetModel),widgetViewModel=yield widgetViewModelBinder.modelToViewModel(widgetModel,null,bindingContext);viewModels.push(widgetViewModel)}0===viewModels.length&&viewModels.push(new placeholderViewModel_1.PlaceholderViewModel("Section")),viewModel.widgets(viewModels),model.styles&&viewModel.styles(yield this.styleCompiler.getStyleModelAsync(model.styles,null==bindingContext?void 0:bindingContext.styleManager));const binding={name:"section",displayName:"Section",readonly:!!bindingContext&&bindingContext.readonly,model:model,draggable:!0,flow:"block",editor:"layout-section-editor",handler:sectionHandlers_1.SectionHandlers,applyChanges:changes=>__awaiter(this,void 0,void 0,(function*(){yield this.modelToViewModel(model,viewModel,bindingContext),this.eventManager.dispatchEvent("onContentUpdate")}))};return viewModel.widgetBinding=binding,viewModel}))}canHandleModel(model){return model instanceof sectionModel_1.SectionModel}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TestimonialsModule=void 0;const testimonialsModelBinder_1=__webpack_require__(273),testimonialsViewModelBinder_1=__webpack_require__(708);exports.TestimonialsModule=class{register(injector){injector.bindToCollection("modelBinders",testimonialsModelBinder_1.TestimonialsModelBinder),injector.bindToCollection("viewModelBinders",testimonialsViewModelBinder_1.TestimonialsViewModelBinder)}}},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(707),exports),__exportStar(__webpack_require__(274),exports),__exportStar(__webpack_require__(103),exports),__exportStar(__webpack_require__(273),exports)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.TestimonialsViewModelBinder=void 0;const testimonialsViewModel_1=__webpack_require__(709),testimonialsModel_1=__webpack_require__(103);exports.TestimonialsViewModelBinder=class{constructor(eventManager){this.eventManager=eventManager}modelToViewModel(model,viewModel,bindingContext){return __awaiter(this,void 0,void 0,(function*(){return viewModel||(viewModel=new testimonialsViewModel_1.TestimonialsViewModel),viewModel.textContent(model.textContent),viewModel.allStarsCount(model.allStarsCount),viewModel.starsCount(model.starsCount),viewModel.author(model.author),viewModel.authorTitle(model.authorTitle),viewModel.widgetBinding={displayName:"Testimonials",readonly:!!bindingContext&&bindingContext.readonly,model:model,draggable:!0,editor:"testimonials-editor",applyChanges:()=>__awaiter(this,void 0,void 0,(function*(){yield this.modelToViewModel(model,viewModel,bindingContext),this.eventManager.dispatchEvent("onContentUpdate")}))},viewModel}))}canHandleModel(model){return model instanceof testimonialsModel_1.TestimonialsModel}}},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.TestimonialsViewModel=void 0;const ko=__webpack_require__(0),testimonials_html_1=__webpack_require__(710),decorators_1=__webpack_require__(2);let TestimonialsViewModel=class{constructor(){this.textContent=ko.observable(),this.allStarsCount=ko.observable(),this.starsCount=ko.observable(),this.author=ko.observable(),this.authorTitle=ko.observable()}};TestimonialsViewModel=__decorate([decorators_1.Component({selector:"testimonials",template:testimonials_html_1.default}),__metadata("design:paramtypes",[])],TestimonialsViewModel),exports.TestimonialsViewModel=TestimonialsViewModel},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="testimonials">\r\n    <blockquote>\r\n        <span data-bind="text: textContent"></span>\r\n    </blockquote>\r\n    \x3c!-- ko foreach: { data: [...Array(allStarsCount()).keys()] } --\x3e\r\n    \x3c!-- ko if: $index() <= $parent.starsCount()-1 --\x3e\r\n    <svg height="20" width="20">\r\n        <polygon points="10,1 4,19 19,8 1,8 16,19" fill="#ffdc12"/>\r\n    </svg>\r\n    \x3c!-- /ko --\x3e\r\n\r\n    \x3c!-- ko if: $index() > $parent.starsCount()-1 --\x3e\r\n    <svg height="20" width="20">\r\n        <polygon points="10,1 4,19 19,8 1,8 16,19" fill="#B6B6B4"/>\r\n    </svg>\r\n    \x3c!-- /ko --\x3e\r\n\r\n    \x3c!-- /ko --\x3e\r\n    <div class="name">\r\n        <b><span data-bind="text: author"></span></b>\r\n        <p><span data-bind="text: authorTitle"></span></p>\r\n    </div>\r\n</div>'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TextblockModule=void 0;const textblockViewModelBinder_1=__webpack_require__(275),textblockViewModel_1=__webpack_require__(276),textblockModelBinder_1=__webpack_require__(277),bindingHandlers_htmlEditor_1=__webpack_require__(278),inlineModelBinder_1=__webpack_require__(713),blockModelBinder_1=__webpack_require__(719),listModelBinder_1=__webpack_require__(720);exports.TextblockModule=class{register(injector){injector.bind("textblock",textblockViewModel_1.TextblockViewModel),injector.bindToCollection("modelBinders",inlineModelBinder_1.InlineModelBinder),injector.bindToCollection("modelBinders",blockModelBinder_1.BlockModelBinder),injector.bindToCollection("modelBinders",listModelBinder_1.ListModelBinder),injector.bindToCollection("modelBinders",textblockModelBinder_1.TextblockModelBinder),injector.bindToCollection("viewModelBinders",textblockViewModelBinder_1.TextblockViewModelBinder),injector.bindToCollection("autostart",bindingHandlers_htmlEditor_1.HtmlEditorBindingHandler)}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="block ProseMirror" data-bind="htmlEditor: { htmlEditor: htmlEditor, state: state, readonly: readonly }"></div>'},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.InlineModelBinder=void 0;const models_1=__webpack_require__(714);exports.InlineModelBinder=class{constructor(styleCompiler,permalinkResolver){this.styleCompiler=styleCompiler,this.permalinkResolver=permalinkResolver}canHandleContract(contract){return"text"===contract.type}canHandleModel(model){return"text"===model.type}contractToModel(contract,bindingContent){return __awaiter(this,void 0,void 0,(function*(){const model=new models_1.InlineModel;if(model.text=contract.text,contract.marks&&contract.marks.length>0){const modelPromises=contract.marks.map(markContract=>__awaiter(this,void 0,void 0,(function*(){var _a,_b;const markModel=new models_1.MarkModel(markContract.type);switch(markContract.type){case"hyperlink":const target=markContract.target,targetKey=null===(_a=markContract.attrs)||void 0===_a?void 0:_a.targetKey,anchor=markContract.anchor,anchorName=null===(_b=markContract.attrs)||void 0===_b?void 0:_b.anchorName,download=(null==targetKey?void 0:targetKey.startsWith("uploads/"))?"":void 0,href=targetKey?yield this.permalinkResolver.getUrlByTargetKey(targetKey,null==bindingContent?void 0:bindingContent.locale):null;markModel.attrs={href:href||"#",target:target,targetKey:targetKey,anchor:anchor,anchorName:anchorName,download:download};break;case"color":const colorModel=markContract.attrs;if(null==colorModel?void 0:colorModel.colorKey){const colorClass=this.styleCompiler.getClassNameByColorKey(colorModel.colorKey);markModel.attrs={colorKey:colorModel.colorKey,colorClass:colorClass}}}return markModel})));model.marks=yield Promise.all(modelPromises)}return model}))}modelToContract(inlineModel){const textContract={type:"text",text:inlineModel.text};return inlineModel.marks&&inlineModel.marks.length>0&&(textContract.marks=inlineModel.marks.map(markModel=>{const contract={type:markModel.type};if("hyperlink"===markModel.type){const model=markModel.attrs;contract.attrs={anchor:model.anchor,anchorName:model.anchorName,target:model.target,targetKey:model.targetKey}}else if("color"===markModel.type){const model=markModel.attrs;model&&model.colorKey&&(contract.attrs={colorKey:model.colorKey})}return contract})),textContract}}},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(104),exports),__exportStar(__webpack_require__(715),exports),__exportStar(__webpack_require__(716),exports),__exportStar(__webpack_require__(279),exports),__exportStar(__webpack_require__(717),exports),__exportStar(__webpack_require__(718),exports)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.InlineModel=void 0;exports.InlineModel=class{constructor(){this.type="text"}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MarkModel=void 0;exports.MarkModel=class{constructor(type){this.type=type}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListItemModel=void 0;const blockModel_1=__webpack_require__(104);class ListItemModel extends blockModel_1.BlockModel{constructor(){super(...arguments),this.type="list-item"}}exports.ListItemModel=ListItemModel},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ColorModel=void 0;exports.ColorModel=class{}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.BlockModelBinder=void 0;const Utils=__webpack_require__(6),blockModel_1=__webpack_require__(104);exports.BlockModelBinder=class{constructor(modelBinderSelector,styleCompiler){this.modelBinderSelector=modelBinderSelector,this.styleCompiler=styleCompiler,this.blockTypes=["paragraph","list-item","break","formatted","quote","heading1","heading2","heading3","heading4","heading5","heading6"]}isHeading(type){return/^heading\d$/gm.test(type)}canHandleContract(contract){return this.blockTypes.includes(contract.type)}canHandleModel(model){return this.blockTypes.includes(model.type)}contractToModel(contract,bindingContext){var _a,_b,_c;return __awaiter(this,void 0,void 0,(function*(){const model=new blockModel_1.BlockModel(contract.type);let identifier=contract.identifier||(null===(_a=contract.attrs)||void 0===_a?void 0:_a.id)||(null===(_b=contract.attrs)||void 0===_b?void 0:_b.key);const localStyles=contract.styles||(null===(_c=contract.attrs)||void 0===_c?void 0:_c.styles);let className;if(localStyles&&(className=yield this.styleCompiler.getClassNamesForLocalStylesAsync(localStyles)),!identifier&&this.isHeading(contract.type)&&(identifier=Utils.identifier()),model.attrs={id:identifier,styles:localStyles,className:className},contract.nodes&&contract.nodes.length>0){const modelPromises=contract.nodes.map(contract=>__awaiter(this,void 0,void 0,(function*(){const modelBinder=this.modelBinderSelector.getModelBinderByContract(contract);return yield modelBinder.contractToModel(contract,bindingContext)})));model.nodes=yield Promise.all(modelPromises)}return model}))}modelToContract(model){var _a,_b;const contract={type:model.type,styles:null===(_a=model.attrs)||void 0===_a?void 0:_a.styles,identifier:null===(_b=model.attrs)||void 0===_b?void 0:_b.id};return!contract.identifier&&this.isHeading(contract.type)&&(contract.identifier=Utils.identifier()),model.nodes&&model.nodes.length>0&&(contract.nodes=[],model.nodes.forEach(contentItem=>{const modelBinder=this.modelBinderSelector.getModelBinderByModel(contentItem);contract.nodes.push(modelBinder.modelToContract(contentItem))})),contract}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListModelBinder=void 0;const listModel_1=__webpack_require__(279);exports.ListModelBinder=class{constructor(modelBinderSelector,styleCompiler){this.modelBinderSelector=modelBinderSelector,this.styleCompiler=styleCompiler,this.listTypes=["ordered-list","bulleted-list"]}canHandleContract(contract){return this.listTypes.includes(contract.type)}canHandleModel(model){return this.listTypes.includes(model.type)}contractToModel(contract,bindingContext){var _a;return __awaiter(this,void 0,void 0,(function*(){const model=new listModel_1.ListModel(contract.type),localStyles=contract.styles||(null===(_a=contract.attrs)||void 0===_a?void 0:_a.styles);let className;if(localStyles&&(className=yield this.styleCompiler.getClassNamesForLocalStylesAsync(localStyles)),model.attrs={styles:localStyles,className:className},contract.nodes&&contract.nodes.length>0){const modelPromises=contract.nodes.map(contract=>__awaiter(this,void 0,void 0,(function*(){const modelBinder=this.modelBinderSelector.getModelBinderByContract(contract);return yield modelBinder.contractToModel(contract,bindingContext)})));model.nodes=yield Promise.all(modelPromises)}return model}))}modelToContract(model){var _a;const contract={nodes:[],type:model.type,styles:null===(_a=model.attrs)||void 0===_a?void 0:_a.styles};return model.nodes&&model.nodes.length>0&&model.nodes.forEach(contentItem=>{const modelBinder=this.modelBinderSelector.getModelBinderByModel(contentItem);contract.nodes.push(modelBinder.modelToContract(contentItem))}),contract}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.VideoPlayerModule=void 0;const videoPlayer_1=__webpack_require__(280),videoPlayerModelBinder_1=__webpack_require__(723),videoPlayerViewModelBinder_1=__webpack_require__(724);exports.VideoPlayerModule=class{register(injector){injector.bind("videoPlayer",videoPlayer_1.VideoPlayer),injector.bindToCollection("modelBinders",videoPlayerModelBinder_1.VideoPlayerModelBinder),injector.bindToCollection("viewModelBinders",videoPlayerViewModelBinder_1.VideoPlayerViewModelBinder)}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="inline-block">\r\n    \x3c!-- ko if: sourceUrl --\x3e\r\n    <video data-bind="styled: styles, attr: { controls: controls, autoplay: autoplay }">\r\n        <source data-bind="attr: { src: sourceUrl }">\r\n    </video>\r\n    \x3c!-- /ko --\x3e\r\n    \x3c!-- ko ifnot: sourceUrl --\x3e\r\n    <div class="empty-media" data-bind="styled: styles">\r\n        <svg version="1.1" viewBox="0 0 24 24" width="80px" height="80px">\r\n            <path fill="#ccc" d="M12,0C5.383,0,0,5.383,0,12s5.383,12,12,12s12-5.383,12-12S18.617,0,12,0z M9,17V7l8,5L9,17z"/>\r\n        </svg>\r\n    </div>\r\n    \x3c!-- /ko --\x3e\r\n</div>'},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.VideoPlayerModelBinder=void 0;const videoPlayerModel_1=__webpack_require__(105);exports.VideoPlayerModelBinder=class{canHandleContract(contract){return"video-player"===contract.type}canHandleModel(model){return model instanceof videoPlayerModel_1.VideoPlayerModel}contractToModel(contract){return __awaiter(this,void 0,void 0,(function*(){const model=new videoPlayerModel_1.VideoPlayerModel;return model.controls=contract.controls,model.autoplay=contract.autoplay,model.styles=contract.styles||{appearance:"components/videoPlayer/default"},model.sourceKey=contract.sourceKey,model}))}modelToContract(videoPlayerModel){return{type:"video-player",sourceKey:videoPlayerModel.sourceKey,controls:videoPlayerModel.controls,autoplay:videoPlayerModel.autoplay,styles:videoPlayerModel.styles}}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.VideoPlayerViewModelBinder=void 0;const videoPlayer_1=__webpack_require__(280),videoPlayerModel_1=__webpack_require__(105);exports.VideoPlayerViewModelBinder=class{constructor(eventManager,styleCompiler,mediaPermalinkResolver){this.eventManager=eventManager,this.styleCompiler=styleCompiler,this.mediaPermalinkResolver=mediaPermalinkResolver}modelToViewModel(model,viewModel,bindingContext){return __awaiter(this,void 0,void 0,(function*(){viewModel||(viewModel=new videoPlayer_1.VideoPlayer);let sourceUrl=null;return model.sourceKey&&(sourceUrl=yield this.mediaPermalinkResolver.getUrlByTargetKey(model.sourceKey),sourceUrl||console.warn(`Unable to set video. Media with source key ${model.sourceKey} not found.`)),viewModel.sourceUrl(sourceUrl),viewModel.controls(model.controls),viewModel.autoplay(model.autoplay),model.styles&&viewModel.styles(yield this.styleCompiler.getStyleModelAsync(model.styles,null==bindingContext?void 0:bindingContext.styleManager)),viewModel.widgetBinding={displayName:"Video player",readonly:!!bindingContext&&bindingContext.readonly,model:model,draggable:!0,editor:"video-player-editor",applyChanges:changes=>__awaiter(this,void 0,void 0,(function*(){yield this.modelToViewModel(model,viewModel,bindingContext),this.eventManager.dispatchEvent("onContentUpdate")}))},viewModel}))}canHandleModel(model){return model instanceof videoPlayerModel_1.VideoPlayerModel}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.YoutubePlayerPublishModule=void 0;const youtubeModelBinder_1=__webpack_require__(726),youtubePlayer_1=__webpack_require__(281),youtubePlayerViewModelBinder_1=__webpack_require__(728);exports.YoutubePlayerPublishModule=class{register(injector){injector.bind("youtubePlayer",youtubePlayer_1.YoutubePlayerViewModel),injector.bindToCollection("modelBinders",youtubeModelBinder_1.YoutubeModelBinder),injector.bindToCollection("viewModelBinders",youtubePlayerViewModelBinder_1.YoutubePlayerViewModelBinder)}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.YoutubeModelBinder=void 0;const youtubePlayerModel_1=__webpack_require__(106);exports.YoutubeModelBinder=class{constructor(){this.contractToModel=this.contractToModel.bind(this)}canHandleContract(contract){return"youtube-player"===contract.type}canHandleModel(model){return model instanceof youtubePlayerModel_1.YoutubePlayerModel}contractToModel(contract){return __awaiter(this,void 0,void 0,(function*(){const youtubePlayerModel=new youtubePlayerModel_1.YoutubePlayerModel;return youtubePlayerModel.videoId=contract.videoId||contract.videoKey,youtubePlayerModel.controls=contract.controls,youtubePlayerModel.autoplay=contract.autoplay,youtubePlayerModel.loop=contract.loop,youtubePlayerModel.styles=contract.styles||{appearance:"components/youtubePlayer/default"},youtubePlayerModel}))}modelToContract(model){return{type:"youtube-player",videoId:model.videoId,controls:model.controls,autoplay:model.autoplay,loop:model.loop,styles:model.styles}}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="inline-block">\r\n    \x3c!-- ko if: sourceUrl --\x3e\r\n    <iframe data-bind="attr: { src: sourceUrl }, styled: styles" frameborder="0" allowfullscreen></iframe>\r\n    \x3c!--/ko--\x3e\r\n\r\n    \x3c!-- ko ifnot: sourceUrl --\x3e\r\n    <div class="empty-media" data-bind="styled: styles">\r\n        <svg viewBox="0 0 24 24" xml:space="preserve" width="80" height="80">\r\n            <path fill="#ccc" d="M23.8,7.2c0,0-0.2-1.7-1-2.4c-0.9-1-1.9-1-2.4-1C17,3.6,12,3.6,12,3.6h0c0,0-5,0-8.4,0.2 c-0.5,0.1-1.5,0.1-2.4,1c-0.7,0.7-1,2.4-1,2.4S0,9.1,0,11.1v1.8c0,1.9,0.2,3.9,0.2,3.9s0.2,1.7,1,2.4c0.9,1,2.1,0.9,2.6,1 c1.9,0.2,8.2,0.2,8.2,0.2s5,0,8.4-0.3c0.5-0.1,1.5-0.1,2.4-1c0.7-0.7,1-2.4,1-2.4s0.2-1.9,0.2-3.9v-1.8C24,9.1,23.8,7.2,23.8,7.2z M9.5,15.1l0-6.7l6.5,3.4L9.5,15.1z"/>\r\n        </svg>\r\n    </div>\r\n    \x3c!--/ko--\x3e\r\n</div>'},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.YoutubePlayerViewModelBinder=void 0;const youtubePlayer_1=__webpack_require__(281),youtubePlayerModel_1=__webpack_require__(106);exports.YoutubePlayerViewModelBinder=class{constructor(eventManager,styleCompiler){this.eventManager=eventManager,this.styleCompiler=styleCompiler}modelToViewModel(model,viewModel,bindingContext){return __awaiter(this,void 0,void 0,(function*(){viewModel||(viewModel=new youtubePlayer_1.YoutubePlayerViewModel);const videoId=model.videoId,autoplay=model.autoplay?"1":"0",controls=model.controls?"1":"0",loop=model.loop?"1":"0",url=videoId?`https://www.youtube.com/embed/${videoId}?autoplay=${autoplay}&controls=${controls}&loop=${loop}`:null;if(viewModel.sourceUrl(url),model.styles){const st=yield this.styleCompiler.getStyleModelAsync(model.styles,null==bindingContext?void 0:bindingContext.styleManager);viewModel.styles(st)}const biding={name:"youtube-player",displayName:"Youtube player",readonly:!!bindingContext&&bindingContext.readonly,model:model,draggable:!0,editor:"youtube-player-editor",applyChanges:()=>__awaiter(this,void 0,void 0,(function*(){yield this.modelToViewModel(model,viewModel,bindingContext),this.eventManager.dispatchEvent("onContentUpdate")}))};return viewModel.widgetBinding=biding,viewModel}))}canHandleModel(model){return model instanceof youtubePlayerModel_1.YoutubePlayerModel}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.VideoPlayerDesignModule=void 0;const styleGuideCard_html_1=__webpack_require__(730),videoPlayerEditor_1=__webpack_require__(731),videoPlayerHandlers_1=__webpack_require__(733);exports.VideoPlayerDesignModule=class{register(injector){injector.bind("videoPlayerEditor",videoPlayerEditor_1.VideoPlayerEditor);const styleGroup={key:"videoPlayer",name:"components_videoPlayer",groupName:"Video Player",selectorTemplate:void 0,styleTemplate:styleGuideCard_html_1.default};injector.bindInstanceToCollection("styleGroups",styleGroup),injector.bindToCollection("widgetHandlers",videoPlayerHandlers_1.VideoPlayerHandlers,"videoHandler"),injector.bindToCollection("dropHandlers",videoPlayerHandlers_1.VideoPlayerHandlers,"videoHandler")}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="empty-media" data-bind="stylePreview: variation">\r\n    <svg version="1.1" viewBox="0 0 24 24" width="80px" height="80px">\r\n        <path fill="#ccc" d="M12,0C5.383,0,0,5.383,0,12s5.383,12,12,12s12-5.383,12-12S18.617,0,12,0z M9,17V7l8,5L9,17z"/>\r\n    </svg>\r\n</div>'},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.VideoPlayerEditor=void 0;const ko=__webpack_require__(0),Objects=__webpack_require__(30),videoPlayerEditor_html_1=__webpack_require__(732),decorators_1=__webpack_require__(2),videoPlayerModel_1=__webpack_require__(105),styleService_1=__webpack_require__(20),consts_1=__webpack_require__(17),styles_1=__webpack_require__(47),events_1=__webpack_require__(46);let VideoPlayerEditor=class{constructor(viewManager,eventManager,styleService,mediaPermalinkResolver){this.viewManager=viewManager,this.eventManager=eventManager,this.styleService=styleService,this.mediaPermalinkResolver=mediaPermalinkResolver,this.sourceUrl=ko.observable(),this.controls=ko.observable(!0),this.autoplay=ko.observable(!1),this.appearanceStyles=ko.observableArray(),this.appearanceStyle=ko.observable(),this.sizeConfig=ko.observable(),this.mimeType="video/mp4"}initialize(){return __awaiter(this,void 0,void 0,(function*(){let sourceUrl;this.model.sourceKey&&(sourceUrl=yield this.mediaPermalinkResolver.getUrlByTargetKey(this.model.sourceKey)),this.sourceUrl(sourceUrl);const variations=yield this.styleService.getComponentVariations("videoPlayer");this.appearanceStyles(variations.filter(x=>"appearance"===x.category)),this.updateObservables(),this.eventManager.addEventListener(events_1.CommonEvents.onViewportChange,this.updateObservables),this.controls.extend(consts_1.ChangeRateLimit).subscribe(this.applyChanges),this.autoplay.extend(consts_1.ChangeRateLimit).subscribe(this.applyChanges),this.appearanceStyle.extend(consts_1.ChangeRateLimit).subscribe(this.onAppearanceChange)}))}updateObservables(){var _a,_b;const viewport=this.viewManager.getViewport();this.controls(this.model.controls),this.autoplay(this.model.autoplay);const sizeStyles=styles_1.StyleHelper.getPluginConfigForLocalStyles(this.model.styles,"size",viewport);this.sizeConfig(sizeStyles),this.appearanceStyle(null===(_b=null===(_a=this.model)||void 0===_a?void 0:_a.styles)||void 0===_b?void 0:_b.appearance)}onMediaSelected(media){media?(this.model.sourceKey=media.key,this.sourceUrl(media.downloadUrl)):(this.model.sourceKey=void 0,this.sourceUrl(null)),this.onChange(this.model)}onSizeChange(pluginConfig){const viewport=this.viewManager.getViewport();styles_1.StyleHelper.setPluginConfigForLocalStyles(this.model.styles,"size",pluginConfig,viewport),this.onChange(this.model)}onAppearanceChange(variationKey){Objects.setValue("styles/appearance",this.model,variationKey),this.onChange(this.model)}applyChanges(){this.model.controls=this.controls(),this.model.autoplay=this.autoplay(),this.onChange(this.model)}};__decorate([decorators_1.Param(),__metadata("design:type",videoPlayerModel_1.VideoPlayerModel)],VideoPlayerEditor.prototype,"model",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],VideoPlayerEditor.prototype,"onChange",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],VideoPlayerEditor.prototype,"initialize",null),VideoPlayerEditor=__decorate([decorators_1.Component({selector:"video-player-editor",template:videoPlayerEditor_html_1.default}),__metadata("design:paramtypes",[Object,Object,styleService_1.StyleService,Object])],VideoPlayerEditor),exports.VideoPlayerEditor=VideoPlayerEditor},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<fieldset class="form" data-bind="scrollable: true">\r\n    <div class="form-group form-group-collapsible">\r\n        <label class="form-label">\r\n            <a href="#" class="form-group-toggle" title="Toggle section" data-bind="collapse: \'#sourceCollapse\'"></a>\r\n            <b>Source</b>\r\n        </label>\r\n        <div id="sourceCollapse" class="collapse form-group-collapse">\r\n            <div class="dropzone">\r\n                <a href="#" class="dropzone-showbox" data-bind="balloon: { component: { name: \'media-selector\', params: { onSelect: $component.onMediaSelected, mimeType: $component.mimeType } }, position: \'right\' }">\r\n                    \x3c!-- ko if: sourceUrl --\x3e\r\n                    <video class="fit" controls>\r\n                        <source data-bind="attr: { src: sourceUrl }">\r\n                    </video>\r\n                    \x3c!-- /ko --\x3e\r\n                </a>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="form-group form-group-collapsible">\r\n        <label class="form-label">\r\n            <a href="#" class="form-group-toggle" title="Toggle section" data-bind="collapse: \'#miscellaneousCollapse\'"></a>\r\n            <b>Miscellaneous</b>\r\n        </label>\r\n        <div id="miscellaneousCollapse" class="collapse form-group-collapse">\r\n            <div class="form-group">\r\n                <label for="appearanceStyle" class="form-label">\r\n                    Appearance\r\n                    <button class="btn btn-info" type="button" data-bind="tooltip: \'Predefined appearance from style guide.\'"></button>\r\n                </label>\r\n                <select id="appearanceStyle" class="form-control" data-bind="options: appearanceStyles, value: appearanceStyle, optionsText: \'displayName\', optionsValue: \'key\'"></select>\r\n            </div>\r\n            <label for="controls" class="form-label">\r\n                <input type="checkbox" id="controls" data-bind="checked: controls">Controls\r\n            </label>\r\n            <label for="autoplay" class="form-label">\r\n                <input type="checkbox" id="autoplay" data-bind="checked: autoplay">Autoplay\r\n            </label>\r\n        </div>\r\n    </div>\r\n    <size-editor params="{ features: \'height,width\', sizeConfig: sizeConfig, onUpdate: onSizeChange }"></size-editor>\r\n</fieldset>'},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.VideoPlayerHandlers=void 0;const MediaUtils=__webpack_require__(135),videoPlayerModel_1=__webpack_require__(105);class VideoPlayerHandlers{constructor(mediaService){this.mediaService=mediaService}matches(filename){return!(filename&&![".webm",".mp4",".m4v",".ogg",".ogv",".ogx",".ogm"].some(e=>filename.endsWith(e)))}getWidgetOrderFromSourceUrlOrFile(source){return __awaiter(this,void 0,void 0,(function*(){let sourceUrl;sourceUrl=source?source instanceof File||"File"===source.constructor.name?yield MediaUtils.getVideoThumbnailAsDataUrl(source):source:null;return{name:"video-player",displayName:"Video player",category:"Media",iconClass:"paperbits-action-74",requires:["html","js"],createModel:()=>__awaiter(this,void 0,void 0,(function*(){return new videoPlayerModel_1.VideoPlayerModel}))}}))}getWidgetOrderByConfig(sourceUrl){return __awaiter(this,void 0,void 0,(function*(){return yield this.getWidgetOrderFromSourceUrlOrFile(sourceUrl)}))}getWidgetOrderByUrl(url){return __awaiter(this,void 0,void 0,(function*(){return yield this.getWidgetOrderByConfig(url)}))}getContentDescriptorFromMedia(media){if(!this.matches(media.fileName))return null;return{title:"Video recording",iconUrl:VideoPlayerHandlers.DefaultThumbnailUri,description:media.description,getWidgetOrder:()=>__awaiter(this,void 0,void 0,(function*(){const mediaContract=yield this.mediaService.getMediaByKey(media.key);return yield this.getWidgetOrderFromSourceUrlOrFile(mediaContract.permalink)}))}}getContentDescriptorFromDataTransfer(dataTransfer){if(!this.matches(dataTransfer.name))return null;const source=dataTransfer.source,getThumbnailPromise=()=>__awaiter(this,void 0,void 0,(function*(){return dataTransfer.source instanceof File||"File"===dataTransfer.source.constructor.name?yield MediaUtils.getVideoThumbnailAsDataUrl(source):dataTransfer.source}));return{title:"Video recording",description:dataTransfer.name,getWidgetOrder:()=>__awaiter(this,void 0,void 0,(function*(){return yield this.getWidgetOrderByUrl(source)})),iconUrl:VideoPlayerHandlers.DefaultThumbnailUri,getPreviewUrl:getThumbnailPromise,getThumbnailUrl:getThumbnailPromise,uploadables:[source]}}getWidgetOrder(){return __awaiter(this,void 0,void 0,(function*(){return yield this.getWidgetOrderByConfig(null)}))}}exports.VideoPlayerHandlers=VideoPlayerHandlers,VideoPlayerHandlers.DefaultThumbnailUri="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgd2lkdGg9IjQ4cHgiIGhlaWdodD0iNDhweCIgdmlld0JveD0iMCAwIDQ4IDQ4Ij48ZyAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC41LCAwLjUpIj4KPHJlY3QgeD0iMiIgeT0iNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNDQ0NDQ0IiBzdHJva2Utd2lkdGg9IjMiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgd2lkdGg9IjQ0IiBoZWlnaHQ9IjQwIiBzdHJva2UtbGluZWpvaW49Im1pdGVyIi8+Cjxwb2x5Z29uIGRhdGEtY29sb3I9ImNvbG9yLTIiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzQ0NDQ0NCIgc3Ryb2tlLXdpZHRoPSIzIiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50cz0iJiMxMDsmIzk7MTcsMTQgMzMsMjQgMTcsMzQgIiBzdHJva2UtbGluZWpvaW49Im1pdGVyIi8+CjwvZz48L3N2Zz4="},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PictureDesignModule=void 0;const styleGuideCard_html_1=__webpack_require__(735),pictureEditor_1=__webpack_require__(736),pictureHandlers_1=__webpack_require__(738);exports.PictureDesignModule=class{register(injector){injector.bind("pictureEditor",pictureEditor_1.PictureEditor);const styleGroup={key:"picture",name:"components_picture",groupName:"Pictures",selectorTemplate:'<img src="https://cdn.paperbits.io/images/placeholder-340x190.jpg" alt="Picture" data-bind="css: classNames" width="280px" height="190px" /><div data-bind="text: displayName"></div>',styleTemplate:styleGuideCard_html_1.default};injector.bindInstanceToCollection("styleGroups",styleGroup),injector.bindToCollection("widgetHandlers",pictureHandlers_1.PictureHandlers,"pictureWidgetHandler"),injector.bindToCollection("dropHandlers",pictureHandlers_1.PictureHandlers,"pictureDropHandler")}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="empty-media" data-bind="stylePreview: variation">\r\n    <svg viewBox="0 0 24 24" width="80" height="80">\r\n        <g fill="#ccc">\r\n            <path d="M23,2H1A1,1,0,0,0,0,3V21a1,1,0,0,0,1,1H23a1,1,0,0,0,1-1V3A1,1,0,0,0,23,2ZM22,4V14.3L17.759,9.35A1,1,0,0,0,17.005,9a.879.879,0,0,0-.757.342l-6.3,7.195L6.707,13.293A.988.988,0,0,0,5.955,13a1,1,0,0,0-.723.358L2,17.238V4Z"/>\r\n            <circle cx="9" cy="8" r="2"/>\r\n        </g>\r\n    </svg>\r\n</div>'},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PictureEditor=void 0;const ko=__webpack_require__(0),pictureEditor_html_1=__webpack_require__(737),decorators_1=__webpack_require__(2),background_1=__webpack_require__(82),pictureModel_1=__webpack_require__(102),styleService_1=__webpack_require__(20),consts_1=__webpack_require__(17);let PictureEditor=class{constructor(styleService,mediaPermalinkResolver){this.styleService=styleService,this.mediaPermalinkResolver=mediaPermalinkResolver,this.caption=ko.observable(),this.hyperlink=ko.observable(),this.sourceKey=ko.observable(),this.background=ko.observable(),this.hyperlinkTitle=ko.computed(()=>this.hyperlink()?this.hyperlink().title:"Add a link..."),this.sizeConfig=ko.observable(),this.appearanceStyles=ko.observableArray(),this.appearanceStyle=ko.observable()}initialize(){var _a;return __awaiter(this,void 0,void 0,(function*(){if(this.model.sourceKey){const background=new background_1.BackgroundModel;background.sourceKey=this.model.sourceKey,background.sourceUrl=yield this.mediaPermalinkResolver.getUrlByTargetKey(this.model.sourceKey),this.background(background),this.sourceKey(this.model.sourceKey)}this.caption(this.model.caption),this.hyperlink(this.model.hyperlink),this.sizeConfig({width:this.model.width,height:this.model.height});const variations=yield this.styleService.getComponentVariations("picture");this.appearanceStyles(variations.filter(x=>"appearance"===x.category)),this.appearanceStyle(null===(_a=this.model.styles)||void 0===_a?void 0:_a.appearance),this.caption.extend(consts_1.ChangeRateLimit).subscribe(this.applyChanges),this.sizeConfig.extend(consts_1.ChangeRateLimit).subscribe(this.applyChanges),this.appearanceStyle.extend(consts_1.ChangeRateLimit).subscribe(this.applyChanges)}))}onVariationSelected(snippet){snippet&&this.appearanceStyle(snippet)}applyChanges(){this.model.caption=this.caption(),this.model.hyperlink=this.hyperlink(),this.model.sourceKey=this.sourceKey();this.appearanceStyle()&&(this.model.styles={appearance:this.appearanceStyle()}),this.onChange(this.model)}onMediaSelected(media){if(media){this.sourceKey(media.key);const background=new background_1.BackgroundModel;background.sourceKey=media.key,background.sourceUrl=media.downloadUrl,background.size="contain",background.position="center center",this.background(background),this.model.width||this.model.height||this.updateSizeConfigForSelectedMedia(media)}else this.background(null),this.sourceKey(null);this.applyChanges()}updateSizeConfigForSelectedMedia(media){if(!media.downloadUrl)return;const selectedMedia=new Image;selectedMedia.src=media.downloadUrl,this.sizeConfig({width:selectedMedia.width,height:selectedMedia.height})}onHyperlinkChange(hyperlink){this.hyperlink(hyperlink),this.applyChanges()}onSizeChange(sizeConfig){this.model.width=sizeConfig.width,this.model.height=sizeConfig.height,this.applyChanges()}};__decorate([decorators_1.Param(),__metadata("design:type",pictureModel_1.PictureModel)],PictureEditor.prototype,"model",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],PictureEditor.prototype,"onChange",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],PictureEditor.prototype,"initialize",null),PictureEditor=__decorate([decorators_1.Component({selector:"picture-editor",template:pictureEditor_html_1.default}),__metadata("design:paramtypes",[styleService_1.StyleService,Object])],PictureEditor),exports.PictureEditor=PictureEditor},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<fieldset class="form" data-bind="scrollable: true">\r\n    <div class="form-group form-group-collapsible">\r\n        <label class="form-label">\r\n            <a href="#" class="form-group-toggle" title="Toggle section" data-bind="collapse: \'#sourceCollapse\'" aria-label="Toggle \'main\' section"></a>\r\n            <b>Main</b>\r\n        </label>\r\n        <div id="sourceCollapse" class="collapse form-group-collapse">\r\n            <div class="dropzone">\r\n                <label for="source" class="form-label">\r\n                    Source\r\n                    <button class="btn btn-info" type="button" aria-label="Picture source" data-bind="tooltip: \'Source of the picture. To change, click on preview area below and select a picture from media libaray.\'"></button>\r\n                </label>\r\n                <a href="#" aria-labelledby="source" role="button" class="dropzone-showbox" data-bind="balloon: { position: \'right\', component: { name: \'media-selector\', params: { mimeType: \'image/\', onSelect: $component.onMediaSelected } } }, focus: true">\r\n                    <div class="fit" role="button" data-bind="background: background"></div>\r\n                </a>\r\n            </div>\r\n\r\n            <div class="form-group">\r\n                <label for="caption" class="form-label">\r\n                    Caption\r\n                    <button class="btn btn-info" type="button" aria-label="Caption" data-bind="tooltip: \'An alternate text for an image\'"></button>\r\n                </label>\r\n                <input type="text" id="caption" class="form-control" data-bind="textInput: caption" maxlength="256">\r\n            </div>\r\n\r\n            <div class="form-group">\r\n                <label for="hyperlink" class="form-label">\r\n                    Link to\r\n                    <button class="btn btn-info" type="button" data-bind="tooltip: \'A link to be navigated on click.\'"></button>\r\n                </label>\r\n                <div class="input-group">\r\n                    <input id="hyperlink" class="form-control" readonly="readonly" data-bind="value: hyperlinkTitle">\r\n                    <button class="btn input-group-btn" aria-label="Select hyperlink" data-bind="balloon: { position: \'right\', component: { name: \'hyperlink-selector\', params: { hyperlink: $component.hyperlink, onChange: $component.onHyperlinkChange } } }">\r\n                        <i class="paperbits-icon paperbits-link-69-2"></i>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <size-editor params="{ features: \'height,width\', sizeConfig: sizeConfig, onUpdate: onSizeChange }"></size-editor>\r\n\r\n    <div class="form-group form-group-collapsible">\r\n        <label class="form-label">\r\n            <a href="#" class="form-group-toggle" title="Toggle section" data-bind="collapse: \'#miscellaneousCollapse\'" aria-label="Toggle \'Styling\' section"></a>\r\n            <b>Styling</b>\r\n        </label>\r\n        <div id="miscellaneousCollapse" class="collapse form-group-collapse">\r\n            <div class="form-group">\r\n                <label for="appearanceStyle" class="form-label">\r\n                    Appearance\r\n                    <button class="btn btn-info" type="button" data-bind="tooltip: \'Predefined appearance from style guide.\'"></button>\r\n                </label>\r\n                \x3c!-- <div class="input-group">\r\n                    <a href="#" class="form-control" data-bind="text: appearanceStyle() && appearanceStyle().displayName, balloon: { component: { name: \'style-variation-selector\', params: { snippetType: \'components/picture\', onSelect: $component.onVariationSelected } } }">\r\n                    </a>\r\n                </div> --\x3e\r\n                <select id="appearanceStyle" class="form-control" data-bind="options: appearanceStyles, value: appearanceStyle, optionsText: \'displayName\', optionsValue: \'key\'"></select> \r\n            </div>\r\n        </div>\r\n    </div>\r\n</fieldset>'},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PictureHandlers=void 0;const Utils=__webpack_require__(6),pictureModel_1=__webpack_require__(102);class PictureHandlers{getWidgetOrderByConfig(sourceUrl,caption){return __awaiter(this,void 0,void 0,(function*(){return{name:"picture",displayName:"Picture",category:"Media",iconClass:"paperbits-image-2",requires:["html"],createModel:()=>__awaiter(this,void 0,void 0,(function*(){const pictureModel=new pictureModel_1.PictureModel;return pictureModel.sourceKey=sourceUrl,pictureModel.caption=caption,pictureModel}))}}))}getWidgetOrder(){return __awaiter(this,void 0,void 0,(function*(){return yield this.getWidgetOrderByConfig(null,"Picture")}))}getContentDescriptorFromMedia(media){return PictureHandlers.isMediaFile(media)?{title:"Picture",description:media.description,getWidgetOrder:()=>__awaiter(this,void 0,void 0,(function*(){return yield this.getWidgetOrderByConfig(media.downloadUrl,media.fileName)}))}:null}getContentDescriptorFromDataTransfer(dataTransfer){if(!dataTransfer.name||!PictureHandlers.imageFileExtensions.some(e=>dataTransfer.name.endsWith(e)))return null;const source=dataTransfer.source,droppedSourceUrl=URL.createObjectURL(source),getThumbnailPromise=()=>new Promise(resolve=>__awaiter(this,void 0,void 0,(function*(){resolve(yield Utils.readBlobAsDataUrl(source))})));return{title:"Picture",description:dataTransfer.name,getWidgetOrder:()=>__awaiter(this,void 0,void 0,(function*(){return yield this.getWidgetOrderByConfig(droppedSourceUrl,dataTransfer.name)})),getPreviewUrl:getThumbnailPromise,getThumbnailUrl:getThumbnailPromise,uploadables:[dataTransfer.source]}}static isMediaFile(media){return media.mimeType&&-1!==media.mimeType.indexOf("image")||media.fileName&&this.imageFileExtensions.some(e=>media.fileName.endsWith(e))}}exports.PictureHandlers=PictureHandlers,PictureHandlers.imageFileExtensions=[".jpg",".jpeg",".png",".svg",".gif"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.YoutubePlayerDesignModule=void 0;const youtubePlayerEditor_1=__webpack_require__(740),youtubeHandlers_1=__webpack_require__(742);exports.YoutubePlayerDesignModule=class{register(injector){injector.bind("youtubeEditor",youtubePlayerEditor_1.YoutubePlayerEditor),injector.bindToCollection("widgetHandlers",youtubeHandlers_1.YoutubeHandlers,"youtubeHandler"),injector.bindToCollection("dropHandlers",youtubeHandlers_1.YoutubeHandlers,"youtubeHandler")}}},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.YoutubePlayerEditor=void 0;const ko=__webpack_require__(0),youtubePlayerEditor_html_1=__webpack_require__(741),decorators_1=__webpack_require__(2),styles_1=__webpack_require__(47),youtubePlayerModel_1=__webpack_require__(106),consts_1=__webpack_require__(17),events_1=__webpack_require__(46);let YoutubePlayerEditor=class{constructor(viewManager,eventManager){this.viewManager=viewManager,this.eventManager=eventManager,this.videoId=ko.observable(),this.controls=ko.observable(),this.autoplay=ko.observable(),this.loop=ko.observable(),this.sizeConfig=ko.observable()}initialize(){this.updateObservables(),this.eventManager.addEventListener(events_1.CommonEvents.onViewportChange,this.updateObservables),this.videoId.extend(consts_1.ChangeRateLimit).subscribe(this.applyChanges),this.controls.extend(consts_1.ChangeRateLimit).subscribe(this.applyChanges),this.autoplay.extend(consts_1.ChangeRateLimit).subscribe(this.applyChanges),this.loop.extend(consts_1.ChangeRateLimit).subscribe(this.applyChanges)}updateObservables(){const viewport=this.viewManager.getViewport(),sizeStyles=styles_1.StyleHelper.getPluginConfigForLocalStyles(this.model.styles,"size",viewport);this.sizeConfig(sizeStyles),this.videoId(this.model.videoId),this.controls(this.model.controls),this.autoplay(this.model.autoplay),this.loop(this.model.loop)}onSizeChange(pluginConfig){const viewport=this.viewManager.getViewport();styles_1.StyleHelper.setPluginConfigForLocalStyles(this.model.styles,"size",pluginConfig,viewport),this.applyChanges()}applyChanges(){this.model.videoId=this.videoId(),this.model.controls=this.controls(),this.model.autoplay=this.autoplay(),this.model.loop=this.loop(),this.onChange(this.model)}};__decorate([decorators_1.Param(),__metadata("design:type",youtubePlayerModel_1.YoutubePlayerModel)],YoutubePlayerEditor.prototype,"model",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],YoutubePlayerEditor.prototype,"onChange",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],YoutubePlayerEditor.prototype,"initialize",null),YoutubePlayerEditor=__decorate([decorators_1.Component({selector:"youtube-player-editor",template:youtubePlayerEditor_html_1.default}),__metadata("design:paramtypes",[Object,Object])],YoutubePlayerEditor),exports.YoutubePlayerEditor=YoutubePlayerEditor},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<fieldset class="form" data-bind="scrollable: true">\r\n    <div class="form-group form-group-collapsible">\r\n        <label class="form-label">\r\n            <a href="#" class="form-group-toggle" title="Toggle section" data-bind="collapse: \'#sourceCollapse\'"></a>\r\n            <b>Source</b>\r\n        </label>\r\n        <div id="sourceCollapse" class="collapse form-group-collapse">\r\n            <label for="videoId" class="form-label">Video ID</label>\r\n            <div class="input-group">\r\n                <input type="text" id="videoId" class="form-control" data-bind="textInput: videoId" maxlength="500" placeholder="e.g. ScMzIvxBSi4">\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="form-group form-group-collapsible">\r\n        <label class="form-label">\r\n            <a href="#" class="form-group-toggle" title="Toggle section" data-bind="collapse: \'#miscellaneousCollapse\'"></a>\r\n            <b>Miscellaneous</b>\r\n        </label>\r\n        <div id="miscellaneousCollapse" class="collapse form-group-collapse">\r\n            <label for="controls" class="form-label">\r\n                <input type="checkbox" id="controls" data-bind="checked: controls">Controls\r\n            </label>\r\n            <label for="autoplay" class="form-label">\r\n                <input type="checkbox" id="autoplay" data-bind="checked: autoplay">Autoplay\r\n            </label>\r\n            <label for="loop" class="form-label">\r\n                <input type="checkbox" id="loop" data-bind="checked: loop">Loop\r\n            </label>\r\n        </div>\r\n    </div>\r\n    <size-editor params="{ features: \'height,width\', sizeConfig: sizeConfig, onUpdate: onSizeChange }"></size-editor>\r\n</fieldset>'},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.YoutubeHandlers=void 0;const youtubePlayerModel_1=__webpack_require__(106);exports.YoutubeHandlers=class{getWidgetOrderByConfig(youtubeClipId){return __awaiter(this,void 0,void 0,(function*(){return{name:"youtube-player",displayName:"Youtube player",category:"Media",iconClass:"paperbits-player-48",requires:["html","js"],createModel:()=>__awaiter(this,void 0,void 0,(function*(){const youtubePlayerModel=new youtubePlayerModel_1.YoutubePlayerModel;return youtubePlayerModel.videoId=youtubeClipId,youtubePlayerModel}))}}))}getWidgetOrder(){return __awaiter(this,void 0,void 0,(function*(){return this.getWidgetOrderByConfig()}))}getContentDescriptorFromDataTransfer(dataTransfer){const videoId=this.getVideoId(dataTransfer);if(!videoId)return;const getThumbnailPromise=()=>Promise.resolve(`https://img.youtube.com/vi/${videoId}/0.jpg`);return{title:"Youtube player",description:"",getWidgetOrder:()=>this.getWidgetOrderByConfig(videoId),getPreviewUrl:getThumbnailPromise,getThumbnailUrl:getThumbnailPromise}}getVideoId(dataTransfer){const source=dataTransfer.source;if(source&&"string"==typeof source){const lower=source.toLowerCase();if(lower.startsWith("https://www.youtube.com")||lower.startsWith("http://www.youtube.com")){const videoId=new RegExp("[?&](?:v=)(.*?)(?:$|&)").exec(source);return videoId?videoId[1]:void 0}}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ButtonEditorModule=void 0;const buttonEditor_1=__webpack_require__(744),buttonHandlers_1=__webpack_require__(746);exports.ButtonEditorModule=class{register(injector){injector.bind("buttonEditor",buttonEditor_1.ButtonEditor),injector.bindToCollection("widgetHandlers",buttonHandlers_1.ButtonHandlers,"buttonHandler");const styleGroup={key:"button",name:"components_button",groupName:"Buttons",selectorTemplate:'<a href="#" data-bind="css: classNames" style="display: inline-block">Button</a>',styleTemplate:'<a href="#" data-bind="stylePreview: variation.key" style="display: inline-block">Button</button>'};injector.bindInstanceToCollection("styleGroups",styleGroup)}}},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ButtonEditor=void 0;const ko=__webpack_require__(0),buttonEditor_html_1=__webpack_require__(745),styles_1=__webpack_require__(47),buttonModel_1=__webpack_require__(95),decorators_1=__webpack_require__(2);let ButtonEditor=class{constructor(styleService){this.styleService=styleService,this.label=ko.observable(),this.appearanceStyles=ko.observableArray(),this.appearanceStyle=ko.observable(),this.hyperlink=ko.observable(),this.hyperlinkTitle=ko.observable()}initialize(){var _a;return __awaiter(this,void 0,void 0,(function*(){if(this.label(this.model.label),this.model.styles){const variations=yield this.styleService.getComponentVariations("button");this.appearanceStyles(variations.filter(x=>"appearance"===x.category)),this.appearanceStyle(null===(_a=this.model.styles)||void 0===_a?void 0:_a.appearance)}this.hyperlink(this.model.hyperlink),this.onHyperlinkChange(this.model.hyperlink),this.appearanceStyle.subscribe(this.applyChanges),this.label.subscribe(this.applyChanges),this.hyperlink.subscribe(this.applyChanges)}))}onHyperlinkChange(hyperlink){hyperlink?(this.hyperlinkTitle(hyperlink.title),this.hyperlink(hyperlink)):this.hyperlinkTitle("Add a link...")}onRoleSelect(roles){this.model.roles=roles,this.applyChanges()}applyChanges(){this.model.label=this.label(),this.model.hyperlink=this.hyperlink(),this.model.styles={appearance:this.appearanceStyle()},this.onChange(this.model)}};__decorate([decorators_1.Param(),__metadata("design:type",buttonModel_1.ButtonModel)],ButtonEditor.prototype,"model",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],ButtonEditor.prototype,"onChange",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],ButtonEditor.prototype,"initialize",null),ButtonEditor=__decorate([decorators_1.Component({selector:"button-editor",template:buttonEditor_html_1.default}),__metadata("design:paramtypes",[styles_1.StyleService])],ButtonEditor),exports.ButtonEditor=ButtonEditor},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<fieldset class="form" data-bind="scrollable: true">\r\n    <div class="form-group">\r\n        <label class="form-label">\r\n            Label\r\n            <button class="btn btn-info" type="button" data-bind="tooltip: \'Text on the button\'"></button>\r\n        </label>\r\n        <input type="text" class="form-control" data-bind="textInput: label" maxlength="256">\r\n    </div>\r\n\r\n    <div class="form-group">\r\n        <label class="form-label">\r\n            Link to\r\n            <button class="btn btn-info" type="button" data-bind="tooltip: \'A link to be navigated on click.\'"></button>\r\n        </label>\r\n        <div class="input-group">\r\n            <a href="#" class="form-control" data-bind="text: hyperlinkTitle, balloon: { component: { name: \'hyperlink-selector\', params: { hyperlink: $component.hyperlink, onChange: $component.onHyperlinkChange } } }">\r\n            </a>\r\n            <div class="input-group-addon">\r\n                <i class="paperbits-icon paperbits-link-69-2"></i>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="form-group">\r\n        <label for="appearanceStyle" class="form-label">\r\n            Appearance\r\n            <button class="btn btn-info" type="button" data-bind="tooltip: \'Predefined appearance from style guide.\'"></button>\r\n        </label>\r\n        \x3c!-- <div class="input-group">\r\n            <a href="#" class="form-control" data-bind="text: appearanceStyle() && appearanceStyle().displayName, balloon: { component: { name: \'style-variation-selector\', params: { snippetType: \'components/button\', onSelect: $component.onVariationSelected } } }">\r\n            </a>\r\n        </div> --\x3e\r\n        <select id="appearanceStyle" class="form-control" data-bind="options: appearanceStyles, value: appearanceStyle, optionsText: \'displayName\', optionsValue: \'key\'"></select>\r\n    </div>\r\n\r\n    \x3c!-- <div class="form-group">\r\n        <label for="sizeStyle" class="form-label">\r\n            Size\r\n            <button class="btn btn-info" type="button" data-bind="tooltip: \'Predefined size from style guide.\'"></button>\r\n        </label>\r\n        <select id="sizeStyle" class="form-control" data-bind="options: sizeStyles, value: sizeStyle, optionsText: \'displayName\', optionsValue: \'key\'"></select>\r\n    </div> --\x3e\r\n\r\n    <role-input params="{ selection: model.roles, onChange: onRoleSelect }"></role-input>\r\n</fieldset>'},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ButtonHandlers=void 0;const buttonModel_1=__webpack_require__(95);exports.ButtonHandlers=class{getWidgetOrder(){return __awaiter(this,void 0,void 0,(function*(){return{name:"button",displayName:"Button",iconClass:"paperbits-button-2",requires:[],createModel:()=>__awaiter(this,void 0,void 0,(function*(){return new buttonModel_1.ButtonModel}))}}))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TestimonialsEditorModule=void 0;const testimonialsEditor_1=__webpack_require__(748),testimonialsHandlers_1=__webpack_require__(274);exports.TestimonialsEditorModule=class{register(injector){injector.bind("testimonialsEditor",testimonialsEditor_1.TestimonialsEditor),injector.bindToCollection("widgetHandlers",testimonialsHandlers_1.TestimonialsHandlers,"testimonialsHandler")}}},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.TestimonialsEditor=void 0;const ko=__webpack_require__(0),testimonialsEditor_html_1=__webpack_require__(749),decorators_1=__webpack_require__(2),testimonialsModel_1=__webpack_require__(103);let TestimonialsEditor=class{constructor(){this.textContent=ko.observable(),this.author=ko.observable(),this.authorTitle=ko.observable(),this.starsCount=ko.observable().extend({max:10}),this.starsMaximum=ko.observable().extend({max:10})}initialize(){this.textContent(this.model.textContent),this.starsCount(this.model.starsCount),this.starsMaximum(this.model.allStarsCount),this.author(this.model.author),this.authorTitle(this.model.authorTitle),this.textContent.subscribe(this.applyChanges),this.starsCount.subscribe(this.applyChanges),this.starsMaximum.subscribe(this.applyChanges),this.author.subscribe(this.applyChanges),this.authorTitle.subscribe(this.applyChanges)}applyChanges(){this.model.textContent=this.textContent(),this.model.starsCount=+this.starsCount();const count=+this.starsMaximum();this.model.allStarsCount=count<=10?count:10,this.model.author=this.author(),this.model.authorTitle=this.authorTitle(),this.onChange(this.model)}};__decorate([decorators_1.Param(),__metadata("design:type",testimonialsModel_1.TestimonialsModel)],TestimonialsEditor.prototype,"model",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],TestimonialsEditor.prototype,"onChange",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],TestimonialsEditor.prototype,"initialize",null),TestimonialsEditor=__decorate([decorators_1.Component({selector:"testimonials-editor",template:testimonialsEditor_html_1.default}),__metadata("design:paramtypes",[])],TestimonialsEditor),exports.TestimonialsEditor=TestimonialsEditor},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<fieldset class="form" data-bind="scrollable: true">\r\n    <div class="form-group form-group-collapsible">\r\n        <label class="form-label">\r\n            <a href="#" class="form-group-toggle" title="Toggle section" data-bind="collapse: \'#propertiesCollapse\'"></a>\r\n            <b>Miscellaneous</b>\r\n        </label>\r\n        <div id="propertiesCollapse" class="collapse form-group-collapse">\r\n            <div class="form-group">\r\n                <label for="textContent" class="form-label">Message text</label>\r\n                <div class="input-group">\r\n                    <input type="text" id="textContent" class="form-control" data-bind="textInput: textContent" maxlength="3000">\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <label for="starsMaximum" class="form-label">All stars (max 10)</label>\r\n                <div class="input-group">\r\n                    <input type="number" id="starsMaximum" class="form-control" data-bind="textInput: starsMaximum" min="0" max="10">\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <label for="starsCount" class="form-label">Stars selected</label>\r\n                <div class="input-group">\r\n                    <input type="number" id="starsCount" class="form-control" data-bind="textInput: starsCount" min="0" max="10">\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <label for="author" class="form-label">Author name</label>\r\n                <div class="input-group">\r\n                    <input type="text" id="author" class="form-control" data-bind="textInput: author" maxlength="500" placeholder="e.g. John Doe">\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <label for="authorTitle" class="form-label">Author title</label>\r\n                <div class="input-group">\r\n                    <input type="text" id="authorTitle" class="form-control" data-bind="textInput: authorTitle" maxlength="1000" placeholder="e.g. CEO at Company">\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</fieldset>'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ColumnEditorModule=void 0;const columnEditor_1=__webpack_require__(751),columnHandlers_1=__webpack_require__(228);exports.ColumnEditorModule=class{register(injector){injector.bind("columnEditor",columnEditor_1.ColumnEditor),injector.bindToCollection("widgetHandlers",columnHandlers_1.ColumnHandlers,"columnHandler")}}},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ColumnEditor=void 0;const ko=__webpack_require__(0),columnEditor_html_1=__webpack_require__(752),decorators_1=__webpack_require__(2),columnModel_1=__webpack_require__(99);let ColumnEditor=class{constructor(viewManager){this.viewManager=viewManager,this.alignment=ko.observable(),this.verticalAlignment=ko.observable(),this.horizontalAlignment=ko.observable(),this.scrollOnOverlow=ko.observable(),this.order=ko.observable()}initialize(){const viewport=this.viewManager.getViewport(),alignment=this.determineAlignment(viewport,this.model);this.alignment(alignment),this.scrollOnOverlow("scroll"===this.model.overflowY);const directions=this.alignment().split(" ");this.verticalAlignment(directions[0]),this.horizontalAlignment(directions[1]);const order=this.determineOrder(viewport,this.model);this.order(order),this.alignment.subscribe(this.applyChanges),this.scrollOnOverlow.subscribe(this.applyChanges),this.order.subscribe(this.applyChanges)}applyChanges(){switch(this.viewManager.getViewport()){case"xl":this.model.alignment.xl=this.alignment(),this.model.order.xl=this.order();break;case"lg":this.model.alignment.lg=this.alignment(),this.model.order.lg=this.order();break;case"md":this.model.alignment.md=this.alignment(),this.model.order.md=this.order();break;case"sm":this.model.alignment.sm=this.alignment(),this.model.order.sm=this.order();break;case"xs":this.model.alignment.xs=this.alignment(),this.model.order.xs=this.order();break;default:throw new Error("Unknown viewport")}this.model.overflowX=this.model.overflowY=this.scrollOnOverlow()?"scroll":null,this.onChange(this.model)}alignContent(alignment){this.alignment(alignment)}align(){this.alignment(`${this.verticalAlignment()} ${this.horizontalAlignment()}`)}determineAlignment(viewport,model){switch(viewport){case"xl":return model.alignment.xl||this.determineAlignment("lg",model);case"lg":return model.alignment.lg||this.determineAlignment("md",model);case"md":return model.alignment.md||this.determineAlignment("sm",model);case"sm":return model.alignment.sm||this.determineAlignment("xs",model);case"xs":return model.alignment.xs||"start start";default:throw new Error("Unknown viewport")}}determineOrder(viewport,model){switch(viewport){case"xl":return model.order.xl||this.determineOrder("lg",model);case"lg":return model.order.lg||this.determineOrder("md",model);case"md":return model.order.md||this.determineOrder("sm",model);case"sm":return model.order.sm||this.determineOrder("xs",model);case"xs":return model.order.xs||null;default:throw new Error("Unknown viewport")}}toggleHorizontal(){switch(this.horizontalAlignment()){case"center":this.horizontalAlignment("around");break;case"around":this.horizontalAlignment("between");break;case"between":this.horizontalAlignment("center")}}toggleVertical(){switch(this.verticalAlignment()){case"center":this.verticalAlignment("around");break;case"around":this.verticalAlignment("between");break;case"between":this.verticalAlignment("center")}}alignLeft(){this.horizontalAlignment("start"),this.align()}alignRight(){this.horizontalAlignment("end"),this.align()}alignCenter(){"center"===this.horizontalAlignment()||"around"===this.horizontalAlignment()||"between"===this.horizontalAlignment()?this.toggleHorizontal():this.horizontalAlignment("center"),this.align()}alignTop(){this.verticalAlignment("start"),this.align()}alignBottom(){this.verticalAlignment("end"),this.align()}alignMiddle(){"center"===this.verticalAlignment()||"around"===this.verticalAlignment()||"between"===this.verticalAlignment()?this.toggleVertical():this.verticalAlignment("center"),this.align()}};__decorate([decorators_1.Param(),__metadata("design:type",columnModel_1.ColumnModel)],ColumnEditor.prototype,"model",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],ColumnEditor.prototype,"onChange",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],ColumnEditor.prototype,"initialize",null),ColumnEditor=__decorate([decorators_1.Component({selector:"layout-column-editor",template:columnEditor_html_1.default}),__metadata("design:paramtypes",[Object])],ColumnEditor),exports.ColumnEditor=ColumnEditor},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<fieldset class="form flex-item flex-item-grow" data-bind="scrollable: true">\r\n    <div class="form-group form-group-collapsible">\r\n        <label class="form-label">\r\n            <a href="#" class="form-group-toggle" title="Toggle section" data-bind="collapse: \'#alignmentCollapse\'"></a>\r\n            <b>Content alignment</b>\r\n        </label>\r\n\r\n        <div id="alignmentCollapse" class="collapse form-group-collapse">\r\n            <div class="form-group">\r\n                <label>Horizontal</label>\r\n                <a href="#" class="toolbox-btn" role="button" data-bind="click: alignLeft, css: { \'toolbox-btn-is-active\': horizontalAlignment() === \'start\' }">\r\n                    <i class="paperbits-icon paperbits-align-left"></i>\r\n                </a>\r\n                <a href="#" class="toolbox-btn" role="button" data-bind="click: alignCenter, css: { \'toolbox-btn-is-active\': horizontalAlignment() === \'center\' || horizontalAlignment() === \'around\' || horizontalAlignment() === \'between\' }">\r\n                    <i class="paperbits-icon paperbits-align-center-horizontal"></i>\r\n                </a>\r\n                <a href="#" class="toolbox-btn" role="button" data-bind="click: alignRight, css: { \'toolbox-btn-is-active\': horizontalAlignment() === \'end\' }">\r\n                    <i class="paperbits-icon paperbits-align-right"></i>\r\n                </a>\r\n            </div>\r\n\r\n            <div class="form-group">\r\n                <label>Vertical</label>\r\n                <a href="#" class="toolbox-btn" role="button" data-bind="click: alignTop, css: { \'toolbox-btn-is-active\': verticalAlignment() === \'start\' }">\r\n                    <i class="paperbits-icon paperbits-align-top"></i>\r\n                </a>\r\n                <a href="#" class="toolbox-btn" role="button" data-bind="click: alignMiddle, css: { \'toolbox-btn-is-active\': verticalAlignment() === \'center\' || verticalAlignment() === \'around\' || verticalAlignment() === \'between\' }">\r\n                    <i class="paperbits-icon paperbits-align-center-vertical"></i>\r\n                </a>\r\n                <a href="#" class="toolbox-btn" role="button" data-bind="click: alignBottom, css: { \'toolbox-btn-is-active\': verticalAlignment() === \'end\' }">\r\n                    <i class="paperbits-icon paperbits-align-bottom"></i>\r\n                </a>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="form-group form-group-collapsible">\r\n        <label class="form-label">\r\n            <a href="#" class="form-group-toggle" title="Toggle section" data-bind="collapse: \'#contentFlowCollapse\'"></a>\r\n            <b>Content flow</b>\r\n            <button class="btn btn-info" type="button" data-bind="tooltip: \'Manage scrolling settings for container\'"></button>\r\n        </label>\r\n        <div id="contentFlowCollapse" class="collapse form-group-collapse">\r\n            <label class="form-label">\r\n                <input name="scrollOnOverlow" type="checkbox" data-bind="checked: scrollOnOverlow">Scroll on overflow\r\n            </label>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="form-group form-group-collapsible">\r\n        <label class="form-label">\r\n            <a href="#" class="form-group-toggle" title="Toggle section" data-bind="collapse: \'#miscellaneousCollapse\'"></a>\r\n            <b>Miscellaneous</b>\r\n        </label>\r\n        <div id="miscellaneousCollapse" class="collapse form-group-collapse">\r\n            <label class="form-label">\r\n                Order in row\r\n                <button class="btn btn-info" type="button" data-bind="tooltip: \'Manage an element order in a parent container\'"></button>\r\n            </label>\r\n            <div class="form-group">\r\n                <input type="number" class="form-control" max="12" min="1" data-bind="textInput: order">\r\n            </div>\r\n        </div>\r\n    </div>\r\n</fieldset>'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SectionEditorModule=void 0;const sectionLayoutSelector_1=__webpack_require__(754),sectionEditor_1=__webpack_require__(756),sectionHandlers_1=__webpack_require__(144);exports.SectionEditorModule=class{register(injector){injector.bind("sectionLayoutSelector",sectionLayoutSelector_1.SectionLayoutSelector),injector.bind("sectionEditor",sectionEditor_1.SectionEditor),injector.bindToCollection("widgetHandlers",sectionHandlers_1.SectionHandlers,"sectionHandler")}}},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SectionLayoutSelector=void 0;const sectionLayoutSelector_html_1=__webpack_require__(755),modelBinderSelector_1=__webpack_require__(81),decorators_1=__webpack_require__(2),sectionModel_1=__webpack_require__(86),blocks_1=__webpack_require__(67);let SectionLayoutSelector=class{constructor(modelBinderSelector,blockService){this.modelBinderSelector=modelBinderSelector,this.blockService=blockService,this.selectSectionLayout=this.selectSectionLayout.bind(this),this.onBlockSelected=this.onBlockSelected.bind(this)}selectSectionLayout(){const sectionModel=new sectionModel_1.SectionModel;this.onSelect&&this.onSelect(sectionModel)}onBlockSelected(block){return __awaiter(this,void 0,void 0,(function*(){const contract=yield this.blockService.getBlockContent(block.key),modelBinder=this.modelBinderSelector.getModelBinderByContract(contract),model=yield modelBinder.contractToModel(contract);this.onSelect&&this.onSelect(model)}))}};__decorate([decorators_1.Event(),__metadata("design:type",Function)],SectionLayoutSelector.prototype,"onSelect",void 0),SectionLayoutSelector=__decorate([decorators_1.Component({selector:"section-layout-selector",template:sectionLayoutSelector_html_1.default}),__metadata("design:paramtypes",[modelBinderSelector_1.ModelBinderSelector,blocks_1.BlockService])],SectionLayoutSelector),exports.SectionLayoutSelector=SectionLayoutSelector},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="editor">\r\n\r\n    <h1>Add section</h1>\r\n    <hr>\r\n\r\n    <h2>Blank</h2>\r\n    <div class="flex flex-row">\r\n        <a href="#" class="section-cfg" data-bind="click: $component.selectSectionLayout.bind($data, \'container\')">\r\n            <span class="section-container-cfg"></span>\r\n        </a>\r\n\r\n        <a href="#" class="section-cfg" data-bind="click: $component.selectSectionLayout.bind($data, \'fluid\')">\r\n            <span class="section-fluid-cfg"></span>\r\n        </a>\r\n    </div>\r\n\r\n    <h2>Blocks</h2>\r\n    <div class="flex flex-row">\r\n        <block-selector params="onSelect: $component.onBlockSelected"></block-selector>\r\n    </div>\r\n</div>'},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SectionEditor=void 0;const ko=__webpack_require__(0),Utils=__webpack_require__(19),Objects=__webpack_require__(30),sectionEditor_html_1=__webpack_require__(757),decorators_1=__webpack_require__(2),sectionModel_1=__webpack_require__(86),consts_1=__webpack_require__(17),events_1=__webpack_require__(46);let SectionEditor=class{constructor(viewManager,eventManager){this.viewManager=viewManager,this.eventManager=eventManager,this.stickTo=ko.observable("none"),this.stretch=ko.observable(!1),this.background=ko.observable(),this.typography=ko.observable(),this.sizeConfig=ko.observable(),this.box=ko.observable()}initialize(){return __awaiter(this,void 0,void 0,(function*(){this.updateObservables(),this.stickTo.extend(consts_1.ChangeRateLimit).subscribe(this.applyChanges),this.stretch.extend(consts_1.ChangeRateLimit).subscribe(this.applyChanges),this.background.extend(consts_1.ChangeRateLimit).subscribe(this.applyChanges),this.typography.extend(consts_1.ChangeRateLimit).subscribe(this.applyChanges),this.box.extend(consts_1.ChangeRateLimit).subscribe(this.applyChanges),this.sizeConfig.extend(consts_1.ChangeRateLimit).subscribe(this.applyChanges),this.eventManager.addEventListener(events_1.CommonEvents.onViewportChange,this.updateObservables)}))}updateObservables(){const viewport=this.viewManager.getViewport();if(this.model.styles){if(this.model.styles.instance){const sectionStyles=this.model.styles.instance;sectionStyles&&(this.background(sectionStyles.background),this.typography(sectionStyles.typography))}const stickToStyles=Objects.getObjectAt("instance/stickTo/"+viewport,this.model.styles);stickToStyles&&this.stickTo(stickToStyles);const stretchStyle=Objects.getObjectAt(`instance/size/${viewport}/stretch`,this.model.styles);this.stretch(!!stretchStyle)}this.gridModel=this.model.widgets[0];const gridStyles=this.gridModel.styles,containerSizeStyles=Objects.getObjectAt("instance/size/"+viewport,gridStyles),marginStyles=Objects.getObjectAt("instance/margin/"+viewport,gridStyles);this.box({margin:marginStyles}),this.sizeConfig(containerSizeStyles)}applyChanges(){const viewport=this.viewManager.getViewport();this.model.styles=this.model.styles||{},this.model.styles.instance&&!this.model.styles.instance.key&&(this.model.styles.instance.key=Utils.randomClassName());const gridStyles=this.gridModel.styles,containerSizeStyles=this.sizeConfig();Objects.setValue("instance/size/"+viewport,gridStyles,containerSizeStyles);const marginStyle=this.box().margin;Objects.cleanupObject(marginStyle),Objects.setValue("instance/margin/"+viewport,gridStyles,marginStyle),Objects.setValue("instance/stickTo/"+viewport,this.model.styles,this.stickTo()),Objects.setValue(`instance/size/${viewport}/stretch`,this.model.styles,this.stretch()),this.onChange(this.model)}onBackgroundUpdate(background){Objects.setValue("instance/background",this.model.styles,background),this.applyChanges()}onTypographyUpdate(typography){Objects.setValue("instance/typography",this.model.styles,typography),this.applyChanges()}onBoxUpdate(pluginConfig){this.box(pluginConfig)}onSizeUpdate(sizeConfig){this.sizeConfig(sizeConfig)}};__decorate([decorators_1.Param(),__metadata("design:type",sectionModel_1.SectionModel)],SectionEditor.prototype,"model",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],SectionEditor.prototype,"onChange",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],SectionEditor.prototype,"initialize",null),SectionEditor=__decorate([decorators_1.Component({selector:"layout-section-editor",template:sectionEditor_html_1.default}),__metadata("design:paramtypes",[Object,Object])],SectionEditor),exports.SectionEditor=SectionEditor},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<fieldset class="form flex-item flex-item-grow" data-bind="scrollable: true">\r\n    <background params="{ background: $component.background, onUpdate: onBackgroundUpdate }"></background>\r\n\r\n    <size-editor params="{ features: \'minMaxHeight,minMaxWidth\', sizeConfig: sizeConfig, onUpdate: onSizeUpdate }"></size-editor>\r\n\r\n    <div class="form-group form-group-collapsible">\r\n        <label class="form-label">\r\n            <a href="#" class="form-group-toggle" title="Toggle section" data-bind="collapse: \'#boxCollapse\'"></a>\r\n            <b>Box</b>\r\n        </label>\r\n        <div id="boxCollapse" class="collapse form-group-collapse">\r\n            <box params="{ features: \'margin\', box: box, onUpdate: onBoxUpdate }"></box>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="form-group form-group-collapsible">\r\n        <label class="form-label">\r\n            <a href="#" class="form-group-toggle" title="Toggle section" data-bind="collapse: \'#miscellaneousCollapse\'"></a>\r\n            <b>Miscellaneous</b>\r\n        </label>\r\n        <div id="miscellaneousCollapse" class="collapse form-group-collapse">\r\n            <label class="form-label">\r\n                Stick to\r\n                <button class="btn btn-info" type="button" data-bind="tooltip: \'Make the element stick to the edge (top or bottom) of the screen when its containing element crosses that edge.\'"></button>\r\n            </label>\r\n            <div class="form-group">\r\n                <label class="form-label">\r\n                    <input name="sticking" type="radio" value="none" data-bind="checked: stickTo">None\r\n                </label>\r\n                <label class="form-label">\r\n                    <input name="sticking" type="radio" value="top" data-bind="checked: stickTo">Top\r\n                </label>\r\n                <label class="form-label">\r\n                    <input name="sticking" type="radio" value="bottom" data-bind="checked: stickTo">Bottom\r\n                </label>\r\n            </div>\r\n\r\n            <label class="form-label">\r\n                Height\r\n                <button class="btn btn-info" type="button" data-bind="tooltip: \'Manage section height\'"></button>\r\n            </label>\r\n            <div class="form-group">\r\n                <label for="stretch" class="form-label">\r\n                    <input type="checkbox" id="stretch" name="stretch" data-bind="checked: stretch">Stretch\r\n                </label>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</fieldset>'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RowEditorModule=void 0;const rowLayoutSelector_1=__webpack_require__(759),rowHandlers_1=__webpack_require__(271);exports.RowEditorModule=class{register(injector){injector.bind("rowLayoutSelector",rowLayoutSelector_1.RowLayoutSelector),injector.bindToCollection("widgetHandlers",rowHandlers_1.RowHandlers,"rowHandler")}}},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.RowLayoutSelector=void 0;const rowLayoutSelector_html_1=__webpack_require__(760),decorators_1=__webpack_require__(2),columnModel_1=__webpack_require__(99),rowModel_1=__webpack_require__(149);let RowLayoutSelector=class{constructor(){this.rowConfigs=[[{xs:12}],[{xs:12,md:6},{xs:12,md:6}],[{xs:12,md:4},{xs:12,md:4},{xs:12,md:4}],[{xs:12,md:3},{xs:12,md:3},{xs:12,md:3},{xs:12,md:3}],[{xs:12,md:8},{xs:12,md:4}],[{xs:12,md:4},{xs:12,md:8}],[{xs:12,md:3},{xs:12,md:9}],[{xs:12,md:9},{xs:12,md:3}],[{xs:12,md:6},{xs:12,md:3},{xs:12,md:3}],[{xs:12,md:3},{xs:12,md:3},{xs:12,md:6}],[{xs:12,md:3},{xs:12,md:6},{xs:12,md:3}]],this.selectRowLayout=this.selectRowLayout.bind(this)}selectRowLayout(columnSizeCfgs){const rowModel=new rowModel_1.RowModel;columnSizeCfgs.forEach(size=>{const column=new columnModel_1.ColumnModel;column.size.xs=size.xs,column.size.sm=size.sm,column.size.md=size.md,column.size.lg=size.lg,column.size.xl=size.xl,rowModel.widgets.push(column)}),this.onSelect&&this.onSelect(rowModel)}};__decorate([decorators_1.Event(),__metadata("design:type",Function)],RowLayoutSelector.prototype,"onSelect",void 0),RowLayoutSelector=__decorate([decorators_1.Component({selector:"row-layout-selector",template:rowLayoutSelector_html_1.default}),__metadata("design:paramtypes",[])],RowLayoutSelector),exports.RowLayoutSelector=RowLayoutSelector},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="editor row-layout-selector">\r\n    <div class="flex flex-row">\r\n        <h1>\r\n            Add row\r\n        </h1>\r\n        <hr>\r\n\r\n        \x3c!-- ko foreach: rowConfigs --\x3e\r\n        <div class="row-cfg" data-bind="foreach: $data, click: $component.selectRowLayout">\r\n            <div class="col-cfg" data-bind="columnSizeCfg: $data">\r\n            </div>\r\n        </div>\r\n        \x3c!-- /ko --\x3e\r\n    </div>\r\n</div>'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BlockWorkshopModule=void 0;const blockSelector_1=__webpack_require__(762),addBlockDialog_1=__webpack_require__(765),widgetContainer_1=__webpack_require__(767);exports.BlockWorkshopModule=class{register(injector){injector.bind("widgetContainer",widgetContainer_1.WidgetContainer),injector.bind("blockSelector",blockSelector_1.BlockSelector),injector.bind("addBlockDialog",addBlockDialog_1.AddBlockDialog)}}},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.BlockSelector=void 0;const blockSelector_html_1=__webpack_require__(763),ko=__webpack_require__(0),blockItem_1=__webpack_require__(764),blocks_1=__webpack_require__(67),decorators_1=__webpack_require__(2),modelBinderSelector_1=__webpack_require__(81),viewModelBinderSelector_1=__webpack_require__(148),consts_1=__webpack_require__(17),styles_1=__webpack_require__(8);let BlockSelector=class{constructor(blockService,modelBinderSelector,viewModelBinderSelector){this.blockService=blockService,this.modelBinderSelector=modelBinderSelector,this.viewModelBinderSelector=viewModelBinderSelector,this.blocks=ko.observableArray(),this.widgets=ko.observableArray(),this.searchPattern=ko.observable(),this.working=ko.observable()}initialize(){return __awaiter(this,void 0,void 0,(function*(){yield this.searchBlocks(),this.searchPattern.extend(consts_1.ChangeRateLimit).subscribe(this.searchBlocks)}))}searchBlocks(searchPattern=""){return __awaiter(this,void 0,void 0,(function*(){this.working(!0);const blocks=yield this.blockService.search(this.blockType,searchPattern),blockItems=[];for(const block of blocks){const content=yield this.blockService.getBlockContent(block.key,this.blockType);content.type||(content.type=block.type);const styleManager=new styles_1.StyleManager,bindingContext={styleManager:styleManager},modelBinder=this.modelBinderSelector.getModelBinderByContract(content),model=yield modelBinder.contractToModel(content),widgetViewModelBinder=this.viewModelBinderSelector.getViewModelBinderByModel(model),widget=yield widgetViewModelBinder.modelToViewModel(model,null,bindingContext);blockItems.push(new blockItem_1.BlockItem(block,widget,styleManager))}this.blocks(blockItems),this.working(!1)}))}selectBlock(block){return __awaiter(this,void 0,void 0,(function*(){this.onSelect&&this.onSelect({block:block.toBlock(),blockType:this.blockType})}))}deleteBlock(block,event){return __awaiter(this,void 0,void 0,(function*(){event.stopImmediatePropagation(),block&&this.blockType===blocks_1.BlockType.saved&&(yield this.blockService.deleteBlock(block.toBlock()),yield this.searchBlocks(this.searchPattern()))}))}};__decorate([decorators_1.Param(),__metadata("design:type",String)],BlockSelector.prototype,"blockType",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],BlockSelector.prototype,"onSelect",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],BlockSelector.prototype,"initialize",null),BlockSelector=__decorate([decorators_1.Component({selector:"block-selector",template:blockSelector_html_1.default}),__metadata("design:paramtypes",[Object,modelBinderSelector_1.ModelBinderSelector,viewModelBinderSelector_1.ViewModelBinderSelector])],BlockSelector),exports.BlockSelector=BlockSelector},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<fieldset class="flex-item form">\r\n    <div class="form-group">\r\n        <input class="form-control" type="search" role="searchbox" data-bind="textInput: searchPattern, valueUpdate: \'keyup\', focus: true" placeholder="Search item..." aria-label="Search items" aria-controls="searchResult">\r\n        <p id="searchResult" class="text-hide" role="region" aria-live="polite" data-bind="text: `Items found: ${blocks().length}`">\r\n        </p>\r\n    </div>\r\n</fieldset>\r\n\r\n\x3c!--ko if: working()--\x3e\r\n<spinner></spinner>\r\n\x3c!--/ko--\x3e\r\n\r\n\x3c!--ko ifnot: working()--\x3e\r\n\r\n\x3c!-- ko if: blocks().length === 0 --\x3e\r\n<p class="flex-item flex-item-grow text-center">It seems that you don\'t have anything in your library yet.</p>\r\n\x3c!-- /ko --\x3e\r\n\r\n\x3c!-- ko if: blocks().length > 0 --\x3e\r\n<div role="list" data-bind="foreach: blocks, scrollable: true">\r\n    <div class="list-item" data-bind="css: { selected: hasFocus }, click: $component.selectBlock">\r\n        \x3c!-- ko if: $component.blockType !== \'blocks-section\' --\x3e\r\n        <button class="btn-standalone remove-block" data-bind="click: $component.deleteBlock">\r\n            <i class="paperbits-icon paperbits-trash-simple"></i>\r\n        </button>\r\n        \x3c!-- /ko --\x3e\r\n        <div class="zoom-selector-item">\r\n            <div class="zoom-item">\r\n                <widget-container params="{ widgetData: $data }"></widget-container>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\x3c!-- /ko --\x3e\r\n\r\n\x3c!-- /ko --\x3e'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BlockItem=void 0;const ko=__webpack_require__(0);exports.BlockItem=class{constructor(block,widget,styleManager){this.key=block.key,this.contentKey=block.contentKey,this.title=ko.observable(block.title),this.description=ko.observable(block.description),this.hasFocus=ko.observable(),this.widget=widget,this.styleManager=styleManager}toBlock(){return{key:this.key,type:"block",title:this.title(),description:this.description(),contentKey:this.contentKey}}}},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.AddBlockDialog=void 0;const addBlockDialog_html_1=__webpack_require__(766),ko=__webpack_require__(0),decorators_1=(__webpack_require__(67),__webpack_require__(2)),modelBinderSelector_1=__webpack_require__(81);let AddBlockDialog=class{constructor(blockService,modelBinderSelector,viewManager){this.blockService=blockService,this.modelBinderSelector=modelBinderSelector,this.viewManager=viewManager,this.addBlock=this.addBlock.bind(this),this.working=ko.observable(!1),this.name=ko.observable(),this.name.extend({required:!0}),this.description=ko.observable()}addBlock(){return __awaiter(this,void 0,void 0,(function*(){if(!this.name())return;this.modelBinder||(this.modelBinder=this.modelBinderSelector.getModelBinderByModel(this.blockModel));const content=this.modelBinder.modelToContract(this.blockModel);yield this.blockService.createBlock(this.name(),this.description()||"",content,this.blockType),this.viewManager.notifySuccess("Blocks","Block added to library."),this.onClose&&this.onClose()}))}};__decorate([decorators_1.Param(),__metadata("design:type",Object)],AddBlockDialog.prototype,"blockModel",void 0),__decorate([decorators_1.Param(),__metadata("design:type",String)],AddBlockDialog.prototype,"blockType",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],AddBlockDialog.prototype,"onClose",void 0),AddBlockDialog=__decorate([decorators_1.Component({selector:"add-block-dialog",template:addBlockDialog_html_1.default}),__metadata("design:paramtypes",[Object,modelBinderSelector_1.ModelBinderSelector,Object])],AddBlockDialog),exports.AddBlockDialog=AddBlockDialog},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<fieldset class="flex-item flex-item-grow form" data-bind="scrollable: true">\r\n    <div class="form-group">\r\n        <label class="form-label" for="blockName">\r\n            Name for the block\r\n        </label>\r\n        <div class="input-group">\r\n            <input type="text" id="blockName" class="form-control" maxlength="2000" data-bind="textInput: name, validationElement: name" placeholder="e.g. Features section">\r\n            <button class="btn btn-danger input-group-btn" type="button" data-bind="validationMessageToggle: name">!</button>\r\n        </div>\r\n    </div>\r\n    \x3c!-- <div class="form-group">\r\n        <label class="form-label" for="blockDescription">\r\n            Description\r\n        </label>\r\n        <div class="input-group">\r\n            <input type="text" name="blockDescription" class="form-control" maxlength="2000"\r\n                data-bind="textInput: description, validationElement: description" placeholder="details about a new design block" />\r\n        </div>\r\n    </div> --\x3e\r\n</fieldset>\r\n\r\n<div class="flex-item btn-group">\r\n    <button class="btn" data-bind="click: addBlock">\r\n        <i class="paperbits-icon paperbits-simple-add"></i>\r\n        Add to library\r\n    </button>\r\n</div>'},function(module,exports,__webpack_require__){"use strict";(function(setImmediate){var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.WidgetContainer=void 0;const ko=__webpack_require__(0),widgetContainer_html_1=__webpack_require__(768),decorators_1=__webpack_require__(2),jssCompiler_1=__webpack_require__(48);let WidgetContainer=class{constructor(styleCompiler){this.styleCompiler=styleCompiler,this.widgetViewModel=ko.observable(),this.css=ko.observable()}initialize(){return __awaiter(this,void 0,void 0,(function*(){const compiler=new jssCompiler_1.JssCompiler;setImmediate(()=>__awaiter(this,void 0,void 0,(function*(){const styleSheets=this.widgetData.styleManager.getAllStyleSheets(),localCss=compiler.compile(...styleSheets),globalStyleSheet=yield this.styleCompiler.getStyleSheet(),globalCss=compiler.compile(globalStyleSheet);this.css(globalCss+" "+localCss)}))),this.widgetViewModel(this.widgetData.widget)}))}};__decorate([decorators_1.Param(),__metadata("design:type",Object)],WidgetContainer.prototype,"widgetData",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],WidgetContainer.prototype,"initialize",null),WidgetContainer=__decorate([decorators_1.Component({selector:"widget-container",template:widgetContainer_html_1.default,encapsulation:decorators_1.Encapsulation.shadowDom}),__metadata("design:paramtypes",[Object])],WidgetContainer),exports.WidgetContainer=WidgetContainer}).call(this,__webpack_require__(60).setImmediate)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div style="width: 1200px;">\r\n    <link href="/styles/theme.css" rel="stylesheet" type="text/css">\r\n    <style data-bind="html: css"></style>\r\n    \x3c!-- ko widget: widgetViewModel --\x3e\r\n    \x3c!-- /ko --\x3e\r\n</div>'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PageDesignModule=void 0;const pages_1=__webpack_require__(770),pageDetails_1=__webpack_require__(772),pageSelector_1=__webpack_require__(774),pages_2=__webpack_require__(210),browserNotSupported_1=__webpack_require__(776),pageHost_1=__webpack_require__(777),pagesToolButton_1=__webpack_require__(778);exports.PageDesignModule=class{register(injector){injector.bind("browserNotSupported",browserNotSupported_1.BrowserNotSupported),injector.bind("pageHost",pageHost_1.PageHost),injector.bind("pagesWorkshop",pages_1.PagesWorkshop),injector.bind("pageDetailsWorkshop",pageDetails_1.PageDetailsWorkshop),injector.bind("pageSelector",pageSelector_1.PageSelector),injector.bindToCollection("hyperlinkProviders",pages_2.PageHyperlinkProvider),injector.bindToCollection("workshopSections",pagesToolButton_1.PagesToolButton),injector.bind("pageHyperlinkProvider",pages_2.PageHyperlinkProvider)}}},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PagesWorkshop=void 0;const ko=__webpack_require__(0),pages_html_1=__webpack_require__(771),decorators_1=__webpack_require__(2),consts_1=__webpack_require__(17),persistence_1=__webpack_require__(23),pageItem_1=__webpack_require__(150);let PagesWorkshop=class{constructor(pageService,viewManager){this.pageService=pageService,this.viewManager=viewManager,this.pages=ko.observableArray(),this.selectedPage=ko.observable(),this.searchPattern=ko.observable(""),this.working=ko.observable(!1)}initialize(){return __awaiter(this,void 0,void 0,(function*(){yield this.searchPages(),this.searchPattern.extend(consts_1.ChangeRateLimit).subscribe(this.searchPages)}))}searchPages(searchPattern=""){return __awaiter(this,void 0,void 0,(function*(){this.working(!0),this.pages([]);const query=persistence_1.Query.from().orderBy("title");searchPattern&&query.where("title",persistence_1.Operator.contains,searchPattern);const pageOfResults=yield this.pageService.search(query);this.currentPage=pageOfResults;const pageItems=pageOfResults.value.map(page=>new pageItem_1.PageItem(page));this.pages.push(...pageItems),this.working(!1)}))}loadNextPage(){var _a;return __awaiter(this,void 0,void 0,(function*(){if(!(null===(_a=this.currentPage)||void 0===_a?void 0:_a.takeNext))return;this.working(!0),this.currentPage=yield this.currentPage.takeNext();const pageItems=this.currentPage.value.map(page=>new pageItem_1.PageItem(page));this.pages.push(...pageItems),this.working(!1)}))}selectPage(pageItem){this.selectedPage(pageItem);const view={heading:"Page",component:{name:"page-details-workshop",params:{pageItem:pageItem,onDeleteCallback:()=>{this.searchPages()},onCopyCallback:item=>__awaiter(this,void 0,void 0,(function*(){yield this.searchPages(),this.selectPage(item)}))}}};this.viewManager.openViewAsWorkshop(view)}addPage(){return __awaiter(this,void 0,void 0,(function*(){this.working(!0);const pageContract=yield this.pageService.createPage("/new-page","New page","",""),pageItem=new pageItem_1.PageItem(pageContract);this.pages.push(pageItem),this.selectPage(pageItem),this.working(!1)}))}isSelected(page){const selectedPage=this.selectedPage();return(null==selectedPage?void 0:selectedPage.key)===page.key}};__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],PagesWorkshop.prototype,"initialize",null),PagesWorkshop=__decorate([decorators_1.Component({selector:"pages",template:pages_html_1.default}),__metadata("design:paramtypes",[Object,Object])],PagesWorkshop),exports.PagesWorkshop=PagesWorkshop},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="flex flex-column fit">\r\n    <fieldset class="flex-item form">\r\n        <div class="form-group">\r\n            <input class="form-control" type="search" role="searchbox" data-bind="textInput: searchPattern, valueUpdate: \'keyup\', focus: true" placeholder="Search pages..." aria-label="Search pages" aria-controls="searchResult">\r\n            <p id="searchResult" class="text-hide" role="region" aria-live="polite" data-bind="text: `Pages found: ${pages().length}`">\r\n            </p>\r\n        </div>\r\n    </fieldset>\r\n\r\n    \x3c!-- ko if: !working() && pages().length === 0 --\x3e\r\n\r\n    \x3c!-- ko if: searchPattern() === "" --\x3e\r\n    <p class="flex-item flex-item-grow text-center">It seems that you don\'t have pages yet. Would you like to\r\n        <a href="#" class="btn-link" data-bind="click: addPage">create one</a>?\r\n    </p>\r\n    \x3c!-- /ko --\x3e\r\n\r\n    \x3c!-- ko if: searchPattern() !== ""  --\x3e\r\n    <p class="flex-item flex-item-grow text-center">Could not find anything. Try to change search criteria.</p>\r\n    \x3c!-- /ko --\x3e\r\n\r\n    \x3c!-- /ko --\x3e\r\n\r\n    <div role="list" class="flex flex-column flex-item flex-item-grow" data-bind="scrollable: true">\r\n        \x3c!-- ko foreach: { data: pages, as: \'page\' } --\x3e\r\n        <a href="#" role="listitem" class="list-item flex-grow" data-bind="css: { selected: $component.isSelected(page) }, attr: { title: page.title }, activate: $component.selectPage, selectable: true">\r\n            <i class="paperbits-icon paperbits-single-content-03"></i>\r\n            <span class="text-overflow" data-bind="text: page.title"></span>\r\n        </a>\r\n        \x3c!-- /ko --\x3e\r\n        \x3c!--ko if: $component.working()--\x3e\r\n        <spinner></spinner>\r\n        \x3c!--/ko--\x3e\r\n        \x3c!-- ko ifnot: $component.working --\x3e\r\n        <div class="list-edge" data-bind="whenInView: $component.loadNextPage"></div>\r\n        \x3c!-- /ko --\x3e\r\n    </div>\r\n\r\n\r\n    <div class="flex-item btn-group">\r\n        <button class="btn" data-bind="click: $component.addPage">\r\n            <i class="paperbits-icon paperbits-simple-add"></i>\r\n            Add page\r\n        </button>\r\n    </div>\r\n</div>'},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PageDetailsWorkshop=void 0;const ko=__webpack_require__(0),pageDetails_html_1=__webpack_require__(773),decorators_1=__webpack_require__(2),pageItem_1=__webpack_require__(150),background_1=__webpack_require__(82);let PageDetailsWorkshop=class{constructor(pageService,router,viewManager,reservedPermalinks,settingsProvider,mediaService,localeService){this.pageService=pageService,this.router=router,this.viewManager=viewManager,this.reservedPermalinks=reservedPermalinks,this.settingsProvider=settingsProvider,this.mediaService=mediaService,this.localeService=localeService,this.isReserved=ko.observable(!1),this.isSeoEnabled=ko.observable(!1),this.socialShareImage=ko.observable()}onMounted(){var _a;return __awaiter(this,void 0,void 0,(function*(){this.pageItem.title.extend({required:!0,onlyValid:!0}).subscribe(this.applyChanges),this.pageItem.description.subscribe(this.applyChanges),this.pageItem.keywords.subscribe(this.applyChanges),this.pageItem.jsonLd.subscribe(this.applyChanges);let validPermalink=this.pageItem.permalink;this.reservedPermalinks.includes(this.pageItem.permalink())?this.isReserved(!0):(validPermalink=validPermalink.extend({required:!0,validPermalink:this.pageItem.key,onlyValid:!0}),validPermalink.subscribe(this.onPermalinkChange));const socialShareData=this.pageItem.socialShareData();if(null===(_a=null==socialShareData?void 0:socialShareData.image)||void 0===_a?void 0:_a.sourceKey){const media=yield this.mediaService.getMediaByKey(socialShareData.image.sourceKey);if(media){const imageModel=new background_1.BackgroundModel;imageModel.sourceUrl=media.downloadUrl,this.socialShareImage(imageModel)}}(yield this.localeService.getCurrentLocale())!==(yield this.localeService.getDefaultLocale())&&this.isReserved(!0);const seoSetting=yield this.settingsProvider.getSetting("enableSeo");seoSetting&&this.isSeoEnabled(seoSetting),yield this.router.navigateTo(validPermalink()),this.viewManager.setHost({name:"page-host"})}))}applyChanges(){return __awaiter(this,void 0,void 0,(function*(){yield this.pageService.updatePage(this.pageItem.toContract())}))}onPermalinkChange(){return __awaiter(this,void 0,void 0,(function*(){const permalink=this.pageItem.permalink();this.router.updateHistory(permalink,this.pageItem.title()),yield this.applyChanges()}))}deletePage(){return __awaiter(this,void 0,void 0,(function*(){yield this.pageService.deletePage(this.pageItem.toContract()),this.viewManager.notifySuccess("Pages",`Page "${this.pageItem.title()}" was deleted.`),this.viewManager.closeWorkshop("page-details-workshop"),this.onDeleteCallback&&this.onDeleteCallback(),this.router.navigateTo("/")}))}copyPage(){return __awaiter(this,void 0,void 0,(function*(){const copyPermalink=this.pageItem.permalink()+" copy",pageContract=yield this.pageService.createPage(copyPermalink,this.pageItem.title()+" copy",this.pageItem.description(),this.pageItem.keywords()),copyContract=this.pageItem.toContract();copyContract.key=pageContract.key,copyContract.permalink=pageContract.permalink,copyContract.title=pageContract.title,copyContract.contentKey=pageContract.contentKey,yield this.pageService.updatePage(copyContract);const pageContentContract=yield this.pageService.getPageContent(this.pageItem.key);yield this.pageService.updatePageContent(copyContract.key,pageContentContract),this.onCopyCallback&&this.onCopyCallback(new pageItem_1.PageItem(copyContract))}))}onMediaSelected(media){return __awaiter(this,void 0,void 0,(function*(){let socialShareData=null;if(media){socialShareData={image:{sourceKey:media.key}};const imageModel=new background_1.BackgroundModel;imageModel.sourceUrl=media.downloadUrl,this.socialShareImage(imageModel)}else this.socialShareImage(null);this.pageItem.socialShareData(socialShareData),yield this.applyChanges()}))}};__decorate([decorators_1.Param(),__metadata("design:type",pageItem_1.PageItem)],PageDetailsWorkshop.prototype,"pageItem",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],PageDetailsWorkshop.prototype,"onDeleteCallback",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],PageDetailsWorkshop.prototype,"onCopyCallback",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],PageDetailsWorkshop.prototype,"onMounted",null),PageDetailsWorkshop=__decorate([decorators_1.Component({selector:"page-details-workshop",template:pageDetails_html_1.default}),__metadata("design:paramtypes",[Object,Object,Object,Array,Object,Object,Object])],PageDetailsWorkshop),exports.PageDetailsWorkshop=PageDetailsWorkshop},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="flex flex-column fit">\r\n    <fieldset class="flex-item flex-item-grow form" data-bind="scrollable: true">\r\n        <div class="form-group">\r\n            <label for="title" class="form-label">Title</label>\r\n            <div class="input-group">\r\n                <input type="text" id="title" class="form-control" data-bind="textInput: pageItem.title, validationElement: pageItem.title, focus: true" placeholder="e.g. About" maxlength="256">\r\n                <button class="btn btn-danger input-group-btn" type="button" data-bind="validationMessageToggle: pageItem.title">!</button>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="permalink" class="form-label">Permalink</label>\r\n            <div class="input-group">\r\n                <input type="text" id="permalink" class="form-control" data-bind="textInput: pageItem.permalink, validationElement: pageItem.permalink, disable: $component.isReserved" placeholder="e.g. /about" maxlength="2000" spellcheck="false">\r\n                \x3c!-- ko ifnot: $component.isReserved --\x3e\r\n                <button class="btn btn-danger input-group-btn" data-bind="validationMessageToggle: pageItem.permalink" type="button">!</button>\r\n                \x3c!-- /ko --\x3e\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="description" class="form-label">Description</label>\r\n            <textarea id="description" class="form-control" data-bind="textInput: pageItem.description" maxlength="256"></textarea>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="keywords" class="form-label">Keywords</label>\r\n            <div class="input-group">\r\n                <input type="text" id="keywords" class="form-control" data-bind="textInput: pageItem.keywords" placeholder="e.g. about" maxlength="256">\r\n            </div>\r\n        </div>\r\n\r\n        \x3c!-- ko if: $component.isSeoEnabled --\x3e\r\n        <div class="form-group">\r\n            <label class="form-label">Social share image</label>\r\n            <div class="dropzone">\r\n                <div class="flex-item dropzone-showbox" data-bind="background: socialShareImage, balloon: { component: { name: \'media-selector\', params: { onSelect: $component.onMediaSelected } }, position: \'top\' }">\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="jsonLd" class="form-label">JSON-LD</label>\r\n            <textarea id="jsonLd" class="form-control" data-bind="textInput: pageItem.jsonLd"></textarea>\r\n        </div>\r\n        \x3c!-- /ko --\x3e\r\n    </fieldset>\r\n\r\n    \x3c!-- ko ifnot: $component.isReserved --\x3e\r\n    <div class="flex-item btn-group">\r\n        <button class="btn" data-bind="confirm: { message: \'Are you sure you want to delete this page?\', onConfirm: deletePage }">\r\n            <i class="paperbits-icon paperbits-simple-remove"></i>\r\n            Delete page\r\n        </button>\r\n        <button class="btn" data-bind="click: copyPage">\r\n            <i class="paperbits-icon paperbits-single-copy-04"></i>\r\n            Copy page\r\n        </button>\r\n    </div>\r\n    \x3c!-- /ko --\x3e\r\n</div>'},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PageSelector=void 0;const ko=__webpack_require__(0),pageSelector_html_1=__webpack_require__(775),pageItem_1=__webpack_require__(150),decorators_1=__webpack_require__(2),anchorUtils_1=__webpack_require__(263),consts_1=__webpack_require__(17),persistence_1=__webpack_require__(23);let PageSelector=class{constructor(pageService){this.pageService=pageService,this.pages=ko.observableArray(),this.selectedPage=ko.observable(),this.searchPattern=ko.observable(""),this.working=ko.observable()}onMounted(){return __awaiter(this,void 0,void 0,(function*(){yield this.searchPages(),this.searchPattern.extend(consts_1.ChangeRateLimit).subscribe(this.searchPages)}))}searchPages(searchPattern=""){return __awaiter(this,void 0,void 0,(function*(){this.working(!0),this.pages([]);const query=persistence_1.Query.from().orderBy("title");searchPattern&&query.where("title",persistence_1.Operator.contains,searchPattern);const pageOfResults=yield this.pageService.search(query);this.currentPage=pageOfResults;const pageItems=pageOfResults.value.map(page=>new pageItem_1.PageItem(page));this.pages.push(...pageItems),this.working(!1)}))}loadNextPage(){var _a;return __awaiter(this,void 0,void 0,(function*(){if(!(null===(_a=this.currentPage)||void 0===_a?void 0:_a.takeNext))return;this.working(!0),this.currentPage=yield this.currentPage.takeNext();const pageItems=this.currentPage.value.map(page=>new pageItem_1.PageItem(page));if(this.pages.push(...pageItems),!this.selectedPage()&&this.preSelectedModel){const currentPermalink=this.preSelectedModel.href,current=pageItems.find(item=>item.permalink()===currentPermalink);if(current){yield this.selectPage(current);const currentAnchors=current.anchors();if(this.preSelectedModel.anchor){const currentAnchor=currentAnchors.find(item=>item.elementId===this.preSelectedModel.anchor);currentAnchor&&(yield this.selectAnchor(currentAnchor))}}}this.working(!1)}))}selectPage(page){return __awaiter(this,void 0,void 0,(function*(){if(this.selectedPage(page),!page.anchorsLoaded()){const anchors=yield this.getAnchors(page);if(page.anchors(anchors),page.anchorsLoaded(!0),anchors.length>0)return}this.onSelect&&this.onSelect(page.toContract()),this.onHyperlinkSelect&&this.onHyperlinkSelect(page.getHyperlink())}))}selectResource(resource){this.preSelectedModel=resource}selectAnchor(anchor){return __awaiter(this,void 0,void 0,(function*(){if(!this.onHyperlinkSelect)return;const selectedPage=this.selectedPage();anchor.isSelected(!0),selectedPage.selectedAnchor=anchor,this.onHyperlinkSelect(selectedPage.getHyperlink())}))}getAnchors(pageItem){return __awaiter(this,void 0,void 0,(function*(){const pageContent=yield this.pageService.getPageContent(pageItem.key);return anchorUtils_1.AnchorUtils.getHeadingNodes(pageContent,1,6).filter(item=>{var _a;return(null===(_a=item.nodes)||void 0===_a?void 0:_a.length)>0}).map(item=>{var _a,_b;const anchor=new pageItem_1.AnchorItem;return anchor.shortTitle=null===(_a=item.nodes[0])||void 0===_a?void 0:_a.text,anchor.elementId=null===(_b=item.attrs)||void 0===_b?void 0:_b.id,anchor})}))}isSelected(page){const selectedPage=this.selectedPage();return(null==selectedPage?void 0:selectedPage.key)===page.key}};__decorate([decorators_1.Param(),__metadata("design:type",Function)],PageSelector.prototype,"selectedPage",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],PageSelector.prototype,"onSelect",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],PageSelector.prototype,"onHyperlinkSelect",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],PageSelector.prototype,"onMounted",null),PageSelector=__decorate([decorators_1.Component({selector:"page-selector",template:pageSelector_html_1.default}),__metadata("design:paramtypes",[Object])],PageSelector),exports.PageSelector=PageSelector},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="editor flex flex-column">\r\n    <h1>\r\n        Pages\r\n    </h1>\r\n    <hr>\r\n    <fieldset class="flex-item form">\r\n        <div class="form-group">\r\n            <input class="form-control" type="search" role="searchbox" data-bind="textInput: searchPattern, valueUpdate: \'keyup\', focus: true" placeholder="Search pages..." aria-label="Search pages" aria-controls="searchResult">\r\n            <p id="searchResult" class="text-hide" role="region" aria-live="polite" data-bind="text: `Pages found: ${pages().length}`">\r\n            </p>\r\n        </div>\r\n    </fieldset>\r\n\r\n    \x3c!-- ko if: !working() && pages().length === 0 --\x3e\r\n    <div class="flex flex-column flex-item flex-item-grow list">\r\n        \x3c!-- ko if: searchPattern() === "" --\x3e\r\n        <p class="flex-item flex-item-grow text-center">\r\n            It seems that you don\'t have pages yet.\r\n        </p>\r\n        \x3c!-- /ko --\x3e\r\n\r\n        \x3c!-- ko if: searchPattern() !== ""  --\x3e\r\n        <p class="flex-item flex-item-grow text-center">\r\n            Could not find anything. Try to change search criteria.</p>\r\n        \x3c!-- /ko --\x3e\r\n    </div>\r\n    \x3c!-- /ko --\x3e\r\n\r\n    <div class="flex flex-column flex-item flex-item-grow list" data-bind="scrollable: true">\r\n        \x3c!-- ko foreach: { data: pages, as: \'page\' } --\x3e\r\n        <div class="list-item-group">\r\n            <a href="#" role="listitem" class="list-item" data-bind="css: { selected: $component.isSelected(page) }, click: $component.selectPage, attr: { title: page.title }">\r\n                <i class="paperbits-icon paperbits-single-content-03"></i>\r\n                <span class="list-item-label" data-bind="text: title"></span>\r\n            </a>\r\n\r\n            \x3c!-- ko if: anchors() && anchors().length > 0 --\x3e\r\n            <div class="list-item-group" data-bind="foreach: anchors" role="list">\r\n                <a href="#" role="listitem" class="list-item" data-bind="click: $component.selectAnchor, attr: { title: shortTitle }">\r\n                    <i class="paperbits-icon paperbits-anchor"></i>\r\n                    <span class="list-item-label" data-bind="text: shortTitle"></span>\r\n                </a>\r\n            </div>\r\n            \x3c!-- /ko --\x3e\r\n        </div>\r\n        \x3c!-- /ko --\x3e\r\n        \x3c!-- ko if: $component.working() --\x3e\r\n        <spinner></spinner>\r\n        \x3c!-- /ko --\x3e\r\n        \x3c!-- ko ifnot: $component.working --\x3e\r\n        <div class="list-edge" data-bind="whenInView: $component.loadNextPage"></div>\r\n        \x3c!-- /ko --\x3e\r\n    </div>\r\n</div>'},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.BrowserNotSupported=void 0;const decorators_1=__webpack_require__(2);let BrowserNotSupported=class{constructor(){}};BrowserNotSupported=__decorate([decorators_1.Component({selector:"browser-not-supported",template:"<div><h1>The app does not support this version of your browser, please update or use a different browser.</h1></div>"}),__metadata("design:paramtypes",[])],BrowserNotSupported),exports.BrowserNotSupported=BrowserNotSupported},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PageHost=void 0;const ko=__webpack_require__(0),decorators_1=__webpack_require__(2),ui_1=__webpack_require__(45),ko_1=__webpack_require__(100),styles_1=__webpack_require__(8);let PageHost=class{constructor(contentViewModelBinder,router,eventManager,viewManager,layoutService,pageService,styleCompiler){this.contentViewModelBinder=contentViewModelBinder,this.router=router,this.eventManager=eventManager,this.viewManager=viewManager,this.layoutService=layoutService,this.pageService=pageService,this.styleCompiler=styleCompiler,this.contentViewModel=ko.observable(),this.pageKey=ko.observable()}initialize(){return __awaiter(this,void 0,void 0,(function*(){yield this.refreshContent(),this.router.addRouteChangeListener(this.onRouteChange),this.eventManager.addEventListener("onDataPush",()=>this.onDataPush()),this.eventManager.addEventListener("onLocaleChange",()=>this.onLocaleUpdate())}))}onDataPush(){return __awaiter(this,void 0,void 0,(function*(){this.viewManager.mode!==ui_1.ViewManagerMode.selecting&&this.viewManager.mode!==ui_1.ViewManagerMode.selected||(yield this.refreshContent())}))}onLocaleUpdate(){return __awaiter(this,void 0,void 0,(function*(){yield this.refreshContent()}))}refreshContent(){return __awaiter(this,void 0,void 0,(function*(){this.viewManager.setShutter();const route=this.router.getCurrentRoute();let pageContract=yield this.pageService.getPageByPermalink(route.path);if(!pageContract&&(pageContract=yield this.pageService.getPageByPermalink("/404"),!pageContract))return void this.viewManager.removeShutter();const pageContentContract=yield this.pageService.getPageContent(pageContract.key);this.pageKey(pageContract.key);const styleManager=new styles_1.StyleManager(this.eventManager),styleSheet=yield this.styleCompiler.getStyleSheet();styleManager.setStyleSheet(styleSheet);const bindingContext={contentItemKey:pageContract.key,styleManager:styleManager,navigationPath:route.path,routeKind:"page",template:{page:{value:pageContentContract,onValueUpdate:updatedPostContract=>__awaiter(this,void 0,void 0,(function*(){yield this.pageService.updatePageContent(pageContract.key,updatedPostContract)}))}}},layoutContract=yield this.layoutService.getLayoutByPermalink(route.path),layoutContentContract=yield this.layoutService.getLayoutContent(layoutContract.key),contentViewModel=yield this.contentViewModelBinder.getContentViewModelByKey(layoutContentContract,bindingContext);contentViewModel.widgetBinding.provides=["html","js","interaction"],this.contentViewModel(contentViewModel),this.viewManager.removeShutter()}))}onRouteChange(route){return __awaiter(this,void 0,void 0,(function*(){route.previous&&route.previous.path===route.path||(yield this.refreshContent())}))}dispose(){this.router.removeRouteChangeListener(this.onRouteChange)}};__decorate([decorators_1.Param(),__metadata("design:type",Function)],PageHost.prototype,"pageKey",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],PageHost.prototype,"initialize",null),__decorate([decorators_1.OnDestroyed(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],PageHost.prototype,"dispose",null),PageHost=__decorate([decorators_1.Component({selector:"page-host",template:"\x3c!-- ko if: contentViewModel --\x3e\x3c!-- ko widget: contentViewModel, grid: {} --\x3e\x3c!-- /ko --\x3e\x3c!-- /ko --\x3e"}),__metadata("design:paramtypes",[ko_1.ContentViewModelBinder,Object,Object,Object,Object,Object,Object])],PageHost),exports.PageHost=PageHost},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PagesToolButton=void 0;exports.PagesToolButton=class{constructor(viewManager){this.viewManager=viewManager,this.iconClass="paperbits-icon paperbits-menu-4",this.title="Pages"}onActivate(){this.viewManager.clearJourney();const view={heading:this.title,helpText:"<h1>Pages</h1><p>Add or edit pages of your website. Each page has a unique URL, which also automatically defines the layout it is part of.</p>",component:{name:"pages"}};this.viewManager.openViewAsWorkshop(view)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MediaWorkshopModule=void 0;const media_1=__webpack_require__(780),mediaDetails_1=__webpack_require__(782),mediaSelector_1=__webpack_require__(784),cropper_1=__webpack_require__(283),mediaToolButton_1=__webpack_require__(788),media_2=__webpack_require__(134);exports.MediaWorkshopModule=class{register(injector){injector.bind("mediaWorkshop",media_1.MediaWorkshop),injector.bind("mediaDetailsWorkshop",mediaDetails_1.MediaDetailsWorkshop),injector.bind("mediaSelector",mediaSelector_1.MediaSelector),injector.bind("pictureCropper",cropper_1.PictureCropper),injector.bindToCollection("hyperlinkProviders",media_2.MediaHyperlinkProvider),injector.bindToCollection("workshopSections",mediaToolButton_1.MediaToolButton)}}},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MediaWorkshop=void 0;const ko=__webpack_require__(0),Utils=__webpack_require__(6),media_html_1=__webpack_require__(781),mediaItem_1=__webpack_require__(87),keyboard_1=__webpack_require__(93),decorators_1=__webpack_require__(2),consts_1=__webpack_require__(17),persistence_1=__webpack_require__(23);let MediaWorkshop=class{constructor(eventManager,mediaService,viewManager,widgetService){this.eventManager=eventManager,this.mediaService=mediaService,this.viewManager=viewManager,this.widgetService=widgetService,this.working=ko.observable(!1),this.mediaItems=ko.observableArray(),this.searchPattern=ko.observable(""),this.selectedMediaItem=ko.observable()}initialize(){return __awaiter(this,void 0,void 0,(function*(){yield this.searchMedia(),this.searchPattern.extend(consts_1.ChangeRateLimit).subscribe(this.searchMedia)}))}searchMedia(searchPattern=""){return __awaiter(this,void 0,void 0,(function*(){this.working(!0),this.mediaItems([]);const query=persistence_1.Query.from().orderBy("fileName");searchPattern&&query.where("fileName",persistence_1.Operator.contains,searchPattern);const mediaOfResults=yield this.mediaService.search(query);this.currentPage=mediaOfResults;const mediaItems=mediaOfResults.value.map(media=>new mediaItem_1.MediaItem(media));this.mediaItems.push(...mediaItems),this.working(!1)}))}loadNextPage(){var _a;return __awaiter(this,void 0,void 0,(function*(){if(!(null===(_a=this.currentPage)||void 0===_a?void 0:_a.takeNext)||this.working())return;this.working(!0),this.currentPage=yield this.currentPage.takeNext();const mediaItems=this.currentPage.value.map(page=>new mediaItem_1.MediaItem(page));this.mediaItems.push(...mediaItems),this.working(!1)}))}uploadMedia(){return __awaiter(this,void 0,void 0,(function*(){const files=yield this.viewManager.openUploadDialog();this.working(!0);const uploadPromises=[];for(const file of files){const content=yield Utils.readFileAsByteArray(file),uploadPromise=this.mediaService.createMedia(file.name,content,file.type);this.viewManager.notifyProgress(uploadPromise,"Media library",`Uploading ${file.name}...`),uploadPromises.push(uploadPromise)}yield Promise.all(uploadPromises),yield this.searchMedia(),this.working(!1)}))}linkMedia(){return __awaiter(this,void 0,void 0,(function*(){const mediaContract=yield this.mediaService.createMediaUrl(mediaItem_1.defaultFileName,mediaItem_1.defaultURL,"image/svg+xml"),mediaItem=new mediaItem_1.MediaItem(mediaContract);this.mediaItems.push(mediaItem),this.selectMedia(mediaItem)}))}selectMedia(mediaItem){this.selectedMediaItem(mediaItem);const view={heading:"Media file",component:{name:"media-details-workshop",params:{mediaItem:mediaItem,onDeleteCallback:()=>{this.searchMedia()}}}};this.viewManager.openViewAsWorkshop(view)}deleteSelectedMedia(){return __awaiter(this,void 0,void 0,(function*(){this.viewManager.closeWorkshop("media-details-workshop"),yield this.mediaService.deleteMedia(this.selectedMediaItem().toMedia()),yield this.searchMedia()}))}onDragStart(item){item.widgetFactoryResult=item.widgetOrder.createWidget();const widgetElement=item.widgetFactoryResult.element,widgetModel=item.widgetFactoryResult.widgetModel,widgetBinding=item.widgetFactoryResult.widgetBinding;return this.viewManager.beginDrag({sourceModel:widgetModel,sourceBinding:widgetBinding}),widgetElement}onDragEnd(item){item.widgetFactoryResult.element.remove();const dragSession=this.viewManager.getDragSession(),acceptorBinding=dragSession.targetBinding;if(acceptorBinding&&acceptorBinding.handler){this.widgetService.getWidgetHandler(acceptorBinding.handler).onDragDrop(dragSession)}this.eventManager.dispatchEvent("virtualDragEnd")}onKeyDown(item,event){event.keyCode===keyboard_1.Keys.Delete&&this.deleteSelectedMedia()}isSelected(media){const selectedMedia=this.selectedMediaItem();return(null==selectedMedia?void 0:selectedMedia.key)===media.key}};__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],MediaWorkshop.prototype,"initialize",null),MediaWorkshop=__decorate([decorators_1.Component({selector:"media",template:media_html_1.default}),__metadata("design:paramtypes",[Object,Object,Object,Object])],MediaWorkshop),exports.MediaWorkshop=MediaWorkshop},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="flex flex-column fit">\r\n    <fieldset class="flex-item form">\r\n        <div class="form-group">\r\n            <input class="form-control" type="search" role="searchbox" data-bind="textInput: searchPattern, valueUpdate: \'keyup\', focus: true" placeholder="Search media..." aria-label="Search media" aria-controls="searchResult">\r\n            <p id="searchResult" class="text-hide" role="region" aria-live="polite" data-bind="text: `Media files found: ${mediaItems().length}`">\r\n            </p>\r\n        </div>\r\n    </fieldset>\r\n\r\n    \x3c!-- ko if: !working() && mediaItems().length === 0 --\x3e\r\n\r\n    \x3c!-- ko if: searchPattern() === "" --\x3e\r\n    <p class="flex-item flex-item-grow text-center">It seems that you don\'t have media yet. Would you like to\r\n        <a href="#" class="btn-link" data-bind="click: uploadMedia">upload one</a>?\r\n    </p>\r\n    \x3c!-- /ko --\x3e\r\n\r\n    \x3c!-- ko if: searchPattern() !== "" --\x3e\r\n    <p class="flex-item flex-item-grow text-center">Could not find anything. Try to change search criteria.</p>\r\n    \x3c!-- /ko --\x3e\r\n\r\n    \x3c!-- /ko --\x3e\r\n\r\n    <div class="flex flex-row flex-wrap flex-item flex-item-grow" role="list" data-bind="scrollable: true">\r\n        \x3c!-- ko foreach: { data: mediaItems, as: \'media\' } --\x3e\r\n        <a href="#" role="listitem" class="list-item list-item-image" data-bind="click: $component.selectMedia, css: { selected: $component.isSelected(media) }, attr: { \'aria-label\': media.fileName() },\r\n            balloon: { activateOn: \'hoverOrFocus\', delay: 800, position: \'right\', component: { name: \'media-display\', params: { item: media }}}">\r\n            <span class="thumbnail" data-bind="style: { \'background-image\': \'url(\'+media.thumbnailUrl()+\')\' }, attr: { title: media.fileName() }, event: { keydown: $component.onKeyDown }">\r\n            </span>\r\n        </a>\r\n        \x3c!-- /ko --\x3e\r\n        \x3c!-- ko if: $component.working --\x3e\r\n        <spinner></spinner>\r\n        \x3c!-- /ko --\x3e\r\n        \x3c!-- ko ifnot: $component.working --\x3e\r\n        <div class="list-edge" data-bind="whenInView: $component.loadNextPage"></div>\r\n        \x3c!-- /ko --\x3e\r\n    </div>\r\n\r\n    <div class="flex-item btn-group">\r\n        <button class="btn" data-bind="click: uploadMedia">\r\n            <i class="paperbits-icon paperbits-square-upload"></i>\r\n            Upload file\r\n        </button>\r\n        <button class="btn" data-bind="click: linkMedia">\r\n            <i class="paperbits-icon paperbits-link-69-2"></i>\r\n            Link file\r\n        </button>\r\n    </div>\r\n</div>'},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MediaDetailsWorkshop=void 0;const FileSaver=__webpack_require__(282),mediaDetails_html_1=__webpack_require__(783),mediaItem_1=__webpack_require__(87),decorators_1=__webpack_require__(2),consts_1=__webpack_require__(17);let MediaDetailsWorkshop=class{constructor(mediaService,viewManager){this.mediaService=mediaService,this.viewManager=viewManager,this.contentTypes=["image/gif","image/jpeg","image/png","image/tiff","image/x-icon","image/svg+xml","video/mpeg","video/mp4","video/quicktime","video/x-ms-wmv","video/x-msvideo","video/x-flv","video/webm"]}onMounted(){return __awaiter(this,void 0,void 0,(function*(){this.mediaItem.fileName.extend(consts_1.ChangeRateLimit).extend({required:!0,onlyValid:!0}).subscribe(this.updateMedia),this.mediaItem.downloadUrl.extend(consts_1.ChangeRateLimit).extend({required:!0,onlyValid:!0}).subscribe(this.updateMediaUrl),this.mediaItem.contentType.extend(consts_1.ChangeRateLimit).extend({required:!0,onlyValid:!0}).subscribe(this.updateMedia),this.mediaItem.description.extend(consts_1.ChangeRateLimit).subscribe(this.updateMedia),this.mediaItem.keywords.extend(consts_1.ChangeRateLimit).subscribe(this.updateMedia),this.mediaItem.permalink.extend(consts_1.ChangeRateLimit).extend({required:!0,validPermalink:this.mediaItem.key,onlyValid:!0}).subscribe(this.updateMedia)}))}updateMediaUrl(){return __awaiter(this,void 0,void 0,(function*(){if(this.mediaItem.isDefaultFileName()&&!this.mediaItem.isDefaultUrl()){const newName=this.mediaItem.downloadUrl().split("/").pop();this.mediaItem.updateDefault(newName)}yield this.updateMedia()}))}updateMedia(){return __awaiter(this,void 0,void 0,(function*(){yield this.mediaService.updateMedia(this.mediaItem.toMedia())}))}deleteMedia(){return __awaiter(this,void 0,void 0,(function*(){yield this.mediaService.deleteMedia(this.mediaItem.toMedia()),this.viewManager.notifySuccess("Media library",`File "${this.mediaItem.fileName()}" was deleted.`),this.viewManager.closeWorkshop("media-details-workshop"),this.onDeleteCallback&&this.onDeleteCallback()}))}downloadMedia(){return __awaiter(this,void 0,void 0,(function*(){FileSaver.saveAs(this.mediaItem.downloadUrl(),this.mediaItem.fileName(),{type:this.mediaItem.contentType()})}))}openCropper(){this.viewManager.openViewAsPopup({heading:"Edit picture",component:{name:"picture-cropper",params:{mediaItem:this.mediaItem}},resize:"vertically horizontally"})}};__decorate([decorators_1.Param(),__metadata("design:type",mediaItem_1.MediaItem)],MediaDetailsWorkshop.prototype,"mediaItem",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],MediaDetailsWorkshop.prototype,"onDeleteCallback",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],MediaDetailsWorkshop.prototype,"onMounted",null),MediaDetailsWorkshop=__decorate([decorators_1.Component({selector:"media-details-workshop",template:mediaDetails_html_1.default}),__metadata("design:paramtypes",[Object,Object])],MediaDetailsWorkshop),exports.MediaDetailsWorkshop=MediaDetailsWorkshop},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="flex flex-column fit">\r\n    <fieldset class="flex-item flex-item-grow form" data-bind="scrollable: true">\r\n        <div class="form-group">\r\n            <label for="fileName" class="form-label">\r\n                Name\r\n            </label>\r\n            <div class="input-group">\r\n                <input type="text" id="fileName" class="form-control" data-bind="textInput: mediaItem.fileName, validationElement: mediaItem.fileName" placeholder="i.e. Orders" maxlength="256">\r\n                <button class="btn btn-danger input-group-btn" data-bind="validationMessageToggle: mediaItem.fileName" type="button">!</button>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="form-group">\r\n            <label for="permalink" class="form-label">\r\n                Permalink\r\n            </label>\r\n            <div class="input-group">\r\n                <input type="text" id="permalink" class="form-control" data-bind="textInput: mediaItem.permalink, validationElement: mediaItem.permalink" placeholder="http://www.site.com/" maxlength="2000" spellcheck="false">\r\n                <button class="btn btn-danger input-group-btn" data-bind="validationMessageToggle: mediaItem.permalink" type="button">!</button>\r\n            </div>\r\n        </div>\r\n\r\n        \x3c!-- ko ifnot: mediaItem.blobKey  --\x3e\r\n        <div class="form-group">\r\n            <label for="downloadUrl" class="form-label">\r\n                Reference URL\r\n            </label>\r\n            <div class="input-group">\r\n                <input type="text" id="downloadUrl" class="form-control" data-bind="textInput: mediaItem.downloadUrl, validationElement: mediaItem.downloadUrl" placeholder="https://cdn.paperbits.io/images/logo.svg" maxlength="2000" spellcheck="false">\r\n                <button class="btn btn-danger input-group-btn" data-bind="validationMessageToggle: mediaItem.downloadUrl" type="button">!</button>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="contentType" class="form-label">\r\n                Content type\r\n            </label>\r\n            <select id="contentType" class="form-control" data-bind="options: contentTypes, value: mediaItem.contentType"></select>\r\n        </div>\r\n        \x3c!-- /ko --\x3e\r\n\r\n        <div class="form-group">\r\n            <label for="description" class="form-label">\r\n                Description\r\n            </label>\r\n            <textarea id="description" class="form-control" data-bind="textInput: mediaItem.description" maxlength="256"></textarea>\r\n        </div>\r\n\r\n        <div class="form-group">\r\n            <label for="keywords" class="form-label">\r\n                Keywords\r\n            </label>\r\n            <input type="text" id="keywords" class="form-control" data-bind="textInput: mediaItem.keywords" maxlength="256">\r\n        </div>\r\n    </fieldset>\r\n\r\n    <div class="flex-item btn-group">\r\n        \x3c!-- ko if: mediaItem.blobKey  --\x3e\r\n        <button class="btn" data-bind="click: openCropper">\r\n            <i class="paperbits-icon paperbits-crop"></i>\r\n            Crop\r\n        </button>\r\n        \x3c!-- /ko --\x3e\r\n\r\n        <button class="btn" data-bind="click: downloadMedia">\r\n            <i class="paperbits-icon paperbits-square-download"></i>\r\n            Download\r\n        </button>\r\n\r\n        <button class="btn" data-bind="confirm: { message: \'Are you sure you want to delete this media?\', onConfirm: deleteMedia }">\r\n            <i class="paperbits-icon paperbits-simple-remove"></i>\r\n            Delete\r\n        </button>\r\n    </div>\r\n</div>'},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MediaSelector=void 0;const ko=__webpack_require__(0),Utils=__webpack_require__(6),mediaSelector_html_1=__webpack_require__(785),mediaItem_1=__webpack_require__(87),decorators_1=__webpack_require__(2),consts_1=__webpack_require__(17),persistence_1=__webpack_require__(23);let MediaSelector=class{constructor(eventManager,mediaService,viewManager,widgetService){this.eventManager=eventManager,this.mediaService=mediaService,this.viewManager=viewManager,this.widgetService=widgetService,this.mediaItems=ko.observableArray(),this.selectedMedia=ko.observable(),this.searchPattern=ko.observable(),this.working=ko.observable(!1)}initialize(){return __awaiter(this,void 0,void 0,(function*(){yield this.searchMedia(),this.searchPattern.extend(consts_1.ChangeRateLimit).subscribe(this.searchMedia)}))}searchMedia(searchPattern=""){return __awaiter(this,void 0,void 0,(function*(){this.working(!0),this.mediaItems([]);const query=persistence_1.Query.from().orderBy("fileName");searchPattern&&query.where("fileName",persistence_1.Operator.contains,searchPattern);const mediaOfResults=yield this.mediaService.search(query);this.currentPage=mediaOfResults;const mediaItems=mediaOfResults.value.map(media=>new mediaItem_1.MediaItem(media));this.mediaItems.push(...mediaItems),this.working(!1)}))}loadNextPage(){var _a;return __awaiter(this,void 0,void 0,(function*(){if(!(null===(_a=this.currentPage)||void 0===_a?void 0:_a.takeNext)||this.working())return;this.working(!0),this.currentPage=yield this.currentPage.takeNext();const mediaItems=this.currentPage.value.map(page=>new mediaItem_1.MediaItem(page));this.mediaItems.push(...mediaItems),this.working(!1)}))}selectMedia(media){this.selectedMedia(media),this.onSelect&&this.onSelect(media.toMedia()),this.onHyperlinkSelect&&this.onHyperlinkSelect(media.getHyperlink())}selectNone(){this.selectedMedia(void 0),this.onSelect&&this.onSelect(null)}onMediaUploaded(){this.searchMedia()}uploadMedia(){return __awaiter(this,void 0,void 0,(function*(){const files=yield this.viewManager.openUploadDialog();this.working(!0);const uploadPromises=[];for(const file of files){const content=yield Utils.readFileAsByteArray(file),uploadPromise=this.mediaService.createMedia(file.name,content,file.type);this.viewManager.notifyProgress(uploadPromise,"Media library",`Uploading ${file.name}...`),uploadPromises.push(uploadPromise)}const results=yield Promise.all(uploadPromises);yield this.searchMedia();const mediaItem=new mediaItem_1.MediaItem(results[0]);this.selectMedia(mediaItem),this.working(!1)}))}onDragStart(item){item.widgetFactoryResult=item.widgetOrder.createWidget();const widgetElement=item.widgetFactoryResult.element,widgetModel=item.widgetFactoryResult.widgetModel,widgetBinding=item.widgetFactoryResult.widgetBinding;return this.viewManager.beginDrag({sourceModel:widgetModel,sourceBinding:widgetBinding}),widgetElement}onDragEnd(item){item.widgetFactoryResult.element.remove();const dragSession=this.viewManager.getDragSession(),acceptorBinding=dragSession.targetBinding;if(acceptorBinding&&acceptorBinding.handler){this.widgetService.getWidgetHandler(acceptorBinding.handler).onDragDrop(dragSession)}this.eventManager.dispatchEvent("virtualDragEnd")}isSelected(media){const selectedMedia=this.selectedMedia();return(null==selectedMedia?void 0:selectedMedia.key)===media.key}};__decorate([decorators_1.Param(),__metadata("design:type",Function)],MediaSelector.prototype,"selectedMedia",void 0),__decorate([decorators_1.Param(),__metadata("design:type",String)],MediaSelector.prototype,"mimeType",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],MediaSelector.prototype,"onSelect",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],MediaSelector.prototype,"onHyperlinkSelect",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],MediaSelector.prototype,"initialize",null),MediaSelector=__decorate([decorators_1.Component({selector:"media-selector",template:mediaSelector_html_1.default}),__metadata("design:paramtypes",[Object,Object,Object,Object])],MediaSelector),exports.MediaSelector=MediaSelector},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="editor">\r\n    <h1>\r\n        Media\r\n    </h1>\r\n    <hr>\r\n\r\n    <fieldset class="flex-item form">\r\n        <div class="form-group">\r\n            <input class="form-control" type="search" role="searchbox" data-bind="textInput: searchPattern, valueUpdate: \'keyup\', focus: true" placeholder="Search media..." aria-label="Search media" aria-controls="searchResult">\r\n            <p id="searchResult" class="text-hide" role="region" aria-live="polite" data-bind="text: `Media files found: ${mediaItems().length}`">\r\n            </p>\r\n        </div>\r\n    </fieldset>\r\n\r\n    \x3c!-- ko if: !working() && mediaItems().length === 0 --\x3e\r\n    <div class="flex flex-column flex-item flex-item-grow list">\r\n        \x3c!-- ko if: searchPattern() === "" --\x3e\r\n        <p class="flex-item flex-item-grow text-center">It seems that you don\'t have media yet. Would you like to\r\n            <a href="#" class="btn-link" data-bind="click: uploadMedia">upload one</a>?\r\n        </p>\r\n        \x3c!-- /ko --\x3e\r\n\r\n        \x3c!-- ko if: searchPattern() !== ""  --\x3e\r\n        <p class="flex-item flex-item-grow text-center">Could not find anything. Try to change search criteria.</p>\r\n        \x3c!-- /ko --\x3e\r\n    </div>\r\n\r\n    \x3c!-- /ko --\x3e\r\n\r\n    <div class="list flex flex-column">\r\n        <div class="flex flex-row flex-wrap flex-item flex-item-grow" role="list" data-bind="scrollable: true">\r\n            \x3c!-- ko foreach: { data: mediaItems, as: \'media\' } --\x3e\r\n            <a href="#" role="listitem" class="list-item list-item-image" data-bind="click: $component.selectMedia, css: { selected: $component.isSelected(media) }, attr: { \'aria-label\': media.fileName() },\r\n            balloon: { activateOn: \'hoverOrFocus\', delay: 800, position: \'right\', component: { name: \'media-display\', params: { item: media }}}">\r\n                <span class="thumbnail" data-bind="style: { \'background-image\': \'url(\'+media.thumbnailUrl()+\')\' }, attr: { title: media.fileName() }, event: { keydown: $component.onKeyDown }">\r\n                </span>\r\n            </a>\r\n            \x3c!-- /ko --\x3e\r\n            \x3c!-- ko if: $component.working() --\x3e\r\n            <spinner></spinner>\r\n            \x3c!-- /ko --\x3e\r\n            \x3c!-- ko ifnot: $component.working --\x3e\r\n            <div class="list-edge" data-bind="whenInView: $component.loadNextPage"></div>\r\n            \x3c!-- /ko --\x3e\r\n        </div>\r\n\r\n        <div class="flex-item btn-group">\r\n            <button class="btn" data-bind="click: $component.uploadMedia">\r\n                <i class="paperbits-icon paperbits-square-upload"></i>\r\n                Upload file\r\n            </button>\r\n            <button class="btn" data-bind="click: $component.selectNone">\r\n                <i class="paperbits-icon paperbits-ban"></i>\r\n                None\r\n            </button>\r\n        </div>\r\n    </div>\r\n</div>'},function(module,exports,__webpack_require__){module.exports=function(){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread2(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _iterableToArray(iter){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(iter))return Array.from(iter)}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var IS_BROWSER="undefined"!=typeof window&&void 0!==window.document,WINDOW=IS_BROWSER?window:{},IS_TOUCH_DEVICE=!(!IS_BROWSER||!WINDOW.document.documentElement)&&"ontouchstart"in WINDOW.document.documentElement,HAS_POINTER_EVENT=!!IS_BROWSER&&"PointerEvent"in WINDOW,NAMESPACE="cropper",ACTION_ALL="all",ACTION_CROP="crop",ACTION_MOVE="move",ACTION_ZOOM="zoom",ACTION_EAST="e",ACTION_WEST="w",ACTION_SOUTH="s",ACTION_NORTH="n",ACTION_NORTH_EAST="ne",ACTION_NORTH_WEST="nw",ACTION_SOUTH_EAST="se",ACTION_SOUTH_WEST="sw",CLASS_CROP="".concat(NAMESPACE,"-crop"),CLASS_DISABLED="".concat(NAMESPACE,"-disabled"),CLASS_HIDDEN="".concat(NAMESPACE,"-hidden"),CLASS_HIDE="".concat(NAMESPACE,"-hide"),CLASS_INVISIBLE="".concat(NAMESPACE,"-invisible"),CLASS_MODAL="".concat(NAMESPACE,"-modal"),CLASS_MOVE="".concat(NAMESPACE,"-move"),DATA_ACTION="".concat(NAMESPACE,"Action"),DATA_PREVIEW="".concat(NAMESPACE,"Preview"),DRAG_MODE_CROP="crop",DRAG_MODE_MOVE="move",DRAG_MODE_NONE="none",EVENT_CROP="crop",EVENT_CROP_END="cropend",EVENT_CROP_MOVE="cropmove",EVENT_CROP_START="cropstart",EVENT_DBLCLICK="dblclick",EVENT_TOUCH_START=IS_TOUCH_DEVICE?"touchstart":"mousedown",EVENT_TOUCH_MOVE=IS_TOUCH_DEVICE?"touchmove":"mousemove",EVENT_TOUCH_END=IS_TOUCH_DEVICE?"touchend touchcancel":"mouseup",EVENT_POINTER_DOWN=HAS_POINTER_EVENT?"pointerdown":EVENT_TOUCH_START,EVENT_POINTER_MOVE=HAS_POINTER_EVENT?"pointermove":EVENT_TOUCH_MOVE,EVENT_POINTER_UP=HAS_POINTER_EVENT?"pointerup pointercancel":EVENT_TOUCH_END,EVENT_READY="ready",EVENT_RESIZE="resize",EVENT_WHEEL="wheel",EVENT_ZOOM="zoom",MIME_TYPE_JPEG="image/jpeg",REGEXP_ACTIONS=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,REGEXP_DATA_URL=/^data:/,REGEXP_DATA_URL_JPEG=/^data:image\/jpeg;base64,/,REGEXP_TAG_NAME=/^img|canvas$/i,MIN_CONTAINER_WIDTH=200,MIN_CONTAINER_HEIGHT=100,DEFAULTS={viewMode:0,dragMode:DRAG_MODE_CROP,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:MIN_CONTAINER_WIDTH,minContainerHeight:MIN_CONTAINER_HEIGHT,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},TEMPLATE='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',isNaN=Number.isNaN||WINDOW.isNaN;function isNumber(value){return"number"==typeof value&&!isNaN(value)}var isPositiveNumber=function(value){return value>0&&value<1/0};function isUndefined(value){return void 0===value}function isObject(value){return"object"===_typeof(value)&&null!==value}var hasOwnProperty=Object.prototype.hasOwnProperty;function isPlainObject(value){if(!isObject(value))return!1;try{var _constructor=value.constructor,prototype=_constructor.prototype;return _constructor&&prototype&&hasOwnProperty.call(prototype,"isPrototypeOf")}catch(error){return!1}}function isFunction(value){return"function"==typeof value}var slice=Array.prototype.slice;function toArray(value){return Array.from?Array.from(value):slice.call(value)}function forEach(data,callback){return data&&isFunction(callback)&&(Array.isArray(data)||isNumber(data.length)?toArray(data).forEach((function(value,key){callback.call(data,value,key,data)})):isObject(data)&&Object.keys(data).forEach((function(key){callback.call(data,data[key],key,data)}))),data}var assign=Object.assign||function(target){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];return isObject(target)&&args.length>0&&args.forEach((function(arg){isObject(arg)&&Object.keys(arg).forEach((function(key){target[key]=arg[key]}))})),target},REGEXP_DECIMALS=/\.\d*(?:0|9){12}\d*$/;function normalizeDecimalNumber(value){var times=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return REGEXP_DECIMALS.test(value)?Math.round(value*times)/times:value}var REGEXP_SUFFIX=/^width|height|left|top|marginLeft|marginTop$/;function setStyle(element,styles){var style=element.style;forEach(styles,(function(value,property){REGEXP_SUFFIX.test(property)&&isNumber(value)&&(value="".concat(value,"px")),style[property]=value}))}function hasClass(element,value){return element.classList?element.classList.contains(value):element.className.indexOf(value)>-1}function addClass(element,value){if(value)if(isNumber(element.length))forEach(element,(function(elem){addClass(elem,value)}));else if(element.classList)element.classList.add(value);else{var className=element.className.trim();className?className.indexOf(value)<0&&(element.className="".concat(className," ").concat(value)):element.className=value}}function removeClass(element,value){value&&(isNumber(element.length)?forEach(element,(function(elem){removeClass(elem,value)})):element.classList?element.classList.remove(value):element.className.indexOf(value)>=0&&(element.className=element.className.replace(value,"")))}function toggleClass(element,value,added){value&&(isNumber(element.length)?forEach(element,(function(elem){toggleClass(elem,value,added)})):added?addClass(element,value):removeClass(element,value))}var REGEXP_CAMEL_CASE=/([a-z\d])([A-Z])/g;function toParamCase(value){return value.replace(REGEXP_CAMEL_CASE,"$1-$2").toLowerCase()}function getData(element,name){return isObject(element[name])?element[name]:element.dataset?element.dataset[name]:element.getAttribute("data-".concat(toParamCase(name)))}function setData(element,name,data){isObject(data)?element[name]=data:element.dataset?element.dataset[name]=data:element.setAttribute("data-".concat(toParamCase(name)),data)}function removeData(element,name){if(isObject(element[name]))try{delete element[name]}catch(error){element[name]=void 0}else if(element.dataset)try{delete element.dataset[name]}catch(error){element.dataset[name]=void 0}else element.removeAttribute("data-".concat(toParamCase(name)))}var REGEXP_SPACES=/\s\s*/,onceSupported=function(){var supported=!1;if(IS_BROWSER){var once=!1,listener=function(){},options=Object.defineProperty({},"once",{get:function(){return supported=!0,once},set:function(value){once=value}});WINDOW.addEventListener("test",listener,options),WINDOW.removeEventListener("test",listener,options)}return supported}();function removeListener(element,type,listener){var options=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},handler=listener;type.trim().split(REGEXP_SPACES).forEach((function(event){if(!onceSupported){var listeners=element.listeners;listeners&&listeners[event]&&listeners[event][listener]&&(handler=listeners[event][listener],delete listeners[event][listener],0===Object.keys(listeners[event]).length&&delete listeners[event],0===Object.keys(listeners).length&&delete element.listeners)}element.removeEventListener(event,handler,options)}))}function addListener(element,type,listener){var options=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},_handler=listener;type.trim().split(REGEXP_SPACES).forEach((function(event){if(options.once&&!onceSupported){var _element$listeners=element.listeners,listeners=void 0===_element$listeners?{}:_element$listeners;_handler=function(){delete listeners[event][listener],element.removeEventListener(event,_handler,options);for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];listener.apply(element,args)},listeners[event]||(listeners[event]={}),listeners[event][listener]&&element.removeEventListener(event,listeners[event][listener],options),listeners[event][listener]=_handler,element.listeners=listeners}element.addEventListener(event,_handler,options)}))}function dispatchEvent(element,type,data){var event;return isFunction(Event)&&isFunction(CustomEvent)?event=new CustomEvent(type,{detail:data,bubbles:!0,cancelable:!0}):(event=document.createEvent("CustomEvent")).initCustomEvent(type,!0,!0,data),element.dispatchEvent(event)}function getOffset(element){var box=element.getBoundingClientRect();return{left:box.left+(window.pageXOffset-document.documentElement.clientLeft),top:box.top+(window.pageYOffset-document.documentElement.clientTop)}}var location=WINDOW.location,REGEXP_ORIGINS=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function isCrossOriginURL(url){var parts=url.match(REGEXP_ORIGINS);return null!==parts&&(parts[1]!==location.protocol||parts[2]!==location.hostname||parts[3]!==location.port)}function addTimestamp(url){var timestamp="timestamp=".concat((new Date).getTime());return url+(-1===url.indexOf("?")?"?":"&")+timestamp}function getTransforms(_ref){var rotate=_ref.rotate,scaleX=_ref.scaleX,scaleY=_ref.scaleY,translateX=_ref.translateX,translateY=_ref.translateY,values=[];isNumber(translateX)&&0!==translateX&&values.push("translateX(".concat(translateX,"px)")),isNumber(translateY)&&0!==translateY&&values.push("translateY(".concat(translateY,"px)")),isNumber(rotate)&&0!==rotate&&values.push("rotate(".concat(rotate,"deg)")),isNumber(scaleX)&&1!==scaleX&&values.push("scaleX(".concat(scaleX,")")),isNumber(scaleY)&&1!==scaleY&&values.push("scaleY(".concat(scaleY,")"));var transform=values.length?values.join(" "):"none";return{WebkitTransform:transform,msTransform:transform,transform:transform}}function getMaxZoomRatio(pointers){var pointers2=_objectSpread2({},pointers),maxRatio=0;return forEach(pointers,(function(pointer,pointerId){delete pointers2[pointerId],forEach(pointers2,(function(pointer2){var x1=Math.abs(pointer.startX-pointer2.startX),y1=Math.abs(pointer.startY-pointer2.startY),x2=Math.abs(pointer.endX-pointer2.endX),y2=Math.abs(pointer.endY-pointer2.endY),z1=Math.sqrt(x1*x1+y1*y1),ratio=(Math.sqrt(x2*x2+y2*y2)-z1)/z1;Math.abs(ratio)>Math.abs(maxRatio)&&(maxRatio=ratio)}))})),maxRatio}function getPointer(_ref2,endOnly){var pageX=_ref2.pageX,pageY=_ref2.pageY,end={endX:pageX,endY:pageY};return endOnly?end:_objectSpread2({startX:pageX,startY:pageY},end)}function getPointersCenter(pointers){var pageX=0,pageY=0,count=0;return forEach(pointers,(function(_ref3){var startX=_ref3.startX,startY=_ref3.startY;pageX+=startX,pageY+=startY,count+=1})),{pageX:pageX/=count,pageY:pageY/=count}}function getAdjustedSizes(_ref4){var aspectRatio=_ref4.aspectRatio,height=_ref4.height,width=_ref4.width,type=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",isValidWidth=isPositiveNumber(width),isValidHeight=isPositiveNumber(height);if(isValidWidth&&isValidHeight){var adjustedWidth=height*aspectRatio;"contain"===type&&adjustedWidth>width||"cover"===type&&adjustedWidth<width?height=width/aspectRatio:width=height*aspectRatio}else isValidWidth?height=width/aspectRatio:isValidHeight&&(width=height*aspectRatio);return{width:width,height:height}}function getRotatedSizes(_ref5){var width=_ref5.width,height=_ref5.height,degree=_ref5.degree;if(90==(degree=Math.abs(degree)%180))return{width:height,height:width};var arc=degree%90*Math.PI/180,sinArc=Math.sin(arc),cosArc=Math.cos(arc),newWidth=width*cosArc+height*sinArc,newHeight=width*sinArc+height*cosArc;return degree>90?{width:newHeight,height:newWidth}:{width:newWidth,height:newHeight}}function getSourceCanvas(image,_ref6,_ref7,_ref8){var imageAspectRatio=_ref6.aspectRatio,imageNaturalWidth=_ref6.naturalWidth,imageNaturalHeight=_ref6.naturalHeight,_ref6$rotate=_ref6.rotate,rotate=void 0===_ref6$rotate?0:_ref6$rotate,_ref6$scaleX=_ref6.scaleX,scaleX=void 0===_ref6$scaleX?1:_ref6$scaleX,_ref6$scaleY=_ref6.scaleY,scaleY=void 0===_ref6$scaleY?1:_ref6$scaleY,aspectRatio=_ref7.aspectRatio,naturalWidth=_ref7.naturalWidth,naturalHeight=_ref7.naturalHeight,_ref8$fillColor=_ref8.fillColor,fillColor=void 0===_ref8$fillColor?"transparent":_ref8$fillColor,_ref8$imageSmoothingE=_ref8.imageSmoothingEnabled,imageSmoothingEnabled=void 0===_ref8$imageSmoothingE||_ref8$imageSmoothingE,_ref8$imageSmoothingQ=_ref8.imageSmoothingQuality,imageSmoothingQuality=void 0===_ref8$imageSmoothingQ?"low":_ref8$imageSmoothingQ,_ref8$maxWidth=_ref8.maxWidth,maxWidth=void 0===_ref8$maxWidth?1/0:_ref8$maxWidth,_ref8$maxHeight=_ref8.maxHeight,maxHeight=void 0===_ref8$maxHeight?1/0:_ref8$maxHeight,_ref8$minWidth=_ref8.minWidth,minWidth=void 0===_ref8$minWidth?0:_ref8$minWidth,_ref8$minHeight=_ref8.minHeight,minHeight=void 0===_ref8$minHeight?0:_ref8$minHeight,canvas=document.createElement("canvas"),context=canvas.getContext("2d"),maxSizes=getAdjustedSizes({aspectRatio:aspectRatio,width:maxWidth,height:maxHeight}),minSizes=getAdjustedSizes({aspectRatio:aspectRatio,width:minWidth,height:minHeight},"cover"),width=Math.min(maxSizes.width,Math.max(minSizes.width,naturalWidth)),height=Math.min(maxSizes.height,Math.max(minSizes.height,naturalHeight)),destMaxSizes=getAdjustedSizes({aspectRatio:imageAspectRatio,width:maxWidth,height:maxHeight}),destMinSizes=getAdjustedSizes({aspectRatio:imageAspectRatio,width:minWidth,height:minHeight},"cover"),destWidth=Math.min(destMaxSizes.width,Math.max(destMinSizes.width,imageNaturalWidth)),destHeight=Math.min(destMaxSizes.height,Math.max(destMinSizes.height,imageNaturalHeight)),params=[-destWidth/2,-destHeight/2,destWidth,destHeight];return canvas.width=normalizeDecimalNumber(width),canvas.height=normalizeDecimalNumber(height),context.fillStyle=fillColor,context.fillRect(0,0,width,height),context.save(),context.translate(width/2,height/2),context.rotate(rotate*Math.PI/180),context.scale(scaleX,scaleY),context.imageSmoothingEnabled=imageSmoothingEnabled,context.imageSmoothingQuality=imageSmoothingQuality,context.drawImage.apply(context,[image].concat(_toConsumableArray(params.map((function(param){return Math.floor(normalizeDecimalNumber(param))}))))),context.restore(),canvas}var fromCharCode=String.fromCharCode;function getStringFromCharCode(dataView,start,length){var str="";length+=start;for(var i=start;i<length;i+=1)str+=fromCharCode(dataView.getUint8(i));return str}var REGEXP_DATA_URL_HEAD=/^data:.*,/;function dataURLToArrayBuffer(dataURL){var base64=dataURL.replace(REGEXP_DATA_URL_HEAD,""),binary=atob(base64),arrayBuffer=new ArrayBuffer(binary.length),uint8=new Uint8Array(arrayBuffer);return forEach(uint8,(function(value,i){uint8[i]=binary.charCodeAt(i)})),arrayBuffer}function arrayBufferToDataURL(arrayBuffer,mimeType){for(var chunks=[],chunkSize=8192,uint8=new Uint8Array(arrayBuffer);uint8.length>0;)chunks.push(fromCharCode.apply(null,toArray(uint8.subarray(0,chunkSize)))),uint8=uint8.subarray(chunkSize);return"data:".concat(mimeType,";base64,").concat(btoa(chunks.join("")))}function resetAndGetOrientation(arrayBuffer){var orientation,dataView=new DataView(arrayBuffer);try{var littleEndian,app1Start,ifdStart;if(255===dataView.getUint8(0)&&216===dataView.getUint8(1))for(var length=dataView.byteLength,offset=2;offset+1<length;){if(255===dataView.getUint8(offset)&&225===dataView.getUint8(offset+1)){app1Start=offset;break}offset+=1}if(app1Start){var tiffOffset=app1Start+10;if("Exif"===getStringFromCharCode(dataView,app1Start+4,4)){var endianness=dataView.getUint16(tiffOffset);if(((littleEndian=18761===endianness)||19789===endianness)&&42===dataView.getUint16(tiffOffset+2,littleEndian)){var firstIFDOffset=dataView.getUint32(tiffOffset+4,littleEndian);firstIFDOffset>=8&&(ifdStart=tiffOffset+firstIFDOffset)}}}if(ifdStart){var _offset,i,_length=dataView.getUint16(ifdStart,littleEndian);for(i=0;i<_length;i+=1)if(_offset=ifdStart+12*i+2,274===dataView.getUint16(_offset,littleEndian)){_offset+=8,orientation=dataView.getUint16(_offset,littleEndian),dataView.setUint16(_offset,1,littleEndian);break}}}catch(error){orientation=1}return orientation}function parseOrientation(orientation){var rotate=0,scaleX=1,scaleY=1;switch(orientation){case 2:scaleX=-1;break;case 3:rotate=-180;break;case 4:scaleY=-1;break;case 5:rotate=90,scaleY=-1;break;case 6:rotate=90;break;case 7:rotate=90,scaleX=-1;break;case 8:rotate=-90}return{rotate:rotate,scaleX:scaleX,scaleY:scaleY}}var render={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var element=this.element,options=this.options,container=this.container,cropper=this.cropper,minWidth=Number(options.minContainerWidth),minHeight=Number(options.minContainerHeight);addClass(cropper,CLASS_HIDDEN),removeClass(element,CLASS_HIDDEN);var containerData={width:Math.max(container.offsetWidth,minWidth>=0?minWidth:MIN_CONTAINER_WIDTH),height:Math.max(container.offsetHeight,minHeight>=0?minHeight:MIN_CONTAINER_HEIGHT)};this.containerData=containerData,setStyle(cropper,{width:containerData.width,height:containerData.height}),addClass(element,CLASS_HIDDEN),removeClass(cropper,CLASS_HIDDEN)},initCanvas:function(){var containerData=this.containerData,imageData=this.imageData,viewMode=this.options.viewMode,rotated=Math.abs(imageData.rotate)%180==90,naturalWidth=rotated?imageData.naturalHeight:imageData.naturalWidth,naturalHeight=rotated?imageData.naturalWidth:imageData.naturalHeight,aspectRatio=naturalWidth/naturalHeight,canvasWidth=containerData.width,canvasHeight=containerData.height;containerData.height*aspectRatio>containerData.width?3===viewMode?canvasWidth=containerData.height*aspectRatio:canvasHeight=containerData.width/aspectRatio:3===viewMode?canvasHeight=containerData.width/aspectRatio:canvasWidth=containerData.height*aspectRatio;var canvasData={aspectRatio:aspectRatio,naturalWidth:naturalWidth,naturalHeight:naturalHeight,width:canvasWidth,height:canvasHeight};this.canvasData=canvasData,this.limited=1===viewMode||2===viewMode,this.limitCanvas(!0,!0),canvasData.width=Math.min(Math.max(canvasData.width,canvasData.minWidth),canvasData.maxWidth),canvasData.height=Math.min(Math.max(canvasData.height,canvasData.minHeight),canvasData.maxHeight),canvasData.left=(containerData.width-canvasData.width)/2,canvasData.top=(containerData.height-canvasData.height)/2,canvasData.oldLeft=canvasData.left,canvasData.oldTop=canvasData.top,this.initialCanvasData=assign({},canvasData)},limitCanvas:function(sizeLimited,positionLimited){var options=this.options,containerData=this.containerData,canvasData=this.canvasData,cropBoxData=this.cropBoxData,viewMode=options.viewMode,aspectRatio=canvasData.aspectRatio,cropped=this.cropped&&cropBoxData;if(sizeLimited){var minCanvasWidth=Number(options.minCanvasWidth)||0,minCanvasHeight=Number(options.minCanvasHeight)||0;viewMode>1?(minCanvasWidth=Math.max(minCanvasWidth,containerData.width),minCanvasHeight=Math.max(minCanvasHeight,containerData.height),3===viewMode&&(minCanvasHeight*aspectRatio>minCanvasWidth?minCanvasWidth=minCanvasHeight*aspectRatio:minCanvasHeight=minCanvasWidth/aspectRatio)):viewMode>0&&(minCanvasWidth?minCanvasWidth=Math.max(minCanvasWidth,cropped?cropBoxData.width:0):minCanvasHeight?minCanvasHeight=Math.max(minCanvasHeight,cropped?cropBoxData.height:0):cropped&&(minCanvasWidth=cropBoxData.width,(minCanvasHeight=cropBoxData.height)*aspectRatio>minCanvasWidth?minCanvasWidth=minCanvasHeight*aspectRatio:minCanvasHeight=minCanvasWidth/aspectRatio));var _getAdjustedSizes=getAdjustedSizes({aspectRatio:aspectRatio,width:minCanvasWidth,height:minCanvasHeight});minCanvasWidth=_getAdjustedSizes.width,minCanvasHeight=_getAdjustedSizes.height,canvasData.minWidth=minCanvasWidth,canvasData.minHeight=minCanvasHeight,canvasData.maxWidth=1/0,canvasData.maxHeight=1/0}if(positionLimited)if(viewMode>(cropped?0:1)){var newCanvasLeft=containerData.width-canvasData.width,newCanvasTop=containerData.height-canvasData.height;canvasData.minLeft=Math.min(0,newCanvasLeft),canvasData.minTop=Math.min(0,newCanvasTop),canvasData.maxLeft=Math.max(0,newCanvasLeft),canvasData.maxTop=Math.max(0,newCanvasTop),cropped&&this.limited&&(canvasData.minLeft=Math.min(cropBoxData.left,cropBoxData.left+(cropBoxData.width-canvasData.width)),canvasData.minTop=Math.min(cropBoxData.top,cropBoxData.top+(cropBoxData.height-canvasData.height)),canvasData.maxLeft=cropBoxData.left,canvasData.maxTop=cropBoxData.top,2===viewMode&&(canvasData.width>=containerData.width&&(canvasData.minLeft=Math.min(0,newCanvasLeft),canvasData.maxLeft=Math.max(0,newCanvasLeft)),canvasData.height>=containerData.height&&(canvasData.minTop=Math.min(0,newCanvasTop),canvasData.maxTop=Math.max(0,newCanvasTop))))}else canvasData.minLeft=-canvasData.width,canvasData.minTop=-canvasData.height,canvasData.maxLeft=containerData.width,canvasData.maxTop=containerData.height},renderCanvas:function(changed,transformed){var canvasData=this.canvasData,imageData=this.imageData;if(transformed){var _getRotatedSizes=getRotatedSizes({width:imageData.naturalWidth*Math.abs(imageData.scaleX||1),height:imageData.naturalHeight*Math.abs(imageData.scaleY||1),degree:imageData.rotate||0}),naturalWidth=_getRotatedSizes.width,naturalHeight=_getRotatedSizes.height,width=canvasData.width*(naturalWidth/canvasData.naturalWidth),height=canvasData.height*(naturalHeight/canvasData.naturalHeight);canvasData.left-=(width-canvasData.width)/2,canvasData.top-=(height-canvasData.height)/2,canvasData.width=width,canvasData.height=height,canvasData.aspectRatio=naturalWidth/naturalHeight,canvasData.naturalWidth=naturalWidth,canvasData.naturalHeight=naturalHeight,this.limitCanvas(!0,!1)}(canvasData.width>canvasData.maxWidth||canvasData.width<canvasData.minWidth)&&(canvasData.left=canvasData.oldLeft),(canvasData.height>canvasData.maxHeight||canvasData.height<canvasData.minHeight)&&(canvasData.top=canvasData.oldTop),canvasData.width=Math.min(Math.max(canvasData.width,canvasData.minWidth),canvasData.maxWidth),canvasData.height=Math.min(Math.max(canvasData.height,canvasData.minHeight),canvasData.maxHeight),this.limitCanvas(!1,!0),canvasData.left=Math.min(Math.max(canvasData.left,canvasData.minLeft),canvasData.maxLeft),canvasData.top=Math.min(Math.max(canvasData.top,canvasData.minTop),canvasData.maxTop),canvasData.oldLeft=canvasData.left,canvasData.oldTop=canvasData.top,setStyle(this.canvas,assign({width:canvasData.width,height:canvasData.height},getTransforms({translateX:canvasData.left,translateY:canvasData.top}))),this.renderImage(changed),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(changed){var canvasData=this.canvasData,imageData=this.imageData,width=imageData.naturalWidth*(canvasData.width/canvasData.naturalWidth),height=imageData.naturalHeight*(canvasData.height/canvasData.naturalHeight);assign(imageData,{width:width,height:height,left:(canvasData.width-width)/2,top:(canvasData.height-height)/2}),setStyle(this.image,assign({width:imageData.width,height:imageData.height},getTransforms(assign({translateX:imageData.left,translateY:imageData.top},imageData)))),changed&&this.output()},initCropBox:function(){var options=this.options,canvasData=this.canvasData,aspectRatio=options.aspectRatio||options.initialAspectRatio,autoCropArea=Number(options.autoCropArea)||.8,cropBoxData={width:canvasData.width,height:canvasData.height};aspectRatio&&(canvasData.height*aspectRatio>canvasData.width?cropBoxData.height=cropBoxData.width/aspectRatio:cropBoxData.width=cropBoxData.height*aspectRatio),this.cropBoxData=cropBoxData,this.limitCropBox(!0,!0),cropBoxData.width=Math.min(Math.max(cropBoxData.width,cropBoxData.minWidth),cropBoxData.maxWidth),cropBoxData.height=Math.min(Math.max(cropBoxData.height,cropBoxData.minHeight),cropBoxData.maxHeight),cropBoxData.width=Math.max(cropBoxData.minWidth,cropBoxData.width*autoCropArea),cropBoxData.height=Math.max(cropBoxData.minHeight,cropBoxData.height*autoCropArea),cropBoxData.left=canvasData.left+(canvasData.width-cropBoxData.width)/2,cropBoxData.top=canvasData.top+(canvasData.height-cropBoxData.height)/2,cropBoxData.oldLeft=cropBoxData.left,cropBoxData.oldTop=cropBoxData.top,this.initialCropBoxData=assign({},cropBoxData)},limitCropBox:function(sizeLimited,positionLimited){var options=this.options,containerData=this.containerData,canvasData=this.canvasData,cropBoxData=this.cropBoxData,limited=this.limited,aspectRatio=options.aspectRatio;if(sizeLimited){var minCropBoxWidth=Number(options.minCropBoxWidth)||0,minCropBoxHeight=Number(options.minCropBoxHeight)||0,maxCropBoxWidth=limited?Math.min(containerData.width,canvasData.width,canvasData.width+canvasData.left,containerData.width-canvasData.left):containerData.width,maxCropBoxHeight=limited?Math.min(containerData.height,canvasData.height,canvasData.height+canvasData.top,containerData.height-canvasData.top):containerData.height;minCropBoxWidth=Math.min(minCropBoxWidth,containerData.width),minCropBoxHeight=Math.min(minCropBoxHeight,containerData.height),aspectRatio&&(minCropBoxWidth&&minCropBoxHeight?minCropBoxHeight*aspectRatio>minCropBoxWidth?minCropBoxHeight=minCropBoxWidth/aspectRatio:minCropBoxWidth=minCropBoxHeight*aspectRatio:minCropBoxWidth?minCropBoxHeight=minCropBoxWidth/aspectRatio:minCropBoxHeight&&(minCropBoxWidth=minCropBoxHeight*aspectRatio),maxCropBoxHeight*aspectRatio>maxCropBoxWidth?maxCropBoxHeight=maxCropBoxWidth/aspectRatio:maxCropBoxWidth=maxCropBoxHeight*aspectRatio),cropBoxData.minWidth=Math.min(minCropBoxWidth,maxCropBoxWidth),cropBoxData.minHeight=Math.min(minCropBoxHeight,maxCropBoxHeight),cropBoxData.maxWidth=maxCropBoxWidth,cropBoxData.maxHeight=maxCropBoxHeight}positionLimited&&(limited?(cropBoxData.minLeft=Math.max(0,canvasData.left),cropBoxData.minTop=Math.max(0,canvasData.top),cropBoxData.maxLeft=Math.min(containerData.width,canvasData.left+canvasData.width)-cropBoxData.width,cropBoxData.maxTop=Math.min(containerData.height,canvasData.top+canvasData.height)-cropBoxData.height):(cropBoxData.minLeft=0,cropBoxData.minTop=0,cropBoxData.maxLeft=containerData.width-cropBoxData.width,cropBoxData.maxTop=containerData.height-cropBoxData.height))},renderCropBox:function(){var options=this.options,containerData=this.containerData,cropBoxData=this.cropBoxData;(cropBoxData.width>cropBoxData.maxWidth||cropBoxData.width<cropBoxData.minWidth)&&(cropBoxData.left=cropBoxData.oldLeft),(cropBoxData.height>cropBoxData.maxHeight||cropBoxData.height<cropBoxData.minHeight)&&(cropBoxData.top=cropBoxData.oldTop),cropBoxData.width=Math.min(Math.max(cropBoxData.width,cropBoxData.minWidth),cropBoxData.maxWidth),cropBoxData.height=Math.min(Math.max(cropBoxData.height,cropBoxData.minHeight),cropBoxData.maxHeight),this.limitCropBox(!1,!0),cropBoxData.left=Math.min(Math.max(cropBoxData.left,cropBoxData.minLeft),cropBoxData.maxLeft),cropBoxData.top=Math.min(Math.max(cropBoxData.top,cropBoxData.minTop),cropBoxData.maxTop),cropBoxData.oldLeft=cropBoxData.left,cropBoxData.oldTop=cropBoxData.top,options.movable&&options.cropBoxMovable&&setData(this.face,DATA_ACTION,cropBoxData.width>=containerData.width&&cropBoxData.height>=containerData.height?ACTION_MOVE:ACTION_ALL),setStyle(this.cropBox,assign({width:cropBoxData.width,height:cropBoxData.height},getTransforms({translateX:cropBoxData.left,translateY:cropBoxData.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),dispatchEvent(this.element,EVENT_CROP,this.getData())}},preview={initPreview:function(){var element=this.element,crossOrigin=this.crossOrigin,preview=this.options.preview,url=crossOrigin?this.crossOriginUrl:this.url,alt=element.alt||"The image to preview",image=document.createElement("img");if(crossOrigin&&(image.crossOrigin=crossOrigin),image.src=url,image.alt=alt,this.viewBox.appendChild(image),this.viewBoxImage=image,preview){var previews=preview;"string"==typeof preview?previews=element.ownerDocument.querySelectorAll(preview):preview.querySelector&&(previews=[preview]),this.previews=previews,forEach(previews,(function(el){var img=document.createElement("img");setData(el,DATA_PREVIEW,{width:el.offsetWidth,height:el.offsetHeight,html:el.innerHTML}),crossOrigin&&(img.crossOrigin=crossOrigin),img.src=url,img.alt=alt,img.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',el.innerHTML="",el.appendChild(img)}))}},resetPreview:function(){forEach(this.previews,(function(element){var data=getData(element,DATA_PREVIEW);setStyle(element,{width:data.width,height:data.height}),element.innerHTML=data.html,removeData(element,DATA_PREVIEW)}))},preview:function(){var imageData=this.imageData,canvasData=this.canvasData,cropBoxData=this.cropBoxData,cropBoxWidth=cropBoxData.width,cropBoxHeight=cropBoxData.height,width=imageData.width,height=imageData.height,left=cropBoxData.left-canvasData.left-imageData.left,top=cropBoxData.top-canvasData.top-imageData.top;this.cropped&&!this.disabled&&(setStyle(this.viewBoxImage,assign({width:width,height:height},getTransforms(assign({translateX:-left,translateY:-top},imageData)))),forEach(this.previews,(function(element){var data=getData(element,DATA_PREVIEW),originalWidth=data.width,originalHeight=data.height,newWidth=originalWidth,newHeight=originalHeight,ratio=1;cropBoxWidth&&(newHeight=cropBoxHeight*(ratio=originalWidth/cropBoxWidth)),cropBoxHeight&&newHeight>originalHeight&&(newWidth=cropBoxWidth*(ratio=originalHeight/cropBoxHeight),newHeight=originalHeight),setStyle(element,{width:newWidth,height:newHeight}),setStyle(element.getElementsByTagName("img")[0],assign({width:width*ratio,height:height*ratio},getTransforms(assign({translateX:-left*ratio,translateY:-top*ratio},imageData))))})))}},events={bind:function(){var element=this.element,options=this.options,cropper=this.cropper;isFunction(options.cropstart)&&addListener(element,EVENT_CROP_START,options.cropstart),isFunction(options.cropmove)&&addListener(element,EVENT_CROP_MOVE,options.cropmove),isFunction(options.cropend)&&addListener(element,EVENT_CROP_END,options.cropend),isFunction(options.crop)&&addListener(element,EVENT_CROP,options.crop),isFunction(options.zoom)&&addListener(element,EVENT_ZOOM,options.zoom),addListener(cropper,EVENT_POINTER_DOWN,this.onCropStart=this.cropStart.bind(this)),options.zoomable&&options.zoomOnWheel&&addListener(cropper,EVENT_WHEEL,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),options.toggleDragModeOnDblclick&&addListener(cropper,EVENT_DBLCLICK,this.onDblclick=this.dblclick.bind(this)),addListener(element.ownerDocument,EVENT_POINTER_MOVE,this.onCropMove=this.cropMove.bind(this)),addListener(element.ownerDocument,EVENT_POINTER_UP,this.onCropEnd=this.cropEnd.bind(this)),options.responsive&&addListener(window,EVENT_RESIZE,this.onResize=this.resize.bind(this))},unbind:function(){var element=this.element,options=this.options,cropper=this.cropper;isFunction(options.cropstart)&&removeListener(element,EVENT_CROP_START,options.cropstart),isFunction(options.cropmove)&&removeListener(element,EVENT_CROP_MOVE,options.cropmove),isFunction(options.cropend)&&removeListener(element,EVENT_CROP_END,options.cropend),isFunction(options.crop)&&removeListener(element,EVENT_CROP,options.crop),isFunction(options.zoom)&&removeListener(element,EVENT_ZOOM,options.zoom),removeListener(cropper,EVENT_POINTER_DOWN,this.onCropStart),options.zoomable&&options.zoomOnWheel&&removeListener(cropper,EVENT_WHEEL,this.onWheel,{passive:!1,capture:!0}),options.toggleDragModeOnDblclick&&removeListener(cropper,EVENT_DBLCLICK,this.onDblclick),removeListener(element.ownerDocument,EVENT_POINTER_MOVE,this.onCropMove),removeListener(element.ownerDocument,EVENT_POINTER_UP,this.onCropEnd),options.responsive&&removeListener(window,EVENT_RESIZE,this.onResize)}},handlers={resize:function(){if(!this.disabled){var canvasData,cropBoxData,options=this.options,container=this.container,containerData=this.containerData,ratio=container.offsetWidth/containerData.width;1===ratio&&container.offsetHeight===containerData.height||(options.restore&&(canvasData=this.getCanvasData(),cropBoxData=this.getCropBoxData()),this.render(),options.restore&&(this.setCanvasData(forEach(canvasData,(function(n,i){canvasData[i]=n*ratio}))),this.setCropBoxData(forEach(cropBoxData,(function(n,i){cropBoxData[i]=n*ratio})))))}},dblclick:function(){this.disabled||this.options.dragMode===DRAG_MODE_NONE||this.setDragMode(hasClass(this.dragBox,CLASS_CROP)?DRAG_MODE_MOVE:DRAG_MODE_CROP)},wheel:function(event){var _this=this,ratio=Number(this.options.wheelZoomRatio)||.1,delta=1;this.disabled||(event.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout((function(){_this.wheeling=!1}),50),event.deltaY?delta=event.deltaY>0?1:-1:event.wheelDelta?delta=-event.wheelDelta/120:event.detail&&(delta=event.detail>0?1:-1),this.zoom(-delta*ratio,event)))},cropStart:function(event){var buttons=event.buttons,button=event.button;if(!(this.disabled||("mousedown"===event.type||"pointerdown"===event.type&&"mouse"===event.pointerType)&&(isNumber(buttons)&&1!==buttons||isNumber(button)&&0!==button||event.ctrlKey))){var action,options=this.options,pointers=this.pointers;event.changedTouches?forEach(event.changedTouches,(function(touch){pointers[touch.identifier]=getPointer(touch)})):pointers[event.pointerId||0]=getPointer(event),action=Object.keys(pointers).length>1&&options.zoomable&&options.zoomOnTouch?ACTION_ZOOM:getData(event.target,DATA_ACTION),REGEXP_ACTIONS.test(action)&&!1!==dispatchEvent(this.element,EVENT_CROP_START,{originalEvent:event,action:action})&&(event.preventDefault(),this.action=action,this.cropping=!1,action===ACTION_CROP&&(this.cropping=!0,addClass(this.dragBox,CLASS_MODAL)))}},cropMove:function(event){var action=this.action;if(!this.disabled&&action){var pointers=this.pointers;event.preventDefault(),!1!==dispatchEvent(this.element,EVENT_CROP_MOVE,{originalEvent:event,action:action})&&(event.changedTouches?forEach(event.changedTouches,(function(touch){assign(pointers[touch.identifier]||{},getPointer(touch,!0))})):assign(pointers[event.pointerId||0]||{},getPointer(event,!0)),this.change(event))}},cropEnd:function(event){if(!this.disabled){var action=this.action,pointers=this.pointers;event.changedTouches?forEach(event.changedTouches,(function(touch){delete pointers[touch.identifier]})):delete pointers[event.pointerId||0],action&&(event.preventDefault(),Object.keys(pointers).length||(this.action=""),this.cropping&&(this.cropping=!1,toggleClass(this.dragBox,CLASS_MODAL,this.cropped&&this.options.modal)),dispatchEvent(this.element,EVENT_CROP_END,{originalEvent:event,action:action}))}}},change={change:function(event){var offset,options=this.options,canvasData=this.canvasData,containerData=this.containerData,cropBoxData=this.cropBoxData,pointers=this.pointers,action=this.action,aspectRatio=options.aspectRatio,left=cropBoxData.left,top=cropBoxData.top,width=cropBoxData.width,height=cropBoxData.height,right=left+width,bottom=top+height,minLeft=0,minTop=0,maxWidth=containerData.width,maxHeight=containerData.height,renderable=!0;!aspectRatio&&event.shiftKey&&(aspectRatio=width&&height?width/height:1),this.limited&&(minLeft=cropBoxData.minLeft,minTop=cropBoxData.minTop,maxWidth=minLeft+Math.min(containerData.width,canvasData.width,canvasData.left+canvasData.width),maxHeight=minTop+Math.min(containerData.height,canvasData.height,canvasData.top+canvasData.height));var pointer=pointers[Object.keys(pointers)[0]],range={x:pointer.endX-pointer.startX,y:pointer.endY-pointer.startY},check=function(side){switch(side){case ACTION_EAST:right+range.x>maxWidth&&(range.x=maxWidth-right);break;case ACTION_WEST:left+range.x<minLeft&&(range.x=minLeft-left);break;case ACTION_NORTH:top+range.y<minTop&&(range.y=minTop-top);break;case ACTION_SOUTH:bottom+range.y>maxHeight&&(range.y=maxHeight-bottom)}};switch(action){case ACTION_ALL:left+=range.x,top+=range.y;break;case ACTION_EAST:if(range.x>=0&&(right>=maxWidth||aspectRatio&&(top<=minTop||bottom>=maxHeight))){renderable=!1;break}check(ACTION_EAST),(width+=range.x)<0&&(action=ACTION_WEST,left-=width=-width),aspectRatio&&(height=width/aspectRatio,top+=(cropBoxData.height-height)/2);break;case ACTION_NORTH:if(range.y<=0&&(top<=minTop||aspectRatio&&(left<=minLeft||right>=maxWidth))){renderable=!1;break}check(ACTION_NORTH),height-=range.y,top+=range.y,height<0&&(action=ACTION_SOUTH,top-=height=-height),aspectRatio&&(width=height*aspectRatio,left+=(cropBoxData.width-width)/2);break;case ACTION_WEST:if(range.x<=0&&(left<=minLeft||aspectRatio&&(top<=minTop||bottom>=maxHeight))){renderable=!1;break}check(ACTION_WEST),width-=range.x,left+=range.x,width<0&&(action=ACTION_EAST,left-=width=-width),aspectRatio&&(height=width/aspectRatio,top+=(cropBoxData.height-height)/2);break;case ACTION_SOUTH:if(range.y>=0&&(bottom>=maxHeight||aspectRatio&&(left<=minLeft||right>=maxWidth))){renderable=!1;break}check(ACTION_SOUTH),(height+=range.y)<0&&(action=ACTION_NORTH,top-=height=-height),aspectRatio&&(width=height*aspectRatio,left+=(cropBoxData.width-width)/2);break;case ACTION_NORTH_EAST:if(aspectRatio){if(range.y<=0&&(top<=minTop||right>=maxWidth)){renderable=!1;break}check(ACTION_NORTH),height-=range.y,top+=range.y,width=height*aspectRatio}else check(ACTION_NORTH),check(ACTION_EAST),range.x>=0?right<maxWidth?width+=range.x:range.y<=0&&top<=minTop&&(renderable=!1):width+=range.x,range.y<=0?top>minTop&&(height-=range.y,top+=range.y):(height-=range.y,top+=range.y);width<0&&height<0?(action=ACTION_SOUTH_WEST,top-=height=-height,left-=width=-width):width<0?(action=ACTION_NORTH_WEST,left-=width=-width):height<0&&(action=ACTION_SOUTH_EAST,top-=height=-height);break;case ACTION_NORTH_WEST:if(aspectRatio){if(range.y<=0&&(top<=minTop||left<=minLeft)){renderable=!1;break}check(ACTION_NORTH),height-=range.y,top+=range.y,width=height*aspectRatio,left+=cropBoxData.width-width}else check(ACTION_NORTH),check(ACTION_WEST),range.x<=0?left>minLeft?(width-=range.x,left+=range.x):range.y<=0&&top<=minTop&&(renderable=!1):(width-=range.x,left+=range.x),range.y<=0?top>minTop&&(height-=range.y,top+=range.y):(height-=range.y,top+=range.y);width<0&&height<0?(action=ACTION_SOUTH_EAST,top-=height=-height,left-=width=-width):width<0?(action=ACTION_NORTH_EAST,left-=width=-width):height<0&&(action=ACTION_SOUTH_WEST,top-=height=-height);break;case ACTION_SOUTH_WEST:if(aspectRatio){if(range.x<=0&&(left<=minLeft||bottom>=maxHeight)){renderable=!1;break}check(ACTION_WEST),width-=range.x,left+=range.x,height=width/aspectRatio}else check(ACTION_SOUTH),check(ACTION_WEST),range.x<=0?left>minLeft?(width-=range.x,left+=range.x):range.y>=0&&bottom>=maxHeight&&(renderable=!1):(width-=range.x,left+=range.x),range.y>=0?bottom<maxHeight&&(height+=range.y):height+=range.y;width<0&&height<0?(action=ACTION_NORTH_EAST,top-=height=-height,left-=width=-width):width<0?(action=ACTION_SOUTH_EAST,left-=width=-width):height<0&&(action=ACTION_NORTH_WEST,top-=height=-height);break;case ACTION_SOUTH_EAST:if(aspectRatio){if(range.x>=0&&(right>=maxWidth||bottom>=maxHeight)){renderable=!1;break}check(ACTION_EAST),height=(width+=range.x)/aspectRatio}else check(ACTION_SOUTH),check(ACTION_EAST),range.x>=0?right<maxWidth?width+=range.x:range.y>=0&&bottom>=maxHeight&&(renderable=!1):width+=range.x,range.y>=0?bottom<maxHeight&&(height+=range.y):height+=range.y;width<0&&height<0?(action=ACTION_NORTH_WEST,top-=height=-height,left-=width=-width):width<0?(action=ACTION_SOUTH_WEST,left-=width=-width):height<0&&(action=ACTION_NORTH_EAST,top-=height=-height);break;case ACTION_MOVE:this.move(range.x,range.y),renderable=!1;break;case ACTION_ZOOM:this.zoom(getMaxZoomRatio(pointers),event),renderable=!1;break;case ACTION_CROP:if(!range.x||!range.y){renderable=!1;break}offset=getOffset(this.cropper),left=pointer.startX-offset.left,top=pointer.startY-offset.top,width=cropBoxData.minWidth,height=cropBoxData.minHeight,range.x>0?action=range.y>0?ACTION_SOUTH_EAST:ACTION_NORTH_EAST:range.x<0&&(left-=width,action=range.y>0?ACTION_SOUTH_WEST:ACTION_NORTH_WEST),range.y<0&&(top-=height),this.cropped||(removeClass(this.cropBox,CLASS_HIDDEN),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}renderable&&(cropBoxData.width=width,cropBoxData.height=height,cropBoxData.left=left,cropBoxData.top=top,this.action=action,this.renderCropBox()),forEach(pointers,(function(p){p.startX=p.endX,p.startY=p.endY}))}},methods={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&addClass(this.dragBox,CLASS_MODAL),removeClass(this.cropBox,CLASS_HIDDEN),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=assign({},this.initialImageData),this.canvasData=assign({},this.initialCanvasData),this.cropBoxData=assign({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(assign(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),removeClass(this.dragBox,CLASS_MODAL),addClass(this.cropBox,CLASS_HIDDEN)),this},replace:function(url){var hasSameSize=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&url&&(this.isImg&&(this.element.src=url),hasSameSize?(this.url=url,this.image.src=url,this.ready&&(this.viewBoxImage.src=url,forEach(this.previews,(function(element){element.getElementsByTagName("img")[0].src=url})))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(url))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,removeClass(this.cropper,CLASS_DISABLED)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,addClass(this.cropper,CLASS_DISABLED)),this},destroy:function(){var element=this.element;return element[NAMESPACE]?(element[NAMESPACE]=void 0,this.isImg&&this.replaced&&(element.src=this.originalUrl),this.uncreate(),this):this},move:function(offsetX){var offsetY=arguments.length>1&&void 0!==arguments[1]?arguments[1]:offsetX,_this$canvasData=this.canvasData,left=_this$canvasData.left,top=_this$canvasData.top;return this.moveTo(isUndefined(offsetX)?offsetX:left+Number(offsetX),isUndefined(offsetY)?offsetY:top+Number(offsetY))},moveTo:function(x){var y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x,canvasData=this.canvasData,changed=!1;return x=Number(x),y=Number(y),this.ready&&!this.disabled&&this.options.movable&&(isNumber(x)&&(canvasData.left=x,changed=!0),isNumber(y)&&(canvasData.top=y,changed=!0),changed&&this.renderCanvas(!0)),this},zoom:function(ratio,_originalEvent){var canvasData=this.canvasData;return ratio=(ratio=Number(ratio))<0?1/(1-ratio):1+ratio,this.zoomTo(canvasData.width*ratio/canvasData.naturalWidth,null,_originalEvent)},zoomTo:function(ratio,pivot,_originalEvent){var options=this.options,canvasData=this.canvasData,width=canvasData.width,height=canvasData.height,naturalWidth=canvasData.naturalWidth,naturalHeight=canvasData.naturalHeight;if((ratio=Number(ratio))>=0&&this.ready&&!this.disabled&&options.zoomable){var newWidth=naturalWidth*ratio,newHeight=naturalHeight*ratio;if(!1===dispatchEvent(this.element,EVENT_ZOOM,{ratio:ratio,oldRatio:width/naturalWidth,originalEvent:_originalEvent}))return this;if(_originalEvent){var pointers=this.pointers,offset=getOffset(this.cropper),center=pointers&&Object.keys(pointers).length?getPointersCenter(pointers):{pageX:_originalEvent.pageX,pageY:_originalEvent.pageY};canvasData.left-=(newWidth-width)*((center.pageX-offset.left-canvasData.left)/width),canvasData.top-=(newHeight-height)*((center.pageY-offset.top-canvasData.top)/height)}else isPlainObject(pivot)&&isNumber(pivot.x)&&isNumber(pivot.y)?(canvasData.left-=(newWidth-width)*((pivot.x-canvasData.left)/width),canvasData.top-=(newHeight-height)*((pivot.y-canvasData.top)/height)):(canvasData.left-=(newWidth-width)/2,canvasData.top-=(newHeight-height)/2);canvasData.width=newWidth,canvasData.height=newHeight,this.renderCanvas(!0)}return this},rotate:function(degree){return this.rotateTo((this.imageData.rotate||0)+Number(degree))},rotateTo:function(degree){return isNumber(degree=Number(degree))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=degree%360,this.renderCanvas(!0,!0)),this},scaleX:function(_scaleX){var scaleY=this.imageData.scaleY;return this.scale(_scaleX,isNumber(scaleY)?scaleY:1)},scaleY:function(_scaleY){var scaleX=this.imageData.scaleX;return this.scale(isNumber(scaleX)?scaleX:1,_scaleY)},scale:function(scaleX){var scaleY=arguments.length>1&&void 0!==arguments[1]?arguments[1]:scaleX,imageData=this.imageData,transformed=!1;return scaleX=Number(scaleX),scaleY=Number(scaleY),this.ready&&!this.disabled&&this.options.scalable&&(isNumber(scaleX)&&(imageData.scaleX=scaleX,transformed=!0),isNumber(scaleY)&&(imageData.scaleY=scaleY,transformed=!0),transformed&&this.renderCanvas(!0,!0)),this},getData:function(){var data,rounded=arguments.length>0&&void 0!==arguments[0]&&arguments[0],options=this.options,imageData=this.imageData,canvasData=this.canvasData,cropBoxData=this.cropBoxData;if(this.ready&&this.cropped){data={x:cropBoxData.left-canvasData.left,y:cropBoxData.top-canvasData.top,width:cropBoxData.width,height:cropBoxData.height};var ratio=imageData.width/imageData.naturalWidth;if(forEach(data,(function(n,i){data[i]=n/ratio})),rounded){var bottom=Math.round(data.y+data.height),right=Math.round(data.x+data.width);data.x=Math.round(data.x),data.y=Math.round(data.y),data.width=right-data.x,data.height=bottom-data.y}}else data={x:0,y:0,width:0,height:0};return options.rotatable&&(data.rotate=imageData.rotate||0),options.scalable&&(data.scaleX=imageData.scaleX||1,data.scaleY=imageData.scaleY||1),data},setData:function(data){var options=this.options,imageData=this.imageData,canvasData=this.canvasData,cropBoxData={};if(this.ready&&!this.disabled&&isPlainObject(data)){var transformed=!1;options.rotatable&&isNumber(data.rotate)&&data.rotate!==imageData.rotate&&(imageData.rotate=data.rotate,transformed=!0),options.scalable&&(isNumber(data.scaleX)&&data.scaleX!==imageData.scaleX&&(imageData.scaleX=data.scaleX,transformed=!0),isNumber(data.scaleY)&&data.scaleY!==imageData.scaleY&&(imageData.scaleY=data.scaleY,transformed=!0)),transformed&&this.renderCanvas(!0,!0);var ratio=imageData.width/imageData.naturalWidth;isNumber(data.x)&&(cropBoxData.left=data.x*ratio+canvasData.left),isNumber(data.y)&&(cropBoxData.top=data.y*ratio+canvasData.top),isNumber(data.width)&&(cropBoxData.width=data.width*ratio),isNumber(data.height)&&(cropBoxData.height=data.height*ratio),this.setCropBoxData(cropBoxData)}return this},getContainerData:function(){return this.ready?assign({},this.containerData):{}},getImageData:function(){return this.sized?assign({},this.imageData):{}},getCanvasData:function(){var canvasData=this.canvasData,data={};return this.ready&&forEach(["left","top","width","height","naturalWidth","naturalHeight"],(function(n){data[n]=canvasData[n]})),data},setCanvasData:function(data){var canvasData=this.canvasData,aspectRatio=canvasData.aspectRatio;return this.ready&&!this.disabled&&isPlainObject(data)&&(isNumber(data.left)&&(canvasData.left=data.left),isNumber(data.top)&&(canvasData.top=data.top),isNumber(data.width)?(canvasData.width=data.width,canvasData.height=data.width/aspectRatio):isNumber(data.height)&&(canvasData.height=data.height,canvasData.width=data.height*aspectRatio),this.renderCanvas(!0)),this},getCropBoxData:function(){var data,cropBoxData=this.cropBoxData;return this.ready&&this.cropped&&(data={left:cropBoxData.left,top:cropBoxData.top,width:cropBoxData.width,height:cropBoxData.height}),data||{}},setCropBoxData:function(data){var widthChanged,heightChanged,cropBoxData=this.cropBoxData,aspectRatio=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&isPlainObject(data)&&(isNumber(data.left)&&(cropBoxData.left=data.left),isNumber(data.top)&&(cropBoxData.top=data.top),isNumber(data.width)&&data.width!==cropBoxData.width&&(widthChanged=!0,cropBoxData.width=data.width),isNumber(data.height)&&data.height!==cropBoxData.height&&(heightChanged=!0,cropBoxData.height=data.height),aspectRatio&&(widthChanged?cropBoxData.height=cropBoxData.width/aspectRatio:heightChanged&&(cropBoxData.width=cropBoxData.height*aspectRatio)),this.renderCropBox()),this},getCroppedCanvas:function(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var canvasData=this.canvasData,source=getSourceCanvas(this.image,this.imageData,canvasData,options);if(!this.cropped)return source;var _this$getData=this.getData(),initialX=_this$getData.x,initialY=_this$getData.y,initialWidth=_this$getData.width,initialHeight=_this$getData.height,ratio=source.width/Math.floor(canvasData.naturalWidth);1!==ratio&&(initialX*=ratio,initialY*=ratio,initialWidth*=ratio,initialHeight*=ratio);var aspectRatio=initialWidth/initialHeight,maxSizes=getAdjustedSizes({aspectRatio:aspectRatio,width:options.maxWidth||1/0,height:options.maxHeight||1/0}),minSizes=getAdjustedSizes({aspectRatio:aspectRatio,width:options.minWidth||0,height:options.minHeight||0},"cover"),_getAdjustedSizes=getAdjustedSizes({aspectRatio:aspectRatio,width:options.width||(1!==ratio?source.width:initialWidth),height:options.height||(1!==ratio?source.height:initialHeight)}),width=_getAdjustedSizes.width,height=_getAdjustedSizes.height;width=Math.min(maxSizes.width,Math.max(minSizes.width,width)),height=Math.min(maxSizes.height,Math.max(minSizes.height,height));var canvas=document.createElement("canvas"),context=canvas.getContext("2d");canvas.width=normalizeDecimalNumber(width),canvas.height=normalizeDecimalNumber(height),context.fillStyle=options.fillColor||"transparent",context.fillRect(0,0,width,height);var _options$imageSmoothi=options.imageSmoothingEnabled,imageSmoothingEnabled=void 0===_options$imageSmoothi||_options$imageSmoothi,imageSmoothingQuality=options.imageSmoothingQuality;context.imageSmoothingEnabled=imageSmoothingEnabled,imageSmoothingQuality&&(context.imageSmoothingQuality=imageSmoothingQuality);var srcWidth,srcHeight,dstX,dstY,dstWidth,dstHeight,sourceWidth=source.width,sourceHeight=source.height,srcX=initialX,srcY=initialY;srcX<=-initialWidth||srcX>sourceWidth?(srcX=0,srcWidth=0,dstX=0,dstWidth=0):srcX<=0?(dstX=-srcX,srcX=0,dstWidth=srcWidth=Math.min(sourceWidth,initialWidth+srcX)):srcX<=sourceWidth&&(dstX=0,dstWidth=srcWidth=Math.min(initialWidth,sourceWidth-srcX)),srcWidth<=0||srcY<=-initialHeight||srcY>sourceHeight?(srcY=0,srcHeight=0,dstY=0,dstHeight=0):srcY<=0?(dstY=-srcY,srcY=0,dstHeight=srcHeight=Math.min(sourceHeight,initialHeight+srcY)):srcY<=sourceHeight&&(dstY=0,dstHeight=srcHeight=Math.min(initialHeight,sourceHeight-srcY));var params=[srcX,srcY,srcWidth,srcHeight];if(dstWidth>0&&dstHeight>0){var scale=width/initialWidth;params.push(dstX*scale,dstY*scale,dstWidth*scale,dstHeight*scale)}return context.drawImage.apply(context,[source].concat(_toConsumableArray(params.map((function(param){return Math.floor(normalizeDecimalNumber(param))}))))),canvas},setAspectRatio:function(aspectRatio){var options=this.options;return this.disabled||isUndefined(aspectRatio)||(options.aspectRatio=Math.max(0,aspectRatio)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(mode){var options=this.options,dragBox=this.dragBox,face=this.face;if(this.ready&&!this.disabled){var croppable=mode===DRAG_MODE_CROP,movable=options.movable&&mode===DRAG_MODE_MOVE;mode=croppable||movable?mode:DRAG_MODE_NONE,options.dragMode=mode,setData(dragBox,DATA_ACTION,mode),toggleClass(dragBox,CLASS_CROP,croppable),toggleClass(dragBox,CLASS_MOVE,movable),options.cropBoxMovable||(setData(face,DATA_ACTION,mode),toggleClass(face,CLASS_CROP,croppable),toggleClass(face,CLASS_MOVE,movable))}return this}},AnotherCropper=WINDOW.Cropper,Cropper=function(){function Cropper(element){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(_classCallCheck(this,Cropper),!element||!REGEXP_TAG_NAME.test(element.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=element,this.options=assign({},DEFAULTS,isPlainObject(options)&&options),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return _createClass(Cropper,[{key:"init",value:function(){var url,element=this.element,tagName=element.tagName.toLowerCase();if(!element[NAMESPACE]){if(element[NAMESPACE]=this,"img"===tagName){if(this.isImg=!0,url=element.getAttribute("src")||"",this.originalUrl=url,!url)return;url=element.src}else"canvas"===tagName&&window.HTMLCanvasElement&&(url=element.toDataURL());this.load(url)}}},{key:"load",value:function(url){var _this=this;if(url){this.url=url,this.imageData={};var element=this.element,options=this.options;if(options.rotatable||options.scalable||(options.checkOrientation=!1),options.checkOrientation&&window.ArrayBuffer)if(REGEXP_DATA_URL.test(url))REGEXP_DATA_URL_JPEG.test(url)?this.read(dataURLToArrayBuffer(url)):this.clone();else{var xhr=new XMLHttpRequest,clone=this.clone.bind(this);this.reloading=!0,this.xhr=xhr,xhr.onabort=clone,xhr.onerror=clone,xhr.ontimeout=clone,xhr.onprogress=function(){xhr.getResponseHeader("content-type")!==MIME_TYPE_JPEG&&xhr.abort()},xhr.onload=function(){_this.read(xhr.response)},xhr.onloadend=function(){_this.reloading=!1,_this.xhr=null},options.checkCrossOrigin&&isCrossOriginURL(url)&&element.crossOrigin&&(url=addTimestamp(url)),xhr.open("GET",url),xhr.responseType="arraybuffer",xhr.withCredentials="use-credentials"===element.crossOrigin,xhr.send()}else this.clone()}}},{key:"read",value:function(arrayBuffer){var options=this.options,imageData=this.imageData,orientation=resetAndGetOrientation(arrayBuffer),rotate=0,scaleX=1,scaleY=1;if(orientation>1){this.url=arrayBufferToDataURL(arrayBuffer,MIME_TYPE_JPEG);var _parseOrientation=parseOrientation(orientation);rotate=_parseOrientation.rotate,scaleX=_parseOrientation.scaleX,scaleY=_parseOrientation.scaleY}options.rotatable&&(imageData.rotate=rotate),options.scalable&&(imageData.scaleX=scaleX,imageData.scaleY=scaleY),this.clone()}},{key:"clone",value:function(){var element=this.element,url=this.url,crossOrigin=element.crossOrigin,crossOriginUrl=url;this.options.checkCrossOrigin&&isCrossOriginURL(url)&&(crossOrigin||(crossOrigin="anonymous"),crossOriginUrl=addTimestamp(url)),this.crossOrigin=crossOrigin,this.crossOriginUrl=crossOriginUrl;var image=document.createElement("img");crossOrigin&&(image.crossOrigin=crossOrigin),image.src=crossOriginUrl||url,image.alt=element.alt||"The image to crop",this.image=image,image.onload=this.start.bind(this),image.onerror=this.stop.bind(this),addClass(image,CLASS_HIDE),element.parentNode.insertBefore(image,element.nextSibling)}},{key:"start",value:function(){var _this2=this,image=this.image;image.onload=null,image.onerror=null,this.sizing=!0;var isIOSWebKit=WINDOW.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(WINDOW.navigator.userAgent),done=function(naturalWidth,naturalHeight){assign(_this2.imageData,{naturalWidth:naturalWidth,naturalHeight:naturalHeight,aspectRatio:naturalWidth/naturalHeight}),_this2.initialImageData=assign({},_this2.imageData),_this2.sizing=!1,_this2.sized=!0,_this2.build()};if(!image.naturalWidth||isIOSWebKit){var sizingImage=document.createElement("img"),body=document.body||document.documentElement;this.sizingImage=sizingImage,sizingImage.onload=function(){done(sizingImage.width,sizingImage.height),isIOSWebKit||body.removeChild(sizingImage)},sizingImage.src=image.src,isIOSWebKit||(sizingImage.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",body.appendChild(sizingImage))}else done(image.naturalWidth,image.naturalHeight)}},{key:"stop",value:function(){var image=this.image;image.onload=null,image.onerror=null,image.parentNode.removeChild(image),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var element=this.element,options=this.options,image=this.image,container=element.parentNode,template=document.createElement("div");template.innerHTML=TEMPLATE;var cropper=template.querySelector(".".concat(NAMESPACE,"-container")),canvas=cropper.querySelector(".".concat(NAMESPACE,"-canvas")),dragBox=cropper.querySelector(".".concat(NAMESPACE,"-drag-box")),cropBox=cropper.querySelector(".".concat(NAMESPACE,"-crop-box")),face=cropBox.querySelector(".".concat(NAMESPACE,"-face"));this.container=container,this.cropper=cropper,this.canvas=canvas,this.dragBox=dragBox,this.cropBox=cropBox,this.viewBox=cropper.querySelector(".".concat(NAMESPACE,"-view-box")),this.face=face,canvas.appendChild(image),addClass(element,CLASS_HIDDEN),container.insertBefore(cropper,element.nextSibling),this.isImg||removeClass(image,CLASS_HIDE),this.initPreview(),this.bind(),options.initialAspectRatio=Math.max(0,options.initialAspectRatio)||NaN,options.aspectRatio=Math.max(0,options.aspectRatio)||NaN,options.viewMode=Math.max(0,Math.min(3,Math.round(options.viewMode)))||0,addClass(cropBox,CLASS_HIDDEN),options.guides||addClass(cropBox.getElementsByClassName("".concat(NAMESPACE,"-dashed")),CLASS_HIDDEN),options.center||addClass(cropBox.getElementsByClassName("".concat(NAMESPACE,"-center")),CLASS_HIDDEN),options.background&&addClass(cropper,"".concat(NAMESPACE,"-bg")),options.highlight||addClass(face,CLASS_INVISIBLE),options.cropBoxMovable&&(addClass(face,CLASS_MOVE),setData(face,DATA_ACTION,ACTION_ALL)),options.cropBoxResizable||(addClass(cropBox.getElementsByClassName("".concat(NAMESPACE,"-line")),CLASS_HIDDEN),addClass(cropBox.getElementsByClassName("".concat(NAMESPACE,"-point")),CLASS_HIDDEN)),this.render(),this.ready=!0,this.setDragMode(options.dragMode),options.autoCrop&&this.crop(),this.setData(options.data),isFunction(options.ready)&&addListener(element,EVENT_READY,options.ready,{once:!0}),dispatchEvent(element,EVENT_READY)}}},{key:"unbuild",value:function(){this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),removeClass(this.element,CLASS_HIDDEN))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=AnotherCropper,Cropper}},{key:"setDefaults",value:function(options){assign(DEFAULTS,isPlainObject(options)&&options)}}]),Cropper}();return assign(Cropper.prototype,render,preview,events,handlers,change,methods),Cropper}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="editor resizable-content flex flex-column crpr">\r\n    <div class="flex-item flex-item-grow crpr">\r\n        <div class="fit">\r\n            <img class="cropbox" data-bind="attr: { src: mediaItem.downloadUrl }, cropper: cropperInstance">\r\n        </div>\r\n    </div>\r\n\r\n    <div class="flex-item">\r\n        <div class="btn-group">\r\n            <button class="btn" data-bind="click: setMoveMode">\r\n                <i class="paperbits-icon paperbits-zoom-99"></i>\r\n            </button>\r\n            <button class="btn" data-bind="click: setCropMode">\r\n                <i class="paperbits-icon paperbits-crop"></i>\r\n            </button>\r\n            <button class="btn" data-bind="click: zoomIn">\r\n                <i class="paperbits-icon paperbits-zoom-in"></i>\r\n            </button>\r\n            <button class="btn" data-bind="click: zoomOut">\r\n                <i class="paperbits-icon paperbits-zoom-out"></i>\r\n            </button>\r\n            <button class="btn" data-bind="click: rotateLeft">\r\n                <i class="paperbits-icon paperbits-rotate-left-2"></i>\r\n            </button>\r\n            <button class="btn" data-bind="click: rotateRight">\r\n                <i class="paperbits-icon paperbits-rotate-right-2"></i>\r\n            </button>\r\n            <button class="btn" data-bind="click: flipHorizontally">\r\n                <i class="paperbits-icon paperbits-enlarge-horizontal"></i>\r\n            </button>\r\n            <button class="btn" data-bind="click: flipVertically">\r\n                <i class="paperbits-icon paperbits-enlarge-vertical"></i>\r\n            </button>\r\n\r\n            <button class="btn" data-bind="click: crop">\r\n                <i class="paperbits-icon paperbits-check-2"></i>\r\n            </button>\r\n\r\n            <button class="btn" data-bind="click: clear">\r\n                <i class="paperbits-icon paperbits-simple-remove"></i>\r\n            </button>\r\n        </div>\r\n    </div>\r\n</div>'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MediaToolButton=void 0;exports.MediaToolButton=class{constructor(viewManager){this.viewManager=viewManager,this.iconClass="paperbits-icon paperbits-image-2",this.title="Media"}onActivate(){this.viewManager.clearJourney();const view={heading:this.title,helpText:"<h1>Media library</h1><p>Upload or edit files in the media library.</p>",component:{name:"media"}};this.viewManager.openViewAsWorkshop(view)}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="flex flex-column fit">\r\n    \x3c!-- ko ifnot: working --\x3e\r\n\r\n    \x3c!-- ko if: root().nodes().length === 0 --\x3e\r\n    <p class="flex-item flex-item-grow text-center">It seems that you don\'t have navigation items yet. Would you like to\r\n        <a href="#" class="btn-link" data-bind="click: addNavigationItem">create one</a>?\r\n    </p>\r\n    \x3c!-- /ko --\x3e\r\n\r\n    <div class="flex flex-column flex-item flex-item-grow" role="list" data-bind="scrollable: true, focus: { childSelector: \'.list-item\' }">\r\n        \x3c!-- ko foreach: { data: root().nodes, as: \'node\' } --\x3e\r\n        \x3c!-- ko template: { name: \'node\', data: node } --\x3e\r\n        \x3c!-- /ko--\x3e\r\n        \x3c!-- /ko--\x3e\r\n    </div>\r\n\r\n    \x3c!-- /ko --\x3e\r\n\r\n    \x3c!-- ko if: working --\x3e\r\n    <spinner></spinner>\r\n    \x3c!-- /ko --\x3e\r\n\r\n    <div class="flex-item btn-group">\r\n        <button class="btn" data-bind="click: addNavigationItem">\r\n            <i class="paperbits-icon paperbits-simple-add"></i>\r\n            Add navigation item\r\n        </button>\r\n    </div>\r\n</div>\r\n\r\n\r\n<script id="node" type="text/html">\r\n    <div class="list-item-group" data-bind="dragsource: { sourceData: $data, sticky: true, ondragstart: $component.onNodeDragStart, ondragend: $component.onNodeDragEnd }, dragtarget: { targetData: $data, accept: canAccept, ondropbefore: insertBefore, ondropafter: insertAfter, flow: \'vertical\', onacceptbefore: $component.onAcceptNodeBefore, onacceptafter: $component.onAcceptNodeAfter }">\r\n        \x3c!-- ko if: node.nodes().length > 0 --\x3e\r\n        <div class="list-item-collapsible">\r\n            <button href="#" role="button" aria-label="Toggle nested items" class="list-item-collapse" data-bind="click: node.toggleCollapsed">\r\n                <i class="paperbits-icon paperbits-circle-delete"\r\n                    data-bind="css: { \'paperbits-circle-add\': node.collapsed }"></i>\r\n            </button>\r\n            <div tabindex="0" role="listitem" class="list-item" data-bind="keydown: onKeyDown, css: { selected: $component.isSelected(node) }, attr: { title: node.label,\'aria-expanded\': (!node.collapsed()).toString() }, activate: $component.selectNavigationItem, selectable: true">\r\n                \x3c!-- <i class="paperbits-icon paperbits-menu-34"></i> --\x3e\r\n                <span data-bind="text: node.label"></span>\r\n            </div>\r\n        </div>\r\n        \x3c!-- /ko --\x3e\r\n\r\n        \x3c!-- ko ifnot: node.nodes().length > 0 --\x3e\r\n        <div tabindex="0" role="listitem" class="list-item" data-bind="css: { selected: $component.isSelected(node) }, attr: { title: node.label }, activate: $component.selectNavigationItem, selectable: true">\r\n            \x3c!-- <i class="paperbits-icon paperbits-menu-34"></i> --\x3e\r\n            <span data-bind="text: node.label"></span>\r\n        </div>\r\n        \x3c!-- /ko --\x3e\r\n\r\n        \x3c!-- ko ifnot: node.collapsed --\x3e\r\n        <div role="list">\r\n        \x3c!-- ko foreach: { data: node.nodes, as: \'node\' } --\x3e\r\n        \x3c!-- ko template: { name: \'node\', data: node } --\x3e\x3c!-- /ko--\x3e\r\n        \x3c!-- /ko--\x3e\r\n        </div>\r\n        \x3c!-- /ko --\x3e\r\n    </div>\r\n<\/script>'},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(284),exports),__exportStar(__webpack_require__(285),exports),__exportStar(__webpack_require__(286),exports),__exportStar(__webpack_require__(288),exports),__exportStar(__webpack_require__(287),exports)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="flex flex-column fit">\r\n    <fieldset class="flex-item flex-item-grow form" data-bind="scrollable: true">\r\n        <div class="form-group">\r\n            <label for="label" class="form-label">Label</label>\r\n            <input type="text" id="label" class="form-control" autofocus data-bind="textInput: navigationItem.label" placeholder="i.e. Orders" maxlength="256">\r\n        </div>\r\n\r\n        <div class="form-group">\r\n            <label for="hyperlink" class="form-label">Link to</label>\r\n            <div class="input-group">\r\n                <input id="hyperlink" class="form-control" readonly="readonly" data-bind="value: hyperlinkTitle">\r\n                <button class="btn input-group-btn" data-bind="balloon: { position: \'right\', component: { name: \'hyperlink-selector\', params: { hyperlink: $component.hyperlink, onChange: $component.onHyperlinkChange } } }">\r\n                    <i class="paperbits-icon paperbits-link-69-2"></i>\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </fieldset>\r\n\r\n    <div class="flex-item btn-group">\r\n        <button class="btn" data-bind="confirm: { message: \'Are you sure you want to delete this navigation item?\', onConfirm: deleteNavigationItem }">\r\n            <i class="paperbits-icon paperbits-simple-remove"></i>\r\n            Delete navigation item\r\n        </button>\r\n    </div>\r\n</div>'},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="editor">\r\n    <div class="flex flex-column list">\r\n        <h1>Select navigation root</h1>\r\n        <hr>\r\n\r\n        <div class="flex flex-column">\r\n            \x3c!-- ko if: working --\x3e\r\n            <spinner></spinner>\r\n            \x3c!-- /ko --\x3e\r\n\r\n            \x3c!-- ko ifnot: working --\x3e\r\n\r\n            \x3c!-- ko if: root().nodes().length === 0 --\x3e\r\n            <p class="flex-item flex-item-grow text-center">It seems that you don\'t have navigation items yet.</p>\r\n            \x3c!-- /ko --\x3e\r\n\r\n            <div class="flex-item flex-item-grow list" role="list" data-bind="scrollable: true, focus: { childSelector: \'.list-item\' }">\r\n                \x3c!-- ko foreach: { data: root().nodes, as: \'node\' } --\x3e\r\n                \x3c!-- ko template: { name: \'node\', data: node } --\x3e\r\n                \x3c!-- /ko--\x3e\r\n                \x3c!-- /ko--\x3e\r\n            </div>\r\n\r\n            \x3c!-- /ko --\x3e\r\n        </div>\r\n    </div>\r\n    <div class="flex-item btn-group">\r\n        <button class="btn" data-bind="click: $component.selectNone">\r\n            <i class="paperbits-icon paperbits-ban"></i>\r\n            None\r\n        </button>\r\n    </div>\r\n</div>\r\n\r\n\r\n\r\n\r\n\r\n<script id="node" type="text/html">\r\n    <div class="list-item-group">\r\n        \x3c!-- ko if: node.nodes && node.nodes().length > 0 --\x3e\r\n        <div class="list-item-collapsible">\r\n            <button role="button" aria-label="Toggle nested items" class="list-item-collapse" data-bind="click: node.toggleCollapsed">\r\n                <i class="paperbits-icon paperbits-circle-delete"\r\n                    data-bind="css: { \'paperbits-circle-add\': node.collapsed }"></i>\r\n            </button>\r\n            <div tabindex="0" role="listitem" class="list-item" data-bind="activate: $component.selectNavigationItem, attr: { \'aria-expanded\': (!node.collapsed()).toString() }">\r\n                \x3c!-- <i class="paperbits-icon paperbits-menu-34"></i> --\x3e\r\n                <span data-bind="text: node.label"></span>\r\n            </div>\r\n        </div>\r\n        \x3c!-- /ko --\x3e\r\n\r\n        \x3c!-- ko ifnot: node.nodes && node.nodes().length > 0 --\x3e\r\n        <div tabindex="0" role="listitem" class="list-item" data-bind="activate: $component.selectNavigationItem">\r\n            \x3c!-- <i class="paperbits-icon paperbits-menu-34"></i> --\x3e\r\n            <span data-bind="text: node.label"></span>\r\n        </div>\r\n        \x3c!-- /ko --\x3e\r\n\r\n        \x3c!-- ko ifnot: node.collapsed --\x3e\r\n        <div role="list">\r\n        \x3c!-- ko foreach: { data: node.nodes, as: \'node\' } --\x3e\r\n        \x3c!-- ko template: { name: \'node\', data: node } --\x3e\x3c!-- /ko--\x3e\r\n        \x3c!-- /ko--\x3e\r\n        </div>\r\n        \x3c!-- /ko --\x3e\r\n    </div>\r\n<\/script>'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NavigationToolButton=void 0;exports.NavigationToolButton=class{constructor(viewManager){this.viewManager=viewManager,this.iconClass="paperbits-icon paperbits-menu-34",this.title="Navigation"}onActivate(){this.viewManager.clearJourney();const view={heading:this.title,helpText:"<h1>Navigation</h1><p>Add or edit navigation menus.</p>",component:{name:"navigation"}};this.viewManager.openViewAsWorkshop(view)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SettingsWorkshopModule=void 0;const _1=__webpack_require__(795),settingsToolButton_1=__webpack_require__(798);exports.SettingsWorkshopModule=class{register(injector){injector.bind("settingsWorkshop",_1.SettingsWorkshop),injector.bindToCollection("workshopSections",settingsToolButton_1.SettingsToolButton)}}},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(796),exports)},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SettingsWorkshop=void 0;const ko=__webpack_require__(0),settings_html_1=__webpack_require__(797),decorators_1=__webpack_require__(2),metaDataSetter_1=__webpack_require__(289),background_1=__webpack_require__(82);let SettingsWorkshop=class{constructor(mediaService,siteService){this.mediaService=mediaService,this.siteService=siteService,this.working=ko.observable(),this.title=ko.observable(),this.description=ko.observable(),this.keywords=ko.observable(),this.hostname=ko.observable(),this.author=ko.observable(),this.faviconSourceKey=ko.observable(),this.faviconFileName=ko.observable(),this.favicon=ko.observable()}initialize(){return __awaiter(this,void 0,void 0,(function*(){this.working(!0);const siteSettings=(yield this.siteService.getSettings()).site;siteSettings&&(this.title(siteSettings.title),this.description(siteSettings.description),this.keywords(siteSettings.keywords),this.hostname(siteSettings.hostname),this.author(siteSettings.author),this.faviconSourceKey(siteSettings.faviconSourceKey),this.setFaviconUri(siteSettings.faviconSourceKey)),this.working(!1),this.title.subscribe(this.onSettingChange),this.description.subscribe(this.onSettingChange),this.keywords.subscribe(this.onSettingChange),this.hostname.subscribe(this.onSettingChange),this.author.subscribe(this.onSettingChange),this.faviconSourceKey.subscribe(this.onSettingChange)}))}onSettingChange(){return __awaiter(this,void 0,void 0,(function*(){const settings=yield this.siteService.getSettings(),siteSettings={title:this.title(),description:this.description(),keywords:this.keywords(),hostname:this.hostname(),faviconSourceKey:this.faviconSourceKey(),author:this.author()};settings.site=siteSettings,yield this.siteService.setSettings(settings)}))}onMediaSelected(media){media?(this.faviconSourceKey(media.key),this.setFaviconUri(media.key)):(this.faviconFileName(null),this.faviconSourceKey(null))}setFaviconUri(sourceKey){return __awaiter(this,void 0,void 0,(function*(){if(!sourceKey)return;const mediaContract=yield this.mediaService.getMediaByKey(sourceKey);if(!mediaContract)return void console.warn(`Unable to fetch favicon by key ${sourceKey}.`);this.faviconFileName(mediaContract.downloadUrl),metaDataSetter_1.MetaDataSetter.setFavIcon(mediaContract.downloadUrl);const faviconModel=new background_1.BackgroundModel;faviconModel.sourceUrl=mediaContract.downloadUrl,this.favicon(faviconModel)}))}};__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],SettingsWorkshop.prototype,"initialize",null),SettingsWorkshop=__decorate([decorators_1.Component({selector:"settings",template:settings_html_1.default}),__metadata("design:paramtypes",[Object,Object])],SettingsWorkshop),exports.SettingsWorkshop=SettingsWorkshop},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='\x3c!--ko if: working()--\x3e\r\n<spinner></spinner>\r\n\x3c!--/ko--\x3e\r\n\r\n<div class="flex flex-column fit">\r\n    <fieldset class="flex-item flex-item-grow form" data-bind="scrollable: true">\r\n        <div class="form-group">\r\n            <label class="form-label">Favicon</label>\r\n            <div class="flex">\r\n                <div class="flex-item dropzone-showbox dropzone-square" data-bind="background: favicon, balloon: { component: { name: \'media-selector\', params: { onSelect: $component.onMediaSelected, mimeType: \'image/x-icon\' } }, position: \'top\' }"></div>\r\n\r\n                <button class="flex-item flex-item-grow btn" data-bind="balloon: { component: { name: \'media-selector\', params: { onSelect: $component.onMediaSelected, mimeType: $component.mimeType } }, position: \'top\' }">\r\n                    <i class="paperbits-icon paperbits-square-upload"></i>\r\n                    Setup favicon\r\n                </button>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="form-group">\r\n            <label for="title" class="form-label">Title</label>\r\n            <input type="text" id="title" class="form-control" data-bind="textInput: title, focus: true" maxlength="500">\r\n        </div>\r\n\r\n        <div class="form-group">\r\n            <label for="description" class="form-label">Description</label>\r\n            <textarea id="description" class="form-control" data-bind="textInput: description" maxlength="500"></textarea>\r\n        </div>\r\n\r\n        <div class="form-group">\r\n            <label for="keywords" class="form-label">Keywords</label>\r\n            <input type="text" id="keywords" class="form-control" data-bind="textInput: keywords" maxlength="500">\r\n        </div>\r\n\r\n        <div class="form-group">\r\n            <label for="author" class="form-label">Author</label>\r\n            <input type="text" id="author" class="form-control" data-bind="textInput: author" maxlength="500">\r\n        </div>\r\n    </fieldset>\r\n</div>'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SettingsToolButton=void 0;exports.SettingsToolButton=class{constructor(viewManager){this.viewManager=viewManager,this.iconClass="paperbits-icon paperbits-preferences-circle",this.title="Settings"}onActivate(){this.viewManager.clearJourney();const view={heading:this.title,helpText:"<h1>Site settings</h1><p>Edit your website metadata.</p>",component:{name:"settings"}};this.viewManager.openViewAsWorkshop(view)}}},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Workshops=void 0;const ko=__webpack_require__(0),workshops_html_1=__webpack_require__(800),decorators_1=__webpack_require__(2);let Workshops=class{constructor(viewManager,userService,workshopSections){this.viewManager=viewManager,this.userService=userService,this.workshopSections=workshopSections,this.userPhotoUrl=ko.observable(null),this.resizing=ko.pureComputed(()=>this.viewManager.journeyName()?"vertically horizontally":"vertically horizontally suspended"),this.sections=ko.observableArray(this.workshopSections)}loadUserProfile(){return __awaiter(this,void 0,void 0,(function*(){const url=yield this.userService.getUserPhotoUrl();this.userPhotoUrl(url)}))}closeWorkshop(view){this.viewManager.closeWorkshop(view)}};__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],Workshops.prototype,"loadUserProfile",null),Workshops=__decorate([decorators_1.Component({selector:"workshops",template:workshops_html_1.default}),__metadata("design:paramtypes",[Object,Object,Array])],Workshops),exports.Workshops=Workshops},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="toolbox toolbox-position-left workshops-container flex flex-row" data-bind="visible: viewManager.primaryToolboxVisible, resizable: resizing">\r\n    <ul role="tablist" class="flex-item toolbox-btn-group toolbox-btn-group-vertical">\r\n        \x3c!-- ko foreach: { data: sections, as: \'section\' } --\x3e\r\n        <li role="presentation" class="toolbox-btn" data-bind="css: { \'toolbox-btn-is-active\': $component.viewManager.journeyName() == section.title }">\r\n            <a href="#" role="tab" data-bind="attr: { title: section.title, \'aria-label\': section.title }, click: section.onActivate, tooltip: { message: section.tooltip, position: \'right\' }">\r\n                <i data-bind="css: section.iconClass"></i>\r\n            </a>\r\n        </li>\r\n        \x3c!-- /ko --\x3e\r\n        \r\n        \x3c!-- ko if: userPhotoUrl --\x3e\r\n        <li role="presentation" class="toolbox-btn pull-down">\r\n            <a href="#" role="tab" title="Account" aria-label="Account">\r\n                <div class="photo" data-bind="style: { \'background-image\': \'url(\'+userPhotoUrl()+\')\' }">\r\n                </div>\r\n            </a>\r\n        </li>\r\n        \x3c!-- /ko --\x3e\r\n    </ul>\r\n\r\n    \x3c!-- ko if: viewManager.journey().length > 0 --\x3e\r\n    <div role="tabpanel" class="flex flex-item flex-item-grow workshop" data-bind="foreach: viewManager.journey()">\r\n        <div class="flex-item flex flex-column workshop-journey-step">\r\n            <h1>\r\n                <span data-bind="text: heading"></span>\r\n                \x3c!-- ko if: $data.helpText --\x3e\r\n                <button class="btn-help" data-bind="tooltip: { message: $data.helpText, position: \'right\' }">\r\n                    <i class="paperbits-icon paperbits-c-question"></i>\r\n                </button>\r\n                \x3c!--/ko --\x3e\r\n            </h1>\r\n            <button class="btn btn-dismiss" aria-label="Close" data-bind="click: $component.closeWorkshop">\r\n                <i class="paperbits-icon paperbits-simple-remove"></i>\r\n            </button>\r\n            <hr>\r\n            <div class="flex-item flex-item-grow" data-bind="component: { name: component.name, params: component.params }"></div>\r\n        </div>\r\n    </div>\r\n    \x3c!-- /ko --\x3e\r\n</div>'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TextblockEditorModule=void 0;const textblockHandlers_1=__webpack_require__(290),blockStyleSelector_1=__webpack_require__(802),formattingTools_1=__webpack_require__(804),hyperlinkEditor_1=__webpack_require__(806),textblockEditor_1=__webpack_require__(808),textStyleSelector_1=__webpack_require__(811);exports.TextblockEditorModule=class{register(injector){injector.bindToCollection("widgetHandlers",textblockHandlers_1.TextblockHandlers,"textblockHandler"),injector.bind("formattingTools",formattingTools_1.FormattingTools),injector.bind("hyperlinkEditor",hyperlinkEditor_1.HyperlinkEditor),injector.bind("textblockEditor",textblockEditor_1.TextblockEditor),injector.bind("blockStyleSelector",blockStyleSelector_1.BlockStyleSelector),injector.bind("textStyleSelector",textStyleSelector_1.TextStyleSelector)}}},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.BlockStyleSelector=void 0;const blockStyleSelector_html_1=__webpack_require__(803),decorators_1=__webpack_require__(2);let BlockStyleSelector=class{constructor(htmlEditorProvider){this.htmlEditorProvider=htmlEditorProvider}resetToNormal(){const htmlEditor=this.htmlEditorProvider.getCurrentHtmlEditor();htmlEditor&&htmlEditor.toggleParagraph()}toggleH1(){const htmlEditor=this.htmlEditorProvider.getCurrentHtmlEditor();htmlEditor&&htmlEditor.toggleH1()}toggleH2(){const htmlEditor=this.htmlEditorProvider.getCurrentHtmlEditor();htmlEditor&&htmlEditor.toggleH2()}toggleH3(){const htmlEditor=this.htmlEditorProvider.getCurrentHtmlEditor();htmlEditor&&htmlEditor.toggleH3()}toggleH4(){const htmlEditor=this.htmlEditorProvider.getCurrentHtmlEditor();htmlEditor&&htmlEditor.toggleH4()}toggleH5(){const htmlEditor=this.htmlEditorProvider.getCurrentHtmlEditor();htmlEditor&&htmlEditor.toggleH5()}toggleH6(){const htmlEditor=this.htmlEditorProvider.getCurrentHtmlEditor();htmlEditor&&htmlEditor.toggleH6()}toggleQuote(){const htmlEditor=this.htmlEditorProvider.getCurrentHtmlEditor();htmlEditor&&htmlEditor.toggleQuote()}toggleFormatted(){const htmlEditor=this.htmlEditorProvider.getCurrentHtmlEditor();htmlEditor&&htmlEditor.toggleFormatted()}};BlockStyleSelector=__decorate([decorators_1.Component({selector:"block-style-selector",template:blockStyleSelector_html_1.default}),__metadata("design:paramtypes",[Object])],BlockStyleSelector),exports.BlockStyleSelector=BlockStyleSelector},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div id="blockStyleSelector" class="tools-paragraphstyle" role="menu" data-bind="scrollable: true">\r\n    <a href="#" role="menuitem" class="tools-paragraph-style tools-paragraph-style-normal" data-bind="click: resetToNormal, focus: true">Normal</a>\r\n    <a href="#" role="menuitem" class="tools-paragraph-style tools-paragraph-style-h1" data-bind="click: toggleH1">Heading 1</a>\r\n    <a href="#" role="menuitem" class="tools-paragraph-style tools-paragraph-style-h2" data-bind="click: toggleH2">Heading 2</a>\r\n    <a href="#" role="menuitem" class="tools-paragraph-style tools-paragraph-style-h3" data-bind="click: toggleH3">Heading 3</a>\r\n    <a href="#" role="menuitem" class="tools-paragraph-style tools-paragraph-style-h4" data-bind="click: toggleH4">Heading 4</a>\r\n    <a href="#" role="menuitem" class="tools-paragraph-style tools-paragraph-style-h5" data-bind="click: toggleH5">Heading 5</a>\r\n    <a href="#" role="menuitem" class="tools-paragraph-style tools-paragraph-style-h6" data-bind="click: toggleH6">Heading 6</a>\r\n    <a href="#" role="menuitem" class="tools-paragraph-style tools-paragraph-style-normal" data-bind="click: toggleQuote">Quote</a>\r\n    <a href="#" role="menuitem" class="tools-paragraph-style tools-paragraph-style-normal" data-bind="click: toggleFormatted">Formatted</a>\r\n</div>'},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.FormattingTools=void 0;const ko=__webpack_require__(0),Utils=__webpack_require__(6),formattingTools_html_1=__webpack_require__(805),editing_1=__webpack_require__(66),decorators_1=__webpack_require__(2),styleService_1=__webpack_require__(20);let FormattingTools=class{constructor(htmlEditorProvider,eventManager,viewManager,styleService){this.htmlEditorProvider=htmlEditorProvider,this.eventManager=eventManager,this.viewManager=viewManager,this.styleService=styleService,this.style=ko.observable(),this.appearance=ko.observable(),this.colored=ko.observable(),this.selectedColorKey=ko.observable(),this.font=ko.observable(),this.sized=ko.observable(),this.ol=ko.observable(),this.ul=ko.observable(),this.bold=ko.observable(),this.italic=ko.observable(),this.underlined=ko.observable(),this.highlighted=ko.observable(),this.striked=ko.observable(),this.code=ko.observable(),this.ul=ko.observable(),this.ol=ko.observable(),this.pre=ko.observable(),this.alignment=ko.observable(),this.anchored=ko.observable(),this.textStyles=ko.observableArray(),this.orderedListStyles=ko.observableArray(),this.unorderedListStyles=ko.observableArray()}init(){return __awaiter(this,void 0,void 0,(function*(){yield this.loadTextStyles(),this.updateFormattingState(),this.eventManager.addEventListener(editing_1.HtmlEditorEvents.onSelectionChange,this.updateFormattingState)}))}loadTextStyles(){return __awaiter(this,void 0,void 0,(function*(){this.textStyles(yield this.styleService.getVariations("globals","body")),this.orderedListStyles(yield this.styleService.getVariations("globals","ol")),this.unorderedListStyles(yield this.styleService.getVariations("globals","ul"))}))}updateFormattingState(){const htmlEditor=this.htmlEditorProvider.getCurrentHtmlEditor();if(!htmlEditor){if(this.textStyles()){const appearance=this.textStyles().find(x=>"globals/body/default"===x.key).displayName;this.appearance(appearance),this.style("Normal")}return}const selectionState=htmlEditor.getSelectionState();this.bold(selectionState.bold),this.italic(selectionState.italic),this.underlined(selectionState.underlined),this.highlighted(selectionState.highlighted),this.striked(selectionState.striked),this.code(selectionState.code),this.colored(!!selectionState.colorKey),this.selectedColorKey(selectionState.colorKey),this.ul(selectionState.bulletedList),this.ol(selectionState.orderedList);let alignment="left";if(selectionState.alignment){const breakpoint=Utils.getClosestBreakpoint(selectionState.alignment,this.viewManager.getViewport()),alignmentStyleKey=selectionState.alignment[breakpoint];switch(alignmentStyleKey){case editing_1.alignmentStyleKeys.left:alignment="left";break;case editing_1.alignmentStyleKeys.center:alignment="center";break;case editing_1.alignmentStyleKeys.right:alignment="right";break;case editing_1.alignmentStyleKeys.justify:alignment="justify";break;default:console.warn("Unknown alignment style key: "+alignmentStyleKey)}}if(this.alignment(alignment),this.textStyles()){let appearance=this.textStyles()[0].displayName;if(selectionState.appearance){const styleKey=selectionState.appearance,textStyle=this.textStyles().find(item=>item.key===styleKey);appearance=textStyle&&textStyle.displayName}this.appearance(appearance)}switch(this.anchored(!!selectionState.anchorKey),selectionState.block){case"heading1":this.style("Heading 1");break;case"heading2":this.style("Heading 2");break;case"heading3":this.style("Heading 3");break;case"heading4":this.style("Heading 4");break;case"heading5":this.style("Heading 5");break;case"heading6":this.style("Heading 6");break;case"quote":this.style("Quote");break;case"formatted":this.style("Formatted");break;default:this.style("Normal")}}toggleNn(){this.updateFormattingState()}toggleBold(){const htmlEditor=this.htmlEditorProvider.getCurrentHtmlEditor();htmlEditor&&htmlEditor.toggleBold()}toggleItalic(){const htmlEditor=this.htmlEditorProvider.getCurrentHtmlEditor();htmlEditor&&htmlEditor.toggleItalic()}toggleParagraph(){const htmlEditor=this.htmlEditorProvider.getCurrentHtmlEditor();htmlEditor&&htmlEditor.toggleParagraph()}toggleUnderlined(){const htmlEditor=this.htmlEditorProvider.getCurrentHtmlEditor();htmlEditor&&htmlEditor.toggleUnderlined()}toggleStriked(){const htmlEditor=this.htmlEditorProvider.getCurrentHtmlEditor();htmlEditor&&htmlEditor.toggleStriked()}toggleHighlighted(){const htmlEditor=this.htmlEditorProvider.getCurrentHtmlEditor();htmlEditor&&htmlEditor.toggleHighlighted()}toggleCode(){const htmlEditor=this.htmlEditorProvider.getCurrentHtmlEditor();htmlEditor&&htmlEditor.toggleCode()}toggleSize(){const htmlEditor=this.htmlEditorProvider.getCurrentHtmlEditor();htmlEditor&&htmlEditor.toggleSize()}toggleOrderedList(){const htmlEditor=this.htmlEditorProvider.getCurrentHtmlEditor();htmlEditor&&htmlEditor.toggleOrderedList()}toggleUnorderedList(){const htmlEditor=this.htmlEditorProvider.getCurrentHtmlEditor();htmlEditor&&htmlEditor.toggleUnorderedList()}onUnorderedListStyleSelected(style){const htmlEditor=this.htmlEditorProvider.getCurrentHtmlEditor();htmlEditor&&htmlEditor.toggleUnorderedList(style.key)}incIndent(){const htmlEditor=this.htmlEditorProvider.getCurrentHtmlEditor();htmlEditor&&(htmlEditor.increaseIndent(),this.updateFormattingState())}decIndent(){const htmlEditor=this.htmlEditorProvider.getCurrentHtmlEditor();htmlEditor&&htmlEditor.decreaseIndent()}toggleAlignLeft(){const htmlEditor=this.htmlEditorProvider.getCurrentHtmlEditor();htmlEditor&&htmlEditor.alignLeft(this.viewManager.getViewport())}toggleAlignCenter(){const htmlEditor=this.htmlEditorProvider.getCurrentHtmlEditor();htmlEditor&&htmlEditor.alignCenter(this.viewManager.getViewport())}toggleAlignRight(){const htmlEditor=this.htmlEditorProvider.getCurrentHtmlEditor();htmlEditor&&htmlEditor.alignRight(this.viewManager.getViewport())}toggleJustify(){const htmlEditor=this.htmlEditorProvider.getCurrentHtmlEditor();htmlEditor&&htmlEditor.justify(this.viewManager.getViewport())}onColorSelected(color){const htmlEditor=this.htmlEditorProvider.getCurrentHtmlEditor();htmlEditor&&(color?htmlEditor.setColor(color.key):htmlEditor.removeColor())}onTextStyleSelected(style){this.htmlEditorProvider.getCurrentHtmlEditor()&&(this.htmlEditorProvider.getCurrentHtmlEditor().setTextStyle(style.key,this.viewManager.getViewport()),this.appearance(style.displayName))}dispose(){this.eventManager.removeEventListener(editing_1.HtmlEditorEvents.onSelectionChange,this.updateFormattingState)}};__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],FormattingTools.prototype,"init",null),__decorate([decorators_1.OnDestroyed(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],FormattingTools.prototype,"dispose",null),FormattingTools=__decorate([decorators_1.Component({selector:"formatting",template:formattingTools_html_1.default}),__metadata("design:paramtypes",[Object,Object,Object,styleService_1.StyleService])],FormattingTools),exports.FormattingTools=FormattingTools},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="toolbox-btn" data-bind="css: { \'toolbox-btn-is-active\': ol() }">\r\n    <a href="#" role="button" data-bind="click: toggleOrderedList, tooltip: { message: \'Toggle ordered list\' }">\r\n        <i class="paperbits-icon paperbits-list-numbers"></i>\r\n\r\n        \x3c!-- ko if: orderedListStyles().length > 1 --\x3e\r\n        <span class="paperbits-icon paperbits-small-down toolbox-btn-addon" data-bind="balloon: { component: { name: \'text-style-selector\', params: { styles: orderedListStyles, onSelect: onOrderedListStyleSelected } } }">\r\n        </span>\r\n        \x3c!-- /ko --\x3e\r\n    </a>\r\n</div>\r\n\r\n<div class="toolbox-btn" data-bind="css: { \'toolbox-btn-is-active\': ul() }">\r\n    <a href="#" role="button" data-bind="click: toggleUnorderedList, tooltip: { message: \'Toggle unordered list\' }">\r\n        <i class="paperbits-icon paperbits-list-bullet"></i>\r\n\r\n        \x3c!-- ko if: unorderedListStyles().length > 1 --\x3e\r\n        <span class="paperbits-icon paperbits-small-down toolbox-btn-addon" data-bind="balloon: { component: { name: \'text-style-selector\', params: { styles: unorderedListStyles, onSelect: onUnorderedListStyleSelected } } }">\r\n        </span>\r\n        \x3c!-- /ko --\x3e\r\n    </a>\r\n</div>\r\n\r\n\x3c!-- <div class="toolbox-btn" >\r\n    <a href="#" role="button" data-bind="click: decIndent, tooltip: { message: \'Decrease Indentation\' }">\r\n        <i class="paperbits-icon paperbits-margin-right"></i>\r\n    </a>\r\n</div>\r\n<div class="toolbox-btn">\r\n    <a href="#" role="button" data-bind="click: incIndent, tooltip: { message: \'Increase Indentation\' }">\r\n        <i class="paperbits-icon paperbits-margin-left"></i>\r\n    </a>\r\n</div> --\x3e\r\n\r\n<div class="toolbox-btn" data-bind="css: { \'toolbox-btn-is-active\': bold() }">\r\n    <a href="#" role="button" data-bind="click: toggleBold, tooltip: { message: \'Toggle bold <div class=subtle>(Ctrl+B)</div>\' }">\r\n        <i class="paperbits-icon paperbits-bold"></i>\r\n    </a>\r\n</div>\r\n<div class="toolbox-btn" data-bind="css: { \'toolbox-btn-is-active\': italic() }">\r\n    <a href="#" role="button" data-bind="click: toggleItalic, tooltip: { message: \'Toggle italic <div class=subtle>(Ctrl+I)</div>\' }">\r\n        <i class="paperbits-icon paperbits-italic"></i>\r\n    </a>\r\n</div>\r\n<div class="toolbox-btn" data-bind="css: { \'toolbox-btn-is-active\': underlined() }">\r\n    <a href="#" role="button" data-bind="click: toggleUnderlined, tooltip: { message: \'Toggle underlined <div class=subtle>(Ctrl+U)</div>\' }">\r\n        <i class="paperbits-icon paperbits-underline"></i>\r\n    </a>\r\n</div>\r\n<div class="toolbox-btn" data-bind="css: { \'toolbox-btn-is-active\': striked() }">\r\n    <a href="#" role="button" data-bind="click: toggleStriked, tooltip: { message: \'Toggle strike-through\' }">\r\n        <i class="paperbits-icon paperbits-strikethrough"></i>\r\n    </a>\r\n</div>\r\n<div class="toolbox-btn" data-bind="css: { \'toolbox-btn-is-active\': highlighted() }">\r\n    <a href="#" role="button" data-bind="click: toggleHighlighted, tooltip: { message: \'Toggle highlighted\' }">\r\n        <i class="paperbits-icon paperbits-marker-2"></i>\r\n    </a>\r\n</div>\r\n<div class="toolbox-btn" data-bind="css: { \'toolbox-btn-is-active\': code() }">\r\n    <a href="#" role="button" data-bind="click: toggleCode, tooltip: { message: \'Toggle code\' }">\r\n        <i class="paperbits-icon paperbits-code"></i>\r\n    </a>\r\n</div>\r\n<div class="toolbox-btn toolbox-dropdown">\r\n    <a href="#" role="menu" aria-haspopup="true" data-bind="text: style, balloon: { component: { name: \'block-style-selector\' } }, tooltip: { message: \'Change block type\' }"></a>\r\n</div>\r\n\r\n\x3c!-- ko if: textStyles().length > 1 --\x3e\r\n<div class="toolbox-btn toolbox-dropdown">\r\n    <a href="#" role="button" aria-haspopup="true" data-bind="text: appearance, balloon: { component: { name: \'text-style-selector\', params: { styles: textStyles, onSelect: onTextStyleSelected } } }, tooltip: { message: \'Change block style\' }"></a>\r\n</div>\r\n\x3c!-- /ko --\x3e\r\n<div class="toolbox-btn" data-bind="css: { \'toolbox-btn-is-active\':  alignment() == \'left\' }">\r\n    <a href="#" role="button" role="button" data-bind="click: toggleAlignLeft, tooltip: { message: \'Align left\' }">\r\n        <i class="paperbits-icon paperbits-align-left-2"></i>\r\n    </a>\r\n</div>\r\n<div class="toolbox-btn" data-bind="css: { \'toolbox-btn-is-active\': alignment() == \'center\' }">\r\n    <a href="#" role="button" data-bind="click: toggleAlignCenter, tooltip: { message: \'Align center\' }">\r\n        <i class="paperbits-icon paperbits-align-center"></i>\r\n    </a>\r\n</div>\r\n<div class="toolbox-btn" data-bind="css: { \'toolbox-btn-is-active\':  alignment() == \'right\' }">\r\n    <a href="#" role="button" data-bind="click: toggleAlignRight, tooltip: { message: \'Align right\' }">\r\n        <i class="paperbits-icon paperbits-align-right-2"></i>\r\n    </a>\r\n</div>\r\n<div class="toolbox-btn" data-bind="css: { \'toolbox-btn-is-active\':  alignment() == \'justify\' }">\r\n    <a href="#" role="button" data-bind="click: toggleJustify, tooltip: { message: \'Justify\' }">\r\n        <i class="paperbits-icon paperbits-align-justify"></i>\r\n    </a>\r\n</div>\r\n<div class="toolbox-btn" data-bind="css: { \'toolbox-btn-is-active\': colored() }">\r\n    <a href="#" role="button" aria-haspopup="true" data-bind="balloon: { component: { name: \'color-selector\', params: { initColorKey: $component.selectedColorKey, onSelect: $component.onColorSelected } } }, tooltip: { message: \'Change text color\' }">\r\n        <i class="paperbits-icon paperbits-color"></i>\r\n    </a>\r\n</div>'},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.HyperlinkEditor=void 0;const ko=__webpack_require__(0),hyperlinkEditor_html_1=__webpack_require__(807),permalinkResolver_1=__webpack_require__(209),decorators_1=__webpack_require__(2);let HyperlinkEditor=class{constructor(htmlEditorProvider,permalinkResolver,eventManager){this.htmlEditorProvider=htmlEditorProvider,this.permalinkResolver=permalinkResolver,this.eventManager=eventManager,this.htmlEditorProvider=htmlEditorProvider,this.permalinkResolver=permalinkResolver,this.eventManager=eventManager,this.onSelectionChange=this.onSelectionChange.bind(this),this.onHyperlinkChange=this.onHyperlinkChange.bind(this),this.hyperlink=ko.observable(),eventManager.addEventListener("htmlEditorChanged",this.onSelectionChange)}onHyperlinkChange(hyperlink){return __awaiter(this,void 0,void 0,(function*(){const htmlEditor=this.htmlEditorProvider.getCurrentHtmlEditor();htmlEditor&&(hyperlink?htmlEditor.setHyperlink(hyperlink):htmlEditor.removeHyperlink())}))}onSelectionChange(){return __awaiter(this,void 0,void 0,(function*(){const hyperlinkContract=this.htmlEditorProvider.getCurrentHtmlEditor().getHyperlink();if(hyperlinkContract){const hyperlinkModel=yield this.permalinkResolver.getHyperlinkFromContract(hyperlinkContract);this.hyperlink(hyperlinkModel)}else this.hyperlink(null)}))}onClick(){this.htmlEditorProvider.getCurrentHtmlEditor().expandSelection()}dispose(){this.eventManager.removeEventListener("htmlEditorChanged",this.onSelectionChange)}};__decorate([decorators_1.OnDestroyed(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],HyperlinkEditor.prototype,"dispose",null),HyperlinkEditor=__decorate([decorators_1.Component({selector:"hyperlink-editor",template:hyperlinkEditor_html_1.default}),__metadata("design:paramtypes",[Object,permalinkResolver_1.PermalinkResolver,Object])],HyperlinkEditor),exports.HyperlinkEditor=HyperlinkEditor},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="toolbox-btn" data-bind="css: { \'toolbox-btn-is-active\': hyperlink() }">\r\n    <a href="#" role="button" aria-haspopup="true" data-bind="balloon: { component: { name: \'hyperlink-selector\', params: { hyperlink: $component.hyperlink, onChange: $component.onHyperlinkChange } } }, tooltip: { message: \'Set hyperlink\' }">\r\n        <i class="paperbits-icon paperbits-link-69-2"></i>\r\n    </a>\r\n</div>'},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.TextblockEditor=void 0;const ko=__webpack_require__(0),textblockEditor_html_1=__webpack_require__(809),decorators_1=__webpack_require__(2),__1=__webpack_require__(810);let TextblockEditor=class{constructor(eventManager){this.eventManager=eventManager,this.pluginNames=ko.observableArray(),this.pluginNames.push("formatting"),this.pluginNames.push("hyperlink-editor")}initialize(){this.eventManager.dispatchEvent("enableHtmlEditor",this.model.htmlEditor)}};__decorate([decorators_1.Param(),__metadata("design:type",__1.TextblockModel)],TextblockEditor.prototype,"model",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],TextblockEditor.prototype,"onChange",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],TextblockEditor.prototype,"initialize",null),TextblockEditor=__decorate([decorators_1.Component({selector:"html-editor",template:textblockEditor_html_1.default}),__metadata("design:paramtypes",[Object])],TextblockEditor),exports.TextblockEditor=TextblockEditor},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default="<div class=\"flex flex-row\">\r\n    \x3c!-- ko foreach: { data: pluginNames, as: 'name' } --\x3e\r\n    \x3c!-- ko component: name --\x3e\r\n    \x3c!-- /ko --\x3e\r\n    \x3c!-- /ko --\x3e\r\n</div>"},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(290),exports),__exportStar(__webpack_require__(83),exports),__exportStar(__webpack_require__(277),exports),__exportStar(__webpack_require__(275),exports)},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.TextStyleSelector=void 0;const ko=__webpack_require__(0),textStyleSelector_html_1=__webpack_require__(812),decorators_1=__webpack_require__(2);let TextStyleSelector=class{constructor(){this.styles=ko.observableArray()}setTextStyle(style){this.onSelect&&this.onSelect(style)}};__decorate([decorators_1.Param(),__metadata("design:type",Function)],TextStyleSelector.prototype,"styles",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],TextStyleSelector.prototype,"onSelect",void 0),TextStyleSelector=__decorate([decorators_1.Component({selector:"text-style-selector",template:textStyleSelector_html_1.default}),__metadata("design:paramtypes",[])],TextStyleSelector),exports.TextStyleSelector=TextStyleSelector},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div id="textStyleSelector" role="menu" class="tools-paragraphstyle" data-bind="scrollable: true, focus: { childSelector: \'.tools-paragraph-style\' }">\r\n    \x3c!--ko foreach: { data: styles, as: \'style\' } --\x3e\r\n    <a href="#" role="menuitem" class="tools-paragraph-style tools-paragraph-style-normal" data-bind="text: style.displayName, click: $parent.setTextStyle"></a>\r\n    \x3c!--/ko--\x3e\r\n</div>'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DropbucketModule=void 0;const dropbucket_1=__webpack_require__(814);exports.DropbucketModule=class{register(injector){injector.bind("dropbucket",dropbucket_1.DropBucket)}}},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.DropBucket=void 0;const dropbucket_html_1=__webpack_require__(815),ko=__webpack_require__(0),Utils=__webpack_require__(6),ui_1=__webpack_require__(45),events_1=__webpack_require__(46),dropbucketItem_1=__webpack_require__(816),decorators_1=__webpack_require__(2);let DropBucket=class{constructor(globalEventHandler,eventManager,mediaService,dropHandlers,viewManager,widgetService){this.globalEventHandler=globalEventHandler,this.eventManager=eventManager,this.mediaService=mediaService,this.dropHandlers=dropHandlers,this.viewManager=viewManager,this.widgetService=widgetService,this.onDragDrop=this.onDragDrop.bind(this),this.onDragStart=this.onDragStart.bind(this),this.onDragEnd=this.onDragEnd.bind(this),this.onPaste=this.onPaste.bind(this),this.addPendingContent=this.addPendingContent.bind(this),this.uploadContentAsMedia=this.uploadContentAsMedia.bind(this),this.discardDroppedContent=this.discardDroppedContent.bind(this),this.handleDroppedContent=this.handleDroppedContent.bind(this),this.handleUnknownContent=this.handleUnknownContent.bind(this),this.globalEventHandler.addDragDropListener(this.onDragDrop),this.dropHandlers=dropHandlers,this.droppedItems=ko.observableArray()}canHandleDrop(event){return event.dataTransfer.files&&event.dataTransfer.files.length>0||event.dataTransfer.getData("url").length>0}addPendingContent(item){this.droppedItems.push(item)}handleDroppedContent(contentDescriptor){return __awaiter(this,void 0,void 0,(function*(){const dropbucketItem=new dropbucketItem_1.DropBucketItem;if(dropbucketItem.title=contentDescriptor.title,dropbucketItem.description=contentDescriptor.description,contentDescriptor.getWidgetOrder){const widgetOrder=yield contentDescriptor.getWidgetOrder();dropbucketItem.widgetOrder(widgetOrder)}if(dropbucketItem.thumbnailUrl(contentDescriptor.iconUrl),contentDescriptor.getThumbnailUrl&&contentDescriptor.getThumbnailUrl().then(thumbnailUrl=>{dropbucketItem.previewUrl(thumbnailUrl),dropbucketItem.thumbnailUrl(thumbnailUrl)}),contentDescriptor.uploadables&&contentDescriptor.uploadables.length)for(const uploadable of contentDescriptor.uploadables)dropbucketItem.uploadables.push(uploadable);this.addPendingContent(dropbucketItem)}))}onDragDrop(event){if(this.viewManager.mode===ui_1.ViewManagerMode.preview)return;if(!this.canHandleDrop(event))return;this.droppedItems.removeAll();const dataTransfer=event.dataTransfer,files=Array.prototype.slice.call(dataTransfer.files);let items;if(dataTransfer.files.length>0){items=[];for(const file of files)items.push({source:file,name:file.name,mimeType:file.type})}else{const urlData=dataTransfer.getData("url"),parts=urlData.split("/");items=[{source:urlData,name:parts[parts.length-1]}]}for(const item of items){let handled=!1,contentDescriptor=null,j=0;for(;null===contentDescriptor&&j<this.dropHandlers.length;)contentDescriptor=this.dropHandlers[j].getContentDescriptorFromDataTransfer(item),contentDescriptor&&(this.handleDroppedContent(contentDescriptor),handled=!0),j++;handled||this.handleUnknownContent(dataTransfer)}}onPaste(event){this.droppedItems.removeAll();const text=event.clipboardData.getData("text");let i=0,contentDescriptor=null;for(;null===contentDescriptor&&i<this.dropHandlers.length;)contentDescriptor=this.dropHandlers[i].getContentDescriptorFromDataTransfer({source:text,name:text.split("/").pop().split("?")[0]}),contentDescriptor&&this.handleDroppedContent(contentDescriptor),i++}handleUnknownContent(dataTransfer){if(0===dataTransfer.files.length)return;let title="File",description=dataTransfer.files[0].name;dataTransfer.files.length>1&&(title=dataTransfer.files.length+" files",description="");const files=Array.prototype.slice.call(dataTransfer.files),dropbucketItem=new dropbucketItem_1.DropBucketItem,uploadables=[];for(const file of files)uploadables.push(file);dropbucketItem.title=title,dropbucketItem.description=description,dropbucketItem.uploadables(uploadables),this.addPendingContent(dropbucketItem)}onDragStart(item){if(this.viewManager.mode==ui_1.ViewManagerMode.preview)return;item.widgetFactoryResult=item.widgetOrder().createWidget();const widgetElement=item.widgetFactoryResult.element,widgetModel=item.widgetFactoryResult.widgetModel,widgetBinding=item.widgetFactoryResult.widgetBinding;return this.droppedItems.remove(item),this.viewManager.beginDrag({sourceModel:widgetModel,sourceBinding:widgetBinding}),widgetElement}onDragEnd(dropbucketItem){return __awaiter(this,void 0,void 0,(function*(){if(this.viewManager.mode===ui_1.ViewManagerMode.preview)return;dropbucketItem.widgetFactoryResult.element.remove(),this.droppedItems.remove(dropbucketItem);const uploadables=dropbucketItem.uploadables();uploadables&&uploadables.length>0&&(this.uploadContentAsMedia(dropbucketItem),this.droppedItems.remove(dropbucketItem));const dragSession=this.viewManager.getDragSession(),acceptorBinding=dragSession.targetBinding;if(acceptorBinding&&acceptorBinding.handler){this.widgetService.getWidgetHandler(acceptorBinding.handler).onDragDrop(dragSession)}this.eventManager.dispatchEvent("virtualDragEnd")}))}uploadContentAsMedia(dropbucketItem){return __awaiter(this,void 0,void 0,(function*(){const uploadables=dropbucketItem.uploadables();this.droppedItems.remove(dropbucketItem),uploadables.forEach(uploadable=>__awaiter(this,void 0,void 0,(function*(){let uploadPromise;if("string"==typeof uploadable){const name=uploadable.split("/").pop().split("?")[0];uploadPromise=Utils.downloadFile(uploadable).then(blob=>this.mediaService.createMedia(name,blob)),this.viewManager.notifyProgress(uploadPromise,"Media library",`Uploading ${uploadable}...`)}else{const content=yield Utils.readFileAsByteArray(uploadable);uploadPromise=this.mediaService.createMedia(uploadable.name,content,uploadable.type),this.viewManager.notifyProgress(uploadPromise,"Media library",`Uploading ${uploadable.name}...`)}})))}))}discardDroppedContent(){this.droppedItems.removeAll()}};DropBucket=__decorate([decorators_1.Component({selector:"dropbucket",template:dropbucket_html_1.default}),__metadata("design:paramtypes",[events_1.GlobalEventHandler,Object,Object,Array,Object,Object])],DropBucket),exports.DropBucket=DropBucket},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='\x3c!-- ko if: droppedItems().length > 0 --\x3e\r\n\r\n<ul data-bind="visible: viewManager.primaryToolboxVisible, foreach: droppedItems()">\r\n    <li class="toolbox editor">\r\n        <div class="droppedcontent-details">\r\n            <h1>\r\n                <span data-bind="text: description"></span>\r\n            </h1>\r\n            <button class="btn btn-dismiss" aria-label="Close" data-bind="click: $component.discardDroppedContent">\r\n                <i class="paperbits-icon paperbits-simple-remove"></i>\r\n            </button>\r\n        </div>\r\n        <div class="droppedcontent-preview" data-bind="background: background, lightbox: { url: previewUrl }">\r\n        </div>\r\n        \x3c!--ko if: uploadables().length > 0 --\x3e\r\n        <button class="btn" data-bind="click: $component.uploadContentAsMedia">\r\n            <i class="paperbits-icon paperbits-square-upload"></i>\r\n            Upload to media library\r\n        </button>\r\n        \x3c!--/ko--\x3e\r\n\r\n        <div class="clearfix"></div>\r\n    </li>\r\n</ul>\r\n\x3c!-- /ko --\x3e'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DropBucketItem=void 0;const ko=__webpack_require__(0),background_1=__webpack_require__(82);exports.DropBucketItem=class{constructor(){this.title=null,this.description=null,this.previewUrl=ko.observable(),this.thumbnailUrl=ko.observable(),this.uploadables=ko.observableArray(),this.widgetOrder=ko.observable(),this.background=ko.computed(()=>{const background=new background_1.BackgroundModel;return background.sourceUrl=this.thumbnailUrl(),background})}}},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ViewportSelector=void 0;const ko=__webpack_require__(0),viewport_selector_html_1=__webpack_require__(818),decorators_1=__webpack_require__(2),events_1=__webpack_require__(46);let ViewportSelector=class{constructor(viewManager,eventManager){this.viewManager=viewManager,this.eventManager=eventManager,this.viewManager=viewManager,this.viewport=ko.observable("desktop"),this.viewport(this.viewManager.getViewport())}setXl(){this.viewport("xl"),this.viewManager.setViewport("xl"),this.eventManager.dispatchEvent(events_1.CommonEvents.onViewportChange,"xl")}setLg(){this.viewport("lg"),this.viewManager.setViewport("lg"),this.eventManager.dispatchEvent(events_1.CommonEvents.onViewportChange,"lg")}setMd(){this.viewport("md"),this.viewManager.setViewport("md"),this.eventManager.dispatchEvent(events_1.CommonEvents.onViewportChange,"md")}setSm(){this.viewport("sm"),this.viewManager.setViewport("sm"),this.eventManager.dispatchEvent(events_1.CommonEvents.onViewportChange,"sm")}setXs(){this.viewport("xs"),this.viewManager.setViewport("xs"),this.eventManager.dispatchEvent(events_1.CommonEvents.onViewportChange,"xs")}zoomOut(){this.viewport("zoomout"),this.viewManager.setViewport("zoomout")}};ViewportSelector=__decorate([decorators_1.Component({selector:"viewport-selector",template:viewport_selector_html_1.default}),__metadata("design:paramtypes",[Object,Object])],ViewportSelector),exports.ViewportSelector=ViewportSelector},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="toolbox toolbox-horizontal">\r\n    <div class="toolbox-btn d-none d-xl-inline-block" data-bind="css: { \'toolbox-btn-is-active\': viewport() == \'zoomout\' }">\r\n        <a href="#" data-bind="click: zoomOut, tooltip: \'Zoom out\', focus: true" role="button" aria-label="Switch to zoomed out view">\r\n            <i class="paperbits-icon paperbits-zoom-out"></i>\r\n        </a>\r\n    </div>\r\n    <div class="toolbox-btn d-none d-xl-inline-block" data-bind="css: { \'toolbox-btn-is-active\': viewport() == \'xl\' }">\r\n        <a href="#" data-bind="click: setXl, tooltip: \'Extra large screen\'" role="button" aria-label="Switch to extra large screen view">\r\n            <i class="paperbits-icon paperbits-desktop-screen"></i>\r\n        </a>\r\n    </div>\r\n    <div class="toolbox-btn d-none d-lg-inline-block" data-bind="css: { \'toolbox-btn-is-active\': viewport() == \'lg\' }">\r\n        <a href="#" data-bind="click: setLg, tooltip: \'Large screen\'" role="button" aria-label="Switch to large screen view">\r\n            𐩒\r\n        </a>\r\n    </div>\r\n    <div class="toolbox-btn d-none d-md-inline-block" data-bind="css: { \'toolbox-btn-is-active\': viewport() == \'md\' }">\r\n        <a href="#" data-bind="click: setMd, tooltip: \'Medium screen\'" role="button" aria-label="Switch to medium screen view">\r\n            <i class="paperbits-icon paperbits-tablet-2"></i>\r\n        </a>\r\n    </div>\r\n    <div class="toolbox-btn d-none d-sm-inline-block" data-bind="css: { \'toolbox-btn-is-active\': viewport() == \'sm\' }">\r\n        <a href="#" data-bind="click: setSm, tooltip: \'Small screen\'" role="button" aria-label="Switch to small screen view">\r\n            𐩒\r\n        </a>\r\n    </div>\r\n    <div class="toolbox-btn" data-bind="css: { \'toolbox-btn-is-active\': viewport() == \'xs\' }">\r\n        <a href="#" data-bind="click: setXs, tooltip: \'Extra small screen\'" role="button" aria-label="Switch to extra small screen view">\r\n            <i class="paperbits-icon paperbits-mobile"></i>\r\n        </a>\r\n    </div>\r\n</div>'},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(820),exports),__exportStar(__webpack_require__(822),exports)},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.LocaleSelector=void 0;const ko=__webpack_require__(0),locale_selector_html_1=__webpack_require__(821),decorators_1=__webpack_require__(2);let LocaleSelector=class{constructor(eventManager,viewManager,localeService){this.eventManager=eventManager,this.viewManager=viewManager,this.localeService=localeService,this.selectedLocale=ko.observable(),this.locales=ko.observableArray()}initialize(){return __awaiter(this,void 0,void 0,(function*(){this.refreshLocales(),this.eventManager.addEventListener("onLocalesChange",this.refreshLocales)}))}refreshLocales(){return __awaiter(this,void 0,void 0,(function*(){const locales=yield this.localeService.getLocales(),currentLocaleCode=yield this.localeService.getCurrentLocale();this.locales(locales),this.selectedLocale(locales.find(x=>x.code===currentLocaleCode))}))}selectLocale(locale){this.viewManager.clearJourney(),this.localeService.setCurrentLocale(locale.code),this.eventManager.dispatchEvent("onLocaleChange",locale),this.selectedLocale(locale)}addLocale(){return __awaiter(this,void 0,void 0,(function*(){const view={heading:"Add locale",component:{name:"locale-editor",params:{onLocaleAdded:()=>{this.viewManager.closeView()}}},resize:"vertically horizontally"};this.viewManager.openViewAsPopup(view)}))}};__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],LocaleSelector.prototype,"initialize",null),LocaleSelector=__decorate([decorators_1.Component({selector:"locale-selector",template:locale_selector_html_1.default,injectable:"localeSelector"}),__metadata("design:paramtypes",[Object,Object,Object])],LocaleSelector),exports.LocaleSelector=LocaleSelector},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="flex flex-column">\r\n    <div role="listbox" class="list-checkboxes" data-bind="foreach: { data: locales, as: \'locale\' }, scrollable: true, focus: { childSelector: \'.list-item\' }">\r\n        <a href="#" role="option" class="list-item" data-bind="text: locale.displayName, click: $component.selectLocale, css: { \'list-item-checked\': locale === $component.selectedLocale() }">\r\n        </a>\r\n    </div>\r\n    <div class="flex-item btn-group">\r\n        <button class="btn" data-bind="click: $component.addLocale">\r\n            <i class="paperbits-icon paperbits-simple-add"></i>\r\n            Add locale\r\n        </button>\r\n    </div>\r\n</div>'},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.LocaleEditor=void 0;const ko=__webpack_require__(0),localeEditor_html_1=__webpack_require__(823),decorators_1=__webpack_require__(2),localization_1=__webpack_require__(207),locales_1=__webpack_require__(824);let LocaleEditor=class{constructor(localeService,eventManager,viewManager){this.localeService=localeService,this.eventManager=eventManager,this.viewManager=viewManager,this.selectedLanguage=ko.observable(),this.selectedLocale=ko.observable(),this.locales=ko.observableArray(),this.languages=ko.observable(Object.keys(locales_1.builtInLocales).map(code=>({code:code,locales:locales_1.builtInLocales[code].locales,displayName:locales_1.builtInLocales[code].nameNative})))}initialize(){return __awaiter(this,void 0,void 0,(function*(){this.selectedLanguage.subscribe(language=>{this.locales(null),this.selectedLocale(null),language.locales&&this.locales(Object.keys(language.locales).map(x=>({code:x,displayName:language.locales[x].nameNative})))})}))}addLocale(){return __awaiter(this,void 0,void 0,(function*(){const language=this.selectedLanguage(),locale=this.selectedLocale();let code=language.code,displayName=language.displayName;locale&&(code+="-"+locale.code,displayName+=` (${locale.displayName})`),yield this.localeService.createLocale(code,displayName),this.eventManager.dispatchEvent("onLocalesChange"),this.onLocaleAdded&&this.onLocaleAdded(locale),this.viewManager.notifySuccess("Content localization",`Locale "${displayName}" was  added.`)}))}};__decorate([decorators_1.Param(),__metadata("design:type",Object)],LocaleEditor.prototype,"locale",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],LocaleEditor.prototype,"onLocaleAdded",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],LocaleEditor.prototype,"initialize",null),LocaleEditor=__decorate([decorators_1.Component({selector:"locale-editor",template:localeEditor_html_1.default,injectable:"localeEditor"}),__metadata("design:paramtypes",[localization_1.LocaleService,Object,Object])],LocaleEditor),exports.LocaleEditor=LocaleEditor},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<fieldset class="form" data-bind="scrollable: {}">\r\n    <div class="form-group">\r\n        <label class="form-label">\r\n            Language\r\n            <button class="btn btn-info" type="button" data-bind="tooltip: \'Locale code, e.g. en-us\'"></button>\r\n        </label>\r\n        <select id="textTransform" class="form-control" data-bind="options: languages, value: selectedLanguage, optionsText: \'displayName\'"></select>\r\n    </div>\r\n    \x3c!-- ko if: locales --\x3e\r\n    <div class="form-group">\r\n        <label class="form-label">\r\n            Display name\r\n            <button class="btn btn-info" type="button" data-bind="tooltip: \'Locale display name. e.g. English (US)\'"></button>\r\n        </label>\r\n        <select id="textTransform" class="form-control" data-bind="options: locales, value: selectedLocale, optionsText: \'displayName\'"></select>\r\n    </div>\r\n    \x3c!-- /ko --\x3e\r\n</fieldset>\r\n\r\n<div class="flex-item btn-group">\r\n    <button class="btn" data-bind="click: addLocale">\r\n        <i class="paperbits-icon paperbits-simple-add"></i>\r\n        Add locale\r\n    </button>\r\n</div>'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.builtInLocales=void 0,exports.builtInLocales={af:{nameNative:"Afrikaans",nameEnglish:"Afrikaans",locales:{za:{nameNative:"Afrikaans",nameEnglish:"Afrikaans"}}},ar:{nameNative:"العربية",nameEnglish:"Arabic"},bg:{nameNative:"Български",nameEnglish:"Bulgarian",locales:{bg:{nameNative:"Български",nameEnglish:"Bulgarian"}}},ca:{nameNative:"Català",nameEnglish:"Catalan",locales:{ad:{nameNative:"Català",nameEnglish:"Catalan"}}},cs:{nameNative:"Čeština",nameEnglish:"Czech",locales:{cz:{nameNative:"Čeština",nameEnglish:"Czech"}}},cy:{nameNative:"Cymraeg",nameEnglish:"Welsh",locales:{gb:{nameNative:"Cymraeg",nameEnglish:"Welsh"}}},da:{nameNative:"Dansk",nameEnglish:"Danish",locales:{dk:{nameNative:"Dansk",nameEnglish:"Danish"}}},de:{nameNative:"Deutsch",nameEnglish:"German",locales:{at:{nameNative:"Österreich",nameEnglish:"Austria"},ch:{nameNative:"Schweiz",nameEnglish:"Switzerland"},de:{nameNative:"Deutschland",nameEnglish:"Germany"}}},el:{nameNative:"Ελληνικά",nameEnglish:"Greek",locales:{gr:{nameNative:"Ελληνικά",nameEnglish:"Greek"}}},en:{nameNative:"English",nameEnglish:"English",locales:{gb:{nameNative:"UK",nameEnglish:"UK"},us:{nameNative:"US",nameEnglish:"US"}}},es:{nameNative:"Español",nameEnglish:"Spanish",locales:{cl:{nameNative:"Chile",nameEnglish:"Chile"},es:{nameNative:"España",nameEnglish:"Spain"},mx:{nameNative:"México",nameEnglish:"Mexico"}}},et:{nameNative:"Eesti",nameEnglish:"Estonian",locales:{ee:{nameNative:"Eesti",nameEnglish:"Estonian"}}},eu:{nameNative:"Euskara",nameEnglish:"Basque"},fa:{nameNative:"فارسی",nameEnglish:"Persian",locales:{ir:{nameNative:"فارسی",nameEnglish:"Persian"}}},fi:{nameNative:"Suomi",nameEnglish:"Finnish",locales:{fi:{nameNative:"Suomi",nameEnglish:"Finnish"}}},fr:{nameNative:"Français",nameEnglish:"French",locales:{ca:{nameNative:"Canada",nameEnglish:"Canada"},fr:{nameNative:"France",nameEnglish:"France"}}},he:{nameNative:"עברית",nameEnglish:"Hebrew",locales:{il:{nameNative:"עברית",nameEnglish:"Hebrew"}}},hr:{nameNative:"Hrvatski",nameEnglish:"Croatian",locales:{hr:{nameNative:"Hrvatski",nameEnglish:"Croatian"}}},hu:{nameNative:"Magyar",nameEnglish:"Hungarian",locales:{hu:{nameNative:"Magyar",nameEnglish:"Hungarian"}}},id:{nameNative:"Bahasa Indonesia",nameEnglish:"Indonesian",locales:{id:{nameNative:"Bahasa Indonesia",nameEnglish:"Indonesian"}}},is:{nameNative:"Íslenska",nameEnglish:"Icelandic",locales:{is:{nameNative:"Íslenska",nameEnglish:"Icelandic"}}},it:{nameNative:"Italiano",nameEnglish:"Italian",locales:{it:{nameNative:"Italiano",nameEnglish:"Italian"}}},ja:{nameNative:"日本語",nameEnglish:"Japanese",locales:{jp:{nameNative:"日本語",nameEnglish:"Japanese"}}},km:{nameNative:"ភាសាខ្មែរ",nameEnglish:"Khmer",locales:{kh:{nameNative:"ភាសាខ្មែរ",nameEnglish:"Khmer"}}},ko:{nameNative:"한국어",nameEnglish:"Korean",locales:{kr:{nameNative:"한국어",nameEnglish:"Korean"}}},la:{nameNative:"Latina",nameEnglish:"Latin"},lt:{nameNative:"Lietuvių",nameEnglish:"Lithuanian",locales:{lt:{nameNative:"Lietuvių",nameEnglish:"Lithuanian"}}},lv:{nameNative:"Latviešu",nameEnglish:"Latvian",locales:{lv:{nameNative:"Latviešu",nameEnglish:"Latvian"}}},mn:{nameNative:"Монгол",nameEnglish:"Mongolian",locales:{mn:{nameNative:"Монгол",nameEnglish:"Mongolian"}}},nb:{nameNative:"Norsk bokmål",nameEnglish:"Norwegian",locales:{no:{nameEnglish:"Bokmål"}}},nl:{nameNative:"Nederlands",nameEnglish:"Dutch",locales:{nl:{nameNative:"Nederlands",nameEnglish:"Dutch"}}},nn:{nameNative:"Norsk nynorsk",nameEnglish:"Norwegian",locales:{no:{nameEnglish:"Nynorsk"}}},pl:{nameNative:"Polski",nameEnglish:"Polish",locales:{pl:{nameNative:"Polski",nameEnglish:"Polish"}}},pt:{nameNative:"Português",nameEnglish:"Portuguese",locales:{br:{nameNative:"Brasil",nameEnglish:"Brazil"},pt:{nameNative:"Portugal",nameEnglish:"Portugal"}}},ro:{nameNative:"Română",nameEnglish:"Romanian",locales:{ro:{nameNative:"Română",nameEnglish:"Romanian"}}},ru:{nameNative:"Русский",nameEnglish:"Russian",locales:{ru:{nameNative:"Россия",nameEnglish:"Russia"}}},sk:{nameNative:"Slovenčina",nameEnglish:"Slovak",locales:{sk:{nameNative:"Slovenčina",nameEnglish:"Slovak"}}},sl:{nameNative:"Slovenščina",nameEnglish:"Slovenian",locales:{si:{nameNative:"Slovenščina",nameEnglish:"Slovenian"}}},sr:{nameNative:"Српски / Srpski",nameEnglish:"Serbian",locales:{rs:{nameNative:"Српски / Srpski",nameEnglish:"Serbian"}}},sv:{nameNative:"Svenska",nameEnglish:"Swedish",locales:{se:{nameNative:"Svenska",nameEnglish:"Swedish"}}},th:{nameNative:"ไทย",nameEnglish:"Thai",locales:{th:{nameNative:"ไทย",nameEnglish:"Thai"}}},tr:{nameNative:"Türkçe",nameEnglish:"Turkish",locales:{tr:{nameNative:"Türkçe",nameEnglish:"Turkish"}}},uk:{nameNative:"Українська",nameEnglish:"Ukrainian",locales:{ua:{nameNative:"Українська",nameEnglish:"Ukrainian"}}},vi:{nameNative:"Tiếng Việt",nameEnglish:"Vietnamese",locales:{vn:{nameNative:"Tiếng Việt",nameEnglish:"Vietnamese"}}},zh:{nameNative:"中文",nameEnglish:"Chinese",locales:{cn:{nameNative:"中国大陆",nameEnglish:"PRC"},tw:{nameNative:"台灣",nameEnglish:"Taiwan"}}}}},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(252),exports),__exportStar(__webpack_require__(239),exports),__exportStar(__webpack_require__(256),exports),__exportStar(__webpack_require__(257),exports),__exportStar(__webpack_require__(244),exports),__exportStar(__webpack_require__(245),exports),__exportStar(__webpack_require__(201),exports),__exportStar(__webpack_require__(199),exports),__exportStar(__webpack_require__(251),exports),__exportStar(__webpack_require__(246),exports),__exportStar(__webpack_require__(826),exports),__exportStar(__webpack_require__(278),exports),__exportStar(__webpack_require__(249),exports),__exportStar(__webpack_require__(198),exports),__exportStar(__webpack_require__(827),exports),__exportStar(__webpack_require__(248),exports),__exportStar(__webpack_require__(259),exports),__exportStar(__webpack_require__(253),exports),__exportStar(__webpack_require__(247),exports),__exportStar(__webpack_require__(258),exports),__exportStar(__webpack_require__(250),exports),__exportStar(__webpack_require__(260),exports),__exportStar(__webpack_require__(254),exports),__exportStar(__webpack_require__(255),exports),__exportStar(__webpack_require__(241),exports),__exportStar(__webpack_require__(261),exports)},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.HostBindingHandler=void 0;const ko=__webpack_require__(0),ui_1=__webpack_require__(45),metaDataSetter_1=__webpack_require__(289);exports.HostBindingHandler=class{constructor(globalEventHandler,viewManager,router,siteService,mediaService){this.globalEventHandler=globalEventHandler,this.viewManager=viewManager,this.router=router,this.siteService=siteService,this.mediaService=mediaService,this.hostComponent=ko.observable(),this.designTime=ko.observable(!0),ko.bindingHandlers.host={init:(element,valueAccessor)=>{const config=valueAccessor(),css=ko.observable("desktop");config.block.subscribe(this.designTime),config.viewport.subscribe(viewport=>{switch(this.viewManager.mode=ui_1.ViewManagerMode.selecting,viewport){case"zoomout":css("viewport-zoomout"),this.viewManager.mode=ui_1.ViewManagerMode.pause;break;case"xl":css("viewport-xl");break;case"lg":css("viewport-lg");break;case"md":css("viewport-md");break;case"sm":css("viewport-sm");break;case"xs":css("viewport-xs");break;default:throw new Error("Unknown viewport")}}),ko.applyBindingsToNode(element,{css:css},null);const hostElement=this.createIFrame();element.appendChild(hostElement)},update:(element,valueAccessor)=>{const config=valueAccessor();this.hostComponent(config.host())}}}createIFrame(){const hostElement=document.createElement("iframe");hostElement.src="/page.html?designtime=true",hostElement.classList.add("host"),hostElement.title="Website";const onClick=event=>{event.preventDefault()},onPointerDown=event=>{if(!event.ctrlKey&&!event.metaKey&&this.viewManager.mode!==ui_1.ViewManagerMode.preview)return;const htmlLinkElement=event.target.closest("A");htmlLinkElement&&(event.preventDefault(),this.router.navigateTo(htmlLinkElement.href))};let hostedWindowHistory;const onRouteChange=route=>{route.metadata.originatedByHost=!0,hostedWindowHistory.pushState(route,route.title,route.url)};return hostElement.addEventListener("load",()=>__awaiter(this,void 0,void 0,(function*(){const contentDocument=hostElement.contentDocument;this.globalEventHandler.appendDocument(contentDocument),this.setRootElement(contentDocument.body),contentDocument.addEventListener("mousedown",onPointerDown,!0),contentDocument.addEventListener("click",onClick,!0),this.viewManager.hostDocument=contentDocument,hostedWindowHistory=hostElement.contentDocument.defaultView.window.history;const hostedWindowOriginalPushState=hostedWindowHistory.pushState;this.router.addRouteChangeListener(onRouteChange);const initialRoute=this.router.getCurrentRoute();hostedWindowHistory.pushState(initialRoute,initialRoute.title,location.href),hostedWindowHistory.pushState=(route,title,url)=>{hostedWindowOriginalPushState.call(hostedWindowHistory,route,title,url),route&&route.metadata.originatedByHost||window.history.pushState(route,route.title,route.url)};const settings=yield this.siteService.getSettings(),siteSettings=null==settings?void 0:settings.site;if(!(null==siteSettings?void 0:siteSettings.faviconSourceKey))return;const mediaContract=yield this.mediaService.getMediaByKey(siteSettings.faviconSourceKey);mediaContract&&mediaContract.permalink&&metaDataSetter_1.MetaDataSetter.setFavIcon(mediaContract.permalink)})),!1),hostElement.addEventListener("beforeunload",()=>{this.router.removeRouteChangeListener(onRouteChange)},!1),hostElement}setRootElement(bodyElement){return __awaiter(this,void 0,void 0,(function*(){const styleElement=document.createElement("style");bodyElement.ownerDocument.head.appendChild(styleElement),ko.applyBindingsToNode(bodyElement,{css:{design:this.designTime}},null),ko.applyBindingsToNode(styleElement,{styleSheet:{}},null),ko.applyBindingsToNode(bodyElement,{component:this.hostComponent},null)}))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ResizableBindingHandler=void 0;const ko=__webpack_require__(0),util_1=__webpack_require__(828);exports.ResizableBindingHandler=class{constructor(eventManager){ko.bindingHandlers.resizable={init:(element,valueAccessor)=>{const options=valueAccessor();let directions,onResizeCallback;const setOptions=updatedOptions=>{"string"==typeof updatedOptions?directions=updatedOptions:(directions=updatedOptions.directions,onResizeCallback=updatedOptions.onresize),directions.includes("suspended")?(element.classList.add("resize-suspended"),element.style.width=null,element.style.height=null):element.classList.remove("resize-suspended")};setOptions(ko.unwrap(options)),ko.isObservable(options)&&options.subscribe(setOptions);let initialOffsetX,initialOffsetY,initialWidth,initialHeight,initialEdge,initialLeft,initialRight,initialTop,initialBottom,resizing=!1;const style=window.getComputedStyle(element),minWidth=style.minWidth,minHeight=style.minHeight,onPointerDown=(event,edge)=>{if("none"===directions)return;event.preventDefault(),event.stopImmediatePropagation(),eventManager.addEventListener("onPointerMove",onPointerMove),eventManager.addEventListener("onPointerUp",onPointerUp),resizing=!0;const elementRect=element.getBoundingClientRect();initialEdge=edge,initialOffsetX=event.clientX,initialOffsetY=event.clientY,initialWidth=elementRect.width,initialHeight=elementRect.height,initialLeft=elementRect.left,initialRight=elementRect.right,initialTop=elementRect.top,initialBottom=elementRect.bottom;const bodyWidth=element.ownerDocument.body.clientWidth,bodyHeight=element.ownerDocument.body.clientHeight;switch(initialEdge){case"left":element.style.left="unset",element.style.right=bodyWidth-initialRight+"px",element.style.width=initialWidth+"px";break;case"right":element.style.right="unset",element.style.left=initialLeft+"px",element.style.width=initialWidth+"px";break;case"top":element.style.top="unset",element.style.bottom=bodyHeight-initialBottom+"px",element.style.height=initialHeight+"px";break;case"bottom":element.style.bottom="unset",element.style.top=initialTop+"px",element.style.height=initialHeight+"px"}element.style.position="fixed"},onPointerUp=event=>{resizing=!1,eventManager.removeEventListener("onPointerMove",onPointerMove),eventManager.removeEventListener("onPointerUp",onPointerUp),onResizeCallback&&onResizeCallback()},onPointerMove=event=>{if(!resizing)return;let width,height;switch(initialEdge){case"left":width=initialWidth+(initialOffsetX-event.clientX)+"px",util_1.isNumber(minWidth)&&width<minWidth?width=minWidth:(element.style.left="unset",element.style.width=width,element.classList.add("resized-horizontally"));break;case"right":width=initialWidth+event.clientX-initialOffsetX+"px",util_1.isNumber(minWidth)&&width<minWidth?width=minWidth:(element.style.right="unset",element.style.width=width,element.classList.add("resized-horizontally"));break;case"top":height=initialHeight+(initialOffsetY-event.clientY)+"px",util_1.isNumber(minHeight)&&height<minHeight?height=minHeight:(element.style.top="unset",element.style.height=height,element.classList.add("resized-vertically"));break;case"bottom":height=initialHeight+event.clientY-initialOffsetY+"px",util_1.isNumber(minHeight)&&height<minHeight?height=minHeight:(element.style.bottom="unset",element.style.height=height,element.classList.add("resized-vertically"));break;default:throw new Error(`Unexpected resizing initial edge: "${initialEdge}".`)}eventManager.dispatchEvent("onEditorResize")};if(directions.includes("vertically")){const topResizeHandle=element.ownerDocument.createElement("div");topResizeHandle.classList.add("resize-handle","resize-handle-top"),element.appendChild(topResizeHandle),topResizeHandle.addEventListener("mousedown",e=>onPointerDown(e,"top"));const bottomResizeHandle=element.ownerDocument.createElement("div");bottomResizeHandle.classList.add("resize-handle","resize-handle-bottom"),element.appendChild(bottomResizeHandle),bottomResizeHandle.addEventListener("mousedown",e=>onPointerDown(e,"bottom"))}if(directions.includes("horizontally")){const rightResizeHandle=element.ownerDocument.createElement("div");rightResizeHandle.classList.add("resize-handle","resize-handle-right"),element.appendChild(rightResizeHandle),rightResizeHandle.addEventListener("mousedown",e=>onPointerDown(e,"right"));const leftResizeHandle=element.ownerDocument.createElement("div");leftResizeHandle.classList.add("resize-handle","resize-handle-left"),element.appendChild(leftResizeHandle),leftResizeHandle.addEventListener("mousedown",e=>onPointerDown(e,"left"))}ko.utils.domNodeDisposal.addDisposeCallback(element,()=>{eventManager.removeEventListener("onPointerMove",onPointerMove),eventManager.removeEventListener("onPointerUp",onPointerUp)})}}}}},function(module,exports,__webpack_require__){(function(process){var getOwnPropertyDescriptors=Object.getOwnPropertyDescriptors||function(obj){for(var keys=Object.keys(obj),descriptors={},i=0;i<keys.length;i++)descriptors[keys[i]]=Object.getOwnPropertyDescriptor(obj,keys[i]);return descriptors},formatRegExp=/%[sdj%]/g;exports.format=function(f){if(!isString(f)){for(var objects=[],i=0;i<arguments.length;i++)objects.push(inspect(arguments[i]));return objects.join(" ")}i=1;for(var args=arguments,len=args.length,str=String(f).replace(formatRegExp,(function(x){if("%%"===x)return"%";if(i>=len)return x;switch(x){case"%s":return String(args[i++]);case"%d":return Number(args[i++]);case"%j":try{return JSON.stringify(args[i++])}catch(_){return"[Circular]"}default:return x}})),x=args[i];i<len;x=args[++i])isNull(x)||!isObject(x)?str+=" "+x:str+=" "+inspect(x);return str},exports.deprecate=function(fn,msg){if(void 0!==process&&!0===process.noDeprecation)return fn;if(void 0===process)return function(){return exports.deprecate(fn,msg).apply(this,arguments)};var warned=!1;return function(){if(!warned){if(process.throwDeprecation)throw new Error(msg);process.traceDeprecation?console.trace(msg):console.error(msg),warned=!0}return fn.apply(this,arguments)}};var debugEnviron,debugs={};function inspect(obj,opts){var ctx={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(ctx.depth=arguments[2]),arguments.length>=4&&(ctx.colors=arguments[3]),isBoolean(opts)?ctx.showHidden=opts:opts&&exports._extend(ctx,opts),isUndefined(ctx.showHidden)&&(ctx.showHidden=!1),isUndefined(ctx.depth)&&(ctx.depth=2),isUndefined(ctx.colors)&&(ctx.colors=!1),isUndefined(ctx.customInspect)&&(ctx.customInspect=!0),ctx.colors&&(ctx.stylize=stylizeWithColor),formatValue(ctx,obj,ctx.depth)}function stylizeWithColor(str,styleType){var style=inspect.styles[styleType];return style?"["+inspect.colors[style][0]+"m"+str+"["+inspect.colors[style][1]+"m":str}function stylizeNoColor(str,styleType){return str}function formatValue(ctx,value,recurseTimes){if(ctx.customInspect&&value&&isFunction(value.inspect)&&value.inspect!==exports.inspect&&(!value.constructor||value.constructor.prototype!==value)){var ret=value.inspect(recurseTimes,ctx);return isString(ret)||(ret=formatValue(ctx,ret,recurseTimes)),ret}var primitive=function(ctx,value){if(isUndefined(value))return ctx.stylize("undefined","undefined");if(isString(value)){var simple="'"+JSON.stringify(value).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ctx.stylize(simple,"string")}if(isNumber(value))return ctx.stylize(""+value,"number");if(isBoolean(value))return ctx.stylize(""+value,"boolean");if(isNull(value))return ctx.stylize("null","null")}(ctx,value);if(primitive)return primitive;var keys=Object.keys(value),visibleKeys=function(array){var hash={};return array.forEach((function(val,idx){hash[val]=!0})),hash}(keys);if(ctx.showHidden&&(keys=Object.getOwnPropertyNames(value)),isError(value)&&(keys.indexOf("message")>=0||keys.indexOf("description")>=0))return formatError(value);if(0===keys.length){if(isFunction(value)){var name=value.name?": "+value.name:"";return ctx.stylize("[Function"+name+"]","special")}if(isRegExp(value))return ctx.stylize(RegExp.prototype.toString.call(value),"regexp");if(isDate(value))return ctx.stylize(Date.prototype.toString.call(value),"date");if(isError(value))return formatError(value)}var output,base="",array=!1,braces=["{","}"];(isArray(value)&&(array=!0,braces=["[","]"]),isFunction(value))&&(base=" [Function"+(value.name?": "+value.name:"")+"]");return isRegExp(value)&&(base=" "+RegExp.prototype.toString.call(value)),isDate(value)&&(base=" "+Date.prototype.toUTCString.call(value)),isError(value)&&(base=" "+formatError(value)),0!==keys.length||array&&0!=value.length?recurseTimes<0?isRegExp(value)?ctx.stylize(RegExp.prototype.toString.call(value),"regexp"):ctx.stylize("[Object]","special"):(ctx.seen.push(value),output=array?function(ctx,value,recurseTimes,visibleKeys,keys){for(var output=[],i=0,l=value.length;i<l;++i)hasOwnProperty(value,String(i))?output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,String(i),!0)):output.push("");return keys.forEach((function(key){key.match(/^\d+$/)||output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,key,!0))})),output}(ctx,value,recurseTimes,visibleKeys,keys):keys.map((function(key){return formatProperty(ctx,value,recurseTimes,visibleKeys,key,array)})),ctx.seen.pop(),function(output,base,braces){if(output.reduce((function(prev,cur){return cur.indexOf("\n")>=0&&0,prev+cur.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return braces[0]+(""===base?"":base+"\n ")+" "+output.join(",\n  ")+" "+braces[1];return braces[0]+base+" "+output.join(", ")+" "+braces[1]}(output,base,braces)):braces[0]+base+braces[1]}function formatError(value){return"["+Error.prototype.toString.call(value)+"]"}function formatProperty(ctx,value,recurseTimes,visibleKeys,key,array){var name,str,desc;if((desc=Object.getOwnPropertyDescriptor(value,key)||{value:value[key]}).get?str=desc.set?ctx.stylize("[Getter/Setter]","special"):ctx.stylize("[Getter]","special"):desc.set&&(str=ctx.stylize("[Setter]","special")),hasOwnProperty(visibleKeys,key)||(name="["+key+"]"),str||(ctx.seen.indexOf(desc.value)<0?(str=isNull(recurseTimes)?formatValue(ctx,desc.value,null):formatValue(ctx,desc.value,recurseTimes-1)).indexOf("\n")>-1&&(str=array?str.split("\n").map((function(line){return"  "+line})).join("\n").substr(2):"\n"+str.split("\n").map((function(line){return"   "+line})).join("\n")):str=ctx.stylize("[Circular]","special")),isUndefined(name)){if(array&&key.match(/^\d+$/))return str;(name=JSON.stringify(""+key)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(name=name.substr(1,name.length-2),name=ctx.stylize(name,"name")):(name=name.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),name=ctx.stylize(name,"string"))}return name+": "+str}function isArray(ar){return Array.isArray(ar)}function isBoolean(arg){return"boolean"==typeof arg}function isNull(arg){return null===arg}function isNumber(arg){return"number"==typeof arg}function isString(arg){return"string"==typeof arg}function isUndefined(arg){return void 0===arg}function isRegExp(re){return isObject(re)&&"[object RegExp]"===objectToString(re)}function isObject(arg){return"object"==typeof arg&&null!==arg}function isDate(d){return isObject(d)&&"[object Date]"===objectToString(d)}function isError(e){return isObject(e)&&("[object Error]"===objectToString(e)||e instanceof Error)}function isFunction(arg){return"function"==typeof arg}function objectToString(o){return Object.prototype.toString.call(o)}function pad(n){return n<10?"0"+n.toString(10):n.toString(10)}exports.debuglog=function(set){if(isUndefined(debugEnviron)&&(debugEnviron=process.env.NODE_DEBUG||""),set=set.toUpperCase(),!debugs[set])if(new RegExp("\\b"+set+"\\b","i").test(debugEnviron)){var pid=process.pid;debugs[set]=function(){var msg=exports.format.apply(exports,arguments);console.error("%s %d: %s",set,pid,msg)}}else debugs[set]=function(){};return debugs[set]},exports.inspect=inspect,inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},inspect.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},exports.isArray=isArray,exports.isBoolean=isBoolean,exports.isNull=isNull,exports.isNullOrUndefined=function(arg){return null==arg},exports.isNumber=isNumber,exports.isString=isString,exports.isSymbol=function(arg){return"symbol"==typeof arg},exports.isUndefined=isUndefined,exports.isRegExp=isRegExp,exports.isObject=isObject,exports.isDate=isDate,exports.isError=isError,exports.isFunction=isFunction,exports.isPrimitive=function(arg){return null===arg||"boolean"==typeof arg||"number"==typeof arg||"string"==typeof arg||"symbol"==typeof arg||void 0===arg},exports.isBuffer=__webpack_require__(829);var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function timestamp(){var d=new Date,time=[pad(d.getHours()),pad(d.getMinutes()),pad(d.getSeconds())].join(":");return[d.getDate(),months[d.getMonth()],time].join(" ")}function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}exports.log=function(){console.log("%s - %s",timestamp(),exports.format.apply(exports,arguments))},exports.inherits=__webpack_require__(830),exports._extend=function(origin,add){if(!add||!isObject(add))return origin;for(var keys=Object.keys(add),i=keys.length;i--;)origin[keys[i]]=add[keys[i]];return origin};var kCustomPromisifiedSymbol="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function callbackifyOnRejected(reason,cb){if(!reason){var newReason=new Error("Promise was rejected with a falsy value");newReason.reason=reason,reason=newReason}return cb(reason)}exports.promisify=function(original){if("function"!=typeof original)throw new TypeError('The "original" argument must be of type Function');if(kCustomPromisifiedSymbol&&original[kCustomPromisifiedSymbol]){var fn;if("function"!=typeof(fn=original[kCustomPromisifiedSymbol]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(fn,kCustomPromisifiedSymbol,{value:fn,enumerable:!1,writable:!1,configurable:!0}),fn}function fn(){for(var promiseResolve,promiseReject,promise=new Promise((function(resolve,reject){promiseResolve=resolve,promiseReject=reject})),args=[],i=0;i<arguments.length;i++)args.push(arguments[i]);args.push((function(err,value){err?promiseReject(err):promiseResolve(value)}));try{original.apply(this,args)}catch(err){promiseReject(err)}return promise}return Object.setPrototypeOf(fn,Object.getPrototypeOf(original)),kCustomPromisifiedSymbol&&Object.defineProperty(fn,kCustomPromisifiedSymbol,{value:fn,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(fn,getOwnPropertyDescriptors(original))},exports.promisify.custom=kCustomPromisifiedSymbol,exports.callbackify=function(original){if("function"!=typeof original)throw new TypeError('The "original" argument must be of type Function');function callbackified(){for(var args=[],i=0;i<arguments.length;i++)args.push(arguments[i]);var maybeCb=args.pop();if("function"!=typeof maybeCb)throw new TypeError("The last argument must be of type Function");var self=this,cb=function(){return maybeCb.apply(self,arguments)};original.apply(this,args).then((function(ret){process.nextTick(cb,null,ret)}),(function(rej){process.nextTick(callbackifyOnRejected,rej,cb)}))}return Object.setPrototypeOf(callbackified,Object.getPrototypeOf(original)),Object.defineProperties(callbackified,getOwnPropertyDescriptors(original)),callbackified}}).call(this,__webpack_require__(88))},function(module,exports){module.exports=function(arg){return arg&&"object"==typeof arg&&"function"==typeof arg.copy&&"function"==typeof arg.fill&&"function"==typeof arg.readUInt8}},function(module,exports){"function"==typeof Object.create?module.exports=function(ctor,superCtor){ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype,ctor.prototype=new TempCtor,ctor.prototype.constructor=ctor}},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.HyperlinkSelector=void 0;const ko=__webpack_require__(0),hyperlinkSelector_html_1=__webpack_require__(832),decorators_1=__webpack_require__(2);let HyperlinkSelector=class{constructor(hyperlinkProviders){this.hyperlinkProviders=hyperlinkProviders,this.hyperlink=ko.observable(),this.hyperlinkProvider=ko.observable(null),this.target=ko.observable("_self"),this.selection=ko.computed(()=>{const hyperlink=ko.unwrap(this.hyperlink);return hyperlink?`${hyperlink.title}${hyperlink.anchorName?" ("+hyperlink.anchorName+")":""}`:"No link"})}onMounted(){this.updateHyperlinkState(this.hyperlink()),this.hyperlinkProvider.subscribe(this.onResourcePickerChange),this.target.subscribe(this.targetChanged)}onResourcePickerChange(resourcePicker){null===resourcePicker&&(this.hyperlink(null),this.onChange(null))}onHyperlinkSelected(hyperlink){if(this.hyperlink(hyperlink),hyperlink){hyperlink.target=this.target();const hyperlinkProvider=this.hyperlinkProviders.find(x=>x.canHandleHyperlink(hyperlink.targetKey));this.hyperlinkProvider(hyperlinkProvider)}this.onChange&&this.onChange(hyperlink)}targetChanged(){const hyperlink=this.hyperlink();hyperlink.target=this.target(),this.hyperlink(hyperlink),this.onChange&&this.onChange(hyperlink)}selectProvider(provider){this.hyperlinkProvider(provider),provider||this.hyperlink(null)}getCurrentSelection(){const hyperlink=this.hyperlink();return this.hyperlinkProvider()&&hyperlink?`${this.hyperlinkProvider().name}: ${hyperlink.title} ${hyperlink.anchorName?"("+hyperlink.anchorName+")":""}`:"Not selected"}clearProvider(){this.hyperlinkProvider(null)}updateHyperlinkState(hyperlink){return __awaiter(this,void 0,void 0,(function*(){if(!hyperlink)return void this.hyperlinkProvider(null);let hyperlinkProvider;hyperlink.targetKey&&(hyperlinkProvider=this.hyperlinkProviders.find(x=>x.canHandleHyperlink(hyperlink.targetKey))),this.hyperlink(hyperlink),this.target(hyperlink.target||"_self"),this.hyperlinkProvider(hyperlinkProvider)}))}};__decorate([decorators_1.Param(),__metadata("design:type",Function)],HyperlinkSelector.prototype,"hyperlink",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],HyperlinkSelector.prototype,"onChange",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],HyperlinkSelector.prototype,"onMounted",null),HyperlinkSelector=__decorate([decorators_1.Component({selector:"hyperlink-selector",template:hyperlinkSelector_html_1.default}),__metadata("design:paramtypes",[Array])],HyperlinkSelector),exports.HyperlinkSelector=HyperlinkSelector},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="editor" data-bind="scrollable: {}">\r\n    <h1>Hyperlink</h1>\r\n    <hr>\r\n\r\n    <div class="tabs" role="tablist">\r\n        <div class="tab" role="presentation" data-bind="css: { \'tab-is-active\': !hyperlinkProvider() }, attr: { \'aria-selected\': !hyperlinkProvider() }">\r\n            <a href="#" data-bind="click: clearProvider, focus: true" title="Clear hyperlink" role="tab" aria-label="Clear hyperlink">\r\n                <i class="paperbits-icon paperbits-ban"></i>\r\n            </a>\r\n        </div>\r\n\r\n        \x3c!--ko foreach: { data: hyperlinkProviders, as: \'hyperlinkProvider\' } --\x3e\r\n        \x3c!--ko if: hyperlinkProvider.componentName !== \'blog-selector\' --\x3e\r\n        <div class="tab" role="presentation" data-bind="css: { \'tab-is-active\': $component.hyperlinkProvider() && hyperlinkProvider.componentName === $component.hyperlinkProvider().componentName }, attr: { \'title\': hyperlinkProvider.name, \'aria-selected\': $parent.hyperlinkProvider() && hyperlinkProvider.componentName === $parent.hyperlinkProvider().componentName }">\r\n            <a href="#" role="tab" data-bind="balloon: { component: { name: hyperlinkProvider.componentName, params: { onHyperlinkSelect: $component.onHyperlinkSelected } }, closeOn: $component.hyperlink }">\r\n                <i data-bind="css: hyperlinkProvider.iconClass"></i>\r\n            </a>\r\n        </div>\r\n        \x3c!--/ko--\x3e\r\n        \x3c!--/ko--\x3e\r\n    </div>\r\n\r\n    \x3c!--ko if: hyperlink --\x3e\r\n    <div class="form-group">\r\n        <label for="hyperlink"> \r\n            Link points to:\r\n        </label>\r\n        <div class="max-w300 text-overflow">\r\n            <b id="hyperlink" data-bind="text: $component.selection, attr: { title: selection }"></b>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="form-group">\r\n        <label for="targetValue" class="form-label">\r\n            Link opens in:\r\n        </label>\r\n        <label class="form-label">\r\n            <input type="radio" name="target" value="_self" data-bind="checked: target"> Same window\r\n        </label>\r\n        <label class="form-label">\r\n            <input type="radio" name="target" value="_blank" data-bind="checked: target"> New window\r\n        </label>\r\n    </div>\r\n    \x3c!--/ko--\x3e\r\n\r\n    \x3c!-- ko ifnot: hyperlink --\x3e\r\n    <div class="flex flex-column">\r\n        <div class="flex flex-column flex-item-grow tab-panel" role="tabpanel">\r\n            <label>No link selected.</label>\r\n        </div>\r\n    </div>\r\n    \x3c!--/ko--\x3e\r\n</div>'},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.WidgetSelector=void 0;const ko=__webpack_require__(0),widgetSelector_html_1=__webpack_require__(834),widgetItem_1=__webpack_require__(835),decorators_1=__webpack_require__(2);let WidgetSelector=class{constructor(widgetService){this.widgetService=widgetService,this.onMounted=this.onMounted.bind(this),this.selectWidget=this.selectWidget.bind(this),this.working=ko.observable(!0),this.categories=ko.observable()}onMounted(){this.loadWidgetOrders()}loadWidgetOrders(){return __awaiter(this,void 0,void 0,(function*(){this.working(!0);const items=new Array,widgetOrders=yield this.widgetService.getWidgetOrders(),provided=this.onRequest();widgetOrders.filter(x=>!x.requires||x.requires.every(y=>provided.includes(y))).forEach(widgetOrder=>{const widgetItem=new widgetItem_1.WidgetItem;widgetItem.css=""+widgetOrder.iconClass,widgetItem.displayName=widgetOrder.displayName,widgetItem.category=widgetOrder.category||"",widgetItem.widgetOrder=widgetOrder,items.push(widgetItem)});const groupsObj=items.reduce((result,item)=>((result[item.category]=result[item.category]||[]).push(item),result),{}),groups=Object.keys(groupsObj).map(category=>({name:category,items:groupsObj[category]}));this.categories(groups),this.working(!1)}))}selectWidget(widgetItem){return __awaiter(this,void 0,void 0,(function*(){const model=yield widgetItem.widgetOrder.createModel();this.onSelect(model)}))}};__decorate([decorators_1.Event(),__metadata("design:type",Function)],WidgetSelector.prototype,"onSelect",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],WidgetSelector.prototype,"onRequest",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],WidgetSelector.prototype,"onMounted",null),WidgetSelector=__decorate([decorators_1.Component({selector:"widget-selector",template:widgetSelector_html_1.default}),__metadata("design:paramtypes",[Object])],WidgetSelector),exports.WidgetSelector=WidgetSelector},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="editor">\r\n    <h1>\r\n        Add widget\r\n    </h1>\r\n    <hr>\r\n\r\n    \x3c!-- ko if: working() --\x3e\r\n    <spinner></spinner>\r\n    \x3c!-- /ko --\x3e\r\n\r\n    \x3c!-- ko ifnot: working() --\x3e\r\n    <div role="list" class="flex flex-column list" data-bind="scrollable: true, focus: { childSelector: \'.list-item\' }">\r\n        \x3c!-- ko foreach: { data: categories, as: \'category\'  } --\x3e\r\n        \x3c!-- ko if: category.name --\x3e\r\n        <h2 class="text-center" data-bind="text: category.name"></h2>\r\n        <hr>\r\n        \x3c!-- /ko --\x3e\r\n        <div data-bind="foreach: category.items">\r\n            <a href="#" role="listitem" class="list-item list-item-large" data-bind="click: $component.selectWidget">\r\n                <i class="paperbits-icon" data-bind="css: css"></i>\r\n                <span data-bind="text: displayName"></span>\r\n            </a>\r\n        </div>\r\n        \x3c!-- /ko --\x3e\r\n    </div>\r\n    \x3c!-- /ko --\x3e\r\n</div>'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WidgetItem=void 0;exports.WidgetItem=class{}},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.UrlSelector=void 0;const ko=__webpack_require__(0),urlSelector_html_1=__webpack_require__(837),urlItem_1=__webpack_require__(838),decorators_1=__webpack_require__(2),consts_1=__webpack_require__(17),persistence_1=__webpack_require__(23);let UrlSelector=class{constructor(urlService){this.urlService=urlService,this.uri=ko.observable("https://"),this.urls=ko.observableArray(),this.selectedUrl=ko.observable(),this.searchPattern=ko.observable(),this.working=ko.observable(!1)}onMounted(){return __awaiter(this,void 0,void 0,(function*(){yield this.searchUrls(),this.searchPattern.extend(consts_1.ChangeRateLimit).subscribe(this.searchUrls)}))}searchUrls(searchPattern=""){return __awaiter(this,void 0,void 0,(function*(){this.working(!0),this.urls([]);const query=persistence_1.Query.from().orderBy("title");searchPattern&&query.where("title",persistence_1.Operator.contains,searchPattern);const pageOfResults=yield this.urlService.search(query);this.currentPage=pageOfResults;const urlItems=pageOfResults.value.map(media=>new urlItem_1.UrlItem(media));this.urls.push(...urlItems),this.working(!1)}))}loadNextPage(){var _a;return __awaiter(this,void 0,void 0,(function*(){if(!(null===(_a=this.currentPage)||void 0===_a?void 0:_a.takeNext)||this.working())return;this.working(!0),this.currentPage=yield this.currentPage.takeNext();const urlItems=this.currentPage.value.map(page=>new urlItem_1.UrlItem(page));this.urls.push(...urlItems),this.working(!1)}))}selectUrl(urlItem){return __awaiter(this,void 0,void 0,(function*(){const uri=this.selectedUrl();uri&&uri.hasFocus(!1),urlItem.hasFocus(!0),this.selectedUrl(urlItem),this.onSelect&&this.onSelect(urlItem.toContract()),this.onHyperlinkSelect&&this.onHyperlinkSelect(urlItem.getHyperlink())}))}createUrl(){return __awaiter(this,void 0,void 0,(function*(){const newUri=this.uri(),urlContract=yield this.urlService.createUrl(newUri,newUri),urlItem=new urlItem_1.UrlItem(urlContract);this.onHyperlinkSelect&&this.onHyperlinkSelect(urlItem.getHyperlink())}))}deleteUrl(){return __awaiter(this,void 0,void 0,(function*(){const uri=this.selectedUrl();uri&&(yield this.urlService.deleteUrl(uri.toContract())),this.uri("https://"),yield this.searchUrls()}))}};__decorate([decorators_1.Event(),__metadata("design:type",Function)],UrlSelector.prototype,"onSelect",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],UrlSelector.prototype,"onHyperlinkSelect",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],UrlSelector.prototype,"onMounted",null),UrlSelector=__decorate([decorators_1.Component({selector:"url-selector",template:urlSelector_html_1.default}),__metadata("design:paramtypes",[Object])],UrlSelector),exports.UrlSelector=UrlSelector},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="editor flex flex-column">\r\n    <h1>\r\n        URLs\r\n    </h1>\r\n    <hr>\r\n    <fieldset class="flex-item form">\r\n        <div class="form-group">\r\n            <input class="form-control" type="search" role="searchbox" data-bind="textInput: searchPattern, valueUpdate: \'keyup\', focus: true" placeholder="Search URLs..." aria-label="Search URL" aria-controls="searchResult">\r\n            <p id="searchResult" class="text-hide" role="region" aria-live="polite" data-bind="text: `URLs found: ${urls().length}`">\r\n            </p>\r\n        </div>\r\n    </fieldset>\r\n\r\n    \x3c!-- ko if: !working() && urls().length === 0 --\x3e\r\n    <div class="flex flex-column flex-item flex-item-grow list">\r\n        \x3c!-- ko if: searchPattern() === "" --\x3e\r\n        <p class="flex-item flex-item-grow text-center">\r\n            It seems that you don\'t have URLs yet.\r\n        </p>\r\n        \x3c!-- /ko --\x3e\r\n\r\n        \x3c!-- ko if: searchPattern() !== ""  --\x3e\r\n        <p class="flex-item flex-item-grow text-center">\r\n            Could not find anything. Try to change search criteria.</p>\r\n        \x3c!-- /ko --\x3e\r\n    </div>\r\n    \x3c!-- /ko --\x3e\r\n\r\n    <div class="list flex flex-column flex-item flex-item-grow">\r\n        <div class="flex-item flex-item-grow" role="list" data-bind="scrollable: true">\r\n            \x3c!-- ko foreach: { data: urls, as: \'url\' } --\x3e\r\n            <a href="#" role="listitem" class="list-item" data-bind="click: $component.selectUrl, event: { keydown: $component.keydown }, attr: { title: url.title }">\r\n                <i class="paperbits-icon paperbits-link-69-2"></i>\r\n                <span class="list-item-label" data-bind="text: url.title"></span>\r\n            </a>\r\n            \x3c!-- /ko --\x3e\r\n            \x3c!-- ko if: $component.working --\x3e\r\n            <spinner></spinner>\r\n            \x3c!-- /ko --\x3e\r\n            \x3c!-- ko ifnot: $component.working --\x3e\r\n            <div class="list-edge" data-bind="whenInView: $component.loadNextPage"></div>\r\n            \x3c!-- /ko --\x3e\r\n        </div>\r\n\r\n        <div class="flex-item btn-group">\r\n            <div class="input-group">\r\n                <input type="text" class="form-control" data-bind="textInput: $component.uri" placeholder="e.g. https://www.example.com" maxlength="2096" spellcheck="false">\r\n            </div>\r\n            <button class="btn" data-bind="click: $component.createUrl">\r\n                <i class="paperbits-icon paperbits-simple-add"></i> Add\r\n            </button>\r\n            \x3c!--ko if: selectedUrl()--\x3e\r\n            <button class="btn" data-bind="click: $component.deleteUrl">\r\n                <i class="paperbits-icon paperbits-simple-remove"></i> Delete\r\n            </button>\r\n            \x3c!--/ko--\x3e\r\n        </div>\r\n    </div>\r\n</div>'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UrlItem=void 0;const ko=__webpack_require__(0),permalinks_1=__webpack_require__(57);exports.UrlItem=class{constructor(url){this.key=url.key,this.title=ko.observable(url.title),this.description=ko.observable(url.description),this.permalink=ko.observable(url.permalink),this.hasFocus=ko.observable(!1)}toContract(){return{key:this.key,title:this.title(),description:this.description(),permalink:this.permalink()}}getHyperlink(){const hyperlinkModel=new permalinks_1.HyperlinkModel;return hyperlinkModel.title=this.title(),hyperlinkModel.targetKey=this.key,hyperlinkModel.href=this.permalink(),hyperlinkModel}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LayoutDesignModule=void 0;const ko_1=__webpack_require__(840);exports.LayoutDesignModule=class{register(injector){injector.bindModule(new ko_1.LayoutWorkshopModule)}}},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(841),exports),__exportStar(__webpack_require__(292),exports),__exportStar(__webpack_require__(107),exports),__exportStar(__webpack_require__(291),exports),__exportStar(__webpack_require__(293),exports)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LayoutWorkshopModule=void 0;const layouts_1=__webpack_require__(291),layoutDetails_1=__webpack_require__(292),layoutSelector_1=__webpack_require__(293),layoutsToolButton_1=__webpack_require__(845),layoutHost_1=__webpack_require__(846);exports.LayoutWorkshopModule=class{register(injector){injector.bind("layoutHost",layoutHost_1.LayoutHost),injector.bind("layoutsWorkshop",layouts_1.LayoutsWorkshop),injector.bind("layoutDetails",layoutDetails_1.LayoutDetails),injector.bind("layoutSelector",layoutSelector_1.LayoutSelector),injector.bindToCollection("workshopSections",layoutsToolButton_1.LayoutsToolButton)}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='\x3c!--ko if: working()--\x3e\r\n<spinner></spinner>\r\n\x3c!--/ko--\x3e\r\n\r\n<div class="flex flex-column fit">\r\n    <fieldset class="flex-item form">\r\n        <div class="form-group">\r\n            <input class="form-control" type="search" role="searchbox" data-bind="textInput: searchPattern, valueUpdate: \'keyup\', focus: true" placeholder="Search layouts..." aria-label="Search layouts" aria-controls="searchResult">\r\n\r\n            <p id="searchResult" class="text-hide" role="region" aria-live="polite" data-bind="text: `Layouts found: ${layouts().length}`">\r\n            </p>\r\n        </div>\r\n    </fieldset>\r\n\r\n    \x3c!-- ko if: !working() && layouts().length === 0 --\x3e\r\n\r\n    \x3c!-- ko if: searchPattern() === "" --\x3e\r\n    <p class="flex-item flex-item-grow text-center">It seems that you don\'t have layouts yet. Would you like to\r\n        <a href="#" class="btn-link" data-bind="click: addLayout">create one</a>?\r\n    </p>\r\n    \x3c!-- /ko --\x3e\r\n\r\n    \x3c!-- ko if: searchPattern() !== "" --\x3e\r\n    <p class="flex-item flex-item-grow text-center" aria-label="Search result">\r\n        Could not find anything. Try to change search criteria.\r\n    </p>\r\n    \x3c!-- /ko --\x3e\r\n\r\n    \x3c!-- /ko --\x3e\r\n\r\n    <div class="flex flex-column flex-item flex-item-grow" role="list" data-bind="scrollable: true">\r\n        \x3c!-- ko foreach: { data: layouts, as: \'layout\' } --\x3e\r\n        <a href="#" role="listitem" class="list-item" data-bind="css: { selected:  $component.isSelected(layout) }, attr: { title: layout.title }, activate: $component.selectLayout, selectable: true">\r\n            <i class="paperbits-icon paperbits-layout-11-2"></i>\r\n            <span data-bind="text: layout.title"></span>\r\n        </a>\r\n        \x3c!--/ko--\x3e\r\n        \x3c!--ko if: $component.working()--\x3e\r\n        <spinner></spinner>\r\n        \x3c!--/ko--\x3e\r\n        \x3c!-- ko ifnot: $component.working --\x3e\r\n        <div class="list-edge" data-bind="whenInView: $component.loadNextPage"></div>\r\n        \x3c!-- /ko --\x3e\r\n    </div>\r\n\r\n    <div class="flex-item btn-group">\r\n        <button class="btn" data-bind="click: addLayout">\r\n            <i class="paperbits-icon paperbits-simple-add"></i>\r\n            Add layout\r\n        </button>\r\n    </div>\r\n</div>'},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="flex flex-column fit">\r\n    <fieldset class="flex-item flex-item-grow form" data-bind="scrollable: true">\r\n        <div class="form-group">\r\n            <label for="title" class="form-label">Title</label>\r\n            <div class="input-group">\r\n                <input type="text" id="title" class="form-control" data-bind="textInput: layoutItem.title, validationElement: layoutItem.title, focus: true" placeholder="i.e. Orders" maxlength="256">\r\n                <button class="btn btn-danger input-group-btn" data-bind="validationMessageToggle: layoutItem.title" type="button">!</button>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="form-group">\r\n            <label for="permalinkTemplate" class="form-label">\r\n                Permalink template\r\n                <button class="btn btn-info" type="button" data-bind="tooltip: \'<p>Permalink template determines which layout is applied to a page. Examples:</p><p><b>/blogs</b> - exact URL</p><p><b>/blogs/{blogId}</b> - variable segment</p><p><b>/blogs/*</b> - anything afterwards</p>\'"></button>\r\n            </label>\r\n            <div class="input-group">\r\n                <input type="text" id="permalinkTemplate" class="form-control" data-bind="textInput: $component.permalinkTemplate, validationElement: $component.permalinkTemplate, disable: isDefaultLayout" placeholder="/" maxlength="2000">\r\n                <button class="btn btn-danger input-group-btn" data-bind="validationMessageToggle: $component.permalinkTemplate" type="button">!</button>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="form-group">\r\n            <label for="description" class="form-label">Description</label>\r\n            <textarea id="description" class="form-control" data-bind="textInput: layoutItem.description"></textarea>\r\n        </div>\r\n    </fieldset>\r\n\r\n    \x3c!-- ko if: canDelete --\x3e\r\n    <div class="flex-item btn-group">\r\n        <button class="btn" data-bind="confirm: { message: \'Are you sure you want to delete this layout?\', onConfirm: deleteLayout }">\r\n            <i class="paperbits-icon paperbits-simple-remove"></i>\r\n            Delete layout\r\n        </button>\r\n        <button class="btn" data-bind="click: copyLayout">\r\n            <i class="paperbits-icon paperbits-single-copy-04"></i>\r\n            Copy layout\r\n        </button>\r\n    </div>\r\n    \x3c!-- /ko --\x3e\r\n</div>'},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="flex flex-column flex-item flex-item-grow" data-bind="scrollable: true" role="list">\r\n    \x3c!-- ko foreach: { data: layouts, as: \'layout\' } --\x3e\r\n    <a href="#" role="listitem" class="list-item" data-bind="css: { selected:  $component.isSelected(layout) }, attr: { title: layout.title }, activate: $component.selectLayout, selectable: true">\r\n        <i class="paperbits-icon paperbits-layout-11-2"></i>\r\n        <span data-bind="text: layout.title"></span>\r\n    </a>\r\n    \x3c!--/ko--\x3e\r\n    \x3c!--ko if: $component.working()--\x3e\r\n    <spinner></spinner>\r\n    \x3c!--/ko--\x3e\r\n    \x3c!-- ko ifnot: $component.working --\x3e\r\n    <div class="list-edge" data-bind="whenInView: $component.loadNextPage"></div>\r\n    \x3c!-- /ko --\x3e\r\n</div>'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LayoutsToolButton=void 0;exports.LayoutsToolButton=class{constructor(viewManager){this.viewManager=viewManager,this.iconClass="paperbits-icon paperbits-layout-11-2",this.title="Layouts"}onActivate(){this.viewManager.clearJourney();const view={heading:this.title,helpText:"<h1>Layouts</h1><p>Add or edit layouts. Layouts let you centralize common content (e.g., navigation bar, footer), which will be applied to pages. Each page is automatically matched with a layout based on the URL template.</p>",component:{name:"layouts"}};this.viewManager.openViewAsWorkshop(view)}}},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.LayoutHost=void 0;const ko=__webpack_require__(0),ko_1=__webpack_require__(100),decorators_1=__webpack_require__(2),ui_1=__webpack_require__(45),styles_1=__webpack_require__(8);let LayoutHost=class{constructor(contentViewModelBinder,router,eventManager,viewManager,layoutService,styleCompiler){this.contentViewModelBinder=contentViewModelBinder,this.router=router,this.eventManager=eventManager,this.viewManager=viewManager,this.layoutService=layoutService,this.styleCompiler=styleCompiler,this.contentViewModel=ko.observable(),this.layoutKey=ko.observable()}initialize(){return __awaiter(this,void 0,void 0,(function*(){yield this.refreshContent(),this.eventManager.addEventListener("onDataPush",()=>this.onDataPush()),this.eventManager.addEventListener("onLocaleChange",()=>this.onLocaleUpdate())}))}onDataPush(){return __awaiter(this,void 0,void 0,(function*(){this.viewManager.mode!==ui_1.ViewManagerMode.selecting&&this.viewManager.mode!==ui_1.ViewManagerMode.selected||(yield this.refreshContent())}))}onLocaleUpdate(){return __awaiter(this,void 0,void 0,(function*(){yield this.refreshContent()}))}refreshContent(){return __awaiter(this,void 0,void 0,(function*(){this.viewManager.setShutter();const route=this.router.getCurrentRoute(),layoutContentContract=yield this.layoutService.getLayoutContent(this.layoutKey()),styleManager=new styles_1.StyleManager(this.eventManager),styleSheet=yield this.styleCompiler.getStyleSheet();styleManager.setStyleSheet(styleSheet);const bindingContext={styleManager:styleManager,navigationPath:route.path,routeKind:"layout",template:{layout:{value:layoutContentContract,onValueUpdate:updatedContentContract=>__awaiter(this,void 0,void 0,(function*(){yield this.layoutService.updateLayoutContent(this.layoutKey(),updatedContentContract)}))}}},contentViewModel=yield this.contentViewModelBinder.getContentViewModelByKey(layoutContentContract,bindingContext);contentViewModel.widgetBinding.provides=["html","js","interaction"],this.contentViewModel(contentViewModel),this.viewManager.removeShutter()}))}};__decorate([decorators_1.Param(),__metadata("design:type",Function)],LayoutHost.prototype,"layoutKey",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],LayoutHost.prototype,"initialize",null),LayoutHost=__decorate([decorators_1.Component({selector:"layout-host",template:"\x3c!-- ko if: contentViewModel --\x3e\x3c!-- ko widget: contentViewModel, grid: {} --\x3e\x3c!-- /ko --\x3e\x3c!-- /ko --\x3e"}),__metadata("design:paramtypes",[ko_1.ContentViewModelBinder,Object,Object,Object,Object,Object])],LayoutHost),exports.LayoutHost=LayoutHost},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DragManager=void 0;const Utils=__webpack_require__(6),draggables_1=__webpack_require__(294),viewManager_1=__webpack_require__(200);exports.DragManager=class{constructor(eventManager,viewManager){this.eventManager=eventManager,this.viewManager=viewManager,this.startDragging=this.startDragging.bind(this),this.completeDragging=this.completeDragging.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.setAcceptor=this.setAcceptor.bind(this),this.registerDragSource=this.registerDragSource.bind(this),this.registerDragTarget=this.registerDragTarget.bind(this),this.resetDraggedElementPosition=this.resetDraggedElementPosition.bind(this),this.inertia=this.inertia.bind(this),this.eventManager.addEventListener("onPointerMove",this.onPointerMove),this.eventManager.addEventListener("onPointerUp",this.onPointerUp)}onPointerMove(event){this.viewManager.mode!=viewManager_1.ViewManagerMode.preview&&this.isDragged&&(1===event.which?(this.previousX=this.positionX,this.previousY=this.positionY,this.pointerX=event.clientX,this.pointerY=event.clientY,this.positionX=this.pointerX-this.initialOffsetX,this.positionY=this.pointerY-this.initialOffsetY,this.source.configuration.sticky||(this.positionX>this.bounds.width-this.draggedClientRect.width&&(this.positionX=this.bounds.width-this.draggedClientRect.width),this.positionX<0&&(this.positionX=0),this.positionY>this.bounds.height-this.draggedClientRect.height&&(this.positionY=this.bounds.height-this.draggedClientRect.height),this.positionY<0&&(this.positionY=0),this.velocityX=this.positionX-this.previousX,this.velocityY=this.positionY-this.previousY),this.target&&this.target.element.classList.contains("accepting")&&this.target.element.classList.remove("accepting"),this.resetDraggedElementPosition()):this.cancelDragging())}resetDraggedElementPosition(){this.dragged.style.left=this.positionX+"px",this.dragged.style.top=this.positionY+"px"}startDragging(source){if(this.velocityX=0,this.velocityY=0,this.isDragged=!0,this.dragged=source.element,this.sourceData=source.configuration.sourceData,this.source=source,this.initialOffsetX=this.source.initialOffsetX,this.initialOffsetY=this.source.initialOffsetY,this.pointerX=this.source.initialPointerX,this.pointerY=this.source.initialPointerY,this.positionX=this.pointerX-this.initialOffsetX,this.positionY=this.pointerY-this.initialOffsetY,this.bounds={top:0,left:0,width:document.body.clientWidth,height:document.body.clientHeight},source.configuration.sticky&&(this.dragged.style.width=this.dragged.clientWidth+"px",this.dragged.style.height=this.dragged.clientHeight+"px"),source.configuration.ondragstart){const replacement=source.configuration.ondragstart(source.configuration.sourceData,source.element);replacement&&(this.dragged=replacement)}this.dragged.parentElement||document.body.appendChild(this.dragged),this.dragged.classList.add("dragged"),this.draggedClientRect=source.element.getBoundingClientRect(),this.resetDraggedElementPosition(),this.viewManager.mode=viewManager_1.ViewManagerMode.dragging}cancelDragging(){this.viewManager.mode!=viewManager_1.ViewManagerMode.preview&&(this.target=null,this.completeDragging())}completeDragging(){if(this.isDragged=!1,this.target){this.target.element.classList.remove("accepting");const quadrant=Utils.pointerToClientQuadrant(this.pointerX,this.pointerY,this.target.element);this.target.config.ondrop&&this.target.config.ondrop(this.sourceData,this.target.config.targetData,quadrant),this.target.config.ondropbefore&&this.acceptBefore&&this.target.config.ondropbefore(this.source.configuration.sourceData,this.source.element),this.target.config.ondropafter&&!this.acceptBefore&&this.target.config.ondropafter(this.source.configuration.sourceData,this.source.element)}this.dragged.classList.remove("dragged"),this.source.configuration.ondragend&&(this.source.configuration.ondragend(this.source.configuration.sourceData,this.source.element),this.eventManager.dispatchEvent("virtualDragEnd")),this.source.configuration.sticky?(this.dragged.style.removeProperty("left"),this.dragged.style.removeProperty("top"),this.dragged.style.removeProperty("width"),this.dragged.style.removeProperty("height")):this.source.configuration.inertia&&this.inertia(),this.sourceData=null,this.source=null,this.target=null}onPointerUp(event){this.viewManager.mode!=viewManager_1.ViewManagerMode.preview&&(clearTimeout(this.startDraggingTimeout),this.isDragged&&this.completeDragging())}registerDragSource(element,config){new draggables_1.DragSource(element,config,this)}registerDragTarget(element,config){new draggables_1.DragTarget(element,config,this)}onPointerDown(source){this.viewManager.mode!=viewManager_1.ViewManagerMode.preview&&(source.configuration.sticky?(clearTimeout(this.startDraggingTimeout),this.startDraggingTimeout=setTimeout(()=>this.startDragging(source),300)):this.startDragging(source))}setAcceptor(acceptor,before){this.target=acceptor,this.target.element.classList.contains("accepting")||this.target.element.classList.add("accepting"),this.acceptBefore=before}inertia(){this.isDragged||((Math.abs(this.velocityX)>.005||Math.abs(this.velocityY)>.005)&&requestAnimationFrame(this.inertia),this.positionX+=this.velocityX,this.positionY+=this.velocityY,this.velocityX*=.85,this.velocityY*=.85,this.positionX>this.bounds.width-this.draggedClientRect.width&&(this.velocityX*=-.4,this.positionX=this.bounds.width-this.draggedClientRect.width),this.positionX<0&&(this.velocityX*=-.4,this.positionX=0),this.positionY>this.bounds.height-this.draggedClientRect.height&&(this.velocityY*=-.4,this.positionY=this.bounds.height-this.draggedClientRect.height),this.positionY<0&&(this.velocityY*=-.4,this.positionY=0),this.resetDraggedElementPosition())}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DragSource=void 0;exports.DragSource=class{constructor(element,config,dragManager){this.element=element,this.configuration=config,this.dragManager=dragManager,this.onPointerDown=this.onPointerDown.bind(this),element.addEventListener("mousedown",this.onPointerDown),element.dragSource=this}onPointerDown(event){if(1!==event.buttons||event.handled)return;event.handled=!0;const targetElement=event.target;this.beginDrag(targetElement,event.clientX,event.clientY)}beginDrag(targetElement,clientX,clientY){if(this.configuration.preventDragging&&this.configuration.preventDragging(targetElement))return;const rect=this.element.getBoundingClientRect();this.initialOffsetX=clientX-rect.left,this.initialOffsetY=clientY-rect.top,this.initialPointerX=clientX,this.initialPointerY=clientY,this.dragManager.onPointerDown(this)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DragTarget=void 0;exports.DragTarget=class{constructor(element,config,dragManager){this.element=element,this.config=config,this.dragManager=dragManager,this.onPointerMove=this.onPointerMove.bind(this),element.addEventListener("mousemove",this.onPointerMove,!1)}onPointerMove(event){if(event.stopPropagation(),!this.dragManager.dragged)return;const clientRect=this.element.getBoundingClientRect(),scrollY=window.scrollY|document.documentElement.scrollTop,scrollX=window.scrollX|document.documentElement.scrollLeft;if(!(event.pageX>clientRect.left+scrollX&&event.pageX<clientRect.right+scrollX&&event.pageY>clientRect.top+scrollY&&event.pageY<clientRect.bottom+scrollY))return;if(this.config.accept&&this.config.accept(this.dragManager.sourceData,this.dragManager.dragged)){let before=!1;"vertical"===this.config.flow&&(before=event.pageY+clientRect.height/2<clientRect.bottom,before&&this.config.onacceptbefore&&this.config.onacceptbefore(this.dragManager.dragged,this.element,this.dragManager.sourceData),!before&&this.config.onacceptafter&&this.config.onacceptafter(this.dragManager.dragged,this.element,this.dragManager.sourceData)),"horizontal"===this.config.flow&&(before=event.pageX+clientRect.width/2<clientRect.right,before&&this.config.onacceptbefore&&this.config.onacceptbefore(this.dragManager.dragged,this.element,this.dragManager.sourceData),!before&&this.config.onacceptafter&&this.config.onacceptafter(this.dragManager.dragged,this.element,this.dragManager.sourceData)),this.dragManager.setAcceptor(this,before)}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(854),exports)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UnhandledErrorHandler=void 0;exports.UnhandledErrorHandler=class{constructor(eventManager,viewManager,logger){this.eventManager=eventManager,this.viewManager=viewManager,this.logger=logger,this.eventManager.addEventListener("onError",this.handlerError.bind(this)),this.eventManager.addEventListener("onUnhandledRejection",this.handlerPromiseRejection.bind(this))}handlerError(event){try{if(!(null==event?void 0:event.error)){let message;return event.target?(message="Unparsable error for element: "+event.target.toString(),navigator.sendBeacon&&event.target.src&&navigator.sendBeacon(event.target.src)):message="Unparsable error thrown.",void this.logger.trackError(new Error(message))}this.viewManager.notifyError("Oops, something went wrong.","We are unable to complete your operation this time. Please try again later."),this.logger.trackError(event.error.stack||event.error)}catch(error){console.error("Unable to log error. "+(error.stack||error.message))}}handlerPromiseRejection(event){try{if(!(null==event?void 0:event.reason)){const message=event.target?"Unhandled rejection for target: "+event.target.toString():"Unhandled rejection.";return void this.logger.trackError(new Error(message))}this.viewManager.notifyError("Oops, something went wrong.","We are unable to complete your operation this time. Please try again later."),this.logger.trackError(new Error("Unhandled rejection: "+(event.reason.stack||event.reason)))}catch(error){console.error("Unable to log error. "+(error.stack||error.message))}}}},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(856),exports),__exportStar(__webpack_require__(858),exports)},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Tooltip=void 0;const tooltip_html_1=__webpack_require__(857),ko=__webpack_require__(0),decorators_1=__webpack_require__(2);let Tooltip=class{constructor(){this.observableText=ko.observable()}init(){this.text&&this.observableText(this.text)}};__decorate([decorators_1.Param(),__metadata("design:type",Object)],Tooltip.prototype,"text",void 0),__decorate([decorators_1.Param(),__metadata("design:type",Object)],Tooltip.prototype,"observableText",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],Tooltip.prototype,"init",null),Tooltip=__decorate([decorators_1.Component({selector:"tooltip",template:tooltip_html_1.default}),__metadata("design:paramtypes",[])],Tooltip),exports.Tooltip=Tooltip},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<span class="tooltip" data-bind="html: observableText"></span>'},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.DefaultViewManager=void 0;const _=__webpack_require__(85),ko=__webpack_require__(0),Arrays=__webpack_require__(222),Utils=__webpack_require__(6),defaultViewManager_html_1=__webpack_require__(859);__webpack_require__(133);const events_1=__webpack_require__(46),ui_1=__webpack_require__(45),decorators_1=__webpack_require__(2),user_1=__webpack_require__(58),designerUserService_1=__webpack_require__(295),viewStack_1=__webpack_require__(296);let DefaultViewManager=class{constructor(eventManager,globalEventHandler,designerUserService,settingsProvider,router,viewStack){this.eventManager=eventManager,this.globalEventHandler=globalEventHandler,this.designerUserService=designerUserService,this.settingsProvider=settingsProvider,this.router=router,this.viewStack=viewStack,this.contextualEditorsBag={},this.designTime=ko.observable(!1),this.previewable=ko.observable(!0),this.block=ko.computed(()=>this.designTime()&&this.previewable()),this.mode=ui_1.ViewManagerMode.selecting,this.toasts=ko.observableArray(),this.journey=ko.observableArray(),this.journeyName=ko.pureComputed(()=>0===this.journey().length?null:this.journey()[0].heading),this.widgetEditor=ko.observable(),this.contextualEditors=ko.observableArray([]),this.highlightedElement=ko.observable(),this.splitterElement=ko.observable(),this.selectedElement=ko.observable(),this.selectedElementContextualEditor=ko.observable(),this.viewport=ko.observable("xl"),this.locale=ko.observable("en-us"),this.rolesScope=ko.observableArray([user_1.BuiltInRoles.anonymous]),this.host=ko.observable(),this.shutter=ko.observable(!0),this.dragSession=ko.observable(),this.primaryToolboxVisible=ko.observable(!1),this.websitePreviewEnabled=ko.observable(!1),this.canPreview=ko.pureComputed(()=>{var _a;return this.websitePreviewEnabled()&&"page-host"===(null===(_a=this.host())||void 0===_a?void 0:_a.name)})}initialize(){return __awaiter(this,void 0,void 0,(function*(){this.globalEventHandler.addDragEnterListener(this.hideToolboxes.bind(this)),this.globalEventHandler.addDragDropListener(this.onDragEnd.bind(this)),this.globalEventHandler.addDragEndListener(this.onDragEnd.bind(this)),this.globalEventHandler.addDragLeaveScreenListener(this.showToolboxes.bind(this)),this.eventManager.addEventListener("virtualDragEnd",this.onDragEnd.bind(this)),this.router.addRouteChangeListener(this.onRouteChange.bind(this)),this.globalEventHandler.appendDocument(document),this.eventManager.addEventListener("onTopLevelEscape",this.onEscape.bind(this)),this.eventManager.addEventListener("onKeyDown",this.onKeyDown.bind(this)),this.eventManager.addEventListener("onKeyUp",this.onKeyUp.bind(this));const websitePreviewEnabled=yield this.settingsProvider.getSetting("websitePreviewEnabled");this.websitePreviewEnabled(websitePreviewEnabled||!1)}))}onKeyDown(event){this.getOpenView()||(event.ctrlKey||event.metaKey)&&this.designTime(!1)}onKeyUp(event){this.getOpenView()||event.ctrlKey||event.metaKey||this.mode!==ui_1.ViewManagerMode.preview&&this.designTime(!0)}setHost(component){const currentComponent=this.host();currentComponent&&currentComponent.name===component.name&&!currentComponent.params||(this.clearContextualEditors(),this.host(component),this.previewable("style-guide"!==component.name))}getHost(){return this.host()}getHostDocument(){return this.hostDocument}onRouteChange(){this.clearContextualEditors(),this.closeView()}getCurrentJourney(){return this.journeyName()}addToast(title,content,commands){const toast=new ui_1.Toast(title,content,"info",null,commands);return this.toasts.push(toast),toast}removeToast(toast){this.toasts.splice(this.toasts().indexOf(toast),1)}notifySuccess(title,content){const toast=new ui_1.Toast(title,content,"success");this.toasts.push(toast),this.scheduleToastRemoval(toast)}notifyInfo(title,content,commands){const toast=new ui_1.Toast(title,content,"info",null,commands);this.toasts.push(toast),this.scheduleToastRemoval(toast)}notifyError(title,content){const toast=new ui_1.Toast(title,content,"error");this.toasts.push(toast),this.scheduleToastRemoval(toast)}notifyProgress(promise,title,content){const toast=new ui_1.Toast(title,content);this.toasts.push(toast),promise.progress&&promise.progress(toast.progress),promise.then(()=>{toast.progress(100)}),promise.then(()=>{this.scheduleToastRemoval(toast)})}updateJourneyComponent(view){let journey=this.journey();const existingComponent=journey.find(c=>c.component.name===view.component.name);existingComponent&&(journey=journey.splice(0,journey.indexOf(existingComponent))),journey.push(view),this.journey(journey)}clearJourney(){this.journey([]),this.widgetEditor(null)}hideToolboxes(){this.journey([]),this.primaryToolboxVisible(!1),this.mode!==ui_1.ViewManagerMode.preview&&(this.mode=ui_1.ViewManagerMode.dragging),this.clearContextualEditors()}showToolboxes(){this.primaryToolboxVisible(!0),this.mode=ui_1.ViewManagerMode.selecting}openViewAsWorkshop(view){this.viewStack.clear(),this.clearContextualEditors(),this.updateJourneyComponent(view),this.mode=ui_1.ViewManagerMode.configure}closeWorkshop(editor){const journey=this.journey();let view;view="string"==typeof editor?journey.find(x=>x.component.name===editor):editor;const indexOfClosingEditor=journey.indexOf(view);journey.splice(indexOfClosingEditor),this.journey(journey),this.mode=ui_1.ViewManagerMode.selecting}scheduleToastRemoval(toast){setTimeout(()=>{this.toasts(_.without(this.toasts(),toast))},8e3)}openUploadDialog(){return uploadDialog.click(),new Promise(resolve=>{uploadDialog.onchange=()=>{const selectedFiles=Arrays.coerce(uploadDialog.files);uploadDialog.value="",resolve(selectedFiles)}})}openViewAsPopup(view){this.viewStack.clear(),this.widgetEditor()!==view&&(view.hitTest=el=>!!Utils.closest(el,x=>x.getAttribute&&!!x.getAttribute("contentEditable")||(null==x?void 0:x.classList)&&Arrays.coerce(x.classList).includes("toolbox")),view.close=()=>this.closeView(),view.component.params.onClose=()=>this.closeView(),this.clearContextualEditors(),this.closeView(),this.widgetEditor(view),this.mode=ui_1.ViewManagerMode.configure,this.designTime(!1),this.viewStack.pushView(view))}getOpenView(){return this.widgetEditor()}onEscape(){const host=this.host();if(0===this.viewStack.getViews().length&&this.journey().length>0){const journey=this.journey();return journey.pop(),void this.journey(journey)}!this.getOpenView()&&0===this.journey().length&&host&&"page-host"!==host.name&&this.setHost({name:"page-host"})}closeEditors(){this.closeView(),this.clearJourney()}openWidgetEditor(binding){const view={component:{name:binding.editor,params:{model:binding.model,onChange:binding.applyChanges}},heading:binding.displayName,resize:binding.editorResize||"vertically horizontally"};this.openViewAsPopup(view)}closeView(){if(this.mode===ui_1.ViewManagerMode.preview)return;const view=this.widgetEditor();view&&this.viewStack.removeView(view),this.widgetEditor(null),this.eventManager.dispatchEvent("onWidgetEditorClose"),this.clearContextualEditors(),this.mode=ui_1.ViewManagerMode.selecting,this.primaryToolboxVisible(!0),this.designTime(!0)}setContextualEditor(editorName,contextualEditor){this.contextualEditorsBag[editorName]=contextualEditor;const editors=Object.keys(this.contextualEditorsBag).map(key=>this.contextualEditorsBag[key]);this.contextualEditors(editors)}removeContextualEditor(editorName){if(!this.contextualEditorsBag[editorName])return;delete this.contextualEditorsBag[editorName];const editors=Object.keys(this.contextualEditorsBag).map(key=>this.contextualEditorsBag[key]);this.contextualEditors(editors)}clearContextualEditors(){this.mode!==ui_1.ViewManagerMode.configure&&(this.contextualEditorsBag={},this.contextualEditors([]),this.highlightedElement(null),this.setSplitter(null),this.selectedElement(null),this.selectedElementContextualEditor(null),this.mode!==ui_1.ViewManagerMode.preview&&(this.designTime(!0),this.mode=ui_1.ViewManagerMode.selecting))}setHighlight(config){this.mode!==ui_1.ViewManagerMode.preview&&(this.highlightedElement(null),this.setSplitter(null),this.highlightedElement(config))}setSplitter(config){this.mode!==ui_1.ViewManagerMode.preview&&(this.splitterElement(null),this.splitterElement(config))}setSelectedElement(config,contextualEditor){this.mode!==ui_1.ViewManagerMode.preview&&(this.clearContextualEditors(),this.closeView(),this.selectedElement(null),this.selectedElement(config),this.selectedElementContextualEditor(contextualEditor),this.mode!==ui_1.ViewManagerMode.configure&&(this.mode=ui_1.ViewManagerMode.selected),this.clearJourney())}getSelectedElement(){return this.selectedElement()}setViewport(viewport){this.clearContextualEditors(),this.viewport(viewport)}getViewport(){return this.viewport()}setViewRoles(roles){this.rolesScope(roles),this.designerUserService.setUserRoles(roles.map(role=>role.key)),this.eventManager.dispatchEvent("onUserRoleChange",roles)}getViewRoles(){return this.rolesScope()}setShutter(){this.previousMode=this.mode,this.mode=ui_1.ViewManagerMode.pause,this.shutter(!0)}removeShutter(){this.mode=this.previousMode,this.shutter(!1)}onHoverCommandActivate(){this.mode=ui_1.ViewManagerMode.pause,this.highlightedElement(null),this.selectedElement(null)}onHoverCommandDeactivate(){this.mode=ui_1.ViewManagerMode.selecting}beginDrag(session){this.clearContextualEditors(),this.closeView(),this.dragSession(session),this.hideToolboxes()}getDragSession(){return this.dragSession()}onDragEnd(){this.mode!==ui_1.ViewManagerMode.preview&&this.showToolboxes(),this.highlightedElement(null),this.selectedElement(null)}enablePreviewMode(){this.previousMode=this.mode,this.clearJourney(),this.hideToolboxes(),this.designTime(!1),this.toasts().forEach(toast=>{this.removeToast(toast)}),this.mode=ui_1.ViewManagerMode.preview}disablePreviewMode(){this.showToolboxes(),this.designTime(!0),this.mode=this.previousMode}dispose(){}};__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],DefaultViewManager.prototype,"initialize",null),__decorate([decorators_1.OnDestroyed(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],DefaultViewManager.prototype,"dispose",null),DefaultViewManager=__decorate([decorators_1.Component({selector:"view-manager",template:defaultViewManager_html_1.default}),__metadata("design:paramtypes",[Object,events_1.GlobalEventHandler,designerUserService_1.DesignerUserService,Object,Object,viewStack_1.ViewStack])],DefaultViewManager),exports.DefaultViewManager=DefaultViewManager},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='\r\n<workshops></workshops>\r\n<dropbucket></dropbucket>\r\n\r\n\x3c!-- ko if: host --\x3e\r\n<div class="viewport" data-bind="host: { viewport: viewport, host: host, block: block }"></div>\r\n\r\n<div class="shutter" data-bind="css: { \'active\': shutter }">\r\n    <spinner class="fit"></spinner>\r\n</div>\r\n\x3c!-- /ko --\x3e\r\n\r\n<div class="toasts" data-bind="foreach: toasts">\r\n    <div class="toast" role="alert" aria-live="assertive" aria-atomic="true">\r\n        <div class="toast-indicator">\r\n            <i data-bind="css: state"></i>\r\n        </div>\r\n        <div class="toast-container">\r\n            <div class="toast-header" data-bind="text: title"></div>\r\n            <div class="toast-body" data-bind="html: content"></div>\r\n\r\n            \x3c!-- ko if: commands().length > 0 --\x3e\r\n            <div class="flex-item btn-group" data-bind="foreach: { data: commands, as: \'command\' }">\r\n                <button class="btn" data-bind="click: command.action">\r\n                    \x3c!-- ko if: command.iconClass --\x3e\r\n                    <i class="paperbits-icon" data-bind="css: command.iconClass"></i>\r\n                    \x3c!-- /ko --\x3e\r\n                    <span data-bind="text: command.title"></span>\r\n                </button>\r\n            </div>\r\n            \x3c!-- /ko --\x3e\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n\x3c!-- ko with: widgetEditor() --\x3e\r\n<div class="toolbox toolbox-popup toolbox-position-left-offset" data-bind="resizable: resize, surface: $data, dialog: {}">\r\n    <div class="editor resizable-content flex flex-column">\r\n        <h1>\r\n            <span data-bind="text: heading"></span>\r\n        </h1>\r\n        <button class="btn btn-dismiss" aria-label="Close" data-bind="click: $component.closeView">\r\n            <i class="paperbits-icon paperbits-simple-remove"></i>\r\n        </button>\r\n        <hr>\r\n        \x3c!-- ko component: { name: component.name, params: component.params, oncreate: component.oncreate } --\x3e\r\n        \x3c!--/ko --\x3e\r\n    </div>\r\n</div>\r\n\x3c!-- /ko --\x3e\r\n\r\n\x3c!-- ko if: $component.designTime --\x3e\r\n\r\n\x3c!-- ko foreach: { data: contextualEditors, as: \'contextualEditor\' } --\x3e\r\n\x3c!-- ko foreach: { data: contextualEditor.hoverCommands, as: \'command\' } --\x3e\r\n<button class="fixed btn-standalone" data-bind="stickTo: { target: contextualEditor.element, position: command.position }, balloon: { component: command.component, onOpen: $component.onHoverCommandActivate, onClose: $component.onHoverCommandDeactivate }, background: { color: command.color }, attr: { title: command.tooltip }">\r\n    <i class="paperbits-icon paperbits-simple-add"></i>\r\n</button>\r\n\x3c!-- /ko --\x3e\r\n\x3c!-- /ko --\x3e\r\n\r\n\x3c!-- ko if: highlightedElement --\x3e\r\n<div class="layout-editor-selection" data-bind="highlight: highlightedElement">\r\n    <svg alignment="top left">\r\n        <path d="M0,0 L14,0 L14,14 L12,14 L12,2 L0,2 Z" stroke="rgba(255,255,255,.5)" stroke-width="1" data-bind="attr: { fill: highlightedElement().color }"/>\r\n    </svg>\r\n    <svg alignment="top right">\r\n        <path d="M0,0 L14,0 L14,14 L12,14 L12,2 L0,2 Z" stroke="rgba(255,255,255,.5)" stroke-width="1" data-bind="attr: { fill: highlightedElement().color }"/>\r\n    </svg>\r\n    <svg alignment="bottom left">\r\n        <path d="M0,0 L14,0 L14,14 L12,14 L12,2 L0,2 Z" stroke="rgba(255,255,255,.5)" stroke-width="1" data-bind="attr: { fill: highlightedElement().color }"/>\r\n    </svg>\r\n    <svg alignment="bottom right">\r\n        <path d="M0,0 L14,0 L14,14 L12,14 L12,2 L0,2 Z" stroke="rgba(255,255,255,.5)" stroke-width="1" data-bind="attr: { fill: highlightedElement().color }"/>\r\n    </svg>\r\n</div>\r\n\x3c!-- /ko --\x3e\r\n\r\n\x3c!-- ko if: splitterElement --\x3e\r\n<div class="layout-editor-splitter" data-bind="splitter: splitterElement"></div>\r\n\x3c!-- /ko --\x3e\r\n\r\n\x3c!-- ko if: selectedElement --\x3e\r\n<div class="layout-editor-selection" data-bind="highlight: selectedElement">\r\n    <svg alignment="top left">\r\n        <path d="M0,0 L14,0 L14,14 L12,14 L12,2 L0,2 Z" stroke="rgba(255,255,255,.5)" stroke-width="1" data-bind="attr: { fill: selectedElement().color }"/>\r\n    </svg>\r\n    <svg alignment="top right">\r\n        <path d="M0,0 L14,0 L14,14 L12,14 L12,2 L0,2 Z" stroke="rgba(255,255,255,.5)" stroke-width="1" data-bind="attr: { fill: selectedElement().color }"/>\r\n    </svg>\r\n    <svg alignment="bottom left">\r\n        <path d="M0,0 L14,0 L14,14 L12,14 L12,2 L0,2 Z" stroke="rgba(255,255,255,.5)" stroke-width="1" data-bind="attr: { fill: selectedElement().color }"/>\r\n    </svg>\r\n    <svg alignment="bottom right">\r\n        <path d="M0,0 L14,0 L14,14 L12,14 L12,2 L0,2 Z" stroke="rgba(255,255,255,.5)" stroke-width="1" data-bind="attr: { fill: selectedElement().color }"/>\r\n    </svg>\r\n</div>\r\n\r\n\x3c!-- ko with: selectedElementContextualEditor() --\x3e\r\n<div class="fixed" data-bind="stickTo: { target: element, position: \'top right\' }">\r\n    \x3c!-- ko foreach: { data: selectCommands, as: \'command\' } --\x3e\r\n    <button class="btn-standalone" data-bind="gridCommand: command">\r\n        <i class="paperbits-icon" data-bind="css: command.iconClass"></i>\r\n    </button>\r\n    \x3c!-- ko if: command.component --\x3e\r\n    <div class="balloon" data-bind="component: command.component"></div>\r\n    \x3c!-- /ko --\x3e\r\n    \x3c!-- /ko --\x3e\r\n\r\n    \x3c!-- ko if: deleteCommand --\x3e\r\n    <button class="btn-standalone" data-bind="command: deleteCommand">\r\n        <i class="paperbits-icon paperbits-trash-simple"></i>\r\n    </button>\r\n    \x3c!-- /ko --\x3e\r\n</div>\r\n\x3c!-- /ko --\x3e\r\n\r\n\x3c!-- /ko --\x3e\r\n\r\n\x3c!-- /ko --\x3e\r\n\r\n<tray class="toolbox toolbox-position-left-bottom" data-bind="visible: primaryToolboxVisible"></tray>\r\n\r\n<input id="uploadDialog" type="file" multiple="multiple" aria-hidden="true" class="d-none">\r\n\r\n\x3c!-- ko if: canPreview --\x3e\r\n<div class="toolbox toolbox-position-right-top">\r\n    <button class="toolbox-btn" data-bind="visible: primaryToolboxVisible(), click: $component.enablePreviewMode, tooltip: { message: \'<h1>Preview</h1><p>See the website live before publishing.<p>\', position: \'left\' }">\r\n        <i class="paperbits-icon paperbits-l-search"></i>\r\n    </button>\r\n\r\n    <button class="toolbox-btn" data-bind="visible: !primaryToolboxVisible(), click: $component.disablePreviewMode, tooltip: { message: \'<h1>Exit preview</h1><p>Return to editing the content.<p>\', position: \'left\' }">\r\n        <i class="paperbits-icon paperbits-ban"></i>\r\n    </button>\r\n</div>\r\n\x3c!-- /ko --\x3e\r\n'},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.KnockoutValidation=void 0;const ko=__webpack_require__(0),validation=__webpack_require__(861);exports.KnockoutValidation=class{constructor(permalinkService,permalinkResolver,layoutService,reservedPermalinks){this.permalinkService=permalinkService,this.permalinkResolver=permalinkResolver,this.layoutService=layoutService,this.reservedPermalinks=reservedPermalinks,validation.init({errorElementClass:"is-invalid",decorateInputElement:!0,insertMessages:!1},!0),ko.extenders.onlyValid=(target,option)=>{const resultObservable=ko.observable(target());return target.subscribe(newValue=>{if(target.isValidating&&target.isValidating()){const subscription=target.isValidating.subscribe(v=>{subscription.dispose(),target.isValid()&&resultObservable(newValue)})}else target.isValid()&&resultObservable(newValue)}),resultObservable},validation.rules.validPermalink={async:!0,validator:(permalink,targetKey,callback)=>__awaiter(this,void 0,void 0,(function*(){if(!permalink)return!1;const permalinkContract=yield this.permalinkService.getPermalink(permalink),inUseByAnoterResource=!!permalinkContract&&permalinkContract.targetKey!==targetKey;callback(!inUseByAnoterResource)})),message:"This permalink is reserved or already in use."},validation.rules.uniqueLayoutUri={async:!0,validator:(permalinkTemplate,layoutKey,callback)=>__awaiter(this,void 0,void 0,(function*(){if(!permalinkTemplate)return void callback(!1);const layout=yield this.layoutService.getLayoutByPermalinkTemplate(permalinkTemplate),conflict=layout&&layout.key!==layoutKey;callback(!conflict)})),message:"This permalink template is already in use."},validation.registerExtenders()}}},function(module,exports,__webpack_require__){!function(ko,exports){if(void 0===ko)throw new Error("Knockout is required, please ensure it is loaded before loading this validation plug-in");ko.validation=exports;var seedId,domData,domDataKey,kv=ko.validation,koUtils=ko.utils,unwrap=koUtils.unwrapObservable,forEach=koUtils.arrayForEach,extend=koUtils.extend,defaults={registerExtenders:!0,messagesOnModified:!0,errorsAsTitle:!0,errorsAsTitleOnModified:!1,messageTemplate:null,insertMessages:!0,parseInputAttributes:!1,writeInputAttributes:!1,decorateInputElement:!1,decorateElementOnModified:!0,errorClass:null,errorElementClass:"validationElement",errorMessageClass:"validationMessage",allowHtmlMessages:!1,grouping:{deep:!1,observable:!0,live:!1},validate:{}},configuration=extend({},defaults);configuration.html5Attributes=["required","pattern","min","max","step"],configuration.html5InputTypes=["email","number","date"],configuration.reset=function(){extend(configuration,defaults)},kv.configuration=configuration,kv.utils=(seedId=(new Date).getTime(),domData={},domDataKey="__ko_validation__",{isArray:function(o){return o.isArray||"[object Array]"===Object.prototype.toString.call(o)},isObject:function(o){return null!==o&&"object"==typeof o},isNumber:function(o){return!isNaN(o)},isObservableArray:function(instance){return!!instance&&"function"==typeof instance.remove&&"function"==typeof instance.removeAll&&"function"==typeof instance.destroy&&"function"==typeof instance.destroyAll&&"function"==typeof instance.indexOf&&"function"==typeof instance.replace},values:function(o){var r=[];for(var i in o)o.hasOwnProperty(i)&&r.push(o[i]);return r},getValue:function(o){return"function"==typeof o?o():o},hasAttribute:function(node,attr){return null!==node.getAttribute(attr)},getAttribute:function(element,attr){return element.getAttribute(attr)},setAttribute:function(element,attr,value){return element.setAttribute(attr,value)},isValidatable:function(o){return!!(o&&o.rules&&o.isValid&&o.isModified)},insertAfter:function(node,newNode){node.parentNode.insertBefore(newNode,node.nextSibling)},newId:function(){return seedId+=1},getConfigOptions:function(element){return kv.utils.contextFor(element)||kv.configuration},setDomData:function(node,data){var key=node[domDataKey];key||(node[domDataKey]=key=kv.utils.newId()),domData[key]=data},getDomData:function(node){var key=node[domDataKey];if(key)return domData[key]},contextFor:function(node){switch(node.nodeType){case 1:case 8:var context=kv.utils.getDomData(node);if(context)return context;if(node.parentNode)return kv.utils.contextFor(node.parentNode)}},isEmptyVal:function(val){return null==val||""===val},getOriginalElementTitle:function(element){var savedOriginalTitle=kv.utils.getAttribute(element,"data-orig-title"),currentTitle=element.title;return kv.utils.hasAttribute(element,"data-orig-title")?savedOriginalTitle:currentTitle},async:function(expr){window.setImmediate?window.setImmediate(expr):window.setTimeout(expr,0)},forEach:function(object,callback){if(kv.utils.isArray(object))return forEach(object,callback);for(var prop in object)object.hasOwnProperty(prop)&&callback(object[prop],prop)}});var api=function(){var isInitialized=0,configuration=kv.configuration,utils=kv.utils;function cleanUpSubscriptions(context){forEach(context.subscriptions,(function(subscription){subscription.dispose()})),context.subscriptions=[]}function dispose(context){context.options.deep&&(forEach(context.flagged,(function(obj){delete obj.__kv_traversed})),context.flagged.length=0),context.options.live||cleanUpSubscriptions(context)}function traverseGraph(obj,context,level){var objValues=[],val=obj.peek?obj.peek():obj;!0!==obj.__kv_traversed&&(context.options.deep&&(obj.__kv_traversed=!0,context.flagged.push(obj)),level=void 0!==level?level:context.options.deep?1:-1,ko.isObservable(obj)&&(obj.errors||utils.isValidatable(obj)||obj.extend({validatable:!0}),context.validatables.push(obj),context.options.live&&utils.isObservableArray(obj)&&context.subscriptions.push(obj.subscribe((function(){context.graphMonitor.valueHasMutated()})))),val&&!val._destroy&&(utils.isArray(val)?objValues=val:utils.isObject(val)&&(objValues=utils.values(val))),0!==level&&utils.forEach(objValues,(function(observable){!observable||observable.nodeType||ko.isComputed(observable)&&!observable.rules||traverseGraph(observable,context,level+1)})))}function runTraversal(obj,context){context.validatables=[],cleanUpSubscriptions(context),traverseGraph(obj,context),dispose(context)}function collectErrors(array){var errors=[];return forEach(array,(function(observable){utils.isValidatable(observable)&&!observable.isValid()&&errors.push(observable.error.peek())})),errors}return{init:function(options,force){isInitialized>0&&!force||((options=options||{}).errorElementClass=options.errorElementClass||options.errorClass||configuration.errorElementClass,options.errorMessageClass=options.errorMessageClass||options.errorClass||configuration.errorMessageClass,extend(configuration,options),configuration.registerExtenders&&kv.registerExtenders(),isInitialized=1)},reset:kv.configuration.reset,group:function(obj,options){var context={options:options=extend(extend({},configuration.grouping),options),graphMonitor:ko.observable(),flagged:[],subscriptions:[],validatables:[]},result=null;return(result=options.observable?ko.computed((function(){return context.graphMonitor(),runTraversal(obj,context),collectErrors(context.validatables)})):function(){return runTraversal(obj,context),collectErrors(context.validatables)}).showAllMessages=function(show){void 0===show&&(show=!0),result.forEach((function(observable){utils.isValidatable(observable)&&observable.isModified(show)}))},result.isAnyMessageShown=function(){return!!result.find((function(observable){return utils.isValidatable(observable)&&!observable.isValid()&&observable.isModified()}))},result.filter=function(predicate){return predicate=predicate||function(){return!0},result(),koUtils.arrayFilter(context.validatables,predicate)},result.find=function(predicate){return predicate=predicate||function(){return!0},result(),koUtils.arrayFirst(context.validatables,predicate)},result.forEach=function(callback){callback=callback||function(){},result(),forEach(context.validatables,callback)},result.map=function(mapping){return mapping=mapping||function(item){return item},result(),koUtils.arrayMap(context.validatables,mapping)},result._updateState=function(newValue){if(!utils.isObject(newValue))throw new Error("An object is required.");if(obj=newValue,!options.observable)return runTraversal(newValue,context),collectErrors(context.validatables);context.graphMonitor.valueHasMutated()},result},formatMessage:function(message,params,observable){if(utils.isObject(params)&&params.typeAttr&&(params=params.value),"function"==typeof message)return message(params,observable);var replacements=unwrap(params);return null==replacements&&(replacements=[]),utils.isArray(replacements)||(replacements=[replacements]),message.replace(/{(\d+)}/gi,(function(match,index){return void 0!==replacements[index]?replacements[index]:match}))},addRule:function(observable,rule){return observable.extend({validatable:!0}),!!koUtils.arrayFirst(observable.rules(),(function(item){return item.rule&&item.rule===rule.rule}))||observable.rules.push(rule),observable},addAnonymousRule:function(observable,ruleObj){void 0===ruleObj.message&&(ruleObj.message="Error"),ruleObj.onlyIf&&(ruleObj.condition=ruleObj.onlyIf),kv.addRule(observable,ruleObj)},addExtender:function(ruleName){ko.extenders[ruleName]=function(observable,params){return params&&(params.message||params.onlyIf)?kv.addRule(observable,{rule:ruleName,message:params.message,params:!!utils.isEmptyVal(params.params)||params.params,condition:params.onlyIf}):kv.addRule(observable,{rule:ruleName,params:params})}},registerExtenders:function(){if(configuration.registerExtenders)for(var ruleName in kv.rules)kv.rules.hasOwnProperty(ruleName)&&(ko.extenders[ruleName]||kv.addExtender(ruleName))},insertValidationMessage:function(element){var span=document.createElement("SPAN");return span.className=utils.getConfigOptions(element).errorMessageClass,utils.insertAfter(element,span),span},parseInputValidationAttributes:function(element,valueAccessor){forEach(kv.configuration.html5Attributes,(function(attr){if(utils.hasAttribute(element,attr)){var params=element.getAttribute(attr)||!0;if("min"===attr||"max"===attr){var typeAttr=element.getAttribute("type");void 0!==typeAttr&&typeAttr||(typeAttr="text"),params={typeAttr:typeAttr,value:params}}kv.addRule(valueAccessor(),{rule:attr,params:params})}}));var currentType=element.getAttribute("type");forEach(kv.configuration.html5InputTypes,(function(type){type===currentType&&kv.addRule(valueAccessor(),{rule:"date"===type?"dateISO":type,params:!0})}))},writeInputValidationAttributes:function(element,valueAccessor){var observable=valueAccessor();if(observable&&observable.rules){var contexts=observable.rules();forEach(kv.configuration.html5Attributes,(function(attr){var ctx=koUtils.arrayFirst(contexts,(function(ctx){return ctx.rule&&ctx.rule.toLowerCase()===attr.toLowerCase()}));ctx&&ko.computed({read:function(){var params=ko.unwrap(ctx.params);"pattern"===ctx.rule&&params instanceof RegExp&&(params=params.source),element.setAttribute(attr,params)},disposeWhenNodeIsRemoved:element})})),contexts=null}},makeBindingHandlerValidatable:function(handlerName){var init=ko.bindingHandlers[handlerName].init;ko.bindingHandlers[handlerName].init=function(element,valueAccessor,allBindingsAccessor,viewModel,bindingContext){return init(element,valueAccessor,allBindingsAccessor,viewModel,bindingContext),ko.bindingHandlers.validationCore.init(element,valueAccessor,allBindingsAccessor,viewModel,bindingContext)}},setRules:function(target,definition){var setRules=function(target,definition){if(target&&definition)for(var prop in definition)if(definition.hasOwnProperty(prop)){var ruleDefinitions=definition[prop];if(target[prop]){var targetValue=target[prop],unwrappedTargetValue=unwrap(targetValue),rules={},nonRules={};for(var rule in ruleDefinitions)ruleDefinitions.hasOwnProperty(rule)&&(kv.rules[rule]?rules[rule]=ruleDefinitions[rule]:nonRules[rule]=ruleDefinitions[rule]);if(ko.isObservable(targetValue)&&targetValue.extend(rules),unwrappedTargetValue&&utils.isArray(unwrappedTargetValue))for(var i=0;i<unwrappedTargetValue.length;i++)setRules(unwrappedTargetValue[i],nonRules);else setRules(unwrappedTargetValue,nonRules)}}};setRules(target,definition)}}}();function minMaxValidatorFactory(validatorName){var isMaxValidation="max"===validatorName;return function(val,options){if(kv.utils.isEmptyVal(val))return!0;var comparisonValue,type,regex,valMatches,comparisonValueMatches;switch(void 0===options.typeAttr?(type="text",comparisonValue=options):(type=options.typeAttr,comparisonValue=options.value),isNaN(comparisonValue)||comparisonValue instanceof Date||(type="number"),type.toLowerCase()){case"week":if(regex=/^(\d{4})-W(\d{2})$/,null===(valMatches=val.match(regex)))throw new Error("Invalid value for "+validatorName+" attribute for week input.  Should look like '2000-W33' http://www.w3.org/TR/html-markup/input.week.html#input.week.attrs.min");return!!(comparisonValueMatches=comparisonValue.match(regex))&&(isMaxValidation?valMatches[1]<comparisonValueMatches[1]||valMatches[1]===comparisonValueMatches[1]&&valMatches[2]<=comparisonValueMatches[2]:valMatches[1]>comparisonValueMatches[1]||valMatches[1]===comparisonValueMatches[1]&&valMatches[2]>=comparisonValueMatches[2]);case"month":if(regex=/^(\d{4})-(\d{2})$/,null===(valMatches=val.match(regex)))throw new Error("Invalid value for "+validatorName+" attribute for month input.  Should look like '2000-03' http://www.w3.org/TR/html-markup/input.month.html#input.month.attrs.min");return!!(comparisonValueMatches=comparisonValue.match(regex))&&(isMaxValidation?valMatches[1]<comparisonValueMatches[1]||valMatches[1]===comparisonValueMatches[1]&&valMatches[2]<=comparisonValueMatches[2]:valMatches[1]>comparisonValueMatches[1]||valMatches[1]===comparisonValueMatches[1]&&valMatches[2]>=comparisonValueMatches[2]);case"number":case"range":return isMaxValidation?!isNaN(val)&&parseFloat(val)<=parseFloat(comparisonValue):!isNaN(val)&&parseFloat(val)>=parseFloat(comparisonValue);default:return isMaxValidation?val<=comparisonValue:val>=comparisonValue}}}function validateSync(observable,rule,ctx){return!!rule.validator(observable(),void 0===ctx.params||unwrap(ctx.params))||(observable.setError(kv.formatMessage(ctx.message||rule.message,unwrap(ctx.params),observable)),!1)}function validateAsync(observable,rule,ctx){observable.isValidating(!0);var callBack=function(valObj){var isValid=!1,msg="";observable.__valid__()?(valObj.message?(isValid=valObj.isValid,msg=valObj.message):isValid=valObj,isValid||(observable.error(kv.formatMessage(msg||ctx.message||rule.message,unwrap(ctx.params),observable)),observable.__valid__(isValid)),observable.isValidating(!1)):observable.isValidating(!1)};kv.utils.async((function(){rule.validator(observable(),void 0===ctx.params||unwrap(ctx.params),callBack)}))}extend(ko.validation,api),kv.rules={},kv.rules.required={validator:function(val,required){var testVal;return null==val?!required:(testVal=val,"string"==typeof val&&(testVal=String.prototype.trim?val.trim():val.replace(/^\s+|\s+$/g,"")),!required||(testVal+"").length>0)},message:"This field is required."},kv.rules.min={validator:minMaxValidatorFactory("min"),message:"Please enter a value greater than or equal to {0}."},kv.rules.max={validator:minMaxValidatorFactory("max"),message:"Please enter a value less than or equal to {0}."},kv.rules.minLength={validator:function(val,minLength){return!!kv.utils.isEmptyVal(val)||(kv.utils.isNumber(val)?""+val:val).length>=minLength},message:"Please enter at least {0} characters."},kv.rules.maxLength={validator:function(val,maxLength){return!!kv.utils.isEmptyVal(val)||(kv.utils.isNumber(val)?""+val:val).length<=maxLength},message:"Please enter no more than {0} characters."},kv.rules.pattern={validator:function(val,regex){return kv.utils.isEmptyVal(val)||null!==val.toString().match(regex)},message:"Please check this value."},kv.rules.step={validator:function(val,step){if(kv.utils.isEmptyVal(val)||"any"===step)return!0;var dif=100*val%(100*step);return Math.abs(dif)<1e-5||Math.abs(1-dif)<1e-5},message:"The value must increment by {0}."},kv.rules.email={validator:function(val,validate){return!validate||kv.utils.isEmptyVal(val)||validate&&/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(val)},message:"Please enter a proper email address."},kv.rules.date={validator:function(value,validate){return!validate||kv.utils.isEmptyVal(value)||validate&&!/Invalid|NaN/.test(new Date(value))},message:"Please enter a proper date."},kv.rules.dateISO={validator:function(value,validate){return!validate||kv.utils.isEmptyVal(value)||validate&&/^\d{4}[-/](?:0?[1-9]|1[012])[-/](?:0?[1-9]|[12][0-9]|3[01])$/.test(value)},message:"Please enter a proper date."},kv.rules.number={validator:function(value,validate){return!validate||kv.utils.isEmptyVal(value)||validate&&/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(value)},message:"Please enter a number."},kv.rules.digit={validator:function(value,validate){return!validate||kv.utils.isEmptyVal(value)||validate&&/^\d+$/.test(value)},message:"Please enter a digit."},kv.rules.phoneUS={validator:function(phoneNumber,validate){return!validate||!!kv.utils.isEmptyVal(phoneNumber)||"string"==typeof phoneNumber&&(phoneNumber=phoneNumber.replace(/\s+/g,""),validate&&phoneNumber.length>9&&phoneNumber.match(/^(1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/))},message:"Please specify a valid phone number."},kv.rules.equal={validator:function(val,params){var otherValue=params;return val===kv.utils.getValue(otherValue)},message:"Values must equal."},kv.rules.notEqual={validator:function(val,params){var otherValue=params;return val!==kv.utils.getValue(otherValue)},message:"Please choose another value."},kv.rules.unique={validator:function(val,options){var c=kv.utils.getValue(options.collection),external=kv.utils.getValue(options.externalValue),counter=0;return!val||!c||(koUtils.arrayFilter(c,(function(item){val===(options.valueAccessor?options.valueAccessor(item):item)&&counter++})),counter<(external?1:2))},message:"Please make sure the value is unique."},kv.registerExtenders(),ko.bindingHandlers.validationCore={init:function(element,valueAccessor,allBindingsAccessor,viewModel,bindingContext){var config=kv.utils.getConfigOptions(element),observable=valueAccessor();if(config.parseInputAttributes&&kv.utils.async((function(){kv.parseInputValidationAttributes(element,valueAccessor)})),config.insertMessages&&kv.utils.isValidatable(observable)){var validationMessageElement=kv.insertValidationMessage(element);config.messageTemplate?ko.renderTemplate(config.messageTemplate,{field:observable},null,validationMessageElement,"replaceNode"):ko.applyBindingsToNode(validationMessageElement,{validationMessage:observable})}config.writeInputAttributes&&kv.utils.isValidatable(observable)&&kv.writeInputValidationAttributes(element,valueAccessor),config.decorateInputElement&&kv.utils.isValidatable(observable)&&ko.applyBindingsToNode(element,{validationElement:observable})}},kv.makeBindingHandlerValidatable("value"),kv.makeBindingHandlerValidatable("checked"),ko.bindingHandlers.textInput&&kv.makeBindingHandlerValidatable("textInput"),kv.makeBindingHandlerValidatable("selectedOptions"),ko.bindingHandlers.validationMessage={update:function(element,valueAccessor){var obsv=valueAccessor(),config=kv.utils.getConfigOptions(element),isModified=(unwrap(obsv),!1),isValid=!1;if(null==obsv)throw new Error("Cannot bind validationMessage to undefined value. data-bind expression: "+element.getAttribute("data-bind"));isModified=obsv.isModified&&obsv.isModified(),isValid=obsv.isValid&&obsv.isValid();var error=null;config.messagesOnModified&&!isModified||(error=isValid?null:obsv.error);var isVisible=!(config.messagesOnModified&&!isModified||isValid),isCurrentlyVisible="none"!==element.style.display;config.allowHtmlMessages?koUtils.setHtml(element,error):ko.bindingHandlers.text.update(element,(function(){return error})),isCurrentlyVisible&&!isVisible?element.style.display="none":!isCurrentlyVisible&&isVisible&&(element.style.display="")}},ko.bindingHandlers.validationElement={update:function(element,valueAccessor,allBindingsAccessor){var obsv=valueAccessor(),config=kv.utils.getConfigOptions(element),isModified=(unwrap(obsv),!1),isValid=!1;if(null==obsv)throw new Error("Cannot bind validationElement to undefined value. data-bind expression: "+element.getAttribute("data-bind"));isModified=obsv.isModified&&obsv.isModified(),isValid=obsv.isValid&&obsv.isValid();var cssSettingsAccessor=function(){var css={},shouldShow=!(config.decorateElementOnModified&&!isModified||isValid);return css[config.errorElementClass]=shouldShow,css};ko.bindingHandlers.css.update(element,cssSettingsAccessor,allBindingsAccessor),config.errorsAsTitle&&ko.bindingHandlers.attr.update(element,(function(){var hasModification=!config.errorsAsTitleOnModified||isModified,title=kv.utils.getOriginalElementTitle(element);return hasModification&&!isValid?{title:obsv.error,"data-orig-title":title}:!hasModification||isValid?{title:title,"data-orig-title":null}:void 0}))}},ko.bindingHandlers.validationOptions={init:function(element,valueAccessor,allBindingsAccessor,viewModel,bindingContext){var options=unwrap(valueAccessor());if(options){var newConfig=extend({},kv.configuration);extend(newConfig,options),kv.utils.setDomData(element,newConfig)}}},ko.extenders.validation=function(observable,rules){return forEach(kv.utils.isArray(rules)?rules:[rules],(function(rule){kv.addAnonymousRule(observable,rule)})),observable},ko.extenders.validatable=function(observable,options){if(kv.utils.isObject(options)||(options={enable:options}),"enable"in options||(options.enable=!0),options.enable&&!kv.utils.isValidatable(observable)){var config=kv.configuration.validate||{},validationOptions={throttleEvaluation:options.throttle||config.throttle};observable.error=ko.observable(null),observable.rules=ko.observableArray(),observable.isValidating=ko.observable(!1),observable.__valid__=ko.observable(!0),observable.isModified=ko.observable(!1),observable.isValid=ko.computed(observable.__valid__),observable.setError=function(error){var previousError=observable.error.peek(),previousIsValid=observable.__valid__.peek();observable.error(error),observable.__valid__(!1),previousError===error||previousIsValid||observable.isValid.notifySubscribers()},observable.clearError=function(){return observable.error(null),observable.__valid__(!0),observable};var h_change=observable.subscribe((function(){observable.isModified(!0)})),h_obsValidationTrigger=ko.computed(extend({read:function(){return observable(),observable.rules(),kv.validateObservable(observable),!0}},validationOptions));extend(h_obsValidationTrigger,validationOptions),observable._disposeValidation=function(){observable.isValid.dispose(),observable.rules.removeAll(),h_change.dispose(),h_obsValidationTrigger.dispose(),delete observable.rules,delete observable.error,delete observable.isValid,delete observable.isValidating,delete observable.__valid__,delete observable.isModified,delete observable.setError,delete observable.clearError,delete observable._disposeValidation}}else!1===options.enable&&observable._disposeValidation&&observable._disposeValidation();return observable},kv.validateObservable=function(observable){for(var rule,ctx,i=0,ruleContexts=observable.rules(),len=ruleContexts.length;i<len;i++)if(!(ctx=ruleContexts[i]).condition||ctx.condition())if((rule=ctx.rule?kv.rules[ctx.rule]:ctx).async||ctx.async)validateAsync(observable,rule,ctx);else if(!validateSync(observable,rule,ctx))return!1;return observable.clearError(),!0};var _currentLocale,_locales={};kv.defineLocale=function(name,values){return name&&values?(_locales[name.toLowerCase()]=values,values):null},kv.locale=function(name){if(name){if(name=name.toLowerCase(),!_locales.hasOwnProperty(name))throw new Error("Localization "+name+" has not been loaded.");kv.localize(_locales[name]),_currentLocale=name}return _currentLocale},kv.localize=function(msgTranslations){var rules=kv.rules;for(var ruleName in msgTranslations)rules.hasOwnProperty(ruleName)&&(rules[ruleName].message=msgTranslations[ruleName])},function(){var localeData={},rules=kv.rules;for(var ruleName in rules)rules.hasOwnProperty(ruleName)&&(localeData[ruleName]=rules[ruleName].message);kv.defineLocale("en-us",localeData)}(),_currentLocale="en-us",ko.applyBindingsWithValidation=function(viewModel,rootNode,options){var config,node=document.body;rootNode&&rootNode.nodeType?(node=rootNode,config=options):config=rootNode,kv.init(),config&&(config=extend(extend({},kv.configuration),config),kv.utils.setDomData(node,config)),ko.applyBindings(viewModel,node)};var origApplyBindings=ko.applyBindings;ko.applyBindings=function(){kv.init(),origApplyBindings.apply(this,arguments)},ko.validatedObservable=function(initialValue,options){if(!options&&!kv.utils.isObject(initialValue))return ko.observable(initialValue).extend({validatable:!0});var obsv=ko.observable(initialValue);return obsv.errors=kv.group(kv.utils.isObject(initialValue)?initialValue:{},options),obsv.isValid=ko.observable(0===obsv.errors().length),ko.isObservable(obsv.errors)?obsv.errors.subscribe((function(errors){obsv.isValid(0===errors.length)})):ko.computed(obsv.errors).subscribe((function(errors){obsv.isValid(0===errors.length)})),obsv.subscribe((function(newValue){kv.utils.isObject(newValue)||(newValue={}),obsv.errors._updateState(newValue),obsv.isValid(0===obsv.errors().length)})),obsv}}(__webpack_require__(0),exports)},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(863),exports)},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.GridEditor=void 0;const Utils=__webpack_require__(6),ui_1=__webpack_require__(45),editing_1=__webpack_require__(66),content_1=__webpack_require__(232);exports.GridEditor=class{constructor(viewManager,widgetService,eventManager){this.viewManager=viewManager,this.widgetService=widgetService,this.eventManager=eventManager,this.rerenderEditors=this.rerenderEditors.bind(this),this.onPointerDown=this.onPointerDown.bind(this),this.attach=this.attach.bind(this),this.detach=this.detach.bind(this),this.onDelete=this.onDelete.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onWindowScroll=this.onWindowScroll.bind(this),this.actives={}}isModelBeingEdited(binding){const view=this.viewManager.getOpenView();return!!view&&view.component.name===binding.editor}getContextualEditor(element,half){const providers=editing_1.GridHelper.getParentWidgetBindings(element).filter(x=>!!x.provides).map(x=>x.provides).reduce((acc,val)=>acc.concat(val),[]);let model,binding,parentModel;element&&(model=editing_1.GridHelper.getModel(element),binding=editing_1.GridHelper.getWidgetBinding(element));const parentBinding=editing_1.GridHelper.getParentWidgetBinding(element);parentBinding&&(parentModel=parentBinding.model);const context={parentModel:parentModel,parentBinding:parentBinding,model:model,binding:binding,half:half,providers:providers,switchToParent:modelType=>{const stackItem=editing_1.GridHelper.getWidgetStack(element).find(x=>x.binding.model instanceof modelType);if(!stackItem)return;const contextualEditor=this.getContextualEditor(stackItem.element,"top");if(!contextualEditor)return;const config={element:stackItem.element,text:stackItem.binding.displayName,color:contextualEditor.color};this.viewManager.setSelectedElement(config,contextualEditor),this.selectedContextualEditor=contextualEditor}};let contextualEditor;if(context.binding.handler){const handler=this.widgetService.getWidgetHandler(context.binding.handler);handler.getContextualEditor&&(contextualEditor=handler.getContextualEditor(context))}return contextualEditor||(contextualEditor=this.getWidgetContextualEditor(context)),contextualEditor.element=element,contextualEditor.selectCommands=contextualEditor.selectCommands||null,contextualEditor.hoverCommands=contextualEditor.hoverCommands||null,contextualEditor.deleteCommand=contextualEditor.deleteCommand||null,contextualEditor}isModelSelected(binding){const selectedElement=this.viewManager.getSelectedElement();if(!selectedElement)return!1;return binding===editing_1.GridHelper.getWidgetBinding(selectedElement.element)}onPointerDown(event){if(event.ctrlKey)return;if(this.viewManager.mode===ui_1.ViewManagerMode.pause)return event.preventDefault(),void event.stopPropagation();if(1!==event.which)return;if(this.viewManager.mode!==ui_1.ViewManagerMode.selecting&&this.viewManager.mode!==ui_1.ViewManagerMode.selected&&this.viewManager.mode!==ui_1.ViewManagerMode.configure)return;const element=this.activeHighlightedElement,windgetIsInContent=editing_1.GridHelper.getParentWidgetBindings(element).some(x=>x.model instanceof content_1.ContentModel||"email-layout"===x.name),layoutEditing="layout-host"===this.viewManager.getHost().name;if(!windgetIsInContent&&!layoutEditing)return event.preventDefault(),event.stopPropagation(),void this.eventManager.dispatchEvent("InactiveLayoutHint");const widgetBinding=editing_1.GridHelper.getWidgetBinding(element);if(widgetBinding&&!widgetBinding.readonly&&("html-editor"!==widgetBinding.editor&&event.preventDefault(),!this.isModelBeingEdited(widgetBinding)))if(this.isModelSelected(widgetBinding))widgetBinding.editor&&this.viewManager.openWidgetEditor(widgetBinding);else{event.preventDefault(),element.dragSource&&element.dragSource.beginDrag(element,this.pointerX,this.pointerY);const contextualEditor=this.getContextualEditor(element,"top");if(!contextualEditor)return;const config={element:this.activeHighlightedElement,text:widgetBinding.displayName,color:contextualEditor.color};this.viewManager.setSelectedElement(config,contextualEditor),this.selectedContextualEditor=contextualEditor}}onPointerMove(event){if(this.viewManager.mode===ui_1.ViewManagerMode.pause)return event.preventDefault(),void event.stopPropagation();this.pointerX=event.clientX,this.pointerY=event.clientY;if(0!==this.getUnderlyingElements().length)switch(this.viewManager.mode){case ui_1.ViewManagerMode.selecting:case ui_1.ViewManagerMode.selected:case ui_1.ViewManagerMode.configure:this.renderHighlightedElements();break;case ui_1.ViewManagerMode.dragging:this.renderDropHandlers()}}renderDropHandlers(){const dragSession=this.viewManager.getDragSession();if(!dragSession)return;const elements=this.getUnderlyingElements();if(0===elements.length)return;const stack=editing_1.GridHelper.getWidgetStack(elements[1]),acceptingParentElement=stack.find(x=>{if(!x.binding.handler)return!1;const handler=this.widgetService.getWidgetHandler(x.binding.handler);return!!(handler&&handler.canAccept&&handler.canAccept(dragSession))});if(!acceptingParentElement||elements.some(element=>element.classList.contains("dragged-origin")))return delete dragSession.targetElement,delete dragSession.targetBinding,void this.viewManager.setSplitter(null);dragSession.targetElement=acceptingParentElement.element,dragSession.targetBinding=editing_1.GridHelper.getWidgetBinding(acceptingParentElement.element);const siblingElement=stack.find(x=>x.element.parentElement===acceptingParentElement.element);if(siblingElement){const quadrant=Utils.pointerToClientQuadrant(this.pointerX,this.pointerY,siblingElement.element),sourceElementFlow=dragSession.sourceBinding.flow||"inline";dragSession.insertIndex=acceptingParentElement.binding.model.widgets.indexOf(siblingElement.binding.model);const hoveredElementFlow=siblingElement.binding.flow||"inline";"inline"===sourceElementFlow&&"inline"===hoveredElementFlow?("right"===quadrant.horizontal&&dragSession.insertIndex++,this.viewManager.setSplitter({element:siblingElement.element,side:quadrant.horizontal,where:"outside"})):("bottom"===quadrant.vertical&&dragSession.insertIndex++,this.viewManager.setSplitter({element:siblingElement.element,side:quadrant.vertical,where:"outside"}))}else{const quadrant=Utils.pointerToClientQuadrant(this.pointerX,this.pointerY,acceptingParentElement.element);if(0===acceptingParentElement.binding.model.widgets.length)return dragSession.insertIndex=0,void this.viewManager.setSplitter({element:acceptingParentElement.element,side:quadrant.vertical,where:"inside"});{const children=Array.prototype.slice.call(acceptingParentElement.element.children);if("top"===quadrant.vertical){dragSession.insertIndex=0;const child=children[0];this.viewManager.setSplitter({element:child,side:"top",where:"outside"})}else{dragSession.insertIndex=children.length;const child=children[dragSession.insertIndex];this.viewManager.setSplitter({element:child,side:"bottom",where:"outside"})}}}}onDelete(){this.viewManager.mode===ui_1.ViewManagerMode.selected&&this.selectedContextualEditor&&this.selectedContextualEditor.deleteCommand&&this.selectedContextualEditor.deleteCommand.callback()}onWindowScroll(){this.viewManager.mode!==ui_1.ViewManagerMode.dragging&&this.viewManager.mode!==ui_1.ViewManagerMode.pause&&(this.scrolling||this.viewManager.clearContextualEditors(),this.scrolling=!0,this.scrollTimeout&&clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(this.resetScrolling.bind(this),400))}resetScrolling(){this.scrolling=!1,this.renderHighlightedElements()}getUnderlyingElements(){const elements=Utils.elementsFromPoint(this.ownerDocument,this.pointerX,this.pointerY),index=elements.findIndex(x=>x.classList.contains("backdrop"));return index>=0&&elements.splice(index),elements}renderHighlightedElements(){if(this.scrolling)return;const elements=this.getUnderlyingElements();elements.length>0&&elements.some(x=>x.classList.contains("editor")||x.classList.contains("balloon")||"BUTTON"===x.nodeName)||this.rerenderEditors(this.pointerX,this.pointerY,elements)}getWidgetContextualEditor(context){return{color:"#607d8b",hoverCommands:[{color:"#607d8b",position:context.half,tooltip:"Add widget",component:{name:"widget-selector",params:{onRequest:()=>context.providers,onSelect:newWidgetModel=>{let index=context.parentModel.widgets.indexOf(context.model);"bottom"===context.half&&index++,context.parentBinding.model.widgets.splice(index,0,newWidgetModel),context.parentBinding.applyChanges(),this.viewManager.clearContextualEditors()}}}}],deleteCommand:{tooltip:"Delete widget",color:"#607d8b",callback:()=>{context.parentModel.widgets.remove(context.model),context.parentBinding.applyChanges(),this.viewManager.clearContextualEditors()}},selectCommands:context.binding.editor&&context.binding.applyChanges&&[{tooltip:"Edit widget",iconClass:"paperbits-edit-72",position:"top right",color:"#607d8b",callback:()=>this.viewManager.openWidgetEditor(context.binding)}]}}rerenderEditors(pointerX,pointerY,elements){return __awaiter(this,void 0,void 0,(function*(){let highlightedElement,highlightedText,highlightColor;const tobeDeleted=Object.keys(this.actives);let current=null;for(let i=elements.length-1;i>=0;i--){const element=elements[i],widgetBinding=editing_1.GridHelper.getWidgetBinding(element);if(!widgetBinding)continue;if(!widgetBinding||widgetBinding.readonly||widgetBinding===current)continue;const index=tobeDeleted.indexOf(widgetBinding.name);tobeDeleted.splice(index,1),highlightedElement=element,highlightedText=widgetBinding.displayName,current=widgetBinding;const quadrant=Utils.pointerToClientQuadrant(pointerX,pointerY,element),half=quadrant.vertical,active=this.actives[widgetBinding.name],contextualEditor=this.getContextualEditor(element,half);highlightColor=contextualEditor.color,active&&element===active.element&&half===active.half||(this.viewManager.setContextualEditor(widgetBinding.name,contextualEditor),this.actives[widgetBinding.name]={element:element,half:quadrant.vertical})}tobeDeleted.forEach(x=>{this.viewManager.removeContextualEditor(x),delete this.actives[x]}),this.activeHighlightedElement!==highlightedElement&&(this.activeHighlightedElement=highlightedElement,this.viewManager.setHighlight({element:highlightedElement,text:highlightedText,color:highlightColor}))}))}attach(ownerDocument){this.ownerDocument=ownerDocument,this.ownerDocument.addEventListener("mousemove",this.onPointerMove,!0),this.ownerDocument.addEventListener("scroll",this.onWindowScroll),this.ownerDocument.addEventListener("mousedown",this.onPointerDown,!0),this.eventManager.addEventListener("onDelete",this.onDelete)}detach(){this.ownerDocument.removeEventListener("mousemove",this.onPointerMove,!0),this.ownerDocument.removeEventListener("scroll",this.onWindowScroll),this.ownerDocument.removeEventListener("mousedown",this.onPointerDown,!0),this.eventManager.removeEventListener("onDelete",this.onDelete)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CardEditorModule=void 0;const cardEditor_1=__webpack_require__(865),cardHandlers_1=__webpack_require__(215);exports.CardEditorModule=class{register(injector){injector.bind("cardEditor",cardEditor_1.CardEditor);const styleGroup={key:"card",name:"components_card",groupName:"Cards",selectorTemplate:void 0,styleTemplate:'<div class="no-pointer-events" data-bind="stylePreview: variation.key" style="width: 340px"><h1>Card</h1><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor...</p></div>'};injector.bindInstanceToCollection("styleGroups",styleGroup),injector.bindToCollection("widgetHandlers",cardHandlers_1.CardHandlers,"cardHandler")}}},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.CardEditor=void 0;const ko=__webpack_require__(0),Objects=__webpack_require__(30),cardEditor_html_1=__webpack_require__(866),styles_1=__webpack_require__(47),decorators_1=__webpack_require__(2),cardModel_1=__webpack_require__(96);let CardEditor=class{constructor(viewManager,styleService,eventManager){this.viewManager=viewManager,this.styleService=styleService,this.eventManager=eventManager,this.appearanceStyles=ko.observableArray(),this.appearanceStyle=ko.observable(),this.containerConfig=ko.observable(),this.background=ko.observable()}initialize(){return __awaiter(this,void 0,void 0,(function*(){const variations=yield this.styleService.getComponentVariations("card");this.appearanceStyles(variations.filter(x=>"appearance"===x.category)),this.updateObservables(),this.appearanceStyle.subscribe(this.onAppearanceChange),this.eventManager.addEventListener("onViewportChange",this.updateObservables)}))}updateObservables(){const viewport=this.viewManager.getViewport(),containerStyleConfig=styles_1.StyleHelper.getPluginConfigForLocalStyles(this.model.styles,"container",viewport);this.containerConfig(containerStyleConfig);const backgroundStyleConfig=styles_1.StyleHelper.getPluginConfigForLocalStyles(this.model.styles,"background",viewport);this.background(backgroundStyleConfig),this.appearanceStyle(this.model.styles.appearance)}onContainerChange(pluginConfig){const viewport=this.viewManager.getViewport();styles_1.StyleHelper.setPluginConfigForLocalStyles(this.model.styles,"container",pluginConfig,viewport),this.onChange(this.model)}onBackgroundChange(pluginConfig){styles_1.StyleHelper.setPluginConfigForLocalStyles(this.model.styles,"background",pluginConfig),this.onChange(this.model)}onAppearanceChange(){Objects.setValue("styles/appearance",this.model,this.appearanceStyle()),this.onChange(this.model)}};__decorate([decorators_1.Param(),__metadata("design:type",cardModel_1.CardModel)],CardEditor.prototype,"model",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],CardEditor.prototype,"onChange",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],CardEditor.prototype,"initialize",null),CardEditor=__decorate([decorators_1.Component({selector:"card-editor",template:cardEditor_html_1.default}),__metadata("design:paramtypes",[Object,styles_1.StyleService,Object])],CardEditor),exports.CardEditor=CardEditor},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<fieldset class="form flex-item flex-item-grow" data-bind="scrollable: true">\r\n    <background params="{ background: background, onUpdate: onBackgroundChange }"></background>\r\n\r\n    <container params="{ container: containerConfig, onUpdate: onContainerChange }"></container>\r\n\r\n    <div class="form-group form-group-collapsible">\r\n        <label class="form-label">\r\n            <a href="#" class="form-group-toggle" title="Toggle section" data-bind="collapse: \'#miscellaneousCollapse\'"></a>\r\n            <b>Styling</b>\r\n        </label>\r\n        <div id="miscellaneousCollapse" class="collapse form-group-collapse">\r\n            <div class="form-group">\r\n                <label for="appearanceStyle" class="form-label">\r\n                    Appearance\r\n                    <button class="btn btn-info" type="button" data-bind="tooltip: \'Predefined appearance from style guide.\'"></button>\r\n                </label>\r\n                <select id="appearanceStyle" class="form-control" data-bind="options: appearanceStyles, value: appearanceStyle, optionsText: \'displayName\', optionsValue: \'key\'"></select>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n</fieldset>'},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MediaPermalinkResolver=void 0;exports.MediaPermalinkResolver=class{constructor(mediaService){this.mediaService=mediaService}canHandleTarget(targetKey){return targetKey.startsWith("uploads/")}getUrlByTargetKey(mediaKey){return __awaiter(this,void 0,void 0,(function*(){if(!mediaKey)throw new Error('Parameter "mediaKey" not specified.');const media=yield this.mediaService.getMediaByKey(mediaKey);return media?media.downloadUrl:null}))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GridEditorModule=void 0;const gridLayoutSelector_1=__webpack_require__(297),gridHandlers_1=__webpack_require__(147);exports.GridEditorModule=class{register(injector){injector.bind("gridLayoutSelector",gridLayoutSelector_1.GridLayoutSelector),injector.bindToCollection("widgetHandlers",gridHandlers_1.GridHandlers,"gridHandler")}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="editor row-layout-selector">\r\n    <h1>\r\n        Add section\r\n    </h1>\r\n    <hr>\r\n\r\n    <div class="tabs" role="tablist">\r\n        <div class="tab" data-bind="css: { \'tab-is-active\': !selected() }, attr: { \'aria-selected\': !selected() }">\r\n            <a href="#" data-bind="click: selected.bind($data,undefined), focus: true" title="New section" role="tab" aria-label="add empty section">\r\n                Empty\r\n            </a>\r\n        </div>\r\n        \x3c!-- ko if: isBlocksEnabled --\x3e\r\n        <div class="tab" data-bind="css: { \'tab-is-active\': selected() === \'blocks\' }, attr: { \'aria-selected\': selected() === \'blocks\' }">\r\n            <a href="#" data-bind="click: selected.bind($data,\'blocks\')" title="Blocks" role="tab" aria-label="add from blocks">\r\n                Blocks\r\n            </a>\r\n        </div>\r\n        \x3c!-- /ko --\x3e\r\n        <div class="tab" data-bind="css: { \'tab-is-active\': selected() === \'saved\' }, attr: { \'aria-selected\': selected() === \'saved\' }">\r\n            <a href="#" data-bind="click: selected.bind($data,\'saved\')" title="From library" role="tab" aria-label="Add from library">\r\n                Saved\r\n            </a>\r\n        </div>\r\n    </div>\r\n    \x3c!-- ko if: !selected() --\x3e\r\n\r\n    <div role="tabpanel" class="flex flex-column flex-grow" data-bind="scrollable: true, focus: { childSelector: \'.list-item\' }">\r\n        <div role="list" data-bind="foreach: { data: $component.snippets, as: \'snippet\' }">\r\n            <a href="#" class="snippet-grid list-item" role="listitem" data-bind="click: $component.selectLayout, styledInPlace: snippet.styles">\r\n                \x3c!-- ko foreach: { data: snippet.widgets, as: \'widget\' } --\x3e\r\n                <div class="snippet-grid-cell" data-bind="styledInPlace: widget.styles, attr: { role: widget.role }">\r\n                </div>\r\n                \x3c!-- /ko --\x3e\r\n            </a>\r\n        </div>\r\n    </div>\r\n\r\n    \x3c!-- /ko --\x3e\r\n\r\n    \x3c!-- ko if: selected() === \'saved\' --\x3e\r\n    <div role="tabpanel" class="flex flex-column add-block-container">\r\n        <block-selector class="flex flex-column" params="{ blockType: \'layout-section\', onSelect: $component.onBlockSelected }">\r\n        </block-selector>\r\n    </div>\r\n    \x3c!-- /ko --\x3e\r\n\r\n    \x3c!-- ko if: selected() === \'blocks\' --\x3e\r\n    <div role="tabpanel" class="flex flex-column add-block-container">\r\n        <block-selector class="flex flex-column" params="{ blockType: \'blocks-section\', onSelect: $component.onBlockSelected }">\r\n        </block-selector>\r\n    </div>\r\n    \x3c!-- /ko --\x3e\r\n</div>'},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(147),exports),__exportStar(__webpack_require__(146),exports),__exportStar(__webpack_require__(237),exports)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.presets=void 0,exports.presets=[{type:"grid",styles:{instance:{grid:{md:{rows:["auto","1fr"],cols:["1fr","1fr","1fr"]},xs:{rows:["auto","auto","1fr"],cols:["1fr","1fr"]}}}},nodes:[{type:"grid-cell",role:"aside",styles:{instance:{"grid-cell":{md:{position:{col:1,row:1},span:{cols:1,rows:2},alignment:{vertical:"center",horizontal:"center"}},xs:{position:{col:1,row:1},span:{cols:2,rows:1},alignment:{vertical:"center",horizontal:"center"}}}}}},{type:"grid-cell",role:"header",styles:{instance:{"grid-cell":{md:{position:{col:2,row:1},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}},xs:{position:{col:1,row:2},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}}}}}},{type:"grid-cell",role:"header",styles:{instance:{"grid-cell":{md:{position:{col:3,row:1},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}},xs:{position:{col:2,row:2},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}}}}}},{type:"grid-cell",role:"article",styles:{instance:{"grid-cell":{xs:{position:{col:1,row:3},span:{cols:2,rows:1},alignment:{vertical:"center",horizontal:"center"}},md:{position:{col:2,row:2},span:{cols:2,rows:1},alignment:{vertical:"center",horizontal:"center"}}}}}}]},{type:"grid",styles:{instance:{grid:{md:{rows:["auto","1fr"],cols:["33.1fr","33.1fr","33.1fr"]},xs:{rows:["auto","auto","1fr"],cols:["1fr","1fr"]}}}},nodes:[{type:"grid-cell",role:"aside",styles:{instance:{"grid-cell":{md:{position:{col:3,row:1},span:{cols:1,rows:2},alignment:{vertical:"center",horizontal:"center"}},xs:{position:{col:1,row:1},span:{cols:2,rows:1},alignment:{vertical:"center",horizontal:"center"}}}}}},{type:"grid-cell",role:"header",styles:{instance:{"grid-cell":{md:{position:{col:1,row:1},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}},xs:{position:{col:1,row:2},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}}}}}},{type:"grid-cell",role:"header",styles:{instance:{"grid-cell":{md:{position:{col:2,row:1},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}},xs:{position:{col:2,row:2},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}}}}}},{type:"grid-cell",role:"article",styles:{instance:{"grid-cell":{md:{position:{col:1,row:2},span:{cols:2,rows:1},alignment:{vertical:"center",horizontal:"center"}},xs:{position:{col:1,row:3},span:{cols:2,rows:1},alignment:{vertical:"center",horizontal:"center"}}}}}}]},{type:"grid",styles:{instance:{grid:{md:{rows:["1fr","auto"],cols:["1fr","1fr","1fr"]},xs:{rows:["auto","1fr","auto"],cols:["1fr","1fr"]}}}},nodes:[{type:"grid-cell",role:"aside",styles:{instance:{"grid-cell":{md:{position:{col:1,row:1},span:{cols:1,rows:2},alignment:{vertical:"center",horizontal:"center"}},xs:{position:{col:1,row:1},span:{cols:2,rows:1},alignment:{vertical:"center",horizontal:"center"}}}}}},{type:"grid-cell",role:"footer",styles:{instance:{"grid-cell":{md:{position:{col:2,row:2},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}},xs:{position:{col:1,row:3},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}}}}}},{type:"grid-cell",role:"footer",styles:{instance:{"grid-cell":{md:{position:{col:3,row:2},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}},xs:{position:{col:2,row:3},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}}}}}},{type:"grid-cell",role:"article",styles:{instance:{"grid-cell":{md:{position:{col:2,row:1},span:{cols:2,rows:1},alignment:{vertical:"center",horizontal:"center"}},xs:{position:{col:1,row:2},span:{cols:2,rows:1},alignment:{vertical:"center",horizontal:"center"}}}}}}]},{type:"grid",styles:{instance:{grid:{md:{rows:["1fr","auto"],cols:["1fr","1fr","1fr"]},xs:{rows:["auto","1fr","auto"],cols:["1fr","1fr"]}}}},nodes:[{type:"grid-cell",role:"article",styles:{instance:{"grid-cell":{md:{position:{col:1,row:1},span:{cols:2,rows:1},alignment:{vertical:"center",horizontal:"center"}},xs:{position:{col:1,row:2},span:{cols:2,rows:1}}}}}},{type:"grid-cell",role:"aside",styles:{instance:{"grid-cell":{md:{position:{col:3,row:1},span:{cols:1,rows:2}},xs:{position:{col:1,row:1},span:{cols:2,rows:1}}}}}},{type:"grid-cell",role:"footer",styles:{instance:{"grid-cell":{md:{position:{col:1,row:2},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}},xs:{position:{col:1,row:3},span:{cols:1,rows:1}}}}}},{type:"grid-cell",role:"footer",styles:{instance:{"grid-cell":{md:{position:{col:2,row:2},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}},xs:{position:{col:2,row:3},span:{cols:1,rows:1}}}}}}]},{type:"grid",styles:{instance:{grid:{md:{rows:["auto","1fr"],cols:["1fr","1fr","1fr"]},xs:{rows:["auto","auto","auto","auto"],cols:["1fr"]}}}},nodes:[{type:"grid-cell",role:"header",styles:{instance:{"grid-cell":{md:{position:{col:1,row:1},span:{cols:1,rows:1}},xs:{position:{col:1,row:1},span:{cols:1,rows:1}}}}}},{type:"grid-cell",role:"header",styles:{instance:{"grid-cell":{md:{position:{col:2,row:1},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}},xs:{position:{col:1,row:2},span:{cols:1,rows:1}}}}}},{type:"grid-cell",role:"header",styles:{instance:{"grid-cell":{md:{position:{col:3,row:1},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}},xs:{position:{col:1,row:3},span:{cols:1,rows:1}}}}}},{type:"grid-cell",role:"article",styles:{instance:{"grid-cell":{xs:{position:{col:1,row:4},span:{cols:3,rows:1}}}}}}]},{type:"grid",styles:{instance:{grid:{md:{rows:["auto","auto"],cols:["1fr","1fr","1fr"]},xs:{rows:["auto","auto","auto","auto"],cols:["1fr"]}}}},nodes:[{type:"grid-cell",role:"article",styles:{instance:{"grid-cell":{md:{position:{col:1,row:1},span:{cols:3,rows:1}},xs:{position:{col:1,row:1},span:{cols:1,rows:1}}}}}},{type:"grid-cell",role:"footer",styles:{instance:{"grid-cell":{md:{position:{col:1,row:2},span:{cols:1,rows:1}},xs:{position:{col:1,row:2},span:{cols:1,rows:1}}}}}},{type:"grid-cell",role:"footer",styles:{instance:{"grid-cell":{md:{position:{col:2,row:2},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}},xs:{position:{col:1,row:3},span:{cols:1,rows:1}}}}}},{type:"grid-cell",role:"footer",styles:{instance:{"grid-cell":{md:{position:{col:3,row:2},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}},xs:{position:{col:1,row:4},span:{cols:1,rows:1}}}}}}]},{type:"grid",styles:{instance:{grid:{md:{rows:["auto","1fr"],cols:["1fr","1fr","1fr"]},xs:{rows:["auto","auto","auto","auto"],cols:["1fr"]}}}},nodes:[{type:"grid-cell",role:"article",styles:{instance:{"grid-cell":{md:{position:{col:2,row:1},span:{cols:2,rows:2}},xs:{position:{col:1,row:1},span:{cols:1,rows:1}}}}}},{type:"grid-cell",role:"aside",styles:{instance:{"grid-cell":{md:{position:{col:1,row:1},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}},xs:{position:{col:1,row:2},span:{cols:1,rows:1}}}}}},{type:"grid-cell",role:"aside",styles:{instance:{"grid-cell":{md:{position:{col:1,row:2},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}},xs:{position:{col:1,row:3},span:{cols:1,rows:1}}}}}}]},{type:"grid",styles:{instance:{grid:{md:{rows:["auto","2fr"],cols:["1fr","1fr","1fr"]},xs:{rows:["auto","auto","auto","auto"],cols:["1fr"]}}}},nodes:[{type:"grid-cell",role:"article",styles:{instance:{"grid-cell":{md:{position:{col:1,row:1},span:{cols:2,rows:2}},xs:{position:{col:1,row:1},span:{cols:1,rows:1}}}}}},{type:"grid-cell",role:"aside",styles:{instance:{"grid-cell":{md:{position:{col:3,row:1},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}},xs:{position:{col:1,row:2},span:{cols:1,rows:1}}}}}},{type:"grid-cell",role:"aside",styles:{instance:{"grid-cell":{md:{position:{col:3,row:2},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}},xs:{position:{col:1,row:3},span:{cols:1,rows:1}}}}}}]},{type:"grid",styles:{instance:{grid:{md:{rows:["1fr","auto"],cols:["1fr","1fr"]},xs:{rows:["auto","auto","auto"],cols:["1fr"]}}}},nodes:[{type:"grid-cell",role:"article",styles:{instance:{"grid-cell":{md:{position:{col:1,row:1},span:{cols:2,rows:1}},xs:{position:{col:1,row:1},span:{cols:1,rows:1}}}}}},{type:"grid-cell",role:"footer",styles:{instance:{"grid-cell":{md:{position:{col:1,row:2},span:{cols:1,rows:1}},xs:{position:{col:1,row:3},span:{cols:1,rows:1}}}}}},{type:"grid-cell",role:"footer",styles:{instance:{"grid-cell":{md:{position:{col:2,row:2},span:{cols:1,rows:1}},xs:{position:{col:1,row:4},span:{cols:1,rows:1}}}}}}]},{type:"grid",styles:{instance:{grid:{md:{rows:["auto","1fr"],cols:["1fr","1fr"]},xs:{rows:["auto","auto","auto"],cols:["1fr"]}}}},nodes:[{type:"grid-cell",role:"header",styles:{instance:{"grid-cell":{md:{position:{col:1,row:1},span:{cols:1,rows:1}},xs:{position:{col:1,row:1},span:{cols:1,rows:1}}}}}},{type:"grid-cell",role:"header",styles:{instance:{"grid-cell":{md:{position:{col:2,row:1},span:{cols:1,rows:1}},xs:{position:{col:1,row:2},span:{cols:1,rows:1}}}}}},{type:"grid-cell",role:"article",styles:{instance:{"grid-cell":{md:{position:{col:1,row:2},span:{cols:2,rows:1}},xs:{position:{col:1,row:3},span:{cols:1,rows:1}}}}}}]},{type:"grid",styles:{instance:{grid:{xs:{rows:["auto","auto"],cols:["1fr","1fr"]}}}},nodes:[{type:"grid-cell",role:"article",styles:{instance:{"grid-cell":{xs:{position:{col:1,row:2},span:{cols:2,rows:1},alignment:{vertical:"center",horizontal:"center"}}}}}},{type:"grid-cell",role:"article",styles:{instance:{"grid-cell":{xs:{position:{col:1,row:1},span:{cols:2,rows:1},alignment:{vertical:"center",horizontal:"center"}}}}}}]},{type:"grid",styles:{instance:{grid:{md:{rows:["auto","1fr"],cols:["1fr","1fr","1fr"]},xs:{rows:["auto","auto","auto"],cols:["1fr"]}}}},nodes:[{type:"grid-cell",role:"header",styles:{instance:{"grid-cell":{md:{position:{col:1,row:1},span:{cols:3,rows:1},alignment:{vertical:"center",horizontal:"center"}},xs:{position:{col:1,row:1},span:{cols:1,rows:1}}}}}},{type:"grid-cell",role:"article",styles:{instance:{"grid-cell":{md:{position:{col:1,row:2},span:{cols:2,rows:1}},xs:{position:{col:1,row:3},span:{cols:1,rows:1}}}}}},{type:"grid-cell",role:"aside",styles:{instance:{"grid-cell":{md:{position:{col:3,row:2},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}},xs:{position:{col:1,row:2},span:{cols:1,rows:1}}}}}}]},{type:"grid",styles:{instance:{grid:{md:{rows:["auto","1fr"],cols:["1fr","1fr","1fr"]},xs:{rows:["auto","auto","auto"],cols:["1fr"]}}}},nodes:[{type:"grid-cell",role:"header",styles:{instance:{"grid-cell":{md:{position:{col:1,row:1},span:{cols:3,rows:1}},xs:{position:{col:1,row:1},span:{cols:1,rows:1}}}}}},{type:"grid-cell",role:"article",styles:{instance:{"grid-cell":{md:{position:{col:2,row:2},span:{cols:2,rows:1},alignment:{vertical:"center",horizontal:"center"}},xs:{position:{col:1,row:3},span:{cols:1,rows:1}}}}}},{type:"grid-cell",role:"aside",styles:{instance:{"grid-cell":{md:{position:{col:1,row:2},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}},xs:{position:{col:1,row:2},span:{cols:1,rows:1}}}}}}]},{type:"grid",styles:{instance:{grid:{md:{rows:["auto","auto"],cols:["1fr","1fr"]},xs:{rows:["auto","auto","auto","auto"],cols:["1fr"]}}}},nodes:[{type:"grid-cell",role:"aside",styles:{instance:{"grid-cell":{md:{position:{col:1,row:1},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}},xs:{position:{col:1,row:1},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}}}}}},{type:"grid-cell",role:"article",styles:{instance:{"grid-cell":{md:{position:{col:2,row:1},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}},xs:{position:{col:1,row:2},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}}}}}},{type:"grid-cell",role:"article",styles:{instance:{"grid-cell":{md:{position:{col:1,row:2},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}},xs:{position:{col:1,row:4},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}}}}}},{type:"grid-cell",role:"aside",styles:{instance:{"grid-cell":{md:{position:{col:2,row:2},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}},xs:{position:{col:1,row:3},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}}}}}}]},{type:"grid",styles:{instance:{grid:{md:{rows:["auto"],cols:["1fr","1fr","1fr"]},xs:{rows:["auto","auto","auto"],cols:["1fr"]}}}},nodes:[{type:"grid-cell",role:"article",styles:{instance:{"grid-cell":{md:{position:{col:1,row:1},span:{cols:1,rows:1}},xs:{position:{col:1,row:1},span:{cols:1,rows:1}}}}}},{type:"grid-cell",role:"article",styles:{instance:{"grid-cell":{md:{position:{col:2,row:1},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}},xs:{position:{col:1,row:2},span:{cols:1,rows:1}}}}}},{type:"grid-cell",role:"article",styles:{instance:{"grid-cell":{md:{position:{col:3,row:1},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}},xs:{position:{col:1,row:3},span:{cols:1,rows:1}}}}}}]},{type:"grid",styles:{instance:{grid:{md:{rows:["auto"],cols:["3fr","6fr","3fr"]},xs:{rows:["auto","auto","auto"],cols:["1fr"]}}}},nodes:[{type:"grid-cell",role:"aside",styles:{instance:{"grid-cell":{md:{position:{col:1,row:1},span:{cols:1,rows:1}},xs:{position:{col:1,row:1},span:{cols:1,rows:1}}}}}},{type:"grid-cell",role:"article",styles:{instance:{"grid-cell":{md:{position:{col:2,row:1},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}},xs:{position:{col:1,row:3},span:{cols:1,rows:1}}}}}},{type:"grid-cell",role:"aside",styles:{instance:{"grid-cell":{md:{position:{col:3,row:1},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}},xs:{position:{col:1,row:2},span:{cols:1,rows:1}}}}}}]},{type:"grid",styles:{instance:{grid:{md:{rows:["auto"],cols:["4fr","8fr"]},xs:{rows:["auto","auto"],cols:["1fr"]}}}},nodes:[{type:"grid-cell",role:"aside",styles:{instance:{"grid-cell":{md:{position:{col:1,row:1},span:{cols:1,rows:1}},xs:{position:{col:1,row:1},span:{cols:1,rows:1}}}}}},{type:"grid-cell",role:"article",styles:{instance:{"grid-cell":{md:{position:{col:2,row:1},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}},xs:{position:{col:1,row:2},span:{cols:1,rows:1}}}}}}]},{type:"grid",styles:{instance:{grid:{md:{rows:["auto"],cols:["8fr","4fr"]},xs:{rows:["auto","auto"],cols:["1fr"]}}}},nodes:[{type:"grid-cell",role:"aside",styles:{instance:{"grid-cell":{md:{position:{col:2,row:1},span:{cols:1,rows:1}},xs:{position:{col:1,row:1},span:{cols:1,rows:1}}}}}},{type:"grid-cell",role:"article",styles:{instance:{"grid-cell":{md:{position:{col:1,row:1},span:{cols:1,rows:1}},xs:{position:{col:1,row:2},span:{cols:1,rows:1}}}}}}]},{type:"grid",styles:{instance:{grid:{md:{rows:["auto"],cols:["3fr","1fr"]},xs:{rows:["auto","auto"],cols:["1fr"]}}}},nodes:[{type:"grid-cell",role:"aside",styles:{instance:{"grid-cell":{md:{position:{col:2,row:1},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}},xs:{position:{col:1,row:1},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}}}}}},{type:"grid-cell",role:"article",styles:{instance:{"grid-cell":{md:{position:{col:1,row:1},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}},xs:{position:{col:1,row:2},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}}}}}}]},{type:"grid",styles:{instance:{grid:{md:{rows:["auto"],cols:["1fr","3fr"]},xs:{rows:["auto","auto"],cols:["1fr"]}}}},nodes:[{type:"grid-cell",role:"aside",styles:{instance:{"grid-cell":{md:{position:{col:1,row:1},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}},xs:{position:{col:1,row:1},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}}}}}},{type:"grid-cell",role:"article",styles:{instance:{"grid-cell":{md:{position:{col:2,row:1},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}},xs:{position:{col:1,row:2},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}}}}}}]},{type:"grid",styles:{instance:{grid:{md:{rows:["auto"],cols:["1fr","1fr"]},xs:{rows:["auto","auto"],cols:["1fr"]}}}},nodes:[{type:"grid-cell",role:"aside",styles:{instance:{"grid-cell":{md:{position:{col:2,row:1},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}},xs:{position:{col:1,row:1},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}}}}}},{type:"grid-cell",role:"article",styles:{instance:{"grid-cell":{md:{position:{col:1,row:1},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}},xs:{position:{col:1,row:2},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}}}}}}]},{type:"grid",styles:{instance:{grid:{md:{rows:["auto"],cols:["1fr","1fr"]},xs:{rows:["auto","auto"],cols:["1fr"]}}}},nodes:[{type:"grid-cell",role:"aside",styles:{instance:{"grid-cell":{md:{position:{col:1,row:1},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}},xs:{position:{col:1,row:1},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}}}}}},{type:"grid-cell",role:"article",styles:{instance:{"grid-cell":{md:{position:{col:2,row:1},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}},xs:{position:{col:1,row:2},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}}}}}}]},{type:"grid",styles:{instance:{grid:{md:{rows:["auto"],cols:["1fr","1fr","1fr","1fr"]},xs:{rows:["auto","auto","auto","auto"],cols:["1fr"]}}}},nodes:[{type:"grid-cell",role:"article",styles:{instance:{"grid-cell":{md:{position:{col:1,row:1},span:{cols:1,rows:1}},xs:{position:{col:1,row:1},span:{cols:1,rows:1}}}}}},{type:"grid-cell",role:"article",styles:{instance:{"grid-cell":{md:{position:{col:2,row:1},span:{cols:1,rows:1}},xs:{position:{col:1,row:2},span:{cols:1,rows:1}}}}}},{type:"grid-cell",role:"article",styles:{instance:{"grid-cell":{md:{position:{col:3,row:1},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}},xs:{position:{col:1,row:3},span:{cols:1,rows:1}}}}}},{type:"grid-cell",role:"article",styles:{instance:{"grid-cell":{md:{position:{col:4,row:1},span:{cols:1,rows:1}},xs:{position:{col:1,row:4},span:{cols:1,rows:1}}}}}}]},{type:"grid",styles:{instance:{grid:{xs:{rows:["auto"],cols:["1fr"]}}}},nodes:[{type:"grid-cell",role:"article",styles:{instance:{"grid-cell":{xs:{position:{col:1,row:1},span:{cols:1,rows:1},alignment:{vertical:"center",horizontal:"center"}}}}}}]}]},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(236),exports),__exportStar(__webpack_require__(297),exports),__exportStar(__webpack_require__(145),exports),__exportStar(__webpack_require__(238),exports)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GridCellEditorModule=void 0;const gridCellEditor_1=__webpack_require__(874),gridCellHandlers_1=__webpack_require__(233);exports.GridCellEditorModule=class{register(injector){injector.bind("gridCellEditor",gridCellEditor_1.GridCellEditor),injector.bindToCollection("widgetHandlers",gridCellHandlers_1.GridCellHandlers,"gridCellHandler")}}},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.GridCellEditor=void 0;const ko=__webpack_require__(0),Utils=__webpack_require__(6),Objects=__webpack_require__(30),gridCellEditor_html_1=__webpack_require__(875),decorators_1=__webpack_require__(2),gridCellModel_1=__webpack_require__(143);let GridCellEditor=class{constructor(viewManager,eventManager){this.viewManager=viewManager,this.eventManager=eventManager,this.container=ko.observable(),this.box=ko.observable()}initialize(){this.updateObservables(),this.eventManager.addEventListener("onViewportChange",this.updateObservables)}updateObservables(){const gridCellStyleConfig=Objects.getObjectAt("styles/instance/grid-cell",this.model);if(!gridCellStyleConfig)return;const viewport=this.viewManager.getViewport(),styleConfig=gridCellStyleConfig[Utils.getClosestBreakpoint(gridCellStyleConfig,viewport)],containerConfig={alignment:styleConfig.alignment,overflow:styleConfig.overflow};this.container(containerConfig);const paddingConfig=Objects.getObjectAt("styles/instance/padding/"+viewport,this.model);this.box({padding:paddingConfig})}onContainerUpdate(containerConfig){const viewport=this.viewManager.getViewport();Objects.setValue(`styles/instance/grid-cell/${viewport}/alignment`,this.model,containerConfig.alignment),Objects.setValue(`styles/instance/grid-cell/${viewport}/overflow`,this.model,containerConfig.overflow),this.onChange(this.model)}onBoxUpdate(boxConfig){const viewport=this.viewManager.getViewport();Objects.setValue("styles/instance/padding/"+viewport,this.model,boxConfig.padding),this.onChange(this.model)}};__decorate([decorators_1.Param(),__metadata("design:type",gridCellModel_1.GridCellModel)],GridCellEditor.prototype,"model",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],GridCellEditor.prototype,"onChange",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],GridCellEditor.prototype,"initialize",null),GridCellEditor=__decorate([decorators_1.Component({selector:"grid-cell-editor",template:gridCellEditor_html_1.default}),__metadata("design:paramtypes",[Object,Object])],GridCellEditor),exports.GridCellEditor=GridCellEditor},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<fieldset class="form flex-item flex-item-grow" data-bind="scrollable: true">\r\n    <container params="{ container: container, onUpdate: onContainerUpdate, overflowControls: true }"></container>\r\n\r\n    <div class="form-group form-group-collapsible">\r\n        <label class="form-label">\r\n            <a href="#" class="form-group-toggle" title="Toggle section" data-bind="collapse: \'#boxCollapse\'"></a>\r\n            <b>Box</b>\r\n        </label>\r\n        <div id="boxCollapse" class="collapse form-group-collapse">\r\n            <box params="{ features: \'padding\', box: box, onUpdate: onBoxUpdate }"></box>\r\n        </div>\r\n    </div>\r\n</fieldset>'},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Tray=void 0;const ko=__webpack_require__(0),tray_html_1=__webpack_require__(877),decorators_1=__webpack_require__(2);let Tray=class{constructor(trayCommands,roleService,viewManager,settingsProvider){this.trayCommands=trayCommands,this.roleService=roleService,this.viewManager=viewManager,this.settingsProvider=settingsProvider,this.buttons=ko.observableArray(trayCommands),this.availableRoles=ko.observableArray(),this.selectedRoles=ko.observableArray(),this.localizationEnabled=ko.observable()}initialize(){return __awaiter(this,void 0,void 0,(function*(){this.buttons(this.trayCommands);const roles=yield this.roleService.getRoles();this.availableRoles(roles.slice(1)),this.selectedRoles(this.viewManager.getViewRoles());const localizationEnabled=yield this.settingsProvider.getSetting("localizationEnabled");this.localizationEnabled(!!localizationEnabled)}))}onRoleSelect(roles){this.selectedRoles(roles),this.viewManager.setViewRoles(roles)}};__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],Tray.prototype,"initialize",null),Tray=__decorate([decorators_1.Component({selector:"tray",template:tray_html_1.default}),__metadata("design:paramtypes",[Array,Object,Object,Object])],Tray),exports.Tray=Tray},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="toolbox-btn">\r\n    <a href="#" role="button" data-bind="tooltip: \'<h1>Form factors</h1><p>See and adjust the content for<br/> devices of different sizes.</p>\', balloon: { component: { name: \'viewport-selector\' }, position: \'top\' }" aria-label="Form factors">\r\n        <i class="paperbits-icon paperbits-mirror-2"></i>\r\n    </a>\r\n</div>\r\n\r\n\x3c!-- ko if: localizationEnabled --\x3e\r\n<div class="toolbox-btn">\r\n    <a href="#" role="button" data-bind="tooltip: \'<h1>Locales</h1><p>See and adjust the content for<br/> specific languages and locales.</p>\', balloon: { component: { name: \'locale-selector\' }, position: \'top\' }" aria-label="Locale selection">\r\n        <i class="paperbits-icon paperbits-world"></i>\r\n    </a>\r\n</div>\r\n\x3c!-- /ko --\x3e\r\n\r\n<div class="toolbox-btn">\r\n    <a href="#" role="button" data-bind="tooltip: \'<h1>Roles</h1><p>See how the content looks like<br/> for users in a particular role.</p>\', balloon: { component: { name: \'role-selector\', params: { availableRoles: availableRoles, selectedRoles: selectedRoles, onSelect: onRoleSelect } }, position: \'top\' }" aria-label="Roles">\r\n        <i class="paperbits-icon paperbits-single-02"></i>\r\n    </a>\r\n</div>\r\n\r\n\x3c!-- ko foreach: { data: buttons, as: \'button\' } --\x3e\r\n<button role="button" class="toolbox-btn" data-bind="attr: { \'aria-label\': button.title }, tooltip: button.tooltip, click: button.onActivate, disable: button.disabled">\r\n    <i data-bind="css: button.iconClass"></i>\r\n</button>\r\n\x3c!-- /ko --\x3e'},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(879),exports),__exportStar(__webpack_require__(242),exports),__exportStar(__webpack_require__(243),exports),__exportStar(__webpack_require__(148),exports),__exportStar(__webpack_require__(880),exports)},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Spinner=void 0;const decorators_1=__webpack_require__(2);let Spinner=class{};Spinner=__decorate([decorators_1.Component({selector:"spinner",template:"<div></div><div></div><div></div>"})],Spinner),exports.Spinner=Spinner},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(882),exports),__exportStar(__webpack_require__(884),exports)},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.RoleSelector=void 0;const ko=__webpack_require__(0),role_selector_html_1=__webpack_require__(883),decorators_1=__webpack_require__(2);let RoleSelector=class{constructor(){this.availableRoles=ko.observableArray(),this.selectedRoles=ko.observableArray()}selectRole(role){const roles=[role];this.selectedRoles(roles),this.onSelect&&this.onSelect(roles)}isSelected(role){return this.selectedRoles().some(x=>x.key===role.key)}};__decorate([decorators_1.Param(),__metadata("design:type",Function)],RoleSelector.prototype,"availableRoles",void 0),__decorate([decorators_1.Param(),__metadata("design:type",Function)],RoleSelector.prototype,"selectedRoles",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],RoleSelector.prototype,"onSelect",void 0),RoleSelector=__decorate([decorators_1.Component({selector:"role-selector",template:role_selector_html_1.default}),__metadata("design:paramtypes",[])],RoleSelector),exports.RoleSelector=RoleSelector},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="toolbox">\r\n    <div role="listbox" class="list-checkboxes" data-bind="foreach: { data: availableRoles, as: \'role\'  }, scrollable: true, focus: { childSelector: \'.list-item\' }">\r\n        <a href="#" role="option" class="list-item" data-bind="text: role.name, click: $component.selectRole, css: { \'list-item-checked\': $component.isSelected(role) }">\r\n        </a>\r\n    </div>\r\n</div>'},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.RoleInput=void 0;const ko=__webpack_require__(0),role_input_html_1=__webpack_require__(885),decorators_1=__webpack_require__(2),user_1=__webpack_require__(58);let RoleInput=class{constructor(roleService){this.roleService=roleService,this.availableRoles=ko.observableArray(),this.selectedRoles=ko.observableArray(),this.selectedRolesDisplay=ko.observable()}initialize(){return __awaiter(this,void 0,void 0,(function*(){const availableRoles=yield this.roleService.getRoles();this.availableRoles(availableRoles);const selectedRoles=this.selection?availableRoles.filter(x=>this.selection.includes(x.key)):[user_1.BuiltInRoles.everyone];this.selectedRoles(selectedRoles),this.updateDisplay(selectedRoles)}))}updateDisplay(roles){return this.selectedRolesDisplay(roles.map(x=>x.name).sort().join(", "))}onSelectionChange(roles){this.updateDisplay(roles),this.selectedRoles(roles),this.selection=roles.map(role=>role.key),this.onChange&&this.onChange(this.selection)}};__decorate([decorators_1.Param(),__metadata("design:type",Array)],RoleInput.prototype,"selection",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],RoleInput.prototype,"onChange",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],RoleInput.prototype,"initialize",null),RoleInput=__decorate([decorators_1.Component({selector:"role-input",template:role_input_html_1.default}),__metadata("design:paramtypes",[Object])],RoleInput),exports.RoleInput=RoleInput},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="form-group">\r\n    <label for="layout" class="form-label">\r\n        Visibile to\r\n    </label>\r\n\r\n    <div class="input-group">\r\n        <a href="#" class="form-control" data-bind="text: selectedRolesDisplay, balloon: { component: { name: \'role-selector\', params: { availableRoles: availableRoles, selectedRoles: selectedRoles, onSelect: onSelectionChange } }, position: \'top\' }">\r\n        </a>\r\n        <div class="input-group-addon">\r\n            <i class="paperbits-icon paperbits-single-02"></i>\r\n        </div>\r\n    </div>\r\n</div>'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const ko=__webpack_require__(0);ko.bindingHandlers.command={init(element,valueAccessor){const contextCommand=valueAccessor(),bindings={background:{color:contextCommand.color},attr:{title:contextCommand.tooltip}};contextCommand.component?bindings.balloon={component:contextCommand.component}:contextCommand.callback&&(bindings.click=contextCommand.callback),ko.applyBindingsToNode(element,bindings,null)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const ko=__webpack_require__(0),common_1=__webpack_require__(19);ko.bindingHandlers.dialog={init(element){setTimeout(()=>{const focusableElements=element.querySelectorAll('a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])'),firstFocusableElement=focusableElements[0],lastFocusableElement=focusableElements[focusableElements.length-1],onKeyDown=event=>{event.keyCode===common_1.Keys.Tab&&(event.shiftKey?document.activeElement===firstFocusableElement&&(lastFocusableElement.focus(),event.preventDefault()):document.activeElement===lastFocusableElement&&(firstFocusableElement.focus(),event.preventDefault()))};element.addEventListener("keydown",onKeyDown),ko.utils.domNodeDisposal.addDisposeCallback(element,()=>{element.removeEventListener("keydown",onKeyDown)})},100)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const ko=__webpack_require__(0),common_1=__webpack_require__(19);ko.bindingHandlers.activate={init:(element,valueAccessor)=>{const onActivate=valueAccessor(),data=ko.dataFor(element),onClick=event=>{event.preventDefault(),event.stopImmediatePropagation(),onActivate(data)},onKeyDown=event=>{event.keyCode!==common_1.Keys.Enter&&event.keyCode!==common_1.Keys.Space||(event.preventDefault(),event.stopImmediatePropagation(),onActivate(data))};element.addEventListener("keydown",onKeyDown),element.addEventListener("click",onClick),ko.utils.domNodeDisposal.addDisposeCallback(element,()=>{element.removeEventListener("click",onClick),element.removeEventListener("keydown",onKeyDown)})}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const ko=__webpack_require__(0);ko.bindingHandlers.whenInView={init:(element,valueAccessor)=>{const callback=valueAccessor(),observer=new IntersectionObserver(entries=>{entries.forEach(entry=>{entry.isIntersecting&&callback&&callback()})});observer.observe(element),ko.utils.domNodeDisposal.addDisposeCallback(element,()=>{observer.disconnect()})}}},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MediaDisplay=void 0;const mediaDisplay_html_1=__webpack_require__(891),decorators_1=__webpack_require__(2),mediaItem_1=__webpack_require__(87);let MediaDisplay=class{};__decorate([decorators_1.Param(),__metadata("design:type",mediaItem_1.MediaItem)],MediaDisplay.prototype,"item",void 0),MediaDisplay=__decorate([decorators_1.Component({selector:"media-display",template:mediaDisplay_html_1.default})],MediaDisplay),exports.MediaDisplay=MediaDisplay},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="flex flex-column media-preview-box">\r\n    <div class="flex flex-item flex-item-grow">\r\n        \x3c!-- ko if: item --\x3e\r\n        <img id="pictureThumbnail" class="lightbox-image" data-bind="attr: { src: item.thumbnailUrl }, lightbox: { url: item.thumbnailUrl, fileName: item.fileName }">\r\n        \x3c!-- /ko --\x3e\r\n    </div>\r\n    <div class="flex-item btn-group">\r\n        <label for="pictureThumbnail" class="text-center text-overflow" data-bind="text: item.fileName"></label>\r\n    </div>\r\n</div>'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Lightbox=void 0;const basicLightbox=__webpack_require__(893);exports.Lightbox=class{show(url,fileName){basicLightbox.create(`\n            <img class="lightbox-img" src="${url}">\n            <div class="lightbox-title">${fileName}</div>\n        `).show()}}},function(module,exports,__webpack_require__){module.exports=function e(n,t,o){function r(c,u){if(!t[c]){if(!n[c]){if(i)return i(c,!0);var a=new Error("Cannot find module '"+c+"'");throw a.code="MODULE_NOT_FOUND",a}var l=t[c]={exports:{}};n[c][0].call(l.exports,(function(e){return r(n[c][1][e]||e)}),l,l.exports,e,n,t,o)}return t[c].exports}for(var i=!1,c=0;c<o.length;c++)r(o[c]);return r}({1:[function(e,n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.create=t.visible=void 0;var o=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=document.createElement("div");return t.innerHTML=e.trim(),!0===n?t.children:t.firstChild},r=function(e,n){var t=e.children;return 1===t.length&&t[0].tagName===n},i=function(e){return null!=(e=e||document.querySelector(".basicLightbox"))&&!0===e.ownerDocument.body.contains(e)};t.visible=i,t.create=function(e,n){var t=function(e,n){var t=o('\n\t\t<div class="basicLightbox '.concat(n.className,'">\n\t\t\t<div class="basicLightbox__placeholder" role="dialog"></div>\n\t\t</div>\n\t')),i=t.querySelector(".basicLightbox__placeholder");e.forEach((function(e){return i.appendChild(e)}));var c=r(i,"IMG"),u=r(i,"VIDEO"),s=r(i,"IFRAME");return!0===c&&t.classList.add("basicLightbox--img"),!0===u&&t.classList.add("basicLightbox--video"),!0===s&&t.classList.add("basicLightbox--iframe"),t}(e=function(e){var n="string"==typeof e,t=e instanceof HTMLElement==1;if(!1===n&&!1===t)throw new Error("Content must be a DOM element/node or string");return!0===n?Array.from(o(e,!0)):"TEMPLATE"===e.tagName?[e.content.cloneNode(!0)]:Array.from(e.children)}(e),n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(null==(e=Object.assign({},e)).closable&&(e.closable=!0),null==e.className&&(e.className=""),null==e.onShow&&(e.onShow=function(){}),null==e.onClose&&(e.onClose=function(){}),"boolean"!=typeof e.closable)throw new Error("Property `closable` must be a boolean");if("string"!=typeof e.className)throw new Error("Property `className` must be a string");if("function"!=typeof e.onShow)throw new Error("Property `onShow` must be a function");if("function"!=typeof e.onClose)throw new Error("Property `onClose` must be a function");return e}(n)),c=function(e){return!1!==n.onClose(u)&&function(e,n){return e.classList.remove("basicLightbox--visible"),setTimeout((function(){return!1===i(e)||e.parentElement.removeChild(e),n()}),410),!0}(t,(function(){if("function"==typeof e)return e(u)}))};!0===n.closable&&t.addEventListener("click",(function(e){e.target===t&&c()}));var u={element:function(){return t},visible:function(){return i(t)},show:function(e){return!1!==n.onShow(u)&&function(e,n){return document.body.appendChild(e),setTimeout((function(){requestAnimationFrame((function(){return e.classList.add("basicLightbox--visible"),n()}))}),10),!0}(t,(function(){if("function"==typeof e)return e(u)}))},close:c};return u}},{}]},{},[1])(1)},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(895),exports),__exportStar(__webpack_require__(896),exports),__exportStar(__webpack_require__(897),exports),__exportStar(__webpack_require__(898),exports)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.LocalStorageCache=void 0;exports.LocalStorageCache=class{constructor(settingsProvider){this.settingsProvider=settingsProvider}initialize(){return this.initializePromise||(this.initializePromise=new Promise(resolve=>__awaiter(this,void 0,void 0,(function*(){this.containerId=(yield this.settingsProvider.getSetting("cacheContainerId"))||"default",resolve()})))),this.initializePromise}getKeys(){return __awaiter(this,void 0,void 0,(function*(){return yield this.initialize(),Object.keys(localStorage)}))}setItem(key,value){return __awaiter(this,void 0,void 0,(function*(){yield this.initialize(),localStorage.setItem(`${this.containerId}/${key}`,JSON.stringify(value))}))}getItem(key){return __awaiter(this,void 0,void 0,(function*(){return yield this.initialize(),JSON.parse(localStorage.getItem(`${this.containerId}/${key}`))}))}estimateSize(object){return __awaiter(this,void 0,void 0,(function*(){yield this.initialize();const list=[],stack=[object];let bytes=0;for(;stack.length;){const value=stack.pop();if(value)if("boolean"==typeof value)bytes+=4;else if("string"==typeof value)bytes+=2*value.length;else if("number"==typeof value)bytes+=8;else if("object"==typeof value&&-1===list.indexOf(value)){list.push(value);for(const i in value)value.hasOwnProperty(i)&&stack.push(value[i])}}return bytes}))}getOccupiedSpace(){return __awaiter(this,void 0,void 0,(function*(){return 0}))}getRemainingSpace(){return __awaiter(this,void 0,void 0,(function*(){return 0}))}addChangeListener(callback){}removeItem(key){return __awaiter(this,void 0,void 0,(function*(){yield this.initialize(),localStorage.removeItem(`${this.containerId}/${key}`)}))}clear(){return __awaiter(this,void 0,void 0,(function*(){localStorage.clear()}))}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MemoryCache=void 0;const Objects=__webpack_require__(30);exports.MemoryCache=class{constructor(){this.cacheObject={}}getKeys(){return __awaiter(this,void 0,void 0,(function*(){return Object.keys(this.cacheObject)}))}setItem(key,value){return __awaiter(this,void 0,void 0,(function*(){this.cacheObject[key]=JSON.stringify(value)}))}getItem(key){return __awaiter(this,void 0,void 0,(function*(){const item=this.cacheObject[key];return item?Objects.clone(item):null}))}getOccupiedSpace(){return __awaiter(this,void 0,void 0,(function*(){return 0}))}getRemainingSpace(){return __awaiter(this,void 0,void 0,(function*(){return 0}))}addChangeListener(callback){}removeItem(key){return __awaiter(this,void 0,void 0,(function*(){delete this.cacheObject[key]}))}clear(){return __awaiter(this,void 0,void 0,(function*(){this.cacheObject={}}))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LruCache=void 0;exports.LruCache=class{constructor(maxSize=1e4,onevict){this.maxSize=maxSize,this.onevict=onevict,this.nodeMap={}}getItem(key){const item=this.nodeMap[key];return item?(this.pop(item),item.value):null}setItem(key,value){const item=this.nodeMap[key];item?(item.value=value,this.pop(item)):this.insert(key,value)}clear(){this.head=null,this.nodeMap={}}removeItem(key){let item=this.nodeMap[key];this.remove(item)}removeWhere(predicate){let item=this.head;if(item)do{predicate(item.key,item.value)&&this.removeItem(item.key)}while(null!=(item=item.next))}getKeys(){const result=new Array;let item=this.head;if(!item)return result;do{result.push(item.key)}while(null!==(item=item.next));return result}size(){return Object.keys(this.nodeMap).length}pop(item){item!==this.head&&(item.prev.next=item.next,item.next?item.next.prev=item.prev:this.tail=item.prev,item.next=this.head,this.head.prev=item,item.prev=null,this.head=item)}insert(key,value){if(Object.keys(this.nodeMap).length===this.maxSize){const tail=this.tail;this.remove(tail),this.onevict(tail.key,tail.value)}this.head?(this.head={key:key,value:value,prev:null,next:this.head},this.head.next.prev=this.head):(this.head={key:key,value:value,prev:null,next:null},this.tail=this.head),this.nodeMap[key]=this.head}remove(item){if(item&&(delete this.nodeMap[item.key],this.head)){if(this.head===item)return this.head=item.next,void(this.head.prev=null);if(this.tail===item)return this.tail=this.tail.prev,void(this.tail.next=null);item.prev.next=item.next,item.next.prev=item.prev}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StylesDesignModule=void 0,__webpack_require__(900),__webpack_require__(902),__webpack_require__(903),__webpack_require__(904),__webpack_require__(298);const styles_module_1=__webpack_require__(905),styleEditor_1=__webpack_require__(906),styleGuide_1=__webpack_require__(909),boxEditor_1=__webpack_require__(911),border_1=__webpack_require__(913),colors_1=__webpack_require__(916),gradients_1=__webpack_require__(921),fonts_1=__webpack_require__(929),googleFonts_1=__webpack_require__(932),animations_1=__webpack_require__(943),animationEditor_1=__webpack_require__(946),shadows_1=__webpack_require__(948),typography_1=__webpack_require__(955),background_1=__webpack_require__(958),bindingHandlers_styleSheet_1=__webpack_require__(300),plugins_1=__webpack_require__(138),stylesSection_1=__webpack_require__(961),bindingHandlers_stylePreview_1=__webpack_require__(962),bindingHandlers_styleable_1=__webpack_require__(301),transform_1=__webpack_require__(963),transition_1=__webpack_require__(965),container_1=__webpack_require__(967),styleSnippetSelector_1=__webpack_require__(969),styleSnippetService_1=__webpack_require__(302),styleSnippet_1=__webpack_require__(971),styleVariationSelector_1=__webpack_require__(973),bindingHandlers_1=__webpack_require__(975),optionSelectorEditor_1=__webpack_require__(976),sizeEditor_1=__webpack_require__(978);exports.StylesDesignModule=class{register(injector){injector.bindModule(new styles_module_1.StyleModule),injector.bind("fontSelector",fonts_1.FontSelector),injector.bind("googleFonts",googleFonts_1.GoogleFonts),injector.bind("typography",typography_1.Typography),injector.bind("container",container_1.Container),injector.bind("background",background_1.Background),injector.bind("transform",transform_1.Transform),injector.bind("transition",transition_1.Transition),injector.bind("boxEditor",boxEditor_1.BoxEditor),injector.bind("sizeEditor",sizeEditor_1.SizeEditor),injector.bind("borderEditor",border_1.BorderEditor),injector.bind("optionSelectorEditor",optionSelectorEditor_1.OptionSelectorEditor),injector.bind("colorSelector",colors_1.ColorSelector),injector.bind("colorEditor",colors_1.ColorEditor),injector.bind("colorPickerView",gradients_1.ColorStopEditor),injector.bind("gradientSelector",gradients_1.GradientSelector),injector.bind("gradientEditor",gradients_1.GradientEditor),injector.bind("shadowSelector",shadows_1.ShadowSelector),injector.bind("shadowEditor",shadows_1.ShadowEditor),injector.bind("shadowEditorGroup",shadows_1.ShadowEditorGroup),injector.bind("animationSelector",animations_1.AnimationSelector),injector.bind("animationEditor",animationEditor_1.AnimationEditor),injector.bind("styleEditor",styleEditor_1.StyleEditor),injector.bind("styleGuide",styleGuide_1.StyleGuide),injector.bind("stylePlugin",plugins_1.StylePlugin),injector.bind("styleSnippet",styleSnippet_1.StyleSnippet),injector.bind("styleSnippetSelector",styleSnippetSelector_1.StyleSnippetSelector),injector.bind("styleVariationSelector",styleVariationSelector_1.StyleVariationSelector),injector.bindSingleton("styleSnippetService",styleSnippetService_1.StyleSnippetService),injector.bindToCollection("autostart",bindingHandlers_styleSheet_1.StylesheetBindingHandler),injector.bindToCollection("autostart",bindingHandlers_stylePreview_1.StylePreviewBindingHandler),injector.bindToCollection("autostart",bindingHandlers_styleable_1.StylableBindingHandler),injector.bindToCollection("workshopSections",stylesSection_1.StylesWorkshopSection),injector.bindToCollection("autostart",bindingHandlers_1.StyledBindingHandler)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const ko=__webpack_require__(0),Pickr=__webpack_require__(901);ko.bindingHandlers.colorPicker={init:(element,valueAccessor)=>{const config=valueAccessor();Pickr.create({el:element,theme:"classic",container:element.parentElement,default:config.selectedColor(),defaultRepresentation:"HEX",showAlways:!0,useAsButton:!1,inline:!0,components:{preview:!0,opacity:!0,hue:!0,interaction:{hex:!1,rgba:!1,hsva:!1,input:!0,clear:!1,save:!1}}}).on("change",color=>{config.selectedColor&&config.selectedColor(color.toRGBA().toString())})}}},function(module,exports,__webpack_require__){window,module.exports=function(t){var e={};function o(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,o),i.l=!0,i.exports}return o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=1)}([function(t){t.exports=JSON.parse('{"a":"1.7.4"}')},function(t,e,o){"use strict";o.r(e);var n={};function i(t,e,o,n,i={}){e instanceof HTMLCollection||e instanceof NodeList?e=Array.from(e):Array.isArray(e)||(e=[e]),Array.isArray(o)||(o=[o]);for(const r of e)for(const e of o)r[t](e,n,{capture:!1,...i});return Array.prototype.slice.call(arguments,1)}o.r(n),o.d(n,"on",(function(){return r})),o.d(n,"off",(function(){return s})),o.d(n,"createElementFromString",(function(){return a})),o.d(n,"createFromTemplate",(function(){return c})),o.d(n,"eventPath",(function(){return l})),o.d(n,"resolveElement",(function(){return p})),o.d(n,"adjustableInputNumbers",(function(){return u}));const r=i.bind(null,"addEventListener"),s=i.bind(null,"removeEventListener");function a(t){const e=document.createElement("div");return e.innerHTML=t.trim(),e.firstElementChild}function c(t){const e=(t,e)=>{const o=t.getAttribute(e);return t.removeAttribute(e),o},o=(t,n={})=>{const i=e(t,":obj"),r=e(t,":ref"),s=i?n[i]={}:n;r&&(n[r]=t);for(const n of Array.from(t.children)){const t=e(n,":arr"),i=o(n,t?{}:s);t&&(s[t]||(s[t]=[])).push(Object.keys(i).length?i:n)}return n};return o(a(t))}function l(t){let e=t.path||t.composedPath&&t.composedPath();if(e)return e;let o=t.target.parentElement;for(e=[t.target,o];o=o.parentElement;)e.push(o);return e.push(document,window),e}function p(t){return t instanceof Element?t:"string"==typeof t?t.split(/>>/g).reduce((t,e,o,n)=>(t=t.querySelector(e),o<n.length-1?t.shadowRoot:t),document):null}function u(t,e=(t=>t)){function o(o){const n=[.001,.01,.1][Number(o.shiftKey||2*o.ctrlKey)]*(o.deltaY<0?1:-1);let i=0,r=t.selectionStart;t.value=t.value.replace(/[\d.]+/g,(t,o)=>o<=r&&o+t.length>=r?(r=o,e(Number(t),n,i)):(i++,t)),t.focus(),t.setSelectionRange(r,r),o.preventDefault(),t.dispatchEvent(new Event("input"))}r(t,"focus",()=>r(window,"wheel",o,{passive:!1})),r(t,"blur",()=>s(window,"wheel",o))}var h=o(0);const{min:d,max:f,floor:m,round:v}=Math;function b(t,e,o){e/=100,o/=100;const n=m(t=t/360*6),i=t-n,r=o*(1-e),s=o*(1-i*e),a=o*(1-(1-i)*e),c=n%6;return[255*[o,s,r,r,a,o][c],255*[a,o,o,s,r,r][c],255*[r,r,a,o,o,s][c]]}function g(t,e,o){const n=(2-(e/=100))*(o/=100)/2;return 0!==n&&(e=1===n?0:n<.5?e*o/(2*n):e*o/(2-2*n)),[t,100*e,100*n]}function y(t,e,o){const n=d(t/=255,e/=255,o/=255),i=f(t,e,o),r=i-n;let s,a;if(0===r)s=a=0;else{a=r/i;const n=((i-t)/6+r/2)/r,c=((i-e)/6+r/2)/r,l=((i-o)/6+r/2)/r;t===i?s=l-c:e===i?s=1/3+n-l:o===i&&(s=2/3+c-n),s<0?s+=1:s>1&&(s-=1)}return[360*s,100*a,100*i]}function _(t,e,o,n){return e/=100,o/=100,[...y(255*(1-d(1,(t/=100)*(1-(n/=100))+n)),255*(1-d(1,e*(1-n)+n)),255*(1-d(1,o*(1-n)+n)))]}function w(t,e,o){e/=100;const n=2*(e*=(o/=100)<.5?o:1-o)/(o+e)*100,i=100*(o+e);return[t,isNaN(n)?0:n,i]}function A(t){return y(...t.match(/.{2}/g).map(t=>parseInt(t,16)))}function C(t){t=t.match(/^[a-zA-Z]+$/)?function(t){if("black"===t.toLowerCase())return"#000";const e=document.createElement("canvas").getContext("2d");return e.fillStyle=t,"#000"===e.fillStyle?null:e.fillStyle}(t):t;const e={cmyk:/^cmyk[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)/i,rgba:/^((rgba)|rgb)[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)[\D]*?([\d.]+|$)/i,hsla:/^((hsla)|hsl)[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)[\D]*?([\d.]+|$)/i,hsva:/^((hsva)|hsv)[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)[\D]*?([\d.]+|$)/i,hexa:/^#?(([\dA-Fa-f]{3,4})|([\dA-Fa-f]{6})|([\dA-Fa-f]{8}))$/i},o=t=>t.map(t=>/^(|\d+)\.\d+|\d+$/.test(t)?Number(t):void 0);let n;t:for(const i in e){if(!(n=e[i].exec(t)))continue;const r=t=>!!n[2]==("number"==typeof t);switch(i){case"cmyk":{const[,t,e,r,s]=o(n);if(t>100||e>100||r>100||s>100)break t;return{values:_(t,e,r,s),type:i}}case"rgba":{const[,,,t,e,s,a]=o(n);if(t>255||e>255||s>255||a<0||a>1||!r(a))break t;return{values:[...y(t,e,s),a],a:a,type:i}}case"hexa":{let[,t]=n;4!==t.length&&3!==t.length||(t=t.split("").map(t=>t+t).join(""));const e=t.substring(0,6);let o=t.substring(6);return o=o?parseInt(o,16)/255:void 0,{values:[...A(e),o],a:o,type:i}}case"hsla":{const[,,,t,e,s,a]=o(n);if(t>360||e>100||s>100||a<0||a>1||!r(a))break t;return{values:[...w(t,e,s),a],a:a,type:i}}case"hsva":{const[,,,t,e,s,a]=o(n);if(t>360||e>100||s>100||a<0||a>1||!r(a))break t;return{values:[t,e,s,a],a:a,type:i}}}}return{values:null,type:null}}function k(t=0,e=0,o=0,n=1){const i=(t,e)=>(o=-1)=>e(~o?t.map(t=>Number(t.toFixed(o))):t),r={h:t,s:e,v:o,a:n,toHSVA(){const t=[r.h,r.s,r.v,r.a];return t.toString=i(t,t=>"hsva(".concat(t[0],", ").concat(t[1],"%, ").concat(t[2],"%, ").concat(r.a,")")),t},toHSLA(){const t=[...g(r.h,r.s,r.v),r.a];return t.toString=i(t,t=>"hsla(".concat(t[0],", ").concat(t[1],"%, ").concat(t[2],"%, ").concat(r.a,")")),t},toRGBA(){const t=[...b(r.h,r.s,r.v),r.a];return t.toString=i(t,t=>"rgba(".concat(t[0],", ").concat(t[1],", ").concat(t[2],", ").concat(r.a,")")),t},toCMYK(){const t=function(t,e,o){const n=b(t,e,o),i=n[0]/255,r=n[1]/255,s=n[2]/255,a=d(1-i,1-r,1-s);return[100*(1===a?0:(1-i-a)/(1-a)),100*(1===a?0:(1-r-a)/(1-a)),100*(1===a?0:(1-s-a)/(1-a)),100*a]}(r.h,r.s,r.v);return t.toString=i(t,t=>"cmyk(".concat(t[0],"%, ").concat(t[1],"%, ").concat(t[2],"%, ").concat(t[3],"%)")),t},toHEXA(){const t=function(t,e,o){return b(t,e,o).map(t=>v(t).toString(16).padStart(2,"0"))}(r.h,r.s,r.v),e=r.a>=1?"":Number((255*r.a).toFixed(0)).toString(16).toUpperCase().padStart(2,"0");return e&&t.push(e),t.toString=()=>"#".concat(t.join("").toUpperCase()),t},clone:()=>k(r.h,r.s,r.v,r.a)};return r}const S=t=>Math.max(Math.min(t,1),0);function O(t){const e={options:Object.assign({lock:null,onchange:()=>0,onstop:()=>0},t),_keyboard(t){const{options:o}=e,{type:n,key:i}=t;if(document.activeElement===o.wrapper){const{lock:o}=e.options,r="ArrowUp"===i,s="ArrowRight"===i,a="ArrowDown"===i,c="ArrowLeft"===i;if("keydown"===n&&(r||s||a||c)){let n=0,i=0;"v"===o?n=r||s?1:-1:"h"===o?n=r||s?-1:1:(i=r?-1:a?1:0,n=c?-1:s?1:0),e.update(S(e.cache.x+.01*n),S(e.cache.y+.01*i)),t.preventDefault()}else i.startsWith("Arrow")&&(e.options.onstop(),t.preventDefault())}},_tapstart(t){r(document,["mouseup","touchend","touchcancel"],e._tapstop),r(document,["mousemove","touchmove"],e._tapmove),t.cancelable&&t.preventDefault(),e._tapmove(t)},_tapmove(t){const{options:o,cache:n}=e,{lock:i,element:r,wrapper:s}=o,a=s.getBoundingClientRect();let c=0,l=0;if(t){const e=t&&t.touches&&t.touches[0];c=t?(e||t).clientX:0,l=t?(e||t).clientY:0,c<a.left?c=a.left:c>a.left+a.width&&(c=a.left+a.width),l<a.top?l=a.top:l>a.top+a.height&&(l=a.top+a.height),c-=a.left,l-=a.top}else n&&(c=n.x*a.width,l=n.y*a.height);"h"!==i&&(r.style.left="calc(".concat(c/a.width*100,"% - ").concat(r.offsetWidth/2,"px)")),"v"!==i&&(r.style.top="calc(".concat(l/a.height*100,"% - ").concat(r.offsetHeight/2,"px)")),e.cache={x:c/a.width,y:l/a.height};const p=S(c/a.width),u=S(l/a.height);switch(i){case"v":return o.onchange(p);case"h":return o.onchange(u);default:return o.onchange(p,u)}},_tapstop(){e.options.onstop(),s(document,["mouseup","touchend","touchcancel"],e._tapstop),s(document,["mousemove","touchmove"],e._tapmove)},trigger(){e._tapmove()},update(t=0,o=0){const{left:n,top:i,width:r,height:s}=e.options.wrapper.getBoundingClientRect();"h"===e.options.lock&&(o=t),e._tapmove({clientX:n+r*t,clientY:i+s*o})},destroy(){const{options:t,_tapstart:o,_keyboard:n}=e;s(document,["keydown","keyup"],n),s([t.wrapper,t.element],"mousedown",o),s([t.wrapper,t.element],"touchstart",o,{passive:!1})}},{options:o,_tapstart:n,_keyboard:i}=e;return r([o.wrapper,o.element],"mousedown",n),r([o.wrapper,o.element],"touchstart",n,{passive:!1}),r(document,["keydown","keyup"],i),e}function E(t={}){t=Object.assign({onchange:()=>0,className:"",elements:[]},t);const e=r(t.elements,"click",e=>{t.elements.forEach(o=>o.classList[e.target===o?"add":"remove"](t.className)),t.onchange(e),e.stopPropagation()});return{destroy:()=>s(...e)}}const L={variantFlipOrder:{start:"sme",middle:"mse",end:"ems"},positionFlipOrder:{top:"tbrl",right:"rltb",bottom:"btrl",left:"lrbt"},position:"bottom",margin:8},x=(t,e,o)=>{const n="object"!=typeof t||t instanceof HTMLElement?{reference:t,popper:e,...o}:t;return{update(t=n){const{reference:e,popper:o}=Object.assign(n,t);if(!o||!e)throw new Error("Popper- or reference-element missing.");return((t,e,o)=>{const{container:n,margin:i,position:r,variantFlipOrder:s,positionFlipOrder:a}={container:document.documentElement.getBoundingClientRect(),...L,...o},{left:c,top:l}=e.style;e.style.left="0",e.style.top="0";const p=t.getBoundingClientRect(),u=e.getBoundingClientRect(),h={t:p.top-u.height-i,b:p.bottom+i,r:p.right+i,l:p.left-u.width-i},d={vs:p.left,vm:p.left+p.width/2+-u.width/2,ve:p.left+p.width-u.width,hs:p.top,hm:p.bottom-p.height/2-u.height/2,he:p.bottom-u.height},[f,m="middle"]=r.split("-"),v=a[f],b=s[m],{top:g,left:y,bottom:_,right:w}=n;for(const t of v){const o="t"===t||"b"===t,n=h[t],[i,r]=o?["top","left"]:["left","top"],[s,a]=o?[u.height,u.width]:[u.width,u.height],[c,l]=o?[_,w]:[w,_],[p,f]=o?[g,y]:[y,g];if(!(n<p||n+s>c))for(const s of b){const c=d[(o?"v":"h")+s];if(!(c<f||c+a>l))return e.style[r]=c-u[r]+"px",e.style[i]=n-u[i]+"px",t+s}}return e.style.left=c,e.style.top=l,null})(e,o,n)}}};function j(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}class B{constructor(t){j(this,"_initializingActive",!0),j(this,"_recalc",!0),j(this,"_nanopop",null),j(this,"_root",null),j(this,"_color",k()),j(this,"_lastColor",k()),j(this,"_swatchColors",[]),j(this,"_eventListener",{init:[],save:[],hide:[],show:[],clear:[],change:[],changestop:[],cancel:[],swatchselect:[]}),this.options=t=Object.assign({...B.DEFAULT_OPTIONS},t);const{swatches:e,components:o,theme:n,sliders:i,lockOpacity:r,padding:s}=t;["nano","monolith"].includes(n)&&!i&&(t.sliders="h"),o.interaction||(o.interaction={});const{preview:a,opacity:c,hue:l,palette:p}=o;o.opacity=!r&&c,o.palette=p||a||c||l,this._preBuild(),this._buildComponents(),this._bindEvents(),this._finalBuild(),e&&e.length&&e.forEach(t=>this.addSwatch(t));const{button:u,app:h}=this._root;this._nanopop=x(u,h,{margin:s}),u.setAttribute("role","button"),u.setAttribute("aria-label",this._t("btn:toggle"));const d=this;requestAnimationFrame((function e(){if(!h.offsetWidth)return requestAnimationFrame(e);d.setColor(t.default),d._rePositioningPicker(),t.defaultRepresentation&&(d._representation=t.defaultRepresentation,d.setColorRepresentation(d._representation)),t.showAlways&&d.show(),d._initializingActive=!1,d._emit("init")}))}_preBuild(){const{options:t}=this;for(const e of["el","container"])t[e]=p(t[e]);this._root=(t=>{const{components:e,useAsButton:o,inline:n,appClass:i,theme:r,lockOpacity:s}=t.options,a=t=>t?"":'style="display:none" hidden',l=e=>t._t(e),p=c('\n      <div :ref="root" class="pickr">\n\n        '.concat(o?"":'<button type="button" :ref="button" class="pcr-button"></button>','\n\n        <div :ref="app" class="pcr-app ').concat(i||"",'" data-theme="').concat(r,'" ').concat(n?'style="position: unset"':"",' aria-label="').concat(l("ui:dialog"),'" role="window">\n          <div class="pcr-selection" ').concat(a(e.palette),'>\n            <div :obj="preview" class="pcr-color-preview" ').concat(a(e.preview),'>\n              <button type="button" :ref="lastColor" class="pcr-last-color" aria-label="').concat(l("btn:last-color"),'"></button>\n              <div :ref="currentColor" class="pcr-current-color"></div>\n            </div>\n\n            <div :obj="palette" class="pcr-color-palette">\n              <div :ref="picker" class="pcr-picker"></div>\n              <div :ref="palette" class="pcr-palette" tabindex="0" aria-label="').concat(l("aria:palette"),'" role="listbox"></div>\n            </div>\n\n            <div :obj="hue" class="pcr-color-chooser" ').concat(a(e.hue),'>\n              <div :ref="picker" class="pcr-picker"></div>\n              <div :ref="slider" class="pcr-hue pcr-slider" tabindex="0" aria-label="').concat(l("aria:hue"),'" role="slider"></div>\n            </div>\n\n            <div :obj="opacity" class="pcr-color-opacity" ').concat(a(e.opacity),'>\n              <div :ref="picker" class="pcr-picker"></div>\n              <div :ref="slider" class="pcr-opacity pcr-slider" tabindex="0" aria-label="').concat(l("aria:opacity"),'" role="slider"></div>\n            </div>\n          </div>\n\n          <div class="pcr-swatches ').concat(e.palette?"":"pcr-last",'" :ref="swatches"></div>\n\n          <div :obj="interaction" class="pcr-interaction" ').concat(a(Object.keys(e.interaction).length),'>\n            <input :ref="result" class="pcr-result" type="text" spellcheck="false" ').concat(a(e.interaction.input),' aria-label="').concat(l("aria:input"),'">\n\n            <input :arr="options" class="pcr-type" data-type="HEXA" value="').concat(s?"HEX":"HEXA",'" type="button" ').concat(a(e.interaction.hex),'>\n            <input :arr="options" class="pcr-type" data-type="RGBA" value="').concat(s?"RGB":"RGBA",'" type="button" ').concat(a(e.interaction.rgba),'>\n            <input :arr="options" class="pcr-type" data-type="HSLA" value="').concat(s?"HSL":"HSLA",'" type="button" ').concat(a(e.interaction.hsla),'>\n            <input :arr="options" class="pcr-type" data-type="HSVA" value="').concat(s?"HSV":"HSVA",'" type="button" ').concat(a(e.interaction.hsva),'>\n            <input :arr="options" class="pcr-type" data-type="CMYK" value="CMYK" type="button" ').concat(a(e.interaction.cmyk),'>\n\n            <input :ref="save" class="pcr-save" value="').concat(l("btn:save"),'" type="button" ').concat(a(e.interaction.save),' aria-label="').concat(l("aria:btn:save"),'">\n            <input :ref="cancel" class="pcr-cancel" value="').concat(l("btn:cancel"),'" type="button" ').concat(a(e.interaction.cancel),' aria-label="').concat(l("aria:btn:cancel"),'">\n            <input :ref="clear" class="pcr-clear" value="').concat(l("btn:clear"),'" type="button" ').concat(a(e.interaction.clear),' aria-label="').concat(l("aria:btn:clear"),'">\n          </div>\n        </div>\n      </div>\n    ')),u=p.interaction;return u.options.find(t=>!t.hidden&&!t.classList.add("active")),u.type=()=>u.options.find(t=>t.classList.contains("active")),p})(this),t.useAsButton&&(this._root.button=t.el),t.container.appendChild(this._root.root)}_finalBuild(){const t=this.options,e=this._root;if(t.container.removeChild(e.root),t.inline){const o=t.el.parentElement;t.el.nextSibling?o.insertBefore(e.app,t.el.nextSibling):o.appendChild(e.app)}else t.container.appendChild(e.app);t.useAsButton?t.inline&&t.el.remove():t.el.parentNode.replaceChild(e.root,t.el),t.disabled&&this.disable(),t.comparison||(e.button.style.transition="none",t.useAsButton||(e.preview.lastColor.style.transition="none")),this.hide()}_buildComponents(){const t=this,e=this.options.components,o=(t.options.sliders||"v").repeat(2),[n,i]=o.match(/^[vh]+$/g)?o:[],r=()=>this._color||(this._color=this._lastColor.clone()),s={palette:O({element:t._root.palette.picker,wrapper:t._root.palette.palette,onstop:()=>t._emit("changestop",t),onchange(o,n){if(!e.palette)return;const i=r(),{_root:s,options:a}=t,{lastColor:c,currentColor:l}=s.preview;t._recalc&&(i.s=100*o,i.v=100-100*n,i.v<0&&(i.v=0),t._updateOutput());const p=i.toRGBA().toString(0);this.element.style.background=p,this.wrapper.style.background="\n                        linear-gradient(to top, rgba(0, 0, 0, ".concat(i.a,"), transparent),\n                        linear-gradient(to left, hsla(").concat(i.h,", 100%, 50%, ").concat(i.a,"), rgba(255, 255, 255, ").concat(i.a,"))\n                    "),a.comparison?a.useAsButton||t._lastColor||(c.style.color=p):(s.button.style.color=p,s.button.classList.remove("clear"));const u=i.toHEXA().toString();for(const{el:e,color:o}of t._swatchColors)e.classList[u===o.toHEXA().toString()?"add":"remove"]("pcr-active");l.style.color=p}}),hue:O({lock:"v"===i?"h":"v",element:t._root.hue.picker,wrapper:t._root.hue.slider,onstop:()=>t._emit("changestop",t),onchange(o){if(!e.hue||!e.palette)return;const n=r();t._recalc&&(n.h=360*o),this.element.style.backgroundColor="hsl(".concat(n.h,", 100%, 50%)"),s.palette.trigger()}}),opacity:O({lock:"v"===n?"h":"v",element:t._root.opacity.picker,wrapper:t._root.opacity.slider,onstop:()=>t._emit("changestop",t),onchange(o){if(!e.opacity||!e.palette)return;const n=r();t._recalc&&(n.a=Math.round(100*o)/100),this.element.style.background="rgba(0, 0, 0, ".concat(n.a,")"),s.palette.trigger()}}),selectable:E({elements:t._root.interaction.options,className:"active",onchange(e){t._representation=e.target.getAttribute("data-type").toUpperCase(),t._recalc&&t._updateOutput()}})};this._components=s}_bindEvents(){const{_root:t,options:e}=this,o=[r(t.interaction.clear,"click",()=>this._clearColor()),r([t.interaction.cancel,t.preview.lastColor],"click",()=>{this._emit("cancel",this),this.setHSVA(...(this._lastColor||this._color).toHSVA(),!0)}),r(t.interaction.save,"click",()=>{!this.applyColor()&&!e.showAlways&&this.hide()}),r(t.interaction.result,["keyup","input"],t=>{this.setColor(t.target.value,!0)&&!this._initializingActive&&this._emit("change",this._color),t.stopImmediatePropagation()}),r(t.interaction.result,["focus","blur"],t=>{this._recalc="blur"===t.type,this._recalc&&this._updateOutput()}),r([t.palette.palette,t.palette.picker,t.hue.slider,t.hue.picker,t.opacity.slider,t.opacity.picker],["mousedown","touchstart"],()=>this._recalc=!0,{passive:!0})];if(!e.showAlways){const n=e.closeWithKey;o.push(r(t.button,"click",()=>this.isOpen()?this.hide():this.show()),r(document,"keyup",t=>this.isOpen()&&(t.key===n||t.code===n)&&this.hide()),r(document,["touchstart","mousedown"],e=>{this.isOpen()&&!l(e).some(e=>e===t.app||e===t.button)&&this.hide()},{capture:!0}))}if(e.adjustableNumbers){const e={rgba:[255,255,255,1],hsva:[360,100,100,1],hsla:[360,100,100,1],cmyk:[100,100,100,100]};u(t.interaction.result,(t,o,n)=>{const i=e[this.getColorRepresentation().toLowerCase()];if(i){const e=i[n],r=t+(e>=100?1e3*o:o);return r<=0?0:Number((r<e?r:e).toPrecision(3))}return t})}if(e.autoReposition&&!e.inline){let t=null;const n=this;o.push(r(window,["scroll","resize"],()=>{n.isOpen()&&(e.closeOnScroll&&n.hide(),null===t?(t=setTimeout(()=>t=null,100),requestAnimationFrame((function e(){n._rePositioningPicker(),null!==t&&requestAnimationFrame(e)}))):(clearTimeout(t),t=setTimeout(()=>t=null,100)))},{capture:!0}))}this._eventBindings=o}_rePositioningPicker(){const{options:t}=this;if(!t.inline&&!this._nanopop.update({container:document.body.getBoundingClientRect(),position:t.position})){const t=this._root.app,e=t.getBoundingClientRect();t.style.top="".concat((window.innerHeight-e.height)/2,"px"),t.style.left="".concat((window.innerWidth-e.width)/2,"px")}}_updateOutput(){const{_root:t,_color:e,options:o}=this;if(t.interaction.type()){const n="to".concat(t.interaction.type().getAttribute("data-type"));t.interaction.result.value="function"==typeof e[n]?e[n]().toString(o.outputPrecision):""}!this._initializingActive&&this._recalc&&this._emit("change",e)}_clearColor(t=!1){const{_root:e,options:o}=this;o.useAsButton||(e.button.style.color="rgba(0, 0, 0, 0.15)"),e.button.classList.add("clear"),o.showAlways||this.hide(),this._lastColor=null,this._initializingActive||t||(this._emit("save",null),this._emit("clear",this))}_parseLocalColor(t){const{values:e,type:o,a:n}=C(t),{lockOpacity:i}=this.options,r=void 0!==n&&1!==n;return e&&3===e.length&&(e[3]=void 0),{values:!e||i&&r?null:e,type:o}}_t(t){return this.options.i18n[t]||B.I18N_DEFAULTS[t]}_emit(t,...e){this._eventListener[t].forEach(t=>t(...e,this))}on(t,e){return this._eventListener[t].push(e),this}off(t,e){const o=this._eventListener[t]||[],n=o.indexOf(e);return~n&&o.splice(n,1),this}addSwatch(t){const{values:e}=this._parseLocalColor(t);if(e){const{_swatchColors:t,_root:o}=this,n=k(...e),i=a('<button type="button" style="color: '.concat(n.toRGBA().toString(0),'" aria-label="').concat(this._t("btn:swatch"),'"/>'));return o.swatches.appendChild(i),t.push({el:i,color:n}),this._eventBindings.push(r(i,"click",()=>{this.setHSVA(...n.toHSVA(),!0),this._emit("swatchselect",n),this._emit("change",n)})),!0}return!1}removeSwatch(t){const e=this._swatchColors[t];if(e){const{el:o}=e;return this._root.swatches.removeChild(o),this._swatchColors.splice(t,1),!0}return!1}applyColor(t=!1){const{preview:e,button:o}=this._root,n=this._color.toRGBA().toString(0);return e.lastColor.style.color=n,this.options.useAsButton||(o.style.color=n),o.classList.remove("clear"),this._lastColor=this._color.clone(),this._initializingActive||t||this._emit("save",this._color),this}destroy(){this._eventBindings.forEach(t=>s(...t)),Object.keys(this._components).forEach(t=>this._components[t].destroy())}destroyAndRemove(){this.destroy();const{root:t,app:e}=this._root;t.parentElement&&t.parentElement.removeChild(t),e.parentElement.removeChild(e),Object.keys(this).forEach(t=>this[t]=null)}hide(){return this._root.app.classList.remove("visible"),this._emit("hide",this),this}show(){return this.options.disabled||(this._root.app.classList.add("visible"),this._rePositioningPicker(),this._emit("show",this)),this}isOpen(){return this._root.app.classList.contains("visible")}setHSVA(t=360,e=0,o=0,n=1,i=!1){const r=this._recalc;if(this._recalc=!1,t<0||t>360||e<0||e>100||o<0||o>100||n<0||n>1)return!1;this._color=k(t,e,o,n);const{hue:s,opacity:a,palette:c}=this._components;return s.update(t/360),a.update(n),c.update(e/100,1-o/100),i||this.applyColor(),r&&this._updateOutput(),this._recalc=r,!0}setColor(t,e=!1){if(null===t)return this._clearColor(e),!0;const{values:o,type:n}=this._parseLocalColor(t);if(o){const t=n.toUpperCase(),{options:i}=this._root.interaction,r=i.find(e=>e.getAttribute("data-type")===t);if(r&&!r.hidden)for(const t of i)t.classList[t===r?"add":"remove"]("active");return!!this.setHSVA(...o,e)&&this.setColorRepresentation(t)}return!1}setColorRepresentation(t){return t=t.toUpperCase(),!!this._root.interaction.options.find(e=>e.getAttribute("data-type").startsWith(t)&&!e.click())}getColorRepresentation(){return this._representation}getColor(){return this._color}getSelectedColor(){return this._lastColor}getRoot(){return this._root}disable(){return this.hide(),this.options.disabled=!0,this._root.button.classList.add("disabled"),this}enable(){return this.options.disabled=!1,this._root.button.classList.remove("disabled"),this}}j(B,"utils",n),j(B,"version",h.a),j(B,"I18N_DEFAULTS",{"ui:dialog":"color picker dialog","btn:toggle":"toggle color picker dialog","btn:swatch":"color swatch","btn:last-color":"use previous color","btn:save":"Save","btn:cancel":"Cancel","btn:clear":"Clear","aria:btn:save":"save and close","aria:btn:cancel":"cancel and close","aria:btn:clear":"clear and close","aria:input":"color input field","aria:palette":"color selection area","aria:hue":"hue selection slider","aria:opacity":"selection slider"}),j(B,"DEFAULT_OPTIONS",{appClass:null,theme:"classic",useAsButton:!1,padding:8,disabled:!1,comparison:!0,closeOnScroll:!1,outputPrecision:0,lockOpacity:!1,autoReposition:!0,container:"body",components:{interaction:{}},i18n:{},swatches:null,inline:!1,sliders:null,default:"#42445a",defaultRepresentation:null,position:"bottom-middle",adjustableNumbers:!0,showAlways:!1,closeWithKey:"Escape"}),j(B,"create",t=>new B(t)),e.default=B}]).default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const ko=__webpack_require__(0),jssCompiler_1=__webpack_require__(48);ko.bindingHandlers.jss={update:(element,valueAccessor)=>{const styleSheet=ko.unwrap(valueAccessor());if(!styleSheet)return void(element.innerHTML="");const css=(new jssCompiler_1.JssCompiler).compile(styleSheet);element.innerHTML=css}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const ko=__webpack_require__(0),Utils=__webpack_require__(6),plugins_1=__webpack_require__(138),styles_1=__webpack_require__(8),jssCompiler_1=__webpack_require__(48);ko.bindingHandlers.shadowPreview={update:(element,valueAccessor)=>{const shadowContract=ko.unwrap(valueAccessor()),key=Utils.camelCaseToKebabCase(shadowContract.key).replace("/","-"),shadowStyleRules=plugins_1.ShadowStylePlugin.contractToStyleRules(shadowContract),style=new styles_1.Style(key);style.addRules(shadowStyleRules);const styleSheet=new styles_1.StyleSheet;styleSheet.styles.push(style);const css=(new jssCompiler_1.JssCompiler).compile(styleSheet);element.innerHTML=css}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const ko=__webpack_require__(0),Utils=__webpack_require__(6),linearGradientContract_1=__webpack_require__(224),styles_1=__webpack_require__(8),jssCompiler_1=__webpack_require__(48);ko.bindingHandlers.gradientPreview={update:(element,valueAccessor)=>{const linearGradientContract=ko.unwrap(valueAccessor()),key=Utils.camelCaseToKebabCase(linearGradientContract.key).replace("/","-"),gradientStyleRule=new styles_1.StyleRule("background-image",linearGradientContract_1.getLinearGradientString(linearGradientContract)),style=new styles_1.Style(key);style.addRule(gradientStyleRule);const styleSheet=new styles_1.StyleSheet;styleSheet.styles.push(style);const css=(new jssCompiler_1.JssCompiler).compile(styleSheet);element.innerHTML=css}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StyleModule=void 0;const styleService_1=__webpack_require__(20),defaultStyleCompiler_1=__webpack_require__(97),bindingHandlers_styled_1=__webpack_require__(299);exports.StyleModule=class{register(injector){injector.bindSingleton("styleService",styleService_1.StyleService),injector.bindSingleton("styleCompiler",defaultStyleCompiler_1.DefaultStyleCompiler),injector.bindToCollection("autostart",bindingHandlers_styled_1.StyledBindingHandler)}}},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(907),exports)},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.StyleEditor=void 0;const ko=__webpack_require__(0),styleEditor_html_1=__webpack_require__(908),decorators_1=__webpack_require__(2),styleHelper_1=__webpack_require__(226);let StyleEditor=class{constructor(viewManager,eventManager){this.viewManager=viewManager,this.eventManager=eventManager,this.styleName=ko.observable("New style"),this.selectedState=ko.observable(),this.elementStates=ko.observableArray(),this.elementStyleTypography=ko.observable(),this.elementStyleTransform=ko.observable(),this.elementStyleTransition=ko.observable(),this.elementStyleBackground=ko.observable(),this.elementStyleShadow=ko.observable(),this.elementStyleAnimation=ko.observable(),this.elementStyleBox=ko.observable(),this.elementStyleSize=ko.observable(),this.allowBlockStyles=ko.observable(),this.working=ko.observable(!0)}initialize(){this.styleName(this.elementStyle.displayName),this.allowBlockStyles(!this.elementStyle.key.startsWith("globals/body")),this.updateObservables();const states=this.elementStyle.allowedStates;this.elementStates(states),states&&states.length>0&&this.selectedState.subscribe(this.onStateSelected),this.styleName.subscribe(this.onStyleNameUpdate),this.eventManager.addEventListener("onViewportChange",this.updateObservables)}scheduleUpdate(){clearTimeout(this.updateTimeout),this.updateTimeout=setTimeout(()=>this.onUpdate(this.elementStyle),500)}updateObservables(){this.working(!0);const style=this.getStyleForSelectedState();this.elementStyleTypography(style.typography),this.elementStyleTransform(style.transform),this.elementStyleTransition(style.transition),this.elementStyleBackground(style.background),this.elementStyleShadow(style.shadow),this.elementStyleAnimation(style.animation),this.elementStyleBox(style),this.elementStyleSize(style.size),this.working(!1)}onStateSelected(state){this.currentState=state,this.updateObservables()}getStyleForSelectedState(){let style;return this.currentState?this.elementStyle.states?(this.elementStyle.states[this.currentState]||(this.elementStyle.states[this.currentState]={}),style=this.elementStyle.states[this.currentState]):(style={},this.elementStyle.states={},this.elementStyle.states[this.currentState]=style):style=this.elementStyle,style}onStyleNameUpdate(name){this.elementStyle.displayName=name,this.scheduleUpdate()}onBackgroundUpdate(pluginConfig){const style=this.getStyleForSelectedState();styleHelper_1.StyleHelper.setPluginConfig(style,"background",pluginConfig,null),this.scheduleUpdate()}onShadowUpdate(pluginConfig){const style=this.getStyleForSelectedState();styleHelper_1.StyleHelper.setPluginConfig(style,"shadow",pluginConfig,null),this.scheduleUpdate()}onAnimationUpdate(pluginConfig){const style=this.getStyleForSelectedState();styleHelper_1.StyleHelper.setPluginConfig(style,"animation",pluginConfig,null),this.scheduleUpdate()}onBoxUpdate(pluginConfig){const style=this.getStyleForSelectedState();Object.assign(style,pluginConfig),this.scheduleUpdate()}onSizeUpdate(pluginConfig){const style=this.getStyleForSelectedState();styleHelper_1.StyleHelper.setPluginConfig(style,"size",pluginConfig,null),this.scheduleUpdate()}onTypographyUpdate(pluginConfig){const style=this.getStyleForSelectedState();styleHelper_1.StyleHelper.setPluginConfig(style,"typography",pluginConfig,null),this.scheduleUpdate()}onTransformUpdate(pluginConfig){const style=this.getStyleForSelectedState();styleHelper_1.StyleHelper.setPluginConfig(style,"transform",pluginConfig,null),this.scheduleUpdate()}onTransitionUpdate(pluginConfig){const style=this.getStyleForSelectedState();styleHelper_1.StyleHelper.setPluginConfig(style,"transition",pluginConfig,null),this.scheduleUpdate()}};__decorate([decorators_1.Param(),__metadata("design:type",Object)],StyleEditor.prototype,"elementStyle",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],StyleEditor.prototype,"onUpdate",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],StyleEditor.prototype,"initialize",null),StyleEditor=__decorate([decorators_1.Component({selector:"style-editor",template:styleEditor_html_1.default}),__metadata("design:paramtypes",[Object,Object])],StyleEditor),exports.StyleEditor=StyleEditor},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<fieldset class="form flex-item flex-item-grow" data-bind="scrollable: true">\r\n    <div class="form-group form-group-collapsible">\r\n        <label class="form-label">\r\n            <a href="#" class="form-group-toggle" title="Toggle section" data-bind="collapse: \'#miscellaneousCollapse\'"></a>\r\n            <b>Main</b>\r\n        </label>\r\n        <div id="miscellaneousCollapse" class="collapse form-group-collapse">\r\n            <div class="form-group">\r\n                <button class="btn btn-info" type="button" data-bind="tooltip: \'Name of the style\'"></button>\r\n                <label for="styleName">Style name</label>\r\n                <input id="styleName" type="text" class="form-control" spellcheck="false" data-bind="textInput: styleName, focus: true">\r\n            </div>\r\n            \x3c!-- ko if: elementStates --\x3e\r\n            <div class="form-group">\r\n                <label for="textTransform">State</label>\r\n                <select id="textTransform" class="form-control" data-bind="options: elementStates, value: selectedState, optionsCaption: \'default\'"></select>\r\n            </div>\r\n            \x3c!--/ko --\x3e\r\n        </div>\r\n    </div>\r\n\r\n    \x3c!-- ko ifnot: working --\x3e\r\n\r\n    <typography params="{ typography: elementStyleTypography, onUpdate: onTypographyUpdate }"></typography>\r\n\r\n    \x3c!-- ko if: allowBlockStyles --\x3e\r\n    \x3c!-- <gradient-editor></gradient-editor> --\x3e\r\n    <background params="{ background: elementStyleBackground, onUpdate: onBackgroundUpdate }"></background>\r\n    <shadow-editor-group params="{ shadow: elementStyleShadow, onUpdate: onShadowUpdate }"></shadow-editor-group>\r\n    <animation params="{ animation: elementStyleAnimation, onUpdate: onAnimationUpdate }"></animation>\r\n    <transition params="{ transition: elementStyleTransition, onUpdate: onTransitionUpdate }"></transition>\r\n    <transform params="{ transform: elementStyleTransform, onUpdate: onTransformUpdate }"></transform>\r\n\r\n    <size-editor params="{ features: \'minMaxWidth,minMaxHeight\', sizeConfig: elementStyleSize, onUpdate: onSizeUpdate }"></size-editor>\r\n    <div class="form-group form-group-collapsible">\r\n        <label class="form-label">\r\n            <a href="#" class="form-group-toggle" title="Toggle section" data-bind="collapse: \'#boxCollapse\'"></a>\r\n            <b>Box</b>\r\n        </label>\r\n        <div id="boxCollapse" class="collapse form-group-collapse">\r\n            <box params="{ box: elementStyleBox, onUpdate: onBoxUpdate }"></box>\r\n        </div>\r\n    </div>\r\n    \x3c!-- /ko --\x3e\r\n\r\n    \x3c!-- /ko --\x3e\r\n</fieldset>'},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.StyleGuide=void 0;const ko=__webpack_require__(0),Utils=__webpack_require__(19),_=__webpack_require__(85),styleGuide_html_1=__webpack_require__(910),decorators_1=__webpack_require__(2),styles_1=__webpack_require__(8),ui_1=__webpack_require__(45),styleService_1=__webpack_require__(20);let StyleGuide=class{constructor(styleService,viewManager,eventManager,styleGroups,styleCompiler){this.styleService=styleService,this.viewManager=viewManager,this.eventManager=eventManager,this.styleGroups=styleGroups,this.styleCompiler=styleCompiler,this.actives={},this.styles=ko.observable(),this.colors=ko.observableArray([]),this.shadows=ko.observableArray([]),this.gradients=ko.observableArray([]),this.fonts=ko.observableArray([]),this.buttons=ko.observableArray([]),this.cards=ko.observableArray([]),this.pictures=ko.observableArray([]),this.videoPlayers=ko.observableArray([]),this.textBlocks=ko.observableArray([]),this.textStyles=ko.observableArray([]),this.navBars=ko.observableArray([]),this.uiComponents=ko.observableArray([])}loadStyles(){return __awaiter(this,void 0,void 0,(function*(){this.viewManager.mode=ui_1.ViewManagerMode.selecting,this.applyChanges(),this.ownerDocument=this.viewManager.getHostDocument(),this.attach()}))}addFonts(){return __awaiter(this,void 0,void 0,(function*(){const view={heading:"Fonts",component:{name:"google-fonts",params:{onSelect:()=>{this.viewManager.closeView(),this.applyChanges()}}},resize:"vertically horizontally"};this.viewManager.openViewAsPopup(view)}))}removeStyle(contract){return __awaiter(this,void 0,void 0,(function*(){if(yield this.styleService.removeStyle(contract.key),contract.key.startsWith("components/")){const componentName=contract.key.split("/")[1];yield this.onUpdateStyle(componentName)}else this.applyChanges()}))}addColor(){return __awaiter(this,void 0,void 0,(function*(){const variationName=""+Utils.identifier(),addedItem=yield this.styleService.addColorVariation(variationName),colors=this.colors();colors.push(addedItem),this.colors(this.sortByDisplayName(colors)),this.selectColor(addedItem)}))}addGradient(){return __awaiter(this,void 0,void 0,(function*(){const variationName=""+Utils.identifier(),addedItem=yield this.styleService.addGradientVariation(variationName),gradients=this.gradients();gradients.push(addedItem),this.gradients(this.sortByDisplayName(gradients)),this.selectGradient(addedItem)}))}addShadow(){return __awaiter(this,void 0,void 0,(function*(){const variationName=""+Utils.identifier(),addedItem=yield this.styleService.addShadowVariation(variationName),shadows=this.shadows();shadows.push(addedItem),this.shadows(this.sortByDisplayName(shadows)),this.selectShadow(addedItem)}))}removeColor(color){return __awaiter(this,void 0,void 0,(function*(){yield this.styleService.removeStyle(color.key),this.applyChanges()}))}removeGradient(gradient){return __awaiter(this,void 0,void 0,(function*(){yield this.styleService.removeStyle(gradient.key),this.applyChanges()}))}selectColor(color){const view={heading:"Color",component:{name:"color-editor",params:{selectedColor:color,onSelect:color=>__awaiter(this,void 0,void 0,(function*(){yield this.styleService.updateStyle(color),this.applyChanges()}))}},resize:"vertically horizontally"};return this.viewManager.openViewAsPopup(view),!0}selectGradient(gradient){const view={heading:"Gradient",component:{name:"gradient-editor",params:{selectedGradient:gradient,onSelect:gradient=>__awaiter(this,void 0,void 0,(function*(){yield this.styleService.updateStyle(gradient),this.applyChanges()}))}},resize:"vertically horizontally"};return this.viewManager.openViewAsPopup(view),!0}selectShadow(shadow){const view={heading:"Shadow",component:{name:"shadow-editor",params:{selectedShadow:shadow,onSelect:shadow=>__awaiter(this,void 0,void 0,(function*(){yield this.styleService.updateStyle(shadow),this.applyChanges()}))}},resize:"vertically horizontally"};return this.viewManager.openViewAsPopup(view),!0}selectStyle(style){const view={heading:style.displayName,component:{name:"style-editor",params:{elementStyle:style,onUpdate:()=>__awaiter(this,void 0,void 0,(function*(){if(this.styleService.updateStyle(style),style.key.startsWith("components/")){const componentName=style.key.split("/")[1];yield this.onUpdateStyle(componentName)}this.applyChanges()}))}},resize:"vertically horizontally"};return this.viewManager.openViewAsPopup(view),!0}addTextStyleVariation(){return __awaiter(this,void 0,void 0,(function*(){const variationName=""+Utils.identifier().toLowerCase(),addedItem=yield this.styleService.addTextStyleVariation(variationName),textStyles=this.textStyles();textStyles.push(addedItem),this.textStyles(this.sortByDisplayName(textStyles)),this.selectStyle(addedItem)}))}onSnippetSelected(snippet){return __awaiter(this,void 0,void 0,(function*(){console.log("Snippet selected: ",snippet),yield this.styleService.mergeStyles(snippet.stylesConfig),yield this.openInEditor(snippet.stylesType.split("/").pop(),snippet)}))}openInEditor(componentName,snippet){return __awaiter(this,void 0,void 0,(function*(){const variationName=""+Utils.identifier().toLowerCase(),addedStyleKey=yield this.styleService.addComponentVariation(componentName,variationName,snippet),addedStyle=yield this.styleService.getStyleByKey(addedStyleKey);this.selectStyle(addedStyle),yield this.onUpdateStyle(componentName)}))}onUpdateStyle(componentName){return __awaiter(this,void 0,void 0,(function*(){const old=this.uiComponents().find(c=>c.name===componentName);if(old){const updatedItem=(yield this.getComponentsStyles()).find(c=>c.name===componentName);this.uiComponents.replace(old,updatedItem)}}))}applyChanges(){return __awaiter(this,void 0,void 0,(function*(){const styles=yield this.styleService.getStyles(),fonts=styles.fonts?Object.values(styles.fonts):[];this.fonts(fonts);const colors=styles.colors?Object.values(styles.colors):[];this.colors(this.sortByDisplayName(colors));const gradients=styles.gradients?Object.values(styles.gradients):[];this.gradients(this.sortByDisplayName(gradients));const shadows=styles.shadows?Object.values(styles.shadows).filter(x=>"shadows/none"!==x.key):[];this.shadows(this.sortByDisplayName(shadows));const textStylesVariations=yield this.styleService.getVariations("globals","body");this.textStyles(this.sortByDisplayName(textStylesVariations));const components=yield this.getComponentsStyles();this.uiComponents(components),this.styles(styles);const styleManager=new styles_1.StyleManager(this.eventManager),styleSheet=yield this.styleCompiler.getStyleSheet();styleManager.setStyleSheet(styleSheet)}))}getComponentsStyles(){return __awaiter(this,void 0,void 0,(function*(){const styles=yield this.styleService.getStyles();return Object.keys(styles.components).map(componentName=>{const groupMetadata=this.styleGroups.find(item=>item.name==="components_"+componentName);if(!groupMetadata||!groupMetadata.styleTemplate)return;const componentStyles=styles.components[componentName],states=this.styleService.getAllowedStates(componentStyles),variations=Object.keys(componentStyles).map(variationName=>{const variationContract=componentStyles[variationName];return states&&"default"!==variationName&&(variationContract.allowedStates=states),variationContract});return{name:componentName,displayName:groupMetadata.groupName,variations:variations,itemTemplate:groupMetadata.styleTemplate}}).filter(item=>void 0!==item)}))}sortByDisplayName(items){return _.sortBy(items,["displayName"])}keyToClass(key){return Utils.camelCaseToKebabCase(key).replace("/","-")}attach(){this.ownerDocument.addEventListener("mousemove",this.onPointerMove.bind(this),!0),this.ownerDocument.addEventListener("scroll",this.onWindowScroll.bind(this)),this.ownerDocument.addEventListener("mousedown",this.onPointerDown,!0)}dispose(){this.ownerDocument.removeEventListener("mousemove",this.onPointerMove.bind(this),!0),this.ownerDocument.removeEventListener("scroll",this.onWindowScroll.bind(this)),this.ownerDocument.removeEventListener("mousedown",this.onPointerDown,!0)}onWindowScroll(){this.viewManager.mode!==ui_1.ViewManagerMode.dragging&&this.viewManager.mode!==ui_1.ViewManagerMode.pause&&(this.scrolling||this.viewManager.clearContextualEditors(),this.scrolling=!0,this.scrollTimeout&&clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(this.resetScrolling.bind(this),400))}resetScrolling(){this.scrolling=!1,this.renderHighlightedElements()}renderHighlightedElements(){if(this.scrolling)return;const elements=Utils.elementsFromPoint(this.ownerDocument,this.pointerX,this.pointerY);this.rerenderEditors(elements)}isStyleSelectable(contextualEditor){return!!contextualEditor&&contextualEditor.selectCommands.concat(contextualEditor.deleteCommand).length>0}onPointerDown(event){if(this.viewManager.mode===ui_1.ViewManagerMode.pause)return event.preventDefault(),void event.stopPropagation();if(0!==event.button)return;if(this.viewManager.mode!==ui_1.ViewManagerMode.selecting&&this.viewManager.mode!==ui_1.ViewManagerMode.selected&&this.viewManager.mode!==ui_1.ViewManagerMode.configure)return;const element=this.activeHighlightedElement;if(!element)return;const styleable=element.styleable;if(!styleable)return;const style=styleable.style;if(!style)return;const selectedElement=this.viewManager.getSelectedElement();if(selectedElement&&selectedElement.element===element){const editCommand=this.getContextualEditor(element,styleable).selectCommands.find(command=>"edit"===command.name);return void(editCommand&&editCommand.callback())}const contextualEditor=this.getContextualEditor(element,styleable);if(!this.isStyleSelectable(contextualEditor))return;const config={element:element,text:style.displayName,color:contextualEditor.color};this.viewManager.setSelectedElement(config,contextualEditor)}onPointerMove(event){event.preventDefault(),event.stopPropagation(),this.pointerX=event.clientX,this.pointerY=event.clientY,this.renderHighlightedElements()}getContextualEditor(element,styleable){const style=styleable.style,styleContextualEditor={color:"#607d8b",deleteCommand:null,selectCommands:[],element:element};return style.key.startsWith("globals/")&&!style.key.startsWith("globals/body/")||style.key.endsWith("/default")||-1!==style.key.indexOf("/navbar/default/")||(styleContextualEditor.deleteCommand={tooltip:"Delete variation",color:"#607d8b",component:{name:"confirmation",params:{getMessage:()=>__awaiter(this,void 0,void 0,(function*(){const styleNames=(yield this.styleService.checkStyleIsInUse(style.key)).map(x=>x.displayName).join('", "');let message="Are you sure you want to delete this style?";return styleNames&&(message+=` It is referenced by "${styleNames}".`),message})),onConfirm:()=>__awaiter(this,void 0,void 0,(function*(){this.removeStyle(style),this.viewManager.clearContextualEditors(),this.viewManager.notifySuccess("Styles",`Style "${style.displayName}" was deleted.`)})),onDecline:()=>{this.viewManager.clearContextualEditors()}}}}),style.key.startsWith("colors/")||style.key.startsWith("fonts/")||style.key.startsWith("shadows/")||style.key.startsWith("gradients/")||style.key.includes("/components/")||styleContextualEditor.selectCommands.push({name:"background",tooltip:"Change background",iconClass:"paperbits-drop",position:"top right",color:"#607d8b",callback:()=>{styleable.toggleBackground()}}),style.key.startsWith("colors/")||style.key.startsWith("shadows/")||style.key.startsWith("gradients/")?styleContextualEditor.selectCommands.push({name:"edit",tooltip:"Edit variation",iconClass:"paperbits-edit-72",position:"top right",color:"#607d8b",callback:()=>{style.key.startsWith("gradients/")?this.selectGradient(style):style.key.startsWith("colors/")?this.selectColor(style):this.selectShadow(style)}}):style.key.startsWith("fonts/")||styleContextualEditor.selectCommands.push({name:"edit",tooltip:"Edit variation",iconClass:"paperbits-edit-72",position:"top right",color:"#607d8b",callback:()=>{const view={heading:style.displayName,component:{name:"style-editor",params:{elementStyle:style,onUpdate:()=>__awaiter(this,void 0,void 0,(function*(){if(this.styleService.updateStyle(style),style.key.startsWith("components/")){const componentName=style.key.split("/")[1];yield this.onUpdateStyle(componentName)}this.applyChanges()}))}},resize:"vertically horizontally"};this.viewManager.openViewAsPopup(view)}}),styleContextualEditor}rerenderEditors(elements){return __awaiter(this,void 0,void 0,(function*(){let highlightedElement,highlightedText,highlightColor;const tobeDeleted=Object.keys(this.actives);for(let i=elements.length-1;i>=0;i--){const element=elements[i],styleable=element.styleable;if(!styleable)continue;const style=styleable.style,index=tobeDeleted.indexOf(style.key);tobeDeleted.splice(index,1),highlightedElement=element,highlightedText=style.displayName;const active=this.actives[style.key],contextualEditor=this.getContextualEditor(element,styleable);highlightColor=contextualEditor.color,active&&element===active.element||(this.viewManager.setContextualEditor(style.key,contextualEditor),this.actives[style.key]={element:element})}tobeDeleted.forEach(x=>{this.viewManager.removeContextualEditor(x),delete this.actives[x]}),this.activeHighlightedElement!==highlightedElement&&(this.activeHighlightedElement=highlightedElement,this.viewManager.setHighlight({element:highlightedElement,text:highlightedText,color:highlightColor}))}))}};__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],StyleGuide.prototype,"loadStyles",null),__decorate([decorators_1.OnDestroyed(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],StyleGuide.prototype,"dispose",null),StyleGuide=__decorate([decorators_1.Component({selector:"style-guide",template:styleGuide_html_1.default}),__metadata("design:paramtypes",[styleService_1.StyleService,Object,Object,Array,Object])],StyleGuide),exports.StyleGuide=StyleGuide},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="style-guide container" data-bind="if: styles">\r\n    \x3c!-- ko with: styles --\x3e\r\n    <article>\r\n        <h2 class="heading">Fonts</h2>\r\n        <div class="row">\r\n            <div class="col col-md-12 samples">\r\n                \x3c!-- ko foreach: { data: $component.fonts, as: \'font\' } --\x3e\r\n                <div class="style-card font style-card-framed" data-bind="styleable: font">\r\n                    <div class="font-sample" data-bind="style: { \'font-family\': font.family }">\r\n                        Abc\r\n                    </div>\r\n                    <div class="style-card-label" data-bind="text: font.displayName"></div>\r\n                </div>\r\n                \x3c!-- /ko --\x3e\r\n\r\n                <div class="style-card style-card-empty">\r\n                    <button class="btn-round" data-bind="click: $component.addFonts" aria-label="Add font"></button>\r\n                    <div class="style-card-label">\r\n                        Add font\r\n                    </div>\r\n                </div>\r\n            </div>\r\n    </div></article>\r\n\r\n    <article>\r\n        <h2 class="heading">Typography</h2>\r\n        <div class="row">\r\n            <div class="col col-md-12 samples">\r\n                \x3c!--ko foreach: { data: $component.textStyles, as: \'textStyle\' }--\x3e\r\n                <div class="style-card style-card-framed" data-bind="styleable: textStyle">\r\n                    <div class="style-card-body">\r\n                        <span data-bind="stylePreview: textStyle">\r\n                            Abc\r\n                        </span>\r\n                        <span class="style-card-label" data-bind="text: textStyle.displayName"></span>\r\n                    </div>\r\n                </div>\r\n                \x3c!--/ko--\x3e\r\n                <div class="style-card style-card-empty">\r\n                    <button class="btn-round" data-bind="click: $component.addTextStyleVariation" aria-label="Add variation"></button>\r\n                    <div class="style-card-label">\r\n                        Add variation\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="row">\r\n            <div class="col-md-6">\r\n                <article>\r\n                    <div class="style-card" data-bind="styleable: globals.h1.default">\r\n                        <div class="style-card-body">\r\n                            <h1 data-bind="stylePreview: \'globals/h1/default\'">Heading level 1</h1>\r\n                        </div>\r\n                    </div>\r\n                    <div class="style-card" data-bind="styleable: \'globals/h2/default\'">\r\n                        <div class="style-card-body">\r\n                            <h2 data-bind="stylePreview: globals.h2.default">Heading level 2</h2>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class="style-card" data-bind="styleable: globals.h3.default">\r\n                        <div class="style-card-body">\r\n                            <h3 data-bind="stylePreview: \'globals/h3/default\'">Heading level 3</h3>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class="style-card" data-bind="styleable: \'globals/h4/default\'">\r\n                        <div class="style-card-body">\r\n                            <h4 data-bind="stylePreview: \'globals/h4/default\'">Heading level 4</h4>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class="style-card" data-bind="styleable: \'globals/h5/default\'">\r\n                        <div class="style-card-body">\r\n                            <h5 data-bind="stylePreview: \'globals/h5/default\'">Heading level 5</h5>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class="style-card" data-bind="styleable: globals.h6.default">\r\n                        <div class="style-card-body">\r\n                            <h6 data-bind="stylePreview: \'globals/h6/default\'">Heading level 6</h6>\r\n                        </div>\r\n                    </div>\r\n                </article>\r\n            </div>\r\n\r\n            <div class="col">\r\n                <article>\r\n                    <div class="style-card" data-bind="styleable: globals.p.default">\r\n                        <div class="style-card-body">\r\n                            <p data-bind="stylePreview: \'globals/p/default\'">\r\n                                Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor\r\n                                incididunt\r\n                                ut\r\n                                labore\r\n                                et\r\n                                dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris\r\n                                nisi ut\r\n                                aliquip\r\n                                ex ea\r\n                                commodo consequat.\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </article>\r\n\r\n                <article>\r\n                    <div class="style-card" data-bind="styleable: globals.a.default">\r\n                        <div class="style-card-body">\r\n                            <a href="#" class="no-pointer-events" data-bind="stylePreview: \'globals/a/default\'">Regular link</a>\r\n                        </div>\r\n                    </div>\r\n                </article>\r\n\r\n                <article>\r\n                    <div class="style-card" data-bind="styleable: \'globals/blockquote/default\'">\r\n                        <div class="style-card-body">\r\n                            <blockquote data-bind="stylePreview: \'globals/blockquote/default\'">\r\n                                Typography is the craft of endowing human language with a durable visual form. <br>\r\n                                - Robert Bringhurst\r\n                            </blockquote>\r\n                        </div>\r\n                    </div>\r\n                </article>\r\n\r\n                <article>\r\n                    <div class="style-card" data-bind="styleable: globals.pre.default">\r\n                        <div class="style-card-body">\r\n                            <pre data-bind="stylePreview: \'globals/pre/default\'">class PictureModel {    \r\n    sourceKey: string;    \r\n    caption: string;\r\n}</pre>\r\n                        </div>\r\n                    </div>\r\n                </article>\r\n            </div>\r\n        </div>\r\n        <div class="row">\r\n            <div class="col-md-6">\r\n                <div class="style-card" data-bind="styleable: globals.ul.default">\r\n                    <div class="style-card-body">\r\n                        <ul class="style-card" data-bind="stylePreview: \'globals/ul/default\'">\r\n                            <li>\r\n                                List item 1\r\n                            </li>\r\n                            <li>\r\n                                List item 2\r\n                            </li>\r\n                            <li>\r\n                                List item 3\r\n                                <ul>\r\n                                    <li>\r\n                                        Nested list item 1\r\n                                    </li>\r\n                                    <li>\r\n                                        Nested list item 2\r\n                                    </li>\r\n                                </ul>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="col-md-6">\r\n                <div class="style-card" data-bind="styleable: globals.ol.default">\r\n                    <div class="style-card-body">\r\n                        <ol class="style-card" data-bind="stylePreview: \'globals/ol/default\'">\r\n                            <li>\r\n                                List item 1\r\n                            </li>\r\n                            <li>\r\n                                List item 2\r\n                            </li>\r\n                            <li>\r\n                                List item 3\r\n                                <ol>\r\n                                    <li>\r\n                                        Nested list item 1\r\n                                    </li>\r\n                                    <li>\r\n                                        Nested list item 2\r\n                                    </li>\r\n                                </ol>\r\n                            </li>\r\n                        </ol>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </article>\r\n\r\n    <article>\r\n        <h2 class="heading">Colors</h2>\r\n        <div class="samples">\r\n            \x3c!-- ko foreach: { data: $component.colors, as: \'color\' } --\x3e\r\n            <div class="sample style-card" data-bind="styleable: color">\r\n                <div tabindex="0" class="style-card-square pseudo-transparent-bckg" data-bind="attr: { title: color.displayName }">\r\n                    <div class="fit" data-bind="style: { background: color.value }"></div>\r\n                </div>\r\n                <span class="style-card-label" data-bind="text: color.displayName"></span>\r\n            </div>\r\n            \x3c!--/ko --\x3e\r\n            <div class="style-card style-card-empty">\r\n                <button class="btn-round" data-bind="click: $component.addColor" aria-label="Add color"></button>\r\n                <div class="style-card-label">\r\n                    Add color\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </article>\r\n\r\n    <article>\r\n        <h2 class="heading">\r\n            Gradients\r\n        </h2>\r\n        <div class="samples">\r\n            \x3c!-- ko foreach: { data: $component.gradients, as: \'gradient\' } --\x3e\r\n            <div class="sample style-card" data-bind="styleable: gradient">\r\n                <style data-bind="gradientPreview: gradient"></style>\r\n                <div class="style-card-square" data-bind="css: $component.keyToClass(gradient.key)"></div>\r\n                <span class="style-card-label" data-bind="text: gradient.displayName"></span>\r\n            </div>\r\n            \x3c!--/ko --\x3e\r\n            <div class="style-card style-card-empty">\r\n                <button class="btn-round" data-bind="click: $component.addGradient" aria-label="Add gradient"></button>\r\n                <div class="style-card-label">\r\n                    Add gradient\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </article>\r\n\r\n    <article>\r\n        <h2 class="heading">Shadows</h2>\r\n        <div class="samples">\r\n            \x3c!-- ko foreach: { data: $component.shadows, as: \'shadow\' } --\x3e\r\n            <div class="sample style-card" data-bind="styleable: shadow">\r\n                <style data-bind="shadowPreview: shadow"></style>\r\n                <div class="style-card-square" data-bind="css: $component.keyToClass(shadow.key)"></div>\r\n                <span class="style-card-label" data-bind="text: shadow.displayName"></span>\r\n            </div>\r\n            \x3c!--/ko --\x3e\r\n            <div class="style-card style-card-empty">\r\n                <button class="btn-round" data-bind="click: $component.addShadow" aria-label="Add shadow"></button>\r\n                <div class="style-card-label">\r\n                    Add shadow\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </article>\r\n\r\n    <article>\r\n        <h2 class="heading">Form controls</h2>\r\n        <div class="row">\r\n            <div class="col col-md-3">\r\n                <div class="style-card" data-bind="styleable: components.formControl.default">\r\n                    <div class="style-card-body">\r\n                        <div class="form-group">\r\n                            <label aria-hidden="true" tabindex="-1">Label</label>\r\n                            <input type="text" class="form-control no-pointer-events" value="Input value" data-bind="stylePreview:components.formControl.default" tabindex="-1" aria-hidden="true">\r\n                        </div>\r\n                    </div>\r\n                    <span class="style-card-label" data-bind="text: components.formControl.default.displayName"></span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        \x3c!-- <div class="row">\r\n            <div class="col col-md-2 d-flex align-items-center category-name">\r\n                Disabled\r\n            </div>\r\n            <div class="col-md-3">\r\n                <div class="form-group">\r\n                    <label>Label</label>\r\n                    <input type="text" class="form-control" disabled value="Input value" data-bind="stylePreview:components.formControl.default" />\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="row">\r\n            <div class="col col-md-2 d-flex align-items-center category-name">\r\n                Success\r\n            </div>\r\n            <div class="col-md-3">\r\n                <div class="form-group">\r\n                    <label>Label</label>\r\n                    <input type="text" class="form-control is-valid" value="Input value" data-bind="stylePreview:components.formControl.default" />\r\n                    <div class="valid-feedback">\r\n                        Looks good!\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="row">\r\n            <div class="col col-md-2 d-flex align-items-center category-name">\r\n                Error\r\n            </div>\r\n            <div class="col-md-3">\r\n                <div class="form-group">\r\n                    <label>Label</label>\r\n                    <input type="text" class="form-control is-invalid" value="Input value" data-bind="stylePreview:components.formControl.default" />\r\n                    <div class="invalid-feedback">\r\n                        Please fix input errors.\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div> --\x3e\r\n        \x3c!-- <input type="text" value="Input value" data-bind="stylePreview:components.formControl.default" />\r\n\r\n        <textarea data-bind="stylePreview:components.formControl.default">Text area content</textarea> --\x3e\r\n    </article>\r\n\r\n    \x3c!--ko foreach: { data: $component.uiComponents, as: \'item\' }--\x3e\r\n    <article>\r\n        <h2 class="heading" data-bind="text: item.displayName">Component</h2>\r\n        <div class="row">\r\n            <div class="col col-md-12 samples">\r\n                \x3c!--ko foreach: { data: item.variations, as: \'variation\' }--\x3e\r\n                <div class="sample style-card" data-bind="styleable: variation">\r\n                    <div class="style-card-body" data-bind="itemTemplate: $parent.itemTemplate"></div>\r\n                    <span class="style-card-label" data-bind="text: variation.displayName"></span>\r\n                </div>\r\n                \x3c!--/ko--\x3e\r\n                <div class="style-card style-card-empty">\r\n                    \x3c!-- <a href="#" class="btn-round" data-bind="balloon: { component: { name: \'style-snippet-selector\', params: { snippetType: \'components/\' + item.name, onSelect: $component.onSnippetSelected } } }">\r\n                        <i class="paperbits-icon paperbits-color"></i>\r\n                    </a> --\x3e\r\n                    <button class="btn-round" data-bind="click: $component.openInEditor.bind($data, item.name)" aria-label="Add variation"></button>\r\n                    <div class="style-card-label">\r\n                        Add variation\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </article>\r\n    \x3c!--/ko--\x3e\r\n\r\n    \x3c!-- /ko --\x3e\r\n</div>'},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.BoxEditor=void 0;const ko=__webpack_require__(0),boxEditor_html_1=__webpack_require__(912),decorators_1=__webpack_require__(2);let BoxEditor=class{constructor(){this.box=ko.observable(),this.features="margin,padding,border",this.marginEnabled=ko.observable(),this.marginTop=ko.observable(),this.marginLeft=ko.observable(),this.marginRight=ko.observable(),this.marginBottom=ko.observable(),this.borderEnabled=ko.observable(),this.borderTop=ko.observable(),this.borderLeft=ko.observable(),this.borderRight=ko.observable(),this.borderBottom=ko.observable(),this.paddingEnabled=ko.observable(),this.paddingTop=ko.observable(),this.paddingLeft=ko.observable(),this.paddingRight=ko.observable(),this.paddingBottom=ko.observable(),this.topLeftRadius=ko.observable(),this.topRightRadius=ko.observable(),this.bottomLeftRadius=ko.observable(),this.bottomRightRadius=ko.observable(),this.borderTopWidth=ko.computed(()=>this.borderTop()?this.borderTop().width:null),this.borderLeftWidth=ko.computed(()=>this.borderLeft()?this.borderLeft().width:null),this.borderRightWidth=ko.computed(()=>this.borderRight()?this.borderRight().width:null),this.borderBottomWidth=ko.computed(()=>this.borderBottom()?this.borderBottom().width:null)}init(){const features=this.features.split(",");this.marginEnabled(features.includes("margin")),this.paddingEnabled(features.includes("padding")),this.borderEnabled(features.includes("border")),this.loadData(this.box()),this.box.subscribe(this.updateBox),this.marginTop.subscribe(this.dispatchUpdates),this.marginLeft.subscribe(this.dispatchUpdates),this.marginRight.subscribe(this.dispatchUpdates),this.marginBottom.subscribe(this.dispatchUpdates),this.borderTop.subscribe(this.dispatchUpdates),this.borderLeft.subscribe(this.dispatchUpdates),this.borderRight.subscribe(this.dispatchUpdates),this.borderBottom.subscribe(this.dispatchUpdates),this.topLeftRadius.subscribe(this.dispatchUpdates),this.topRightRadius.subscribe(this.dispatchUpdates),this.bottomLeftRadius.subscribe(this.dispatchUpdates),this.bottomRightRadius.subscribe(this.dispatchUpdates),this.paddingTop.subscribe(this.dispatchUpdates),this.paddingLeft.subscribe(this.dispatchUpdates),this.paddingRight.subscribe(this.dispatchUpdates),this.paddingBottom.subscribe(this.dispatchUpdates)}loadData(data){if(!data)return;const currentStyle=data;currentStyle.margin&&(this.marginTop(currentStyle.margin.top),this.marginLeft(currentStyle.margin.left),this.marginRight(currentStyle.margin.right),this.marginBottom(currentStyle.margin.bottom)),currentStyle.border&&(this.borderTop(currentStyle.border.top),this.borderLeft(currentStyle.border.left),this.borderRight(currentStyle.border.right),this.borderBottom(currentStyle.border.bottom)),currentStyle.borderRadius&&(this.topLeftRadius(currentStyle.borderRadius.topLeftRadius),this.topRightRadius(currentStyle.borderRadius.topRightRadius),this.bottomLeftRadius(currentStyle.borderRadius.bottomLeftRadius),this.bottomRightRadius(currentStyle.borderRadius.bottomRightRadius)),currentStyle.padding&&(this.paddingTop(currentStyle.padding.top),this.paddingLeft(currentStyle.padding.left),this.paddingRight(currentStyle.padding.right),this.paddingBottom(currentStyle.padding.bottom))}updateBox(update){this.isBoxUpdate=!0,this.loadData(update),this.isBoxUpdate=!1}dispatchUpdates(){if(!this.onUpdate||this.isBoxUpdate)return;const parseNumber=value=>{if("auto"===value)return value;if(0===value)return 0;if(value){const parsed=parseInt(value);return 0===parsed?0:parsed||void 0}};this.onUpdate({padding:{top:parseNumber(this.paddingTop()),left:parseNumber(this.paddingLeft()),right:parseNumber(this.paddingRight()),bottom:parseNumber(this.paddingBottom())},margin:{top:parseNumber(this.marginTop()),left:parseNumber(this.marginLeft()),right:parseNumber(this.marginRight()),bottom:parseNumber(this.marginBottom())},border:{top:this.borderTop(),left:this.borderLeft(),right:this.borderRight(),bottom:this.borderBottom()},borderRadius:{topLeftRadius:parseNumber(this.topLeftRadius()),topRightRadius:parseNumber(this.topRightRadius()),bottomLeftRadius:parseNumber(this.bottomLeftRadius()),bottomRightRadius:parseNumber(this.bottomRightRadius())}})}};__decorate([decorators_1.Param(),__metadata("design:type",Function)],BoxEditor.prototype,"box",void 0),__decorate([decorators_1.Param(),__metadata("design:type",String)],BoxEditor.prototype,"features",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],BoxEditor.prototype,"onUpdate",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],BoxEditor.prototype,"init",null),BoxEditor=__decorate([decorators_1.Component({selector:"box",template:boxEditor_html_1.default}),__metadata("design:paramtypes",[])],BoxEditor),exports.BoxEditor=BoxEditor},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="box-model">\r\n    <div class="box-model-margin" data-bind="css: { \'box-model-enabled\': marginEnabled }">\r\n        <div class="box-model-group">\r\n            <span class="box-model-label">margin</span>\r\n            <input type="text" class="box-model-control box-model-control-top" placeholder="-" data-bind="textInput: marginTop, balloon: { component: { name: \'option-selector-editor\', params: { onChange: $component.marginTop, initialValue: $component.marginTop, optionsItems: \'inherit,auto\' } } }">\r\n            <input type="text" class="box-model-control box-model-control-left" placeholder="-" data-bind="textInput: marginLeft, balloon: { component: { name: \'option-selector-editor\', params: { onChange: $component.marginLeft, initialValue: $component.marginLeft, optionsItems: \'inherit,auto\' } } }">\r\n            <input type="text" class="box-model-control box-model-control-right" placeholder="-" data-bind="textInput: marginRight, balloon: { component: { name: \'option-selector-editor\', params: { onChange: $component.marginRight, initialValue: $component.marginRight, optionsItems: \'inherit,auto\' } } }">\r\n            <input type="text" class="box-model-control box-model-control-bottom" placeholder="-" data-bind="textInput: marginBottom, balloon: { component: { name: \'option-selector-editor\', params: { onChange: $component.marginBottom, initialValue: $component.marginBottom, optionsItems: \'inherit,auto\' } } }">\r\n        </div>\r\n\r\n        <div class="box-model-border" data-bind="css: { \'box-model-enabled\': borderEnabled }">\r\n            <div class="box-model-group">\r\n                <span class="box-model-label">border</span>\r\n                <input type="text" class="box-model-control box-model-control-top" placeholder="-" data-bind="textInput: borderTopWidth, balloon: { component: { name: \'border-editor\', params: { onChange: $component.borderTop, borderStyle: $component.borderTop } } }">\r\n                <input type="text" class="box-model-control box-model-control-left" placeholder="-" data-bind="textInput: borderLeftWidth, balloon: { component: { name: \'border-editor\', params: { onChange: $component.borderLeft, borderStyle: $component.borderLeft } } }">\r\n                <input type="text" class="box-model-control box-model-control-right" placeholder="-" data-bind="textInput: borderRightWidth, balloon: { component: { name: \'border-editor\', params: { onChange: $component.borderRight, borderStyle: $component.borderRight } } }">\r\n                <input type="text" class="box-model-control box-model-control-bottom" placeholder="-" data-bind="textInput: borderBottomWidth, balloon: { component: { name: \'border-editor\', params: { onChange: $component.borderBottom, borderStyle: $component.borderBottom } } }">\r\n\r\n                <input type="text" class="box-model-control box-model-control-top-left" placeholder="-" data-bind="textInput: topLeftRadius">\r\n                <input type="text" class="box-model-control box-model-control-top-right" placeholder="-" data-bind="textInput: topRightRadius">\r\n                <input type="text" class="box-model-control box-model-control-bottom-left" placeholder="-" data-bind="textInput: bottomLeftRadius">\r\n                <input type="text" class="box-model-control box-model-control-bottom-right" placeholder="-" data-bind="textInput: bottomRightRadius">\r\n            </div>\r\n\r\n            <div class="box-model-padding" data-bind="css: { \'box-model-enabled\': paddingEnabled }">\r\n                <div class="box-model-group">\r\n                    <span class="box-model-label">padding</span>\r\n                    <input type="text" class="box-model-control box-model-control-top" placeholder="-" data-bind="textInput: paddingTop">\r\n                    <input type="text" class="box-model-control box-model-control-left" placeholder="-" data-bind="textInput: paddingLeft">\r\n                    <input type="text" class="box-model-control box-model-control-right" placeholder="-" data-bind="textInput: paddingRight">\r\n                    <input type="text" class="box-model-control box-model-control-bottom" placeholder="-" data-bind="textInput: paddingBottom">\r\n                </div>\r\n\r\n                <div class="box-model-content">\r\n                    content\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(914),exports)},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.BorderEditor=void 0;const ko=__webpack_require__(0),borderEditor_html_1=__webpack_require__(915),decorators_1=__webpack_require__(2),__1=__webpack_require__(47);let BorderEditor=class{constructor(styleService){this.styleService=styleService,this.borderColor=ko.observable(),this.borderColorKey=ko.observable(),this.borderLineStyle=ko.observable(),this.borderStyle=ko.observable(),this.borderLineWidth=ko.observable(),this.colors=ko.observableArray(),this.borderLineStyles=ko.observableArray([{name:"Solid",value:"solid"},{name:"Dashed",value:"dashed"}])}initialize(){return __awaiter(this,void 0,void 0,(function*(){const style=this.borderStyle();this.borderLineWidth(1),this.borderLineStyle("solid"),style&&(this.borderLineWidth(style.width),this.borderLineStyle(style.style),this.borderColorKey(style.colorKey));const themeContract=yield this.styleService.getStyles(),colors=Object.keys(themeContract.colors).map(key=>themeContract.colors[key]);this.colors(colors),this.borderLineWidth.subscribe(this.applyChanges),this.borderLineStyle.subscribe(this.applyChanges)}))}selectColor(color){this.borderColorKey(color?color.key:null),this.applyChanges()}clearColor(){this.borderColorKey(null),this.applyChanges()}applyChanges(){const colorKey=this.borderColorKey(),borderLineStyle=this.borderLineStyle(),borderLineWidth=this.borderLineWidth();let borderStyle;colorKey&&borderLineStyle&&borderLineWidth&&(borderStyle={width:borderLineWidth,style:borderLineStyle,colorKey:colorKey}),this.onChange(borderStyle)}};__decorate([decorators_1.Param(),__metadata("design:type",Function)],BorderEditor.prototype,"borderStyle",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],BorderEditor.prototype,"onChange",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],BorderEditor.prototype,"initialize",null),BorderEditor=__decorate([decorators_1.Component({selector:"border-editor",template:borderEditor_html_1.default}),__metadata("design:paramtypes",[__1.StyleService])],BorderEditor),exports.BorderEditor=BorderEditor},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="editor flex flex-column">\r\n    <h1>Border</h1>\r\n    <hr>\r\n\r\n    <div class="form" data-bind="scrollable: true">\r\n        <div class="form-group">\r\n            <label for="borderLineWidth">Line width</label>\r\n            <input id="borderLineWidth" type="number" class="form-control" placeholder="(Inherit)" min="1" max="100" data-bind="textInput: borderLineWidth">\r\n        </div>\r\n\r\n        <div class="form-group">\r\n            <label for="borderLineStyle">Line style</label>\r\n            <select id="borderLineStyle" class="form-control" data-bind="options: borderLineStyles, value: borderLineStyle, optionsText: \'name\', optionsValue: \'value\'"></select>\r\n        </div>\r\n\r\n        <div class="palette">\r\n            <div class="color-box" data-bind="css: { selected: !$component.borderColorKey() }">\r\n                <a href="#" title="Clear color" class="color" role="button" data-bind="click: $component.clearColor">\r\n                    <i class="paperbits-icon paperbits-ban"></i>\r\n                </a>\r\n            </div>\r\n\r\n            \x3c!-- ko foreach: { data: colors, as: \'color\' } --\x3e\r\n            <div class="color-box" data-bind="css: { selected: color.key === $component.borderColorKey() }">\r\n                <a href="#" class="color" role="button" data-bind="click: $component.selectColor, attr: { title: color.displayName }, style: { background: color.value }"></a>\r\n            </div>\r\n            \x3c!--/ko --\x3e\r\n        </div>\r\n    </div>\r\n</div>'},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(917),exports),__exportStar(__webpack_require__(919),exports)},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ColorSelector=void 0;const ko=__webpack_require__(0),colorSelector_html_1=__webpack_require__(918),decorators_1=__webpack_require__(2),styleService_1=__webpack_require__(20);let ColorSelector=class{constructor(styleService){this.styleService=styleService,this.loadColors=this.loadColors.bind(this),this.selectColor=this.selectColor.bind(this),this.colors=ko.observableArray(),this.selectedColor=ko.observable(),this.initColorKey=ko.observable()}loadColors(){return __awaiter(this,void 0,void 0,(function*(){const themeContract=yield this.styleService.getStyles(),defaultColorKey=this.initColorKey(),colors=Object.keys(themeContract.colors).map(key=>{const colorContract=themeContract.colors[key];return defaultColorKey&&colorContract.key===defaultColorKey&&this.selectedColor(colorContract),colorContract});this.colors(colors)}))}selectColor(color){this.selectedColor&&this.selectedColor(color),this.onSelect&&this.onSelect(color)}clearColors(){this.selectedColor&&this.selectedColor(null),this.onSelect&&this.onSelect(null)}};__decorate([decorators_1.Param(),__metadata("design:type",Function)],ColorSelector.prototype,"initColorKey",void 0),__decorate([decorators_1.Param(),__metadata("design:type",Function)],ColorSelector.prototype,"selectedColor",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],ColorSelector.prototype,"onSelect",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],ColorSelector.prototype,"loadColors",null),ColorSelector=__decorate([decorators_1.Component({selector:"color-selector",template:colorSelector_html_1.default}),__metadata("design:paramtypes",[styleService_1.StyleService])],ColorSelector),exports.ColorSelector=ColorSelector},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="editor">\r\n    <h1>Color</h1>\r\n    <hr>\r\n\r\n    <div class="palette" role="list">\r\n        <div class="color-box" data-bind="css: { selected: !$component.selectedColor() }">\r\n            <a href="#" role="listitem" title="Clear color" class="color" data-bind="click: $component.clearColors, focus: true">\r\n                <i class="paperbits-icon paperbits-ban"></i>\r\n            </a>\r\n        </div>\r\n\r\n        \x3c!-- ko foreach: { data: colors, as: \'color\' } --\x3e\r\n        <div class="color-box" data-bind="css: { selected: color === $component.selectedColor() }">\r\n            <a href="#" role="listitem" class="color pseudo-transparent-bckg" data-bind="click: $component.selectColor, attr: { title: color.displayName }">\r\n                <span class="fit" data-bind="style: { background: color.value }"></span>\r\n            </a>\r\n        </div>\r\n        \x3c!--/ko --\x3e\r\n    </div>\r\n</div>'},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ColorEditor=void 0;const ko=__webpack_require__(0),colorEditor_html_1=__webpack_require__(920),decorators_1=__webpack_require__(2);let ColorEditor=class{constructor(){this.loadColors=this.loadColors.bind(this),this.onColorChange=this.onColorChange.bind(this),this.colorName=ko.observable(),this.colorValue=ko.observable(),this.selectedColor=ko.observable()}loadColors(){return __awaiter(this,void 0,void 0,(function*(){this.colorName(this.selectedColor().displayName),this.colorValue(this.selectedColor().value),this.colorName.subscribe(this.onColorChange),this.colorValue.subscribe(this.onColorChange)}))}onColorChange(){const color=this.selectedColor();color.value=this.colorValue(),color.displayName=this.colorName(),clearTimeout(this.selectTimeout),this.selectTimeout=setTimeout(()=>this.scheduleColorUpdate(color),600)}scheduleColorUpdate(color){this.selectedColor&&this.selectedColor(color),this.onSelect&&this.onSelect(color)}};__decorate([decorators_1.Param(),__metadata("design:type",Function)],ColorEditor.prototype,"selectedColor",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],ColorEditor.prototype,"onSelect",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],ColorEditor.prototype,"loadColors",null),ColorEditor=__decorate([decorators_1.Component({selector:"color-editor",template:colorEditor_html_1.default}),__metadata("design:paramtypes",[])],ColorEditor),exports.ColorEditor=ColorEditor},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<fieldset class="form flex-item flex-item-grow" data-bind="scrollable: true">\r\n    <div class="form-group">\r\n        <button class="btn btn-info" type="button" data-bind="tooltip: \'Name of the color\'"></button>\r\n        <label for="colorName">Color name</label>\r\n        <input id="colorName" type="text" class="form-control" spellcheck="false" data-bind="textInput: colorName, focus: true">\r\n    </div>\r\n\r\n    <div class="color-picker">\r\n        \x3c!-- ko if: colorValue --\x3e\r\n        <div data-bind="colorPicker: { selectedColor: colorValue }"></div>\r\n        \x3c!-- /ko --\x3e\r\n    </div>\r\n</fieldset>'},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(922),exports),__exportStar(__webpack_require__(924),exports),__exportStar(__webpack_require__(927),exports)},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.GradientSelector=void 0;const ko=__webpack_require__(0),gradientSelector_html_1=__webpack_require__(923),decorators_1=__webpack_require__(2),styleService_1=__webpack_require__(20),contracts_1=__webpack_require__(139);let GradientSelector=class{constructor(styleService){this.styleService=styleService,this.loadGradients=this.loadGradients.bind(this),this.selectGradient=this.selectGradient.bind(this),this.gradients=ko.observableArray(),this.selectedGradient=ko.observable()}loadGradients(){return __awaiter(this,void 0,void 0,(function*(){const themeContract=yield this.styleService.getStyles(),gradients=Object.keys(themeContract.gradients).map(key=>{const gradientContract=themeContract.gradients[key];return{value:contracts_1.getLinearGradientString(gradientContract),gradientContract:gradientContract}});this.gradients(gradients)}))}selectGradient(gradient){this.selectedGradient&&this.selectedGradient(gradient.gradientContract),this.onSelect&&this.onSelect(gradient.gradientContract)}clearGradients(){this.selectedGradient&&this.selectedGradient(null),this.onSelect&&this.onSelect(null)}addGradient(){}};__decorate([decorators_1.Param(),__metadata("design:type",Function)],GradientSelector.prototype,"selectedGradient",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],GradientSelector.prototype,"onSelect",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],GradientSelector.prototype,"loadGradients",null),GradientSelector=__decorate([decorators_1.Component({selector:"gradient-selector",template:gradientSelector_html_1.default}),__metadata("design:paramtypes",[styleService_1.StyleService])],GradientSelector),exports.GradientSelector=GradientSelector},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="editor">\r\n    <h1>Gradient</h1>\r\n    <hr>\r\n\r\n    <div class="palette">\r\n        <div class="color-box">\r\n            <a href="#" title="Clear gradient" class="color" data-bind="click: $component.clearGradients">\r\n                <i class="paperbits-icon paperbits-ban"></i>\r\n            </a>\r\n        </div>\r\n\r\n        \x3c!-- ko foreach: { data: gradients, as: \'gradient\' } --\x3e\r\n        <div class="color-box" data-bind="css: { selected: gradient === $component.selectedGradient() }">\r\n            <a href="#" class="color" data-bind="click: $component.selectGradient, attr: { title: gradient.displayName }, style: { background: gradient.value }"></a>\r\n        </div>\r\n        \x3c!--/ko --\x3e\r\n    </div>\r\n</div>'},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.GradientEditor=void 0;const ko=__webpack_require__(0),gradientEditor_html_1=__webpack_require__(925),decorators_1=__webpack_require__(2),contracts_1=__webpack_require__(139),linearGradientViewModel_1=__webpack_require__(926),styles_1=__webpack_require__(8),consts_1=__webpack_require__(17);let GradientEditor=class{constructor(){this.gradientPreview=ko.observable(),this.gradientPreviewColorStops=ko.observable(),this.gradientViewModel=ko.observable(),this.selectedGradient=ko.observable(),this.direction=ko.observable()}initialize(){return __awaiter(this,void 0,void 0,(function*(){this.gradientViewModel(new linearGradientViewModel_1.LinearGradientViewModel(this.selectedGradient())),this.direction(parseFloat(this.gradientViewModel().direction())),this.direction.extend(consts_1.ChangeRateLimit).subscribe(deg=>{this.gradientViewModel().direction(deg+"deg")}),this.gradientPreviewColorStops.extend(consts_1.ChangeRateLimit).subscribe(this.applyChanges),this.attachFunction(),this.updatePreview(),this.updateColorStopsPreview()}))}attachFunction(){return __awaiter(this,void 0,void 0,(function*(){const gradient=this.gradientViewModel();gradient.displayName.extend(consts_1.ChangeRateLimit).subscribe(()=>{this.applyChanges()}),gradient.direction.extend(consts_1.ChangeRateLimit).subscribe(this.applyChanges)}))}addColor(){return __awaiter(this,void 0,void 0,(function*(){const newColor=new linearGradientViewModel_1.ColorStopViewModel({color:"#000000",length:0});newColor.color.extend(consts_1.ChangeRateLimit).subscribe(this.applyChanges),newColor.length.extend(consts_1.ChangeRateLimit).subscribe(this.applyChanges),this.gradientViewModel().colorStops.push(newColor),this.applyChanges()}))}applyChanges(){return __awaiter(this,void 0,void 0,(function*(){if(this.updatePreview(),this.onSelect){const gradient=this.gradientViewModel().toContract();this.onSelect(gradient)}}))}updatePreview(){return __awaiter(this,void 0,void 0,(function*(){const previewGradient=this.gradientViewModel().toContract(),style=new styles_1.Style("gradient-preview");style.addRules([new styles_1.StyleRule("backgroundImage",contracts_1.getLinearGradientString(previewGradient))]);const styleSheet=new styles_1.StyleSheet;styleSheet.styles.push(style),this.gradientPreview(styleSheet)}))}updateColorStopsPreview(){return __awaiter(this,void 0,void 0,(function*(){const colorStopsGradient=this.gradientViewModel().toContract(),colorStopsPreviewStyle=new styles_1.Style("gradient-preview-color-stops");colorStopsGradient.direction="90deg",colorStopsPreviewStyle.addRules([new styles_1.StyleRule("backgroundImage",contracts_1.getLinearGradientString(colorStopsGradient))]);const colorStopsPreviewStyleSheet=new styles_1.StyleSheet;colorStopsPreviewStyleSheet.styles.push(colorStopsPreviewStyle),this.gradientPreviewColorStops(colorStopsPreviewStyleSheet)}))}changeColor(obIndex,colorValue){const index=obIndex();colorValue?this.gradientViewModel().colorStops()[index].color(colorValue):this.gradientViewModel().colorStops.splice(index,1),this.updateColorStopsPreview()}onColorStopChange(){this.updateColorStopsPreview()}};__decorate([decorators_1.Param(),__metadata("design:type",Function)],GradientEditor.prototype,"selectedGradient",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],GradientEditor.prototype,"onSelect",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],GradientEditor.prototype,"initialize",null),GradientEditor=__decorate([decorators_1.Component({selector:"gradient-editor",template:gradientEditor_html_1.default}),__metadata("design:paramtypes",[])],GradientEditor),exports.GradientEditor=GradientEditor},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<fieldset class="form flex-item flex-item-grow" data-bind="scrollable: true">\r\n    \x3c!-- ko if: gradientViewModel() --\x3e\r\n    <div class="form-group form-group-collapsible">\r\n        <label class="form-label">\r\n            <a href="#" class="form-group-toggle" title="Toggle section" data-bind="collapse: \'#mainCollapse\'"></a>\r\n            <b>Main</b>\r\n        </label>\r\n        <div id="mainCollapse" class="collapse form-group-collapse">\r\n            <div class="form-group">\r\n                <button class="btn btn-info" type="button" data-bind="tooltip: \'Name of the gradient\'"></button>\r\n                <label for="gradientName">Gradient name</label>\r\n                <input id="gradientName" type="text" class="form-control" spellcheck="false" data-bind="textInput: gradientViewModel().displayName, focus: true">\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="form-group form-group-collapsible">\r\n        <label class="form-label">\r\n            <a href="#" class="form-group-toggle" title="Toggle section" data-bind="collapse: \'#settingsCollapse\'"></a>\r\n            <b>Settings</b>\r\n        </label>\r\n        <div id="settingsCollapse" class="collapse form-group-collapse">\r\n            <div class="form-group">\r\n                <button class="btn btn-info" type="button" data-bind="tooltip: \'Angle that determines gradient direction.\'"></button>\r\n                <label for="gradientDegree">Rotate: <span data-bind="text: direction"></span>°</label>\r\n                <input id="gradientDegree" type="range" min="0" max="360" class="form-control" data-bind="textInput: direction, focus: true">\r\n            </div>\r\n\r\n            <style data-bind="jss: gradientPreview"></style>\r\n            <style data-bind="jss: gradientPreviewColorStops"></style>\r\n\r\n            <div class="dropzone">\r\n                <div class="dropzone-showbox">\r\n                    <div class="fit gradient-preview" data-bind="angle: direction"></div>\r\n                </div>\r\n                <div class="slider-display">\r\n                    <div class="fit gradient-preview-color-stops"></div>\r\n                </div>\r\n\r\n                <div class="slider">\r\n                    \x3c!-- ko foreach: { data: gradientViewModel().colorStops, as: \'colorStop\' } --\x3e\r\n                    <div class="slider-thumb" data-bind="style: { \'background-color\': colorStop.color() }, slider: { percentage: colorStop.length, onChange: $component.onColorStopChange }">\r\n                    </div>\r\n                    \x3c!-- /ko --\x3e\r\n                </div>\r\n            </div>\r\n\r\n            <div class="style-card style-card-empty">\r\n                <div class="form-group" data-bind="scrollable: true">\r\n                    <label for="gradientColors">Color stops</label>\r\n                    <div class="palette">\r\n                        \x3c!-- ko foreach: { data: gradientViewModel().colorStops, as: \'colorStop\' } --\x3e\r\n                        <div class="color-box">\r\n                            <a href="#" role="listitem" class="color" data-bind="balloon: { component: { name: \'color-stop-editor\', params: { colorValue: colorStop.color, onSelect: function(data) { $component.changeColor($index, data); }} } }, style: { background: colorStop.color }"></a>\r\n                        </div>\r\n                        \x3c!-- /ko --\x3e\r\n                        <div class="color-box">\r\n                            <a href="#" title="Add color stop" class="color" data-bind="click: $component.addColor">\r\n                                <i class="paperbits-icon paperbits-simple-add"></i>\r\n                            </a>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    \x3c!-- /ko --\x3e\r\n</fieldset>'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ColorStopViewModel=exports.LinearGradientViewModel=void 0;const ko=__webpack_require__(0);exports.LinearGradientViewModel=class{constructor(gradient){if(this.colorStops=ko.observableArray([]),this.direction=ko.observable(),gradient)return this.key=gradient.key,this.displayName=ko.observable(gradient.displayName),this.direction(gradient.direction||""),void(gradient.colorStops&&gradient.colorStops.forEach(colorStop=>{this.colorStops.push(new ColorStopViewModel(colorStop))}));this.key="",this.displayName("")}toContract(){return{key:this.key,displayName:this.displayName(),direction:this.direction(),colorStops:this.colorStops().map(x=>x.toContract())}}};class ColorStopViewModel{constructor(color){this.color=ko.observable(color.color),this.length=ko.observable(color.length)}toContract(){return{color:this.color(),length:this.length()}}}exports.ColorStopViewModel=ColorStopViewModel},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ColorStopEditor=void 0;const ko=__webpack_require__(0),colorStopEditor_html_1=__webpack_require__(928),decorators_1=__webpack_require__(2),consts_1=__webpack_require__(17);let ColorStopEditor=class{constructor(){this.colorValue=ko.observable()}loadColors(){return __awaiter(this,void 0,void 0,(function*(){this.colorValue.extend(consts_1.ChangeRateLimit).subscribe(this.applyChanges)}))}applyChanges(){this.onSelect&&this.onSelect(this.colorValue())}deleteColorStop(){this.onSelect(null)}};__decorate([decorators_1.Param(),__metadata("design:type",Function)],ColorStopEditor.prototype,"colorValue",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],ColorStopEditor.prototype,"onSelect",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],ColorStopEditor.prototype,"loadColors",null),ColorStopEditor=__decorate([decorators_1.Component({selector:"color-stop-editor",template:colorStopEditor_html_1.default}),__metadata("design:paramtypes",[])],ColorStopEditor),exports.ColorStopEditor=ColorStopEditor},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<fieldset class="pickr-dialog form flex-item flex-item-grow">\r\n    <div class="color-picker">\r\n         \x3c!-- ko if: colorValue --\x3e\r\n         <div data-bind="colorPicker: { selectedColor: colorValue }"></div>\r\n         \x3c!-- /ko --\x3e\r\n    </div>\r\n\r\n    <div class="flex-item btn-group">\r\n        <button class="btn" data-bind="click: deleteColorStop">\r\n            <i class="paperbits-icon paperbits-simple-remove"></i>\r\n            Delete color stop\r\n        </button>\r\n    </div>\r\n</fieldset>'},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(930),exports)},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.FontSelector=void 0;const ko=__webpack_require__(0),fontSelector_html_1=__webpack_require__(931),decorators_1=__webpack_require__(2),styleService_1=__webpack_require__(20);let FontSelector=class{constructor(styleService,styleCompiler){this.styleService=styleService,this.styleCompiler=styleCompiler,this.loadAvailableFonts=this.loadAvailableFonts.bind(this),this.selectFont=this.selectFont.bind(this),this.compiledFontStyles=ko.observable(),this.fonts=ko.observableArray(),this.selectedFont=ko.observable()}loadAvailableFonts(){return __awaiter(this,void 0,void 0,(function*(){const styles=yield this.styleCompiler.getFontsStylesCss();this.compiledFontStyles(styles);const fonts=yield this.styleService.getVariations("fonts");this.fonts(fonts)}))}selectFont(font){this.selectedFont&&this.selectedFont(font),this.onSelect&&this.onSelect(font)}clearFonts(){this.selectedFont&&this.selectedFont(null),this.onSelect&&this.onSelect(null)}};__decorate([decorators_1.Param(),__metadata("design:type",Function)],FontSelector.prototype,"selectedFont",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],FontSelector.prototype,"onSelect",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],FontSelector.prototype,"loadAvailableFonts",null),FontSelector=__decorate([decorators_1.Component({selector:"font-selector",template:fontSelector_html_1.default}),__metadata("design:paramtypes",[styleService_1.StyleService,Object])],FontSelector),exports.FontSelector=FontSelector},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<style data-bind="html: compiledFontStyles"></style>\r\n\r\n<div class="editor">\r\n    <h1>Font family</h1>\r\n    <hr>\r\n\r\n    <div class="flex flex-column flex-item flex-item-grow fonts" role="list">\r\n        <a href="#" role="listitem" class="list-item font-box" title="Clear font" data-bind="click: $component.clearFonts, focus: true">\r\n            <span class="font-family">\r\n                (Inherit)\r\n            </span>\r\n        </a>\r\n        \x3c!-- ko foreach: { data: fonts, as: \'font\' } --\x3e\r\n        <a href="#" role="listitem" class="list-item font-box" data-bind="css: { selected: font === $component.selectedFont() }, click: $component.selectFont">\r\n            <span class="font-family" data-bind="text: font.displayName, style: { \'font-family\': font.family }"></span>\r\n        </a>\r\n        \x3c!--/ko --\x3e\r\n    </div>\r\n</div>'},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(933),exports),__exportStar(__webpack_require__(942),exports)},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.GoogleFonts=void 0;const ko=__webpack_require__(0),Utils=__webpack_require__(6),Objects=__webpack_require__(19),mime=__webpack_require__(934),googleFonts_html_1=__webpack_require__(938),http_1=__webpack_require__(204),consts_1=__webpack_require__(17),decorators_1=__webpack_require__(2),styleService_1=__webpack_require__(20),googleFont_1=__webpack_require__(939),fontParser_1=__webpack_require__(940);let GoogleFonts=class{constructor(styleService,httpClient,viewManager,mediaService,settingsProvider,siteService){this.styleService=styleService,this.httpClient=httpClient,this.viewManager=viewManager,this.mediaService=mediaService,this.settingsProvider=settingsProvider,this.siteService=siteService,this.searchPattern=ko.observable(""),this.fonts=ko.observableArray(),this.selectedFont=ko.observable()}loadGoogleFonts(){return __awaiter(this,void 0,void 0,(function*(){const response=yield this.httpClient.send({url:"https://www.googleapis.com/webfonts/v1/webfonts?key=AIzaSyDnNQwlwF8y3mxGwO5QglUyYZRj_VqNJgM",method:http_1.HttpMethod.get});this.loadedContracts=response.toObject().items,yield this.searchFonts(),this.searchPattern.extend(consts_1.ChangeRateLimit).subscribe(this.searchFonts)}))}searchFonts(){this.fonts([]),this.loadNextPage()}loadNextPage(){return __awaiter(this,void 0,void 0,(function*(){if(!this.loadedContracts)return;const loadedCount=this.fonts().length,pattern=this.searchPattern().toLowerCase(),fonts=this.loadedContracts.filter(x=>x.family.toLowerCase().includes(pattern)).slice(loadedCount,loadedCount+50).map(contract=>new googleFont_1.GoogleFont(contract));this.fonts.push(...fonts)}))}selectFont(googleFont){return __awaiter(this,void 0,void 0,(function*(){const fontContract=googleFont.toContract(),styles=yield this.styleService.getStyles();styles.fonts[googleFont.identifier]=fontContract,yield this.styleService.updateStyles(styles),this.selectedFont&&this.selectedFont(fontContract),this.onSelect&&this.onSelect(fontContract)}))}uploadFont(){return __awaiter(this,void 0,void 0,(function*(){const files=yield this.viewManager.openUploadDialog(),styles=yield this.styleService.getStyles(),file=files[0],content=yield Utils.readFileAsByteArray(file),fontContract=yield fontParser_1.FontParser.parse(content),contentType=mime.lookup(file.name),fontVariant=fontContract.variants[0],uploadPromise=this.mediaService.createMedia(file.name,content,contentType);this.viewManager.notifyProgress(uploadPromise,"Styles",`Uploading ${file.name}...`);const media=yield uploadPromise;fontVariant.sourceKey=media.key,Objects.setValueWithCompensation(fontContract.key,styles,fontContract),this.styleService.updateStyles(styles),this.selectedFont&&this.selectedFont(fontContract),this.onSelect&&this.onSelect(fontContract)}))}};__decorate([decorators_1.Param(),__metadata("design:type",Function)],GoogleFonts.prototype,"selectedFont",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],GoogleFonts.prototype,"onSelect",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],GoogleFonts.prototype,"loadGoogleFonts",null),GoogleFonts=__decorate([decorators_1.Component({selector:"google-fonts",template:googleFonts_html_1.default}),__metadata("design:paramtypes",[styleService_1.StyleService,Object,Object,Object,Object,Object])],GoogleFonts),exports.GoogleFonts=GoogleFonts},function(module,exports,__webpack_require__){"use strict";var extensions,types,preference,db=__webpack_require__(935),extname=__webpack_require__(937).extname,EXTRACT_TYPE_REGEXP=/^\s*([^;\s]*)(?:;|\s|$)/,TEXT_TYPE_REGEXP=/^text\//i;function charset(type){if(!type||"string"!=typeof type)return!1;var match=EXTRACT_TYPE_REGEXP.exec(type),mime=match&&db[match[1].toLowerCase()];return mime&&mime.charset?mime.charset:!(!match||!TEXT_TYPE_REGEXP.test(match[1]))&&"UTF-8"}exports.charset=charset,exports.charsets={lookup:charset},exports.contentType=function(str){if(!str||"string"!=typeof str)return!1;var mime=-1===str.indexOf("/")?exports.lookup(str):str;if(!mime)return!1;if(-1===mime.indexOf("charset")){var charset=exports.charset(mime);charset&&(mime+="; charset="+charset.toLowerCase())}return mime},exports.extension=function(type){if(!type||"string"!=typeof type)return!1;var match=EXTRACT_TYPE_REGEXP.exec(type),exts=match&&exports.extensions[match[1].toLowerCase()];if(!exts||!exts.length)return!1;return exts[0]},exports.extensions=Object.create(null),exports.lookup=function(path){if(!path||"string"!=typeof path)return!1;var extension=extname("x."+path).toLowerCase().substr(1);if(!extension)return!1;return exports.types[extension]||!1},exports.types=Object.create(null),extensions=exports.extensions,types=exports.types,preference=["nginx","apache",void 0,"iana"],Object.keys(db).forEach((function(type){var mime=db[type],exts=mime.extensions;if(exts&&exts.length){extensions[type]=exts;for(var i=0;i<exts.length;i++){var extension=exts[i];if(types[extension]){var from=preference.indexOf(db[types[extension]].source),to=preference.indexOf(mime.source);if("application/octet-stream"!==types[extension]&&(from>to||from===to&&"application/"===types[extension].substr(0,12)))continue}types[extension]=type}}}))},function(module,exports,__webpack_require__){module.exports=__webpack_require__(936)},function(module){module.exports=JSON.parse('{"application/1d-interleaved-parityfec":{"source":"iana"},"application/3gpdash-qoe-report+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/3gpp-ims+xml":{"source":"iana","compressible":true},"application/a2l":{"source":"iana"},"application/activemessage":{"source":"iana"},"application/activity+json":{"source":"iana","compressible":true},"application/alto-costmap+json":{"source":"iana","compressible":true},"application/alto-costmapfilter+json":{"source":"iana","compressible":true},"application/alto-directory+json":{"source":"iana","compressible":true},"application/alto-endpointcost+json":{"source":"iana","compressible":true},"application/alto-endpointcostparams+json":{"source":"iana","compressible":true},"application/alto-endpointprop+json":{"source":"iana","compressible":true},"application/alto-endpointpropparams+json":{"source":"iana","compressible":true},"application/alto-error+json":{"source":"iana","compressible":true},"application/alto-networkmap+json":{"source":"iana","compressible":true},"application/alto-networkmapfilter+json":{"source":"iana","compressible":true},"application/alto-updatestreamcontrol+json":{"source":"iana","compressible":true},"application/alto-updatestreamparams+json":{"source":"iana","compressible":true},"application/aml":{"source":"iana"},"application/andrew-inset":{"source":"iana","extensions":["ez"]},"application/applefile":{"source":"iana"},"application/applixware":{"source":"apache","extensions":["aw"]},"application/atf":{"source":"iana"},"application/atfx":{"source":"iana"},"application/atom+xml":{"source":"iana","compressible":true,"extensions":["atom"]},"application/atomcat+xml":{"source":"iana","compressible":true,"extensions":["atomcat"]},"application/atomdeleted+xml":{"source":"iana","compressible":true,"extensions":["atomdeleted"]},"application/atomicmail":{"source":"iana"},"application/atomsvc+xml":{"source":"iana","compressible":true,"extensions":["atomsvc"]},"application/atsc-dwd+xml":{"source":"iana","compressible":true,"extensions":["dwd"]},"application/atsc-dynamic-event-message":{"source":"iana"},"application/atsc-held+xml":{"source":"iana","compressible":true,"extensions":["held"]},"application/atsc-rdt+json":{"source":"iana","compressible":true},"application/atsc-rsat+xml":{"source":"iana","compressible":true,"extensions":["rsat"]},"application/atxml":{"source":"iana"},"application/auth-policy+xml":{"source":"iana","compressible":true},"application/bacnet-xdd+zip":{"source":"iana","compressible":false},"application/batch-smtp":{"source":"iana"},"application/bdoc":{"compressible":false,"extensions":["bdoc"]},"application/beep+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/calendar+json":{"source":"iana","compressible":true},"application/calendar+xml":{"source":"iana","compressible":true,"extensions":["xcs"]},"application/call-completion":{"source":"iana"},"application/cals-1840":{"source":"iana"},"application/cap+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/cbor":{"source":"iana"},"application/cbor-seq":{"source":"iana"},"application/cccex":{"source":"iana"},"application/ccmp+xml":{"source":"iana","compressible":true},"application/ccxml+xml":{"source":"iana","compressible":true,"extensions":["ccxml"]},"application/cdfx+xml":{"source":"iana","compressible":true,"extensions":["cdfx"]},"application/cdmi-capability":{"source":"iana","extensions":["cdmia"]},"application/cdmi-container":{"source":"iana","extensions":["cdmic"]},"application/cdmi-domain":{"source":"iana","extensions":["cdmid"]},"application/cdmi-object":{"source":"iana","extensions":["cdmio"]},"application/cdmi-queue":{"source":"iana","extensions":["cdmiq"]},"application/cdni":{"source":"iana"},"application/cea":{"source":"iana"},"application/cea-2018+xml":{"source":"iana","compressible":true},"application/cellml+xml":{"source":"iana","compressible":true},"application/cfw":{"source":"iana"},"application/clue+xml":{"source":"iana","compressible":true},"application/clue_info+xml":{"source":"iana","compressible":true},"application/cms":{"source":"iana"},"application/cnrp+xml":{"source":"iana","compressible":true},"application/coap-group+json":{"source":"iana","compressible":true},"application/coap-payload":{"source":"iana"},"application/commonground":{"source":"iana"},"application/conference-info+xml":{"source":"iana","compressible":true},"application/cose":{"source":"iana"},"application/cose-key":{"source":"iana"},"application/cose-key-set":{"source":"iana"},"application/cpl+xml":{"source":"iana","compressible":true},"application/csrattrs":{"source":"iana"},"application/csta+xml":{"source":"iana","compressible":true},"application/cstadata+xml":{"source":"iana","compressible":true},"application/csvm+json":{"source":"iana","compressible":true},"application/cu-seeme":{"source":"apache","extensions":["cu"]},"application/cwt":{"source":"iana"},"application/cybercash":{"source":"iana"},"application/dart":{"compressible":true},"application/dash+xml":{"source":"iana","compressible":true,"extensions":["mpd"]},"application/dashdelta":{"source":"iana"},"application/davmount+xml":{"source":"iana","compressible":true,"extensions":["davmount"]},"application/dca-rft":{"source":"iana"},"application/dcd":{"source":"iana"},"application/dec-dx":{"source":"iana"},"application/dialog-info+xml":{"source":"iana","compressible":true},"application/dicom":{"source":"iana"},"application/dicom+json":{"source":"iana","compressible":true},"application/dicom+xml":{"source":"iana","compressible":true},"application/dii":{"source":"iana"},"application/dit":{"source":"iana"},"application/dns":{"source":"iana"},"application/dns+json":{"source":"iana","compressible":true},"application/dns-message":{"source":"iana"},"application/docbook+xml":{"source":"apache","compressible":true,"extensions":["dbk"]},"application/dots+cbor":{"source":"iana"},"application/dskpp+xml":{"source":"iana","compressible":true},"application/dssc+der":{"source":"iana","extensions":["dssc"]},"application/dssc+xml":{"source":"iana","compressible":true,"extensions":["xdssc"]},"application/dvcs":{"source":"iana"},"application/ecmascript":{"source":"iana","compressible":true,"extensions":["ecma","es"]},"application/edi-consent":{"source":"iana"},"application/edi-x12":{"source":"iana","compressible":false},"application/edifact":{"source":"iana","compressible":false},"application/efi":{"source":"iana"},"application/emergencycalldata.comment+xml":{"source":"iana","compressible":true},"application/emergencycalldata.control+xml":{"source":"iana","compressible":true},"application/emergencycalldata.deviceinfo+xml":{"source":"iana","compressible":true},"application/emergencycalldata.ecall.msd":{"source":"iana"},"application/emergencycalldata.providerinfo+xml":{"source":"iana","compressible":true},"application/emergencycalldata.serviceinfo+xml":{"source":"iana","compressible":true},"application/emergencycalldata.subscriberinfo+xml":{"source":"iana","compressible":true},"application/emergencycalldata.veds+xml":{"source":"iana","compressible":true},"application/emma+xml":{"source":"iana","compressible":true,"extensions":["emma"]},"application/emotionml+xml":{"source":"iana","compressible":true,"extensions":["emotionml"]},"application/encaprtp":{"source":"iana"},"application/epp+xml":{"source":"iana","compressible":true},"application/epub+zip":{"source":"iana","compressible":false,"extensions":["epub"]},"application/eshop":{"source":"iana"},"application/exi":{"source":"iana","extensions":["exi"]},"application/expect-ct-report+json":{"source":"iana","compressible":true},"application/fastinfoset":{"source":"iana"},"application/fastsoap":{"source":"iana"},"application/fdt+xml":{"source":"iana","compressible":true,"extensions":["fdt"]},"application/fhir+json":{"source":"iana","charset":"UTF-8","compressible":true},"application/fhir+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/fido.trusted-apps+json":{"compressible":true},"application/fits":{"source":"iana"},"application/flexfec":{"source":"iana"},"application/font-sfnt":{"source":"iana"},"application/font-tdpfr":{"source":"iana","extensions":["pfr"]},"application/font-woff":{"source":"iana","compressible":false},"application/framework-attributes+xml":{"source":"iana","compressible":true},"application/geo+json":{"source":"iana","compressible":true,"extensions":["geojson"]},"application/geo+json-seq":{"source":"iana"},"application/geopackage+sqlite3":{"source":"iana"},"application/geoxacml+xml":{"source":"iana","compressible":true},"application/gltf-buffer":{"source":"iana"},"application/gml+xml":{"source":"iana","compressible":true,"extensions":["gml"]},"application/gpx+xml":{"source":"apache","compressible":true,"extensions":["gpx"]},"application/gxf":{"source":"apache","extensions":["gxf"]},"application/gzip":{"source":"iana","compressible":false,"extensions":["gz"]},"application/h224":{"source":"iana"},"application/held+xml":{"source":"iana","compressible":true},"application/hjson":{"extensions":["hjson"]},"application/http":{"source":"iana"},"application/hyperstudio":{"source":"iana","extensions":["stk"]},"application/ibe-key-request+xml":{"source":"iana","compressible":true},"application/ibe-pkg-reply+xml":{"source":"iana","compressible":true},"application/ibe-pp-data":{"source":"iana"},"application/iges":{"source":"iana"},"application/im-iscomposing+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/index":{"source":"iana"},"application/index.cmd":{"source":"iana"},"application/index.obj":{"source":"iana"},"application/index.response":{"source":"iana"},"application/index.vnd":{"source":"iana"},"application/inkml+xml":{"source":"iana","compressible":true,"extensions":["ink","inkml"]},"application/iotp":{"source":"iana"},"application/ipfix":{"source":"iana","extensions":["ipfix"]},"application/ipp":{"source":"iana"},"application/isup":{"source":"iana"},"application/its+xml":{"source":"iana","compressible":true,"extensions":["its"]},"application/java-archive":{"source":"apache","compressible":false,"extensions":["jar","war","ear"]},"application/java-serialized-object":{"source":"apache","compressible":false,"extensions":["ser"]},"application/java-vm":{"source":"apache","compressible":false,"extensions":["class"]},"application/javascript":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["js","mjs"]},"application/jf2feed+json":{"source":"iana","compressible":true},"application/jose":{"source":"iana"},"application/jose+json":{"source":"iana","compressible":true},"application/jrd+json":{"source":"iana","compressible":true},"application/json":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["json","map"]},"application/json-patch+json":{"source":"iana","compressible":true},"application/json-seq":{"source":"iana"},"application/json5":{"extensions":["json5"]},"application/jsonml+json":{"source":"apache","compressible":true,"extensions":["jsonml"]},"application/jwk+json":{"source":"iana","compressible":true},"application/jwk-set+json":{"source":"iana","compressible":true},"application/jwt":{"source":"iana"},"application/kpml-request+xml":{"source":"iana","compressible":true},"application/kpml-response+xml":{"source":"iana","compressible":true},"application/ld+json":{"source":"iana","compressible":true,"extensions":["jsonld"]},"application/lgr+xml":{"source":"iana","compressible":true,"extensions":["lgr"]},"application/link-format":{"source":"iana"},"application/load-control+xml":{"source":"iana","compressible":true},"application/lost+xml":{"source":"iana","compressible":true,"extensions":["lostxml"]},"application/lostsync+xml":{"source":"iana","compressible":true},"application/lpf+zip":{"source":"iana","compressible":false},"application/lxf":{"source":"iana"},"application/mac-binhex40":{"source":"iana","extensions":["hqx"]},"application/mac-compactpro":{"source":"apache","extensions":["cpt"]},"application/macwriteii":{"source":"iana"},"application/mads+xml":{"source":"iana","compressible":true,"extensions":["mads"]},"application/manifest+json":{"charset":"UTF-8","compressible":true,"extensions":["webmanifest"]},"application/marc":{"source":"iana","extensions":["mrc"]},"application/marcxml+xml":{"source":"iana","compressible":true,"extensions":["mrcx"]},"application/mathematica":{"source":"iana","extensions":["ma","nb","mb"]},"application/mathml+xml":{"source":"iana","compressible":true,"extensions":["mathml"]},"application/mathml-content+xml":{"source":"iana","compressible":true},"application/mathml-presentation+xml":{"source":"iana","compressible":true},"application/mbms-associated-procedure-description+xml":{"source":"iana","compressible":true},"application/mbms-deregister+xml":{"source":"iana","compressible":true},"application/mbms-envelope+xml":{"source":"iana","compressible":true},"application/mbms-msk+xml":{"source":"iana","compressible":true},"application/mbms-msk-response+xml":{"source":"iana","compressible":true},"application/mbms-protection-description+xml":{"source":"iana","compressible":true},"application/mbms-reception-report+xml":{"source":"iana","compressible":true},"application/mbms-register+xml":{"source":"iana","compressible":true},"application/mbms-register-response+xml":{"source":"iana","compressible":true},"application/mbms-schedule+xml":{"source":"iana","compressible":true},"application/mbms-user-service-description+xml":{"source":"iana","compressible":true},"application/mbox":{"source":"iana","extensions":["mbox"]},"application/media-policy-dataset+xml":{"source":"iana","compressible":true},"application/media_control+xml":{"source":"iana","compressible":true},"application/mediaservercontrol+xml":{"source":"iana","compressible":true,"extensions":["mscml"]},"application/merge-patch+json":{"source":"iana","compressible":true},"application/metalink+xml":{"source":"apache","compressible":true,"extensions":["metalink"]},"application/metalink4+xml":{"source":"iana","compressible":true,"extensions":["meta4"]},"application/mets+xml":{"source":"iana","compressible":true,"extensions":["mets"]},"application/mf4":{"source":"iana"},"application/mikey":{"source":"iana"},"application/mipc":{"source":"iana"},"application/mmt-aei+xml":{"source":"iana","compressible":true,"extensions":["maei"]},"application/mmt-usd+xml":{"source":"iana","compressible":true,"extensions":["musd"]},"application/mods+xml":{"source":"iana","compressible":true,"extensions":["mods"]},"application/moss-keys":{"source":"iana"},"application/moss-signature":{"source":"iana"},"application/mosskey-data":{"source":"iana"},"application/mosskey-request":{"source":"iana"},"application/mp21":{"source":"iana","extensions":["m21","mp21"]},"application/mp4":{"source":"iana","extensions":["mp4s","m4p"]},"application/mpeg4-generic":{"source":"iana"},"application/mpeg4-iod":{"source":"iana"},"application/mpeg4-iod-xmt":{"source":"iana"},"application/mrb-consumer+xml":{"source":"iana","compressible":true,"extensions":["xdf"]},"application/mrb-publish+xml":{"source":"iana","compressible":true,"extensions":["xdf"]},"application/msc-ivr+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/msc-mixer+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/msword":{"source":"iana","compressible":false,"extensions":["doc","dot"]},"application/mud+json":{"source":"iana","compressible":true},"application/multipart-core":{"source":"iana"},"application/mxf":{"source":"iana","extensions":["mxf"]},"application/n-quads":{"source":"iana","extensions":["nq"]},"application/n-triples":{"source":"iana","extensions":["nt"]},"application/nasdata":{"source":"iana"},"application/news-checkgroups":{"source":"iana","charset":"US-ASCII"},"application/news-groupinfo":{"source":"iana","charset":"US-ASCII"},"application/news-transmission":{"source":"iana"},"application/nlsml+xml":{"source":"iana","compressible":true},"application/node":{"source":"iana","extensions":["cjs"]},"application/nss":{"source":"iana"},"application/ocsp-request":{"source":"iana"},"application/ocsp-response":{"source":"iana"},"application/octet-stream":{"source":"iana","compressible":false,"extensions":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{"source":"iana","extensions":["oda"]},"application/odm+xml":{"source":"iana","compressible":true},"application/odx":{"source":"iana"},"application/oebps-package+xml":{"source":"iana","compressible":true,"extensions":["opf"]},"application/ogg":{"source":"iana","compressible":false,"extensions":["ogx"]},"application/omdoc+xml":{"source":"apache","compressible":true,"extensions":["omdoc"]},"application/onenote":{"source":"apache","extensions":["onetoc","onetoc2","onetmp","onepkg"]},"application/oscore":{"source":"iana"},"application/oxps":{"source":"iana","extensions":["oxps"]},"application/p2p-overlay+xml":{"source":"iana","compressible":true,"extensions":["relo"]},"application/parityfec":{"source":"iana"},"application/passport":{"source":"iana"},"application/patch-ops-error+xml":{"source":"iana","compressible":true,"extensions":["xer"]},"application/pdf":{"source":"iana","compressible":false,"extensions":["pdf"]},"application/pdx":{"source":"iana"},"application/pem-certificate-chain":{"source":"iana"},"application/pgp-encrypted":{"source":"iana","compressible":false,"extensions":["pgp"]},"application/pgp-keys":{"source":"iana"},"application/pgp-signature":{"source":"iana","extensions":["asc","sig"]},"application/pics-rules":{"source":"apache","extensions":["prf"]},"application/pidf+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/pidf-diff+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/pkcs10":{"source":"iana","extensions":["p10"]},"application/pkcs12":{"source":"iana"},"application/pkcs7-mime":{"source":"iana","extensions":["p7m","p7c"]},"application/pkcs7-signature":{"source":"iana","extensions":["p7s"]},"application/pkcs8":{"source":"iana","extensions":["p8"]},"application/pkcs8-encrypted":{"source":"iana"},"application/pkix-attr-cert":{"source":"iana","extensions":["ac"]},"application/pkix-cert":{"source":"iana","extensions":["cer"]},"application/pkix-crl":{"source":"iana","extensions":["crl"]},"application/pkix-pkipath":{"source":"iana","extensions":["pkipath"]},"application/pkixcmp":{"source":"iana","extensions":["pki"]},"application/pls+xml":{"source":"iana","compressible":true,"extensions":["pls"]},"application/poc-settings+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/postscript":{"source":"iana","compressible":true,"extensions":["ai","eps","ps"]},"application/ppsp-tracker+json":{"source":"iana","compressible":true},"application/problem+json":{"source":"iana","compressible":true},"application/problem+xml":{"source":"iana","compressible":true},"application/provenance+xml":{"source":"iana","compressible":true,"extensions":["provx"]},"application/prs.alvestrand.titrax-sheet":{"source":"iana"},"application/prs.cww":{"source":"iana","extensions":["cww"]},"application/prs.hpub+zip":{"source":"iana","compressible":false},"application/prs.nprend":{"source":"iana"},"application/prs.plucker":{"source":"iana"},"application/prs.rdf-xml-crypt":{"source":"iana"},"application/prs.xsf+xml":{"source":"iana","compressible":true},"application/pskc+xml":{"source":"iana","compressible":true,"extensions":["pskcxml"]},"application/pvd+json":{"source":"iana","compressible":true},"application/qsig":{"source":"iana"},"application/raml+yaml":{"compressible":true,"extensions":["raml"]},"application/raptorfec":{"source":"iana"},"application/rdap+json":{"source":"iana","compressible":true},"application/rdf+xml":{"source":"iana","compressible":true,"extensions":["rdf","owl"]},"application/reginfo+xml":{"source":"iana","compressible":true,"extensions":["rif"]},"application/relax-ng-compact-syntax":{"source":"iana","extensions":["rnc"]},"application/remote-printing":{"source":"iana"},"application/reputon+json":{"source":"iana","compressible":true},"application/resource-lists+xml":{"source":"iana","compressible":true,"extensions":["rl"]},"application/resource-lists-diff+xml":{"source":"iana","compressible":true,"extensions":["rld"]},"application/rfc+xml":{"source":"iana","compressible":true},"application/riscos":{"source":"iana"},"application/rlmi+xml":{"source":"iana","compressible":true},"application/rls-services+xml":{"source":"iana","compressible":true,"extensions":["rs"]},"application/route-apd+xml":{"source":"iana","compressible":true,"extensions":["rapd"]},"application/route-s-tsid+xml":{"source":"iana","compressible":true,"extensions":["sls"]},"application/route-usd+xml":{"source":"iana","compressible":true,"extensions":["rusd"]},"application/rpki-ghostbusters":{"source":"iana","extensions":["gbr"]},"application/rpki-manifest":{"source":"iana","extensions":["mft"]},"application/rpki-publication":{"source":"iana"},"application/rpki-roa":{"source":"iana","extensions":["roa"]},"application/rpki-updown":{"source":"iana"},"application/rsd+xml":{"source":"apache","compressible":true,"extensions":["rsd"]},"application/rss+xml":{"source":"apache","compressible":true,"extensions":["rss"]},"application/rtf":{"source":"iana","compressible":true,"extensions":["rtf"]},"application/rtploopback":{"source":"iana"},"application/rtx":{"source":"iana"},"application/samlassertion+xml":{"source":"iana","compressible":true},"application/samlmetadata+xml":{"source":"iana","compressible":true},"application/sbe":{"source":"iana"},"application/sbml+xml":{"source":"iana","compressible":true,"extensions":["sbml"]},"application/scaip+xml":{"source":"iana","compressible":true},"application/scim+json":{"source":"iana","compressible":true},"application/scvp-cv-request":{"source":"iana","extensions":["scq"]},"application/scvp-cv-response":{"source":"iana","extensions":["scs"]},"application/scvp-vp-request":{"source":"iana","extensions":["spq"]},"application/scvp-vp-response":{"source":"iana","extensions":["spp"]},"application/sdp":{"source":"iana","extensions":["sdp"]},"application/secevent+jwt":{"source":"iana"},"application/senml+cbor":{"source":"iana"},"application/senml+json":{"source":"iana","compressible":true},"application/senml+xml":{"source":"iana","compressible":true,"extensions":["senmlx"]},"application/senml-etch+cbor":{"source":"iana"},"application/senml-etch+json":{"source":"iana","compressible":true},"application/senml-exi":{"source":"iana"},"application/sensml+cbor":{"source":"iana"},"application/sensml+json":{"source":"iana","compressible":true},"application/sensml+xml":{"source":"iana","compressible":true,"extensions":["sensmlx"]},"application/sensml-exi":{"source":"iana"},"application/sep+xml":{"source":"iana","compressible":true},"application/sep-exi":{"source":"iana"},"application/session-info":{"source":"iana"},"application/set-payment":{"source":"iana"},"application/set-payment-initiation":{"source":"iana","extensions":["setpay"]},"application/set-registration":{"source":"iana"},"application/set-registration-initiation":{"source":"iana","extensions":["setreg"]},"application/sgml":{"source":"iana"},"application/sgml-open-catalog":{"source":"iana"},"application/shf+xml":{"source":"iana","compressible":true,"extensions":["shf"]},"application/sieve":{"source":"iana","extensions":["siv","sieve"]},"application/simple-filter+xml":{"source":"iana","compressible":true},"application/simple-message-summary":{"source":"iana"},"application/simplesymbolcontainer":{"source":"iana"},"application/sipc":{"source":"iana"},"application/slate":{"source":"iana"},"application/smil":{"source":"iana"},"application/smil+xml":{"source":"iana","compressible":true,"extensions":["smi","smil"]},"application/smpte336m":{"source":"iana"},"application/soap+fastinfoset":{"source":"iana"},"application/soap+xml":{"source":"iana","compressible":true},"application/sparql-query":{"source":"iana","extensions":["rq"]},"application/sparql-results+xml":{"source":"iana","compressible":true,"extensions":["srx"]},"application/spirits-event+xml":{"source":"iana","compressible":true},"application/sql":{"source":"iana"},"application/srgs":{"source":"iana","extensions":["gram"]},"application/srgs+xml":{"source":"iana","compressible":true,"extensions":["grxml"]},"application/sru+xml":{"source":"iana","compressible":true,"extensions":["sru"]},"application/ssdl+xml":{"source":"apache","compressible":true,"extensions":["ssdl"]},"application/ssml+xml":{"source":"iana","compressible":true,"extensions":["ssml"]},"application/stix+json":{"source":"iana","compressible":true},"application/swid+xml":{"source":"iana","compressible":true,"extensions":["swidtag"]},"application/tamp-apex-update":{"source":"iana"},"application/tamp-apex-update-confirm":{"source":"iana"},"application/tamp-community-update":{"source":"iana"},"application/tamp-community-update-confirm":{"source":"iana"},"application/tamp-error":{"source":"iana"},"application/tamp-sequence-adjust":{"source":"iana"},"application/tamp-sequence-adjust-confirm":{"source":"iana"},"application/tamp-status-query":{"source":"iana"},"application/tamp-status-response":{"source":"iana"},"application/tamp-update":{"source":"iana"},"application/tamp-update-confirm":{"source":"iana"},"application/tar":{"compressible":true},"application/taxii+json":{"source":"iana","compressible":true},"application/td+json":{"source":"iana","compressible":true},"application/tei+xml":{"source":"iana","compressible":true,"extensions":["tei","teicorpus"]},"application/tetra_isi":{"source":"iana"},"application/thraud+xml":{"source":"iana","compressible":true,"extensions":["tfi"]},"application/timestamp-query":{"source":"iana"},"application/timestamp-reply":{"source":"iana"},"application/timestamped-data":{"source":"iana","extensions":["tsd"]},"application/tlsrpt+gzip":{"source":"iana"},"application/tlsrpt+json":{"source":"iana","compressible":true},"application/tnauthlist":{"source":"iana"},"application/toml":{"compressible":true,"extensions":["toml"]},"application/trickle-ice-sdpfrag":{"source":"iana"},"application/trig":{"source":"iana"},"application/ttml+xml":{"source":"iana","compressible":true,"extensions":["ttml"]},"application/tve-trigger":{"source":"iana"},"application/tzif":{"source":"iana"},"application/tzif-leap":{"source":"iana"},"application/ulpfec":{"source":"iana"},"application/urc-grpsheet+xml":{"source":"iana","compressible":true},"application/urc-ressheet+xml":{"source":"iana","compressible":true,"extensions":["rsheet"]},"application/urc-targetdesc+xml":{"source":"iana","compressible":true},"application/urc-uisocketdesc+xml":{"source":"iana","compressible":true},"application/vcard+json":{"source":"iana","compressible":true},"application/vcard+xml":{"source":"iana","compressible":true},"application/vemmi":{"source":"iana"},"application/vividence.scriptfile":{"source":"apache"},"application/vnd.1000minds.decision-model+xml":{"source":"iana","compressible":true,"extensions":["1km"]},"application/vnd.3gpp-prose+xml":{"source":"iana","compressible":true},"application/vnd.3gpp-prose-pc3ch+xml":{"source":"iana","compressible":true},"application/vnd.3gpp-v2x-local-service-information":{"source":"iana"},"application/vnd.3gpp.access-transfer-events+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.bsf+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.gmop+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mc-signalling-ear":{"source":"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcdata-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcdata-payload":{"source":"iana"},"application/vnd.3gpp.mcdata-service-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcdata-signalling":{"source":"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcdata-user-profile+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-affiliation-command+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-floor-request+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-location-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-service-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-signed+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-ue-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-ue-init-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-user-profile+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-affiliation-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-location-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-service-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-transmission-request+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-ue-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-user-profile+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mid-call+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.pic-bw-large":{"source":"iana","extensions":["plb"]},"application/vnd.3gpp.pic-bw-small":{"source":"iana","extensions":["psb"]},"application/vnd.3gpp.pic-bw-var":{"source":"iana","extensions":["pvb"]},"application/vnd.3gpp.sms":{"source":"iana"},"application/vnd.3gpp.sms+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.srvcc-ext+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.srvcc-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.state-and-event-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.ussd+xml":{"source":"iana","compressible":true},"application/vnd.3gpp2.bcmcsinfo+xml":{"source":"iana","compressible":true},"application/vnd.3gpp2.sms":{"source":"iana"},"application/vnd.3gpp2.tcap":{"source":"iana","extensions":["tcap"]},"application/vnd.3lightssoftware.imagescal":{"source":"iana"},"application/vnd.3m.post-it-notes":{"source":"iana","extensions":["pwn"]},"application/vnd.accpac.simply.aso":{"source":"iana","extensions":["aso"]},"application/vnd.accpac.simply.imp":{"source":"iana","extensions":["imp"]},"application/vnd.acucobol":{"source":"iana","extensions":["acu"]},"application/vnd.acucorp":{"source":"iana","extensions":["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{"source":"apache","compressible":false,"extensions":["air"]},"application/vnd.adobe.flash.movie":{"source":"iana"},"application/vnd.adobe.formscentral.fcdt":{"source":"iana","extensions":["fcdt"]},"application/vnd.adobe.fxp":{"source":"iana","extensions":["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{"source":"iana"},"application/vnd.adobe.xdp+xml":{"source":"iana","compressible":true,"extensions":["xdp"]},"application/vnd.adobe.xfdf":{"source":"iana","extensions":["xfdf"]},"application/vnd.aether.imp":{"source":"iana"},"application/vnd.afpc.afplinedata":{"source":"iana"},"application/vnd.afpc.afplinedata-pagedef":{"source":"iana"},"application/vnd.afpc.foca-charset":{"source":"iana"},"application/vnd.afpc.foca-codedfont":{"source":"iana"},"application/vnd.afpc.foca-codepage":{"source":"iana"},"application/vnd.afpc.modca":{"source":"iana"},"application/vnd.afpc.modca-formdef":{"source":"iana"},"application/vnd.afpc.modca-mediummap":{"source":"iana"},"application/vnd.afpc.modca-objectcontainer":{"source":"iana"},"application/vnd.afpc.modca-overlay":{"source":"iana"},"application/vnd.afpc.modca-pagesegment":{"source":"iana"},"application/vnd.ah-barcode":{"source":"iana"},"application/vnd.ahead.space":{"source":"iana","extensions":["ahead"]},"application/vnd.airzip.filesecure.azf":{"source":"iana","extensions":["azf"]},"application/vnd.airzip.filesecure.azs":{"source":"iana","extensions":["azs"]},"application/vnd.amadeus+json":{"source":"iana","compressible":true},"application/vnd.amazon.ebook":{"source":"apache","extensions":["azw"]},"application/vnd.amazon.mobi8-ebook":{"source":"iana"},"application/vnd.americandynamics.acc":{"source":"iana","extensions":["acc"]},"application/vnd.amiga.ami":{"source":"iana","extensions":["ami"]},"application/vnd.amundsen.maze+xml":{"source":"iana","compressible":true},"application/vnd.android.ota":{"source":"iana"},"application/vnd.android.package-archive":{"source":"apache","compressible":false,"extensions":["apk"]},"application/vnd.anki":{"source":"iana"},"application/vnd.anser-web-certificate-issue-initiation":{"source":"iana","extensions":["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{"source":"apache","extensions":["fti"]},"application/vnd.antix.game-component":{"source":"iana","extensions":["atx"]},"application/vnd.apache.thrift.binary":{"source":"iana"},"application/vnd.apache.thrift.compact":{"source":"iana"},"application/vnd.apache.thrift.json":{"source":"iana"},"application/vnd.api+json":{"source":"iana","compressible":true},"application/vnd.aplextor.warrp+json":{"source":"iana","compressible":true},"application/vnd.apothekende.reservation+json":{"source":"iana","compressible":true},"application/vnd.apple.installer+xml":{"source":"iana","compressible":true,"extensions":["mpkg"]},"application/vnd.apple.keynote":{"source":"iana","extensions":["keynote"]},"application/vnd.apple.mpegurl":{"source":"iana","extensions":["m3u8"]},"application/vnd.apple.numbers":{"source":"iana","extensions":["numbers"]},"application/vnd.apple.pages":{"source":"iana","extensions":["pages"]},"application/vnd.apple.pkpass":{"compressible":false,"extensions":["pkpass"]},"application/vnd.arastra.swi":{"source":"iana"},"application/vnd.aristanetworks.swi":{"source":"iana","extensions":["swi"]},"application/vnd.artisan+json":{"source":"iana","compressible":true},"application/vnd.artsquare":{"source":"iana"},"application/vnd.astraea-software.iota":{"source":"iana","extensions":["iota"]},"application/vnd.audiograph":{"source":"iana","extensions":["aep"]},"application/vnd.autopackage":{"source":"iana"},"application/vnd.avalon+json":{"source":"iana","compressible":true},"application/vnd.avistar+xml":{"source":"iana","compressible":true},"application/vnd.balsamiq.bmml+xml":{"source":"iana","compressible":true,"extensions":["bmml"]},"application/vnd.balsamiq.bmpr":{"source":"iana"},"application/vnd.banana-accounting":{"source":"iana"},"application/vnd.bbf.usp.error":{"source":"iana"},"application/vnd.bbf.usp.msg":{"source":"iana"},"application/vnd.bbf.usp.msg+json":{"source":"iana","compressible":true},"application/vnd.bekitzur-stech+json":{"source":"iana","compressible":true},"application/vnd.bint.med-content":{"source":"iana"},"application/vnd.biopax.rdf+xml":{"source":"iana","compressible":true},"application/vnd.blink-idb-value-wrapper":{"source":"iana"},"application/vnd.blueice.multipass":{"source":"iana","extensions":["mpm"]},"application/vnd.bluetooth.ep.oob":{"source":"iana"},"application/vnd.bluetooth.le.oob":{"source":"iana"},"application/vnd.bmi":{"source":"iana","extensions":["bmi"]},"application/vnd.bpf":{"source":"iana"},"application/vnd.bpf3":{"source":"iana"},"application/vnd.businessobjects":{"source":"iana","extensions":["rep"]},"application/vnd.byu.uapi+json":{"source":"iana","compressible":true},"application/vnd.cab-jscript":{"source":"iana"},"application/vnd.canon-cpdl":{"source":"iana"},"application/vnd.canon-lips":{"source":"iana"},"application/vnd.capasystems-pg+json":{"source":"iana","compressible":true},"application/vnd.cendio.thinlinc.clientconf":{"source":"iana"},"application/vnd.century-systems.tcp_stream":{"source":"iana"},"application/vnd.chemdraw+xml":{"source":"iana","compressible":true,"extensions":["cdxml"]},"application/vnd.chess-pgn":{"source":"iana"},"application/vnd.chipnuts.karaoke-mmd":{"source":"iana","extensions":["mmd"]},"application/vnd.ciedi":{"source":"iana"},"application/vnd.cinderella":{"source":"iana","extensions":["cdy"]},"application/vnd.cirpack.isdn-ext":{"source":"iana"},"application/vnd.citationstyles.style+xml":{"source":"iana","compressible":true,"extensions":["csl"]},"application/vnd.claymore":{"source":"iana","extensions":["cla"]},"application/vnd.cloanto.rp9":{"source":"iana","extensions":["rp9"]},"application/vnd.clonk.c4group":{"source":"iana","extensions":["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{"source":"iana","extensions":["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{"source":"iana","extensions":["c11amz"]},"application/vnd.coffeescript":{"source":"iana"},"application/vnd.collabio.xodocuments.document":{"source":"iana"},"application/vnd.collabio.xodocuments.document-template":{"source":"iana"},"application/vnd.collabio.xodocuments.presentation":{"source":"iana"},"application/vnd.collabio.xodocuments.presentation-template":{"source":"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{"source":"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{"source":"iana"},"application/vnd.collection+json":{"source":"iana","compressible":true},"application/vnd.collection.doc+json":{"source":"iana","compressible":true},"application/vnd.collection.next+json":{"source":"iana","compressible":true},"application/vnd.comicbook+zip":{"source":"iana","compressible":false},"application/vnd.comicbook-rar":{"source":"iana"},"application/vnd.commerce-battelle":{"source":"iana"},"application/vnd.commonspace":{"source":"iana","extensions":["csp"]},"application/vnd.contact.cmsg":{"source":"iana","extensions":["cdbcmsg"]},"application/vnd.coreos.ignition+json":{"source":"iana","compressible":true},"application/vnd.cosmocaller":{"source":"iana","extensions":["cmc"]},"application/vnd.crick.clicker":{"source":"iana","extensions":["clkx"]},"application/vnd.crick.clicker.keyboard":{"source":"iana","extensions":["clkk"]},"application/vnd.crick.clicker.palette":{"source":"iana","extensions":["clkp"]},"application/vnd.crick.clicker.template":{"source":"iana","extensions":["clkt"]},"application/vnd.crick.clicker.wordbank":{"source":"iana","extensions":["clkw"]},"application/vnd.criticaltools.wbs+xml":{"source":"iana","compressible":true,"extensions":["wbs"]},"application/vnd.cryptii.pipe+json":{"source":"iana","compressible":true},"application/vnd.crypto-shade-file":{"source":"iana"},"application/vnd.ctc-posml":{"source":"iana","extensions":["pml"]},"application/vnd.ctct.ws+xml":{"source":"iana","compressible":true},"application/vnd.cups-pdf":{"source":"iana"},"application/vnd.cups-postscript":{"source":"iana"},"application/vnd.cups-ppd":{"source":"iana","extensions":["ppd"]},"application/vnd.cups-raster":{"source":"iana"},"application/vnd.cups-raw":{"source":"iana"},"application/vnd.curl":{"source":"iana"},"application/vnd.curl.car":{"source":"apache","extensions":["car"]},"application/vnd.curl.pcurl":{"source":"apache","extensions":["pcurl"]},"application/vnd.cyan.dean.root+xml":{"source":"iana","compressible":true},"application/vnd.cybank":{"source":"iana"},"application/vnd.d2l.coursepackage1p0+zip":{"source":"iana","compressible":false},"application/vnd.dart":{"source":"iana","compressible":true,"extensions":["dart"]},"application/vnd.data-vision.rdz":{"source":"iana","extensions":["rdz"]},"application/vnd.datapackage+json":{"source":"iana","compressible":true},"application/vnd.dataresource+json":{"source":"iana","compressible":true},"application/vnd.dbf":{"source":"iana"},"application/vnd.debian.binary-package":{"source":"iana"},"application/vnd.dece.data":{"source":"iana","extensions":["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{"source":"iana","compressible":true,"extensions":["uvt","uvvt"]},"application/vnd.dece.unspecified":{"source":"iana","extensions":["uvx","uvvx"]},"application/vnd.dece.zip":{"source":"iana","extensions":["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{"source":"iana","extensions":["fe_launch"]},"application/vnd.desmume.movie":{"source":"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{"source":"iana"},"application/vnd.dm.delegation+xml":{"source":"iana","compressible":true},"application/vnd.dna":{"source":"iana","extensions":["dna"]},"application/vnd.document+json":{"source":"iana","compressible":true},"application/vnd.dolby.mlp":{"source":"apache","extensions":["mlp"]},"application/vnd.dolby.mobile.1":{"source":"iana"},"application/vnd.dolby.mobile.2":{"source":"iana"},"application/vnd.doremir.scorecloud-binary-document":{"source":"iana"},"application/vnd.dpgraph":{"source":"iana","extensions":["dpg"]},"application/vnd.dreamfactory":{"source":"iana","extensions":["dfac"]},"application/vnd.drive+json":{"source":"iana","compressible":true},"application/vnd.ds-keypoint":{"source":"apache","extensions":["kpxx"]},"application/vnd.dtg.local":{"source":"iana"},"application/vnd.dtg.local.flash":{"source":"iana"},"application/vnd.dtg.local.html":{"source":"iana"},"application/vnd.dvb.ait":{"source":"iana","extensions":["ait"]},"application/vnd.dvb.dvbisl+xml":{"source":"iana","compressible":true},"application/vnd.dvb.dvbj":{"source":"iana"},"application/vnd.dvb.esgcontainer":{"source":"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{"source":"iana"},"application/vnd.dvb.ipdcesgaccess":{"source":"iana"},"application/vnd.dvb.ipdcesgaccess2":{"source":"iana"},"application/vnd.dvb.ipdcesgpdd":{"source":"iana"},"application/vnd.dvb.ipdcroaming":{"source":"iana"},"application/vnd.dvb.iptv.alfec-base":{"source":"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{"source":"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-container+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-generic+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-ia-msglist+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-ia-registration-request+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-ia-registration-response+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-init+xml":{"source":"iana","compressible":true},"application/vnd.dvb.pfr":{"source":"iana"},"application/vnd.dvb.service":{"source":"iana","extensions":["svc"]},"application/vnd.dxr":{"source":"iana"},"application/vnd.dynageo":{"source":"iana","extensions":["geo"]},"application/vnd.dzr":{"source":"iana"},"application/vnd.easykaraoke.cdgdownload":{"source":"iana"},"application/vnd.ecdis-update":{"source":"iana"},"application/vnd.ecip.rlp":{"source":"iana"},"application/vnd.ecowin.chart":{"source":"iana","extensions":["mag"]},"application/vnd.ecowin.filerequest":{"source":"iana"},"application/vnd.ecowin.fileupdate":{"source":"iana"},"application/vnd.ecowin.series":{"source":"iana"},"application/vnd.ecowin.seriesrequest":{"source":"iana"},"application/vnd.ecowin.seriesupdate":{"source":"iana"},"application/vnd.efi.img":{"source":"iana"},"application/vnd.efi.iso":{"source":"iana"},"application/vnd.emclient.accessrequest+xml":{"source":"iana","compressible":true},"application/vnd.enliven":{"source":"iana","extensions":["nml"]},"application/vnd.enphase.envoy":{"source":"iana"},"application/vnd.eprints.data+xml":{"source":"iana","compressible":true},"application/vnd.epson.esf":{"source":"iana","extensions":["esf"]},"application/vnd.epson.msf":{"source":"iana","extensions":["msf"]},"application/vnd.epson.quickanime":{"source":"iana","extensions":["qam"]},"application/vnd.epson.salt":{"source":"iana","extensions":["slt"]},"application/vnd.epson.ssf":{"source":"iana","extensions":["ssf"]},"application/vnd.ericsson.quickcall":{"source":"iana"},"application/vnd.espass-espass+zip":{"source":"iana","compressible":false},"application/vnd.eszigno3+xml":{"source":"iana","compressible":true,"extensions":["es3","et3"]},"application/vnd.etsi.aoc+xml":{"source":"iana","compressible":true},"application/vnd.etsi.asic-e+zip":{"source":"iana","compressible":false},"application/vnd.etsi.asic-s+zip":{"source":"iana","compressible":false},"application/vnd.etsi.cug+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvcommand+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvdiscovery+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvprofile+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvsad-bc+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvsad-cod+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvsad-npvr+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvservice+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvsync+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvueprofile+xml":{"source":"iana","compressible":true},"application/vnd.etsi.mcid+xml":{"source":"iana","compressible":true},"application/vnd.etsi.mheg5":{"source":"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{"source":"iana","compressible":true},"application/vnd.etsi.pstn+xml":{"source":"iana","compressible":true},"application/vnd.etsi.sci+xml":{"source":"iana","compressible":true},"application/vnd.etsi.simservs+xml":{"source":"iana","compressible":true},"application/vnd.etsi.timestamp-token":{"source":"iana"},"application/vnd.etsi.tsl+xml":{"source":"iana","compressible":true},"application/vnd.etsi.tsl.der":{"source":"iana"},"application/vnd.eudora.data":{"source":"iana"},"application/vnd.evolv.ecig.profile":{"source":"iana"},"application/vnd.evolv.ecig.settings":{"source":"iana"},"application/vnd.evolv.ecig.theme":{"source":"iana"},"application/vnd.exstream-empower+zip":{"source":"iana","compressible":false},"application/vnd.exstream-package":{"source":"iana"},"application/vnd.ezpix-album":{"source":"iana","extensions":["ez2"]},"application/vnd.ezpix-package":{"source":"iana","extensions":["ez3"]},"application/vnd.f-secure.mobile":{"source":"iana"},"application/vnd.fastcopy-disk-image":{"source":"iana"},"application/vnd.fdf":{"source":"iana","extensions":["fdf"]},"application/vnd.fdsn.mseed":{"source":"iana","extensions":["mseed"]},"application/vnd.fdsn.seed":{"source":"iana","extensions":["seed","dataless"]},"application/vnd.ffsns":{"source":"iana"},"application/vnd.ficlab.flb+zip":{"source":"iana","compressible":false},"application/vnd.filmit.zfc":{"source":"iana"},"application/vnd.fints":{"source":"iana"},"application/vnd.firemonkeys.cloudcell":{"source":"iana"},"application/vnd.flographit":{"source":"iana","extensions":["gph"]},"application/vnd.fluxtime.clip":{"source":"iana","extensions":["ftc"]},"application/vnd.font-fontforge-sfd":{"source":"iana"},"application/vnd.framemaker":{"source":"iana","extensions":["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{"source":"iana","extensions":["fnc"]},"application/vnd.frogans.ltf":{"source":"iana","extensions":["ltf"]},"application/vnd.fsc.weblaunch":{"source":"iana","extensions":["fsc"]},"application/vnd.fujitsu.oasys":{"source":"iana","extensions":["oas"]},"application/vnd.fujitsu.oasys2":{"source":"iana","extensions":["oa2"]},"application/vnd.fujitsu.oasys3":{"source":"iana","extensions":["oa3"]},"application/vnd.fujitsu.oasysgp":{"source":"iana","extensions":["fg5"]},"application/vnd.fujitsu.oasysprs":{"source":"iana","extensions":["bh2"]},"application/vnd.fujixerox.art-ex":{"source":"iana"},"application/vnd.fujixerox.art4":{"source":"iana"},"application/vnd.fujixerox.ddd":{"source":"iana","extensions":["ddd"]},"application/vnd.fujixerox.docuworks":{"source":"iana","extensions":["xdw"]},"application/vnd.fujixerox.docuworks.binder":{"source":"iana","extensions":["xbd"]},"application/vnd.fujixerox.docuworks.container":{"source":"iana"},"application/vnd.fujixerox.hbpl":{"source":"iana"},"application/vnd.fut-misnet":{"source":"iana"},"application/vnd.futoin+cbor":{"source":"iana"},"application/vnd.futoin+json":{"source":"iana","compressible":true},"application/vnd.fuzzysheet":{"source":"iana","extensions":["fzs"]},"application/vnd.genomatix.tuxedo":{"source":"iana","extensions":["txd"]},"application/vnd.gentics.grd+json":{"source":"iana","compressible":true},"application/vnd.geo+json":{"source":"iana","compressible":true},"application/vnd.geocube+xml":{"source":"iana","compressible":true},"application/vnd.geogebra.file":{"source":"iana","extensions":["ggb"]},"application/vnd.geogebra.tool":{"source":"iana","extensions":["ggt"]},"application/vnd.geometry-explorer":{"source":"iana","extensions":["gex","gre"]},"application/vnd.geonext":{"source":"iana","extensions":["gxt"]},"application/vnd.geoplan":{"source":"iana","extensions":["g2w"]},"application/vnd.geospace":{"source":"iana","extensions":["g3w"]},"application/vnd.gerber":{"source":"iana"},"application/vnd.globalplatform.card-content-mgt":{"source":"iana"},"application/vnd.globalplatform.card-content-mgt-response":{"source":"iana"},"application/vnd.gmx":{"source":"iana","extensions":["gmx"]},"application/vnd.google-apps.document":{"compressible":false,"extensions":["gdoc"]},"application/vnd.google-apps.presentation":{"compressible":false,"extensions":["gslides"]},"application/vnd.google-apps.spreadsheet":{"compressible":false,"extensions":["gsheet"]},"application/vnd.google-earth.kml+xml":{"source":"iana","compressible":true,"extensions":["kml"]},"application/vnd.google-earth.kmz":{"source":"iana","compressible":false,"extensions":["kmz"]},"application/vnd.gov.sk.e-form+xml":{"source":"iana","compressible":true},"application/vnd.gov.sk.e-form+zip":{"source":"iana","compressible":false},"application/vnd.gov.sk.xmldatacontainer+xml":{"source":"iana","compressible":true},"application/vnd.grafeq":{"source":"iana","extensions":["gqf","gqs"]},"application/vnd.gridmp":{"source":"iana"},"application/vnd.groove-account":{"source":"iana","extensions":["gac"]},"application/vnd.groove-help":{"source":"iana","extensions":["ghf"]},"application/vnd.groove-identity-message":{"source":"iana","extensions":["gim"]},"application/vnd.groove-injector":{"source":"iana","extensions":["grv"]},"application/vnd.groove-tool-message":{"source":"iana","extensions":["gtm"]},"application/vnd.groove-tool-template":{"source":"iana","extensions":["tpl"]},"application/vnd.groove-vcard":{"source":"iana","extensions":["vcg"]},"application/vnd.hal+json":{"source":"iana","compressible":true},"application/vnd.hal+xml":{"source":"iana","compressible":true,"extensions":["hal"]},"application/vnd.handheld-entertainment+xml":{"source":"iana","compressible":true,"extensions":["zmm"]},"application/vnd.hbci":{"source":"iana","extensions":["hbci"]},"application/vnd.hc+json":{"source":"iana","compressible":true},"application/vnd.hcl-bireports":{"source":"iana"},"application/vnd.hdt":{"source":"iana"},"application/vnd.heroku+json":{"source":"iana","compressible":true},"application/vnd.hhe.lesson-player":{"source":"iana","extensions":["les"]},"application/vnd.hp-hpgl":{"source":"iana","extensions":["hpgl"]},"application/vnd.hp-hpid":{"source":"iana","extensions":["hpid"]},"application/vnd.hp-hps":{"source":"iana","extensions":["hps"]},"application/vnd.hp-jlyt":{"source":"iana","extensions":["jlt"]},"application/vnd.hp-pcl":{"source":"iana","extensions":["pcl"]},"application/vnd.hp-pclxl":{"source":"iana","extensions":["pclxl"]},"application/vnd.httphone":{"source":"iana"},"application/vnd.hydrostatix.sof-data":{"source":"iana","extensions":["sfd-hdstx"]},"application/vnd.hyper+json":{"source":"iana","compressible":true},"application/vnd.hyper-item+json":{"source":"iana","compressible":true},"application/vnd.hyperdrive+json":{"source":"iana","compressible":true},"application/vnd.hzn-3d-crossword":{"source":"iana"},"application/vnd.ibm.afplinedata":{"source":"iana"},"application/vnd.ibm.electronic-media":{"source":"iana"},"application/vnd.ibm.minipay":{"source":"iana","extensions":["mpy"]},"application/vnd.ibm.modcap":{"source":"iana","extensions":["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{"source":"iana","extensions":["irm"]},"application/vnd.ibm.secure-container":{"source":"iana","extensions":["sc"]},"application/vnd.iccprofile":{"source":"iana","extensions":["icc","icm"]},"application/vnd.ieee.1905":{"source":"iana"},"application/vnd.igloader":{"source":"iana","extensions":["igl"]},"application/vnd.imagemeter.folder+zip":{"source":"iana","compressible":false},"application/vnd.imagemeter.image+zip":{"source":"iana","compressible":false},"application/vnd.immervision-ivp":{"source":"iana","extensions":["ivp"]},"application/vnd.immervision-ivu":{"source":"iana","extensions":["ivu"]},"application/vnd.ims.imsccv1p1":{"source":"iana"},"application/vnd.ims.imsccv1p2":{"source":"iana"},"application/vnd.ims.imsccv1p3":{"source":"iana"},"application/vnd.ims.lis.v2.result+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolproxy+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolproxy.id+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolsettings+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolsettings.simple+json":{"source":"iana","compressible":true},"application/vnd.informedcontrol.rms+xml":{"source":"iana","compressible":true},"application/vnd.informix-visionary":{"source":"iana"},"application/vnd.infotech.project":{"source":"iana"},"application/vnd.infotech.project+xml":{"source":"iana","compressible":true},"application/vnd.innopath.wamp.notification":{"source":"iana"},"application/vnd.insors.igm":{"source":"iana","extensions":["igm"]},"application/vnd.intercon.formnet":{"source":"iana","extensions":["xpw","xpx"]},"application/vnd.intergeo":{"source":"iana","extensions":["i2g"]},"application/vnd.intertrust.digibox":{"source":"iana"},"application/vnd.intertrust.nncp":{"source":"iana"},"application/vnd.intu.qbo":{"source":"iana","extensions":["qbo"]},"application/vnd.intu.qfx":{"source":"iana","extensions":["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.conceptitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.knowledgeitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.newsitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.newsmessage+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.packageitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.planningitem+xml":{"source":"iana","compressible":true},"application/vnd.ipunplugged.rcprofile":{"source":"iana","extensions":["rcprofile"]},"application/vnd.irepository.package+xml":{"source":"iana","compressible":true,"extensions":["irp"]},"application/vnd.is-xpr":{"source":"iana","extensions":["xpr"]},"application/vnd.isac.fcs":{"source":"iana","extensions":["fcs"]},"application/vnd.iso11783-10+zip":{"source":"iana","compressible":false},"application/vnd.jam":{"source":"iana","extensions":["jam"]},"application/vnd.japannet-directory-service":{"source":"iana"},"application/vnd.japannet-jpnstore-wakeup":{"source":"iana"},"application/vnd.japannet-payment-wakeup":{"source":"iana"},"application/vnd.japannet-registration":{"source":"iana"},"application/vnd.japannet-registration-wakeup":{"source":"iana"},"application/vnd.japannet-setstore-wakeup":{"source":"iana"},"application/vnd.japannet-verification":{"source":"iana"},"application/vnd.japannet-verification-wakeup":{"source":"iana"},"application/vnd.jcp.javame.midlet-rms":{"source":"iana","extensions":["rms"]},"application/vnd.jisp":{"source":"iana","extensions":["jisp"]},"application/vnd.joost.joda-archive":{"source":"iana","extensions":["joda"]},"application/vnd.jsk.isdn-ngn":{"source":"iana"},"application/vnd.kahootz":{"source":"iana","extensions":["ktz","ktr"]},"application/vnd.kde.karbon":{"source":"iana","extensions":["karbon"]},"application/vnd.kde.kchart":{"source":"iana","extensions":["chrt"]},"application/vnd.kde.kformula":{"source":"iana","extensions":["kfo"]},"application/vnd.kde.kivio":{"source":"iana","extensions":["flw"]},"application/vnd.kde.kontour":{"source":"iana","extensions":["kon"]},"application/vnd.kde.kpresenter":{"source":"iana","extensions":["kpr","kpt"]},"application/vnd.kde.kspread":{"source":"iana","extensions":["ksp"]},"application/vnd.kde.kword":{"source":"iana","extensions":["kwd","kwt"]},"application/vnd.kenameaapp":{"source":"iana","extensions":["htke"]},"application/vnd.kidspiration":{"source":"iana","extensions":["kia"]},"application/vnd.kinar":{"source":"iana","extensions":["kne","knp"]},"application/vnd.koan":{"source":"iana","extensions":["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{"source":"iana","extensions":["sse"]},"application/vnd.las":{"source":"iana"},"application/vnd.las.las+json":{"source":"iana","compressible":true},"application/vnd.las.las+xml":{"source":"iana","compressible":true,"extensions":["lasxml"]},"application/vnd.laszip":{"source":"iana"},"application/vnd.leap+json":{"source":"iana","compressible":true},"application/vnd.liberty-request+xml":{"source":"iana","compressible":true},"application/vnd.llamagraphics.life-balance.desktop":{"source":"iana","extensions":["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{"source":"iana","compressible":true,"extensions":["lbe"]},"application/vnd.logipipe.circuit+zip":{"source":"iana","compressible":false},"application/vnd.loom":{"source":"iana"},"application/vnd.lotus-1-2-3":{"source":"iana","extensions":["123"]},"application/vnd.lotus-approach":{"source":"iana","extensions":["apr"]},"application/vnd.lotus-freelance":{"source":"iana","extensions":["pre"]},"application/vnd.lotus-notes":{"source":"iana","extensions":["nsf"]},"application/vnd.lotus-organizer":{"source":"iana","extensions":["org"]},"application/vnd.lotus-screencam":{"source":"iana","extensions":["scm"]},"application/vnd.lotus-wordpro":{"source":"iana","extensions":["lwp"]},"application/vnd.macports.portpkg":{"source":"iana","extensions":["portpkg"]},"application/vnd.mapbox-vector-tile":{"source":"iana"},"application/vnd.marlin.drm.actiontoken+xml":{"source":"iana","compressible":true},"application/vnd.marlin.drm.conftoken+xml":{"source":"iana","compressible":true},"application/vnd.marlin.drm.license+xml":{"source":"iana","compressible":true},"application/vnd.marlin.drm.mdcf":{"source":"iana"},"application/vnd.mason+json":{"source":"iana","compressible":true},"application/vnd.maxmind.maxmind-db":{"source":"iana"},"application/vnd.mcd":{"source":"iana","extensions":["mcd"]},"application/vnd.medcalcdata":{"source":"iana","extensions":["mc1"]},"application/vnd.mediastation.cdkey":{"source":"iana","extensions":["cdkey"]},"application/vnd.meridian-slingshot":{"source":"iana"},"application/vnd.mfer":{"source":"iana","extensions":["mwf"]},"application/vnd.mfmp":{"source":"iana","extensions":["mfm"]},"application/vnd.micro+json":{"source":"iana","compressible":true},"application/vnd.micrografx.flo":{"source":"iana","extensions":["flo"]},"application/vnd.micrografx.igx":{"source":"iana","extensions":["igx"]},"application/vnd.microsoft.portable-executable":{"source":"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{"source":"iana"},"application/vnd.miele+json":{"source":"iana","compressible":true},"application/vnd.mif":{"source":"iana","extensions":["mif"]},"application/vnd.minisoft-hp3000-save":{"source":"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{"source":"iana"},"application/vnd.mobius.daf":{"source":"iana","extensions":["daf"]},"application/vnd.mobius.dis":{"source":"iana","extensions":["dis"]},"application/vnd.mobius.mbk":{"source":"iana","extensions":["mbk"]},"application/vnd.mobius.mqy":{"source":"iana","extensions":["mqy"]},"application/vnd.mobius.msl":{"source":"iana","extensions":["msl"]},"application/vnd.mobius.plc":{"source":"iana","extensions":["plc"]},"application/vnd.mobius.txf":{"source":"iana","extensions":["txf"]},"application/vnd.mophun.application":{"source":"iana","extensions":["mpn"]},"application/vnd.mophun.certificate":{"source":"iana","extensions":["mpc"]},"application/vnd.motorola.flexsuite":{"source":"iana"},"application/vnd.motorola.flexsuite.adsi":{"source":"iana"},"application/vnd.motorola.flexsuite.fis":{"source":"iana"},"application/vnd.motorola.flexsuite.gotap":{"source":"iana"},"application/vnd.motorola.flexsuite.kmr":{"source":"iana"},"application/vnd.motorola.flexsuite.ttc":{"source":"iana"},"application/vnd.motorola.flexsuite.wem":{"source":"iana"},"application/vnd.motorola.iprm":{"source":"iana"},"application/vnd.mozilla.xul+xml":{"source":"iana","compressible":true,"extensions":["xul"]},"application/vnd.ms-3mfdocument":{"source":"iana"},"application/vnd.ms-artgalry":{"source":"iana","extensions":["cil"]},"application/vnd.ms-asf":{"source":"iana"},"application/vnd.ms-cab-compressed":{"source":"iana","extensions":["cab"]},"application/vnd.ms-color.iccprofile":{"source":"apache"},"application/vnd.ms-excel":{"source":"iana","compressible":false,"extensions":["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{"source":"iana","extensions":["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{"source":"iana","extensions":["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{"source":"iana","extensions":["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{"source":"iana","extensions":["xltm"]},"application/vnd.ms-fontobject":{"source":"iana","compressible":true,"extensions":["eot"]},"application/vnd.ms-htmlhelp":{"source":"iana","extensions":["chm"]},"application/vnd.ms-ims":{"source":"iana","extensions":["ims"]},"application/vnd.ms-lrm":{"source":"iana","extensions":["lrm"]},"application/vnd.ms-office.activex+xml":{"source":"iana","compressible":true},"application/vnd.ms-officetheme":{"source":"iana","extensions":["thmx"]},"application/vnd.ms-opentype":{"source":"apache","compressible":true},"application/vnd.ms-outlook":{"compressible":false,"extensions":["msg"]},"application/vnd.ms-package.obfuscated-opentype":{"source":"apache"},"application/vnd.ms-pki.seccat":{"source":"apache","extensions":["cat"]},"application/vnd.ms-pki.stl":{"source":"apache","extensions":["stl"]},"application/vnd.ms-playready.initiator+xml":{"source":"iana","compressible":true},"application/vnd.ms-powerpoint":{"source":"iana","compressible":false,"extensions":["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{"source":"iana","extensions":["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{"source":"iana","extensions":["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{"source":"iana","extensions":["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{"source":"iana","extensions":["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{"source":"iana","extensions":["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{"source":"iana","compressible":true},"application/vnd.ms-printing.printticket+xml":{"source":"apache","compressible":true},"application/vnd.ms-printschematicket+xml":{"source":"iana","compressible":true},"application/vnd.ms-project":{"source":"iana","extensions":["mpp","mpt"]},"application/vnd.ms-tnef":{"source":"iana"},"application/vnd.ms-windows.devicepairing":{"source":"iana"},"application/vnd.ms-windows.nwprinting.oob":{"source":"iana"},"application/vnd.ms-windows.printerpairing":{"source":"iana"},"application/vnd.ms-windows.wsd.oob":{"source":"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{"source":"iana"},"application/vnd.ms-wmdrm.lic-resp":{"source":"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{"source":"iana"},"application/vnd.ms-wmdrm.meter-resp":{"source":"iana"},"application/vnd.ms-word.document.macroenabled.12":{"source":"iana","extensions":["docm"]},"application/vnd.ms-word.template.macroenabled.12":{"source":"iana","extensions":["dotm"]},"application/vnd.ms-works":{"source":"iana","extensions":["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{"source":"iana","extensions":["wpl"]},"application/vnd.ms-xpsdocument":{"source":"iana","compressible":false,"extensions":["xps"]},"application/vnd.msa-disk-image":{"source":"iana"},"application/vnd.mseq":{"source":"iana","extensions":["mseq"]},"application/vnd.msign":{"source":"iana"},"application/vnd.multiad.creator":{"source":"iana"},"application/vnd.multiad.creator.cif":{"source":"iana"},"application/vnd.music-niff":{"source":"iana"},"application/vnd.musician":{"source":"iana","extensions":["mus"]},"application/vnd.muvee.style":{"source":"iana","extensions":["msty"]},"application/vnd.mynfc":{"source":"iana","extensions":["taglet"]},"application/vnd.ncd.control":{"source":"iana"},"application/vnd.ncd.reference":{"source":"iana"},"application/vnd.nearst.inv+json":{"source":"iana","compressible":true},"application/vnd.nervana":{"source":"iana"},"application/vnd.netfpx":{"source":"iana"},"application/vnd.neurolanguage.nlu":{"source":"iana","extensions":["nlu"]},"application/vnd.nimn":{"source":"iana"},"application/vnd.nintendo.nitro.rom":{"source":"iana"},"application/vnd.nintendo.snes.rom":{"source":"iana"},"application/vnd.nitf":{"source":"iana","extensions":["ntf","nitf"]},"application/vnd.noblenet-directory":{"source":"iana","extensions":["nnd"]},"application/vnd.noblenet-sealer":{"source":"iana","extensions":["nns"]},"application/vnd.noblenet-web":{"source":"iana","extensions":["nnw"]},"application/vnd.nokia.catalogs":{"source":"iana"},"application/vnd.nokia.conml+wbxml":{"source":"iana"},"application/vnd.nokia.conml+xml":{"source":"iana","compressible":true},"application/vnd.nokia.iptv.config+xml":{"source":"iana","compressible":true},"application/vnd.nokia.isds-radio-presets":{"source":"iana"},"application/vnd.nokia.landmark+wbxml":{"source":"iana"},"application/vnd.nokia.landmark+xml":{"source":"iana","compressible":true},"application/vnd.nokia.landmarkcollection+xml":{"source":"iana","compressible":true},"application/vnd.nokia.n-gage.ac+xml":{"source":"iana","compressible":true,"extensions":["ac"]},"application/vnd.nokia.n-gage.data":{"source":"iana","extensions":["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{"source":"iana","extensions":["n-gage"]},"application/vnd.nokia.ncd":{"source":"iana"},"application/vnd.nokia.pcd+wbxml":{"source":"iana"},"application/vnd.nokia.pcd+xml":{"source":"iana","compressible":true},"application/vnd.nokia.radio-preset":{"source":"iana","extensions":["rpst"]},"application/vnd.nokia.radio-presets":{"source":"iana","extensions":["rpss"]},"application/vnd.novadigm.edm":{"source":"iana","extensions":["edm"]},"application/vnd.novadigm.edx":{"source":"iana","extensions":["edx"]},"application/vnd.novadigm.ext":{"source":"iana","extensions":["ext"]},"application/vnd.ntt-local.content-share":{"source":"iana"},"application/vnd.ntt-local.file-transfer":{"source":"iana"},"application/vnd.ntt-local.ogw_remote-access":{"source":"iana"},"application/vnd.ntt-local.sip-ta_remote":{"source":"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{"source":"iana"},"application/vnd.oasis.opendocument.chart":{"source":"iana","extensions":["odc"]},"application/vnd.oasis.opendocument.chart-template":{"source":"iana","extensions":["otc"]},"application/vnd.oasis.opendocument.database":{"source":"iana","extensions":["odb"]},"application/vnd.oasis.opendocument.formula":{"source":"iana","extensions":["odf"]},"application/vnd.oasis.opendocument.formula-template":{"source":"iana","extensions":["odft"]},"application/vnd.oasis.opendocument.graphics":{"source":"iana","compressible":false,"extensions":["odg"]},"application/vnd.oasis.opendocument.graphics-template":{"source":"iana","extensions":["otg"]},"application/vnd.oasis.opendocument.image":{"source":"iana","extensions":["odi"]},"application/vnd.oasis.opendocument.image-template":{"source":"iana","extensions":["oti"]},"application/vnd.oasis.opendocument.presentation":{"source":"iana","compressible":false,"extensions":["odp"]},"application/vnd.oasis.opendocument.presentation-template":{"source":"iana","extensions":["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{"source":"iana","compressible":false,"extensions":["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{"source":"iana","extensions":["ots"]},"application/vnd.oasis.opendocument.text":{"source":"iana","compressible":false,"extensions":["odt"]},"application/vnd.oasis.opendocument.text-master":{"source":"iana","extensions":["odm"]},"application/vnd.oasis.opendocument.text-template":{"source":"iana","extensions":["ott"]},"application/vnd.oasis.opendocument.text-web":{"source":"iana","extensions":["oth"]},"application/vnd.obn":{"source":"iana"},"application/vnd.ocf+cbor":{"source":"iana"},"application/vnd.oci.image.manifest.v1+json":{"source":"iana","compressible":true},"application/vnd.oftn.l10n+json":{"source":"iana","compressible":true},"application/vnd.oipf.contentaccessdownload+xml":{"source":"iana","compressible":true},"application/vnd.oipf.contentaccessstreaming+xml":{"source":"iana","compressible":true},"application/vnd.oipf.cspg-hexbinary":{"source":"iana"},"application/vnd.oipf.dae.svg+xml":{"source":"iana","compressible":true},"application/vnd.oipf.dae.xhtml+xml":{"source":"iana","compressible":true},"application/vnd.oipf.mippvcontrolmessage+xml":{"source":"iana","compressible":true},"application/vnd.oipf.pae.gem":{"source":"iana"},"application/vnd.oipf.spdiscovery+xml":{"source":"iana","compressible":true},"application/vnd.oipf.spdlist+xml":{"source":"iana","compressible":true},"application/vnd.oipf.ueprofile+xml":{"source":"iana","compressible":true},"application/vnd.oipf.userprofile+xml":{"source":"iana","compressible":true},"application/vnd.olpc-sugar":{"source":"iana","extensions":["xo"]},"application/vnd.oma-scws-config":{"source":"iana"},"application/vnd.oma-scws-http-request":{"source":"iana"},"application/vnd.oma-scws-http-response":{"source":"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.drm-trigger+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.imd+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.ltkm":{"source":"iana"},"application/vnd.oma.bcast.notification+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.provisioningtrigger":{"source":"iana"},"application/vnd.oma.bcast.sgboot":{"source":"iana"},"application/vnd.oma.bcast.sgdd+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.sgdu":{"source":"iana"},"application/vnd.oma.bcast.simple-symbol-container":{"source":"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.sprov+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.stkm":{"source":"iana"},"application/vnd.oma.cab-address-book+xml":{"source":"iana","compressible":true},"application/vnd.oma.cab-feature-handler+xml":{"source":"iana","compressible":true},"application/vnd.oma.cab-pcc+xml":{"source":"iana","compressible":true},"application/vnd.oma.cab-subs-invite+xml":{"source":"iana","compressible":true},"application/vnd.oma.cab-user-prefs+xml":{"source":"iana","compressible":true},"application/vnd.oma.dcd":{"source":"iana"},"application/vnd.oma.dcdc":{"source":"iana"},"application/vnd.oma.dd2+xml":{"source":"iana","compressible":true,"extensions":["dd2"]},"application/vnd.oma.drm.risd+xml":{"source":"iana","compressible":true},"application/vnd.oma.group-usage-list+xml":{"source":"iana","compressible":true},"application/vnd.oma.lwm2m+json":{"source":"iana","compressible":true},"application/vnd.oma.lwm2m+tlv":{"source":"iana"},"application/vnd.oma.pal+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.detailed-progress-report+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.final-report+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.groups+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.invocation-descriptor+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.optimized-progress-report+xml":{"source":"iana","compressible":true},"application/vnd.oma.push":{"source":"iana"},"application/vnd.oma.scidm.messages+xml":{"source":"iana","compressible":true},"application/vnd.oma.xcap-directory+xml":{"source":"iana","compressible":true},"application/vnd.omads-email+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.omads-file+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.omads-folder+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.omaloc-supl-init":{"source":"iana"},"application/vnd.onepager":{"source":"iana"},"application/vnd.onepagertamp":{"source":"iana"},"application/vnd.onepagertamx":{"source":"iana"},"application/vnd.onepagertat":{"source":"iana"},"application/vnd.onepagertatp":{"source":"iana"},"application/vnd.onepagertatx":{"source":"iana"},"application/vnd.openblox.game+xml":{"source":"iana","compressible":true,"extensions":["obgx"]},"application/vnd.openblox.game-binary":{"source":"iana"},"application/vnd.openeye.oeb":{"source":"iana"},"application/vnd.openofficeorg.extension":{"source":"apache","extensions":["oxt"]},"application/vnd.openstreetmap.data+xml":{"source":"iana","compressible":true,"extensions":["osm"]},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawing+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{"source":"iana","compressible":false,"extensions":["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slide":{"source":"iana","extensions":["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{"source":"iana","extensions":["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.template":{"source":"iana","extensions":["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{"source":"iana","compressible":false,"extensions":["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{"source":"iana","extensions":["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.theme+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.vmldrawing":{"source":"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{"source":"iana","compressible":false,"extensions":["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{"source":"iana","extensions":["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-package.core-properties+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-package.relationships+xml":{"source":"iana","compressible":true},"application/vnd.oracle.resource+json":{"source":"iana","compressible":true},"application/vnd.orange.indata":{"source":"iana"},"application/vnd.osa.netdeploy":{"source":"iana"},"application/vnd.osgeo.mapguide.package":{"source":"iana","extensions":["mgp"]},"application/vnd.osgi.bundle":{"source":"iana"},"application/vnd.osgi.dp":{"source":"iana","extensions":["dp"]},"application/vnd.osgi.subsystem":{"source":"iana","extensions":["esa"]},"application/vnd.otps.ct-kip+xml":{"source":"iana","compressible":true},"application/vnd.oxli.countgraph":{"source":"iana"},"application/vnd.pagerduty+json":{"source":"iana","compressible":true},"application/vnd.palm":{"source":"iana","extensions":["pdb","pqa","oprc"]},"application/vnd.panoply":{"source":"iana"},"application/vnd.paos.xml":{"source":"iana"},"application/vnd.patentdive":{"source":"iana"},"application/vnd.patientecommsdoc":{"source":"iana"},"application/vnd.pawaafile":{"source":"iana","extensions":["paw"]},"application/vnd.pcos":{"source":"iana"},"application/vnd.pg.format":{"source":"iana","extensions":["str"]},"application/vnd.pg.osasli":{"source":"iana","extensions":["ei6"]},"application/vnd.piaccess.application-licence":{"source":"iana"},"application/vnd.picsel":{"source":"iana","extensions":["efif"]},"application/vnd.pmi.widget":{"source":"iana","extensions":["wg"]},"application/vnd.poc.group-advertisement+xml":{"source":"iana","compressible":true},"application/vnd.pocketlearn":{"source":"iana","extensions":["plf"]},"application/vnd.powerbuilder6":{"source":"iana","extensions":["pbd"]},"application/vnd.powerbuilder6-s":{"source":"iana"},"application/vnd.powerbuilder7":{"source":"iana"},"application/vnd.powerbuilder7-s":{"source":"iana"},"application/vnd.powerbuilder75":{"source":"iana"},"application/vnd.powerbuilder75-s":{"source":"iana"},"application/vnd.preminet":{"source":"iana"},"application/vnd.previewsystems.box":{"source":"iana","extensions":["box"]},"application/vnd.proteus.magazine":{"source":"iana","extensions":["mgz"]},"application/vnd.psfs":{"source":"iana"},"application/vnd.publishare-delta-tree":{"source":"iana","extensions":["qps"]},"application/vnd.pvi.ptid1":{"source":"iana","extensions":["ptid"]},"application/vnd.pwg-multiplexed":{"source":"iana"},"application/vnd.pwg-xhtml-print+xml":{"source":"iana","compressible":true},"application/vnd.qualcomm.brew-app-res":{"source":"iana"},"application/vnd.quarantainenet":{"source":"iana"},"application/vnd.quark.quarkxpress":{"source":"iana","extensions":["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{"source":"iana"},"application/vnd.radisys.moml+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit-conf+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit-conn+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit-dialog+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit-stream+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-conf+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-base+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-fax-detect+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-group+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-speech+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-transform+xml":{"source":"iana","compressible":true},"application/vnd.rainstor.data":{"source":"iana"},"application/vnd.rapid":{"source":"iana"},"application/vnd.rar":{"source":"iana"},"application/vnd.realvnc.bed":{"source":"iana","extensions":["bed"]},"application/vnd.recordare.musicxml":{"source":"iana","extensions":["mxl"]},"application/vnd.recordare.musicxml+xml":{"source":"iana","compressible":true,"extensions":["musicxml"]},"application/vnd.renlearn.rlprint":{"source":"iana"},"application/vnd.restful+json":{"source":"iana","compressible":true},"application/vnd.rig.cryptonote":{"source":"iana","extensions":["cryptonote"]},"application/vnd.rim.cod":{"source":"apache","extensions":["cod"]},"application/vnd.rn-realmedia":{"source":"apache","extensions":["rm"]},"application/vnd.rn-realmedia-vbr":{"source":"apache","extensions":["rmvb"]},"application/vnd.route66.link66+xml":{"source":"iana","compressible":true,"extensions":["link66"]},"application/vnd.rs-274x":{"source":"iana"},"application/vnd.ruckus.download":{"source":"iana"},"application/vnd.s3sms":{"source":"iana"},"application/vnd.sailingtracker.track":{"source":"iana","extensions":["st"]},"application/vnd.sar":{"source":"iana"},"application/vnd.sbm.cid":{"source":"iana"},"application/vnd.sbm.mid2":{"source":"iana"},"application/vnd.scribus":{"source":"iana"},"application/vnd.sealed.3df":{"source":"iana"},"application/vnd.sealed.csf":{"source":"iana"},"application/vnd.sealed.doc":{"source":"iana"},"application/vnd.sealed.eml":{"source":"iana"},"application/vnd.sealed.mht":{"source":"iana"},"application/vnd.sealed.net":{"source":"iana"},"application/vnd.sealed.ppt":{"source":"iana"},"application/vnd.sealed.tiff":{"source":"iana"},"application/vnd.sealed.xls":{"source":"iana"},"application/vnd.sealedmedia.softseal.html":{"source":"iana"},"application/vnd.sealedmedia.softseal.pdf":{"source":"iana"},"application/vnd.seemail":{"source":"iana","extensions":["see"]},"application/vnd.sema":{"source":"iana","extensions":["sema"]},"application/vnd.semd":{"source":"iana","extensions":["semd"]},"application/vnd.semf":{"source":"iana","extensions":["semf"]},"application/vnd.shade-save-file":{"source":"iana"},"application/vnd.shana.informed.formdata":{"source":"iana","extensions":["ifm"]},"application/vnd.shana.informed.formtemplate":{"source":"iana","extensions":["itp"]},"application/vnd.shana.informed.interchange":{"source":"iana","extensions":["iif"]},"application/vnd.shana.informed.package":{"source":"iana","extensions":["ipk"]},"application/vnd.shootproof+json":{"source":"iana","compressible":true},"application/vnd.shopkick+json":{"source":"iana","compressible":true},"application/vnd.shp":{"source":"iana"},"application/vnd.shx":{"source":"iana"},"application/vnd.sigrok.session":{"source":"iana"},"application/vnd.simtech-mindmapper":{"source":"iana","extensions":["twd","twds"]},"application/vnd.siren+json":{"source":"iana","compressible":true},"application/vnd.smaf":{"source":"iana","extensions":["mmf"]},"application/vnd.smart.notebook":{"source":"iana"},"application/vnd.smart.teacher":{"source":"iana","extensions":["teacher"]},"application/vnd.snesdev-page-table":{"source":"iana"},"application/vnd.software602.filler.form+xml":{"source":"iana","compressible":true,"extensions":["fo"]},"application/vnd.software602.filler.form-xml-zip":{"source":"iana"},"application/vnd.solent.sdkm+xml":{"source":"iana","compressible":true,"extensions":["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{"source":"iana","extensions":["dxp"]},"application/vnd.spotfire.sfs":{"source":"iana","extensions":["sfs"]},"application/vnd.sqlite3":{"source":"iana"},"application/vnd.sss-cod":{"source":"iana"},"application/vnd.sss-dtf":{"source":"iana"},"application/vnd.sss-ntf":{"source":"iana"},"application/vnd.stardivision.calc":{"source":"apache","extensions":["sdc"]},"application/vnd.stardivision.draw":{"source":"apache","extensions":["sda"]},"application/vnd.stardivision.impress":{"source":"apache","extensions":["sdd"]},"application/vnd.stardivision.math":{"source":"apache","extensions":["smf"]},"application/vnd.stardivision.writer":{"source":"apache","extensions":["sdw","vor"]},"application/vnd.stardivision.writer-global":{"source":"apache","extensions":["sgl"]},"application/vnd.stepmania.package":{"source":"iana","extensions":["smzip"]},"application/vnd.stepmania.stepchart":{"source":"iana","extensions":["sm"]},"application/vnd.street-stream":{"source":"iana"},"application/vnd.sun.wadl+xml":{"source":"iana","compressible":true,"extensions":["wadl"]},"application/vnd.sun.xml.calc":{"source":"apache","extensions":["sxc"]},"application/vnd.sun.xml.calc.template":{"source":"apache","extensions":["stc"]},"application/vnd.sun.xml.draw":{"source":"apache","extensions":["sxd"]},"application/vnd.sun.xml.draw.template":{"source":"apache","extensions":["std"]},"application/vnd.sun.xml.impress":{"source":"apache","extensions":["sxi"]},"application/vnd.sun.xml.impress.template":{"source":"apache","extensions":["sti"]},"application/vnd.sun.xml.math":{"source":"apache","extensions":["sxm"]},"application/vnd.sun.xml.writer":{"source":"apache","extensions":["sxw"]},"application/vnd.sun.xml.writer.global":{"source":"apache","extensions":["sxg"]},"application/vnd.sun.xml.writer.template":{"source":"apache","extensions":["stw"]},"application/vnd.sus-calendar":{"source":"iana","extensions":["sus","susp"]},"application/vnd.svd":{"source":"iana","extensions":["svd"]},"application/vnd.swiftview-ics":{"source":"iana"},"application/vnd.symbian.install":{"source":"apache","extensions":["sis","sisx"]},"application/vnd.syncml+xml":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["xsm"]},"application/vnd.syncml.dm+wbxml":{"source":"iana","charset":"UTF-8","extensions":["bdm"]},"application/vnd.syncml.dm+xml":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["xdm"]},"application/vnd.syncml.dm.notification":{"source":"iana"},"application/vnd.syncml.dmddf+wbxml":{"source":"iana"},"application/vnd.syncml.dmddf+xml":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["ddf"]},"application/vnd.syncml.dmtnds+wbxml":{"source":"iana"},"application/vnd.syncml.dmtnds+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.syncml.ds.notification":{"source":"iana"},"application/vnd.tableschema+json":{"source":"iana","compressible":true},"application/vnd.tao.intent-module-archive":{"source":"iana","extensions":["tao"]},"application/vnd.tcpdump.pcap":{"source":"iana","extensions":["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{"source":"iana","compressible":true},"application/vnd.tmd.mediaflex.api+xml":{"source":"iana","compressible":true},"application/vnd.tml":{"source":"iana"},"application/vnd.tmobile-livetv":{"source":"iana","extensions":["tmo"]},"application/vnd.tri.onesource":{"source":"iana"},"application/vnd.trid.tpt":{"source":"iana","extensions":["tpt"]},"application/vnd.triscape.mxs":{"source":"iana","extensions":["mxs"]},"application/vnd.trueapp":{"source":"iana","extensions":["tra"]},"application/vnd.truedoc":{"source":"iana"},"application/vnd.ubisoft.webplayer":{"source":"iana"},"application/vnd.ufdl":{"source":"iana","extensions":["ufd","ufdl"]},"application/vnd.uiq.theme":{"source":"iana","extensions":["utz"]},"application/vnd.umajin":{"source":"iana","extensions":["umj"]},"application/vnd.unity":{"source":"iana","extensions":["unityweb"]},"application/vnd.uoml+xml":{"source":"iana","compressible":true,"extensions":["uoml"]},"application/vnd.uplanet.alert":{"source":"iana"},"application/vnd.uplanet.alert-wbxml":{"source":"iana"},"application/vnd.uplanet.bearer-choice":{"source":"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{"source":"iana"},"application/vnd.uplanet.cacheop":{"source":"iana"},"application/vnd.uplanet.cacheop-wbxml":{"source":"iana"},"application/vnd.uplanet.channel":{"source":"iana"},"application/vnd.uplanet.channel-wbxml":{"source":"iana"},"application/vnd.uplanet.list":{"source":"iana"},"application/vnd.uplanet.list-wbxml":{"source":"iana"},"application/vnd.uplanet.listcmd":{"source":"iana"},"application/vnd.uplanet.listcmd-wbxml":{"source":"iana"},"application/vnd.uplanet.signal":{"source":"iana"},"application/vnd.uri-map":{"source":"iana"},"application/vnd.valve.source.material":{"source":"iana"},"application/vnd.vcx":{"source":"iana","extensions":["vcx"]},"application/vnd.vd-study":{"source":"iana"},"application/vnd.vectorworks":{"source":"iana"},"application/vnd.vel+json":{"source":"iana","compressible":true},"application/vnd.verimatrix.vcas":{"source":"iana"},"application/vnd.veryant.thin":{"source":"iana"},"application/vnd.ves.encrypted":{"source":"iana"},"application/vnd.vidsoft.vidconference":{"source":"iana"},"application/vnd.visio":{"source":"iana","extensions":["vsd","vst","vss","vsw"]},"application/vnd.visionary":{"source":"iana","extensions":["vis"]},"application/vnd.vividence.scriptfile":{"source":"iana"},"application/vnd.vsf":{"source":"iana","extensions":["vsf"]},"application/vnd.wap.sic":{"source":"iana"},"application/vnd.wap.slc":{"source":"iana"},"application/vnd.wap.wbxml":{"source":"iana","charset":"UTF-8","extensions":["wbxml"]},"application/vnd.wap.wmlc":{"source":"iana","extensions":["wmlc"]},"application/vnd.wap.wmlscriptc":{"source":"iana","extensions":["wmlsc"]},"application/vnd.webturbo":{"source":"iana","extensions":["wtb"]},"application/vnd.wfa.p2p":{"source":"iana"},"application/vnd.wfa.wsc":{"source":"iana"},"application/vnd.windows.devicepairing":{"source":"iana"},"application/vnd.wmc":{"source":"iana"},"application/vnd.wmf.bootstrap":{"source":"iana"},"application/vnd.wolfram.mathematica":{"source":"iana"},"application/vnd.wolfram.mathematica.package":{"source":"iana"},"application/vnd.wolfram.player":{"source":"iana","extensions":["nbp"]},"application/vnd.wordperfect":{"source":"iana","extensions":["wpd"]},"application/vnd.wqd":{"source":"iana","extensions":["wqd"]},"application/vnd.wrq-hp3000-labelled":{"source":"iana"},"application/vnd.wt.stf":{"source":"iana","extensions":["stf"]},"application/vnd.wv.csp+wbxml":{"source":"iana"},"application/vnd.wv.csp+xml":{"source":"iana","compressible":true},"application/vnd.wv.ssp+xml":{"source":"iana","compressible":true},"application/vnd.xacml+json":{"source":"iana","compressible":true},"application/vnd.xara":{"source":"iana","extensions":["xar"]},"application/vnd.xfdl":{"source":"iana","extensions":["xfdl"]},"application/vnd.xfdl.webform":{"source":"iana"},"application/vnd.xmi+xml":{"source":"iana","compressible":true},"application/vnd.xmpie.cpkg":{"source":"iana"},"application/vnd.xmpie.dpkg":{"source":"iana"},"application/vnd.xmpie.plan":{"source":"iana"},"application/vnd.xmpie.ppkg":{"source":"iana"},"application/vnd.xmpie.xlim":{"source":"iana"},"application/vnd.yamaha.hv-dic":{"source":"iana","extensions":["hvd"]},"application/vnd.yamaha.hv-script":{"source":"iana","extensions":["hvs"]},"application/vnd.yamaha.hv-voice":{"source":"iana","extensions":["hvp"]},"application/vnd.yamaha.openscoreformat":{"source":"iana","extensions":["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{"source":"iana","compressible":true,"extensions":["osfpvg"]},"application/vnd.yamaha.remote-setup":{"source":"iana"},"application/vnd.yamaha.smaf-audio":{"source":"iana","extensions":["saf"]},"application/vnd.yamaha.smaf-phrase":{"source":"iana","extensions":["spf"]},"application/vnd.yamaha.through-ngn":{"source":"iana"},"application/vnd.yamaha.tunnel-udpencap":{"source":"iana"},"application/vnd.yaoweme":{"source":"iana"},"application/vnd.yellowriver-custom-menu":{"source":"iana","extensions":["cmp"]},"application/vnd.youtube.yt":{"source":"iana"},"application/vnd.zul":{"source":"iana","extensions":["zir","zirz"]},"application/vnd.zzazz.deck+xml":{"source":"iana","compressible":true,"extensions":["zaz"]},"application/voicexml+xml":{"source":"iana","compressible":true,"extensions":["vxml"]},"application/voucher-cms+json":{"source":"iana","compressible":true},"application/vq-rtcpxr":{"source":"iana"},"application/wasm":{"compressible":true,"extensions":["wasm"]},"application/watcherinfo+xml":{"source":"iana","compressible":true},"application/webpush-options+json":{"source":"iana","compressible":true},"application/whoispp-query":{"source":"iana"},"application/whoispp-response":{"source":"iana"},"application/widget":{"source":"iana","extensions":["wgt"]},"application/winhlp":{"source":"apache","extensions":["hlp"]},"application/wita":{"source":"iana"},"application/wordperfect5.1":{"source":"iana"},"application/wsdl+xml":{"source":"iana","compressible":true,"extensions":["wsdl"]},"application/wspolicy+xml":{"source":"iana","compressible":true,"extensions":["wspolicy"]},"application/x-7z-compressed":{"source":"apache","compressible":false,"extensions":["7z"]},"application/x-abiword":{"source":"apache","extensions":["abw"]},"application/x-ace-compressed":{"source":"apache","extensions":["ace"]},"application/x-amf":{"source":"apache"},"application/x-apple-diskimage":{"source":"apache","extensions":["dmg"]},"application/x-arj":{"compressible":false,"extensions":["arj"]},"application/x-authorware-bin":{"source":"apache","extensions":["aab","x32","u32","vox"]},"application/x-authorware-map":{"source":"apache","extensions":["aam"]},"application/x-authorware-seg":{"source":"apache","extensions":["aas"]},"application/x-bcpio":{"source":"apache","extensions":["bcpio"]},"application/x-bdoc":{"compressible":false,"extensions":["bdoc"]},"application/x-bittorrent":{"source":"apache","extensions":["torrent"]},"application/x-blorb":{"source":"apache","extensions":["blb","blorb"]},"application/x-bzip":{"source":"apache","compressible":false,"extensions":["bz"]},"application/x-bzip2":{"source":"apache","compressible":false,"extensions":["bz2","boz"]},"application/x-cbr":{"source":"apache","extensions":["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{"source":"apache","extensions":["vcd"]},"application/x-cfs-compressed":{"source":"apache","extensions":["cfs"]},"application/x-chat":{"source":"apache","extensions":["chat"]},"application/x-chess-pgn":{"source":"apache","extensions":["pgn"]},"application/x-chrome-extension":{"extensions":["crx"]},"application/x-cocoa":{"source":"nginx","extensions":["cco"]},"application/x-compress":{"source":"apache"},"application/x-conference":{"source":"apache","extensions":["nsc"]},"application/x-cpio":{"source":"apache","extensions":["cpio"]},"application/x-csh":{"source":"apache","extensions":["csh"]},"application/x-deb":{"compressible":false},"application/x-debian-package":{"source":"apache","extensions":["deb","udeb"]},"application/x-dgc-compressed":{"source":"apache","extensions":["dgc"]},"application/x-director":{"source":"apache","extensions":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{"source":"apache","extensions":["wad"]},"application/x-dtbncx+xml":{"source":"apache","compressible":true,"extensions":["ncx"]},"application/x-dtbook+xml":{"source":"apache","compressible":true,"extensions":["dtb"]},"application/x-dtbresource+xml":{"source":"apache","compressible":true,"extensions":["res"]},"application/x-dvi":{"source":"apache","compressible":false,"extensions":["dvi"]},"application/x-envoy":{"source":"apache","extensions":["evy"]},"application/x-eva":{"source":"apache","extensions":["eva"]},"application/x-font-bdf":{"source":"apache","extensions":["bdf"]},"application/x-font-dos":{"source":"apache"},"application/x-font-framemaker":{"source":"apache"},"application/x-font-ghostscript":{"source":"apache","extensions":["gsf"]},"application/x-font-libgrx":{"source":"apache"},"application/x-font-linux-psf":{"source":"apache","extensions":["psf"]},"application/x-font-pcf":{"source":"apache","extensions":["pcf"]},"application/x-font-snf":{"source":"apache","extensions":["snf"]},"application/x-font-speedo":{"source":"apache"},"application/x-font-sunos-news":{"source":"apache"},"application/x-font-type1":{"source":"apache","extensions":["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{"source":"apache"},"application/x-freearc":{"source":"apache","extensions":["arc"]},"application/x-futuresplash":{"source":"apache","extensions":["spl"]},"application/x-gca-compressed":{"source":"apache","extensions":["gca"]},"application/x-glulx":{"source":"apache","extensions":["ulx"]},"application/x-gnumeric":{"source":"apache","extensions":["gnumeric"]},"application/x-gramps-xml":{"source":"apache","extensions":["gramps"]},"application/x-gtar":{"source":"apache","extensions":["gtar"]},"application/x-gzip":{"source":"apache"},"application/x-hdf":{"source":"apache","extensions":["hdf"]},"application/x-httpd-php":{"compressible":true,"extensions":["php"]},"application/x-install-instructions":{"source":"apache","extensions":["install"]},"application/x-iso9660-image":{"source":"apache","extensions":["iso"]},"application/x-java-archive-diff":{"source":"nginx","extensions":["jardiff"]},"application/x-java-jnlp-file":{"source":"apache","compressible":false,"extensions":["jnlp"]},"application/x-javascript":{"compressible":true},"application/x-keepass2":{"extensions":["kdbx"]},"application/x-latex":{"source":"apache","compressible":false,"extensions":["latex"]},"application/x-lua-bytecode":{"extensions":["luac"]},"application/x-lzh-compressed":{"source":"apache","extensions":["lzh","lha"]},"application/x-makeself":{"source":"nginx","extensions":["run"]},"application/x-mie":{"source":"apache","extensions":["mie"]},"application/x-mobipocket-ebook":{"source":"apache","extensions":["prc","mobi"]},"application/x-mpegurl":{"compressible":false},"application/x-ms-application":{"source":"apache","extensions":["application"]},"application/x-ms-shortcut":{"source":"apache","extensions":["lnk"]},"application/x-ms-wmd":{"source":"apache","extensions":["wmd"]},"application/x-ms-wmz":{"source":"apache","extensions":["wmz"]},"application/x-ms-xbap":{"source":"apache","extensions":["xbap"]},"application/x-msaccess":{"source":"apache","extensions":["mdb"]},"application/x-msbinder":{"source":"apache","extensions":["obd"]},"application/x-mscardfile":{"source":"apache","extensions":["crd"]},"application/x-msclip":{"source":"apache","extensions":["clp"]},"application/x-msdos-program":{"extensions":["exe"]},"application/x-msdownload":{"source":"apache","extensions":["exe","dll","com","bat","msi"]},"application/x-msmediaview":{"source":"apache","extensions":["mvb","m13","m14"]},"application/x-msmetafile":{"source":"apache","extensions":["wmf","wmz","emf","emz"]},"application/x-msmoney":{"source":"apache","extensions":["mny"]},"application/x-mspublisher":{"source":"apache","extensions":["pub"]},"application/x-msschedule":{"source":"apache","extensions":["scd"]},"application/x-msterminal":{"source":"apache","extensions":["trm"]},"application/x-mswrite":{"source":"apache","extensions":["wri"]},"application/x-netcdf":{"source":"apache","extensions":["nc","cdf"]},"application/x-ns-proxy-autoconfig":{"compressible":true,"extensions":["pac"]},"application/x-nzb":{"source":"apache","extensions":["nzb"]},"application/x-perl":{"source":"nginx","extensions":["pl","pm"]},"application/x-pilot":{"source":"nginx","extensions":["prc","pdb"]},"application/x-pkcs12":{"source":"apache","compressible":false,"extensions":["p12","pfx"]},"application/x-pkcs7-certificates":{"source":"apache","extensions":["p7b","spc"]},"application/x-pkcs7-certreqresp":{"source":"apache","extensions":["p7r"]},"application/x-pki-message":{"source":"iana"},"application/x-rar-compressed":{"source":"apache","compressible":false,"extensions":["rar"]},"application/x-redhat-package-manager":{"source":"nginx","extensions":["rpm"]},"application/x-research-info-systems":{"source":"apache","extensions":["ris"]},"application/x-sea":{"source":"nginx","extensions":["sea"]},"application/x-sh":{"source":"apache","compressible":true,"extensions":["sh"]},"application/x-shar":{"source":"apache","extensions":["shar"]},"application/x-shockwave-flash":{"source":"apache","compressible":false,"extensions":["swf"]},"application/x-silverlight-app":{"source":"apache","extensions":["xap"]},"application/x-sql":{"source":"apache","extensions":["sql"]},"application/x-stuffit":{"source":"apache","compressible":false,"extensions":["sit"]},"application/x-stuffitx":{"source":"apache","extensions":["sitx"]},"application/x-subrip":{"source":"apache","extensions":["srt"]},"application/x-sv4cpio":{"source":"apache","extensions":["sv4cpio"]},"application/x-sv4crc":{"source":"apache","extensions":["sv4crc"]},"application/x-t3vm-image":{"source":"apache","extensions":["t3"]},"application/x-tads":{"source":"apache","extensions":["gam"]},"application/x-tar":{"source":"apache","compressible":true,"extensions":["tar"]},"application/x-tcl":{"source":"apache","extensions":["tcl","tk"]},"application/x-tex":{"source":"apache","extensions":["tex"]},"application/x-tex-tfm":{"source":"apache","extensions":["tfm"]},"application/x-texinfo":{"source":"apache","extensions":["texinfo","texi"]},"application/x-tgif":{"source":"apache","extensions":["obj"]},"application/x-ustar":{"source":"apache","extensions":["ustar"]},"application/x-virtualbox-hdd":{"compressible":true,"extensions":["hdd"]},"application/x-virtualbox-ova":{"compressible":true,"extensions":["ova"]},"application/x-virtualbox-ovf":{"compressible":true,"extensions":["ovf"]},"application/x-virtualbox-vbox":{"compressible":true,"extensions":["vbox"]},"application/x-virtualbox-vbox-extpack":{"compressible":false,"extensions":["vbox-extpack"]},"application/x-virtualbox-vdi":{"compressible":true,"extensions":["vdi"]},"application/x-virtualbox-vhd":{"compressible":true,"extensions":["vhd"]},"application/x-virtualbox-vmdk":{"compressible":true,"extensions":["vmdk"]},"application/x-wais-source":{"source":"apache","extensions":["src"]},"application/x-web-app-manifest+json":{"compressible":true,"extensions":["webapp"]},"application/x-www-form-urlencoded":{"source":"iana","compressible":true},"application/x-x509-ca-cert":{"source":"iana","extensions":["der","crt","pem"]},"application/x-x509-ca-ra-cert":{"source":"iana"},"application/x-x509-next-ca-cert":{"source":"iana"},"application/x-xfig":{"source":"apache","extensions":["fig"]},"application/x-xliff+xml":{"source":"apache","compressible":true,"extensions":["xlf"]},"application/x-xpinstall":{"source":"apache","compressible":false,"extensions":["xpi"]},"application/x-xz":{"source":"apache","extensions":["xz"]},"application/x-zmachine":{"source":"apache","extensions":["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{"source":"iana"},"application/xacml+xml":{"source":"iana","compressible":true},"application/xaml+xml":{"source":"apache","compressible":true,"extensions":["xaml"]},"application/xcap-att+xml":{"source":"iana","compressible":true,"extensions":["xav"]},"application/xcap-caps+xml":{"source":"iana","compressible":true,"extensions":["xca"]},"application/xcap-diff+xml":{"source":"iana","compressible":true,"extensions":["xdf"]},"application/xcap-el+xml":{"source":"iana","compressible":true,"extensions":["xel"]},"application/xcap-error+xml":{"source":"iana","compressible":true,"extensions":["xer"]},"application/xcap-ns+xml":{"source":"iana","compressible":true,"extensions":["xns"]},"application/xcon-conference-info+xml":{"source":"iana","compressible":true},"application/xcon-conference-info-diff+xml":{"source":"iana","compressible":true},"application/xenc+xml":{"source":"iana","compressible":true,"extensions":["xenc"]},"application/xhtml+xml":{"source":"iana","compressible":true,"extensions":["xhtml","xht"]},"application/xhtml-voice+xml":{"source":"apache","compressible":true},"application/xliff+xml":{"source":"iana","compressible":true,"extensions":["xlf"]},"application/xml":{"source":"iana","compressible":true,"extensions":["xml","xsl","xsd","rng"]},"application/xml-dtd":{"source":"iana","compressible":true,"extensions":["dtd"]},"application/xml-external-parsed-entity":{"source":"iana"},"application/xml-patch+xml":{"source":"iana","compressible":true},"application/xmpp+xml":{"source":"iana","compressible":true},"application/xop+xml":{"source":"iana","compressible":true,"extensions":["xop"]},"application/xproc+xml":{"source":"apache","compressible":true,"extensions":["xpl"]},"application/xslt+xml":{"source":"iana","compressible":true,"extensions":["xslt"]},"application/xspf+xml":{"source":"apache","compressible":true,"extensions":["xspf"]},"application/xv+xml":{"source":"iana","compressible":true,"extensions":["mxml","xhvml","xvml","xvm"]},"application/yang":{"source":"iana","extensions":["yang"]},"application/yang-data+json":{"source":"iana","compressible":true},"application/yang-data+xml":{"source":"iana","compressible":true},"application/yang-patch+json":{"source":"iana","compressible":true},"application/yang-patch+xml":{"source":"iana","compressible":true},"application/yin+xml":{"source":"iana","compressible":true,"extensions":["yin"]},"application/zip":{"source":"iana","compressible":false,"extensions":["zip"]},"application/zlib":{"source":"iana"},"application/zstd":{"source":"iana"},"audio/1d-interleaved-parityfec":{"source":"iana"},"audio/32kadpcm":{"source":"iana"},"audio/3gpp":{"source":"iana","compressible":false,"extensions":["3gpp"]},"audio/3gpp2":{"source":"iana"},"audio/aac":{"source":"iana"},"audio/ac3":{"source":"iana"},"audio/adpcm":{"source":"apache","extensions":["adp"]},"audio/amr":{"source":"iana"},"audio/amr-wb":{"source":"iana"},"audio/amr-wb+":{"source":"iana"},"audio/aptx":{"source":"iana"},"audio/asc":{"source":"iana"},"audio/atrac-advanced-lossless":{"source":"iana"},"audio/atrac-x":{"source":"iana"},"audio/atrac3":{"source":"iana"},"audio/basic":{"source":"iana","compressible":false,"extensions":["au","snd"]},"audio/bv16":{"source":"iana"},"audio/bv32":{"source":"iana"},"audio/clearmode":{"source":"iana"},"audio/cn":{"source":"iana"},"audio/dat12":{"source":"iana"},"audio/dls":{"source":"iana"},"audio/dsr-es201108":{"source":"iana"},"audio/dsr-es202050":{"source":"iana"},"audio/dsr-es202211":{"source":"iana"},"audio/dsr-es202212":{"source":"iana"},"audio/dv":{"source":"iana"},"audio/dvi4":{"source":"iana"},"audio/eac3":{"source":"iana"},"audio/encaprtp":{"source":"iana"},"audio/evrc":{"source":"iana"},"audio/evrc-qcp":{"source":"iana"},"audio/evrc0":{"source":"iana"},"audio/evrc1":{"source":"iana"},"audio/evrcb":{"source":"iana"},"audio/evrcb0":{"source":"iana"},"audio/evrcb1":{"source":"iana"},"audio/evrcnw":{"source":"iana"},"audio/evrcnw0":{"source":"iana"},"audio/evrcnw1":{"source":"iana"},"audio/evrcwb":{"source":"iana"},"audio/evrcwb0":{"source":"iana"},"audio/evrcwb1":{"source":"iana"},"audio/evs":{"source":"iana"},"audio/flexfec":{"source":"iana"},"audio/fwdred":{"source":"iana"},"audio/g711-0":{"source":"iana"},"audio/g719":{"source":"iana"},"audio/g722":{"source":"iana"},"audio/g7221":{"source":"iana"},"audio/g723":{"source":"iana"},"audio/g726-16":{"source":"iana"},"audio/g726-24":{"source":"iana"},"audio/g726-32":{"source":"iana"},"audio/g726-40":{"source":"iana"},"audio/g728":{"source":"iana"},"audio/g729":{"source":"iana"},"audio/g7291":{"source":"iana"},"audio/g729d":{"source":"iana"},"audio/g729e":{"source":"iana"},"audio/gsm":{"source":"iana"},"audio/gsm-efr":{"source":"iana"},"audio/gsm-hr-08":{"source":"iana"},"audio/ilbc":{"source":"iana"},"audio/ip-mr_v2.5":{"source":"iana"},"audio/isac":{"source":"apache"},"audio/l16":{"source":"iana"},"audio/l20":{"source":"iana"},"audio/l24":{"source":"iana","compressible":false},"audio/l8":{"source":"iana"},"audio/lpc":{"source":"iana"},"audio/melp":{"source":"iana"},"audio/melp1200":{"source":"iana"},"audio/melp2400":{"source":"iana"},"audio/melp600":{"source":"iana"},"audio/mhas":{"source":"iana"},"audio/midi":{"source":"apache","extensions":["mid","midi","kar","rmi"]},"audio/mobile-xmf":{"source":"iana","extensions":["mxmf"]},"audio/mp3":{"compressible":false,"extensions":["mp3"]},"audio/mp4":{"source":"iana","compressible":false,"extensions":["m4a","mp4a"]},"audio/mp4a-latm":{"source":"iana"},"audio/mpa":{"source":"iana"},"audio/mpa-robust":{"source":"iana"},"audio/mpeg":{"source":"iana","compressible":false,"extensions":["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{"source":"iana"},"audio/musepack":{"source":"apache"},"audio/ogg":{"source":"iana","compressible":false,"extensions":["oga","ogg","spx"]},"audio/opus":{"source":"iana"},"audio/parityfec":{"source":"iana"},"audio/pcma":{"source":"iana"},"audio/pcma-wb":{"source":"iana"},"audio/pcmu":{"source":"iana"},"audio/pcmu-wb":{"source":"iana"},"audio/prs.sid":{"source":"iana"},"audio/qcelp":{"source":"iana"},"audio/raptorfec":{"source":"iana"},"audio/red":{"source":"iana"},"audio/rtp-enc-aescm128":{"source":"iana"},"audio/rtp-midi":{"source":"iana"},"audio/rtploopback":{"source":"iana"},"audio/rtx":{"source":"iana"},"audio/s3m":{"source":"apache","extensions":["s3m"]},"audio/silk":{"source":"apache","extensions":["sil"]},"audio/smv":{"source":"iana"},"audio/smv-qcp":{"source":"iana"},"audio/smv0":{"source":"iana"},"audio/sp-midi":{"source":"iana"},"audio/speex":{"source":"iana"},"audio/t140c":{"source":"iana"},"audio/t38":{"source":"iana"},"audio/telephone-event":{"source":"iana"},"audio/tetra_acelp":{"source":"iana"},"audio/tetra_acelp_bb":{"source":"iana"},"audio/tone":{"source":"iana"},"audio/uemclip":{"source":"iana"},"audio/ulpfec":{"source":"iana"},"audio/usac":{"source":"iana"},"audio/vdvi":{"source":"iana"},"audio/vmr-wb":{"source":"iana"},"audio/vnd.3gpp.iufp":{"source":"iana"},"audio/vnd.4sb":{"source":"iana"},"audio/vnd.audiokoz":{"source":"iana"},"audio/vnd.celp":{"source":"iana"},"audio/vnd.cisco.nse":{"source":"iana"},"audio/vnd.cmles.radio-events":{"source":"iana"},"audio/vnd.cns.anp1":{"source":"iana"},"audio/vnd.cns.inf1":{"source":"iana"},"audio/vnd.dece.audio":{"source":"iana","extensions":["uva","uvva"]},"audio/vnd.digital-winds":{"source":"iana","extensions":["eol"]},"audio/vnd.dlna.adts":{"source":"iana"},"audio/vnd.dolby.heaac.1":{"source":"iana"},"audio/vnd.dolby.heaac.2":{"source":"iana"},"audio/vnd.dolby.mlp":{"source":"iana"},"audio/vnd.dolby.mps":{"source":"iana"},"audio/vnd.dolby.pl2":{"source":"iana"},"audio/vnd.dolby.pl2x":{"source":"iana"},"audio/vnd.dolby.pl2z":{"source":"iana"},"audio/vnd.dolby.pulse.1":{"source":"iana"},"audio/vnd.dra":{"source":"iana","extensions":["dra"]},"audio/vnd.dts":{"source":"iana","extensions":["dts"]},"audio/vnd.dts.hd":{"source":"iana","extensions":["dtshd"]},"audio/vnd.dts.uhd":{"source":"iana"},"audio/vnd.dvb.file":{"source":"iana"},"audio/vnd.everad.plj":{"source":"iana"},"audio/vnd.hns.audio":{"source":"iana"},"audio/vnd.lucent.voice":{"source":"iana","extensions":["lvp"]},"audio/vnd.ms-playready.media.pya":{"source":"iana","extensions":["pya"]},"audio/vnd.nokia.mobile-xmf":{"source":"iana"},"audio/vnd.nortel.vbk":{"source":"iana"},"audio/vnd.nuera.ecelp4800":{"source":"iana","extensions":["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{"source":"iana","extensions":["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{"source":"iana","extensions":["ecelp9600"]},"audio/vnd.octel.sbc":{"source":"iana"},"audio/vnd.presonus.multitrack":{"source":"iana"},"audio/vnd.qcelp":{"source":"iana"},"audio/vnd.rhetorex.32kadpcm":{"source":"iana"},"audio/vnd.rip":{"source":"iana","extensions":["rip"]},"audio/vnd.rn-realaudio":{"compressible":false},"audio/vnd.sealedmedia.softseal.mpeg":{"source":"iana"},"audio/vnd.vmx.cvsd":{"source":"iana"},"audio/vnd.wave":{"compressible":false},"audio/vorbis":{"source":"iana","compressible":false},"audio/vorbis-config":{"source":"iana"},"audio/wav":{"compressible":false,"extensions":["wav"]},"audio/wave":{"compressible":false,"extensions":["wav"]},"audio/webm":{"source":"apache","compressible":false,"extensions":["weba"]},"audio/x-aac":{"source":"apache","compressible":false,"extensions":["aac"]},"audio/x-aiff":{"source":"apache","extensions":["aif","aiff","aifc"]},"audio/x-caf":{"source":"apache","compressible":false,"extensions":["caf"]},"audio/x-flac":{"source":"apache","extensions":["flac"]},"audio/x-m4a":{"source":"nginx","extensions":["m4a"]},"audio/x-matroska":{"source":"apache","extensions":["mka"]},"audio/x-mpegurl":{"source":"apache","extensions":["m3u"]},"audio/x-ms-wax":{"source":"apache","extensions":["wax"]},"audio/x-ms-wma":{"source":"apache","extensions":["wma"]},"audio/x-pn-realaudio":{"source":"apache","extensions":["ram","ra"]},"audio/x-pn-realaudio-plugin":{"source":"apache","extensions":["rmp"]},"audio/x-realaudio":{"source":"nginx","extensions":["ra"]},"audio/x-tta":{"source":"apache"},"audio/x-wav":{"source":"apache","extensions":["wav"]},"audio/xm":{"source":"apache","extensions":["xm"]},"chemical/x-cdx":{"source":"apache","extensions":["cdx"]},"chemical/x-cif":{"source":"apache","extensions":["cif"]},"chemical/x-cmdf":{"source":"apache","extensions":["cmdf"]},"chemical/x-cml":{"source":"apache","extensions":["cml"]},"chemical/x-csml":{"source":"apache","extensions":["csml"]},"chemical/x-pdb":{"source":"apache"},"chemical/x-xyz":{"source":"apache","extensions":["xyz"]},"font/collection":{"source":"iana","extensions":["ttc"]},"font/otf":{"source":"iana","compressible":true,"extensions":["otf"]},"font/sfnt":{"source":"iana"},"font/ttf":{"source":"iana","compressible":true,"extensions":["ttf"]},"font/woff":{"source":"iana","extensions":["woff"]},"font/woff2":{"source":"iana","extensions":["woff2"]},"image/aces":{"source":"iana","extensions":["exr"]},"image/apng":{"compressible":false,"extensions":["apng"]},"image/avci":{"source":"iana"},"image/avcs":{"source":"iana"},"image/bmp":{"source":"iana","compressible":true,"extensions":["bmp"]},"image/cgm":{"source":"iana","extensions":["cgm"]},"image/dicom-rle":{"source":"iana","extensions":["drle"]},"image/emf":{"source":"iana","extensions":["emf"]},"image/fits":{"source":"iana","extensions":["fits"]},"image/g3fax":{"source":"iana","extensions":["g3"]},"image/gif":{"source":"iana","compressible":false,"extensions":["gif"]},"image/heic":{"source":"iana","extensions":["heic"]},"image/heic-sequence":{"source":"iana","extensions":["heics"]},"image/heif":{"source":"iana","extensions":["heif"]},"image/heif-sequence":{"source":"iana","extensions":["heifs"]},"image/hej2k":{"source":"iana","extensions":["hej2"]},"image/hsj2":{"source":"iana","extensions":["hsj2"]},"image/ief":{"source":"iana","extensions":["ief"]},"image/jls":{"source":"iana","extensions":["jls"]},"image/jp2":{"source":"iana","compressible":false,"extensions":["jp2","jpg2"]},"image/jpeg":{"source":"iana","compressible":false,"extensions":["jpeg","jpg","jpe"]},"image/jph":{"source":"iana","extensions":["jph"]},"image/jphc":{"source":"iana","extensions":["jhc"]},"image/jpm":{"source":"iana","compressible":false,"extensions":["jpm"]},"image/jpx":{"source":"iana","compressible":false,"extensions":["jpx","jpf"]},"image/jxr":{"source":"iana","extensions":["jxr"]},"image/jxra":{"source":"iana","extensions":["jxra"]},"image/jxrs":{"source":"iana","extensions":["jxrs"]},"image/jxs":{"source":"iana","extensions":["jxs"]},"image/jxsc":{"source":"iana","extensions":["jxsc"]},"image/jxsi":{"source":"iana","extensions":["jxsi"]},"image/jxss":{"source":"iana","extensions":["jxss"]},"image/ktx":{"source":"iana","extensions":["ktx"]},"image/naplps":{"source":"iana"},"image/pjpeg":{"compressible":false},"image/png":{"source":"iana","compressible":false,"extensions":["png"]},"image/prs.btif":{"source":"iana","extensions":["btif"]},"image/prs.pti":{"source":"iana","extensions":["pti"]},"image/pwg-raster":{"source":"iana"},"image/sgi":{"source":"apache","extensions":["sgi"]},"image/svg+xml":{"source":"iana","compressible":true,"extensions":["svg","svgz"]},"image/t38":{"source":"iana","extensions":["t38"]},"image/tiff":{"source":"iana","compressible":false,"extensions":["tif","tiff"]},"image/tiff-fx":{"source":"iana","extensions":["tfx"]},"image/vnd.adobe.photoshop":{"source":"iana","compressible":true,"extensions":["psd"]},"image/vnd.airzip.accelerator.azv":{"source":"iana","extensions":["azv"]},"image/vnd.cns.inf2":{"source":"iana"},"image/vnd.dece.graphic":{"source":"iana","extensions":["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{"source":"iana","extensions":["djvu","djv"]},"image/vnd.dvb.subtitle":{"source":"iana","extensions":["sub"]},"image/vnd.dwg":{"source":"iana","extensions":["dwg"]},"image/vnd.dxf":{"source":"iana","extensions":["dxf"]},"image/vnd.fastbidsheet":{"source":"iana","extensions":["fbs"]},"image/vnd.fpx":{"source":"iana","extensions":["fpx"]},"image/vnd.fst":{"source":"iana","extensions":["fst"]},"image/vnd.fujixerox.edmics-mmr":{"source":"iana","extensions":["mmr"]},"image/vnd.fujixerox.edmics-rlc":{"source":"iana","extensions":["rlc"]},"image/vnd.globalgraphics.pgb":{"source":"iana"},"image/vnd.microsoft.icon":{"source":"iana","extensions":["ico"]},"image/vnd.mix":{"source":"iana"},"image/vnd.mozilla.apng":{"source":"iana"},"image/vnd.ms-dds":{"extensions":["dds"]},"image/vnd.ms-modi":{"source":"iana","extensions":["mdi"]},"image/vnd.ms-photo":{"source":"apache","extensions":["wdp"]},"image/vnd.net-fpx":{"source":"iana","extensions":["npx"]},"image/vnd.radiance":{"source":"iana"},"image/vnd.sealed.png":{"source":"iana"},"image/vnd.sealedmedia.softseal.gif":{"source":"iana"},"image/vnd.sealedmedia.softseal.jpg":{"source":"iana"},"image/vnd.svf":{"source":"iana"},"image/vnd.tencent.tap":{"source":"iana","extensions":["tap"]},"image/vnd.valve.source.texture":{"source":"iana","extensions":["vtf"]},"image/vnd.wap.wbmp":{"source":"iana","extensions":["wbmp"]},"image/vnd.xiff":{"source":"iana","extensions":["xif"]},"image/vnd.zbrush.pcx":{"source":"iana","extensions":["pcx"]},"image/webp":{"source":"apache","extensions":["webp"]},"image/wmf":{"source":"iana","extensions":["wmf"]},"image/x-3ds":{"source":"apache","extensions":["3ds"]},"image/x-cmu-raster":{"source":"apache","extensions":["ras"]},"image/x-cmx":{"source":"apache","extensions":["cmx"]},"image/x-freehand":{"source":"apache","extensions":["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{"source":"apache","compressible":true,"extensions":["ico"]},"image/x-jng":{"source":"nginx","extensions":["jng"]},"image/x-mrsid-image":{"source":"apache","extensions":["sid"]},"image/x-ms-bmp":{"source":"nginx","compressible":true,"extensions":["bmp"]},"image/x-pcx":{"source":"apache","extensions":["pcx"]},"image/x-pict":{"source":"apache","extensions":["pic","pct"]},"image/x-portable-anymap":{"source":"apache","extensions":["pnm"]},"image/x-portable-bitmap":{"source":"apache","extensions":["pbm"]},"image/x-portable-graymap":{"source":"apache","extensions":["pgm"]},"image/x-portable-pixmap":{"source":"apache","extensions":["ppm"]},"image/x-rgb":{"source":"apache","extensions":["rgb"]},"image/x-tga":{"source":"apache","extensions":["tga"]},"image/x-xbitmap":{"source":"apache","extensions":["xbm"]},"image/x-xcf":{"compressible":false},"image/x-xpixmap":{"source":"apache","extensions":["xpm"]},"image/x-xwindowdump":{"source":"apache","extensions":["xwd"]},"message/cpim":{"source":"iana"},"message/delivery-status":{"source":"iana"},"message/disposition-notification":{"source":"iana","extensions":["disposition-notification"]},"message/external-body":{"source":"iana"},"message/feedback-report":{"source":"iana"},"message/global":{"source":"iana","extensions":["u8msg"]},"message/global-delivery-status":{"source":"iana","extensions":["u8dsn"]},"message/global-disposition-notification":{"source":"iana","extensions":["u8mdn"]},"message/global-headers":{"source":"iana","extensions":["u8hdr"]},"message/http":{"source":"iana","compressible":false},"message/imdn+xml":{"source":"iana","compressible":true},"message/news":{"source":"iana"},"message/partial":{"source":"iana","compressible":false},"message/rfc822":{"source":"iana","compressible":true,"extensions":["eml","mime"]},"message/s-http":{"source":"iana"},"message/sip":{"source":"iana"},"message/sipfrag":{"source":"iana"},"message/tracking-status":{"source":"iana"},"message/vnd.si.simp":{"source":"iana"},"message/vnd.wfa.wsc":{"source":"iana","extensions":["wsc"]},"model/3mf":{"source":"iana","extensions":["3mf"]},"model/gltf+json":{"source":"iana","compressible":true,"extensions":["gltf"]},"model/gltf-binary":{"source":"iana","compressible":true,"extensions":["glb"]},"model/iges":{"source":"iana","compressible":false,"extensions":["igs","iges"]},"model/mesh":{"source":"iana","compressible":false,"extensions":["msh","mesh","silo"]},"model/mtl":{"source":"iana","extensions":["mtl"]},"model/obj":{"source":"iana","extensions":["obj"]},"model/stl":{"source":"iana","extensions":["stl"]},"model/vnd.collada+xml":{"source":"iana","compressible":true,"extensions":["dae"]},"model/vnd.dwf":{"source":"iana","extensions":["dwf"]},"model/vnd.flatland.3dml":{"source":"iana"},"model/vnd.gdl":{"source":"iana","extensions":["gdl"]},"model/vnd.gs-gdl":{"source":"apache"},"model/vnd.gs.gdl":{"source":"iana"},"model/vnd.gtw":{"source":"iana","extensions":["gtw"]},"model/vnd.moml+xml":{"source":"iana","compressible":true},"model/vnd.mts":{"source":"iana","extensions":["mts"]},"model/vnd.opengex":{"source":"iana","extensions":["ogex"]},"model/vnd.parasolid.transmit.binary":{"source":"iana","extensions":["x_b"]},"model/vnd.parasolid.transmit.text":{"source":"iana","extensions":["x_t"]},"model/vnd.rosette.annotated-data-model":{"source":"iana"},"model/vnd.usdz+zip":{"source":"iana","compressible":false,"extensions":["usdz"]},"model/vnd.valve.source.compiled-map":{"source":"iana","extensions":["bsp"]},"model/vnd.vtu":{"source":"iana","extensions":["vtu"]},"model/vrml":{"source":"iana","compressible":false,"extensions":["wrl","vrml"]},"model/x3d+binary":{"source":"apache","compressible":false,"extensions":["x3db","x3dbz"]},"model/x3d+fastinfoset":{"source":"iana","extensions":["x3db"]},"model/x3d+vrml":{"source":"apache","compressible":false,"extensions":["x3dv","x3dvz"]},"model/x3d+xml":{"source":"iana","compressible":true,"extensions":["x3d","x3dz"]},"model/x3d-vrml":{"source":"iana","extensions":["x3dv"]},"multipart/alternative":{"source":"iana","compressible":false},"multipart/appledouble":{"source":"iana"},"multipart/byteranges":{"source":"iana"},"multipart/digest":{"source":"iana"},"multipart/encrypted":{"source":"iana","compressible":false},"multipart/form-data":{"source":"iana","compressible":false},"multipart/header-set":{"source":"iana"},"multipart/mixed":{"source":"iana"},"multipart/multilingual":{"source":"iana"},"multipart/parallel":{"source":"iana"},"multipart/related":{"source":"iana","compressible":false},"multipart/report":{"source":"iana"},"multipart/signed":{"source":"iana","compressible":false},"multipart/vnd.bint.med-plus":{"source":"iana"},"multipart/voice-message":{"source":"iana"},"multipart/x-mixed-replace":{"source":"iana"},"text/1d-interleaved-parityfec":{"source":"iana"},"text/cache-manifest":{"source":"iana","compressible":true,"extensions":["appcache","manifest"]},"text/calendar":{"source":"iana","extensions":["ics","ifb"]},"text/calender":{"compressible":true},"text/cmd":{"compressible":true},"text/coffeescript":{"extensions":["coffee","litcoffee"]},"text/css":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["css"]},"text/csv":{"source":"iana","compressible":true,"extensions":["csv"]},"text/csv-schema":{"source":"iana"},"text/directory":{"source":"iana"},"text/dns":{"source":"iana"},"text/ecmascript":{"source":"iana"},"text/encaprtp":{"source":"iana"},"text/enriched":{"source":"iana"},"text/flexfec":{"source":"iana"},"text/fwdred":{"source":"iana"},"text/grammar-ref-list":{"source":"iana"},"text/html":{"source":"iana","compressible":true,"extensions":["html","htm","shtml"]},"text/jade":{"extensions":["jade"]},"text/javascript":{"source":"iana","compressible":true},"text/jcr-cnd":{"source":"iana"},"text/jsx":{"compressible":true,"extensions":["jsx"]},"text/less":{"compressible":true,"extensions":["less"]},"text/markdown":{"source":"iana","compressible":true,"extensions":["markdown","md"]},"text/mathml":{"source":"nginx","extensions":["mml"]},"text/mdx":{"compressible":true,"extensions":["mdx"]},"text/mizar":{"source":"iana"},"text/n3":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["n3"]},"text/parameters":{"source":"iana","charset":"UTF-8"},"text/parityfec":{"source":"iana"},"text/plain":{"source":"iana","compressible":true,"extensions":["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{"source":"iana","charset":"UTF-8"},"text/prs.fallenstein.rst":{"source":"iana"},"text/prs.lines.tag":{"source":"iana","extensions":["dsc"]},"text/prs.prop.logic":{"source":"iana"},"text/raptorfec":{"source":"iana"},"text/red":{"source":"iana"},"text/rfc822-headers":{"source":"iana"},"text/richtext":{"source":"iana","compressible":true,"extensions":["rtx"]},"text/rtf":{"source":"iana","compressible":true,"extensions":["rtf"]},"text/rtp-enc-aescm128":{"source":"iana"},"text/rtploopback":{"source":"iana"},"text/rtx":{"source":"iana"},"text/sgml":{"source":"iana","extensions":["sgml","sgm"]},"text/shex":{"extensions":["shex"]},"text/slim":{"extensions":["slim","slm"]},"text/strings":{"source":"iana"},"text/stylus":{"extensions":["stylus","styl"]},"text/t140":{"source":"iana"},"text/tab-separated-values":{"source":"iana","compressible":true,"extensions":["tsv"]},"text/troff":{"source":"iana","extensions":["t","tr","roff","man","me","ms"]},"text/turtle":{"source":"iana","charset":"UTF-8","extensions":["ttl"]},"text/ulpfec":{"source":"iana"},"text/uri-list":{"source":"iana","compressible":true,"extensions":["uri","uris","urls"]},"text/vcard":{"source":"iana","compressible":true,"extensions":["vcard"]},"text/vnd.a":{"source":"iana"},"text/vnd.abc":{"source":"iana"},"text/vnd.ascii-art":{"source":"iana"},"text/vnd.curl":{"source":"iana","extensions":["curl"]},"text/vnd.curl.dcurl":{"source":"apache","extensions":["dcurl"]},"text/vnd.curl.mcurl":{"source":"apache","extensions":["mcurl"]},"text/vnd.curl.scurl":{"source":"apache","extensions":["scurl"]},"text/vnd.debian.copyright":{"source":"iana","charset":"UTF-8"},"text/vnd.dmclientscript":{"source":"iana"},"text/vnd.dvb.subtitle":{"source":"iana","extensions":["sub"]},"text/vnd.esmertec.theme-descriptor":{"source":"iana","charset":"UTF-8"},"text/vnd.ficlab.flt":{"source":"iana"},"text/vnd.fly":{"source":"iana","extensions":["fly"]},"text/vnd.fmi.flexstor":{"source":"iana","extensions":["flx"]},"text/vnd.gml":{"source":"iana"},"text/vnd.graphviz":{"source":"iana","extensions":["gv"]},"text/vnd.hgl":{"source":"iana"},"text/vnd.in3d.3dml":{"source":"iana","extensions":["3dml"]},"text/vnd.in3d.spot":{"source":"iana","extensions":["spot"]},"text/vnd.iptc.newsml":{"source":"iana"},"text/vnd.iptc.nitf":{"source":"iana"},"text/vnd.latex-z":{"source":"iana"},"text/vnd.motorola.reflex":{"source":"iana"},"text/vnd.ms-mediapackage":{"source":"iana"},"text/vnd.net2phone.commcenter.command":{"source":"iana"},"text/vnd.radisys.msml-basic-layout":{"source":"iana"},"text/vnd.senx.warpscript":{"source":"iana"},"text/vnd.si.uricatalogue":{"source":"iana"},"text/vnd.sosi":{"source":"iana"},"text/vnd.sun.j2me.app-descriptor":{"source":"iana","charset":"UTF-8","extensions":["jad"]},"text/vnd.trolltech.linguist":{"source":"iana","charset":"UTF-8"},"text/vnd.wap.si":{"source":"iana"},"text/vnd.wap.sl":{"source":"iana"},"text/vnd.wap.wml":{"source":"iana","extensions":["wml"]},"text/vnd.wap.wmlscript":{"source":"iana","extensions":["wmls"]},"text/vtt":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["vtt"]},"text/x-asm":{"source":"apache","extensions":["s","asm"]},"text/x-c":{"source":"apache","extensions":["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{"source":"nginx","extensions":["htc"]},"text/x-fortran":{"source":"apache","extensions":["f","for","f77","f90"]},"text/x-gwt-rpc":{"compressible":true},"text/x-handlebars-template":{"extensions":["hbs"]},"text/x-java-source":{"source":"apache","extensions":["java"]},"text/x-jquery-tmpl":{"compressible":true},"text/x-lua":{"extensions":["lua"]},"text/x-markdown":{"compressible":true,"extensions":["mkd"]},"text/x-nfo":{"source":"apache","extensions":["nfo"]},"text/x-opml":{"source":"apache","extensions":["opml"]},"text/x-org":{"compressible":true,"extensions":["org"]},"text/x-pascal":{"source":"apache","extensions":["p","pas"]},"text/x-processing":{"compressible":true,"extensions":["pde"]},"text/x-sass":{"extensions":["sass"]},"text/x-scss":{"extensions":["scss"]},"text/x-setext":{"source":"apache","extensions":["etx"]},"text/x-sfv":{"source":"apache","extensions":["sfv"]},"text/x-suse-ymp":{"compressible":true,"extensions":["ymp"]},"text/x-uuencode":{"source":"apache","extensions":["uu"]},"text/x-vcalendar":{"source":"apache","extensions":["vcs"]},"text/x-vcard":{"source":"apache","extensions":["vcf"]},"text/xml":{"source":"iana","compressible":true,"extensions":["xml"]},"text/xml-external-parsed-entity":{"source":"iana"},"text/yaml":{"extensions":["yaml","yml"]},"video/1d-interleaved-parityfec":{"source":"iana"},"video/3gpp":{"source":"iana","extensions":["3gp","3gpp"]},"video/3gpp-tt":{"source":"iana"},"video/3gpp2":{"source":"iana","extensions":["3g2"]},"video/bmpeg":{"source":"iana"},"video/bt656":{"source":"iana"},"video/celb":{"source":"iana"},"video/dv":{"source":"iana"},"video/encaprtp":{"source":"iana"},"video/flexfec":{"source":"iana"},"video/h261":{"source":"iana","extensions":["h261"]},"video/h263":{"source":"iana","extensions":["h263"]},"video/h263-1998":{"source":"iana"},"video/h263-2000":{"source":"iana"},"video/h264":{"source":"iana","extensions":["h264"]},"video/h264-rcdo":{"source":"iana"},"video/h264-svc":{"source":"iana"},"video/h265":{"source":"iana"},"video/iso.segment":{"source":"iana"},"video/jpeg":{"source":"iana","extensions":["jpgv"]},"video/jpeg2000":{"source":"iana"},"video/jpm":{"source":"apache","extensions":["jpm","jpgm"]},"video/mj2":{"source":"iana","extensions":["mj2","mjp2"]},"video/mp1s":{"source":"iana"},"video/mp2p":{"source":"iana"},"video/mp2t":{"source":"iana","extensions":["ts"]},"video/mp4":{"source":"iana","compressible":false,"extensions":["mp4","mp4v","mpg4"]},"video/mp4v-es":{"source":"iana"},"video/mpeg":{"source":"iana","compressible":false,"extensions":["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{"source":"iana"},"video/mpv":{"source":"iana"},"video/nv":{"source":"iana"},"video/ogg":{"source":"iana","compressible":false,"extensions":["ogv"]},"video/parityfec":{"source":"iana"},"video/pointer":{"source":"iana"},"video/quicktime":{"source":"iana","compressible":false,"extensions":["qt","mov"]},"video/raptorfec":{"source":"iana"},"video/raw":{"source":"iana"},"video/rtp-enc-aescm128":{"source":"iana"},"video/rtploopback":{"source":"iana"},"video/rtx":{"source":"iana"},"video/smpte291":{"source":"iana"},"video/smpte292m":{"source":"iana"},"video/ulpfec":{"source":"iana"},"video/vc1":{"source":"iana"},"video/vc2":{"source":"iana"},"video/vnd.cctv":{"source":"iana"},"video/vnd.dece.hd":{"source":"iana","extensions":["uvh","uvvh"]},"video/vnd.dece.mobile":{"source":"iana","extensions":["uvm","uvvm"]},"video/vnd.dece.mp4":{"source":"iana"},"video/vnd.dece.pd":{"source":"iana","extensions":["uvp","uvvp"]},"video/vnd.dece.sd":{"source":"iana","extensions":["uvs","uvvs"]},"video/vnd.dece.video":{"source":"iana","extensions":["uvv","uvvv"]},"video/vnd.directv.mpeg":{"source":"iana"},"video/vnd.directv.mpeg-tts":{"source":"iana"},"video/vnd.dlna.mpeg-tts":{"source":"iana"},"video/vnd.dvb.file":{"source":"iana","extensions":["dvb"]},"video/vnd.fvt":{"source":"iana","extensions":["fvt"]},"video/vnd.hns.video":{"source":"iana"},"video/vnd.iptvforum.1dparityfec-1010":{"source":"iana"},"video/vnd.iptvforum.1dparityfec-2005":{"source":"iana"},"video/vnd.iptvforum.2dparityfec-1010":{"source":"iana"},"video/vnd.iptvforum.2dparityfec-2005":{"source":"iana"},"video/vnd.iptvforum.ttsavc":{"source":"iana"},"video/vnd.iptvforum.ttsmpeg2":{"source":"iana"},"video/vnd.motorola.video":{"source":"iana"},"video/vnd.motorola.videop":{"source":"iana"},"video/vnd.mpegurl":{"source":"iana","extensions":["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{"source":"iana","extensions":["pyv"]},"video/vnd.nokia.interleaved-multimedia":{"source":"iana"},"video/vnd.nokia.mp4vr":{"source":"iana"},"video/vnd.nokia.videovoip":{"source":"iana"},"video/vnd.objectvideo":{"source":"iana"},"video/vnd.radgamettools.bink":{"source":"iana"},"video/vnd.radgamettools.smacker":{"source":"iana"},"video/vnd.sealed.mpeg1":{"source":"iana"},"video/vnd.sealed.mpeg4":{"source":"iana"},"video/vnd.sealed.swf":{"source":"iana"},"video/vnd.sealedmedia.softseal.mov":{"source":"iana"},"video/vnd.uvvu.mp4":{"source":"iana","extensions":["uvu","uvvu"]},"video/vnd.vivo":{"source":"iana","extensions":["viv"]},"video/vnd.youtube.yt":{"source":"iana"},"video/vp8":{"source":"iana"},"video/webm":{"source":"apache","compressible":false,"extensions":["webm"]},"video/x-f4v":{"source":"apache","extensions":["f4v"]},"video/x-fli":{"source":"apache","extensions":["fli"]},"video/x-flv":{"source":"apache","compressible":false,"extensions":["flv"]},"video/x-m4v":{"source":"apache","extensions":["m4v"]},"video/x-matroska":{"source":"apache","compressible":false,"extensions":["mkv","mk3d","mks"]},"video/x-mng":{"source":"apache","extensions":["mng"]},"video/x-ms-asf":{"source":"apache","extensions":["asf","asx"]},"video/x-ms-vob":{"source":"apache","extensions":["vob"]},"video/x-ms-wm":{"source":"apache","extensions":["wm"]},"video/x-ms-wmv":{"source":"apache","compressible":false,"extensions":["wmv"]},"video/x-ms-wmx":{"source":"apache","extensions":["wmx"]},"video/x-ms-wvx":{"source":"apache","extensions":["wvx"]},"video/x-msvideo":{"source":"apache","extensions":["avi"]},"video/x-sgi-movie":{"source":"apache","extensions":["movie"]},"video/x-smv":{"source":"apache","extensions":["smv"]},"x-conference/x-cooltalk":{"source":"apache","extensions":["ice"]},"x-shader/x-fragment":{"compressible":true},"x-shader/x-vertex":{"compressible":true}}')},function(module,exports,__webpack_require__){(function(process){function normalizeArray(parts,allowAboveRoot){for(var up=0,i=parts.length-1;i>=0;i--){var last=parts[i];"."===last?parts.splice(i,1):".."===last?(parts.splice(i,1),up++):up&&(parts.splice(i,1),up--)}if(allowAboveRoot)for(;up--;up)parts.unshift("..");return parts}function filter(xs,f){if(xs.filter)return xs.filter(f);for(var res=[],i=0;i<xs.length;i++)f(xs[i],i,xs)&&res.push(xs[i]);return res}exports.resolve=function(){for(var resolvedPath="",resolvedAbsolute=!1,i=arguments.length-1;i>=-1&&!resolvedAbsolute;i--){var path=i>=0?arguments[i]:process.cwd();if("string"!=typeof path)throw new TypeError("Arguments to path.resolve must be strings");path&&(resolvedPath=path+"/"+resolvedPath,resolvedAbsolute="/"===path.charAt(0))}return(resolvedAbsolute?"/":"")+(resolvedPath=normalizeArray(filter(resolvedPath.split("/"),(function(p){return!!p})),!resolvedAbsolute).join("/"))||"."},exports.normalize=function(path){var isAbsolute=exports.isAbsolute(path),trailingSlash="/"===substr(path,-1);return(path=normalizeArray(filter(path.split("/"),(function(p){return!!p})),!isAbsolute).join("/"))||isAbsolute||(path="."),path&&trailingSlash&&(path+="/"),(isAbsolute?"/":"")+path},exports.isAbsolute=function(path){return"/"===path.charAt(0)},exports.join=function(){var paths=Array.prototype.slice.call(arguments,0);return exports.normalize(filter(paths,(function(p,index){if("string"!=typeof p)throw new TypeError("Arguments to path.join must be strings");return p})).join("/"))},exports.relative=function(from,to){function trim(arr){for(var start=0;start<arr.length&&""===arr[start];start++);for(var end=arr.length-1;end>=0&&""===arr[end];end--);return start>end?[]:arr.slice(start,end-start+1)}from=exports.resolve(from).substr(1),to=exports.resolve(to).substr(1);for(var fromParts=trim(from.split("/")),toParts=trim(to.split("/")),length=Math.min(fromParts.length,toParts.length),samePartsLength=length,i=0;i<length;i++)if(fromParts[i]!==toParts[i]){samePartsLength=i;break}var outputParts=[];for(i=samePartsLength;i<fromParts.length;i++)outputParts.push("..");return(outputParts=outputParts.concat(toParts.slice(samePartsLength))).join("/")},exports.sep="/",exports.delimiter=":",exports.dirname=function(path){if("string"!=typeof path&&(path+=""),0===path.length)return".";for(var code=path.charCodeAt(0),hasRoot=47===code,end=-1,matchedSlash=!0,i=path.length-1;i>=1;--i)if(47===(code=path.charCodeAt(i))){if(!matchedSlash){end=i;break}}else matchedSlash=!1;return-1===end?hasRoot?"/":".":hasRoot&&1===end?"/":path.slice(0,end)},exports.basename=function(path,ext){var f=function(path){"string"!=typeof path&&(path+="");var i,start=0,end=-1,matchedSlash=!0;for(i=path.length-1;i>=0;--i)if(47===path.charCodeAt(i)){if(!matchedSlash){start=i+1;break}}else-1===end&&(matchedSlash=!1,end=i+1);return-1===end?"":path.slice(start,end)}(path);return ext&&f.substr(-1*ext.length)===ext&&(f=f.substr(0,f.length-ext.length)),f},exports.extname=function(path){"string"!=typeof path&&(path+="");for(var startDot=-1,startPart=0,end=-1,matchedSlash=!0,preDotState=0,i=path.length-1;i>=0;--i){var code=path.charCodeAt(i);if(47!==code)-1===end&&(matchedSlash=!1,end=i+1),46===code?-1===startDot?startDot=i:1!==preDotState&&(preDotState=1):-1!==startDot&&(preDotState=-1);else if(!matchedSlash){startPart=i+1;break}}return-1===startDot||-1===end||0===preDotState||1===preDotState&&startDot===end-1&&startDot===startPart+1?"":path.slice(startDot,end)};var substr="b"==="ab".substr(-1)?function(str,start,len){return str.substr(start,len)}:function(str,start,len){return start<0&&(start=str.length+start),str.substr(start,len)}}).call(this,__webpack_require__(88))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<fieldset class="flex-item form">\r\n    <div class="form-group">\r\n        <input class="form-control" type="search" role="searchbox" data-bind="textInput: searchPattern, valueUpdate: \'keyup\', focus: true" placeholder="Search fonts..." aria-label="Search fonts" aria-controls="searchResult">\r\n        <p id="searchResult" class="text-hide" role="region" aria-live="polite" data-bind="text: `Fonts found: ${fonts().length}`">\r\n        </p>\r\n    </div>\r\n</fieldset>\r\n\r\n<div class="flex flex-column flex-item flex-item-grow fonts" role="list" data-bind="scrollable: { onEndReach: $component.loadNextPage }" aria-live="polite">\r\n    \x3c!-- ko foreach: { data: fonts, as: \'font\' } --\x3e\r\n    <div class="list-item font-box" data-bind="css: { selected: font === $component.selectedFont() }, scrolledIntoView: { onInView: font.loadPreview }">\r\n        <style data-bind="jss: preview"></style>\r\n        <a href="#" role="listitem" class="font-family" data-bind="click: $component.selectFont, text: font.family, style: { \'font-family\': font.family }">\r\n        </a>\r\n    </div>\r\n    \x3c!--/ko --\x3e\r\n</div>\r\n\r\n<div class="flex-item btn-group">\r\n    <button class="btn" data-bind="click: uploadFont">\r\n        <i class="paperbits-icon paperbits-square-upload"></i>\r\n        Upload font\r\n    </button>\r\n</div>'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GoogleFont=void 0;const Utils=__webpack_require__(6),ko=__webpack_require__(0),styles_1=__webpack_require__(8);exports.GoogleFont=class{constructor(contract){this.loadPreview=this.loadPreview.bind(this),this.identifier=Utils.identifier(),this.preview=ko.observable(),this.displayName=contract.family,this.family=contract.family,this.files=contract.files,this.variants=contract.variants,this.version=contract.version,this.category=contract.category,this.lastModified=contract.lastModified}loadPreview(){if(this.preview())return;const fileName=this.files.regular||this.files[400]||this.files[this.variants[0]],fontFace=new styles_1.FontFace;fontFace.fontFamily=this.family,fontFace.src=fileName.replace("http://","https://"),fontFace.fontStyle="normal",fontFace.fontWeight="normal";const styleSheet=new styles_1.StyleSheet;styleSheet.fontFaces.push(fontFace),this.preview(styleSheet)}toContract(){return{key:"fonts/"+this.identifier,family:this.family,displayName:this.family,category:this.category,version:this.version,lastModified:this.lastModified,variants:this.variants.map(variantName=>{const matches=/(\d*)(\w*)/gm.exec(variantName);return{weight:+matches[1]||400,style:("regular"===matches[2]?"normal":matches[2])||"normal",file:this.files[variantName].replace("http://","https://")}})}}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.FontParser=void 0;const opentype=__webpack_require__(941),Utils=__webpack_require__(6);exports.FontParser=class{static parse(contents){return __awaiter(this,void 0,void 0,(function*(){let fontFamily,fontWeight,fontStyle;try{const info=opentype.parse(contents);fontFamily=info.names.fontFamily.en;const matches=/(\d*)(\w*)/gm.exec(info.names.fontSubfamily.en);fontWeight=matches[1]||"400",fontStyle=matches[2]||"normal"}catch(error){fontFamily="Font",fontWeight="normal",fontStyle="normal"}const identifier=Utils.guid();return{key:"fonts/"+identifier,family:fontFamily,displayName:fontFamily,category:null,version:null,lastModified:(new Date).toISOString(),variants:[{weight:fontWeight,style:fontStyle.toLowerCase(),sourceKey:identifier}]}}))}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(Buffer){var defineProperty,codePointAt;__webpack_require__.d(__webpack_exports__,"BoundingBox",(function(){return BoundingBox})),__webpack_require__.d(__webpack_exports__,"Font",(function(){return Font})),__webpack_require__.d(__webpack_exports__,"Glyph",(function(){return Glyph})),__webpack_require__.d(__webpack_exports__,"Path",(function(){return Path})),__webpack_require__.d(__webpack_exports__,"_parse",(function(){return parse})),__webpack_require__.d(__webpack_exports__,"load",(function(){return load})),__webpack_require__.d(__webpack_exports__,"loadSync",(function(){return loadSync})),__webpack_require__.d(__webpack_exports__,"parse",(function(){return parseBuffer})),String.prototype.codePointAt||(defineProperty=function(){try{var object={},$defineProperty=Object.defineProperty,result=$defineProperty(object,object,object)&&$defineProperty}catch(error){}return result}(),codePointAt=function(position){if(null==this)throw TypeError();var string=String(this),size=string.length,index=position?Number(position):0;if(index!=index&&(index=0),!(index<0||index>=size)){var second,first=string.charCodeAt(index);return first>=55296&&first<=56319&&size>index+1&&(second=string.charCodeAt(index+1))>=56320&&second<=57343?1024*(first-55296)+second-56320+65536:first}},defineProperty?defineProperty(String.prototype,"codePointAt",{value:codePointAt,configurable:!0,writable:!0}):String.prototype.codePointAt=codePointAt);function Tree(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function Data(source,dest){this.source=source,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=dest,this.destLen=0,this.ltree=new Tree,this.dtree=new Tree}var sltree=new Tree,sdtree=new Tree,length_bits=new Uint8Array(30),length_base=new Uint16Array(30),dist_bits=new Uint8Array(30),dist_base=new Uint16Array(30),clcidx=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),code_tree=new Tree,lengths=new Uint8Array(320);function tinf_build_bits_base(bits,base,delta,first){var i,sum;for(i=0;i<delta;++i)bits[i]=0;for(i=0;i<30-delta;++i)bits[i+delta]=i/delta|0;for(sum=first,i=0;i<30;++i)base[i]=sum,sum+=1<<bits[i]}var offs=new Uint16Array(16);function tinf_build_tree(t,lengths,off,num){var i,sum;for(i=0;i<16;++i)t.table[i]=0;for(i=0;i<num;++i)t.table[lengths[off+i]]++;for(t.table[0]=0,sum=0,i=0;i<16;++i)offs[i]=sum,sum+=t.table[i];for(i=0;i<num;++i)lengths[off+i]&&(t.trans[offs[lengths[off+i]]++]=i)}function tinf_getbit(d){d.bitcount--||(d.tag=d.source[d.sourceIndex++],d.bitcount=7);var bit=1&d.tag;return d.tag>>>=1,bit}function tinf_read_bits(d,num,base){if(!num)return base;for(;d.bitcount<24;)d.tag|=d.source[d.sourceIndex++]<<d.bitcount,d.bitcount+=8;var val=d.tag&65535>>>16-num;return d.tag>>>=num,d.bitcount-=num,val+base}function tinf_decode_symbol(d,t){for(;d.bitcount<24;)d.tag|=d.source[d.sourceIndex++]<<d.bitcount,d.bitcount+=8;var sum=0,cur=0,len=0,tag=d.tag;do{cur=2*cur+(1&tag),tag>>>=1,++len,sum+=t.table[len],cur-=t.table[len]}while(cur>=0);return d.tag=tag,d.bitcount-=len,t.trans[sum+cur]}function tinf_decode_trees(d,lt,dt){var hlit,hdist,hclen,i,num,length;for(hlit=tinf_read_bits(d,5,257),hdist=tinf_read_bits(d,5,1),hclen=tinf_read_bits(d,4,4),i=0;i<19;++i)lengths[i]=0;for(i=0;i<hclen;++i){var clen=tinf_read_bits(d,3,0);lengths[clcidx[i]]=clen}for(tinf_build_tree(code_tree,lengths,0,19),num=0;num<hlit+hdist;){var sym=tinf_decode_symbol(d,code_tree);switch(sym){case 16:var prev=lengths[num-1];for(length=tinf_read_bits(d,2,3);length;--length)lengths[num++]=prev;break;case 17:for(length=tinf_read_bits(d,3,3);length;--length)lengths[num++]=0;break;case 18:for(length=tinf_read_bits(d,7,11);length;--length)lengths[num++]=0;break;default:lengths[num++]=sym}}tinf_build_tree(lt,lengths,0,hlit),tinf_build_tree(dt,lengths,hlit,hdist)}function tinf_inflate_block_data(d,lt,dt){for(;;){var length,dist,offs,i,sym=tinf_decode_symbol(d,lt);if(256===sym)return 0;if(sym<256)d.dest[d.destLen++]=sym;else for(length=tinf_read_bits(d,length_bits[sym-=257],length_base[sym]),dist=tinf_decode_symbol(d,dt),i=offs=d.destLen-tinf_read_bits(d,dist_bits[dist],dist_base[dist]);i<offs+length;++i)d.dest[d.destLen++]=d.dest[i]}}function tinf_inflate_uncompressed_block(d){for(var length,i;d.bitcount>8;)d.sourceIndex--,d.bitcount-=8;if((length=256*(length=d.source[d.sourceIndex+1])+d.source[d.sourceIndex])!==(65535&~(256*d.source[d.sourceIndex+3]+d.source[d.sourceIndex+2])))return-3;for(d.sourceIndex+=4,i=length;i;--i)d.dest[d.destLen++]=d.source[d.sourceIndex++];return d.bitcount=0,0}!function(lt,dt){var i;for(i=0;i<7;++i)lt.table[i]=0;for(lt.table[7]=24,lt.table[8]=152,lt.table[9]=112,i=0;i<24;++i)lt.trans[i]=256+i;for(i=0;i<144;++i)lt.trans[24+i]=i;for(i=0;i<8;++i)lt.trans[168+i]=280+i;for(i=0;i<112;++i)lt.trans[176+i]=144+i;for(i=0;i<5;++i)dt.table[i]=0;for(dt.table[5]=32,i=0;i<32;++i)dt.trans[i]=i}(sltree,sdtree),tinf_build_bits_base(length_bits,length_base,4,3),tinf_build_bits_base(dist_bits,dist_base,2,1),length_bits[28]=0,length_base[28]=258;var tinyInflate=function(source,dest){var bfinal,res,d=new Data(source,dest);do{switch(bfinal=tinf_getbit(d),tinf_read_bits(d,2,0)){case 0:res=tinf_inflate_uncompressed_block(d);break;case 1:res=tinf_inflate_block_data(d,sltree,sdtree);break;case 2:tinf_decode_trees(d,d.ltree,d.dtree),res=tinf_inflate_block_data(d,d.ltree,d.dtree);break;default:res=-3}if(0!==res)throw new Error("Data error")}while(!bfinal);return d.destLen<d.dest.length?"function"==typeof d.dest.slice?d.dest.slice(0,d.destLen):d.dest.subarray(0,d.destLen):d.dest};function derive(v0,v1,v2,v3,t){return Math.pow(1-t,3)*v0+3*Math.pow(1-t,2)*t*v1+3*(1-t)*Math.pow(t,2)*v2+Math.pow(t,3)*v3}function BoundingBox(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function Path(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function fail(message){throw new Error(message)}function argument(predicate,message){predicate||fail(message)}BoundingBox.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},BoundingBox.prototype.addPoint=function(x,y){"number"==typeof x&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=x,this.x2=x),x<this.x1&&(this.x1=x),x>this.x2&&(this.x2=x)),"number"==typeof y&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=y,this.y2=y),y<this.y1&&(this.y1=y),y>this.y2&&(this.y2=y))},BoundingBox.prototype.addX=function(x){this.addPoint(x,null)},BoundingBox.prototype.addY=function(y){this.addPoint(null,y)},BoundingBox.prototype.addBezier=function(x0,y0,x1,y1,x2,y2,x,y){var p0=[x0,y0],p1=[x1,y1],p2=[x2,y2],p3=[x,y];this.addPoint(x0,y0),this.addPoint(x,y);for(var i=0;i<=1;i++){var b=6*p0[i]-12*p1[i]+6*p2[i],a=-3*p0[i]+9*p1[i]-9*p2[i]+3*p3[i],c=3*p1[i]-3*p0[i];if(0!==a){var b2ac=Math.pow(b,2)-4*c*a;if(!(b2ac<0)){var t1=(-b+Math.sqrt(b2ac))/(2*a);0<t1&&t1<1&&(0===i&&this.addX(derive(p0[i],p1[i],p2[i],p3[i],t1)),1===i&&this.addY(derive(p0[i],p1[i],p2[i],p3[i],t1)));var t2=(-b-Math.sqrt(b2ac))/(2*a);0<t2&&t2<1&&(0===i&&this.addX(derive(p0[i],p1[i],p2[i],p3[i],t2)),1===i&&this.addY(derive(p0[i],p1[i],p2[i],p3[i],t2)))}}else{if(0===b)continue;var t=-c/b;0<t&&t<1&&(0===i&&this.addX(derive(p0[i],p1[i],p2[i],p3[i],t)),1===i&&this.addY(derive(p0[i],p1[i],p2[i],p3[i],t)))}}},BoundingBox.prototype.addQuad=function(x0,y0,x1,y1,x,y){var cp1x=x0+2/3*(x1-x0),cp1y=y0+2/3*(y1-y0),cp2x=cp1x+1/3*(x-x0),cp2y=cp1y+1/3*(y-y0);this.addBezier(x0,y0,cp1x,cp1y,cp2x,cp2y,x,y)},Path.prototype.moveTo=function(x,y){this.commands.push({type:"M",x:x,y:y})},Path.prototype.lineTo=function(x,y){this.commands.push({type:"L",x:x,y:y})},Path.prototype.curveTo=Path.prototype.bezierCurveTo=function(x1,y1,x2,y2,x,y){this.commands.push({type:"C",x1:x1,y1:y1,x2:x2,y2:y2,x:x,y:y})},Path.prototype.quadTo=Path.prototype.quadraticCurveTo=function(x1,y1,x,y){this.commands.push({type:"Q",x1:x1,y1:y1,x:x,y:y})},Path.prototype.close=Path.prototype.closePath=function(){this.commands.push({type:"Z"})},Path.prototype.extend=function(pathOrCommands){if(pathOrCommands.commands)pathOrCommands=pathOrCommands.commands;else if(pathOrCommands instanceof BoundingBox){var box=pathOrCommands;return this.moveTo(box.x1,box.y1),this.lineTo(box.x2,box.y1),this.lineTo(box.x2,box.y2),this.lineTo(box.x1,box.y2),void this.close()}Array.prototype.push.apply(this.commands,pathOrCommands)},Path.prototype.getBoundingBox=function(){for(var box=new BoundingBox,startX=0,startY=0,prevX=0,prevY=0,i=0;i<this.commands.length;i++){var cmd=this.commands[i];switch(cmd.type){case"M":box.addPoint(cmd.x,cmd.y),startX=prevX=cmd.x,startY=prevY=cmd.y;break;case"L":box.addPoint(cmd.x,cmd.y),prevX=cmd.x,prevY=cmd.y;break;case"Q":box.addQuad(prevX,prevY,cmd.x1,cmd.y1,cmd.x,cmd.y),prevX=cmd.x,prevY=cmd.y;break;case"C":box.addBezier(prevX,prevY,cmd.x1,cmd.y1,cmd.x2,cmd.y2,cmd.x,cmd.y),prevX=cmd.x,prevY=cmd.y;break;case"Z":prevX=startX,prevY=startY;break;default:throw new Error("Unexpected path command "+cmd.type)}}return box.isEmpty()&&box.addPoint(0,0),box},Path.prototype.draw=function(ctx){ctx.beginPath();for(var i=0;i<this.commands.length;i+=1){var cmd=this.commands[i];"M"===cmd.type?ctx.moveTo(cmd.x,cmd.y):"L"===cmd.type?ctx.lineTo(cmd.x,cmd.y):"C"===cmd.type?ctx.bezierCurveTo(cmd.x1,cmd.y1,cmd.x2,cmd.y2,cmd.x,cmd.y):"Q"===cmd.type?ctx.quadraticCurveTo(cmd.x1,cmd.y1,cmd.x,cmd.y):"Z"===cmd.type&&ctx.closePath()}this.fill&&(ctx.fillStyle=this.fill,ctx.fill()),this.stroke&&(ctx.strokeStyle=this.stroke,ctx.lineWidth=this.strokeWidth,ctx.stroke())},Path.prototype.toPathData=function(decimalPlaces){function floatToString(v){return Math.round(v)===v?""+Math.round(v):v.toFixed(decimalPlaces)}function packValues(){for(var arguments$1=arguments,s="",i=0;i<arguments.length;i+=1){var v=arguments$1[i];v>=0&&i>0&&(s+=" "),s+=floatToString(v)}return s}decimalPlaces=void 0!==decimalPlaces?decimalPlaces:2;for(var d="",i=0;i<this.commands.length;i+=1){var cmd=this.commands[i];"M"===cmd.type?d+="M"+packValues(cmd.x,cmd.y):"L"===cmd.type?d+="L"+packValues(cmd.x,cmd.y):"C"===cmd.type?d+="C"+packValues(cmd.x1,cmd.y1,cmd.x2,cmd.y2,cmd.x,cmd.y):"Q"===cmd.type?d+="Q"+packValues(cmd.x1,cmd.y1,cmd.x,cmd.y):"Z"===cmd.type&&(d+="Z")}return d},Path.prototype.toSVG=function(decimalPlaces){var svg='<path d="';return svg+=this.toPathData(decimalPlaces),svg+='"',this.fill&&"black"!==this.fill&&(null===this.fill?svg+=' fill="none"':svg+=' fill="'+this.fill+'"'),this.stroke&&(svg+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),svg+="/>"},Path.prototype.toDOMElement=function(decimalPlaces){var temporaryPath=this.toPathData(decimalPlaces),newPath=document.createElementNS("http://www.w3.org/2000/svg","path");return newPath.setAttribute("d",temporaryPath),newPath};var check={fail:fail,argument:argument,assert:argument},decode={},encode={},sizeOf={};function constant(v){return function(){return v}}encode.BYTE=function(v){return check.argument(v>=0&&v<=255,"Byte value should be between 0 and 255."),[v]},sizeOf.BYTE=constant(1),encode.CHAR=function(v){return[v.charCodeAt(0)]},sizeOf.CHAR=constant(1),encode.CHARARRAY=function(v){for(var b=[],i=0;i<v.length;i+=1)b[i]=v.charCodeAt(i);return b},sizeOf.CHARARRAY=function(v){return v.length},encode.USHORT=function(v){return[v>>8&255,255&v]},sizeOf.USHORT=constant(2),encode.SHORT=function(v){return v>=32768&&(v=-(65536-v)),[v>>8&255,255&v]},sizeOf.SHORT=constant(2),encode.UINT24=function(v){return[v>>16&255,v>>8&255,255&v]},sizeOf.UINT24=constant(3),encode.ULONG=function(v){return[v>>24&255,v>>16&255,v>>8&255,255&v]},sizeOf.ULONG=constant(4),encode.LONG=function(v){return v>=2147483648&&(v=-(4294967296-v)),[v>>24&255,v>>16&255,v>>8&255,255&v]},sizeOf.LONG=constant(4),encode.FIXED=encode.ULONG,sizeOf.FIXED=sizeOf.ULONG,encode.FWORD=encode.SHORT,sizeOf.FWORD=sizeOf.SHORT,encode.UFWORD=encode.USHORT,sizeOf.UFWORD=sizeOf.USHORT,encode.LONGDATETIME=function(v){return[0,0,0,0,v>>24&255,v>>16&255,v>>8&255,255&v]},sizeOf.LONGDATETIME=constant(8),encode.TAG=function(v){return check.argument(4===v.length,"Tag should be exactly 4 ASCII characters."),[v.charCodeAt(0),v.charCodeAt(1),v.charCodeAt(2),v.charCodeAt(3)]},sizeOf.TAG=constant(4),encode.Card8=encode.BYTE,sizeOf.Card8=sizeOf.BYTE,encode.Card16=encode.USHORT,sizeOf.Card16=sizeOf.USHORT,encode.OffSize=encode.BYTE,sizeOf.OffSize=sizeOf.BYTE,encode.SID=encode.USHORT,sizeOf.SID=sizeOf.USHORT,encode.NUMBER=function(v){return v>=-107&&v<=107?[v+139]:v>=108&&v<=1131?[247+((v-=108)>>8),255&v]:v>=-1131&&v<=-108?[251+((v=-v-108)>>8),255&v]:v>=-32768&&v<=32767?encode.NUMBER16(v):encode.NUMBER32(v)},sizeOf.NUMBER=function(v){return encode.NUMBER(v).length},encode.NUMBER16=function(v){return[28,v>>8&255,255&v]},sizeOf.NUMBER16=constant(3),encode.NUMBER32=function(v){return[29,v>>24&255,v>>16&255,v>>8&255,255&v]},sizeOf.NUMBER32=constant(5),encode.REAL=function(v){var value=v.toString(),m=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(value);if(m){var epsilon=parseFloat("1e"+((m[2]?+m[2]:0)+m[1].length));value=(Math.round(v*epsilon)/epsilon).toString()}for(var nibbles="",i=0,ii=value.length;i<ii;i+=1){var c=value[i];nibbles+="e"===c?"-"===value[++i]?"c":"b":"."===c?"a":"-"===c?"e":c}for(var out=[30],i$1=0,ii$1=(nibbles+=1&nibbles.length?"f":"ff").length;i$1<ii$1;i$1+=2)out.push(parseInt(nibbles.substr(i$1,2),16));return out},sizeOf.REAL=function(v){return encode.REAL(v).length},encode.NAME=encode.CHARARRAY,sizeOf.NAME=sizeOf.CHARARRAY,encode.STRING=encode.CHARARRAY,sizeOf.STRING=sizeOf.CHARARRAY,decode.UTF8=function(data,offset,numBytes){for(var codePoints=[],numChars=numBytes,j=0;j<numChars;j++,offset+=1)codePoints[j]=data.getUint8(offset);return String.fromCharCode.apply(null,codePoints)},decode.UTF16=function(data,offset,numBytes){for(var codePoints=[],numChars=numBytes/2,j=0;j<numChars;j++,offset+=2)codePoints[j]=data.getUint16(offset);return String.fromCharCode.apply(null,codePoints)},encode.UTF16=function(v){for(var b=[],i=0;i<v.length;i+=1){var codepoint=v.charCodeAt(i);b[b.length]=codepoint>>8&255,b[b.length]=255&codepoint}return b},sizeOf.UTF16=function(v){return 2*v.length};var eightBitMacEncodings={"x-mac-croatian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®Š™´¨≠ŽØ∞±≤≥∆µ∂∑∏š∫ªºΩžø¿¡¬√ƒ≈Ć«Č… ÀÃÕŒœĐ—“”‘’÷◊©⁄€‹›Æ»–·‚„‰ÂćÁčÈÍÎÏÌÓÔđÒÚÛÙıˆ˜¯πË˚¸Êæˇ","x-mac-cyrillic":"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ†°Ґ£§•¶І®©™Ђђ≠Ѓѓ∞±≤≥іµґЈЄєЇїЉљЊњјЅ¬√ƒ≈∆«»… ЋћЌќѕ–—“”‘’÷„ЎўЏџ№Ёёяабвгдежзийклмнопрстуфхцчшщъыьэю","x-mac-gaelic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØḂ±≤≥ḃĊċḊḋḞḟĠġṀæøṁṖṗɼƒſṠ«»… ÀÃÕŒœ–—“”‘’ṡẛÿŸṪ€‹›Ŷŷṫ·Ỳỳ⁊ÂÊÁËÈÍÎÏÌÓÔ♣ÒÚÛÙıÝýŴŵẄẅẀẁẂẃ","x-mac-greek":"Ä¹²É³ÖÜ΅àâä΄¨çéèêë£™îï•½‰ôö¦€ùûü†ΓΔΘΛΞΠß®©ΣΪ§≠°·Α±≤≥¥ΒΕΖΗΙΚΜΦΫΨΩάΝ¬ΟΡ≈Τ«»… ΥΧΆΈœ–―“”‘’÷ΉΊΌΎέήίόΏύαβψδεφγηιξκλμνοπώρστθωςχυζϊϋΐΰ­","x-mac-icelandic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûüÝ°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€ÐðÞþý·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-inuit":"ᐃᐄᐅᐆᐊᐋᐱᐲᐳᐴᐸᐹᑉᑎᑏᑐᑑᑕᑖᑦᑭᑮᑯᑰᑲᑳᒃᒋᒌᒍᒎᒐᒑ°ᒡᒥᒦ•¶ᒧ®©™ᒨᒪᒫᒻᓂᓃᓄᓅᓇᓈᓐᓯᓰᓱᓲᓴᓵᔅᓕᓖᓗᓘᓚᓛᓪᔨᔩᔪᔫᔭ… ᔮᔾᕕᕖᕗ–—“”‘’ᕘᕙᕚᕝᕆᕇᕈᕉᕋᕌᕐᕿᖀᖁᖂᖃᖄᖅᖏᖐᖑᖒᖓᖔᖕᙱᙲᙳᙴᙵᙶᖖᖠᖡᖢᖣᖤᖥᖦᕼŁł","x-mac-ce":"ÄĀāÉĄÖÜáąČäčĆćéŹźĎíďĒēĖóėôöõúĚěü†°Ę£§•¶ß®©™ę¨≠ģĮįĪ≤≥īĶ∂∑łĻļĽľĹĺŅņŃ¬√ńŇ∆«»… ňŐÕőŌ–—“”‘’÷◊ōŔŕŘ‹›řŖŗŠ‚„šŚśÁŤťÍŽžŪÓÔūŮÚůŰűŲųÝýķŻŁżĢˇ",macintosh:"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›ﬁﬂ‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-romanian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ĂȘ∞±≤≥¥µ∂∑∏π∫ªºΩăș¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›Țț‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-turkish":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸĞğİıŞş‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙˆ˜¯˘˙˚¸˝˛ˇ"};decode.MACSTRING=function(dataView,offset,dataLength,encoding){var table=eightBitMacEncodings[encoding];if(void 0!==table){for(var result="",i=0;i<dataLength;i++){var c=dataView.getUint8(offset+i);result+=c<=127?String.fromCharCode(c):table[127&c]}return result}};var macEncodingCacheKeys,macEncodingTableCache="function"==typeof WeakMap&&new WeakMap;function isByteEncodable(value){return value>=-128&&value<=127}function encodeVarDeltaRunAsZeroes(deltas,pos,result){for(var runLength=0,numDeltas=deltas.length;pos<numDeltas&&runLength<64&&0===deltas[pos];)++pos,++runLength;return result.push(128|runLength-1),pos}function encodeVarDeltaRunAsBytes(deltas,offset,result){for(var runLength=0,numDeltas=deltas.length,pos=offset;pos<numDeltas&&runLength<64;){var value=deltas[pos];if(!isByteEncodable(value))break;if(0===value&&pos+1<numDeltas&&0===deltas[pos+1])break;++pos,++runLength}result.push(runLength-1);for(var i=offset;i<pos;++i)result.push(deltas[i]+256&255);return pos}function encodeVarDeltaRunAsWords(deltas,offset,result){for(var runLength=0,numDeltas=deltas.length,pos=offset;pos<numDeltas&&runLength<64;){var value=deltas[pos];if(0===value)break;if(isByteEncodable(value)&&pos+1<numDeltas&&isByteEncodable(deltas[pos+1]))break;++pos,++runLength}result.push(64|runLength-1);for(var i=offset;i<pos;++i){var val=deltas[i];result.push(val+65536>>8&255,val+256&255)}return pos}encode.MACSTRING=function(str,encoding){var table=function(encoding){if(!macEncodingCacheKeys)for(var e in macEncodingCacheKeys={},eightBitMacEncodings)macEncodingCacheKeys[e]=new String(e);var cacheKey=macEncodingCacheKeys[encoding];if(void 0!==cacheKey){if(macEncodingTableCache){var cachedTable=macEncodingTableCache.get(cacheKey);if(void 0!==cachedTable)return cachedTable}var decodingTable=eightBitMacEncodings[encoding];if(void 0!==decodingTable){for(var encodingTable={},i=0;i<decodingTable.length;i++)encodingTable[decodingTable.charCodeAt(i)]=i+128;return macEncodingTableCache&&macEncodingTableCache.set(cacheKey,encodingTable),encodingTable}}}(encoding);if(void 0!==table){for(var result=[],i=0;i<str.length;i++){var c=str.charCodeAt(i);if(c>=128&&void 0===(c=table[c]))return;result[i]=c}return result}},sizeOf.MACSTRING=function(str,encoding){var b=encode.MACSTRING(str,encoding);return void 0!==b?b.length:0},encode.VARDELTAS=function(deltas){for(var pos=0,result=[];pos<deltas.length;){var value=deltas[pos];pos=0===value?encodeVarDeltaRunAsZeroes(deltas,pos,result):value>=-128&&value<=127?encodeVarDeltaRunAsBytes(deltas,pos,result):encodeVarDeltaRunAsWords(deltas,pos,result)}return result},encode.INDEX=function(l){for(var offset=1,offsets=[offset],data=[],i=0;i<l.length;i+=1){var v=encode.OBJECT(l[i]);Array.prototype.push.apply(data,v),offset+=v.length,offsets.push(offset)}if(0===data.length)return[0,0];for(var encodedOffsets=[],offSize=1+Math.floor(Math.log(offset)/Math.log(2))/8|0,offsetEncoder=[void 0,encode.BYTE,encode.USHORT,encode.UINT24,encode.ULONG][offSize],i$1=0;i$1<offsets.length;i$1+=1){var encodedOffset=offsetEncoder(offsets[i$1]);Array.prototype.push.apply(encodedOffsets,encodedOffset)}return Array.prototype.concat(encode.Card16(l.length),encode.OffSize(offSize),encodedOffsets,data)},sizeOf.INDEX=function(v){return encode.INDEX(v).length},encode.DICT=function(m){for(var d=[],keys=Object.keys(m),length=keys.length,i=0;i<length;i+=1){var k=parseInt(keys[i],0),v=m[k];d=(d=d.concat(encode.OPERAND(v.value,v.type))).concat(encode.OPERATOR(k))}return d},sizeOf.DICT=function(m){return encode.DICT(m).length},encode.OPERATOR=function(v){return v<1200?[v]:[12,v-1200]},encode.OPERAND=function(v,type){var d=[];if(Array.isArray(type))for(var i=0;i<type.length;i+=1)check.argument(v.length===type.length,"Not enough arguments given for type"+type),d=d.concat(encode.OPERAND(v[i],type[i]));else if("SID"===type)d=d.concat(encode.NUMBER(v));else if("offset"===type)d=d.concat(encode.NUMBER32(v));else if("number"===type)d=d.concat(encode.NUMBER(v));else{if("real"!==type)throw new Error("Unknown operand type "+type);d=d.concat(encode.REAL(v))}return d},encode.OP=encode.BYTE,sizeOf.OP=sizeOf.BYTE;var wmm="function"==typeof WeakMap&&new WeakMap;function Table(tableName,fields,options){for(var i=0;i<fields.length;i+=1){var field=fields[i];this[field.name]=field.value}if(this.tableName=tableName,this.fields=fields,options)for(var optionKeys=Object.keys(options),i$1=0;i$1<optionKeys.length;i$1+=1){var k=optionKeys[i$1],v=options[k];void 0!==this[k]&&(this[k]=v)}}function ushortList(itemName,list,count){void 0===count&&(count=list.length);var fields=new Array(list.length+1);fields[0]={name:itemName+"Count",type:"USHORT",value:count};for(var i=0;i<list.length;i++)fields[i+1]={name:itemName+i,type:"USHORT",value:list[i]};return fields}function tableList(itemName,records,itemCallback){var count=records.length,fields=new Array(count+1);fields[0]={name:itemName+"Count",type:"USHORT",value:count};for(var i=0;i<count;i++)fields[i+1]={name:itemName+i,type:"TABLE",value:itemCallback(records[i],i)};return fields}function recordList(itemName,records,itemCallback){var count=records.length,fields=[];fields[0]={name:itemName+"Count",type:"USHORT",value:count};for(var i=0;i<count;i++)fields=fields.concat(itemCallback(records[i],i));return fields}function Coverage(coverageTable){1===coverageTable.format?Table.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(ushortList("glyph",coverageTable.glyphs))):check.assert(!1,"Can't create coverage table format 2 yet.")}function ScriptList(scriptListTable){Table.call(this,"scriptListTable",recordList("scriptRecord",scriptListTable,(function(scriptRecord,i){var script=scriptRecord.script,defaultLangSys=script.defaultLangSys;return check.assert(!!defaultLangSys,"Unable to write GSUB: script "+scriptRecord.tag+" has no default language system."),[{name:"scriptTag"+i,type:"TAG",value:scriptRecord.tag},{name:"script"+i,type:"TABLE",value:new Table("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new Table("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:defaultLangSys.reqFeatureIndex}].concat(ushortList("featureIndex",defaultLangSys.featureIndexes)))}].concat(recordList("langSys",script.langSysRecords,(function(langSysRecord,i){var langSys=langSysRecord.langSys;return[{name:"langSysTag"+i,type:"TAG",value:langSysRecord.tag},{name:"langSys"+i,type:"TABLE",value:new Table("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:langSys.reqFeatureIndex}].concat(ushortList("featureIndex",langSys.featureIndexes)))}]}))))}]})))}function FeatureList(featureListTable){Table.call(this,"featureListTable",recordList("featureRecord",featureListTable,(function(featureRecord,i){var feature=featureRecord.feature;return[{name:"featureTag"+i,type:"TAG",value:featureRecord.tag},{name:"feature"+i,type:"TABLE",value:new Table("featureTable",[{name:"featureParams",type:"USHORT",value:feature.featureParams}].concat(ushortList("lookupListIndex",feature.lookupListIndexes)))}]})))}function LookupList(lookupListTable,subtableMakers){Table.call(this,"lookupListTable",tableList("lookup",lookupListTable,(function(lookupTable){var subtableCallback=subtableMakers[lookupTable.lookupType];return check.assert(!!subtableCallback,"Unable to write GSUB lookup type "+lookupTable.lookupType+" tables."),new Table("lookupTable",[{name:"lookupType",type:"USHORT",value:lookupTable.lookupType},{name:"lookupFlag",type:"USHORT",value:lookupTable.lookupFlag}].concat(tableList("subtable",lookupTable.subtables,subtableCallback)))})))}encode.CHARSTRING=function(ops){if(wmm){var cachedValue=wmm.get(ops);if(void 0!==cachedValue)return cachedValue}for(var d=[],length=ops.length,i=0;i<length;i+=1){var op=ops[i];d=d.concat(encode[op.type](op.value))}return wmm&&wmm.set(ops,d),d},sizeOf.CHARSTRING=function(ops){return encode.CHARSTRING(ops).length},encode.OBJECT=function(v){var encodingFunction=encode[v.type];return check.argument(void 0!==encodingFunction,"No encoding function for type "+v.type),encodingFunction(v.value)},sizeOf.OBJECT=function(v){var sizeOfFunction=sizeOf[v.type];return check.argument(void 0!==sizeOfFunction,"No sizeOf function for type "+v.type),sizeOfFunction(v.value)},encode.TABLE=function(table){for(var d=[],length=table.fields.length,subtables=[],subtableOffsets=[],i=0;i<length;i+=1){var field=table.fields[i],encodingFunction=encode[field.type];check.argument(void 0!==encodingFunction,"No encoding function for field type "+field.type+" ("+field.name+")");var value=table[field.name];void 0===value&&(value=field.value);var bytes=encodingFunction(value);"TABLE"===field.type?(subtableOffsets.push(d.length),d=d.concat([0,0]),subtables.push(bytes)):d=d.concat(bytes)}for(var i$1=0;i$1<subtables.length;i$1+=1){var o=subtableOffsets[i$1],offset=d.length;check.argument(offset<65536,"Table "+table.tableName+" too big."),d[o]=offset>>8,d[o+1]=255&offset,d=d.concat(subtables[i$1])}return d},sizeOf.TABLE=function(table){for(var numBytes=0,length=table.fields.length,i=0;i<length;i+=1){var field=table.fields[i],sizeOfFunction=sizeOf[field.type];check.argument(void 0!==sizeOfFunction,"No sizeOf function for field type "+field.type+" ("+field.name+")");var value=table[field.name];void 0===value&&(value=field.value),numBytes+=sizeOfFunction(value),"TABLE"===field.type&&(numBytes+=2)}return numBytes},encode.RECORD=encode.TABLE,sizeOf.RECORD=sizeOf.TABLE,encode.LITERAL=function(v){return v},sizeOf.LITERAL=function(v){return v.length},Table.prototype.encode=function(){return encode.TABLE(this)},Table.prototype.sizeOf=function(){return sizeOf.TABLE(this)},Coverage.prototype=Object.create(Table.prototype),Coverage.prototype.constructor=Coverage,ScriptList.prototype=Object.create(Table.prototype),ScriptList.prototype.constructor=ScriptList,FeatureList.prototype=Object.create(Table.prototype),FeatureList.prototype.constructor=FeatureList,LookupList.prototype=Object.create(Table.prototype),LookupList.prototype.constructor=LookupList;var table={Table:Table,Record:Table,Coverage:Coverage,ScriptList:ScriptList,FeatureList:FeatureList,LookupList:LookupList,ushortList:ushortList,tableList:tableList,recordList:recordList};function getByte(dataView,offset){return dataView.getUint8(offset)}function getUShort(dataView,offset){return dataView.getUint16(offset,!1)}function getULong(dataView,offset){return dataView.getUint32(offset,!1)}function getFixed(dataView,offset){return dataView.getInt16(offset,!1)+dataView.getUint16(offset+2,!1)/65535}var typeOffsets={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function Parser(data,offset){this.data=data,this.offset=offset,this.relativeOffset=0}Parser.prototype.parseByte=function(){var v=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,v},Parser.prototype.parseChar=function(){var v=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,v},Parser.prototype.parseCard8=Parser.prototype.parseByte,Parser.prototype.parseUShort=function(){var v=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,v},Parser.prototype.parseCard16=Parser.prototype.parseUShort,Parser.prototype.parseSID=Parser.prototype.parseUShort,Parser.prototype.parseOffset16=Parser.prototype.parseUShort,Parser.prototype.parseShort=function(){var v=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,v},Parser.prototype.parseF2Dot14=function(){var v=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,v},Parser.prototype.parseULong=function(){var v=getULong(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,v},Parser.prototype.parseOffset32=Parser.prototype.parseULong,Parser.prototype.parseFixed=function(){var v=getFixed(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,v},Parser.prototype.parseString=function(length){var dataView=this.data,offset=this.offset+this.relativeOffset,string="";this.relativeOffset+=length;for(var i=0;i<length;i++)string+=String.fromCharCode(dataView.getUint8(offset+i));return string},Parser.prototype.parseTag=function(){return this.parseString(4)},Parser.prototype.parseLongDateTime=function(){var v=getULong(this.data,this.offset+this.relativeOffset+4);return v-=2082844800,this.relativeOffset+=8,v},Parser.prototype.parseVersion=function(minorBase){var major=getUShort(this.data,this.offset+this.relativeOffset),minor=getUShort(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,void 0===minorBase&&(minorBase=4096),major+minor/minorBase/10},Parser.prototype.skip=function(type,amount){void 0===amount&&(amount=1),this.relativeOffset+=typeOffsets[type]*amount},Parser.prototype.parseULongList=function(count){void 0===count&&(count=this.parseULong());for(var offsets=new Array(count),dataView=this.data,offset=this.offset+this.relativeOffset,i=0;i<count;i++)offsets[i]=dataView.getUint32(offset),offset+=4;return this.relativeOffset+=4*count,offsets},Parser.prototype.parseOffset16List=Parser.prototype.parseUShortList=function(count){void 0===count&&(count=this.parseUShort());for(var offsets=new Array(count),dataView=this.data,offset=this.offset+this.relativeOffset,i=0;i<count;i++)offsets[i]=dataView.getUint16(offset),offset+=2;return this.relativeOffset+=2*count,offsets},Parser.prototype.parseShortList=function(count){for(var list=new Array(count),dataView=this.data,offset=this.offset+this.relativeOffset,i=0;i<count;i++)list[i]=dataView.getInt16(offset),offset+=2;return this.relativeOffset+=2*count,list},Parser.prototype.parseByteList=function(count){for(var list=new Array(count),dataView=this.data,offset=this.offset+this.relativeOffset,i=0;i<count;i++)list[i]=dataView.getUint8(offset++);return this.relativeOffset+=count,list},Parser.prototype.parseList=function(count,itemCallback){itemCallback||(itemCallback=count,count=this.parseUShort());for(var list=new Array(count),i=0;i<count;i++)list[i]=itemCallback.call(this);return list},Parser.prototype.parseList32=function(count,itemCallback){itemCallback||(itemCallback=count,count=this.parseULong());for(var list=new Array(count),i=0;i<count;i++)list[i]=itemCallback.call(this);return list},Parser.prototype.parseRecordList=function(count,recordDescription){recordDescription||(recordDescription=count,count=this.parseUShort());for(var records=new Array(count),fields=Object.keys(recordDescription),i=0;i<count;i++){for(var rec={},j=0;j<fields.length;j++){var fieldName=fields[j],fieldType=recordDescription[fieldName];rec[fieldName]=fieldType.call(this)}records[i]=rec}return records},Parser.prototype.parseRecordList32=function(count,recordDescription){recordDescription||(recordDescription=count,count=this.parseULong());for(var records=new Array(count),fields=Object.keys(recordDescription),i=0;i<count;i++){for(var rec={},j=0;j<fields.length;j++){var fieldName=fields[j],fieldType=recordDescription[fieldName];rec[fieldName]=fieldType.call(this)}records[i]=rec}return records},Parser.prototype.parseStruct=function(description){if("function"==typeof description)return description.call(this);for(var fields=Object.keys(description),struct={},j=0;j<fields.length;j++){var fieldName=fields[j],fieldType=description[fieldName];struct[fieldName]=fieldType.call(this)}return struct},Parser.prototype.parseValueRecord=function(valueFormat){if(void 0===valueFormat&&(valueFormat=this.parseUShort()),0!==valueFormat){var valueRecord={};return 1&valueFormat&&(valueRecord.xPlacement=this.parseShort()),2&valueFormat&&(valueRecord.yPlacement=this.parseShort()),4&valueFormat&&(valueRecord.xAdvance=this.parseShort()),8&valueFormat&&(valueRecord.yAdvance=this.parseShort()),16&valueFormat&&(valueRecord.xPlaDevice=void 0,this.parseShort()),32&valueFormat&&(valueRecord.yPlaDevice=void 0,this.parseShort()),64&valueFormat&&(valueRecord.xAdvDevice=void 0,this.parseShort()),128&valueFormat&&(valueRecord.yAdvDevice=void 0,this.parseShort()),valueRecord}},Parser.prototype.parseValueRecordList=function(){for(var valueFormat=this.parseUShort(),valueCount=this.parseUShort(),values=new Array(valueCount),i=0;i<valueCount;i++)values[i]=this.parseValueRecord(valueFormat);return values},Parser.prototype.parsePointer=function(description){var structOffset=this.parseOffset16();if(structOffset>0)return new Parser(this.data,this.offset+structOffset).parseStruct(description)},Parser.prototype.parsePointer32=function(description){var structOffset=this.parseOffset32();if(structOffset>0)return new Parser(this.data,this.offset+structOffset).parseStruct(description)},Parser.prototype.parseListOfLists=function(itemCallback){for(var offsets=this.parseOffset16List(),count=offsets.length,relativeOffset=this.relativeOffset,list=new Array(count),i=0;i<count;i++){var start=offsets[i];if(0!==start)if(this.relativeOffset=start,itemCallback){for(var subOffsets=this.parseOffset16List(),subList=new Array(subOffsets.length),j=0;j<subOffsets.length;j++)this.relativeOffset=start+subOffsets[j],subList[j]=itemCallback.call(this);list[i]=subList}else list[i]=this.parseUShortList();else list[i]=void 0}return this.relativeOffset=relativeOffset,list},Parser.prototype.parseCoverage=function(){var startOffset=this.offset+this.relativeOffset,format=this.parseUShort(),count=this.parseUShort();if(1===format)return{format:1,glyphs:this.parseUShortList(count)};if(2===format){for(var ranges=new Array(count),i=0;i<count;i++)ranges[i]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:ranges}}throw new Error("0x"+startOffset.toString(16)+": Coverage format must be 1 or 2.")},Parser.prototype.parseClassDef=function(){var startOffset=this.offset+this.relativeOffset,format=this.parseUShort();if(1===format)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(2===format)return{format:2,ranges:this.parseRecordList({start:Parser.uShort,end:Parser.uShort,classId:Parser.uShort})};throw new Error("0x"+startOffset.toString(16)+": ClassDef format must be 1 or 2.")},Parser.list=function(count,itemCallback){return function(){return this.parseList(count,itemCallback)}},Parser.list32=function(count,itemCallback){return function(){return this.parseList32(count,itemCallback)}},Parser.recordList=function(count,recordDescription){return function(){return this.parseRecordList(count,recordDescription)}},Parser.recordList32=function(count,recordDescription){return function(){return this.parseRecordList32(count,recordDescription)}},Parser.pointer=function(description){return function(){return this.parsePointer(description)}},Parser.pointer32=function(description){return function(){return this.parsePointer32(description)}},Parser.tag=Parser.prototype.parseTag,Parser.byte=Parser.prototype.parseByte,Parser.uShort=Parser.offset16=Parser.prototype.parseUShort,Parser.uShortList=Parser.prototype.parseUShortList,Parser.uLong=Parser.offset32=Parser.prototype.parseULong,Parser.uLongList=Parser.prototype.parseULongList,Parser.struct=Parser.prototype.parseStruct,Parser.coverage=Parser.prototype.parseCoverage,Parser.classDef=Parser.prototype.parseClassDef;var langSysTable={reserved:Parser.uShort,reqFeatureIndex:Parser.uShort,featureIndexes:Parser.uShortList};Parser.prototype.parseScriptList=function(){return this.parsePointer(Parser.recordList({tag:Parser.tag,script:Parser.pointer({defaultLangSys:Parser.pointer(langSysTable),langSysRecords:Parser.recordList({tag:Parser.tag,langSys:Parser.pointer(langSysTable)})})}))||[]},Parser.prototype.parseFeatureList=function(){return this.parsePointer(Parser.recordList({tag:Parser.tag,feature:Parser.pointer({featureParams:Parser.offset16,lookupListIndexes:Parser.uShortList})}))||[]},Parser.prototype.parseLookupList=function(lookupTableParsers){return this.parsePointer(Parser.list(Parser.pointer((function(){var lookupType=this.parseUShort();check.argument(1<=lookupType&&lookupType<=9,"GPOS/GSUB lookup type "+lookupType+" unknown.");var lookupFlag=this.parseUShort(),useMarkFilteringSet=16&lookupFlag;return{lookupType:lookupType,lookupFlag:lookupFlag,subtables:this.parseList(Parser.pointer(lookupTableParsers[lookupType])),markFilteringSet:useMarkFilteringSet?this.parseUShort():void 0}}))))||[]},Parser.prototype.parseFeatureVariationsList=function(){return this.parsePointer32((function(){var majorVersion=this.parseUShort(),minorVersion=this.parseUShort();return check.argument(1===majorVersion&&minorVersion<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:Parser.offset32,featureTableSubstitutionOffset:Parser.offset32})}))||[]};var parse={getByte:getByte,getCard8:getByte,getUShort:getUShort,getCard16:getUShort,getShort:function(dataView,offset){return dataView.getInt16(offset,!1)},getULong:getULong,getFixed:getFixed,getTag:function(dataView,offset){for(var tag="",i=offset;i<offset+4;i+=1)tag+=String.fromCharCode(dataView.getInt8(i));return tag},getOffset:function(dataView,offset,offSize){for(var v=0,i=0;i<offSize;i+=1)v<<=8,v+=dataView.getUint8(offset+i);return v},getBytes:function(dataView,startOffset,endOffset){for(var bytes=[],i=startOffset;i<endOffset;i+=1)bytes.push(dataView.getUint8(i));return bytes},bytesToString:function(bytes){for(var s="",i=0;i<bytes.length;i+=1)s+=String.fromCharCode(bytes[i]);return s},Parser:Parser};function addSegment(t,code,glyphIndex){t.segments.push({end:code,start:code,delta:-(code-glyphIndex),offset:0,glyphIndex:glyphIndex})}var cmap={parse:function(data,start){var cmap={};cmap.version=parse.getUShort(data,start),check.argument(0===cmap.version,"cmap table version should be 0."),cmap.numTables=parse.getUShort(data,start+2);for(var offset=-1,i=cmap.numTables-1;i>=0;i-=1){var platformId=parse.getUShort(data,start+4+8*i),encodingId=parse.getUShort(data,start+4+8*i+2);if(3===platformId&&(0===encodingId||1===encodingId||10===encodingId)||0===platformId&&(0===encodingId||1===encodingId||2===encodingId||3===encodingId||4===encodingId)){offset=parse.getULong(data,start+4+8*i+4);break}}if(-1===offset)throw new Error("No valid cmap sub-tables found.");var p=new parse.Parser(data,start+offset);if(cmap.format=p.parseUShort(),12===cmap.format)!function(cmap,p){var groupCount;p.parseUShort(),cmap.length=p.parseULong(),cmap.language=p.parseULong(),cmap.groupCount=groupCount=p.parseULong(),cmap.glyphIndexMap={};for(var i=0;i<groupCount;i+=1)for(var startCharCode=p.parseULong(),endCharCode=p.parseULong(),startGlyphId=p.parseULong(),c=startCharCode;c<=endCharCode;c+=1)cmap.glyphIndexMap[c]=startGlyphId,startGlyphId++}(cmap,p);else{if(4!==cmap.format)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+cmap.format+").");!function(cmap,p,data,start,offset){var segCount;cmap.length=p.parseUShort(),cmap.language=p.parseUShort(),cmap.segCount=segCount=p.parseUShort()>>1,p.skip("uShort",3),cmap.glyphIndexMap={};for(var endCountParser=new parse.Parser(data,start+offset+14),startCountParser=new parse.Parser(data,start+offset+16+2*segCount),idDeltaParser=new parse.Parser(data,start+offset+16+4*segCount),idRangeOffsetParser=new parse.Parser(data,start+offset+16+6*segCount),glyphIndexOffset=start+offset+16+8*segCount,i=0;i<segCount-1;i+=1)for(var glyphIndex=void 0,endCount=endCountParser.parseUShort(),startCount=startCountParser.parseUShort(),idDelta=idDeltaParser.parseShort(),idRangeOffset=idRangeOffsetParser.parseUShort(),c=startCount;c<=endCount;c+=1)0!==idRangeOffset?(glyphIndexOffset=idRangeOffsetParser.offset+idRangeOffsetParser.relativeOffset-2,glyphIndexOffset+=idRangeOffset,glyphIndexOffset+=2*(c-startCount),0!==(glyphIndex=parse.getUShort(data,glyphIndexOffset))&&(glyphIndex=glyphIndex+idDelta&65535)):glyphIndex=c+idDelta&65535,cmap.glyphIndexMap[c]=glyphIndex}(cmap,p,data,start,offset)}return cmap},make:function(glyphs){var i,isPlan0Only=!0;for(i=glyphs.length-1;i>0;i-=1){if(glyphs.get(i).unicode>65535){console.log("Adding CMAP format 12 (needed!)"),isPlan0Only=!1;break}}var cmapTable=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:isPlan0Only?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:isPlan0Only?12:20}];isPlan0Only||(cmapTable=cmapTable.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),cmapTable=cmapTable.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);var t=new table.Table("cmap",cmapTable);for(t.segments=[],i=0;i<glyphs.length;i+=1){for(var glyph=glyphs.get(i),j=0;j<glyph.unicodes.length;j+=1)addSegment(t,glyph.unicodes[j],i);t.segments=t.segments.sort((function(a,b){return a.start-b.start}))}!function(t){t.segments.push({end:65535,start:65535,delta:1,offset:0})}(t);var segCount=t.segments.length,segCountToRemove=0,endCounts=[],startCounts=[],idDeltas=[],idRangeOffsets=[],glyphIds=[],cmap12Groups=[];for(i=0;i<segCount;i+=1){var segment=t.segments[i];segment.end<=65535&&segment.start<=65535?(endCounts=endCounts.concat({name:"end_"+i,type:"USHORT",value:segment.end}),startCounts=startCounts.concat({name:"start_"+i,type:"USHORT",value:segment.start}),idDeltas=idDeltas.concat({name:"idDelta_"+i,type:"SHORT",value:segment.delta}),idRangeOffsets=idRangeOffsets.concat({name:"idRangeOffset_"+i,type:"USHORT",value:segment.offset}),void 0!==segment.glyphId&&(glyphIds=glyphIds.concat({name:"glyph_"+i,type:"USHORT",value:segment.glyphId}))):segCountToRemove+=1,isPlan0Only||void 0===segment.glyphIndex||(cmap12Groups=(cmap12Groups=(cmap12Groups=cmap12Groups.concat({name:"cmap12Start_"+i,type:"ULONG",value:segment.start})).concat({name:"cmap12End_"+i,type:"ULONG",value:segment.end})).concat({name:"cmap12Glyph_"+i,type:"ULONG",value:segment.glyphIndex}))}if(t.segCountX2=2*(segCount-segCountToRemove),t.searchRange=2*Math.pow(2,Math.floor(Math.log(segCount-segCountToRemove)/Math.log(2))),t.entrySelector=Math.log(t.searchRange/2)/Math.log(2),t.rangeShift=t.segCountX2-t.searchRange,t.fields=t.fields.concat(endCounts),t.fields.push({name:"reservedPad",type:"USHORT",value:0}),t.fields=t.fields.concat(startCounts),t.fields=t.fields.concat(idDeltas),t.fields=t.fields.concat(idRangeOffsets),t.fields=t.fields.concat(glyphIds),t.cmap4Length=14+2*endCounts.length+2+2*startCounts.length+2*idDeltas.length+2*idRangeOffsets.length+2*glyphIds.length,!isPlan0Only){var cmap12Length=16+4*cmap12Groups.length;t.cmap12Offset=20+t.cmap4Length,t.fields=t.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:cmap12Length},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:cmap12Groups.length/3}]),t.fields=t.fields.concat(cmap12Groups)}return t}},cffStandardStrings=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],cffStandardEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],cffExpertEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],standardNames=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function DefaultEncoding(font){this.font=font}function CmapEncoding(cmap){this.cmap=cmap}function CffEncoding(encoding,charset){this.encoding=encoding,this.charset=charset}function GlyphNames(post){switch(post.version){case 1:this.names=standardNames.slice();break;case 2:this.names=new Array(post.numberOfGlyphs);for(var i=0;i<post.numberOfGlyphs;i++)post.glyphNameIndex[i]<standardNames.length?this.names[i]=standardNames[post.glyphNameIndex[i]]:this.names[i]=post.names[post.glyphNameIndex[i]-standardNames.length];break;case 2.5:this.names=new Array(post.numberOfGlyphs);for(var i$1=0;i$1<post.numberOfGlyphs;i$1++)this.names[i$1]=standardNames[i$1+post.glyphNameIndex[i$1]];break;case 3:default:this.names=[]}}function addGlyphNames(font,opt){opt.lowMemory?function(font){font._IndexToUnicodeMap={};for(var glyphIndexMap=font.tables.cmap.glyphIndexMap,charCodes=Object.keys(glyphIndexMap),i=0;i<charCodes.length;i+=1){var c=charCodes[i],glyphIndex=glyphIndexMap[c];void 0===font._IndexToUnicodeMap[glyphIndex]?font._IndexToUnicodeMap[glyphIndex]={unicodes:[parseInt(c)]}:font._IndexToUnicodeMap[glyphIndex].unicodes.push(parseInt(c))}}(font):function(font){for(var glyph,glyphIndexMap=font.tables.cmap.glyphIndexMap,charCodes=Object.keys(glyphIndexMap),i=0;i<charCodes.length;i+=1){var c=charCodes[i],glyphIndex=glyphIndexMap[c];(glyph=font.glyphs.get(glyphIndex)).addUnicode(parseInt(c))}for(var i$1=0;i$1<font.glyphs.length;i$1+=1)glyph=font.glyphs.get(i$1),font.cffEncoding?font.isCIDFont?glyph.name="gid"+i$1:glyph.name=font.cffEncoding.charset[i$1]:font.glyphNames.names&&(glyph.name=font.glyphNames.glyphIndexToName(i$1))}(font)}DefaultEncoding.prototype.charToGlyphIndex=function(c){var code=c.codePointAt(0),glyphs=this.font.glyphs;if(glyphs)for(var i=0;i<glyphs.length;i+=1)for(var glyph=glyphs.get(i),j=0;j<glyph.unicodes.length;j+=1)if(glyph.unicodes[j]===code)return i;return null},CmapEncoding.prototype.charToGlyphIndex=function(c){return this.cmap.glyphIndexMap[c.codePointAt(0)]||0},CffEncoding.prototype.charToGlyphIndex=function(s){var code=s.codePointAt(0),charName=this.encoding[code];return this.charset.indexOf(charName)},GlyphNames.prototype.nameToGlyphIndex=function(name){return this.names.indexOf(name)},GlyphNames.prototype.glyphIndexToName=function(gid){return this.names[gid]};var draw={line:function(ctx,x1,y1,x2,y2){ctx.beginPath(),ctx.moveTo(x1,y1),ctx.lineTo(x2,y2),ctx.stroke()}};function Glyph(options){this.bindConstructorValues(options)}function defineDependentProperty(glyph,externalName,internalName){Object.defineProperty(glyph,externalName,{get:function(){return glyph.path,glyph[internalName]},set:function(newValue){glyph[internalName]=newValue},enumerable:!0,configurable:!0})}function GlyphSet(font,glyphs){if(this.font=font,this.glyphs={},Array.isArray(glyphs))for(var i=0;i<glyphs.length;i++){var glyph=glyphs[i];glyph.path.unitsPerEm=font.unitsPerEm,this.glyphs[i]=glyph}this.length=glyphs&&glyphs.length||0}Glyph.prototype.bindConstructorValues=function(options){var path,_path;this.index=options.index||0,this.name=options.name||null,this.unicode=options.unicode||void 0,this.unicodes=options.unicodes||void 0!==options.unicode?[options.unicode]:[],"xMin"in options&&(this.xMin=options.xMin),"yMin"in options&&(this.yMin=options.yMin),"xMax"in options&&(this.xMax=options.xMax),"yMax"in options&&(this.yMax=options.yMax),"advanceWidth"in options&&(this.advanceWidth=options.advanceWidth),Object.defineProperty(this,"path",(path=options.path,_path=path||new Path,{configurable:!0,get:function(){return"function"==typeof _path&&(_path=_path()),_path},set:function(p){_path=p}}))},Glyph.prototype.addUnicode=function(unicode){0===this.unicodes.length&&(this.unicode=unicode),this.unicodes.push(unicode)},Glyph.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},Glyph.prototype.getPath=function(x,y,fontSize,options,font){var commands,hPoints;x=void 0!==x?x:0,y=void 0!==y?y:0,fontSize=void 0!==fontSize?fontSize:72,options||(options={});var xScale=options.xScale,yScale=options.yScale;if(options.hinting&&font&&font.hinting&&(hPoints=this.path&&font.hinting.exec(this,fontSize)),hPoints)commands=font.hinting.getCommands(hPoints),x=Math.round(x),y=Math.round(y),xScale=yScale=1;else{commands=this.path.commands;var scale=1/(this.path.unitsPerEm||1e3)*fontSize;void 0===xScale&&(xScale=scale),void 0===yScale&&(yScale=scale)}for(var p=new Path,i=0;i<commands.length;i+=1){var cmd=commands[i];"M"===cmd.type?p.moveTo(x+cmd.x*xScale,y+-cmd.y*yScale):"L"===cmd.type?p.lineTo(x+cmd.x*xScale,y+-cmd.y*yScale):"Q"===cmd.type?p.quadraticCurveTo(x+cmd.x1*xScale,y+-cmd.y1*yScale,x+cmd.x*xScale,y+-cmd.y*yScale):"C"===cmd.type?p.curveTo(x+cmd.x1*xScale,y+-cmd.y1*yScale,x+cmd.x2*xScale,y+-cmd.y2*yScale,x+cmd.x*xScale,y+-cmd.y*yScale):"Z"===cmd.type&&p.closePath()}return p},Glyph.prototype.getContours=function(){if(void 0===this.points)return[];for(var contours=[],currentContour=[],i=0;i<this.points.length;i+=1){var pt=this.points[i];currentContour.push(pt),pt.lastPointOfContour&&(contours.push(currentContour),currentContour=[])}return check.argument(0===currentContour.length,"There are still points left in the current contour."),contours},Glyph.prototype.getMetrics=function(){for(var commands=this.path.commands,xCoords=[],yCoords=[],i=0;i<commands.length;i+=1){var cmd=commands[i];"Z"!==cmd.type&&(xCoords.push(cmd.x),yCoords.push(cmd.y)),"Q"!==cmd.type&&"C"!==cmd.type||(xCoords.push(cmd.x1),yCoords.push(cmd.y1)),"C"===cmd.type&&(xCoords.push(cmd.x2),yCoords.push(cmd.y2))}var metrics={xMin:Math.min.apply(null,xCoords),yMin:Math.min.apply(null,yCoords),xMax:Math.max.apply(null,xCoords),yMax:Math.max.apply(null,yCoords),leftSideBearing:this.leftSideBearing};return isFinite(metrics.xMin)||(metrics.xMin=0),isFinite(metrics.xMax)||(metrics.xMax=this.advanceWidth),isFinite(metrics.yMin)||(metrics.yMin=0),isFinite(metrics.yMax)||(metrics.yMax=0),metrics.rightSideBearing=this.advanceWidth-metrics.leftSideBearing-(metrics.xMax-metrics.xMin),metrics},Glyph.prototype.draw=function(ctx,x,y,fontSize,options){this.getPath(x,y,fontSize,options).draw(ctx)},Glyph.prototype.drawPoints=function(ctx,x,y,fontSize){function drawCircles(l,x,y,scale){ctx.beginPath();for(var j=0;j<l.length;j+=1)ctx.moveTo(x+l[j].x*scale,y+l[j].y*scale),ctx.arc(x+l[j].x*scale,y+l[j].y*scale,2,0,2*Math.PI,!1);ctx.closePath(),ctx.fill()}x=void 0!==x?x:0,y=void 0!==y?y:0,fontSize=void 0!==fontSize?fontSize:24;for(var scale=1/this.path.unitsPerEm*fontSize,blueCircles=[],redCircles=[],path=this.path,i=0;i<path.commands.length;i+=1){var cmd=path.commands[i];void 0!==cmd.x&&blueCircles.push({x:cmd.x,y:-cmd.y}),void 0!==cmd.x1&&redCircles.push({x:cmd.x1,y:-cmd.y1}),void 0!==cmd.x2&&redCircles.push({x:cmd.x2,y:-cmd.y2})}ctx.fillStyle="blue",drawCircles(blueCircles,x,y,scale),ctx.fillStyle="red",drawCircles(redCircles,x,y,scale)},Glyph.prototype.drawMetrics=function(ctx,x,y,fontSize){var scale;x=void 0!==x?x:0,y=void 0!==y?y:0,fontSize=void 0!==fontSize?fontSize:24,scale=1/this.path.unitsPerEm*fontSize,ctx.lineWidth=1,ctx.strokeStyle="black",draw.line(ctx,x,-1e4,x,1e4),draw.line(ctx,-1e4,y,1e4,y);var xMin=this.xMin||0,yMin=this.yMin||0,xMax=this.xMax||0,yMax=this.yMax||0,advanceWidth=this.advanceWidth||0;ctx.strokeStyle="blue",draw.line(ctx,x+xMin*scale,-1e4,x+xMin*scale,1e4),draw.line(ctx,x+xMax*scale,-1e4,x+xMax*scale,1e4),draw.line(ctx,-1e4,y+-yMin*scale,1e4,y+-yMin*scale),draw.line(ctx,-1e4,y+-yMax*scale,1e4,y+-yMax*scale),ctx.strokeStyle="green",draw.line(ctx,x+advanceWidth*scale,-1e4,x+advanceWidth*scale,1e4)},GlyphSet.prototype.get=function(index){if(void 0===this.glyphs[index]){this.font._push(index),"function"==typeof this.glyphs[index]&&(this.glyphs[index]=this.glyphs[index]());var glyph=this.glyphs[index],unicodeObj=this.font._IndexToUnicodeMap[index];if(unicodeObj)for(var j=0;j<unicodeObj.unicodes.length;j++)glyph.addUnicode(unicodeObj.unicodes[j]);this.font.cffEncoding?this.font.isCIDFont?glyph.name="gid"+index:glyph.name=this.font.cffEncoding.charset[index]:this.font.glyphNames.names&&(glyph.name=this.font.glyphNames.glyphIndexToName(index)),this.glyphs[index].advanceWidth=this.font._hmtxTableData[index].advanceWidth,this.glyphs[index].leftSideBearing=this.font._hmtxTableData[index].leftSideBearing}else"function"==typeof this.glyphs[index]&&(this.glyphs[index]=this.glyphs[index]());return this.glyphs[index]},GlyphSet.prototype.push=function(index,loader){this.glyphs[index]=loader,this.length++};var glyphset={GlyphSet:GlyphSet,glyphLoader:function(font,index){return new Glyph({index:index,font:font})},ttfGlyphLoader:function(font,index,parseGlyph,data,position,buildPath){return function(){var glyph=new Glyph({index:index,font:font});return glyph.path=function(){parseGlyph(glyph,data,position);var path=buildPath(font.glyphs,glyph);return path.unitsPerEm=font.unitsPerEm,path},defineDependentProperty(glyph,"xMin","_xMin"),defineDependentProperty(glyph,"xMax","_xMax"),defineDependentProperty(glyph,"yMin","_yMin"),defineDependentProperty(glyph,"yMax","_yMax"),glyph}},cffGlyphLoader:function(font,index,parseCFFCharstring,charstring){return function(){var glyph=new Glyph({index:index,font:font});return glyph.path=function(){var path=parseCFFCharstring(font,glyph,charstring);return path.unitsPerEm=font.unitsPerEm,path},glyph}}};function equals(a,b){if(a===b)return!0;if(Array.isArray(a)&&Array.isArray(b)){if(a.length!==b.length)return!1;for(var i=0;i<a.length;i+=1)if(!equals(a[i],b[i]))return!1;return!0}return!1}function calcCFFSubroutineBias(subrs){return subrs.length<1240?107:subrs.length<33900?1131:32768}function parseCFFIndex(data,start,conversionFn){var objectOffset,endOffset,offsets=[],objects=[],count=parse.getCard16(data,start);if(0!==count){var offsetSize=parse.getByte(data,start+2);objectOffset=start+(count+1)*offsetSize+2;for(var pos=start+3,i=0;i<count+1;i+=1)offsets.push(parse.getOffset(data,pos,offsetSize)),pos+=offsetSize;endOffset=objectOffset+offsets[count]}else endOffset=start+2;for(var i$1=0;i$1<offsets.length-1;i$1+=1){var value=parse.getBytes(data,objectOffset+offsets[i$1],objectOffset+offsets[i$1+1]);conversionFn&&(value=conversionFn(value)),objects.push(value)}return{objects:objects,startOffset:start,endOffset:endOffset}}function parseOperand(parser,b0){if(28===b0)return parser.parseByte()<<8|parser.parseByte();if(29===b0)return parser.parseByte()<<24|parser.parseByte()<<16|parser.parseByte()<<8|parser.parseByte();if(30===b0)return function(parser){for(var s="",lookup=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var b=parser.parseByte(),n1=b>>4,n2=15&b;if(15===n1)break;if(s+=lookup[n1],15===n2)break;s+=lookup[n2]}return parseFloat(s)}(parser);if(b0>=32&&b0<=246)return b0-139;if(b0>=247&&b0<=250)return 256*(b0-247)+parser.parseByte()+108;if(b0>=251&&b0<=254)return 256*-(b0-251)-parser.parseByte()-108;throw new Error("Invalid b0 "+b0)}function parseCFFDict(data,start,size){start=void 0!==start?start:0;var parser=new parse.Parser(data,start),entries=[],operands=[];for(size=void 0!==size?size:data.length;parser.relativeOffset<size;){var op=parser.parseByte();op<=21?(12===op&&(op=1200+parser.parseByte()),entries.push([op,operands]),operands=[]):operands.push(parseOperand(parser,op))}return function(entries){for(var o={},i=0;i<entries.length;i+=1){var key=entries[i][0],values=entries[i][1],value=void 0;if(value=1===values.length?values[0]:values,o.hasOwnProperty(key)&&!isNaN(o[key]))throw new Error("Object "+o+" already has key "+key);o[key]=value}return o}(entries)}function getCFFString(strings,index){return index=index<=390?cffStandardStrings[index]:strings[index-391]}function interpretDict(dict,meta,strings){for(var value,newDict={},i=0;i<meta.length;i+=1){var m=meta[i];if(Array.isArray(m.type)){var values=[];values.length=m.type.length;for(var j=0;j<m.type.length;j++)void 0===(value=void 0!==dict[m.op]?dict[m.op][j]:void 0)&&(value=void 0!==m.value&&void 0!==m.value[j]?m.value[j]:null),"SID"===m.type[j]&&(value=getCFFString(strings,value)),values[j]=value;newDict[m.name]=values}else void 0===(value=dict[m.op])&&(value=void 0!==m.value?m.value:null),"SID"===m.type&&(value=getCFFString(strings,value)),newDict[m.name]=value}return newDict}var TOP_DICT_META=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],PRIVATE_DICT_META=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function parseCFFTopDict(data,strings){return interpretDict(parseCFFDict(data,0,data.byteLength),TOP_DICT_META,strings)}function parseCFFPrivateDict(data,start,size,strings){return interpretDict(parseCFFDict(data,start,size),PRIVATE_DICT_META,strings)}function gatherCFFTopDicts(data,start,cffIndex,strings){for(var topDictArray=[],iTopDict=0;iTopDict<cffIndex.length;iTopDict+=1){var topDict=parseCFFTopDict(new DataView(new Uint8Array(cffIndex[iTopDict]).buffer),strings);topDict._subrs=[],topDict._subrsBias=0;var privateSize=topDict.private[0],privateOffset=topDict.private[1];if(0!==privateSize&&0!==privateOffset){var privateDict=parseCFFPrivateDict(data,privateOffset+start,privateSize,strings);if(topDict._defaultWidthX=privateDict.defaultWidthX,topDict._nominalWidthX=privateDict.nominalWidthX,0!==privateDict.subrs){var subrIndex=parseCFFIndex(data,privateOffset+privateDict.subrs+start);topDict._subrs=subrIndex.objects,topDict._subrsBias=calcCFFSubroutineBias(topDict._subrs)}topDict._privateDict=privateDict}topDictArray.push(topDict)}return topDictArray}function parseCFFCharstring(font,glyph,code){var c1x,c1y,c2x,c2y,subrs,subrsBias,defaultWidthX,nominalWidthX,p=new Path,stack=[],nStems=0,haveWidth=!1,open=!1,x=0,y=0;if(font.isCIDFont){var fdIndex=font.tables.cff.topDict._fdSelect[glyph.index],fdDict=font.tables.cff.topDict._fdArray[fdIndex];subrs=fdDict._subrs,subrsBias=fdDict._subrsBias,defaultWidthX=fdDict._defaultWidthX,nominalWidthX=fdDict._nominalWidthX}else subrs=font.tables.cff.topDict._subrs,subrsBias=font.tables.cff.topDict._subrsBias,defaultWidthX=font.tables.cff.topDict._defaultWidthX,nominalWidthX=font.tables.cff.topDict._nominalWidthX;var width=defaultWidthX;function newContour(x,y){open&&p.closePath(),p.moveTo(x,y),open=!0}function parseStems(){stack.length%2!=0&&!haveWidth&&(width=stack.shift()+nominalWidthX),nStems+=stack.length>>1,stack.length=0,haveWidth=!0}return function parse(code){for(var b1,b2,b3,b4,codeIndex,subrCode,jpx,jpy,c3x,c3y,c4x,c4y,i=0;i<code.length;){var v=code[i];switch(i+=1,v){case 1:case 3:parseStems();break;case 4:stack.length>1&&!haveWidth&&(width=stack.shift()+nominalWidthX,haveWidth=!0),y+=stack.pop(),newContour(x,y);break;case 5:for(;stack.length>0;)x+=stack.shift(),y+=stack.shift(),p.lineTo(x,y);break;case 6:for(;stack.length>0&&(x+=stack.shift(),p.lineTo(x,y),0!==stack.length);)y+=stack.shift(),p.lineTo(x,y);break;case 7:for(;stack.length>0&&(y+=stack.shift(),p.lineTo(x,y),0!==stack.length);)x+=stack.shift(),p.lineTo(x,y);break;case 8:for(;stack.length>0;)c1x=x+stack.shift(),c1y=y+stack.shift(),c2x=c1x+stack.shift(),c2y=c1y+stack.shift(),x=c2x+stack.shift(),y=c2y+stack.shift(),p.curveTo(c1x,c1y,c2x,c2y,x,y);break;case 10:codeIndex=stack.pop()+subrsBias,(subrCode=subrs[codeIndex])&&parse(subrCode);break;case 11:return;case 12:switch(v=code[i],i+=1,v){case 35:c1x=x+stack.shift(),c1y=y+stack.shift(),c2x=c1x+stack.shift(),c2y=c1y+stack.shift(),jpx=c2x+stack.shift(),jpy=c2y+stack.shift(),c3x=jpx+stack.shift(),c3y=jpy+stack.shift(),c4x=c3x+stack.shift(),c4y=c3y+stack.shift(),x=c4x+stack.shift(),y=c4y+stack.shift(),stack.shift(),p.curveTo(c1x,c1y,c2x,c2y,jpx,jpy),p.curveTo(c3x,c3y,c4x,c4y,x,y);break;case 34:c1x=x+stack.shift(),c1y=y,c2x=c1x+stack.shift(),c2y=c1y+stack.shift(),jpx=c2x+stack.shift(),jpy=c2y,c3x=jpx+stack.shift(),c3y=c2y,c4x=c3x+stack.shift(),c4y=y,x=c4x+stack.shift(),p.curveTo(c1x,c1y,c2x,c2y,jpx,jpy),p.curveTo(c3x,c3y,c4x,c4y,x,y);break;case 36:c1x=x+stack.shift(),c1y=y+stack.shift(),c2x=c1x+stack.shift(),c2y=c1y+stack.shift(),jpx=c2x+stack.shift(),jpy=c2y,c3x=jpx+stack.shift(),c3y=c2y,c4x=c3x+stack.shift(),c4y=c3y+stack.shift(),x=c4x+stack.shift(),p.curveTo(c1x,c1y,c2x,c2y,jpx,jpy),p.curveTo(c3x,c3y,c4x,c4y,x,y);break;case 37:c1x=x+stack.shift(),c1y=y+stack.shift(),c2x=c1x+stack.shift(),c2y=c1y+stack.shift(),jpx=c2x+stack.shift(),jpy=c2y+stack.shift(),c3x=jpx+stack.shift(),c3y=jpy+stack.shift(),c4x=c3x+stack.shift(),c4y=c3y+stack.shift(),Math.abs(c4x-x)>Math.abs(c4y-y)?x=c4x+stack.shift():y=c4y+stack.shift(),p.curveTo(c1x,c1y,c2x,c2y,jpx,jpy),p.curveTo(c3x,c3y,c4x,c4y,x,y);break;default:console.log("Glyph "+glyph.index+": unknown operator 1200"+v),stack.length=0}break;case 14:stack.length>0&&!haveWidth&&(width=stack.shift()+nominalWidthX,haveWidth=!0),open&&(p.closePath(),open=!1);break;case 18:parseStems();break;case 19:case 20:parseStems(),i+=nStems+7>>3;break;case 21:stack.length>2&&!haveWidth&&(width=stack.shift()+nominalWidthX,haveWidth=!0),y+=stack.pop(),newContour(x+=stack.pop(),y);break;case 22:stack.length>1&&!haveWidth&&(width=stack.shift()+nominalWidthX,haveWidth=!0),newContour(x+=stack.pop(),y);break;case 23:parseStems();break;case 24:for(;stack.length>2;)c1x=x+stack.shift(),c1y=y+stack.shift(),c2x=c1x+stack.shift(),c2y=c1y+stack.shift(),x=c2x+stack.shift(),y=c2y+stack.shift(),p.curveTo(c1x,c1y,c2x,c2y,x,y);x+=stack.shift(),y+=stack.shift(),p.lineTo(x,y);break;case 25:for(;stack.length>6;)x+=stack.shift(),y+=stack.shift(),p.lineTo(x,y);c1x=x+stack.shift(),c1y=y+stack.shift(),c2x=c1x+stack.shift(),c2y=c1y+stack.shift(),x=c2x+stack.shift(),y=c2y+stack.shift(),p.curveTo(c1x,c1y,c2x,c2y,x,y);break;case 26:for(stack.length%2&&(x+=stack.shift());stack.length>0;)c1x=x,c1y=y+stack.shift(),c2x=c1x+stack.shift(),c2y=c1y+stack.shift(),x=c2x,y=c2y+stack.shift(),p.curveTo(c1x,c1y,c2x,c2y,x,y);break;case 27:for(stack.length%2&&(y+=stack.shift());stack.length>0;)c1x=x+stack.shift(),c1y=y,c2x=c1x+stack.shift(),c2y=c1y+stack.shift(),x=c2x+stack.shift(),y=c2y,p.curveTo(c1x,c1y,c2x,c2y,x,y);break;case 28:b1=code[i],b2=code[i+1],stack.push((b1<<24|b2<<16)>>16),i+=2;break;case 29:codeIndex=stack.pop()+font.gsubrsBias,(subrCode=font.gsubrs[codeIndex])&&parse(subrCode);break;case 30:for(;stack.length>0&&(c1x=x,c1y=y+stack.shift(),c2x=c1x+stack.shift(),c2y=c1y+stack.shift(),x=c2x+stack.shift(),y=c2y+(1===stack.length?stack.shift():0),p.curveTo(c1x,c1y,c2x,c2y,x,y),0!==stack.length);)c1x=x+stack.shift(),c1y=y,c2x=c1x+stack.shift(),c2y=c1y+stack.shift(),y=c2y+stack.shift(),x=c2x+(1===stack.length?stack.shift():0),p.curveTo(c1x,c1y,c2x,c2y,x,y);break;case 31:for(;stack.length>0&&(c1x=x+stack.shift(),c1y=y,c2x=c1x+stack.shift(),c2y=c1y+stack.shift(),y=c2y+stack.shift(),x=c2x+(1===stack.length?stack.shift():0),p.curveTo(c1x,c1y,c2x,c2y,x,y),0!==stack.length);)c1x=x,c1y=y+stack.shift(),c2x=c1x+stack.shift(),c2y=c1y+stack.shift(),x=c2x+stack.shift(),y=c2y+(1===stack.length?stack.shift():0),p.curveTo(c1x,c1y,c2x,c2y,x,y);break;default:v<32?console.log("Glyph "+glyph.index+": unknown operator "+v):v<247?stack.push(v-139):v<251?(b1=code[i],i+=1,stack.push(256*(v-247)+b1+108)):v<255?(b1=code[i],i+=1,stack.push(256*-(v-251)-b1-108)):(b1=code[i],b2=code[i+1],b3=code[i+2],b4=code[i+3],i+=4,stack.push((b1<<24|b2<<16|b3<<8|b4)/65536))}}}(code),glyph.advanceWidth=width,p}function encodeString(s,strings){var sid,i=cffStandardStrings.indexOf(s);return i>=0&&(sid=i),(i=strings.indexOf(s))>=0?sid=i+cffStandardStrings.length:(sid=cffStandardStrings.length+strings.length,strings.push(s)),sid}function makeDict(meta,attrs,strings){for(var m={},i=0;i<meta.length;i+=1){var entry=meta[i],value=attrs[entry.name];void 0===value||equals(value,entry.value)||("SID"===entry.type&&(value=encodeString(value,strings)),m[entry.op]={name:entry.name,type:entry.type,value:value})}return m}function makeTopDict(attrs,strings){var t=new table.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return t.dict=makeDict(TOP_DICT_META,attrs,strings),t}function makeTopDictIndex(topDict){var t=new table.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return t.topDicts=[{name:"topDict_0",type:"TABLE",value:topDict}],t}function glyphToOps(glyph){var ops=[],path=glyph.path;ops.push({name:"width",type:"NUMBER",value:glyph.advanceWidth});for(var x=0,y=0,i=0;i<path.commands.length;i+=1){var dx=void 0,dy=void 0,cmd=path.commands[i];if("Q"===cmd.type){var _13=1/3,_23=2/3;cmd={type:"C",x:cmd.x,y:cmd.y,x1:_13*x+_23*cmd.x1,y1:_13*y+_23*cmd.y1,x2:_13*cmd.x+_23*cmd.x1,y2:_13*cmd.y+_23*cmd.y1}}if("M"===cmd.type)dx=Math.round(cmd.x-x),dy=Math.round(cmd.y-y),ops.push({name:"dx",type:"NUMBER",value:dx}),ops.push({name:"dy",type:"NUMBER",value:dy}),ops.push({name:"rmoveto",type:"OP",value:21}),x=Math.round(cmd.x),y=Math.round(cmd.y);else if("L"===cmd.type)dx=Math.round(cmd.x-x),dy=Math.round(cmd.y-y),ops.push({name:"dx",type:"NUMBER",value:dx}),ops.push({name:"dy",type:"NUMBER",value:dy}),ops.push({name:"rlineto",type:"OP",value:5}),x=Math.round(cmd.x),y=Math.round(cmd.y);else if("C"===cmd.type){var dx1=Math.round(cmd.x1-x),dy1=Math.round(cmd.y1-y),dx2=Math.round(cmd.x2-cmd.x1),dy2=Math.round(cmd.y2-cmd.y1);dx=Math.round(cmd.x-cmd.x2),dy=Math.round(cmd.y-cmd.y2),ops.push({name:"dx1",type:"NUMBER",value:dx1}),ops.push({name:"dy1",type:"NUMBER",value:dy1}),ops.push({name:"dx2",type:"NUMBER",value:dx2}),ops.push({name:"dy2",type:"NUMBER",value:dy2}),ops.push({name:"dx",type:"NUMBER",value:dx}),ops.push({name:"dy",type:"NUMBER",value:dy}),ops.push({name:"rrcurveto",type:"OP",value:8}),x=Math.round(cmd.x),y=Math.round(cmd.y)}}return ops.push({name:"endchar",type:"OP",value:14}),ops}var cff={parse:function(data,start,font,opt){font.tables.cff={};var header=function(data,start){var header={};return header.formatMajor=parse.getCard8(data,start),header.formatMinor=parse.getCard8(data,start+1),header.size=parse.getCard8(data,start+2),header.offsetSize=parse.getCard8(data,start+3),header.startOffset=start,header.endOffset=start+4,header}(data,start),nameIndex=parseCFFIndex(data,header.endOffset,parse.bytesToString),topDictIndex=parseCFFIndex(data,nameIndex.endOffset),stringIndex=parseCFFIndex(data,topDictIndex.endOffset,parse.bytesToString),globalSubrIndex=parseCFFIndex(data,stringIndex.endOffset);font.gsubrs=globalSubrIndex.objects,font.gsubrsBias=calcCFFSubroutineBias(font.gsubrs);var topDictArray=gatherCFFTopDicts(data,start,topDictIndex.objects,stringIndex.objects);if(1!==topDictArray.length)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+topDictArray.length);var topDict=topDictArray[0];if(font.tables.cff.topDict=topDict,topDict._privateDict&&(font.defaultWidthX=topDict._privateDict.defaultWidthX,font.nominalWidthX=topDict._privateDict.nominalWidthX),void 0!==topDict.ros[0]&&void 0!==topDict.ros[1]&&(font.isCIDFont=!0),font.isCIDFont){var fdArrayOffset=topDict.fdArray,fdSelectOffset=topDict.fdSelect;if(0===fdArrayOffset||0===fdSelectOffset)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");var fdArrayIndex=parseCFFIndex(data,fdArrayOffset+=start),fdArray=gatherCFFTopDicts(data,start,fdArrayIndex.objects,stringIndex.objects);topDict._fdArray=fdArray,fdSelectOffset+=start,topDict._fdSelect=function(data,start,nGlyphs,fdArrayCount){var fdIndex,fdSelect=[],parser=new parse.Parser(data,start),format=parser.parseCard8();if(0===format)for(var iGid=0;iGid<nGlyphs;iGid++){if((fdIndex=parser.parseCard8())>=fdArrayCount)throw new Error("CFF table CID Font FDSelect has bad FD index value "+fdIndex+" (FD count "+fdArrayCount+")");fdSelect.push(fdIndex)}else{if(3!==format)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+format);var next,nRanges=parser.parseCard16(),first=parser.parseCard16();if(0!==first)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+first);for(var iRange=0;iRange<nRanges;iRange++){if(fdIndex=parser.parseCard8(),next=parser.parseCard16(),fdIndex>=fdArrayCount)throw new Error("CFF table CID Font FDSelect has bad FD index value "+fdIndex+" (FD count "+fdArrayCount+")");if(next>nGlyphs)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+next);for(;first<next;first++)fdSelect.push(fdIndex);first=next}if(next!==nGlyphs)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+next)}return fdSelect}(data,fdSelectOffset,font.numGlyphs,fdArray.length)}var charStringsIndex,privateDictOffset=start+topDict.private[1],privateDict=parseCFFPrivateDict(data,privateDictOffset,topDict.private[0],stringIndex.objects);if(font.defaultWidthX=privateDict.defaultWidthX,font.nominalWidthX=privateDict.nominalWidthX,0!==privateDict.subrs){var subrOffset=privateDictOffset+privateDict.subrs,subrIndex=parseCFFIndex(data,subrOffset);font.subrs=subrIndex.objects,font.subrsBias=calcCFFSubroutineBias(font.subrs)}else font.subrs=[],font.subrsBias=0;opt.lowMemory?(charStringsIndex=function(data,start){var objectOffset,endOffset,offsets=[],count=parse.getCard16(data,start);if(0!==count){var offsetSize=parse.getByte(data,start+2);objectOffset=start+(count+1)*offsetSize+2;for(var pos=start+3,i=0;i<count+1;i+=1)offsets.push(parse.getOffset(data,pos,offsetSize)),pos+=offsetSize;endOffset=objectOffset+offsets[count]}else endOffset=start+2;return{offsets:offsets,startOffset:start,endOffset:endOffset}}(data,start+topDict.charStrings),font.nGlyphs=charStringsIndex.offsets.length):(charStringsIndex=parseCFFIndex(data,start+topDict.charStrings),font.nGlyphs=charStringsIndex.objects.length);var charset=function(data,start,nGlyphs,strings){var sid,count,parser=new parse.Parser(data,start);nGlyphs-=1;var charset=[".notdef"],format=parser.parseCard8();if(0===format)for(var i=0;i<nGlyphs;i+=1)sid=parser.parseSID(),charset.push(getCFFString(strings,sid));else if(1===format)for(;charset.length<=nGlyphs;){sid=parser.parseSID(),count=parser.parseCard8();for(var i$1=0;i$1<=count;i$1+=1)charset.push(getCFFString(strings,sid)),sid+=1}else{if(2!==format)throw new Error("Unknown charset format "+format);for(;charset.length<=nGlyphs;){sid=parser.parseSID(),count=parser.parseCard16();for(var i$2=0;i$2<=count;i$2+=1)charset.push(getCFFString(strings,sid)),sid+=1}}return charset}(data,start+topDict.charset,font.nGlyphs,stringIndex.objects);if(0===topDict.encoding?font.cffEncoding=new CffEncoding(cffStandardEncoding,charset):1===topDict.encoding?font.cffEncoding=new CffEncoding(cffExpertEncoding,charset):font.cffEncoding=function(data,start,charset){var code,enc={},parser=new parse.Parser(data,start),format=parser.parseCard8();if(0===format)for(var nCodes=parser.parseCard8(),i=0;i<nCodes;i+=1)enc[code=parser.parseCard8()]=i;else{if(1!==format)throw new Error("Unknown encoding format "+format);var nRanges=parser.parseCard8();code=1;for(var i$1=0;i$1<nRanges;i$1+=1)for(var first=parser.parseCard8(),nLeft=parser.parseCard8(),j=first;j<=first+nLeft;j+=1)enc[j]=code,code+=1}return new CffEncoding(enc,charset)}(data,start+topDict.encoding,charset),font.encoding=font.encoding||font.cffEncoding,font.glyphs=new glyphset.GlyphSet(font),opt.lowMemory)font._push=function(i){var charString=function(i,offsets,data,start,conversionFn){var count=parse.getCard16(data,start),objectOffset=0;0!==count&&(objectOffset=start+(count+1)*parse.getByte(data,start+2)+2);var value=parse.getBytes(data,objectOffset+offsets[i],objectOffset+offsets[i+1]);return conversionFn&&(value=conversionFn(value)),value}(i,charStringsIndex.offsets,data,start+topDict.charStrings);font.glyphs.push(i,glyphset.cffGlyphLoader(font,i,parseCFFCharstring,charString))};else for(var i=0;i<font.nGlyphs;i+=1){var charString=charStringsIndex.objects[i];font.glyphs.push(i,glyphset.cffGlyphLoader(font,i,parseCFFCharstring,charString))}},make:function(glyphs,options){for(var glyph,t=new table.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),fontScale=1/options.unitsPerEm,attrs={version:options.version,fullName:options.fullName,familyName:options.familyName,weight:options.weightName,fontBBox:options.fontBBox||[0,0,0,0],fontMatrix:[fontScale,0,0,fontScale,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},glyphNames=[],i=1;i<glyphs.length;i+=1)glyph=glyphs.get(i),glyphNames.push(glyph.name);var strings=[];t.header=new table.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),t.nameIndex=function(fontNames){var t=new table.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);t.names=[];for(var i=0;i<fontNames.length;i+=1)t.names.push({name:"name_"+i,type:"NAME",value:fontNames[i]});return t}([options.postScriptName]);var topDict=makeTopDict(attrs,strings);t.topDictIndex=makeTopDictIndex(topDict),t.globalSubrIndex=new table.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),t.charsets=function(glyphNames,strings){for(var t=new table.Record("Charsets",[{name:"format",type:"Card8",value:0}]),i=0;i<glyphNames.length;i+=1){var glyphSID=encodeString(glyphNames[i],strings);t.fields.push({name:"glyph_"+i,type:"SID",value:glyphSID})}return t}(glyphNames,strings),t.charStringsIndex=function(glyphs){for(var t=new table.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),i=0;i<glyphs.length;i+=1){var glyph=glyphs.get(i),ops=glyphToOps(glyph);t.charStrings.push({name:glyph.name,type:"CHARSTRING",value:ops})}return t}(glyphs),t.privateDict=function(attrs,strings){var t=new table.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return t.dict=makeDict(PRIVATE_DICT_META,attrs,strings),t}({},strings),t.stringIndex=function(strings){var t=new table.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);t.strings=[];for(var i=0;i<strings.length;i+=1)t.strings.push({name:"string_"+i,type:"STRING",value:strings[i]});return t}(strings);var startOffset=t.header.sizeOf()+t.nameIndex.sizeOf()+t.topDictIndex.sizeOf()+t.stringIndex.sizeOf()+t.globalSubrIndex.sizeOf();return attrs.charset=startOffset,attrs.encoding=0,attrs.charStrings=attrs.charset+t.charsets.sizeOf(),attrs.private[1]=attrs.charStrings+t.charStringsIndex.sizeOf(),topDict=makeTopDict(attrs,strings),t.topDictIndex=makeTopDictIndex(topDict),t}};var head={parse:function(data,start){var head={},p=new parse.Parser(data,start);return head.version=p.parseVersion(),head.fontRevision=Math.round(1e3*p.parseFixed())/1e3,head.checkSumAdjustment=p.parseULong(),head.magicNumber=p.parseULong(),check.argument(1594834165===head.magicNumber,"Font header has wrong magic number."),head.flags=p.parseUShort(),head.unitsPerEm=p.parseUShort(),head.created=p.parseLongDateTime(),head.modified=p.parseLongDateTime(),head.xMin=p.parseShort(),head.yMin=p.parseShort(),head.xMax=p.parseShort(),head.yMax=p.parseShort(),head.macStyle=p.parseUShort(),head.lowestRecPPEM=p.parseUShort(),head.fontDirectionHint=p.parseShort(),head.indexToLocFormat=p.parseShort(),head.glyphDataFormat=p.parseShort(),head},make:function(options){var timestamp=Math.round((new Date).getTime()/1e3)+2082844800,createdTimestamp=timestamp;return options.createdTimestamp&&(createdTimestamp=options.createdTimestamp+2082844800),new table.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:createdTimestamp},{name:"modified",type:"LONGDATETIME",value:timestamp},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],options)}};var hhea={parse:function(data,start){var hhea={},p=new parse.Parser(data,start);return hhea.version=p.parseVersion(),hhea.ascender=p.parseShort(),hhea.descender=p.parseShort(),hhea.lineGap=p.parseShort(),hhea.advanceWidthMax=p.parseUShort(),hhea.minLeftSideBearing=p.parseShort(),hhea.minRightSideBearing=p.parseShort(),hhea.xMaxExtent=p.parseShort(),hhea.caretSlopeRise=p.parseShort(),hhea.caretSlopeRun=p.parseShort(),hhea.caretOffset=p.parseShort(),p.relativeOffset+=8,hhea.metricDataFormat=p.parseShort(),hhea.numberOfHMetrics=p.parseUShort(),hhea},make:function(options){return new table.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],options)}};var hmtx={parse:function(font,data,start,numMetrics,numGlyphs,glyphs,opt){opt.lowMemory?function(font,data,start,numMetrics,numGlyphs){var advanceWidth,leftSideBearing;font._hmtxTableData={};for(var p=new parse.Parser(data,start),i=0;i<numGlyphs;i+=1)i<numMetrics&&(advanceWidth=p.parseUShort(),leftSideBearing=p.parseShort()),font._hmtxTableData[i]={advanceWidth:advanceWidth,leftSideBearing:leftSideBearing}}(font,data,start,numMetrics,numGlyphs):function(data,start,numMetrics,numGlyphs,glyphs){for(var advanceWidth,leftSideBearing,p=new parse.Parser(data,start),i=0;i<numGlyphs;i+=1){i<numMetrics&&(advanceWidth=p.parseUShort(),leftSideBearing=p.parseShort());var glyph=glyphs.get(i);glyph.advanceWidth=advanceWidth,glyph.leftSideBearing=leftSideBearing}}(data,start,numMetrics,numGlyphs,glyphs)},make:function(glyphs){for(var t=new table.Table("hmtx",[]),i=0;i<glyphs.length;i+=1){var glyph=glyphs.get(i),advanceWidth=glyph.advanceWidth||0,leftSideBearing=glyph.leftSideBearing||0;t.fields.push({name:"advanceWidth_"+i,type:"USHORT",value:advanceWidth}),t.fields.push({name:"leftSideBearing_"+i,type:"SHORT",value:leftSideBearing})}return t}};var ltag={make:function(tags){for(var result=new table.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:tags.length}]),stringPool="",stringPoolOffset=12+4*tags.length,i=0;i<tags.length;++i){var pos=stringPool.indexOf(tags[i]);pos<0&&(pos=stringPool.length,stringPool+=tags[i]),result.fields.push({name:"offset "+i,type:"USHORT",value:stringPoolOffset+pos}),result.fields.push({name:"length "+i,type:"USHORT",value:tags[i].length})}return result.fields.push({name:"stringPool",type:"CHARARRAY",value:stringPool}),result},parse:function(data,start){var p=new parse.Parser(data,start),tableVersion=p.parseULong();check.argument(1===tableVersion,"Unsupported ltag table version."),p.skip("uLong",1);for(var numTags=p.parseULong(),tags=[],i=0;i<numTags;i++){for(var tag="",offset=start+p.parseUShort(),length=p.parseUShort(),j=offset;j<offset+length;++j)tag+=String.fromCharCode(data.getInt8(j));tags.push(tag)}return tags}};var maxp={parse:function(data,start){var maxp={},p=new parse.Parser(data,start);return maxp.version=p.parseVersion(),maxp.numGlyphs=p.parseUShort(),1===maxp.version&&(maxp.maxPoints=p.parseUShort(),maxp.maxContours=p.parseUShort(),maxp.maxCompositePoints=p.parseUShort(),maxp.maxCompositeContours=p.parseUShort(),maxp.maxZones=p.parseUShort(),maxp.maxTwilightPoints=p.parseUShort(),maxp.maxStorage=p.parseUShort(),maxp.maxFunctionDefs=p.parseUShort(),maxp.maxInstructionDefs=p.parseUShort(),maxp.maxStackElements=p.parseUShort(),maxp.maxSizeOfInstructions=p.parseUShort(),maxp.maxComponentElements=p.parseUShort(),maxp.maxComponentDepth=p.parseUShort()),maxp},make:function(numGlyphs){return new table.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:numGlyphs}])}},nameTableNames=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],macLanguages={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},macLanguageToScript={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},windowsLanguages={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function getLanguageCode(platformID,languageID,ltag){switch(platformID){case 0:if(65535===languageID)return"und";if(ltag)return ltag[languageID];break;case 1:return macLanguages[languageID];case 3:return windowsLanguages[languageID]}}var macScriptEncodings={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},macLanguageEncodings={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function getEncoding(platformID,encodingID,languageID){switch(platformID){case 0:return"utf-16";case 1:return macLanguageEncodings[languageID]||macScriptEncodings[encodingID];case 3:if(1===encodingID||10===encodingID)return"utf-16"}}function reverseDict(dict){var result={};for(var key in dict)result[dict[key]]=parseInt(key);return result}function makeNameRecord(platformID,encodingID,languageID,nameID,length,offset){return new table.Record("NameRecord",[{name:"platformID",type:"USHORT",value:platformID},{name:"encodingID",type:"USHORT",value:encodingID},{name:"languageID",type:"USHORT",value:languageID},{name:"nameID",type:"USHORT",value:nameID},{name:"length",type:"USHORT",value:length},{name:"offset",type:"USHORT",value:offset}])}function addStringToPool(s,pool){var offset=function(needle,haystack){var needleLength=needle.length,limit=haystack.length-needleLength+1;loop:for(var pos=0;pos<limit;pos++)for(;pos<limit;pos++){for(var k=0;k<needleLength;k++)if(haystack[pos+k]!==needle[k])continue loop;return pos}return-1}(s,pool);if(offset<0){offset=pool.length;for(var i=0,len=s.length;i<len;++i)pool.push(s[i])}return offset}var _name={parse:function(data,start,ltag){for(var name={},p=new parse.Parser(data,start),format=p.parseUShort(),count=p.parseUShort(),stringOffset=p.offset+p.parseUShort(),i=0;i<count;i++){var platformID=p.parseUShort(),encodingID=p.parseUShort(),languageID=p.parseUShort(),nameID=p.parseUShort(),property=nameTableNames[nameID]||nameID,byteLength=p.parseUShort(),offset=p.parseUShort(),language=getLanguageCode(platformID,languageID,ltag),encoding=getEncoding(platformID,encodingID,languageID);if(void 0!==encoding&&void 0!==language){var text=void 0;if(text="utf-16"===encoding?decode.UTF16(data,stringOffset+offset,byteLength):decode.MACSTRING(data,stringOffset+offset,byteLength,encoding)){var translations=name[property];void 0===translations&&(translations=name[property]={}),translations[language]=text}}}return 1===format&&p.parseUShort(),name},make:function(names,ltag){var nameID,nameIDs=[],namesWithNumericKeys={},nameTableIds=reverseDict(nameTableNames);for(var key in names){var id=nameTableIds[key];if(void 0===id&&(id=key),nameID=parseInt(id),isNaN(nameID))throw new Error('Name table entry "'+key+'" does not exist, see nameTableNames for complete list.');namesWithNumericKeys[nameID]=names[key],nameIDs.push(nameID)}for(var macLanguageIds=reverseDict(macLanguages),windowsLanguageIds=reverseDict(windowsLanguages),nameRecords=[],stringPool=[],i=0;i<nameIDs.length;i++){var translations=namesWithNumericKeys[nameID=nameIDs[i]];for(var lang in translations){var text=translations[lang],macPlatform=1,macLanguage=macLanguageIds[lang],macScript=macLanguageToScript[macLanguage],macEncoding=getEncoding(macPlatform,macScript,macLanguage),macName=encode.MACSTRING(text,macEncoding);void 0===macName&&(macPlatform=0,(macLanguage=ltag.indexOf(lang))<0&&(macLanguage=ltag.length,ltag.push(lang)),macScript=4,macName=encode.UTF16(text));var macNameOffset=addStringToPool(macName,stringPool);nameRecords.push(makeNameRecord(macPlatform,macScript,macLanguage,nameID,macName.length,macNameOffset));var winLanguage=windowsLanguageIds[lang];if(void 0!==winLanguage){var winName=encode.UTF16(text),winNameOffset=addStringToPool(winName,stringPool);nameRecords.push(makeNameRecord(3,1,winLanguage,nameID,winName.length,winNameOffset))}}}nameRecords.sort((function(a,b){return a.platformID-b.platformID||a.encodingID-b.encodingID||a.languageID-b.languageID||a.nameID-b.nameID}));for(var t=new table.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:nameRecords.length},{name:"stringOffset",type:"USHORT",value:6+12*nameRecords.length}]),r=0;r<nameRecords.length;r++)t.fields.push({name:"record_"+r,type:"RECORD",value:nameRecords[r]});return t.fields.push({name:"strings",type:"LITERAL",value:stringPool}),t}},unicodeRanges=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];var os2={parse:function(data,start){var os2={},p=new parse.Parser(data,start);os2.version=p.parseUShort(),os2.xAvgCharWidth=p.parseShort(),os2.usWeightClass=p.parseUShort(),os2.usWidthClass=p.parseUShort(),os2.fsType=p.parseUShort(),os2.ySubscriptXSize=p.parseShort(),os2.ySubscriptYSize=p.parseShort(),os2.ySubscriptXOffset=p.parseShort(),os2.ySubscriptYOffset=p.parseShort(),os2.ySuperscriptXSize=p.parseShort(),os2.ySuperscriptYSize=p.parseShort(),os2.ySuperscriptXOffset=p.parseShort(),os2.ySuperscriptYOffset=p.parseShort(),os2.yStrikeoutSize=p.parseShort(),os2.yStrikeoutPosition=p.parseShort(),os2.sFamilyClass=p.parseShort(),os2.panose=[];for(var i=0;i<10;i++)os2.panose[i]=p.parseByte();return os2.ulUnicodeRange1=p.parseULong(),os2.ulUnicodeRange2=p.parseULong(),os2.ulUnicodeRange3=p.parseULong(),os2.ulUnicodeRange4=p.parseULong(),os2.achVendID=String.fromCharCode(p.parseByte(),p.parseByte(),p.parseByte(),p.parseByte()),os2.fsSelection=p.parseUShort(),os2.usFirstCharIndex=p.parseUShort(),os2.usLastCharIndex=p.parseUShort(),os2.sTypoAscender=p.parseShort(),os2.sTypoDescender=p.parseShort(),os2.sTypoLineGap=p.parseShort(),os2.usWinAscent=p.parseUShort(),os2.usWinDescent=p.parseUShort(),os2.version>=1&&(os2.ulCodePageRange1=p.parseULong(),os2.ulCodePageRange2=p.parseULong()),os2.version>=2&&(os2.sxHeight=p.parseShort(),os2.sCapHeight=p.parseShort(),os2.usDefaultChar=p.parseUShort(),os2.usBreakChar=p.parseUShort(),os2.usMaxContent=p.parseUShort()),os2},make:function(options){return new table.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],options)},unicodeRanges:unicodeRanges,getUnicodeRange:function(unicode){for(var i=0;i<unicodeRanges.length;i+=1){var range=unicodeRanges[i];if(unicode>=range.begin&&unicode<range.end)return i}return-1}};var post={parse:function(data,start){var post={},p=new parse.Parser(data,start);switch(post.version=p.parseVersion(),post.italicAngle=p.parseFixed(),post.underlinePosition=p.parseShort(),post.underlineThickness=p.parseShort(),post.isFixedPitch=p.parseULong(),post.minMemType42=p.parseULong(),post.maxMemType42=p.parseULong(),post.minMemType1=p.parseULong(),post.maxMemType1=p.parseULong(),post.version){case 1:post.names=standardNames.slice();break;case 2:post.numberOfGlyphs=p.parseUShort(),post.glyphNameIndex=new Array(post.numberOfGlyphs);for(var i=0;i<post.numberOfGlyphs;i++)post.glyphNameIndex[i]=p.parseUShort();post.names=[];for(var i$1=0;i$1<post.numberOfGlyphs;i$1++)if(post.glyphNameIndex[i$1]>=standardNames.length){var nameLength=p.parseChar();post.names.push(p.parseString(nameLength))}break;case 2.5:post.numberOfGlyphs=p.parseUShort(),post.offset=new Array(post.numberOfGlyphs);for(var i$2=0;i$2<post.numberOfGlyphs;i$2++)post.offset[i$2]=p.parseChar()}return post},make:function(){return new table.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},subtableParsers=new Array(9);subtableParsers[1]=function(){var start=this.offset+this.relativeOffset,substFormat=this.parseUShort();return 1===substFormat?{substFormat:1,coverage:this.parsePointer(Parser.coverage),deltaGlyphId:this.parseUShort()}:2===substFormat?{substFormat:2,coverage:this.parsePointer(Parser.coverage),substitute:this.parseOffset16List()}:void check.assert(!1,"0x"+start.toString(16)+": lookup type 1 format must be 1 or 2.")},subtableParsers[2]=function(){var substFormat=this.parseUShort();return check.argument(1===substFormat,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:substFormat,coverage:this.parsePointer(Parser.coverage),sequences:this.parseListOfLists()}},subtableParsers[3]=function(){var substFormat=this.parseUShort();return check.argument(1===substFormat,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:substFormat,coverage:this.parsePointer(Parser.coverage),alternateSets:this.parseListOfLists()}},subtableParsers[4]=function(){var substFormat=this.parseUShort();return check.argument(1===substFormat,"GSUB ligature table identifier-format must be 1"),{substFormat:substFormat,coverage:this.parsePointer(Parser.coverage),ligatureSets:this.parseListOfLists((function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}}))}};var lookupRecordDesc={sequenceIndex:Parser.uShort,lookupListIndex:Parser.uShort};subtableParsers[5]=function(){var start=this.offset+this.relativeOffset,substFormat=this.parseUShort();if(1===substFormat)return{substFormat:substFormat,coverage:this.parsePointer(Parser.coverage),ruleSets:this.parseListOfLists((function(){var glyphCount=this.parseUShort(),substCount=this.parseUShort();return{input:this.parseUShortList(glyphCount-1),lookupRecords:this.parseRecordList(substCount,lookupRecordDesc)}}))};if(2===substFormat)return{substFormat:substFormat,coverage:this.parsePointer(Parser.coverage),classDef:this.parsePointer(Parser.classDef),classSets:this.parseListOfLists((function(){var glyphCount=this.parseUShort(),substCount=this.parseUShort();return{classes:this.parseUShortList(glyphCount-1),lookupRecords:this.parseRecordList(substCount,lookupRecordDesc)}}))};if(3===substFormat){var glyphCount=this.parseUShort(),substCount=this.parseUShort();return{substFormat:substFormat,coverages:this.parseList(glyphCount,Parser.pointer(Parser.coverage)),lookupRecords:this.parseRecordList(substCount,lookupRecordDesc)}}check.assert(!1,"0x"+start.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},subtableParsers[6]=function(){var start=this.offset+this.relativeOffset,substFormat=this.parseUShort();return 1===substFormat?{substFormat:1,coverage:this.parsePointer(Parser.coverage),chainRuleSets:this.parseListOfLists((function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(lookupRecordDesc)}}))}:2===substFormat?{substFormat:2,coverage:this.parsePointer(Parser.coverage),backtrackClassDef:this.parsePointer(Parser.classDef),inputClassDef:this.parsePointer(Parser.classDef),lookaheadClassDef:this.parsePointer(Parser.classDef),chainClassSet:this.parseListOfLists((function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(lookupRecordDesc)}}))}:3===substFormat?{substFormat:3,backtrackCoverage:this.parseList(Parser.pointer(Parser.coverage)),inputCoverage:this.parseList(Parser.pointer(Parser.coverage)),lookaheadCoverage:this.parseList(Parser.pointer(Parser.coverage)),lookupRecords:this.parseRecordList(lookupRecordDesc)}:void check.assert(!1,"0x"+start.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},subtableParsers[7]=function(){var substFormat=this.parseUShort();check.argument(1===substFormat,"GSUB Extension Substitution subtable identifier-format must be 1");var extensionLookupType=this.parseUShort(),extensionParser=new Parser(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:extensionLookupType,extension:subtableParsers[extensionLookupType].call(extensionParser)}},subtableParsers[8]=function(){var substFormat=this.parseUShort();return check.argument(1===substFormat,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:substFormat,coverage:this.parsePointer(Parser.coverage),backtrackCoverage:this.parseList(Parser.pointer(Parser.coverage)),lookaheadCoverage:this.parseList(Parser.pointer(Parser.coverage)),substitutes:this.parseUShortList()}};var subtableMakers=new Array(9);subtableMakers[1]=function(subtable){return 1===subtable.substFormat?new table.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new table.Coverage(subtable.coverage)},{name:"deltaGlyphID",type:"USHORT",value:subtable.deltaGlyphId}]):new table.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new table.Coverage(subtable.coverage)}].concat(table.ushortList("substitute",subtable.substitute)))},subtableMakers[3]=function(subtable){return check.assert(1===subtable.substFormat,"Lookup type 3 substFormat must be 1."),new table.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new table.Coverage(subtable.coverage)}].concat(table.tableList("altSet",subtable.alternateSets,(function(alternateSet){return new table.Table("alternateSetTable",table.ushortList("alternate",alternateSet))}))))},subtableMakers[4]=function(subtable){return check.assert(1===subtable.substFormat,"Lookup type 4 substFormat must be 1."),new table.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new table.Coverage(subtable.coverage)}].concat(table.tableList("ligSet",subtable.ligatureSets,(function(ligatureSet){return new table.Table("ligatureSetTable",table.tableList("ligature",ligatureSet,(function(ligature){return new table.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:ligature.ligGlyph}].concat(table.ushortList("component",ligature.components,ligature.components.length+1)))})))}))))};var gsub={parse:function(data,start){var p=new Parser(data,start=start||0),tableVersion=p.parseVersion(1);return check.argument(1===tableVersion||1.1===tableVersion,"Unsupported GSUB table version."),1===tableVersion?{version:tableVersion,scripts:p.parseScriptList(),features:p.parseFeatureList(),lookups:p.parseLookupList(subtableParsers)}:{version:tableVersion,scripts:p.parseScriptList(),features:p.parseFeatureList(),lookups:p.parseLookupList(subtableParsers),variations:p.parseFeatureVariationsList()}},make:function(gsub){return new table.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new table.ScriptList(gsub.scripts)},{name:"features",type:"TABLE",value:new table.FeatureList(gsub.features)},{name:"lookups",type:"TABLE",value:new table.LookupList(gsub.lookups,subtableMakers)}])}};var meta={parse:function(data,start){var p=new parse.Parser(data,start),tableVersion=p.parseULong();check.argument(1===tableVersion,"Unsupported META table version."),p.parseULong(),p.parseULong();for(var numDataMaps=p.parseULong(),tags={},i=0;i<numDataMaps;i++){var tag=p.parseTag(),dataOffset=p.parseULong(),dataLength=p.parseULong(),text=decode.UTF8(data,start+dataOffset,dataLength);tags[tag]=text}return tags},make:function(tags){var numTags=Object.keys(tags).length,stringPool="",stringPoolOffset=16+12*numTags,result=new table.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:stringPoolOffset},{name:"numTags",type:"ULONG",value:numTags}]);for(var tag in tags){var pos=stringPool.length;stringPool+=tags[tag],result.fields.push({name:"tag "+tag,type:"TAG",value:tag}),result.fields.push({name:"offset "+tag,type:"ULONG",value:stringPoolOffset+pos}),result.fields.push({name:"length "+tag,type:"ULONG",value:tags[tag].length})}return result.fields.push({name:"stringPool",type:"CHARARRAY",value:stringPool}),result}};function log2(v){return Math.log(v)/Math.log(2)|0}function computeCheckSum(bytes){for(;bytes.length%4!=0;)bytes.push(0);for(var sum=0,i=0;i<bytes.length;i+=4)sum+=(bytes[i]<<24)+(bytes[i+1]<<16)+(bytes[i+2]<<8)+bytes[i+3];return sum%=Math.pow(2,32)}function makeTableRecord(tag,checkSum,offset,length){return new table.Record("Table Record",[{name:"tag",type:"TAG",value:void 0!==tag?tag:""},{name:"checkSum",type:"ULONG",value:void 0!==checkSum?checkSum:0},{name:"offset",type:"ULONG",value:void 0!==offset?offset:0},{name:"length",type:"ULONG",value:void 0!==length?length:0}])}function makeSfntTable(tables){var sfnt=new table.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);sfnt.tables=tables,sfnt.numTables=tables.length;var highestPowerOf2=Math.pow(2,log2(sfnt.numTables));sfnt.searchRange=16*highestPowerOf2,sfnt.entrySelector=log2(highestPowerOf2),sfnt.rangeShift=16*sfnt.numTables-sfnt.searchRange;for(var recordFields=[],tableFields=[],offset=sfnt.sizeOf()+makeTableRecord().sizeOf()*sfnt.numTables;offset%4!=0;)offset+=1,tableFields.push({name:"padding",type:"BYTE",value:0});for(var i=0;i<tables.length;i+=1){var t=tables[i];check.argument(4===t.tableName.length,"Table name"+t.tableName+" is invalid.");var tableLength=t.sizeOf(),tableRecord=makeTableRecord(t.tableName,computeCheckSum(t.encode()),offset,tableLength);for(recordFields.push({name:tableRecord.tag+" Table Record",type:"RECORD",value:tableRecord}),tableFields.push({name:t.tableName+" table",type:"RECORD",value:t}),offset+=tableLength,check.argument(!isNaN(offset),"Something went wrong calculating the offset.");offset%4!=0;)offset+=1,tableFields.push({name:"padding",type:"BYTE",value:0})}return recordFields.sort((function(r1,r2){return r1.value.tag>r2.value.tag?1:-1})),sfnt.fields=sfnt.fields.concat(recordFields),sfnt.fields=sfnt.fields.concat(tableFields),sfnt}function metricsForChar(font,chars,notFoundMetrics){for(var i=0;i<chars.length;i+=1){var glyphIndex=font.charToGlyphIndex(chars[i]);if(glyphIndex>0)return font.glyphs.get(glyphIndex).getMetrics()}return notFoundMetrics}function average(vs){for(var sum=0,i=0;i<vs.length;i+=1)sum+=vs[i];return sum/vs.length}var sfnt={make:makeSfntTable,fontToTable:function(font){for(var firstCharIndex,xMins=[],yMins=[],xMaxs=[],yMaxs=[],advanceWidths=[],leftSideBearings=[],rightSideBearings=[],lastCharIndex=0,ulUnicodeRange1=0,ulUnicodeRange2=0,ulUnicodeRange3=0,ulUnicodeRange4=0,i=0;i<font.glyphs.length;i+=1){var glyph=font.glyphs.get(i),unicode=0|glyph.unicode;if(isNaN(glyph.advanceWidth))throw new Error("Glyph "+glyph.name+" ("+i+"): advanceWidth is not a number.");(firstCharIndex>unicode||void 0===firstCharIndex)&&unicode>0&&(firstCharIndex=unicode),lastCharIndex<unicode&&(lastCharIndex=unicode);var position=os2.getUnicodeRange(unicode);if(position<32)ulUnicodeRange1|=1<<position;else if(position<64)ulUnicodeRange2|=1<<position-32;else if(position<96)ulUnicodeRange3|=1<<position-64;else{if(!(position<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");ulUnicodeRange4|=1<<position-96}if(".notdef"!==glyph.name){var metrics=glyph.getMetrics();xMins.push(metrics.xMin),yMins.push(metrics.yMin),xMaxs.push(metrics.xMax),yMaxs.push(metrics.yMax),leftSideBearings.push(metrics.leftSideBearing),rightSideBearings.push(metrics.rightSideBearing),advanceWidths.push(glyph.advanceWidth)}}var globals={xMin:Math.min.apply(null,xMins),yMin:Math.min.apply(null,yMins),xMax:Math.max.apply(null,xMaxs),yMax:Math.max.apply(null,yMaxs),advanceWidthMax:Math.max.apply(null,advanceWidths),advanceWidthAvg:average(advanceWidths),minLeftSideBearing:Math.min.apply(null,leftSideBearings),maxLeftSideBearing:Math.max.apply(null,leftSideBearings),minRightSideBearing:Math.min.apply(null,rightSideBearings)};globals.ascender=font.ascender,globals.descender=font.descender;var headTable=head.make({flags:3,unitsPerEm:font.unitsPerEm,xMin:globals.xMin,yMin:globals.yMin,xMax:globals.xMax,yMax:globals.yMax,lowestRecPPEM:3,createdTimestamp:font.createdTimestamp}),hheaTable=hhea.make({ascender:globals.ascender,descender:globals.descender,advanceWidthMax:globals.advanceWidthMax,minLeftSideBearing:globals.minLeftSideBearing,minRightSideBearing:globals.minRightSideBearing,xMaxExtent:globals.maxLeftSideBearing+(globals.xMax-globals.xMin),numberOfHMetrics:font.glyphs.length}),maxpTable=maxp.make(font.glyphs.length),os2Table=os2.make(Object.assign({xAvgCharWidth:Math.round(globals.advanceWidthAvg),usFirstCharIndex:firstCharIndex,usLastCharIndex:lastCharIndex,ulUnicodeRange1:ulUnicodeRange1,ulUnicodeRange2:ulUnicodeRange2,ulUnicodeRange3:ulUnicodeRange3,ulUnicodeRange4:ulUnicodeRange4,sTypoAscender:globals.ascender,sTypoDescender:globals.descender,sTypoLineGap:0,usWinAscent:globals.yMax,usWinDescent:Math.abs(globals.yMin),ulCodePageRange1:1,sxHeight:metricsForChar(font,"xyvw",{yMax:Math.round(globals.ascender/2)}).yMax,sCapHeight:metricsForChar(font,"HIKLEFJMNTZBDPRAGOQSUVWXY",globals).yMax,usDefaultChar:font.hasChar(" ")?32:0,usBreakChar:font.hasChar(" ")?32:0},font.tables.os2)),hmtxTable=hmtx.make(font.glyphs),cmapTable=cmap.make(font.glyphs),englishFamilyName=font.getEnglishName("fontFamily"),englishStyleName=font.getEnglishName("fontSubfamily"),englishFullName=englishFamilyName+" "+englishStyleName,postScriptName=font.getEnglishName("postScriptName");postScriptName||(postScriptName=englishFamilyName.replace(/\s/g,"")+"-"+englishStyleName);var names={};for(var n in font.names)names[n]=font.names[n];names.uniqueID||(names.uniqueID={en:font.getEnglishName("manufacturer")+":"+englishFullName}),names.postScriptName||(names.postScriptName={en:postScriptName}),names.preferredFamily||(names.preferredFamily=font.names.fontFamily),names.preferredSubfamily||(names.preferredSubfamily=font.names.fontSubfamily);var languageTags=[],nameTable=_name.make(names,languageTags),ltagTable=languageTags.length>0?ltag.make(languageTags):void 0,postTable=post.make(),cffTable=cff.make(font.glyphs,{version:font.getEnglishName("version"),fullName:englishFullName,familyName:englishFamilyName,weightName:englishStyleName,postScriptName:postScriptName,unitsPerEm:font.unitsPerEm,fontBBox:[0,globals.yMin,globals.ascender,globals.advanceWidthMax]}),metaTable=font.metas&&Object.keys(font.metas).length>0?meta.make(font.metas):void 0,tables=[headTable,hheaTable,maxpTable,os2Table,nameTable,cmapTable,postTable,cffTable,hmtxTable];ltagTable&&tables.push(ltagTable),font.tables.gsub&&tables.push(gsub.make(font.tables.gsub)),metaTable&&tables.push(metaTable);for(var sfntTable=makeSfntTable(tables),checkSum=computeCheckSum(sfntTable.encode()),tableFields=sfntTable.fields,checkSumAdjusted=!1,i$1=0;i$1<tableFields.length;i$1+=1)if("head table"===tableFields[i$1].name){tableFields[i$1].value.checkSumAdjustment=2981146554-checkSum,checkSumAdjusted=!0;break}if(!checkSumAdjusted)throw new Error("Could not find head table with checkSum to adjust.");return sfntTable},computeCheckSum:computeCheckSum};function searchTag(arr,tag){for(var imin=0,imax=arr.length-1;imin<=imax;){var imid=imin+imax>>>1,val=arr[imid].tag;if(val===tag)return imid;val<tag?imin=imid+1:imax=imid-1}return-imin-1}function binSearch(arr,value){for(var imin=0,imax=arr.length-1;imin<=imax;){var imid=imin+imax>>>1,val=arr[imid];if(val===value)return imid;val<value?imin=imid+1:imax=imid-1}return-imin-1}function searchRange(ranges,value){for(var range,imin=0,imax=ranges.length-1;imin<=imax;){var imid=imin+imax>>>1,start=(range=ranges[imid]).start;if(start===value)return range;start<value?imin=imid+1:imax=imid-1}if(imin>0)return value>(range=ranges[imin-1]).end?0:range}function Layout(font,tableName){this.font=font,this.tableName=tableName}function Position(font){Layout.call(this,font,"gpos")}function Substitution(font){Layout.call(this,font,"gsub")}function arraysEqual(ar1,ar2){var n=ar1.length;if(n!==ar2.length)return!1;for(var i=0;i<n;i++)if(ar1[i]!==ar2[i])return!1;return!0}function getSubstFormat(lookupTable,format,defaultSubtable){for(var subtables=lookupTable.subtables,i=0;i<subtables.length;i++){var subtable=subtables[i];if(subtable.substFormat===format)return subtable}if(defaultSubtable)return subtables.push(defaultSubtable),defaultSubtable}function nodeBufferToArrayBuffer(buffer){for(var ab=new ArrayBuffer(buffer.length),view=new Uint8Array(ab),i=0;i<buffer.length;++i)view[i]=buffer[i];return ab}function checkArgument(expression,message){if(!expression)throw message}function parseGlyphCoordinate(p,flag,previousValue,shortVectorBitMask,sameBitMask){var v;return(flag&shortVectorBitMask)>0?(v=p.parseByte(),0==(flag&sameBitMask)&&(v=-v),v=previousValue+v):v=(flag&sameBitMask)>0?previousValue:previousValue+p.parseShort(),v}function parseGlyph(glyph,data,start){var flags,flag,p=new parse.Parser(data,start);if(glyph.numberOfContours=p.parseShort(),glyph._xMin=p.parseShort(),glyph._yMin=p.parseShort(),glyph._xMax=p.parseShort(),glyph._yMax=p.parseShort(),glyph.numberOfContours>0){for(var endPointIndices=glyph.endPointIndices=[],i=0;i<glyph.numberOfContours;i+=1)endPointIndices.push(p.parseUShort());glyph.instructionLength=p.parseUShort(),glyph.instructions=[];for(var i$1=0;i$1<glyph.instructionLength;i$1+=1)glyph.instructions.push(p.parseByte());var numberOfCoordinates=endPointIndices[endPointIndices.length-1]+1;flags=[];for(var i$2=0;i$2<numberOfCoordinates;i$2+=1)if(flag=p.parseByte(),flags.push(flag),(8&flag)>0)for(var repeatCount=p.parseByte(),j=0;j<repeatCount;j+=1)flags.push(flag),i$2+=1;if(check.argument(flags.length===numberOfCoordinates,"Bad flags."),endPointIndices.length>0){var point,points=[];if(numberOfCoordinates>0){for(var i$3=0;i$3<numberOfCoordinates;i$3+=1)flag=flags[i$3],(point={}).onCurve=!!(1&flag),point.lastPointOfContour=endPointIndices.indexOf(i$3)>=0,points.push(point);for(var px=0,i$4=0;i$4<numberOfCoordinates;i$4+=1)flag=flags[i$4],(point=points[i$4]).x=parseGlyphCoordinate(p,flag,px,2,16),px=point.x;for(var py=0,i$5=0;i$5<numberOfCoordinates;i$5+=1)flag=flags[i$5],(point=points[i$5]).y=parseGlyphCoordinate(p,flag,py,4,32),py=point.y}glyph.points=points}else glyph.points=[]}else if(0===glyph.numberOfContours)glyph.points=[];else{glyph.isComposite=!0,glyph.points=[],glyph.components=[];for(var moreComponents=!0;moreComponents;){flags=p.parseUShort();var component={glyphIndex:p.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(1&flags)>0?(2&flags)>0?(component.dx=p.parseShort(),component.dy=p.parseShort()):component.matchedPoints=[p.parseUShort(),p.parseUShort()]:(2&flags)>0?(component.dx=p.parseChar(),component.dy=p.parseChar()):component.matchedPoints=[p.parseByte(),p.parseByte()],(8&flags)>0?component.xScale=component.yScale=p.parseF2Dot14():(64&flags)>0?(component.xScale=p.parseF2Dot14(),component.yScale=p.parseF2Dot14()):(128&flags)>0&&(component.xScale=p.parseF2Dot14(),component.scale01=p.parseF2Dot14(),component.scale10=p.parseF2Dot14(),component.yScale=p.parseF2Dot14()),glyph.components.push(component),moreComponents=!!(32&flags)}if(256&flags){glyph.instructionLength=p.parseUShort(),glyph.instructions=[];for(var i$6=0;i$6<glyph.instructionLength;i$6+=1)glyph.instructions.push(p.parseByte())}}}function transformPoints(points,transform){for(var newPoints=[],i=0;i<points.length;i+=1){var pt=points[i],newPt={x:transform.xScale*pt.x+transform.scale01*pt.y+transform.dx,y:transform.scale10*pt.x+transform.yScale*pt.y+transform.dy,onCurve:pt.onCurve,lastPointOfContour:pt.lastPointOfContour};newPoints.push(newPt)}return newPoints}function getPath(points){var p=new Path;if(!points)return p;for(var contours=function(points){for(var contours=[],currentContour=[],i=0;i<points.length;i+=1){var pt=points[i];currentContour.push(pt),pt.lastPointOfContour&&(contours.push(currentContour),currentContour=[])}return check.argument(0===currentContour.length,"There are still points left in the current contour."),contours}(points),contourIndex=0;contourIndex<contours.length;++contourIndex){var contour=contours[contourIndex],prev=null,curr=contour[contour.length-1],next=contour[0];if(curr.onCurve)p.moveTo(curr.x,curr.y);else if(next.onCurve)p.moveTo(next.x,next.y);else{var start={x:.5*(curr.x+next.x),y:.5*(curr.y+next.y)};p.moveTo(start.x,start.y)}for(var i=0;i<contour.length;++i)if(prev=curr,curr=next,next=contour[(i+1)%contour.length],curr.onCurve)p.lineTo(curr.x,curr.y);else{var next2=next;prev.onCurve||{x:.5*(curr.x+prev.x),y:.5*(curr.y+prev.y)},next.onCurve||(next2={x:.5*(curr.x+next.x),y:.5*(curr.y+next.y)}),p.quadraticCurveTo(curr.x,curr.y,next2.x,next2.y)}p.closePath()}return p}function buildPath(glyphs,glyph){if(glyph.isComposite)for(var j=0;j<glyph.components.length;j+=1){var component=glyph.components[j],componentGlyph=glyphs.get(component.glyphIndex);if(componentGlyph.getPath(),componentGlyph.points){var transformedPoints=void 0;if(void 0===component.matchedPoints)transformedPoints=transformPoints(componentGlyph.points,component);else{if(component.matchedPoints[0]>glyph.points.length-1||component.matchedPoints[1]>componentGlyph.points.length-1)throw Error("Matched points out of range in "+glyph.name);var firstPt=glyph.points[component.matchedPoints[0]],secondPt=componentGlyph.points[component.matchedPoints[1]],transform={xScale:component.xScale,scale01:component.scale01,scale10:component.scale10,yScale:component.yScale,dx:0,dy:0};secondPt=transformPoints([secondPt],transform)[0],transform.dx=firstPt.x-secondPt.x,transform.dy=firstPt.y-secondPt.y,transformedPoints=transformPoints(componentGlyph.points,transform)}glyph.points=glyph.points.concat(transformedPoints)}}return getPath(glyph.points)}Layout.prototype={searchTag:searchTag,binSearch:binSearch,getTable:function(create){var layout=this.font.tables[this.tableName];return!layout&&create&&(layout=this.font.tables[this.tableName]=this.createDefaultTable()),layout},getScriptNames:function(){var layout=this.getTable();return layout?layout.scripts.map((function(script){return script.tag})):[]},getDefaultScriptName:function(){var layout=this.getTable();if(layout){for(var hasLatn=!1,i=0;i<layout.scripts.length;i++){var name=layout.scripts[i].tag;if("DFLT"===name)return name;"latn"===name&&(hasLatn=!0)}return hasLatn?"latn":void 0}},getScriptTable:function(script,create){var layout=this.getTable(create);if(layout){script=script||"DFLT";var scripts=layout.scripts,pos=searchTag(layout.scripts,script);if(pos>=0)return scripts[pos].script;if(create){var scr={tag:script,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return scripts.splice(-1-pos,0,scr),scr.script}}},getLangSysTable:function(script,language,create){var scriptTable=this.getScriptTable(script,create);if(scriptTable){if(!language||"dflt"===language||"DFLT"===language)return scriptTable.defaultLangSys;var pos=searchTag(scriptTable.langSysRecords,language);if(pos>=0)return scriptTable.langSysRecords[pos].langSys;if(create){var langSysRecord={tag:language,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return scriptTable.langSysRecords.splice(-1-pos,0,langSysRecord),langSysRecord.langSys}}},getFeatureTable:function(script,language,feature,create){var langSysTable=this.getLangSysTable(script,language,create);if(langSysTable){for(var featureRecord,featIndexes=langSysTable.featureIndexes,allFeatures=this.font.tables[this.tableName].features,i=0;i<featIndexes.length;i++)if((featureRecord=allFeatures[featIndexes[i]]).tag===feature)return featureRecord.feature;if(create){var index=allFeatures.length;return check.assert(0===index||feature>=allFeatures[index-1].tag,"Features must be added in alphabetical order."),featureRecord={tag:feature,feature:{params:0,lookupListIndexes:[]}},allFeatures.push(featureRecord),featIndexes.push(index),featureRecord.feature}}},getLookupTables:function(script,language,feature,lookupType,create){var featureTable=this.getFeatureTable(script,language,feature,create),tables=[];if(featureTable){for(var lookupTable,lookupListIndexes=featureTable.lookupListIndexes,allLookups=this.font.tables[this.tableName].lookups,i=0;i<lookupListIndexes.length;i++)(lookupTable=allLookups[lookupListIndexes[i]]).lookupType===lookupType&&tables.push(lookupTable);if(0===tables.length&&create){lookupTable={lookupType:lookupType,lookupFlag:0,subtables:[],markFilteringSet:void 0};var index=allLookups.length;return allLookups.push(lookupTable),lookupListIndexes.push(index),[lookupTable]}}return tables},getGlyphClass:function(classDefTable,glyphIndex){switch(classDefTable.format){case 1:return classDefTable.startGlyph<=glyphIndex&&glyphIndex<classDefTable.startGlyph+classDefTable.classes.length?classDefTable.classes[glyphIndex-classDefTable.startGlyph]:0;case 2:var range=searchRange(classDefTable.ranges,glyphIndex);return range?range.classId:0}},getCoverageIndex:function(coverageTable,glyphIndex){switch(coverageTable.format){case 1:var index=binSearch(coverageTable.glyphs,glyphIndex);return index>=0?index:-1;case 2:var range=searchRange(coverageTable.ranges,glyphIndex);return range?range.index+glyphIndex-range.start:-1}},expandCoverage:function(coverageTable){if(1===coverageTable.format)return coverageTable.glyphs;for(var glyphs=[],ranges=coverageTable.ranges,i=0;i<ranges.length;i++)for(var range=ranges[i],start=range.start,end=range.end,j=start;j<=end;j++)glyphs.push(j);return glyphs}},Position.prototype=Layout.prototype,Position.prototype.init=function(){var script=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(script)},Position.prototype.getKerningValue=function(kerningLookups,leftIndex,rightIndex){for(var i=0;i<kerningLookups.length;i++)for(var subtables=kerningLookups[i].subtables,j=0;j<subtables.length;j++){var subtable=subtables[j],covIndex=this.getCoverageIndex(subtable.coverage,leftIndex);if(!(covIndex<0))switch(subtable.posFormat){case 1:for(var pairSet=subtable.pairSets[covIndex],k=0;k<pairSet.length;k++){var pair=pairSet[k];if(pair.secondGlyph===rightIndex)return pair.value1&&pair.value1.xAdvance||0}break;case 2:var class1=this.getGlyphClass(subtable.classDef1,leftIndex),class2=this.getGlyphClass(subtable.classDef2,rightIndex),pair$1=subtable.classRecords[class1][class2];return pair$1.value1&&pair$1.value1.xAdvance||0}}return 0},Position.prototype.getKerningTables=function(script,language){if(this.font.tables.gpos)return this.getLookupTables(script,language,"kern",2)},Substitution.prototype=Layout.prototype,Substitution.prototype.createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},Substitution.prototype.getSingle=function(feature,script,language){for(var substitutions=[],lookupTables=this.getLookupTables(script,language,feature,1),idx=0;idx<lookupTables.length;idx++)for(var subtables=lookupTables[idx].subtables,i=0;i<subtables.length;i++){var subtable=subtables[i],glyphs=this.expandCoverage(subtable.coverage),j=void 0;if(1===subtable.substFormat){var delta=subtable.deltaGlyphId;for(j=0;j<glyphs.length;j++){var glyph=glyphs[j];substitutions.push({sub:glyph,by:glyph+delta})}}else{var substitute=subtable.substitute;for(j=0;j<glyphs.length;j++)substitutions.push({sub:glyphs[j],by:substitute[j]})}}return substitutions},Substitution.prototype.getAlternates=function(feature,script,language){for(var alternates=[],lookupTables=this.getLookupTables(script,language,feature,3),idx=0;idx<lookupTables.length;idx++)for(var subtables=lookupTables[idx].subtables,i=0;i<subtables.length;i++)for(var subtable=subtables[i],glyphs=this.expandCoverage(subtable.coverage),alternateSets=subtable.alternateSets,j=0;j<glyphs.length;j++)alternates.push({sub:glyphs[j],by:alternateSets[j]});return alternates},Substitution.prototype.getLigatures=function(feature,script,language){for(var ligatures=[],lookupTables=this.getLookupTables(script,language,feature,4),idx=0;idx<lookupTables.length;idx++)for(var subtables=lookupTables[idx].subtables,i=0;i<subtables.length;i++)for(var subtable=subtables[i],glyphs=this.expandCoverage(subtable.coverage),ligatureSets=subtable.ligatureSets,j=0;j<glyphs.length;j++)for(var startGlyph=glyphs[j],ligSet=ligatureSets[j],k=0;k<ligSet.length;k++){var lig=ligSet[k];ligatures.push({sub:[startGlyph].concat(lig.components),by:lig.ligGlyph})}return ligatures},Substitution.prototype.addSingle=function(feature,substitution,script,language){var subtable=getSubstFormat(this.getLookupTables(script,language,feature,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});check.assert(1===subtable.coverage.format,"Ligature: unable to modify coverage table format "+subtable.coverage.format);var coverageGlyph=substitution.sub,pos=this.binSearch(subtable.coverage.glyphs,coverageGlyph);pos<0&&(pos=-1-pos,subtable.coverage.glyphs.splice(pos,0,coverageGlyph),subtable.substitute.splice(pos,0,0)),subtable.substitute[pos]=substitution.by},Substitution.prototype.addAlternate=function(feature,substitution,script,language){var subtable=getSubstFormat(this.getLookupTables(script,language,feature,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});check.assert(1===subtable.coverage.format,"Ligature: unable to modify coverage table format "+subtable.coverage.format);var coverageGlyph=substitution.sub,pos=this.binSearch(subtable.coverage.glyphs,coverageGlyph);pos<0&&(pos=-1-pos,subtable.coverage.glyphs.splice(pos,0,coverageGlyph),subtable.alternateSets.splice(pos,0,0)),subtable.alternateSets[pos]=substitution.by},Substitution.prototype.addLigature=function(feature,ligature,script,language){var lookupTable=this.getLookupTables(script,language,feature,4,!0)[0],subtable=lookupTable.subtables[0];subtable||(subtable={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},lookupTable.subtables[0]=subtable),check.assert(1===subtable.coverage.format,"Ligature: unable to modify coverage table format "+subtable.coverage.format);var coverageGlyph=ligature.sub[0],ligComponents=ligature.sub.slice(1),ligatureTable={ligGlyph:ligature.by,components:ligComponents},pos=this.binSearch(subtable.coverage.glyphs,coverageGlyph);if(pos>=0){for(var ligatureSet=subtable.ligatureSets[pos],i=0;i<ligatureSet.length;i++)if(arraysEqual(ligatureSet[i].components,ligComponents))return;ligatureSet.push(ligatureTable)}else pos=-1-pos,subtable.coverage.glyphs.splice(pos,0,coverageGlyph),subtable.ligatureSets.splice(pos,0,[ligatureTable])},Substitution.prototype.getFeature=function(feature,script,language){if(/ss\d\d/.test(feature))return this.getSingle(feature,script,language);switch(feature){case"aalt":case"salt":return this.getSingle(feature,script,language).concat(this.getAlternates(feature,script,language));case"dlig":case"liga":case"rlig":return this.getLigatures(feature,script,language)}},Substitution.prototype.add=function(feature,sub,script,language){if(/ss\d\d/.test(feature))return this.addSingle(feature,sub,script,language);switch(feature){case"aalt":case"salt":return"number"==typeof sub.by?this.addSingle(feature,sub,script,language):this.addAlternate(feature,sub,script,language);case"dlig":case"liga":case"rlig":return this.addLigature(feature,sub,script,language)}};var instructionTable,exec,execGlyph,execComponent,glyf={getPath:getPath,parse:function(data,start,loca,font,opt){return opt.lowMemory?function(data,start,loca,font){var glyphs=new glyphset.GlyphSet(font);return font._push=function(i){var offset=loca[i];offset!==loca[i+1]?glyphs.push(i,glyphset.ttfGlyphLoader(font,i,parseGlyph,data,start+offset,buildPath)):glyphs.push(i,glyphset.glyphLoader(font,i))},glyphs}(data,start,loca,font):function(data,start,loca,font){for(var glyphs=new glyphset.GlyphSet(font),i=0;i<loca.length-1;i+=1){var offset=loca[i];offset!==loca[i+1]?glyphs.push(i,glyphset.ttfGlyphLoader(font,i,parseGlyph,data,start+offset,buildPath)):glyphs.push(i,glyphset.glyphLoader(font,i))}return glyphs}(data,start,loca,font)}};function Hinting(font){this.font=font,this.getCommands=function(hPoints){return glyf.getPath(hPoints).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function roundOff(v){return v}function roundToGrid(v){return Math.sign(v)*Math.round(Math.abs(v))}function roundToDoubleGrid(v){return Math.sign(v)*Math.round(Math.abs(2*v))/2}function roundToHalfGrid(v){return Math.sign(v)*(Math.round(Math.abs(v)+.5)-.5)}function roundUpToGrid(v){return Math.sign(v)*Math.ceil(Math.abs(v))}function roundDownToGrid(v){return Math.sign(v)*Math.floor(Math.abs(v))}var roundSuper=function(v){var period=this.srPeriod,phase=this.srPhase,sign=1;return v<0&&(v=-v,sign=-1),v+=this.srThreshold-phase,v=Math.trunc(v/period)*period,(v+=phase)<0?phase*sign:v*sign},xUnitVector={x:1,y:0,axis:"x",distance:function(p1,p2,o1,o2){return(o1?p1.xo:p1.x)-(o2?p2.xo:p2.x)},interpolate:function(p,rp1,rp2,pv){var do1,do2,doa1,doa2,dm1,dm2,dt;if(!pv||pv===this)return do1=p.xo-rp1.xo,do2=p.xo-rp2.xo,dm1=rp1.x-rp1.xo,dm2=rp2.x-rp2.xo,0===(dt=(doa1=Math.abs(do1))+(doa2=Math.abs(do2)))?void(p.x=p.xo+(dm1+dm2)/2):void(p.x=p.xo+(dm1*doa2+dm2*doa1)/dt);do1=pv.distance(p,rp1,!0,!0),do2=pv.distance(p,rp2,!0,!0),dm1=pv.distance(rp1,rp1,!1,!0),dm2=pv.distance(rp2,rp2,!1,!0),0!==(dt=(doa1=Math.abs(do1))+(doa2=Math.abs(do2)))?xUnitVector.setRelative(p,p,(dm1*doa2+dm2*doa1)/dt,pv,!0):xUnitVector.setRelative(p,p,(dm1+dm2)/2,pv,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(p,rp,d,pv,org){if(pv&&pv!==this){var rpx=org?rp.xo:rp.x,rpy=org?rp.yo:rp.y,rpdx=rpx+d*pv.x,rpdy=rpy+d*pv.y;p.x=rpdx+(p.y-rpdy)/pv.normalSlope}else p.x=(org?rp.xo:rp.x)+d},slope:0,touch:function(p){p.xTouched=!0},touched:function(p){return p.xTouched},untouch:function(p){p.xTouched=!1}},yUnitVector={x:0,y:1,axis:"y",distance:function(p1,p2,o1,o2){return(o1?p1.yo:p1.y)-(o2?p2.yo:p2.y)},interpolate:function(p,rp1,rp2,pv){var do1,do2,doa1,doa2,dm1,dm2,dt;if(!pv||pv===this)return do1=p.yo-rp1.yo,do2=p.yo-rp2.yo,dm1=rp1.y-rp1.yo,dm2=rp2.y-rp2.yo,0===(dt=(doa1=Math.abs(do1))+(doa2=Math.abs(do2)))?void(p.y=p.yo+(dm1+dm2)/2):void(p.y=p.yo+(dm1*doa2+dm2*doa1)/dt);do1=pv.distance(p,rp1,!0,!0),do2=pv.distance(p,rp2,!0,!0),dm1=pv.distance(rp1,rp1,!1,!0),dm2=pv.distance(rp2,rp2,!1,!0),0!==(dt=(doa1=Math.abs(do1))+(doa2=Math.abs(do2)))?yUnitVector.setRelative(p,p,(dm1*doa2+dm2*doa1)/dt,pv,!0):yUnitVector.setRelative(p,p,(dm1+dm2)/2,pv,!0)},normalSlope:0,setRelative:function(p,rp,d,pv,org){if(pv&&pv!==this){var rpx=org?rp.xo:rp.x,rpy=org?rp.yo:rp.y,rpdx=rpx+d*pv.x,rpdy=rpy+d*pv.y;p.y=rpdy+pv.normalSlope*(p.x-rpdx)}else p.y=(org?rp.yo:rp.y)+d},slope:Number.POSITIVE_INFINITY,touch:function(p){p.yTouched=!0},touched:function(p){return p.yTouched},untouch:function(p){p.yTouched=!1}};function UnitVector(x,y){this.x=x,this.y=y,this.axis=void 0,this.slope=y/x,this.normalSlope=-x/y,Object.freeze(this)}function getUnitVector(x,y){var d=Math.sqrt(x*x+y*y);return y/=d,1===(x/=d)&&0===y?xUnitVector:0===x&&1===y?yUnitVector:new UnitVector(x,y)}function HPoint(x,y,lastPointOfContour,onCurve){this.x=this.xo=Math.round(64*x)/64,this.y=this.yo=Math.round(64*y)/64,this.lastPointOfContour=lastPointOfContour,this.onCurve=onCurve,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(xUnitVector),Object.freeze(yUnitVector),UnitVector.prototype.distance=function(p1,p2,o1,o2){return this.x*xUnitVector.distance(p1,p2,o1,o2)+this.y*yUnitVector.distance(p1,p2,o1,o2)},UnitVector.prototype.interpolate=function(p,rp1,rp2,pv){var dm1,dm2,do1,do2,doa1,doa2,dt;do1=pv.distance(p,rp1,!0,!0),do2=pv.distance(p,rp2,!0,!0),dm1=pv.distance(rp1,rp1,!1,!0),dm2=pv.distance(rp2,rp2,!1,!0),0!==(dt=(doa1=Math.abs(do1))+(doa2=Math.abs(do2)))?this.setRelative(p,p,(dm1*doa2+dm2*doa1)/dt,pv,!0):this.setRelative(p,p,(dm1+dm2)/2,pv,!0)},UnitVector.prototype.setRelative=function(p,rp,d,pv,org){pv=pv||this;var rpx=org?rp.xo:rp.x,rpy=org?rp.yo:rp.y,rpdx=rpx+d*pv.x,rpdy=rpy+d*pv.y,pvns=pv.normalSlope,fvs=this.slope,px=p.x,py=p.y;p.x=(fvs*px-pvns*rpdx+rpdy-py)/(fvs-pvns),p.y=fvs*(p.x-px)+py},UnitVector.prototype.touch=function(p){p.xTouched=!0,p.yTouched=!0},HPoint.prototype.nextTouched=function(v){for(var p=this.nextPointOnContour;!v.touched(p)&&p!==this;)p=p.nextPointOnContour;return p},HPoint.prototype.prevTouched=function(v){for(var p=this.prevPointOnContour;!v.touched(p)&&p!==this;)p=p.prevPointOnContour;return p};var HPZero=Object.freeze(new HPoint(0,0)),defaultState={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function State(env,prog){switch(this.env=env,this.stack=[],this.prog=prog,env){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=xUnitVector,this.round=roundToGrid}}function initTZone(state){for(var tZone=state.tZone=new Array(state.gZone.length),i=0;i<tZone.length;i++)tZone[i]=new HPoint(0,0)}function skip(state,handleElse){var ins,prog=state.prog,ip=state.ip,nesting=1;do{if(88===(ins=prog[++ip]))nesting++;else if(89===ins)nesting--;else if(64===ins)ip+=prog[ip+1]+1;else if(65===ins)ip+=2*prog[ip+1]+1;else if(ins>=176&&ins<=183)ip+=ins-176+1;else if(ins>=184&&ins<=191)ip+=2*(ins-184+1);else if(handleElse&&1===nesting&&27===ins)break}while(nesting>0);state.ip=ip}function SVTCA(v,state){exports.DEBUG&&console.log(state.step,"SVTCA["+v.axis+"]"),state.fv=state.pv=state.dpv=v}function SPVTCA(v,state){exports.DEBUG&&console.log(state.step,"SPVTCA["+v.axis+"]"),state.pv=state.dpv=v}function SFVTCA(v,state){exports.DEBUG&&console.log(state.step,"SFVTCA["+v.axis+"]"),state.fv=v}function SPVTL(a,state){var dx,dy,stack=state.stack,p2i=stack.pop(),p1i=stack.pop(),p2=state.z2[p2i],p1=state.z1[p1i];exports.DEBUG&&console.log("SPVTL["+a+"]",p2i,p1i),a?(dx=p2.y-p1.y,dy=p1.x-p2.x):(dx=p1.x-p2.x,dy=p1.y-p2.y),state.pv=state.dpv=getUnitVector(dx,dy)}function SFVTL(a,state){var dx,dy,stack=state.stack,p2i=stack.pop(),p1i=stack.pop(),p2=state.z2[p2i],p1=state.z1[p1i];exports.DEBUG&&console.log("SFVTL["+a+"]",p2i,p1i),a?(dx=p2.y-p1.y,dy=p1.x-p2.x):(dx=p1.x-p2.x,dy=p1.y-p2.y),state.fv=getUnitVector(dx,dy)}function POP(state){exports.DEBUG&&console.log(state.step,"POP[]"),state.stack.pop()}function MDAP(round,state){var pi=state.stack.pop(),p=state.z0[pi],fv=state.fv,pv=state.pv;exports.DEBUG&&console.log(state.step,"MDAP["+round+"]",pi);var d=pv.distance(p,HPZero);round&&(d=state.round(d)),fv.setRelative(p,HPZero,d,pv),fv.touch(p),state.rp0=state.rp1=pi}function IUP(v,state){var cp,pp,np,z2=state.z2,pLen=z2.length-2;exports.DEBUG&&console.log(state.step,"IUP["+v.axis+"]");for(var i=0;i<pLen;i++)cp=z2[i],v.touched(cp)||(pp=cp.prevTouched(v))!==cp&&(pp===(np=cp.nextTouched(v))&&v.setRelative(cp,cp,v.distance(pp,pp,!1,!0),v,!0),v.interpolate(cp,pp,np,v))}function SHP(a,state){for(var stack=state.stack,rpi=a?state.rp1:state.rp2,rp=(a?state.z0:state.z1)[rpi],fv=state.fv,pv=state.pv,loop=state.loop,z2=state.z2;loop--;){var pi=stack.pop(),p=z2[pi],d=pv.distance(rp,rp,!1,!0);fv.setRelative(p,p,d,pv),fv.touch(p),exports.DEBUG&&console.log(state.step,(state.loop>1?"loop "+(state.loop-loop)+": ":"")+"SHP["+(a?"rp1":"rp2")+"]",pi)}state.loop=1}function SHC(a,state){var stack=state.stack,rpi=a?state.rp1:state.rp2,rp=(a?state.z0:state.z1)[rpi],fv=state.fv,pv=state.pv,ci=stack.pop(),sp=state.z2[state.contours[ci]],p=sp;exports.DEBUG&&console.log(state.step,"SHC["+a+"]",ci);var d=pv.distance(rp,rp,!1,!0);do{p!==rp&&fv.setRelative(p,p,d,pv),p=p.nextPointOnContour}while(p!==sp)}function SHZ(a,state){var z,p,stack=state.stack,rpi=a?state.rp1:state.rp2,rp=(a?state.z0:state.z1)[rpi],fv=state.fv,pv=state.pv,e=stack.pop();switch(exports.DEBUG&&console.log(state.step,"SHZ["+a+"]",e),e){case 0:z=state.tZone;break;case 1:z=state.gZone;break;default:throw new Error("Invalid zone")}for(var d=pv.distance(rp,rp,!1,!0),pLen=z.length-2,i=0;i<pLen;i++)p=z[i],fv.setRelative(p,p,d,pv)}function MSIRP(a,state){var stack=state.stack,d=stack.pop()/64,pi=stack.pop(),p=state.z1[pi],rp0=state.z0[state.rp0],fv=state.fv,pv=state.pv;fv.setRelative(p,rp0,d,pv),fv.touch(p),exports.DEBUG&&console.log(state.step,"MSIRP["+a+"]",d,pi),state.rp1=state.rp0,state.rp2=pi,a&&(state.rp0=pi)}function MIAP(round,state){var stack=state.stack,n=stack.pop(),pi=stack.pop(),p=state.z0[pi],fv=state.fv,pv=state.pv,cv=state.cvt[n];exports.DEBUG&&console.log(state.step,"MIAP["+round+"]",n,"(",cv,")",pi);var d=pv.distance(p,HPZero);round&&(Math.abs(d-cv)<state.cvCutIn&&(d=cv),d=state.round(d)),fv.setRelative(p,HPZero,d,pv),0===state.zp0&&(p.xo=p.x,p.yo=p.y),fv.touch(p),state.rp0=state.rp1=pi}function GC(a,state){var stack=state.stack,pi=stack.pop(),p=state.z2[pi];exports.DEBUG&&console.log(state.step,"GC["+a+"]",pi),stack.push(64*state.dpv.distance(p,HPZero,a,!1))}function MD(a,state){var stack=state.stack,pi2=stack.pop(),pi1=stack.pop(),p2=state.z1[pi2],p1=state.z0[pi1],d=state.dpv.distance(p1,p2,a,a);exports.DEBUG&&console.log(state.step,"MD["+a+"]",pi2,pi1,"->",d),state.stack.push(Math.round(64*d))}function DELTAP123(b,state){var stack=state.stack,n=stack.pop(),fv=state.fv,pv=state.pv,ppem=state.ppem,base=state.deltaBase+16*(b-1),ds=state.deltaShift,z0=state.z0;exports.DEBUG&&console.log(state.step,"DELTAP["+b+"]",n,stack);for(var i=0;i<n;i++){var pi=stack.pop(),arg=stack.pop();if(base+((240&arg)>>4)===ppem){var mag=(15&arg)-8;mag>=0&&mag++,exports.DEBUG&&console.log(state.step,"DELTAPFIX",pi,"by",mag*ds);var p=z0[pi];fv.setRelative(p,p,mag*ds,pv)}}}function ROUND(dt,state){var stack=state.stack,n=stack.pop();exports.DEBUG&&console.log(state.step,"ROUND[]"),stack.push(64*state.round(n/64))}function DELTAC123(b,state){var stack=state.stack,n=stack.pop(),ppem=state.ppem,base=state.deltaBase+16*(b-1),ds=state.deltaShift;exports.DEBUG&&console.log(state.step,"DELTAC["+b+"]",n,stack);for(var i=0;i<n;i++){var c=stack.pop(),arg=stack.pop();if(base+((240&arg)>>4)===ppem){var mag=(15&arg)-8;mag>=0&&mag++;var delta=mag*ds;exports.DEBUG&&console.log(state.step,"DELTACFIX",c,"by",delta),state.cvt[c]+=delta}}}function SDPVTL(a,state){var dx,dy,stack=state.stack,p2i=stack.pop(),p1i=stack.pop(),p2=state.z2[p2i],p1=state.z1[p1i];exports.DEBUG&&console.log(state.step,"SDPVTL["+a+"]",p2i,p1i),a?(dx=p2.y-p1.y,dy=p1.x-p2.x):(dx=p1.x-p2.x,dy=p1.y-p2.y),state.dpv=getUnitVector(dx,dy)}function PUSHB(n,state){var stack=state.stack,prog=state.prog,ip=state.ip;exports.DEBUG&&console.log(state.step,"PUSHB["+n+"]");for(var i=0;i<n;i++)stack.push(prog[++ip]);state.ip=ip}function PUSHW(n,state){var ip=state.ip,prog=state.prog,stack=state.stack;exports.DEBUG&&console.log(state.ip,"PUSHW["+n+"]");for(var i=0;i<n;i++){var w=prog[++ip]<<8|prog[++ip];32768&w&&(w=-(1+(65535^w))),stack.push(w)}state.ip=ip}function MDRP_MIRP(indirect,setRp0,keepD,ro,dt,state){var od,d,sign,cv,stack=state.stack,cvte=indirect&&stack.pop(),pi=stack.pop(),rp0i=state.rp0,rp=state.z0[rp0i],p=state.z1[pi],md=state.minDis,fv=state.fv,pv=state.dpv;sign=(d=od=pv.distance(p,rp,!0,!0))>=0?1:-1,d=Math.abs(d),indirect&&(cv=state.cvt[cvte],ro&&Math.abs(d-cv)<state.cvCutIn&&(d=cv)),keepD&&d<md&&(d=md),ro&&(d=state.round(d)),fv.setRelative(p,rp,sign*d,pv),fv.touch(p),exports.DEBUG&&console.log(state.step,(indirect?"MIRP[":"MDRP[")+(setRp0?"M":"m")+(keepD?">":"_")+(ro?"R":"_")+(0===dt?"Gr":1===dt?"Bl":2===dt?"Wh":"")+"]",indirect?cvte+"("+state.cvt[cvte]+","+cv+")":"",pi,"(d =",od,"->",sign*d,")"),state.rp1=state.rp0,state.rp2=pi,setRp0&&(state.rp0=pi)}function Token(char){this.char=char,this.state={},this.activeState=null}function ContextRange(startIndex,endOffset,contextName){this.contextName=contextName,this.startIndex=startIndex,this.endOffset=endOffset}function ContextChecker(contextName,checkStart,checkEnd){this.contextName=contextName,this.openRange=null,this.ranges=[],this.checkStart=checkStart,this.checkEnd=checkEnd}function ContextParams(context,currentIndex){this.context=context,this.index=currentIndex,this.length=context.length,this.current=context[currentIndex],this.backtrack=context.slice(0,currentIndex),this.lookahead=context.slice(currentIndex+1)}function Event(eventId){this.eventId=eventId,this.subscribers=[]}function initializeCoreEvents(events){var this$1=this,coreEvents=["start","end","next","newToken","contextStart","contextEnd","insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD","updateContextsRanges"];coreEvents.forEach((function(eventId){Object.defineProperty(this$1.events,eventId,{value:new Event(eventId)})})),events&&coreEvents.forEach((function(eventId){var event=events[eventId];"function"==typeof event&&this$1.events[eventId].subscribe(event)}));["insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD"].forEach((function(eventId){this$1.events[eventId].subscribe(this$1.updateContextsRanges)}))}function Tokenizer(events){this.tokens=[],this.registeredContexts={},this.contextCheckers=[],this.events={},this.registeredModifiers=[],initializeCoreEvents.call(this,events)}function isArabicChar(c){return/[\u0600-\u065F\u066A-\u06D2\u06FA-\u06FF]/.test(c)}function isIsolatedArabicChar(char){return/[\u0630\u0690\u0621\u0631\u0661\u0671\u0622\u0632\u0672\u0692\u06C2\u0623\u0673\u0693\u06C3\u0624\u0694\u06C4\u0625\u0675\u0695\u06C5\u06E5\u0676\u0696\u06C6\u0627\u0677\u0697\u06C7\u0648\u0688\u0698\u06C8\u0689\u0699\u06C9\u068A\u06CA\u066B\u068B\u06CB\u068C\u068D\u06CD\u06FD\u068E\u06EE\u06FE\u062F\u068F\u06CF\u06EF]/.test(char)}function isTashkeelArabicChar(char){return/[\u0600-\u0605\u060C-\u060E\u0610-\u061B\u061E\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED]/.test(char)}function isLatinChar(c){return/[A-z]/.test(c)}function FeatureQuery(font){this.font=font,this.features={}}function SubstitutionAction(action){this.id=action.id,this.tag=action.tag,this.substitution=action.substitution}function lookupCoverage(glyphIndex,coverage){if(!glyphIndex)return-1;switch(coverage.format){case 1:return coverage.glyphs.indexOf(glyphIndex);case 2:for(var ranges=coverage.ranges,i=0;i<ranges.length;i++){var range=ranges[i];if(glyphIndex>=range.start&&glyphIndex<=range.end){var offset=glyphIndex-range.start;return range.index+offset}}break;default:return-1}return-1}function singleSubstitutionFormat1(glyphIndex,subtable){return-1===lookupCoverage(glyphIndex,subtable.coverage)?null:glyphIndex+subtable.deltaGlyphId}function singleSubstitutionFormat2(glyphIndex,subtable){var substituteIndex=lookupCoverage(glyphIndex,subtable.coverage);return-1===substituteIndex?null:subtable.substitute[substituteIndex]}function lookupCoverageList(coverageList,contextParams){for(var lookupList=[],i=0;i<coverageList.length;i++){var coverage=coverageList[i],glyphIndex=contextParams.current,lookupIndex=lookupCoverage(glyphIndex=Array.isArray(glyphIndex)?glyphIndex[0]:glyphIndex,coverage);-1!==lookupIndex&&lookupList.push(lookupIndex)}return lookupList.length!==coverageList.length?-1:lookupList}function chainingSubstitutionFormat3(contextParams,subtable){var lookupsCount=subtable.inputCoverage.length+subtable.lookaheadCoverage.length+subtable.backtrackCoverage.length;if(contextParams.context.length<lookupsCount)return[];var inputLookups=lookupCoverageList(subtable.inputCoverage,contextParams);if(-1===inputLookups)return[];var lookaheadOffset=subtable.inputCoverage.length-1;if(contextParams.lookahead.length<subtable.lookaheadCoverage.length)return[];for(var lookaheadContext=contextParams.lookahead.slice(lookaheadOffset);lookaheadContext.length&&isTashkeelArabicChar(lookaheadContext[0].char);)lookaheadContext.shift();var lookaheadParams=new ContextParams(lookaheadContext,0),lookaheadLookups=lookupCoverageList(subtable.lookaheadCoverage,lookaheadParams),backtrackContext=[].concat(contextParams.backtrack);for(backtrackContext.reverse();backtrackContext.length&&isTashkeelArabicChar(backtrackContext[0].char);)backtrackContext.shift();if(backtrackContext.length<subtable.backtrackCoverage.length)return[];var backtrackParams=new ContextParams(backtrackContext,0),backtrackLookups=lookupCoverageList(subtable.backtrackCoverage,backtrackParams),substitutions=[];if(inputLookups.length===subtable.inputCoverage.length&&lookaheadLookups.length===subtable.lookaheadCoverage.length&&backtrackLookups.length===subtable.backtrackCoverage.length)for(var i=0;i<subtable.lookupRecords.length;i++)for(var lookupListIndex=subtable.lookupRecords[i].lookupListIndex,lookupTable=this.getLookupByIndex(lookupListIndex),s=0;s<lookupTable.subtables.length;s++){var subtable$1=lookupTable.subtables[s],lookup=this.getLookupMethod(lookupTable,subtable$1);if("12"===this.getSubstitutionType(lookupTable,subtable$1))for(var n=0;n<inputLookups.length;n++){var substitution=lookup(contextParams.get(n));substitution&&substitutions.push(substitution)}}return substitutions}function ligatureSubstitutionFormat1(contextParams,subtable){var ligature,ligSetIndex=lookupCoverage(contextParams.current,subtable.coverage);if(-1===ligSetIndex)return null;for(var ligatureSet=subtable.ligatureSets[ligSetIndex],s=0;s<ligatureSet.length;s++){ligature=ligatureSet[s];for(var l=0;l<ligature.components.length;l++){if(contextParams.lookahead[l]!==ligature.components[l])break;if(l===ligature.components.length-1)return ligature}}return null}function decompositionSubstitutionFormat1(glyphIndex,subtable){var substituteIndex=lookupCoverage(glyphIndex,subtable.coverage);return-1===substituteIndex?null:subtable.sequences[substituteIndex]}Hinting.prototype.exec=function(glyph,ppem){if("number"!=typeof ppem)throw new Error("Point size is not a number!");if(!(this._errorState>2)){var font=this.font,prepState=this._prepState;if(!prepState||prepState.ppem!==ppem){var fpgmState=this._fpgmState;if(!fpgmState){State.prototype=defaultState,(fpgmState=this._fpgmState=new State("fpgm",font.tables.fpgm)).funcs=[],fpgmState.font=font,exports.DEBUG&&(console.log("---EXEC FPGM---"),fpgmState.step=-1);try{exec(fpgmState)}catch(e){return console.log("Hinting error in FPGM:"+e),void(this._errorState=3)}}State.prototype=fpgmState,(prepState=this._prepState=new State("prep",font.tables.prep)).ppem=ppem;var oCvt=font.tables.cvt;if(oCvt)for(var cvt=prepState.cvt=new Array(oCvt.length),scale=ppem/font.unitsPerEm,c=0;c<oCvt.length;c++)cvt[c]=oCvt[c]*scale;else prepState.cvt=[];exports.DEBUG&&(console.log("---EXEC PREP---"),prepState.step=-1);try{exec(prepState)}catch(e){this._errorState<2&&console.log("Hinting error in PREP:"+e),this._errorState=2}}if(!(this._errorState>1))try{return execGlyph(glyph,prepState)}catch(e){return this._errorState<1&&(console.log("Hinting error:"+e),console.log("Note: further hinting errors are silenced")),void(this._errorState=1)}}},execGlyph=function(glyph,prepState){var contours,gZone,state,xScale=prepState.ppem/prepState.font.unitsPerEm,yScale=xScale,components=glyph.components;if(State.prototype=prepState,components){var font=prepState.font;gZone=[],contours=[];for(var i=0;i<components.length;i++){var c=components[i],cg=font.glyphs.get(c.glyphIndex);state=new State("glyf",cg.instructions),exports.DEBUG&&(console.log("---EXEC COMP "+i+"---"),state.step=-1),execComponent(cg,state,xScale,yScale);for(var dx=Math.round(c.dx*xScale),dy=Math.round(c.dy*yScale),gz=state.gZone,cc=state.contours,pi=0;pi<gz.length;pi++){var p=gz[pi];p.xTouched=p.yTouched=!1,p.xo=p.x=p.x+dx,p.yo=p.y=p.y+dy}var gLen=gZone.length;gZone.push.apply(gZone,gz);for(var j=0;j<cc.length;j++)contours.push(cc[j]+gLen)}glyph.instructions&&!state.inhibitGridFit&&((state=new State("glyf",glyph.instructions)).gZone=state.z0=state.z1=state.z2=gZone,state.contours=contours,gZone.push(new HPoint(0,0),new HPoint(Math.round(glyph.advanceWidth*xScale),0)),exports.DEBUG&&(console.log("---EXEC COMPOSITE---"),state.step=-1),exec(state),gZone.length-=2)}else state=new State("glyf",glyph.instructions),exports.DEBUG&&(console.log("---EXEC GLYPH---"),state.step=-1),execComponent(glyph,state,xScale,yScale),gZone=state.gZone;return gZone},execComponent=function(glyph,state,xScale,yScale){for(var cp,sp,np,points=glyph.points||[],pLen=points.length,gZone=state.gZone=state.z0=state.z1=state.z2=[],contours=state.contours=[],i=0;i<pLen;i++)cp=points[i],gZone[i]=new HPoint(cp.x*xScale,cp.y*yScale,cp.lastPointOfContour,cp.onCurve);for(var i$1=0;i$1<pLen;i$1++)cp=gZone[i$1],sp||(sp=cp,contours.push(i$1)),cp.lastPointOfContour?(cp.nextPointOnContour=sp,sp.prevPointOnContour=cp,sp=void 0):(np=gZone[i$1+1],cp.nextPointOnContour=np,np.prevPointOnContour=cp);if(!state.inhibitGridFit){if(exports.DEBUG){console.log("PROCESSING GLYPH",state.stack);for(var i$2=0;i$2<pLen;i$2++)console.log(i$2,gZone[i$2].x,gZone[i$2].y)}if(gZone.push(new HPoint(0,0),new HPoint(Math.round(glyph.advanceWidth*xScale),0)),exec(state),gZone.length-=2,exports.DEBUG){console.log("FINISHED GLYPH",state.stack);for(var i$3=0;i$3<pLen;i$3++)console.log(i$3,gZone[i$3].x,gZone[i$3].y)}}},exec=function(state){var prog=state.prog;if(prog){var ins,pLen=prog.length;for(state.ip=0;state.ip<pLen;state.ip++){if(exports.DEBUG&&state.step++,!(ins=instructionTable[prog[state.ip]]))throw new Error("unknown instruction: 0x"+Number(prog[state.ip]).toString(16));ins(state)}}},instructionTable=[SVTCA.bind(void 0,yUnitVector),SVTCA.bind(void 0,xUnitVector),SPVTCA.bind(void 0,yUnitVector),SPVTCA.bind(void 0,xUnitVector),SFVTCA.bind(void 0,yUnitVector),SFVTCA.bind(void 0,xUnitVector),SPVTL.bind(void 0,0),SPVTL.bind(void 0,1),SFVTL.bind(void 0,0),SFVTL.bind(void 0,1),function(state){var stack=state.stack,y=stack.pop(),x=stack.pop();exports.DEBUG&&console.log(state.step,"SPVFS[]",y,x),state.pv=state.dpv=getUnitVector(x,y)},function(state){var stack=state.stack,y=stack.pop(),x=stack.pop();exports.DEBUG&&console.log(state.step,"SPVFS[]",y,x),state.fv=getUnitVector(x,y)},function(state){var stack=state.stack,pv=state.pv;exports.DEBUG&&console.log(state.step,"GPV[]"),stack.push(16384*pv.x),stack.push(16384*pv.y)},function(state){var stack=state.stack,fv=state.fv;exports.DEBUG&&console.log(state.step,"GFV[]"),stack.push(16384*fv.x),stack.push(16384*fv.y)},function(state){state.fv=state.pv,exports.DEBUG&&console.log(state.step,"SFVTPV[]")},function(state){var stack=state.stack,pa0i=stack.pop(),pa1i=stack.pop(),pb0i=stack.pop(),pb1i=stack.pop(),pi=stack.pop(),z0=state.z0,z1=state.z1,pa0=z0[pa0i],pa1=z0[pa1i],pb0=z1[pb0i],pb1=z1[pb1i],p=state.z2[pi];exports.DEBUG&&console.log("ISECT[], ",pa0i,pa1i,pb0i,pb1i,pi);var x1=pa0.x,y1=pa0.y,x2=pa1.x,y2=pa1.y,x3=pb0.x,y3=pb0.y,x4=pb1.x,y4=pb1.y,div=(x1-x2)*(y3-y4)-(y1-y2)*(x3-x4),f1=x1*y2-y1*x2,f2=x3*y4-y3*x4;p.x=(f1*(x3-x4)-f2*(x1-x2))/div,p.y=(f1*(y3-y4)-f2*(y1-y2))/div},function(state){state.rp0=state.stack.pop(),exports.DEBUG&&console.log(state.step,"SRP0[]",state.rp0)},function(state){state.rp1=state.stack.pop(),exports.DEBUG&&console.log(state.step,"SRP1[]",state.rp1)},function(state){state.rp2=state.stack.pop(),exports.DEBUG&&console.log(state.step,"SRP2[]",state.rp2)},function(state){var n=state.stack.pop();switch(exports.DEBUG&&console.log(state.step,"SZP0[]",n),state.zp0=n,n){case 0:state.tZone||initTZone(state),state.z0=state.tZone;break;case 1:state.z0=state.gZone;break;default:throw new Error("Invalid zone pointer")}},function(state){var n=state.stack.pop();switch(exports.DEBUG&&console.log(state.step,"SZP1[]",n),state.zp1=n,n){case 0:state.tZone||initTZone(state),state.z1=state.tZone;break;case 1:state.z1=state.gZone;break;default:throw new Error("Invalid zone pointer")}},function(state){var n=state.stack.pop();switch(exports.DEBUG&&console.log(state.step,"SZP2[]",n),state.zp2=n,n){case 0:state.tZone||initTZone(state),state.z2=state.tZone;break;case 1:state.z2=state.gZone;break;default:throw new Error("Invalid zone pointer")}},function(state){var n=state.stack.pop();switch(exports.DEBUG&&console.log(state.step,"SZPS[]",n),state.zp0=state.zp1=state.zp2=n,n){case 0:state.tZone||initTZone(state),state.z0=state.z1=state.z2=state.tZone;break;case 1:state.z0=state.z1=state.z2=state.gZone;break;default:throw new Error("Invalid zone pointer")}},function(state){state.loop=state.stack.pop(),exports.DEBUG&&console.log(state.step,"SLOOP[]",state.loop)},function(state){exports.DEBUG&&console.log(state.step,"RTG[]"),state.round=roundToGrid},function(state){exports.DEBUG&&console.log(state.step,"RTHG[]"),state.round=roundToHalfGrid},function(state){var d=state.stack.pop();exports.DEBUG&&console.log(state.step,"SMD[]",d),state.minDis=d/64},function(state){exports.DEBUG&&console.log(state.step,"ELSE[]"),skip(state,!1)},function(state){var o=state.stack.pop();exports.DEBUG&&console.log(state.step,"JMPR[]",o),state.ip+=o-1},function(state){var n=state.stack.pop();exports.DEBUG&&console.log(state.step,"SCVTCI[]",n),state.cvCutIn=n/64},void 0,void 0,function(state){var stack=state.stack;exports.DEBUG&&console.log(state.step,"DUP[]"),stack.push(stack[stack.length-1])},POP,function(state){exports.DEBUG&&console.log(state.step,"CLEAR[]"),state.stack.length=0},function(state){var stack=state.stack,a=stack.pop(),b=stack.pop();exports.DEBUG&&console.log(state.step,"SWAP[]"),stack.push(a),stack.push(b)},function(state){var stack=state.stack;exports.DEBUG&&console.log(state.step,"DEPTH[]"),stack.push(stack.length)},function(state){var stack=state.stack,k=stack.pop();exports.DEBUG&&console.log(state.step,"CINDEX[]",k),stack.push(stack[stack.length-k])},function(state){var stack=state.stack,k=stack.pop();exports.DEBUG&&console.log(state.step,"MINDEX[]",k),stack.push(stack.splice(stack.length-k,1)[0])},void 0,void 0,void 0,function(state){var stack=state.stack,fn=stack.pop(),c=stack.pop();exports.DEBUG&&console.log(state.step,"LOOPCALL[]",fn,c);var cip=state.ip,cprog=state.prog;state.prog=state.funcs[fn];for(var i=0;i<c;i++)exec(state),exports.DEBUG&&console.log(++state.step,i+1<c?"next loopcall":"done loopcall",i);state.ip=cip,state.prog=cprog},function(state){var fn=state.stack.pop();exports.DEBUG&&console.log(state.step,"CALL[]",fn);var cip=state.ip,cprog=state.prog;state.prog=state.funcs[fn],exec(state),state.ip=cip,state.prog=cprog,exports.DEBUG&&console.log(++state.step,"returning from",fn)},function(state){if("fpgm"!==state.env)throw new Error("FDEF not allowed here");var stack=state.stack,prog=state.prog,ip=state.ip,fn=stack.pop(),ipBegin=ip;for(exports.DEBUG&&console.log(state.step,"FDEF[]",fn);45!==prog[++ip];);state.ip=ip,state.funcs[fn]=prog.slice(ipBegin+1,ip)},void 0,MDAP.bind(void 0,0),MDAP.bind(void 0,1),IUP.bind(void 0,yUnitVector),IUP.bind(void 0,xUnitVector),SHP.bind(void 0,0),SHP.bind(void 0,1),SHC.bind(void 0,0),SHC.bind(void 0,1),SHZ.bind(void 0,0),SHZ.bind(void 0,1),function(state){for(var stack=state.stack,loop=state.loop,fv=state.fv,d=stack.pop()/64,z2=state.z2;loop--;){var pi=stack.pop(),p=z2[pi];exports.DEBUG&&console.log(state.step,(state.loop>1?"loop "+(state.loop-loop)+": ":"")+"SHPIX[]",pi,d),fv.setRelative(p,p,d),fv.touch(p)}state.loop=1},function(state){for(var stack=state.stack,rp1i=state.rp1,rp2i=state.rp2,loop=state.loop,rp1=state.z0[rp1i],rp2=state.z1[rp2i],fv=state.fv,pv=state.dpv,z2=state.z2;loop--;){var pi=stack.pop(),p=z2[pi];exports.DEBUG&&console.log(state.step,(state.loop>1?"loop "+(state.loop-loop)+": ":"")+"IP[]",pi,rp1i,"<->",rp2i),fv.interpolate(p,rp1,rp2,pv),fv.touch(p)}state.loop=1},MSIRP.bind(void 0,0),MSIRP.bind(void 0,1),function(state){for(var stack=state.stack,rp0i=state.rp0,rp0=state.z0[rp0i],loop=state.loop,fv=state.fv,pv=state.pv,z1=state.z1;loop--;){var pi=stack.pop(),p=z1[pi];exports.DEBUG&&console.log(state.step,(state.loop>1?"loop "+(state.loop-loop)+": ":"")+"ALIGNRP[]",pi),fv.setRelative(p,rp0,0,pv),fv.touch(p)}state.loop=1},function(state){exports.DEBUG&&console.log(state.step,"RTDG[]"),state.round=roundToDoubleGrid},MIAP.bind(void 0,0),MIAP.bind(void 0,1),function(state){var prog=state.prog,ip=state.ip,stack=state.stack,n=prog[++ip];exports.DEBUG&&console.log(state.step,"NPUSHB[]",n);for(var i=0;i<n;i++)stack.push(prog[++ip]);state.ip=ip},function(state){var ip=state.ip,prog=state.prog,stack=state.stack,n=prog[++ip];exports.DEBUG&&console.log(state.step,"NPUSHW[]",n);for(var i=0;i<n;i++){var w=prog[++ip]<<8|prog[++ip];32768&w&&(w=-(1+(65535^w))),stack.push(w)}state.ip=ip},function(state){var stack=state.stack,store=state.store;store||(store=state.store=[]);var v=stack.pop(),l=stack.pop();exports.DEBUG&&console.log(state.step,"WS",v,l),store[l]=v},function(state){var stack=state.stack,store=state.store,l=stack.pop();exports.DEBUG&&console.log(state.step,"RS",l);var v=store&&store[l]||0;stack.push(v)},function(state){var stack=state.stack,v=stack.pop(),l=stack.pop();exports.DEBUG&&console.log(state.step,"WCVTP",v,l),state.cvt[l]=v/64},function(state){var stack=state.stack,cvte=stack.pop();exports.DEBUG&&console.log(state.step,"RCVT",cvte),stack.push(64*state.cvt[cvte])},GC.bind(void 0,0),GC.bind(void 0,1),void 0,MD.bind(void 0,0),MD.bind(void 0,1),function(state){exports.DEBUG&&console.log(state.step,"MPPEM[]"),state.stack.push(state.ppem)},void 0,function(state){exports.DEBUG&&console.log(state.step,"FLIPON[]"),state.autoFlip=!0},void 0,void 0,function(state){var stack=state.stack,e2=stack.pop(),e1=stack.pop();exports.DEBUG&&console.log(state.step,"LT[]",e2,e1),stack.push(e1<e2?1:0)},function(state){var stack=state.stack,e2=stack.pop(),e1=stack.pop();exports.DEBUG&&console.log(state.step,"LTEQ[]",e2,e1),stack.push(e1<=e2?1:0)},function(state){var stack=state.stack,e2=stack.pop(),e1=stack.pop();exports.DEBUG&&console.log(state.step,"GT[]",e2,e1),stack.push(e1>e2?1:0)},function(state){var stack=state.stack,e2=stack.pop(),e1=stack.pop();exports.DEBUG&&console.log(state.step,"GTEQ[]",e2,e1),stack.push(e1>=e2?1:0)},function(state){var stack=state.stack,e2=stack.pop(),e1=stack.pop();exports.DEBUG&&console.log(state.step,"EQ[]",e2,e1),stack.push(e2===e1?1:0)},function(state){var stack=state.stack,e2=stack.pop(),e1=stack.pop();exports.DEBUG&&console.log(state.step,"NEQ[]",e2,e1),stack.push(e2!==e1?1:0)},function(state){var stack=state.stack,n=stack.pop();exports.DEBUG&&console.log(state.step,"ODD[]",n),stack.push(Math.trunc(n)%2?1:0)},function(state){var stack=state.stack,n=stack.pop();exports.DEBUG&&console.log(state.step,"EVEN[]",n),stack.push(Math.trunc(n)%2?0:1)},function(state){var test=state.stack.pop();exports.DEBUG&&console.log(state.step,"IF[]",test),test||(skip(state,!0),exports.DEBUG&&console.log(state.step,"EIF[]"))},function(state){exports.DEBUG&&console.log(state.step,"EIF[]")},function(state){var stack=state.stack,e2=stack.pop(),e1=stack.pop();exports.DEBUG&&console.log(state.step,"AND[]",e2,e1),stack.push(e2&&e1?1:0)},function(state){var stack=state.stack,e2=stack.pop(),e1=stack.pop();exports.DEBUG&&console.log(state.step,"OR[]",e2,e1),stack.push(e2||e1?1:0)},function(state){var stack=state.stack,e=stack.pop();exports.DEBUG&&console.log(state.step,"NOT[]",e),stack.push(e?0:1)},DELTAP123.bind(void 0,1),function(state){var n=state.stack.pop();exports.DEBUG&&console.log(state.step,"SDB[]",n),state.deltaBase=n},function(state){var n=state.stack.pop();exports.DEBUG&&console.log(state.step,"SDS[]",n),state.deltaShift=Math.pow(.5,n)},function(state){var stack=state.stack,n2=stack.pop(),n1=stack.pop();exports.DEBUG&&console.log(state.step,"ADD[]",n2,n1),stack.push(n1+n2)},function(state){var stack=state.stack,n2=stack.pop(),n1=stack.pop();exports.DEBUG&&console.log(state.step,"SUB[]",n2,n1),stack.push(n1-n2)},function(state){var stack=state.stack,n2=stack.pop(),n1=stack.pop();exports.DEBUG&&console.log(state.step,"DIV[]",n2,n1),stack.push(64*n1/n2)},function(state){var stack=state.stack,n2=stack.pop(),n1=stack.pop();exports.DEBUG&&console.log(state.step,"MUL[]",n2,n1),stack.push(n1*n2/64)},function(state){var stack=state.stack,n=stack.pop();exports.DEBUG&&console.log(state.step,"ABS[]",n),stack.push(Math.abs(n))},function(state){var stack=state.stack,n=stack.pop();exports.DEBUG&&console.log(state.step,"NEG[]",n),stack.push(-n)},function(state){var stack=state.stack,n=stack.pop();exports.DEBUG&&console.log(state.step,"FLOOR[]",n),stack.push(64*Math.floor(n/64))},function(state){var stack=state.stack,n=stack.pop();exports.DEBUG&&console.log(state.step,"CEILING[]",n),stack.push(64*Math.ceil(n/64))},ROUND.bind(void 0,0),ROUND.bind(void 0,1),ROUND.bind(void 0,2),ROUND.bind(void 0,3),void 0,void 0,void 0,void 0,function(state){var stack=state.stack,v=stack.pop(),l=stack.pop();exports.DEBUG&&console.log(state.step,"WCVTF[]",v,l),state.cvt[l]=v*state.ppem/state.font.unitsPerEm},DELTAP123.bind(void 0,2),DELTAP123.bind(void 0,3),DELTAC123.bind(void 0,1),DELTAC123.bind(void 0,2),DELTAC123.bind(void 0,3),function(state){var period,n=state.stack.pop();switch(exports.DEBUG&&console.log(state.step,"SROUND[]",n),state.round=roundSuper,192&n){case 0:period=.5;break;case 64:period=1;break;case 128:period=2;break;default:throw new Error("invalid SROUND value")}switch(state.srPeriod=period,48&n){case 0:state.srPhase=0;break;case 16:state.srPhase=.25*period;break;case 32:state.srPhase=.5*period;break;case 48:state.srPhase=.75*period;break;default:throw new Error("invalid SROUND value")}n&=15,state.srThreshold=0===n?0:(n/8-.5)*period},function(state){var period,n=state.stack.pop();switch(exports.DEBUG&&console.log(state.step,"S45ROUND[]",n),state.round=roundSuper,192&n){case 0:period=Math.sqrt(2)/2;break;case 64:period=Math.sqrt(2);break;case 128:period=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(state.srPeriod=period,48&n){case 0:state.srPhase=0;break;case 16:state.srPhase=.25*period;break;case 32:state.srPhase=.5*period;break;case 48:state.srPhase=.75*period;break;default:throw new Error("invalid S45ROUND value")}n&=15,state.srThreshold=0===n?0:(n/8-.5)*period},void 0,void 0,function(state){exports.DEBUG&&console.log(state.step,"ROFF[]"),state.round=roundOff},void 0,function(state){exports.DEBUG&&console.log(state.step,"RUTG[]"),state.round=roundUpToGrid},function(state){exports.DEBUG&&console.log(state.step,"RDTG[]"),state.round=roundDownToGrid},POP,POP,void 0,void 0,void 0,void 0,void 0,function(state){var n=state.stack.pop();exports.DEBUG&&console.log(state.step,"SCANCTRL[]",n)},SDPVTL.bind(void 0,0),SDPVTL.bind(void 0,1),function(state){var stack=state.stack,sel=stack.pop(),r=0;exports.DEBUG&&console.log(state.step,"GETINFO[]",sel),1&sel&&(r=35),32&sel&&(r|=4096),stack.push(r)},void 0,function(state){var stack=state.stack,a=stack.pop(),b=stack.pop(),c=stack.pop();exports.DEBUG&&console.log(state.step,"ROLL[]"),stack.push(b),stack.push(a),stack.push(c)},function(state){var stack=state.stack,e2=stack.pop(),e1=stack.pop();exports.DEBUG&&console.log(state.step,"MAX[]",e2,e1),stack.push(Math.max(e1,e2))},function(state){var stack=state.stack,e2=stack.pop(),e1=stack.pop();exports.DEBUG&&console.log(state.step,"MIN[]",e2,e1),stack.push(Math.min(e1,e2))},function(state){var n=state.stack.pop();exports.DEBUG&&console.log(state.step,"SCANTYPE[]",n)},function(state){var s=state.stack.pop(),v=state.stack.pop();switch(exports.DEBUG&&console.log(state.step,"INSTCTRL[]",s,v),s){case 1:return void(state.inhibitGridFit=!!v);case 2:return void(state.ignoreCvt=!!v);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,PUSHB.bind(void 0,1),PUSHB.bind(void 0,2),PUSHB.bind(void 0,3),PUSHB.bind(void 0,4),PUSHB.bind(void 0,5),PUSHB.bind(void 0,6),PUSHB.bind(void 0,7),PUSHB.bind(void 0,8),PUSHW.bind(void 0,1),PUSHW.bind(void 0,2),PUSHW.bind(void 0,3),PUSHW.bind(void 0,4),PUSHW.bind(void 0,5),PUSHW.bind(void 0,6),PUSHW.bind(void 0,7),PUSHW.bind(void 0,8),MDRP_MIRP.bind(void 0,0,0,0,0,0),MDRP_MIRP.bind(void 0,0,0,0,0,1),MDRP_MIRP.bind(void 0,0,0,0,0,2),MDRP_MIRP.bind(void 0,0,0,0,0,3),MDRP_MIRP.bind(void 0,0,0,0,1,0),MDRP_MIRP.bind(void 0,0,0,0,1,1),MDRP_MIRP.bind(void 0,0,0,0,1,2),MDRP_MIRP.bind(void 0,0,0,0,1,3),MDRP_MIRP.bind(void 0,0,0,1,0,0),MDRP_MIRP.bind(void 0,0,0,1,0,1),MDRP_MIRP.bind(void 0,0,0,1,0,2),MDRP_MIRP.bind(void 0,0,0,1,0,3),MDRP_MIRP.bind(void 0,0,0,1,1,0),MDRP_MIRP.bind(void 0,0,0,1,1,1),MDRP_MIRP.bind(void 0,0,0,1,1,2),MDRP_MIRP.bind(void 0,0,0,1,1,3),MDRP_MIRP.bind(void 0,0,1,0,0,0),MDRP_MIRP.bind(void 0,0,1,0,0,1),MDRP_MIRP.bind(void 0,0,1,0,0,2),MDRP_MIRP.bind(void 0,0,1,0,0,3),MDRP_MIRP.bind(void 0,0,1,0,1,0),MDRP_MIRP.bind(void 0,0,1,0,1,1),MDRP_MIRP.bind(void 0,0,1,0,1,2),MDRP_MIRP.bind(void 0,0,1,0,1,3),MDRP_MIRP.bind(void 0,0,1,1,0,0),MDRP_MIRP.bind(void 0,0,1,1,0,1),MDRP_MIRP.bind(void 0,0,1,1,0,2),MDRP_MIRP.bind(void 0,0,1,1,0,3),MDRP_MIRP.bind(void 0,0,1,1,1,0),MDRP_MIRP.bind(void 0,0,1,1,1,1),MDRP_MIRP.bind(void 0,0,1,1,1,2),MDRP_MIRP.bind(void 0,0,1,1,1,3),MDRP_MIRP.bind(void 0,1,0,0,0,0),MDRP_MIRP.bind(void 0,1,0,0,0,1),MDRP_MIRP.bind(void 0,1,0,0,0,2),MDRP_MIRP.bind(void 0,1,0,0,0,3),MDRP_MIRP.bind(void 0,1,0,0,1,0),MDRP_MIRP.bind(void 0,1,0,0,1,1),MDRP_MIRP.bind(void 0,1,0,0,1,2),MDRP_MIRP.bind(void 0,1,0,0,1,3),MDRP_MIRP.bind(void 0,1,0,1,0,0),MDRP_MIRP.bind(void 0,1,0,1,0,1),MDRP_MIRP.bind(void 0,1,0,1,0,2),MDRP_MIRP.bind(void 0,1,0,1,0,3),MDRP_MIRP.bind(void 0,1,0,1,1,0),MDRP_MIRP.bind(void 0,1,0,1,1,1),MDRP_MIRP.bind(void 0,1,0,1,1,2),MDRP_MIRP.bind(void 0,1,0,1,1,3),MDRP_MIRP.bind(void 0,1,1,0,0,0),MDRP_MIRP.bind(void 0,1,1,0,0,1),MDRP_MIRP.bind(void 0,1,1,0,0,2),MDRP_MIRP.bind(void 0,1,1,0,0,3),MDRP_MIRP.bind(void 0,1,1,0,1,0),MDRP_MIRP.bind(void 0,1,1,0,1,1),MDRP_MIRP.bind(void 0,1,1,0,1,2),MDRP_MIRP.bind(void 0,1,1,0,1,3),MDRP_MIRP.bind(void 0,1,1,1,0,0),MDRP_MIRP.bind(void 0,1,1,1,0,1),MDRP_MIRP.bind(void 0,1,1,1,0,2),MDRP_MIRP.bind(void 0,1,1,1,0,3),MDRP_MIRP.bind(void 0,1,1,1,1,0),MDRP_MIRP.bind(void 0,1,1,1,1,1),MDRP_MIRP.bind(void 0,1,1,1,1,2),MDRP_MIRP.bind(void 0,1,1,1,1,3)],Token.prototype.setState=function(key,value){return this.state[key]=value,this.activeState={key:key,value:this.state[key]},this.activeState},Token.prototype.getState=function(stateId){return this.state[stateId]||null},Tokenizer.prototype.inboundIndex=function(index){return index>=0&&index<this.tokens.length},Tokenizer.prototype.composeRUD=function(RUDs){var this$1=this,state=RUDs.map((function(RUD){return this$1[RUD[0]].apply(this$1,RUD.slice(1).concat(true))})),hasFAILObject=function(obj){return"object"==typeof obj&&obj.hasOwnProperty("FAIL")};if(state.every(hasFAILObject))return{FAIL:"composeRUD: one or more operations hasn't completed successfully",report:state.filter(hasFAILObject)};this.dispatch("composeRUD",[state.filter((function(op){return!hasFAILObject(op)}))])},Tokenizer.prototype.replaceRange=function(startIndex,offset,tokens,silent){offset=null!==offset?offset:this.tokens.length;var isTokenType=tokens.every((function(token){return token instanceof Token}));if(!isNaN(startIndex)&&this.inboundIndex(startIndex)&&isTokenType){var replaced=this.tokens.splice.apply(this.tokens,[startIndex,offset].concat(tokens));return silent||this.dispatch("replaceToken",[startIndex,offset,tokens]),[replaced,tokens]}return{FAIL:"replaceRange: invalid tokens or startIndex."}},Tokenizer.prototype.replaceToken=function(index,token,silent){if(!isNaN(index)&&this.inboundIndex(index)&&token instanceof Token){var replaced=this.tokens.splice(index,1,token);return silent||this.dispatch("replaceToken",[index,token]),[replaced[0],token]}return{FAIL:"replaceToken: invalid token or index."}},Tokenizer.prototype.removeRange=function(startIndex,offset,silent){offset=isNaN(offset)?this.tokens.length:offset;var tokens=this.tokens.splice(startIndex,offset);return silent||this.dispatch("removeRange",[tokens,startIndex,offset]),tokens},Tokenizer.prototype.removeToken=function(index,silent){if(!isNaN(index)&&this.inboundIndex(index)){var token=this.tokens.splice(index,1);return silent||this.dispatch("removeToken",[token,index]),token}return{FAIL:"removeToken: invalid token index."}},Tokenizer.prototype.insertToken=function(tokens,index,silent){return tokens.every((function(token){return token instanceof Token}))?(this.tokens.splice.apply(this.tokens,[index,0].concat(tokens)),silent||this.dispatch("insertToken",[tokens,index]),tokens):{FAIL:"insertToken: invalid token(s)."}},Tokenizer.prototype.registerModifier=function(modifierId,condition,modifier){this.events.newToken.subscribe((function(token,contextParams){var conditionParams=[token,contextParams],modifierParams=[token,contextParams];if(null===condition||!0===condition.apply(this,conditionParams)){var newStateValue=modifier.apply(this,modifierParams);token.setState(modifierId,newStateValue)}})),this.registeredModifiers.push(modifierId)},Event.prototype.subscribe=function(eventHandler){return"function"==typeof eventHandler?this.subscribers.push(eventHandler)-1:{FAIL:"invalid '"+this.eventId+"' event handler"}},Event.prototype.unsubscribe=function(subsId){this.subscribers.splice(subsId,1)},ContextParams.prototype.setCurrentIndex=function(index){this.index=index,this.current=this.context[index],this.backtrack=this.context.slice(0,index),this.lookahead=this.context.slice(index+1)},ContextParams.prototype.get=function(offset){switch(!0){case 0===offset:return this.current;case offset<0&&Math.abs(offset)<=this.backtrack.length:return this.backtrack.slice(offset)[0];case offset>0&&offset<=this.lookahead.length:return this.lookahead[offset-1];default:return null}},Tokenizer.prototype.rangeToText=function(range){if(range instanceof ContextRange)return this.getRangeTokens(range).map((function(token){return token.char})).join("")},Tokenizer.prototype.getText=function(){return this.tokens.map((function(token){return token.char})).join("")},Tokenizer.prototype.getContext=function(contextName){var context=this.registeredContexts[contextName];return context||null},Tokenizer.prototype.on=function(eventName,eventHandler){var event=this.events[eventName];return event?event.subscribe(eventHandler):null},Tokenizer.prototype.dispatch=function(eventName,args){var this$1=this,event=this.events[eventName];event instanceof Event&&event.subscribers.forEach((function(subscriber){subscriber.apply(this$1,args||[])}))},Tokenizer.prototype.registerContextChecker=function(contextName,contextStartCheck,contextEndCheck){if(this.getContext(contextName))return{FAIL:"context name '"+contextName+"' is already registered."};if("function"!=typeof contextStartCheck)return{FAIL:"missing context start check."};if("function"!=typeof contextEndCheck)return{FAIL:"missing context end check."};var contextCheckers=new ContextChecker(contextName,contextStartCheck,contextEndCheck);return this.registeredContexts[contextName]=contextCheckers,this.contextCheckers.push(contextCheckers),contextCheckers},Tokenizer.prototype.getRangeTokens=function(range){var endIndex=range.startIndex+range.endOffset;return[].concat(this.tokens.slice(range.startIndex,endIndex))},Tokenizer.prototype.getContextRanges=function(contextName){var context=this.getContext(contextName);return context?context.ranges:{FAIL:"context checker '"+contextName+"' is not registered."}},Tokenizer.prototype.resetContextsRanges=function(){var registeredContexts=this.registeredContexts;for(var contextName in registeredContexts){if(registeredContexts.hasOwnProperty(contextName))registeredContexts[contextName].ranges=[]}},Tokenizer.prototype.updateContextsRanges=function(){this.resetContextsRanges();for(var chars=this.tokens.map((function(token){return token.char})),i=0;i<chars.length;i++){var contextParams=new ContextParams(chars,i);this.runContextCheck(contextParams)}this.dispatch("updateContextsRanges",[this.registeredContexts])},Tokenizer.prototype.setEndOffset=function(offset,contextName){var range=new ContextRange(this.getContext(contextName).openRange.startIndex,offset,contextName),ranges=this.getContext(contextName).ranges;return range.rangeId=contextName+"."+ranges.length,ranges.push(range),this.getContext(contextName).openRange=null,range},Tokenizer.prototype.runContextCheck=function(contextParams){var this$1=this,index=contextParams.index;this.contextCheckers.forEach((function(contextChecker){var contextName=contextChecker.contextName,openRange=this$1.getContext(contextName).openRange;if(!openRange&&contextChecker.checkStart(contextParams)&&(openRange=new ContextRange(index,null,contextName),this$1.getContext(contextName).openRange=openRange,this$1.dispatch("contextStart",[contextName,index])),openRange&&contextChecker.checkEnd(contextParams)){var offset=index-openRange.startIndex+1,range=this$1.setEndOffset(offset,contextName);this$1.dispatch("contextEnd",[contextName,range])}}))},Tokenizer.prototype.tokenize=function(text){this.tokens=[],this.resetContextsRanges();var chars=Array.from(text);this.dispatch("start");for(var i=0;i<chars.length;i++){var char=chars[i],contextParams=new ContextParams(chars,i);this.dispatch("next",[contextParams]),this.runContextCheck(contextParams);var token=new Token(char);this.tokens.push(token),this.dispatch("newToken",[token,contextParams])}return this.dispatch("end",[this.tokens]),this.tokens},FeatureQuery.prototype.getDefaultScriptFeaturesIndexes=function(){for(var scripts=this.font.tables.gsub.scripts,s=0;s<scripts.length;s++){var script=scripts[s];if("DFLT"===script.tag)return script.script.defaultLangSys.featureIndexes}return[]},FeatureQuery.prototype.getScriptFeaturesIndexes=function(scriptTag){if(!this.font.tables.gsub)return[];if(!scriptTag)return this.getDefaultScriptFeaturesIndexes();for(var scripts=this.font.tables.gsub.scripts,i=0;i<scripts.length;i++){var script=scripts[i];if(script.tag===scriptTag&&script.script.defaultLangSys)return script.script.defaultLangSys.featureIndexes;var langSysRecords=script.langSysRecords;if(langSysRecords)for(var j=0;j<langSysRecords.length;j++){var langSysRecord=langSysRecords[j];if(langSysRecord.tag===scriptTag)return langSysRecord.langSys.featureIndexes}}return this.getDefaultScriptFeaturesIndexes()},FeatureQuery.prototype.mapTagsToFeatures=function(features,scriptTag){for(var tags={},i=0;i<features.length;i++){var tag=features[i].tag,feature=features[i].feature;tags[tag]=feature}this.features[scriptTag].tags=tags},FeatureQuery.prototype.getScriptFeatures=function(scriptTag){var features=this.features[scriptTag];if(this.features.hasOwnProperty(scriptTag))return features;var featuresIndexes=this.getScriptFeaturesIndexes(scriptTag);if(!featuresIndexes)return null;var gsub=this.font.tables.gsub;return features=featuresIndexes.map((function(index){return gsub.features[index]})),this.features[scriptTag]=features,this.mapTagsToFeatures(features,scriptTag),features},FeatureQuery.prototype.getSubstitutionType=function(lookupTable,subtable){return lookupTable.lookupType.toString()+subtable.substFormat.toString()},FeatureQuery.prototype.getLookupMethod=function(lookupTable,subtable){var this$1=this;switch(this.getSubstitutionType(lookupTable,subtable)){case"11":return function(glyphIndex){return singleSubstitutionFormat1.apply(this$1,[glyphIndex,subtable])};case"12":return function(glyphIndex){return singleSubstitutionFormat2.apply(this$1,[glyphIndex,subtable])};case"63":return function(contextParams){return chainingSubstitutionFormat3.apply(this$1,[contextParams,subtable])};case"41":return function(contextParams){return ligatureSubstitutionFormat1.apply(this$1,[contextParams,subtable])};case"21":return function(glyphIndex){return decompositionSubstitutionFormat1.apply(this$1,[glyphIndex,subtable])};default:throw new Error("lookupType: "+lookupTable.lookupType+" - substFormat: "+subtable.substFormat+" is not yet supported")}},FeatureQuery.prototype.lookupFeature=function(query){var contextParams=query.contextParams,currentIndex=contextParams.index,feature=this.getFeature({tag:query.tag,script:query.script});if(!feature)return new Error("font '"+this.font.names.fullName.en+"' doesn't support feature '"+query.tag+"' for script '"+query.script+"'.");for(var lookups=this.getFeatureLookups(feature),substitutions=[].concat(contextParams.context),l=0;l<lookups.length;l++)for(var lookupTable=lookups[l],subtables=this.getLookupSubtables(lookupTable),s=0;s<subtables.length;s++){var subtable=subtables[s],substType=this.getSubstitutionType(lookupTable,subtable),lookup=this.getLookupMethod(lookupTable,subtable),substitution=void 0;switch(substType){case"11":(substitution=lookup(contextParams.current))&&substitutions.splice(currentIndex,1,new SubstitutionAction({id:11,tag:query.tag,substitution:substitution}));break;case"12":(substitution=lookup(contextParams.current))&&substitutions.splice(currentIndex,1,new SubstitutionAction({id:12,tag:query.tag,substitution:substitution}));break;case"63":substitution=lookup(contextParams),Array.isArray(substitution)&&substitution.length&&substitutions.splice(currentIndex,1,new SubstitutionAction({id:63,tag:query.tag,substitution:substitution}));break;case"41":(substitution=lookup(contextParams))&&substitutions.splice(currentIndex,1,new SubstitutionAction({id:41,tag:query.tag,substitution:substitution}));break;case"21":(substitution=lookup(contextParams.current))&&substitutions.splice(currentIndex,1,new SubstitutionAction({id:21,tag:query.tag,substitution:substitution}))}contextParams=new ContextParams(substitutions,currentIndex),Array.isArray(substitution)&&!substitution.length||(substitution=null)}return substitutions.length?substitutions:null},FeatureQuery.prototype.supports=function(query){if(!query.script)return!1;this.getScriptFeatures(query.script);var supportedScript=this.features.hasOwnProperty(query.script);if(!query.tag)return supportedScript;var supportedFeature=this.features[query.script].some((function(feature){return feature.tag===query.tag}));return supportedScript&&supportedFeature},FeatureQuery.prototype.getLookupSubtables=function(lookupTable){return lookupTable.subtables||null},FeatureQuery.prototype.getLookupByIndex=function(index){return this.font.tables.gsub.lookups[index]||null},FeatureQuery.prototype.getFeatureLookups=function(feature){return feature.lookupListIndexes.map(this.getLookupByIndex.bind(this))},FeatureQuery.prototype.getFeature=function(query){if(!this.font)return{FAIL:"No font was found"};this.features.hasOwnProperty(query.script)||this.getScriptFeatures(query.script);var scriptFeatures=this.features[query.script];return scriptFeatures?scriptFeatures.tags[query.tag]?this.features[query.script].tags[query.tag]:null:{FAIL:"No feature for script "+query.script}};var arabicWordCheck={startCheck:function(contextParams){var char=contextParams.current,prevChar=contextParams.get(-1);return null===prevChar&&isArabicChar(char)||!isArabicChar(prevChar)&&isArabicChar(char)},endCheck:function(contextParams){var nextChar=contextParams.get(1);return null===nextChar||!isArabicChar(nextChar)}};var arabicSentenceCheck={startCheck:function(contextParams){var char=contextParams.current,prevChar=contextParams.get(-1);return(isArabicChar(char)||isTashkeelArabicChar(char))&&!isArabicChar(prevChar)},endCheck:function(contextParams){var nextChar=contextParams.get(1);switch(!0){case null===nextChar:return!0;case!isArabicChar(nextChar)&&!isTashkeelArabicChar(nextChar):var nextIsWhitespace=/\s/.test(nextChar);if(!nextIsWhitespace)return!0;if(nextIsWhitespace){if(!contextParams.lookahead.some((function(c){return isArabicChar(c)||isTashkeelArabicChar(c)})))return!0}break;default:return!1}}};var SUBSTITUTIONS={11:function(action,tokens,index){tokens[index].setState(action.tag,action.substitution)},12:function(action,tokens,index){tokens[index].setState(action.tag,action.substitution)},63:function(action,tokens,index){action.substitution.forEach((function(subst,offset){tokens[index+offset].setState(action.tag,subst)}))},41:function(action,tokens,index){var token=tokens[index];token.setState(action.tag,action.substitution.ligGlyph);for(var compsCount=action.substitution.components.length,i=0;i<compsCount;i++)(token=tokens[index+i+1]).setState("deleted",!0)}};function applySubstitution(action,tokens,index){action instanceof SubstitutionAction&&SUBSTITUTIONS[action.id]&&SUBSTITUTIONS[action.id](action,tokens,index)}function arabicPresentationForms(range){var this$1=this,tags=this.featuresTags.arab,tokens=this.tokenizer.getRangeTokens(range);if(1!==tokens.length){var contextParams=new ContextParams(tokens.map((function(token){return token.getState("glyphIndex")})),0),charContextParams=new ContextParams(tokens.map((function(token){return token.char})),0);tokens.forEach((function(token,index){if(!isTashkeelArabicChar(token.char)){contextParams.setCurrentIndex(index),charContextParams.setCurrentIndex(index);var tag,CONNECT=0;switch(function(charContextParams){for(var backtrack=[].concat(charContextParams.backtrack),i=backtrack.length-1;i>=0;i--){var prevChar=backtrack[i],isolated=isIsolatedArabicChar(prevChar),tashkeel=isTashkeelArabicChar(prevChar);if(!isolated&&!tashkeel)return!0;if(isolated)return!1}return!1}(charContextParams)&&(CONNECT|=1),function(charContextParams){if(isIsolatedArabicChar(charContextParams.current))return!1;for(var i=0;i<charContextParams.lookahead.length;i++)if(!isTashkeelArabicChar(charContextParams.lookahead[i]))return!0;return!1}(charContextParams)&&(CONNECT|=2),CONNECT){case 1:tag="fina";break;case 2:tag="init";break;case 3:tag="medi"}if(-1!==tags.indexOf(tag)){var substitutions=this$1.query.lookupFeature({tag:tag,script:"arab",contextParams:contextParams});if(substitutions instanceof Error)return console.info(substitutions.message);substitutions.forEach((function(action,index){action instanceof SubstitutionAction&&(applySubstitution(action,tokens,index),contextParams.context[index]=action.substitution)}))}}}))}}function getContextParams(tokens,index){return new ContextParams(tokens.map((function(token){return token.activeState.value})),index||0)}function arabicRequiredLigatures(range){var this$1=this,tokens=this.tokenizer.getRangeTokens(range),contextParams=getContextParams(tokens);contextParams.context.forEach((function(glyphIndex,index){contextParams.setCurrentIndex(index);var substitutions=this$1.query.lookupFeature({tag:"rlig",script:"arab",contextParams:contextParams});substitutions.length&&(substitutions.forEach((function(action){return applySubstitution(action,tokens,index)})),contextParams=getContextParams(tokens))}))}var latinWordCheck={startCheck:function(contextParams){var char=contextParams.current,prevChar=contextParams.get(-1);return null===prevChar&&isLatinChar(char)||!isLatinChar(prevChar)&&isLatinChar(char)},endCheck:function(contextParams){var nextChar=contextParams.get(1);return null===nextChar||!isLatinChar(nextChar)}};function getContextParams$1(tokens,index){return new ContextParams(tokens.map((function(token){return token.activeState.value})),index||0)}function latinLigature(range){var this$1=this,tokens=this.tokenizer.getRangeTokens(range),contextParams=getContextParams$1(tokens);contextParams.context.forEach((function(glyphIndex,index){contextParams.setCurrentIndex(index);var substitutions=this$1.query.lookupFeature({tag:"liga",script:"latn",contextParams:contextParams});substitutions.length&&(substitutions.forEach((function(action){return applySubstitution(action,tokens,index)})),contextParams=getContextParams$1(tokens))}))}function Bidi(baseDir){this.baseDir=baseDir||"ltr",this.tokenizer=new Tokenizer,this.featuresTags={}}function registerContextChecker(checkId){var check=this.contextChecks[checkId+"Check"];return this.tokenizer.registerContextChecker(checkId,check.startCheck,check.endCheck)}function tokenizeText(){return registerContextChecker.call(this,"latinWord"),registerContextChecker.call(this,"arabicWord"),registerContextChecker.call(this,"arabicSentence"),this.tokenizer.tokenize(this.text)}function reverseArabicSentences(){var this$1=this;this.tokenizer.getContextRanges("arabicSentence").forEach((function(range){var rangeTokens=this$1.tokenizer.getRangeTokens(range);this$1.tokenizer.replaceRange(range.startIndex,range.endOffset,rangeTokens.reverse())}))}function checkGlyphIndexStatus(){if(-1===this.tokenizer.registeredModifiers.indexOf("glyphIndex"))throw new Error("glyphIndex modifier is required to apply arabic presentation features.")}function applyArabicPresentationForms(){var this$1=this;this.featuresTags.hasOwnProperty("arab")&&(checkGlyphIndexStatus.call(this),this.tokenizer.getContextRanges("arabicWord").forEach((function(range){arabicPresentationForms.call(this$1,range)})))}function applyArabicRequireLigatures(){var this$1=this;this.featuresTags.hasOwnProperty("arab")&&(-1!==this.featuresTags.arab.indexOf("rlig")&&(checkGlyphIndexStatus.call(this),this.tokenizer.getContextRanges("arabicWord").forEach((function(range){arabicRequiredLigatures.call(this$1,range)}))))}function applyLatinLigatures(){var this$1=this;this.featuresTags.hasOwnProperty("latn")&&(-1!==this.featuresTags.latn.indexOf("liga")&&(checkGlyphIndexStatus.call(this),this.tokenizer.getContextRanges("latinWord").forEach((function(range){latinLigature.call(this$1,range)}))))}function Font(options){(options=options||{}).tables=options.tables||{},options.empty||(checkArgument(options.familyName,"When creating a new Font object, familyName is required."),checkArgument(options.styleName,"When creating a new Font object, styleName is required."),checkArgument(options.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),checkArgument(options.ascender,"When creating a new Font object, ascender is required."),checkArgument(options.descender<=0,"When creating a new Font object, negative descender value is required."),this.names={fontFamily:{en:options.familyName||" "},fontSubfamily:{en:options.styleName||" "},fullName:{en:options.fullName||options.familyName+" "+options.styleName},postScriptName:{en:options.postScriptName||(options.familyName+options.styleName).replace(/\s/g,"")},designer:{en:options.designer||" "},designerURL:{en:options.designerURL||" "},manufacturer:{en:options.manufacturer||" "},manufacturerURL:{en:options.manufacturerURL||" "},license:{en:options.license||" "},licenseURL:{en:options.licenseURL||" "},version:{en:options.version||"Version 0.1"},description:{en:options.description||" "},copyright:{en:options.copyright||" "},trademark:{en:options.trademark||" "}},this.unitsPerEm=options.unitsPerEm||1e3,this.ascender=options.ascender,this.descender=options.descender,this.createdTimestamp=options.createdTimestamp,this.tables=Object.assign(options.tables,{os2:Object.assign({usWeightClass:options.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:options.widthClass||this.usWidthClasses.MEDIUM,fsSelection:options.fsSelection||this.fsSelectionValues.REGULAR},options.tables.os2)})),this.supported=!0,this.glyphs=new glyphset.GlyphSet(this,options.glyphs||[]),this.encoding=new DefaultEncoding(this),this.position=new Position(this),this.substitution=new Substitution(this),this.tables=this.tables||{},this._push=null,this._hmtxTableData={},Object.defineProperty(this,"hinting",{get:function(){return this._hinting?this._hinting:"truetype"===this.outlinesFormat?this._hinting=new Hinting(this):void 0}})}function addName(name,names){var nameString=JSON.stringify(name),nameID=256;for(var nameKey in names){var n=parseInt(nameKey);if(n&&!(n<256)){if(JSON.stringify(names[nameKey])===nameString)return n;nameID<=n&&(nameID=n+1)}}return names[nameID]=name,nameID}function makeFvarAxis(n,axis,names){var nameID=addName(axis.name,names);return[{name:"tag_"+n,type:"TAG",value:axis.tag},{name:"minValue_"+n,type:"FIXED",value:axis.minValue<<16},{name:"defaultValue_"+n,type:"FIXED",value:axis.defaultValue<<16},{name:"maxValue_"+n,type:"FIXED",value:axis.maxValue<<16},{name:"flags_"+n,type:"USHORT",value:0},{name:"nameID_"+n,type:"USHORT",value:nameID}]}function parseFvarAxis(data,start,names){var axis={},p=new parse.Parser(data,start);return axis.tag=p.parseTag(),axis.minValue=p.parseFixed(),axis.defaultValue=p.parseFixed(),axis.maxValue=p.parseFixed(),p.skip("uShort",1),axis.name=names[p.parseUShort()]||{},axis}function makeFvarInstance(n,inst,axes,names){for(var fields=[{name:"nameID_"+n,type:"USHORT",value:addName(inst.name,names)},{name:"flags_"+n,type:"USHORT",value:0}],i=0;i<axes.length;++i){var axisTag=axes[i].tag;fields.push({name:"axis_"+n+" "+axisTag,type:"FIXED",value:inst.coordinates[axisTag]<<16})}return fields}function parseFvarInstance(data,start,axes,names){var inst={},p=new parse.Parser(data,start);inst.name=names[p.parseUShort()]||{},p.skip("uShort",1),inst.coordinates={};for(var i=0;i<axes.length;++i)inst.coordinates[axes[i].tag]=p.parseFixed();return inst}Bidi.prototype.setText=function(text){this.text=text},Bidi.prototype.contextChecks={latinWordCheck:latinWordCheck,arabicWordCheck:arabicWordCheck,arabicSentenceCheck:arabicSentenceCheck},Bidi.prototype.registerFeatures=function(script,tags){var this$1=this,supportedTags=tags.filter((function(tag){return this$1.query.supports({script:script,tag:tag})}));this.featuresTags.hasOwnProperty(script)?this.featuresTags[script]=this.featuresTags[script].concat(supportedTags):this.featuresTags[script]=supportedTags},Bidi.prototype.applyFeatures=function(font,features){if(!font)throw new Error("No valid font was provided to apply features");this.query||(this.query=new FeatureQuery(font));for(var f=0;f<features.length;f++){var feature=features[f];this.query.supports({script:feature.script})&&this.registerFeatures(feature.script,feature.tags)}},Bidi.prototype.registerModifier=function(modifierId,condition,modifier){this.tokenizer.registerModifier(modifierId,condition,modifier)},Bidi.prototype.checkContextReady=function(contextId){return!!this.tokenizer.getContext(contextId)},Bidi.prototype.applyFeaturesToContexts=function(){this.checkContextReady("arabicWord")&&(applyArabicPresentationForms.call(this),applyArabicRequireLigatures.call(this)),this.checkContextReady("latinWord")&&applyLatinLigatures.call(this),this.checkContextReady("arabicSentence")&&reverseArabicSentences.call(this)},Bidi.prototype.processText=function(text){this.text&&this.text===text||(this.setText(text),tokenizeText.call(this),this.applyFeaturesToContexts())},Bidi.prototype.getBidiText=function(text){return this.processText(text),this.tokenizer.getText()},Bidi.prototype.getTextGlyphs=function(text){this.processText(text);for(var indexes=[],i=0;i<this.tokenizer.tokens.length;i++){var token=this.tokenizer.tokens[i];if(!token.state.deleted){var index=token.activeState.value;indexes.push(Array.isArray(index)?index[0]:index)}}return indexes},Font.prototype.hasChar=function(c){return null!==this.encoding.charToGlyphIndex(c)},Font.prototype.charToGlyphIndex=function(s){return this.encoding.charToGlyphIndex(s)},Font.prototype.charToGlyph=function(c){var glyphIndex=this.charToGlyphIndex(c),glyph=this.glyphs.get(glyphIndex);return glyph||(glyph=this.glyphs.get(0)),glyph},Font.prototype.updateFeatures=function(options){return this.defaultRenderOptions.features.map((function(feature){return"latn"===feature.script?{script:"latn",tags:feature.tags.filter((function(tag){return options[tag]}))}:feature}))},Font.prototype.stringToGlyphs=function(s,options){var this$1=this,bidi=new Bidi;bidi.registerModifier("glyphIndex",null,(function(token){return this$1.charToGlyphIndex(token.char)}));var features=options?this.updateFeatures(options.features):this.defaultRenderOptions.features;bidi.applyFeatures(this,features);for(var indexes=bidi.getTextGlyphs(s),length=indexes.length,glyphs=new Array(length),notdef=this.glyphs.get(0),i=0;i<length;i+=1)glyphs[i]=this.glyphs.get(indexes[i])||notdef;return glyphs},Font.prototype.nameToGlyphIndex=function(name){return this.glyphNames.nameToGlyphIndex(name)},Font.prototype.nameToGlyph=function(name){var glyphIndex=this.nameToGlyphIndex(name),glyph=this.glyphs.get(glyphIndex);return glyph||(glyph=this.glyphs.get(0)),glyph},Font.prototype.glyphIndexToName=function(gid){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(gid):""},Font.prototype.getKerningValue=function(leftGlyph,rightGlyph){leftGlyph=leftGlyph.index||leftGlyph,rightGlyph=rightGlyph.index||rightGlyph;var gposKerning=this.position.defaultKerningTables;return gposKerning?this.position.getKerningValue(gposKerning,leftGlyph,rightGlyph):this.kerningPairs[leftGlyph+","+rightGlyph]||0},Font.prototype.defaultRenderOptions={kerning:!0,features:[{script:"arab",tags:["init","medi","fina","rlig"]},{script:"latn",tags:["liga","rlig"]}]},Font.prototype.forEachGlyph=function(text,x,y,fontSize,options,callback){x=void 0!==x?x:0,y=void 0!==y?y:0,fontSize=void 0!==fontSize?fontSize:72,options=Object.assign({},this.defaultRenderOptions,options);var kerningLookups,fontScale=1/this.unitsPerEm*fontSize,glyphs=this.stringToGlyphs(text,options);if(options.kerning){var script=options.script||this.position.getDefaultScriptName();kerningLookups=this.position.getKerningTables(script,options.language)}for(var i=0;i<glyphs.length;i+=1){var glyph=glyphs[i];if(callback.call(this,glyph,x,y,fontSize,options),glyph.advanceWidth&&(x+=glyph.advanceWidth*fontScale),options.kerning&&i<glyphs.length-1)x+=(kerningLookups?this.position.getKerningValue(kerningLookups,glyph.index,glyphs[i+1].index):this.getKerningValue(glyph,glyphs[i+1]))*fontScale;options.letterSpacing?x+=options.letterSpacing*fontSize:options.tracking&&(x+=options.tracking/1e3*fontSize)}return x},Font.prototype.getPath=function(text,x,y,fontSize,options){var fullPath=new Path;return this.forEachGlyph(text,x,y,fontSize,options,(function(glyph,gX,gY,gFontSize){var glyphPath=glyph.getPath(gX,gY,gFontSize,options,this);fullPath.extend(glyphPath)})),fullPath},Font.prototype.getPaths=function(text,x,y,fontSize,options){var glyphPaths=[];return this.forEachGlyph(text,x,y,fontSize,options,(function(glyph,gX,gY,gFontSize){var glyphPath=glyph.getPath(gX,gY,gFontSize,options,this);glyphPaths.push(glyphPath)})),glyphPaths},Font.prototype.getAdvanceWidth=function(text,fontSize,options){return this.forEachGlyph(text,0,0,fontSize,options,(function(){}))},Font.prototype.draw=function(ctx,text,x,y,fontSize,options){this.getPath(text,x,y,fontSize,options).draw(ctx)},Font.prototype.drawPoints=function(ctx,text,x,y,fontSize,options){this.forEachGlyph(text,x,y,fontSize,options,(function(glyph,gX,gY,gFontSize){glyph.drawPoints(ctx,gX,gY,gFontSize)}))},Font.prototype.drawMetrics=function(ctx,text,x,y,fontSize,options){this.forEachGlyph(text,x,y,fontSize,options,(function(glyph,gX,gY,gFontSize){glyph.drawMetrics(ctx,gX,gY,gFontSize)}))},Font.prototype.getEnglishName=function(name){var translations=this.names[name];if(translations)return translations.en},Font.prototype.validate=function(){var _this=this;function assertNamePresent(name){var englishName=_this.getEnglishName(name);englishName&&englishName.trim().length}assertNamePresent("fontFamily"),assertNamePresent("weightName"),assertNamePresent("manufacturer"),assertNamePresent("copyright"),assertNamePresent("version"),this.unitsPerEm},Font.prototype.toTables=function(){return sfnt.fontToTable(this)},Font.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},Font.prototype.toArrayBuffer=function(){for(var bytes=this.toTables().encode(),buffer=new ArrayBuffer(bytes.length),intArray=new Uint8Array(buffer),i=0;i<bytes.length;i++)intArray[i]=bytes[i];return buffer},Font.prototype.download=function(fileName){var familyName=this.getEnglishName("fontFamily"),styleName=this.getEnglishName("fontSubfamily");fileName=fileName||familyName.replace(/\s/g,"")+"-"+styleName+".otf";var arrayBuffer=this.toArrayBuffer();if("undefined"!=typeof window)if(window.URL=window.URL||window.webkitURL,window.URL){var dataView=new DataView(arrayBuffer),blob=new Blob([dataView],{type:"font/opentype"}),link=document.createElement("a");link.href=window.URL.createObjectURL(blob),link.download=fileName;var event=document.createEvent("MouseEvents");event.initEvent("click",!0,!1),link.dispatchEvent(event)}else console.warn("Font file could not be downloaded. Try using a different browser.");else{var fs=__webpack_require__(153),buffer=function(ab){for(var buffer=new Buffer(ab.byteLength),view=new Uint8Array(ab),i=0;i<buffer.length;++i)buffer[i]=view[i];return buffer}(arrayBuffer);fs.writeFileSync(fileName,buffer)}},Font.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},Font.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},Font.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var fvar={make:function(fvar,names){var result=new table.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:fvar.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:fvar.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*fvar.axes.length}]);result.offsetToData=result.sizeOf();for(var i=0;i<fvar.axes.length;i++)result.fields=result.fields.concat(makeFvarAxis(i,fvar.axes[i],names));for(var j=0;j<fvar.instances.length;j++)result.fields=result.fields.concat(makeFvarInstance(j,fvar.instances[j],fvar.axes,names));return result},parse:function(data,start,names){var p=new parse.Parser(data,start),tableVersion=p.parseULong();check.argument(65536===tableVersion,"Unsupported fvar table version.");var offsetToData=p.parseOffset16();p.skip("uShort",1);for(var axisCount=p.parseUShort(),axisSize=p.parseUShort(),instanceCount=p.parseUShort(),instanceSize=p.parseUShort(),axes=[],i=0;i<axisCount;i++)axes.push(parseFvarAxis(data,start+offsetToData+i*axisSize,names));for(var instances=[],instanceStart=start+offsetToData+axisCount*axisSize,j=0;j<instanceCount;j++)instances.push(parseFvarInstance(data,instanceStart+j*instanceSize,axes,names));return{axes:axes,instances:instances}}},subtableParsers$1=new Array(10);subtableParsers$1[1]=function(){var start=this.offset+this.relativeOffset,posformat=this.parseUShort();return 1===posformat?{posFormat:1,coverage:this.parsePointer(Parser.coverage),value:this.parseValueRecord()}:2===posformat?{posFormat:2,coverage:this.parsePointer(Parser.coverage),values:this.parseValueRecordList()}:void check.assert(!1,"0x"+start.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},subtableParsers$1[2]=function(){var start=this.offset+this.relativeOffset,posFormat=this.parseUShort();check.assert(1===posFormat||2===posFormat,"0x"+start.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");var coverage=this.parsePointer(Parser.coverage),valueFormat1=this.parseUShort(),valueFormat2=this.parseUShort();if(1===posFormat)return{posFormat:posFormat,coverage:coverage,valueFormat1:valueFormat1,valueFormat2:valueFormat2,pairSets:this.parseList(Parser.pointer(Parser.list((function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(valueFormat1),value2:this.parseValueRecord(valueFormat2)}}))))};if(2===posFormat){var classDef1=this.parsePointer(Parser.classDef),classDef2=this.parsePointer(Parser.classDef),class1Count=this.parseUShort(),class2Count=this.parseUShort();return{posFormat:posFormat,coverage:coverage,valueFormat1:valueFormat1,valueFormat2:valueFormat2,classDef1:classDef1,classDef2:classDef2,class1Count:class1Count,class2Count:class2Count,classRecords:this.parseList(class1Count,Parser.list(class2Count,(function(){return{value1:this.parseValueRecord(valueFormat1),value2:this.parseValueRecord(valueFormat2)}})))}}},subtableParsers$1[3]=function(){return{error:"GPOS Lookup 3 not supported"}},subtableParsers$1[4]=function(){return{error:"GPOS Lookup 4 not supported"}},subtableParsers$1[5]=function(){return{error:"GPOS Lookup 5 not supported"}},subtableParsers$1[6]=function(){return{error:"GPOS Lookup 6 not supported"}},subtableParsers$1[7]=function(){return{error:"GPOS Lookup 7 not supported"}},subtableParsers$1[8]=function(){return{error:"GPOS Lookup 8 not supported"}},subtableParsers$1[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var subtableMakers$1=new Array(10);var gpos={parse:function(data,start){var p=new Parser(data,start=start||0),tableVersion=p.parseVersion(1);return check.argument(1===tableVersion||1.1===tableVersion,"Unsupported GPOS table version "+tableVersion),1===tableVersion?{version:tableVersion,scripts:p.parseScriptList(),features:p.parseFeatureList(),lookups:p.parseLookupList(subtableParsers$1)}:{version:tableVersion,scripts:p.parseScriptList(),features:p.parseFeatureList(),lookups:p.parseLookupList(subtableParsers$1),variations:p.parseFeatureVariationsList()}},make:function(gpos){return new table.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new table.ScriptList(gpos.scripts)},{name:"features",type:"TABLE",value:new table.FeatureList(gpos.features)},{name:"lookups",type:"TABLE",value:new table.LookupList(gpos.lookups,subtableMakers$1)}])}};var kern={parse:function(data,start){var p=new parse.Parser(data,start),tableVersion=p.parseUShort();if(0===tableVersion)return function(p){var pairs={};p.skip("uShort");var subtableVersion=p.parseUShort();check.argument(0===subtableVersion,"Unsupported kern sub-table version."),p.skip("uShort",2);var nPairs=p.parseUShort();p.skip("uShort",3);for(var i=0;i<nPairs;i+=1){var leftIndex=p.parseUShort(),rightIndex=p.parseUShort(),value=p.parseShort();pairs[leftIndex+","+rightIndex]=value}return pairs}(p);if(1===tableVersion)return function(p){var pairs={};p.skip("uShort"),p.parseULong()>1&&console.warn("Only the first kern subtable is supported."),p.skip("uLong");var subtableVersion=255&p.parseUShort();if(p.skip("uShort"),0===subtableVersion){var nPairs=p.parseUShort();p.skip("uShort",3);for(var i=0;i<nPairs;i+=1){var leftIndex=p.parseUShort(),rightIndex=p.parseUShort(),value=p.parseShort();pairs[leftIndex+","+rightIndex]=value}}return pairs}(p);throw new Error("Unsupported kern table version ("+tableVersion+").")}};var loca={parse:function(data,start,numGlyphs,shortVersion){for(var p=new parse.Parser(data,start),parseFn=shortVersion?p.parseUShort:p.parseULong,glyphOffsets=[],i=0;i<numGlyphs+1;i+=1){var glyphOffset=parseFn.call(p);shortVersion&&(glyphOffset*=2),glyphOffsets.push(glyphOffset)}return glyphOffsets}};function loadFromFile(path,callback){__webpack_require__(153).readFile(path,(function(err,buffer){if(err)return callback(err.message);callback(null,nodeBufferToArrayBuffer(buffer))}))}function loadFromUrl(url,callback){var request=new XMLHttpRequest;request.open("get",url,!0),request.responseType="arraybuffer",request.onload=function(){return request.response?callback(null,request.response):callback("Font could not be loaded: "+request.statusText)},request.onerror=function(){callback("Font could not be loaded")},request.send()}function parseOpenTypeTableEntries(data,numTables){for(var tableEntries=[],p=12,i=0;i<numTables;i+=1){var tag=parse.getTag(data,p),checksum=parse.getULong(data,p+4),offset=parse.getULong(data,p+8),length=parse.getULong(data,p+12);tableEntries.push({tag:tag,checksum:checksum,offset:offset,length:length,compression:!1}),p+=16}return tableEntries}function uncompressTable(data,tableEntry){if("WOFF"===tableEntry.compression){var inBuffer=new Uint8Array(data.buffer,tableEntry.offset+2,tableEntry.compressedLength-2),outBuffer=new Uint8Array(tableEntry.length);if(tinyInflate(inBuffer,outBuffer),outBuffer.byteLength!==tableEntry.length)throw new Error("Decompression error: "+tableEntry.tag+" decompressed length doesn't match recorded length");return{data:new DataView(outBuffer.buffer,0),offset:0}}return{data:data,offset:tableEntry.offset}}function parseBuffer(buffer,opt){var indexToLocFormat,ltagTable;opt=null==opt?{}:opt;var numTables,cffTableEntry,fvarTableEntry,glyfTableEntry,gposTableEntry,gsubTableEntry,hmtxTableEntry,kernTableEntry,locaTableEntry,nameTableEntry,metaTableEntry,p,font=new Font({empty:!0}),data=new DataView(buffer,0),tableEntries=[],signature=parse.getTag(data,0);if(signature===String.fromCharCode(0,1,0,0)||"true"===signature||"typ1"===signature)font.outlinesFormat="truetype",tableEntries=parseOpenTypeTableEntries(data,numTables=parse.getUShort(data,4));else if("OTTO"===signature)font.outlinesFormat="cff",tableEntries=parseOpenTypeTableEntries(data,numTables=parse.getUShort(data,4));else{if("wOFF"!==signature)throw new Error("Unsupported OpenType signature "+signature);var flavor=parse.getTag(data,4);if(flavor===String.fromCharCode(0,1,0,0))font.outlinesFormat="truetype";else{if("OTTO"!==flavor)throw new Error("Unsupported OpenType flavor "+signature);font.outlinesFormat="cff"}tableEntries=function(data,numTables){for(var tableEntries=[],p=44,i=0;i<numTables;i+=1){var tag=parse.getTag(data,p),offset=parse.getULong(data,p+4),compLength=parse.getULong(data,p+8),origLength=parse.getULong(data,p+12),compression=void 0;compression=compLength<origLength&&"WOFF",tableEntries.push({tag:tag,offset:offset,compression:compression,compressedLength:compLength,length:origLength}),p+=20}return tableEntries}(data,numTables=parse.getUShort(data,12))}for(var i=0;i<numTables;i+=1){var tableEntry=tableEntries[i],table=void 0;switch(tableEntry.tag){case"cmap":table=uncompressTable(data,tableEntry),font.tables.cmap=cmap.parse(table.data,table.offset),font.encoding=new CmapEncoding(font.tables.cmap);break;case"cvt ":table=uncompressTable(data,tableEntry),p=new parse.Parser(table.data,table.offset),font.tables.cvt=p.parseShortList(tableEntry.length/2);break;case"fvar":fvarTableEntry=tableEntry;break;case"fpgm":table=uncompressTable(data,tableEntry),p=new parse.Parser(table.data,table.offset),font.tables.fpgm=p.parseByteList(tableEntry.length);break;case"head":table=uncompressTable(data,tableEntry),font.tables.head=head.parse(table.data,table.offset),font.unitsPerEm=font.tables.head.unitsPerEm,indexToLocFormat=font.tables.head.indexToLocFormat;break;case"hhea":table=uncompressTable(data,tableEntry),font.tables.hhea=hhea.parse(table.data,table.offset),font.ascender=font.tables.hhea.ascender,font.descender=font.tables.hhea.descender,font.numberOfHMetrics=font.tables.hhea.numberOfHMetrics;break;case"hmtx":hmtxTableEntry=tableEntry;break;case"ltag":table=uncompressTable(data,tableEntry),ltagTable=ltag.parse(table.data,table.offset);break;case"maxp":table=uncompressTable(data,tableEntry),font.tables.maxp=maxp.parse(table.data,table.offset),font.numGlyphs=font.tables.maxp.numGlyphs;break;case"name":nameTableEntry=tableEntry;break;case"OS/2":table=uncompressTable(data,tableEntry),font.tables.os2=os2.parse(table.data,table.offset);break;case"post":table=uncompressTable(data,tableEntry),font.tables.post=post.parse(table.data,table.offset),font.glyphNames=new GlyphNames(font.tables.post);break;case"prep":table=uncompressTable(data,tableEntry),p=new parse.Parser(table.data,table.offset),font.tables.prep=p.parseByteList(tableEntry.length);break;case"glyf":glyfTableEntry=tableEntry;break;case"loca":locaTableEntry=tableEntry;break;case"CFF ":cffTableEntry=tableEntry;break;case"kern":kernTableEntry=tableEntry;break;case"GPOS":gposTableEntry=tableEntry;break;case"GSUB":gsubTableEntry=tableEntry;break;case"meta":metaTableEntry=tableEntry}}var nameTable=uncompressTable(data,nameTableEntry);if(font.tables.name=_name.parse(nameTable.data,nameTable.offset,ltagTable),font.names=font.tables.name,glyfTableEntry&&locaTableEntry){var shortVersion=0===indexToLocFormat,locaTable=uncompressTable(data,locaTableEntry),locaOffsets=loca.parse(locaTable.data,locaTable.offset,font.numGlyphs,shortVersion),glyfTable=uncompressTable(data,glyfTableEntry);font.glyphs=glyf.parse(glyfTable.data,glyfTable.offset,locaOffsets,font,opt)}else{if(!cffTableEntry)throw new Error("Font doesn't contain TrueType or CFF outlines.");var cffTable=uncompressTable(data,cffTableEntry);cff.parse(cffTable.data,cffTable.offset,font,opt)}var hmtxTable=uncompressTable(data,hmtxTableEntry);if(hmtx.parse(font,hmtxTable.data,hmtxTable.offset,font.numberOfHMetrics,font.numGlyphs,font.glyphs,opt),addGlyphNames(font,opt),kernTableEntry){var kernTable=uncompressTable(data,kernTableEntry);font.kerningPairs=kern.parse(kernTable.data,kernTable.offset)}else font.kerningPairs={};if(gposTableEntry){var gposTable=uncompressTable(data,gposTableEntry);font.tables.gpos=gpos.parse(gposTable.data,gposTable.offset),font.position.init()}if(gsubTableEntry){var gsubTable=uncompressTable(data,gsubTableEntry);font.tables.gsub=gsub.parse(gsubTable.data,gsubTable.offset)}if(fvarTableEntry){var fvarTable=uncompressTable(data,fvarTableEntry);font.tables.fvar=fvar.parse(fvarTable.data,fvarTable.offset,font.names)}if(metaTableEntry){var metaTable=uncompressTable(data,metaTableEntry);font.tables.meta=meta.parse(metaTable.data,metaTable.offset),font.metas=font.tables.meta}return font}function load(url,callback,opt){var loadFn="undefined"==typeof window?loadFromFile:loadFromUrl;return new Promise((function(resolve,reject){loadFn(url,(function(err,arrayBuffer){if(err){if(callback)return callback(err);reject(err)}var font;try{font=parseBuffer(arrayBuffer,opt)}catch(e){if(callback)return callback(e,null);reject(e)}if(callback)return callback(null,font);resolve(font)}))}))}function loadSync(url,opt){return parseBuffer(nodeBufferToArrayBuffer(__webpack_require__(153).readFileSync(url)),opt)}var opentype=Object.freeze({__proto__:null,Font:Font,Glyph:Glyph,Path:Path,BoundingBox:BoundingBox,_parse:parse,parse:parseBuffer,load:load,loadSync:loadSync});__webpack_exports__.default=opentype}.call(this,__webpack_require__(202).Buffer)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(944),exports)},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.AnimationSelector=void 0;const ko=__webpack_require__(0),animationSelector_html_1=__webpack_require__(945),decorators_1=__webpack_require__(2),styleService_1=__webpack_require__(20);let AnimationSelector=class{constructor(styleService){this.styleService=styleService,this.animations=ko.observableArray(),this.selectedAnimation=ko.observable()}loadAnimations(){return __awaiter(this,void 0,void 0,(function*(){const themeContract=yield this.styleService.getStyles(),animations=Object.keys(themeContract.animations).map(key=>themeContract.animations[key]);this.animations(animations)}))}selectAnimation(animation){this.selectedAnimation&&this.selectedAnimation(animation),this.onSelect&&this.onSelect(animation)}clearAnimations(){this.selectedAnimation&&this.selectedAnimation(null),this.onSelect&&this.onSelect(null)}};__decorate([decorators_1.Param(),__metadata("design:type",Function)],AnimationSelector.prototype,"selectedAnimation",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],AnimationSelector.prototype,"onSelect",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],AnimationSelector.prototype,"loadAnimations",null),AnimationSelector=__decorate([decorators_1.Component({selector:"animation-selector",template:animationSelector_html_1.default}),__metadata("design:paramtypes",[styleService_1.StyleService])],AnimationSelector),exports.AnimationSelector=AnimationSelector},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="editor">\r\n    <h1>Animation</h1>\r\n    <hr>\r\n\r\n    <div class="flex flex-column list">\r\n        <div class="list" data-bind="scrollable: true">\r\n            <div class="list-item">\r\n                <a href="#" title="Clear animation" class="list-item-label" data-bind="click: $component.clearAnimations">\r\n                    (Inherit)\r\n                </a>\r\n            </div>\r\n\r\n            \x3c!-- ko foreach: { data: animations, as: \'animation\' } --\x3e\r\n            <div class="list-item" data-bind="css: { selected: animation.key == $component.selectedAnimation() }">\r\n                <a href="#" class="list-item-label" data-bind="click: $component.selectAnimation, text: animation.displayName"></a>\r\n            </div>\r\n            \x3c!--/ko --\x3e\r\n        </div>\r\n    </div>\r\n</div>'},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.AnimationEditor=void 0;const ko=__webpack_require__(0),Objects=__webpack_require__(19),animationEditor_html_1=__webpack_require__(947),decorators_1=__webpack_require__(2),styleService_1=__webpack_require__(20);let AnimationEditor=class{constructor(styleService){this.styleService=styleService,this.applyChanges=this.applyChanges.bind(this),this.loadAnimations=this.loadAnimations.bind(this),this.onAnimationSelected=this.onAnimationSelected.bind(this),this.animationKey=ko.observable(),this.displayName=ko.observable(),this.iterationCount=ko.observable(),this.duration=ko.observable(),this.animation=ko.observable()}loadAnimations(){return __awaiter(this,void 0,void 0,(function*(){const animation=this.animation();if(animation){const styles=yield this.styleService.getStyles(),amimationContract=Objects.getObjectAt(animation.animationKey,styles);this.displayName(amimationContract.displayName),this.animationKey(animation.animationKey),this.duration(animation.duration),this.iterationCount(animation.iterationCount)}else this.duration(1),this.iterationCount(void 0),this.displayName("(Inherit)");this.duration.subscribe(this.applyChanges),this.iterationCount.subscribe(this.applyChanges)}))}onAnimationSelected(animation){this.displayName(animation?animation.displayName:"(Inherit)"),this.animationKey(animation?animation.key:void 0),this.applyChanges()}applyChanges(){this.onUpdate&&(this.animationKey()?this.onUpdate({iterationCount:this.iterationCount(),duration:this.duration(),timingFunction:"linear",animationKey:this.animationKey()}):this.onUpdate(void 0))}};__decorate([decorators_1.Param(),__metadata("design:type",Function)],AnimationEditor.prototype,"animation",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],AnimationEditor.prototype,"onUpdate",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],AnimationEditor.prototype,"loadAnimations",null),AnimationEditor=__decorate([decorators_1.Component({selector:"animation",template:animationEditor_html_1.default}),__metadata("design:paramtypes",[styleService_1.StyleService])],AnimationEditor),exports.AnimationEditor=AnimationEditor},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="form-group form-group-collapsible">\r\n    <label class="form-label">\r\n        <a href="#" class="form-group-toggle" title="Toggle section" data-bind="collapse: \'#animationCollapse\'"></a>\r\n        <b>Animation</b>\r\n    </label>\r\n\r\n    <div id="animationCollapse" class="collapse form-group-collapse">\r\n        <div class="form-group">\r\n            <label for="animationType">Type</label>\r\n            <button id="animationType" class="btn" data-bind="text: $component.displayName, balloon: { component: { name: \'animation-selector\', params: { onSelect: $component.onAnimationSelected, selectedAnimation: $component.animationKey } } }"></button>\r\n        </div>\r\n\r\n        \x3c!-- ko if: $component.animationKey --\x3e\r\n        <div class="form-group">\r\n            <label for="animationDuration">Duration (seconds)</label>\r\n            <input id="animationDuration" type="number" class="form-control" min="0.5" step="0.5" data-bind="textInput: $component.duration">\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="animationIterationCount">Iteration count</label>\r\n            <input id="animationIterationCount" type="number" class="form-control" min="1" step="1" placeholder="infinite" data-bind="textInput: $component.iterationCount">\r\n        </div>\r\n        \x3c!-- /ko --\x3e\r\n    </div>\r\n</div>'},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(949),exports),__exportStar(__webpack_require__(951),exports),__exportStar(__webpack_require__(953),exports)},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ShadowSelector=void 0;const ko=__webpack_require__(0),shadowSelector_html_1=__webpack_require__(950),decorators_1=__webpack_require__(2),styleService_1=__webpack_require__(20);let ShadowSelector=class{constructor(styleService){this.styleService=styleService,this.loadShadows=this.loadShadows.bind(this),this.selectShadow=this.selectShadow.bind(this),this.shadows=ko.observableArray(),this.selectedShadow=ko.observable()}loadShadows(){return __awaiter(this,void 0,void 0,(function*(){const themeContract=yield this.styleService.getStyles(),shadows=Object.keys(themeContract.shadows).map(key=>themeContract.shadows[key]);this.shadows(shadows)}))}selectShadow(shadow){this.selectedShadow&&this.selectedShadow(shadow),this.onSelect&&this.onSelect(shadow)}clearShadow(){this.selectedShadow&&this.selectedShadow(null),this.onSelect&&this.onSelect(null)}};__decorate([decorators_1.Param(),__metadata("design:type",Function)],ShadowSelector.prototype,"selectedShadow",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],ShadowSelector.prototype,"onSelect",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],ShadowSelector.prototype,"loadShadows",null),ShadowSelector=__decorate([decorators_1.Component({selector:"shadow-selector",template:shadowSelector_html_1.default}),__metadata("design:paramtypes",[styleService_1.StyleService])],ShadowSelector),exports.ShadowSelector=ShadowSelector},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="editor">\r\n    <h1>Shadow</h1>\r\n    <hr>\r\n\r\n    <div class="list" data-bind="scrollable: true">\r\n        <a href="#" class="list-item" title="Clear shadow" data-bind="click: $component.clearShadow, focus: true">\r\n            <span class="list-item-label">\r\n                (Inherit)\r\n            </span>\r\n        </a>\r\n\r\n        \x3c!-- ko foreach: { data: shadows, as: \'shadow\' } --\x3e\r\n        <a href="#" class="list-item shadow-box" data-bind="click: $component.selectShadow, css: { selected: shadow.key == $component.selectedShadow() }">\r\n            <span class="list-item-label" data-bind="text: shadow.displayName"></span>\r\n        </a>\r\n        \x3c!--/ko --\x3e\r\n    </div>\r\n</div>'},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ShadowEditor=void 0;const ko=__webpack_require__(0),shadowEditor_html_1=__webpack_require__(952),decorators_1=__webpack_require__(2);let ShadowEditor=class{constructor(){this.loadStyle=this.loadStyle.bind(this),this.onStyleChange=this.onStyleChange.bind(this),this.styleName=ko.observable(),this.colorValue=ko.observable(),this.blur=ko.observable(),this.inset=ko.observable(),this.offsetX=ko.observable(),this.offsetY=ko.observable(),this.spread=ko.observable(),this.selectedShadow=ko.observable()}loadStyle(){return __awaiter(this,void 0,void 0,(function*(){this.styleName(this.selectedShadow().displayName),this.colorValue(this.selectedShadow().color),this.blur(+this.selectedShadow().blur),this.inset(this.selectedShadow().inset),this.offsetX(+this.selectedShadow().offsetX),this.offsetY(+this.selectedShadow().offsetY),this.spread(+this.selectedShadow().spread),this.styleName.subscribe(this.onStyleChange),this.colorValue.subscribe(this.onStyleChange),this.blur.subscribe(this.onStyleChange),this.inset.subscribe(this.onStyleChange),this.offsetX.subscribe(this.onStyleChange),this.offsetY.subscribe(this.onStyleChange),this.spread.subscribe(this.onStyleChange)}))}onStyleChange(){const shadow=this.selectedShadow();shadow.color=this.colorValue(),shadow.displayName=this.styleName(),shadow.blur=+this.blur(),shadow.inset=this.inset(),shadow.offsetX=+this.offsetX(),shadow.offsetY=+this.offsetY(),shadow.spread=+this.spread(),clearTimeout(this.selectTimeout),this.selectTimeout=setTimeout(()=>this.scheduleColorUpdate(shadow),600)}scheduleColorUpdate(shadow){this.selectedShadow&&this.selectedShadow(shadow),this.onSelect&&this.onSelect(shadow)}};__decorate([decorators_1.Param(),__metadata("design:type",Function)],ShadowEditor.prototype,"selectedShadow",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],ShadowEditor.prototype,"onSelect",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],ShadowEditor.prototype,"loadStyle",null),ShadowEditor=__decorate([decorators_1.Component({selector:"shadow-editor",template:shadowEditor_html_1.default}),__metadata("design:paramtypes",[])],ShadowEditor),exports.ShadowEditor=ShadowEditor},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<fieldset class="form flex-item flex-item-grow" data-bind="scrollable: true">\r\n    <div class="form-group form-group-collapsible">\r\n        <label class="form-label">\r\n            <a href="#" class="form-group-toggle" title="Toggle section" data-bind="collapse: \'#mainCollapse\'"></a>\r\n            <b>Main</b>\r\n        </label>\r\n        <div id="mainCollapse" class="collapse form-group-collapse">\r\n            <div class="form-group">\r\n                <button class="btn btn-info" type="button" data-bind="tooltip: \'Name of the style\'"></button>\r\n                <label for="style-name">Style name</label>\r\n                <input id="style-name" type="text" class="form-control" spellcheck="false" data-bind="textInput: styleName">\r\n            </div>\r\n            <div class="color-picker">\r\n                \x3c!-- ko if: colorValue --\x3e\r\n                <div data-bind="colorPicker: { selectedColor: colorValue }"></div>\r\n                \x3c!-- /ko --\x3e\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="form-group form-group-collapsible">\r\n        <label class="form-label">\r\n            <a href="#" class="form-group-toggle" title="Toggle section" data-bind="collapse: \'#miscellaneousCollapse\'"></a>\r\n            <b>Shadow</b>\r\n        </label>\r\n        <div id="miscellaneousCollapse" class="collapse form-group-collapse">\r\n            <div class="form-group">\r\n                <label for="blur">Blur radius (in px)</label>\r\n                <input id="blur" type="range" class="form-control" min="1" max="50" data-bind="textInput: blur">\r\n            </div>\r\n            <div class="form-group">\r\n                <label for="spread">Spread radius (in px)</label>\r\n                <input id="spread" type="range" class="form-control" min="1" max="50" data-bind="textInput: spread">\r\n            </div>\r\n            <div class="form-group">\r\n                <label for="offsetX">Offset X (in px)</label>\r\n                <input id="offsetX" type="range" min="-50" max="50" class="form-control" data-bind="textInput: offsetX">\r\n            </div>\r\n            <div class="form-group">\r\n                <label for="offsetY">Offset Y (in px)</label>\r\n                <input id="offsetY" type="range" min="-50" max="50" class="form-control" data-bind="textInput: offsetY">\r\n            </div>\r\n            <div class="form-group">\r\n                <label class="form-label">\r\n                    <input name="scrollOnOverlow" type="checkbox" data-bind="checked: inset"> Display the shadow inset\r\n                </label>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</fieldset>'},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ShadowEditorGroup=void 0;const ko=__webpack_require__(0),Objects=__webpack_require__(19),shadowEditorGroup_html_1=__webpack_require__(954),decorators_1=__webpack_require__(2),styleService_1=__webpack_require__(20);let ShadowEditorGroup=class{constructor(styleService){this.styleService=styleService,this.shadow=ko.observable(),this.shadowKey=ko.observable(),this.displayName=ko.observable()}loadShadows(){return __awaiter(this,void 0,void 0,(function*(){const shadow=this.shadow();if(shadow){const styles=yield this.styleService.getStyles(),shadowContract=Objects.getObjectAt(shadow.shadowKey,styles);this.displayName(shadowContract.displayName),this.shadowKey(shadow.shadowKey)}else this.displayName("(Inherit)")}))}onShadowSelected(shadow){this.displayName(shadow?shadow.displayName:"(Inherit)"),this.shadowKey(shadow?shadow.key:void 0),this.applyChanges()}applyChanges(){this.onUpdate&&(this.shadowKey()?this.onUpdate({shadowKey:this.shadowKey()}):this.onUpdate(void 0))}};__decorate([decorators_1.Param(),__metadata("design:type",Function)],ShadowEditorGroup.prototype,"shadow",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],ShadowEditorGroup.prototype,"onUpdate",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],ShadowEditorGroup.prototype,"loadShadows",null),ShadowEditorGroup=__decorate([decorators_1.Component({selector:"shadow-editor-group",template:shadowEditorGroup_html_1.default}),__metadata("design:paramtypes",[styleService_1.StyleService])],ShadowEditorGroup),exports.ShadowEditorGroup=ShadowEditorGroup},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="form-group form-group-collapsible">\r\n    <label class="form-label">\r\n        <a href="#" class="form-group-toggle" title="Toggle section" data-bind="collapse: \'#shadowCollapse\'"></a>\r\n        <b>Shadow</b>\r\n    </label>\r\n\r\n    <div id="shadowCollapse" class="collapse form-group-collapse">\r\n        <div class="form-group">\r\n            <label for="shadowType">Type</label>\r\n            <button id="shadowType" class="btn" data-bind="text: $component.displayName, balloon: { component: { name: \'shadow-selector\', params: { onSelect: $component.onShadowSelected, selectedShadow: $component.shadowKey } } }"></button>\r\n        </div>\r\n    </div>\r\n</div>'},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(956),exports)},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Typography=void 0;const ko=__webpack_require__(0),Objects=__webpack_require__(19),typography_html_1=__webpack_require__(957),styleService_1=__webpack_require__(20),decorators_1=__webpack_require__(2),consts_1=__webpack_require__(17);let Typography=class{constructor(styleService){this.styleService=styleService,this.fontWeights=[],this.fontStyles=[],this.textTransformOptions=[{value:void 0,text:"(Inherit)"},{value:"none",text:"None"},{value:"capitalize",text:"Capitalize"},{value:"lowercase",text:"Lower-case"},{value:"uppercase",text:"Upper-case"}],this.textDecorationOptions=[{value:void 0,text:"(Inherit)"},{value:"none",text:"None"},{value:"underline",text:"Underline"},{value:"overline",text:"Overline"},{value:"line-through",text:"Line through"}],this.typography=ko.observable(),this.fontKey=ko.observable(),this.fontSize=ko.observable(),this.fontWeight=ko.observable(),this.fontStyle=ko.observable(),this.lineHeight=ko.observable(),this.letterSpacing=ko.observable(),this.colorKey=ko.observable(),this.shadowKey=ko.observable(),this.textAlign=ko.observable(),this.textTransform=ko.observable(),this.textDecoration=ko.observable(),this.fontName=ko.observable(),this.colorName=ko.observable(),this.shadowName=ko.observable(),this.currentWeight=ko.pureComputed(()=>""+(this.fontWeight()||"(Inherit)")),this.currentStyle=ko.pureComputed(()=>""+(this.fontStyle()||"(Inherit)"))}updateObservables(typographyContract){return __awaiter(this,void 0,void 0,(function*(){if(!typographyContract)return;const styles=yield this.styleService.getStyles();if(typographyContract.fontKey){const fontContract=Objects.getObjectAt(typographyContract.fontKey,styles);if(fontContract){this.fontName(fontContract.displayName),this.fontKey(typographyContract.fontKey);const supportedWeights=fontContract.variants.map(variant=>variant.weight.toString()),deduplicated=supportedWeights.filter((item,index)=>supportedWeights.indexOf(item)===index);this.fontWeights=[].concat(deduplicated,void 0)}else console.warn(`Font with key "${typographyContract.fontKey}" not found. Elements using it will fallback to parent's definition.`)}else this.fontWeights=["bold","normal",void 0];if(this.fontStyles=["italic","normal",void 0],typographyContract.colorKey){const colorContract=Objects.getObjectAt(typographyContract.colorKey,styles);colorContract?(this.colorName(colorContract.displayName),this.colorKey(typographyContract.colorKey)):console.warn(`Color with key "${typographyContract.colorKey}" not found. Elements using it will fallback to parent's definition.`)}if(this.fontSize(typographyContract.fontSize),this.fontWeight(typographyContract.fontWeight),this.fontStyle(typographyContract.fontStyle),this.textTransform(typographyContract.textTransform),this.textDecoration(typographyContract.textDecoration),this.lineHeight(typographyContract.lineHeight),this.letterSpacing(typographyContract.letterSpacing),typographyContract.shadowKey){const shadowContract=Objects.getObjectAt(typographyContract.shadowKey,styles);shadowContract?(this.shadowName(shadowContract.displayName),this.shadowKey(typographyContract.shadowKey)):console.warn(`Shadow with key "${typographyContract.shadowKey}" not found. Elements using it will fallback to parent's definition.`)}this.textAlign(typographyContract.textAlign)}))}initialize(){return __awaiter(this,void 0,void 0,(function*(){const typography=this.typography();this.fontName("(Inherit)"),this.colorName("(Inherit)"),this.shadowName("(Inherit)"),yield this.updateObservables(typography),this.fontKey.extend(consts_1.ChangeRateLimit).subscribe(this.applyChanges),this.fontWeight.subscribe(this.applyChanges),this.fontStyle.subscribe(this.applyChanges),this.fontSize.extend(consts_1.ChangeRateLimit).subscribe(this.applyChanges),this.lineHeight.extend(consts_1.ChangeRateLimit).subscribe(this.applyChanges),this.letterSpacing.extend(consts_1.ChangeRateLimit).subscribe(this.applyChanges),this.colorKey.extend(consts_1.ChangeRateLimit).subscribe(this.applyChanges),this.shadowKey.extend(consts_1.ChangeRateLimit).subscribe(this.applyChanges),this.textAlign.extend(consts_1.ChangeRateLimit).subscribe(this.applyChanges),this.textTransform.extend(consts_1.ChangeRateLimit).subscribe(this.applyChanges),this.textDecoration.extend(consts_1.ChangeRateLimit).subscribe(this.applyChanges),this.typography.extend(consts_1.ChangeRateLimit).subscribe(this.updateObservables)}))}onFontSelected(fontContract){return __awaiter(this,void 0,void 0,(function*(){this.fontName(fontContract?fontContract.displayName:"(Inherit)"),this.fontKey(fontContract?fontContract.key:void 0),yield this.updateObservables({fontKey:this.fontKey()})}))}onColorSelected(colorContract){this.colorName(colorContract?colorContract.displayName:"(Inherit)"),this.colorKey(colorContract?colorContract.key:void 0)}onShadowSelected(shadowContract){this.shadowName(shadowContract?shadowContract.displayName:"(Inherit)"),this.shadowKey(shadowContract?shadowContract.key:void 0)}toggleBold(){const weight=this.fontWeight();let index=this.fontWeights.indexOf(weight);index++,index>this.fontWeights.length-1&&(index=0);const newWeight=this.fontWeights[index];this.fontWeight(newWeight)}toggleItalic(){const style=this.fontStyle();let index=this.fontStyles.indexOf(style);index++,index>this.fontStyles.length-1&&(index=0);const newStyle=this.fontStyles[index];this.fontStyle(newStyle)}alignLeft(){const alignment=this.textAlign();this.textAlign("left"===alignment?void 0:"left")}alignCenter(){const alignment=this.textAlign();this.textAlign("center"===alignment?void 0:"center")}alignRight(){const alignment=this.textAlign();this.textAlign("right"===alignment?void 0:"right")}justify(){const alignment=this.textAlign();this.textAlign("justify"===alignment?void 0:"justify")}getFontWeght(fontWeight){if(fontWeight)if("bold"===fontWeight){const boldWeight=+this.fontWeights[this.fontWeights.length-1].weight;if(boldWeight>=600)return boldWeight}else{const boldWeight=+fontWeight;if(boldWeight)return boldWeight}}applyChanges(){this.onUpdate&&this.onUpdate({fontKey:this.fontKey(),fontSize:this.fontSize()?parseInt(this.fontSize()):void 0,fontWeight:this.fontWeight(),fontStyle:this.fontStyle(),lineHeight:this.lineHeight()||null,letterSpacing:this.letterSpacing()||null,colorKey:this.colorKey(),shadowKey:this.shadowKey(),textAlign:this.textAlign(),textTransform:this.textTransform(),textDecoration:this.textDecoration()})}};__decorate([decorators_1.Param(),__metadata("design:type",Function)],Typography.prototype,"typography",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],Typography.prototype,"onUpdate",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],Typography.prototype,"initialize",null),Typography=__decorate([decorators_1.Component({selector:"typography",template:typography_html_1.default}),__metadata("design:paramtypes",[styleService_1.StyleService])],Typography),exports.Typography=Typography},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="form-group form-group-collapsible">\r\n    <label class="form-label">\r\n        <a href="#" class="form-group-toggle" title="Toggle section" data-bind="collapse: \'#typographyCollapse\'"></a>\r\n        <b>Typography</b>\r\n        <button class="btn btn-info" type="button" data-bind="tooltip: \'Manage text appearance\'"></button>\r\n    </label>\r\n\r\n    <div id="typographyCollapse" class="collapse form-group-collapse">\r\n        <div class="form-group">\r\n            <label for="fontFamily">Font family</label>\r\n            <button id="fontFamily" class="btn" data-bind="text: $component.fontName, balloon: { component: { name: \'font-selector\', params: { onSelect: $component.onFontSelected } } }">\r\n            </button>\r\n        </div>\r\n\r\n        <div class="form-group">\r\n            <label for="fontSize">Font size</label>\r\n            <input id="fontSize" type="number" class="form-control" placeholder="(Inherit)" min="5" max="100" data-bind="textInput: $component.fontSize">\r\n            \x3c!-- input id="fontSize" type="range" class="form-control" min="5" max="100" data-bind="textInput: $component.fontSize" /--\x3e\r\n        </div>\r\n\r\n        <div class="form-group">\r\n            <label for="lineHeight">Line height</label>\r\n            <input id="lineHeight" type="number" class="form-control" placeholder="(Inherit)" min="1" max="100" data-bind="textInput: $component.lineHeight">\r\n            \x3c!-- <input id="lineHeight" type="range" class="form-control" min="5" max="100" data-bind="textInput: $component.lineHeight" /> --\x3e\r\n        </div>\r\n\r\n        <div class="form-group">\r\n            <label for="letterSpacing">Letter spacing</label>\r\n            <input id="letterSpacing" type="number" class="form-control" placeholder="(Inherit)" min="1" max="100" data-bind="textInput: $component.letterSpacing">\r\n            \x3c!-- <input id="letterSpacing" type="range" class="form-control" min="0" max="20" data-bind="textInput: $component.letterSpacing" /> --\x3e\r\n        </div>\r\n\r\n        <div class="form-group">\r\n            <div class="toolbox-btn" title="Font weight" data-bind="css: { \'toolbox-btn-is-active\': fontWeight }, tooltip: currentWeight">\r\n                <a href="#" role="button" data-bind="click: toggleBold" aria-label="Change font weight">\r\n                    <i class="paperbits-icon paperbits-bold"></i>\r\n                </a>\r\n            </div>\r\n            <div class="toolbox-btn" title="Font style" data-bind="css: { \'toolbox-btn-is-active\': fontStyle }, tooltip: currentStyle">\r\n                <a href="#" role="button" data-bind="click: toggleItalic" aria-label="Change font style">\r\n                    <i class="paperbits-icon paperbits-italic"></i>\r\n                </a>\r\n            </div>\r\n            <div class="toolbox-btn" data-bind="css: { \'toolbox-btn-is-active\': textAlign() == \'left\' }" title="Align left">\r\n                <a href="#" role="button" data-bind="click: alignLeft" aria-label="Align text left">\r\n                    <i class="paperbits-icon paperbits-align-left-2"></i>\r\n                </a>\r\n            </div>\r\n            <div class="toolbox-btn" data-bind="css: { \'toolbox-btn-is-active\': textAlign() == \'center\' }" title="Align center">\r\n                <a href="#" role="button" data-bind="click: alignCenter" aria-label="Align text center">\r\n                    <i class="paperbits-icon paperbits-align-center"></i>\r\n                </a>\r\n            </div>\r\n            <div class="toolbox-btn" data-bind="css: { \'toolbox-btn-is-active\': textAlign() == \'right\' }" title="Align right">\r\n                <a href="#" role="button" data-bind="click: alignRight" aria-label="Align text right">\r\n                    <i class="paperbits-icon paperbits-align-right-2"></i>\r\n                </a>\r\n            </div>\r\n            <div class="toolbox-btn" data-bind="css: { \'toolbox-btn-is-active\': textAlign() == \'justify\' }" title="Justify">\r\n                <a href="#" role="button" data-bind="click: justify" aria-label="Justify text">\r\n                    <i class="paperbits-icon paperbits-align-justify"></i>\r\n                </a>\r\n            </div>\r\n        </div>\r\n\r\n\r\n        <div class="form-group">\r\n            <label for="textColor">Text color</label>\r\n            <button id="textColor" class="btn" data-bind="text: $component.colorName, balloon: { component: { name: \'color-selector\', params: { onSelect: $component.onColorSelected, selectedColor: $component.colorKey } } }">\r\n            </button>\r\n        </div>\r\n\r\n        <div class="form-group">\r\n            <label for="textShadow">Text shadow</label>\r\n            <button id="textShadow" class="btn" data-bind="text: $component.shadowName, balloon: { component: { name: \'shadow-selector\', params: { onSelect: $component.onShadowSelected } } }">\r\n            </button>\r\n        </div>\r\n\r\n        <div class="form-group">\r\n            <label for="textTransform">Transformation</label>\r\n            <select id="textTransform" class="form-control" data-bind="options: textTransformOptions, optionsValue: \'value\', optionsText: \'text\', value: $component.textTransform"></select>\r\n        </div>\r\n\r\n        <div class="form-group">\r\n            <label for="textDecoration">Decoration</label>\r\n            <select id="textDecoration" class="form-control" data-bind="options: textDecorationOptions, optionsValue: \'value\', optionsText: \'text\', value: $component.textDecoration"></select>\r\n        </div>\r\n    </div>\r\n</div>'},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(959),exports)},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Background=void 0;const ko=__webpack_require__(0),Objects=__webpack_require__(19),background_html_1=__webpack_require__(960),decorators_1=__webpack_require__(2),styles_1=__webpack_require__(8),__1=__webpack_require__(47),backgroundStylePlugin_1=__webpack_require__(223),consts_1=__webpack_require__(17);let Background=class{constructor(styleService,mediaService,mediaPermalinkResolver){this.styleService=styleService,this.mediaService=mediaService,this.mediaPermalinkResolver=mediaPermalinkResolver,this.size=ko.observable(),this.position=ko.observable(),this.attachment=ko.observable(),this.color=ko.observable(),this.colorKey=ko.observable(),this.gradientKey=ko.observable(),this.repeat=ko.observable(),this.background=ko.observable(),this.source=ko.observable(),this.sourceKey=ko.observable(),this.backgroundPreview=ko.observable(),this.direction=ko.observable(),this.horizontalOffsetDirection=ko.observable(),this.verticalOffsetDirection=ko.observable(),this.horizontalOffset=ko.observable(),this.vertialOffset=ko.observable()}initialize(){return __awaiter(this,void 0,void 0,(function*(){yield this.fillout(),this.background.subscribe(this.fillout),this.size.subscribe(this.applyChanges),this.attachment.subscribe(this.applyChanges),this.horizontalOffset.extend(consts_1.ChangeRateLimit).subscribe(this.applyDirectionOffset),this.vertialOffset.extend(consts_1.ChangeRateLimit).subscribe(this.applyDirectionOffset)}))}getBackgroundStylePlugin(themeContract){return this.backgroundStylePlugin||(this.backgroundStylePlugin=new backgroundStylePlugin_1.BackgroundStylePlugin(themeContract,this.mediaPermalinkResolver)),this.backgroundStylePlugin}fillout(){return __awaiter(this,void 0,void 0,(function*(){const backgroundPluginConfig=this.background();if(!backgroundPluginConfig)return this.size(null),this.position(null),this.attachment(null),this.color(null),this.colorKey(null),this.gradientKey(null),this.repeat(null),this.source(null),this.sourceKey(null),this.backgroundPreview(null),void this.clearBackgroundImageOffset();const styles=yield this.styleService.getStyles(),styleRules=yield this.getBackgroundStylePlugin(styles).configToStyleRules(backgroundPluginConfig),style=new styles_1.Style("background-preview");style.addRules(styleRules);const styleSheet=new styles_1.StyleSheet;if(styleSheet.styles.push(style),this.backgroundPreview(styleSheet),backgroundPluginConfig.colorKey){const colorContract=Objects.getObjectAt(backgroundPluginConfig.colorKey,styles);colorContract?(this.color(colorContract),this.colorKey(backgroundPluginConfig.colorKey)):console.warn(`Color with key "${backgroundPluginConfig.colorKey}" not found. Elements using it will fallback to parent's definition.`)}if(backgroundPluginConfig.images&&backgroundPluginConfig.images.length>0){const image=backgroundPluginConfig.images[0];this.sourceKey(image.sourceKey),this.repeat(image.repeat||"no-repeat"),this.size(image.size||"original"),this.attachment(image.attachment||"inherit"),this.position(image.position||"center");const media=yield this.mediaService.getMediaByKey(image.sourceKey);media&&this.source(`url("${media.downloadUrl}")`)}backgroundPluginConfig.gradientKey&&this.gradientKey(backgroundPluginConfig.gradientKey)}))}onAlignmentChange(position){this.direction(position),this.clearBackgroundImageOffset(),position.includes("left")?this.horizontalOffsetDirection("left"):position.includes("right")?this.horizontalOffsetDirection("right"):this.horizontalOffsetDirection("center"),position.includes("top")?this.verticalOffsetDirection("top"):position.includes("bottom")?this.verticalOffsetDirection("bottom"):this.verticalOffsetDirection("center"),this.applyDirectionOffset()}applyDirectionOffset(){let position="";this.horizontalOffsetDirection()&&"center"!==this.horizontalOffsetDirection()?position+=`${this.horizontalOffsetDirection()} ${this.horizontalOffset()||0}px `:position+="center ",this.verticalOffsetDirection()&&"center"!==this.verticalOffsetDirection()?position+=`${this.verticalOffsetDirection()} ${this.vertialOffset()||0}px`:position+="center",this.position(position),this.applyChanges()}onAttachmentChange(attachment){this.attachment(attachment),this.applyChanges()}onMediaSelected(media){this.source(media?`url("${media.downloadUrl}")`:"none"),this.sourceKey(media?media.key:void 0),this.repeat(this.repeat()||"no-repeat"),this.size(this.size()||"original"),this.attachment(this.attachment()||"inherit"),this.position(this.position()||"center center"),this.applyChanges()}onColorSelected(color){this.color(color),this.colorKey(color?color.key:void 0),this.applyChanges()}onGradientSelected(gradient){this.gradientKey(gradient?gradient.key:void 0),this.applyChanges()}clearBackground(){this.color(void 0),this.colorKey(void 0),this.source("none"),this.sourceKey(void 0),this.size(void 0),this.position(void 0),this.attachment(void 0),this.gradientKey(void 0),this.applyChanges()}applyChanges(){return __awaiter(this,void 0,void 0,(function*(){let images;this.sourceKey()&&(images=[],images.push({sourceKey:this.sourceKey(),position:this.position(),size:"original"!==this.size()?this.size():void 0,repeat:this.repeat(),attachment:"inherit"!==this.attachment()?this.attachment():void 0}));const updatedPluginConfig={colorKey:this.colorKey(),gradientKey:this.gradientKey(),images:images},styles=yield this.styleService.getStyles(),styleRules=yield this.getBackgroundStylePlugin(styles).configToStyleRules(updatedPluginConfig),style=new styles_1.Style("background-preview");style.addRules(styleRules);const styleSheet=new styles_1.StyleSheet;styleSheet.styles.push(style),this.backgroundPreview(styleSheet),this.onUpdate&&this.onUpdate(updatedPluginConfig)}))}clearBackgroundImageOffset(){this.horizontalOffsetDirection(null),this.verticalOffsetDirection(null),this.horizontalOffset(0),this.vertialOffset(0)}};__decorate([decorators_1.Param(),__metadata("design:type",Function)],Background.prototype,"background",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],Background.prototype,"onUpdate",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],Background.prototype,"initialize",null),Background=__decorate([decorators_1.Component({selector:"background",template:background_html_1.default}),__metadata("design:paramtypes",[__1.StyleService,Object,Object])],Background),exports.Background=Background},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="form-group form-group-collapsible">\r\n    <label class="form-label">\r\n        <a href="#" class="form-group-toggle" title="Toggle section" data-bind="collapse: \'#backgroundCollapse\'"></a>\r\n        <b>Background</b>\r\n        <button class="btn btn-info" type="button" data-bind="tooltip: \'Manage background\'"></button>\r\n    </label>\r\n\r\n    <div id="backgroundCollapse" class="collapse form-group-collapse">\r\n        <div class="tabs">\r\n            <div class="tab" data-bind="css: { \'tab-is-active\': !sourceKey() && !colorKey() && !gradientKey() }">\r\n                <a href="#" role="button" aria-label="Clear background" data-bind="tooltip: \'Clear background\', click: clearBackground">\r\n                    <i class="paperbits-icon paperbits-ban"></i>\r\n                </a>\r\n            </div>\r\n\r\n            <div class="tab" data-bind="css: { \'tab-is-active\': sourceKey }">\r\n                <a href="#" role="button" aria-label="Background picture" aria-haspopup="true" data-bind="tooltip: \'Background picture\', balloon: { component: { name: \'media-selector\', params: { onSelect: $component.onMediaSelected } } }">\r\n                    <i class="paperbits-icon paperbits-image-2"></i>\r\n                </a>\r\n            </div>\r\n\r\n            <div class="tab" data-bind="css: { \'tab-is-active\': colorKey }">\r\n                <a href="#" role="button" aria-label="Background color" aria-haspopup="true" data-bind="tooltip: \'Background color\', balloon: { component: { name: \'color-selector\', params: { onSelect: $component.onColorSelected, selectedColor: $component.color } } }">\r\n                    <i class="paperbits-icon paperbits-paint-bucket-40"></i>\r\n                </a>\r\n            </div>\r\n\r\n            <div class="tab" data-bind="css: { \'tab-is-active\': gradientKey }">\r\n                <a href="#" role="button" aria-label="Background gradient" aria-haspopup="true" data-bind="tooltip: \'Background gradient\', balloon: { component: { name: \'gradient-selector\', params: { onSelect: $component.onGradientSelected, selectedGradient: $component.gradientKey } } }">\r\n                    <i class="paperbits-icon paperbits-gradient"></i>\r\n                </a>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="dropzone">\r\n            <div class="dropzone-controls">\r\n                \x3c!-- ko if: sourceKey() --\x3e\r\n                <svg alignment="top left" data-bind="alignment: { position: direction, onChange: onAlignmentChange }">\r\n                    <polygon points="2,2 14,2 14,14"/>\r\n                </svg>\r\n                <svg alignment="top center" data-bind="alignment: { position: direction, onChange: onAlignmentChange }">\r\n                    <polygon points="2,2 14,2 14,14"/>\r\n                </svg>\r\n                <svg alignment="top right" data-bind="alignment: { position: direction, onChange: onAlignmentChange }">\r\n                    <polygon points="2,2 14,2 14,14"/>\r\n                </svg>\r\n                <svg alignment="center left" data-bind="alignment: { position: direction, onChange: onAlignmentChange }">\r\n                    <polygon points="2,2 14,2 14,14"/>\r\n                </svg>\r\n                <svg alignment="center right" data-bind="alignment: { position: direction, onChange: onAlignmentChange }">\r\n                    <polygon points="2,2 14,2 14,14"/>\r\n                </svg>\r\n                <svg alignment="bottom left" data-bind="alignment: { position: direction, onChange: onAlignmentChange }">\r\n                    <polygon points="2,2 14,2 14,14"/>\r\n                </svg>\r\n                <svg alignment="bottom center" data-bind="alignment: { position: direction, onChange: onAlignmentChange }">\r\n                    <polygon points="2,2 14,2 14,14"/>\r\n                </svg>\r\n                <svg alignment="bottom right" data-bind="alignment: { position: direction, onChange: onAlignmentChange }">\r\n                    <polygon points="2,2 14,2 14,14"/>\r\n                </svg>\r\n                \x3c!-- /ko --\x3e\r\n                <style data-bind="jss: backgroundPreview"></style>\r\n                <a href="#" class="dropzone-showbox" alignment="center center" data-bind="alignment: { position: direction, onChange: onAlignmentChange }">\r\n                    <div class="fit background-preview"></div>\r\n                </a>\r\n            </div>\r\n        </div>\r\n\r\n        \x3c!-- ko if: sourceKey() --\x3e\r\n  \r\n        \x3c!-- ko if: horizontalOffsetDirection() && horizontalOffsetDirection() !== \'center\' --\x3e\r\n            <div class="form-group">\r\n                <label class="form-label"><span class="capitalize" data-bind="text: horizontalOffsetDirection"></span> offset (px)</label>\r\n                <input type="number" min="0" class="form-control" data-bind="textInput: horizontalOffset">\r\n            </div>\r\n        \x3c!-- /ko --\x3e\r\n\r\n        \x3c!-- ko if: verticalOffsetDirection() && verticalOffsetDirection() !== \'center\' --\x3e\r\n            <div class="form-group">\r\n                <label class="form-label"><span class="capitalize" data-bind="text: verticalOffsetDirection"></span> offset (px)</label>\r\n                <input type="number" min="0" class="form-control" data-bind="textInput: vertialOffset">\r\n            </div>\r\n        \x3c!-- /ko --\x3e\r\n        \r\n        <label class="form-label">\r\n            Background sizing\r\n            <button class="btn btn-info" type="button" data-bind="tooltip: \'<p><b>Contain:</b> Resize the background image to cover the entire container, even if it has to stretch the image or cut a little bit off one of the edges.</p><p><b>Cover:</b> Resize the background image to make sure the image is fully visible.</p>\'"></button>\r\n        </label>\r\n        <div class="form-group">\r\n            <label class="form-label">\r\n                <input name="size" type="radio" value="original" data-bind="checked: size">Original\r\n            </label>\r\n            <label class="form-label">\r\n                <input name="size" type="radio" value="cover" data-bind="checked: size, event: { change: applyChanges }">Cover\r\n            </label>\r\n            <label class="form-label">\r\n                <input name="size" type="radio" value="contain" data-bind="checked: size, event: { change: applyChanges }">Contain\r\n            </label>\r\n        </div>\r\n\r\n        <label class="form-label">\r\n            Background attachment\r\n            <button class="btn btn-info" type="button" data-bind="tooltip: \'<p><b>Contain:</b> Resize the background image to cover the entire container, even if it has to stretch the image or cut a little bit off one of the edges.</p><p><b>Cover:</b> Resize the background image to make sure the image is fully visible.</p>\'"></button>\r\n        </label>\r\n        <div class="form-group">\r\n            <label class="form-label">\r\n                <input name="attachment" type="radio" value="inherit" data-bind="checked: attachment">Inherit\r\n            </label>\r\n            <label class="form-label">\r\n                <input name="attachment" type="radio" value="scroll" data-bind="checked: attachment, event: { change: applyChanges }">Scroll\r\n            </label>\r\n            <label class="form-label">\r\n                <input name="attachment" type="radio" value="fixed" data-bind="checked: attachment, event: { change: applyChanges }">Fixed\r\n            </label>\r\n            <label class="form-label">\r\n                <input name="attachment" type="radio" value="local" data-bind="checked: attachment, event: { change: applyChanges }">Local\r\n            </label>\r\n        </div>\r\n        \x3c!-- /ko --\x3e\r\n    </div>\r\n</div>'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StylesWorkshopSection=void 0;exports.StylesWorkshopSection=class{constructor(viewManager){this.viewManager=viewManager,this.iconClass="paperbits-icon paperbits-palette",this.title="Styles",this.helpText="Manage website global styles."}onActivate(){this.viewManager.clearJourney(),this.viewManager.setHost({name:"style-guide"})}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.StylePreviewBindingHandler=void 0;const ko=__webpack_require__(0),jssCompiler_1=__webpack_require__(48);exports.StylePreviewBindingHandler=class{constructor(styleCompiler,styleService){this.styleCompiler=styleCompiler,this.styleService=styleService,ko.bindingHandlers.stylePreview={update:(element,valueAccessor)=>__awaiter(this,void 0,void 0,(function*(){const config=ko.unwrap(valueAccessor());let styleConfig,classNames;if(styleConfig="string"==typeof config?yield this.styleService.getStyleByKey(config):config,!styleConfig)return;const cssObservable=ko.observable();if("string"==typeof styleConfig||styleConfig instanceof String)classNames=yield this.styleCompiler.getClassNameByStyleKeyAsync(styleConfig);else if(styleConfig.key)classNames=yield this.styleCompiler.getClassNameByStyleKeyAsync(styleConfig.key);else{const styleModel=yield this.styleCompiler.getStyleModelAsync(styleConfig);classNames=styleModel.classNames;const styleElement=document.createElement("style"),css=(new jssCompiler_1.JssCompiler).compile(styleModel.styleSheet);styleElement.innerHTML=css,element.parentElement.insertBefore(styleElement,element)}cssObservable(classNames),ko.applyBindingsToNode(element,{css:cssObservable},null)}))}}}},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Transform=void 0;const ko=__webpack_require__(0),transform_html_1=__webpack_require__(964),styleService_1=__webpack_require__(20),decorators_1=__webpack_require__(2);let Transform=class{constructor(styleService){this.styleService=styleService,this.transform=ko.observable(),this.translateX=ko.observable(),this.translateY=ko.observable(),this.scaleX=ko.observable(),this.scaleY=ko.observable(),this.rotate=ko.observable()}initialize(){return __awaiter(this,void 0,void 0,(function*(){const config=this.transform();config&&(config.translate&&(this.translateX(config.translate.x),this.translateY(config.translate.y)),config.scale&&(this.scaleX(config.scale.x),this.scaleY(config.scale.y)),config.rotate&&this.rotate(config.rotate)),this.translateX.subscribe(this.applyChanges),this.translateY.subscribe(this.applyChanges),this.scaleX.subscribe(this.applyChanges),this.scaleY.subscribe(this.applyChanges),this.rotate.subscribe(this.applyChanges)}))}applyChanges(){this.onUpdate&&this.onUpdate({translate:{x:this.translateX(),y:this.translateY()},scale:{x:this.scaleX(),y:this.scaleY()},rotate:this.rotate()})}};__decorate([decorators_1.Param(),__metadata("design:type",Function)],Transform.prototype,"transform",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],Transform.prototype,"onUpdate",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],Transform.prototype,"initialize",null),Transform=__decorate([decorators_1.Component({selector:"transform",template:transform_html_1.default}),__metadata("design:paramtypes",[styleService_1.StyleService])],Transform),exports.Transform=Transform},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="form-group form-group-collapsible">\r\n    <label class="form-label">\r\n        <a href="#" class="form-group-toggle" title="Toggle section" data-bind="collapse: \'#transformCollapse\'"></a>\r\n        <b>Transform</b>\r\n        <button class="btn btn-info" type="button" data-bind="tooltip: \'Manage element transformations\'"></button>\r\n    </label>\r\n\r\n    <div id="transformCollapse" class="collapse form-group-collapse">\r\n        <div class="form-group">\r\n            <label for="translateX">Translate X (px)</label>\r\n            <input id="translateX" type="number" class="form-control" placeholder="(Inherit)" data-bind="textInput: $component.translateX">\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="translateY">Translate Y (px)</label>\r\n            <input id="translateY" type="number" class="form-control" placeholder="(Inherit)" data-bind="textInput: $component.translateY">\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="scaleX">Scale X</label>\r\n            <input id="scaleeX" type="number" class="form-control" placeholder="(Inherit)" data-bind="textInput: $component.scaleX">\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="scaleY">Scale Y</label>\r\n            <input id="scaleY" type="number" class="form-control" placeholder="(Inherit)" data-bind="textInput: $component.scaleY">\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="rotate">Rotate (degrees)</label>\r\n            <input id="rotate" type="number" class="form-control" placeholder="(Inherit)" data-bind="textInput: $component.rotate">\r\n        </div>\r\n    </div>\r\n    </div>\r\n'},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Transition=void 0;const ko=__webpack_require__(0),transition_html_1=__webpack_require__(966),styleService_1=__webpack_require__(20),decorators_1=__webpack_require__(2);let Transition=class{constructor(styleService){this.styleService=styleService,this.timingFunctionOptions=[{value:void 0,text:"(Inherit)"},{value:"none",text:"None"},{value:"ease",text:"Ease"},{value:"ease-in",text:"Ease in"},{value:"ease-out",text:"Ease out"},{value:"ease-in-out",text:"Ease in and out"}],this.transition=ko.observable(),this.delay=ko.observable(),this.duration=ko.observable(),this.property=ko.observable(),this.timingFunction=ko.observable(),this.enabled=ko.computed(()=>this.timingFunction()&&"none"!==this.timingFunction())}initialize(){return __awaiter(this,void 0,void 0,(function*(){const transitions=this.transition();yield this.fillout(transitions),this.delay.subscribe(this.applyChanges),this.duration.subscribe(this.applyChanges),this.property.subscribe(this.applyChanges),this.timingFunction.subscribe(this.applyChanges)}))}fillout(transitionsConfig){return __awaiter(this,void 0,void 0,(function*(){transitionsConfig&&(this.delay(transitionsConfig.delay||0),this.duration(transitionsConfig.duration||1),this.property(transitionsConfig.property||"all"),this.timingFunction(transitionsConfig.timingFunction))}))}applyChanges(){this.onUpdate&&this.onUpdate({delay:this.delay(),duration:this.duration(),property:this.property(),timingFunction:this.timingFunction()})}};__decorate([decorators_1.Param(),__metadata("design:type",Function)],Transition.prototype,"transition",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],Transition.prototype,"onUpdate",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],Transition.prototype,"initialize",null),Transition=__decorate([decorators_1.Component({selector:"transition",template:transition_html_1.default}),__metadata("design:paramtypes",[styleService_1.StyleService])],Transition),exports.Transition=Transition},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="form-group form-group-collapsible">\r\n    <label class="form-label">\r\n        <a href="#" class="form-group-toggle" title="Toggle section" data-bind="collapse: \'#transitionsCollapse\'"></a>\r\n        <b>Transition</b>\r\n    </label>\r\n\r\n    <div id="transitionsCollapse" class="collapse form-group-collapse">\r\n        <div class="form-group">\r\n            <label for="textDecoration">Timing function</label>\r\n            <select id="textDecoration" class="form-control" data-bind="options: timingFunctionOptions, optionsValue: \'value\', optionsText: \'text\', value: $component.timingFunction"></select>\r\n        </div>\r\n\r\n        \x3c!-- ko if: $component.enabled --\x3e\r\n        <div class="form-group">\r\n            <label for="transitionsDelay">Delay (seconds)</label>\r\n            <input id="transitionsDelay" type="number" class="form-control" min="0" step="0.5" placeholder="e.g. 1.5" data-bind="textInput: $component.delay">\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="transitionsDuration">Duration (seconds)</label>\r\n            <input id="transitionsDuration" type="number" class="form-control" min="0" step="0.5" placeholder="e.g. 1.5" data-bind="textInput: $component.duration">\r\n            \x3c!-- <input id="transitionsDuration" type="range" min="0" step="0.5" class="form-control" data-bind="textInput: $component.duration" /> --\x3e\r\n        </div>\r\n        \x3c!-- /ko --\x3e\r\n    </div>\r\n</div>'},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Container=void 0;const ko=__webpack_require__(0),container_html_1=__webpack_require__(968),decorators_1=__webpack_require__(2);let Container=class{constructor(){this.alignment=ko.observable(),this.verticalAlignment=ko.observable(),this.horizontalAlignment=ko.observable(),this.scrollOnOverlow=ko.observable(),this.container=ko.observable(),this.overflowControls=ko.observable(!1)}initialize(){this.updateObservables(),this.container.subscribe(this.updateObservables),this.scrollOnOverlow.subscribe(this.onOverflowChange)}updateObservables(){var _a,_b;const containerStyle=this.container();(null==containerStyle?void 0:containerStyle.overflow)?this.scrollOnOverlow(!0):this.scrollOnOverlow(!1),this.verticalAlignment(null===(_a=null==containerStyle?void 0:containerStyle.alignment)||void 0===_a?void 0:_a.vertical),this.horizontalAlignment(null===(_b=null==containerStyle?void 0:containerStyle.alignment)||void 0===_b?void 0:_b.horizontal)}applyChanges(){this.alignment(`${this.verticalAlignment()} ${this.horizontalAlignment()}`);const overflow=this.scrollOnOverlow()?{vertical:"scroll",horizontal:"scroll"}:null;this.onUpdate({alignment:{vertical:this.verticalAlignment(),horizontal:this.horizontalAlignment()},overflow:overflow})}alignContent(alignment){this.alignment(alignment)}toggleHorizontal(){switch(this.horizontalAlignment()){case"center":this.horizontalAlignment("around");break;case"around":this.horizontalAlignment("between");break;case"between":this.horizontalAlignment("center")}}toggleVertical(){switch(this.verticalAlignment()){case"center":this.verticalAlignment("around");break;case"around":this.verticalAlignment("between");break;case"between":this.verticalAlignment("center")}}alignLeft(){this.horizontalAlignment("start"),this.applyChanges()}alignRight(){this.horizontalAlignment("end"),this.applyChanges()}alignCenter(){"center"===this.horizontalAlignment()||"around"===this.horizontalAlignment()||"between"===this.horizontalAlignment()?this.toggleHorizontal():this.horizontalAlignment("center"),this.applyChanges()}alignTop(){this.verticalAlignment("start"),this.applyChanges()}alignBottom(){this.verticalAlignment("end"),this.applyChanges()}alignMiddle(){"center"===this.verticalAlignment()||"around"===this.verticalAlignment()||"between"===this.verticalAlignment()?this.toggleVertical():this.verticalAlignment("center"),this.applyChanges()}onOverflowChange(){this.applyChanges()}};__decorate([decorators_1.Param(),__metadata("design:type",Function)],Container.prototype,"container",void 0),__decorate([decorators_1.Param(),__metadata("design:type",Function)],Container.prototype,"overflowControls",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],Container.prototype,"onUpdate",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],Container.prototype,"initialize",null),Container=__decorate([decorators_1.Component({selector:"container",template:container_html_1.default}),__metadata("design:paramtypes",[])],Container),exports.Container=Container},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="form-group form-group-collapsible">\r\n    <label class="form-label">\r\n        <a href="#" class="form-group-toggle" title="Toggle section" data-bind="collapse: \'#alignmentCollapse\'"></a>\r\n        <b>Content alignment</b>\r\n        <button class="btn btn-info" type="button" data-bind="tooltip: \'Align content inside the container. Depending on viewport, the alignment can be different, following mobile-first approach. If not specified in current one, container applies configuration from closest smaller viewports.\'"></button>\r\n    </label>\r\n\r\n    <div id="alignmentCollapse" class="collapse form-group-collapse">\r\n        <div class="form-group">\r\n            <label>Horizontal</label>\r\n            <a href="#" class="toolbox-btn" role="button" data-bind="click: alignLeft, css: { \'toolbox-btn-is-active\': horizontalAlignment() === \'start\' }">\r\n                <i class="paperbits-icon paperbits-align-left"></i>\r\n            </a>\r\n            <a href="#" class="toolbox-btn" role="button" data-bind="click: alignCenter, css: { \'toolbox-btn-is-active\': horizontalAlignment() === \'center\' || horizontalAlignment() === \'around\' || horizontalAlignment() === \'between\' }">\r\n                <i class="paperbits-icon paperbits-align-center-horizontal"></i>\r\n            </a>\r\n            <a href="#" class="toolbox-btn" role="button" data-bind="click: alignRight, css: { \'toolbox-btn-is-active\': horizontalAlignment() === \'end\' }">\r\n                <i class="paperbits-icon paperbits-align-right"></i>\r\n            </a>\r\n        </div>\r\n\r\n        <div class="form-group">\r\n            <label>Vertical</label>\r\n            <a href="#" class="toolbox-btn" role="button" data-bind="click: alignTop, css: { \'toolbox-btn-is-active\': verticalAlignment() === \'start\' }">\r\n                <i class="paperbits-icon paperbits-align-top"></i>\r\n            </a>\r\n            <a href="#" class="toolbox-btn" role="button" data-bind="click: alignMiddle, css: { \'toolbox-btn-is-active\': verticalAlignment() === \'center\' || verticalAlignment() === \'around\' || verticalAlignment() === \'between\' }">\r\n                <i class="paperbits-icon paperbits-align-center-vertical"></i>\r\n            </a>\r\n            <a href="#" class="toolbox-btn" role="button" data-bind="click: alignBottom, css: { \'toolbox-btn-is-active\': verticalAlignment() === \'end\' }">\r\n                <i class="paperbits-icon paperbits-align-bottom"></i>\r\n            </a>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n\x3c!-- ko if: overflowControls --\x3e\r\n<div class="form-group form-group-collapsible">\r\n    <label class="form-label">\r\n        <a href="#" class="form-group-toggle" title="Toggle section" data-bind="collapse: \'#contentFlowCollapse\'"></a>\r\n        <b>Content flow</b>\r\n        <button class="btn btn-info" type="button" data-bind="tooltip: \'Manage scrolling settings for container\'"></button>\r\n    </label>\r\n    <div id="contentFlowCollapse" class="collapse form-group-collapse">\r\n        <label class="form-label">\r\n            <input name="scrollOnOverlow" type="checkbox" data-bind="checked: scrollOnOverlow">Scroll on overflow\r\n        </label>\r\n    </div>\r\n</div>\r\n\x3c!-- /ko --\x3e'},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.StyleSnippetSelector=void 0;const ko=__webpack_require__(0),_=__webpack_require__(85),styleSnippetSelector_html_1=__webpack_require__(970),decorators_1=__webpack_require__(2),styleSnippetService_1=__webpack_require__(302),styleItem_1=__webpack_require__(154),defaultStyleCompiler_1=__webpack_require__(97),utils_1=__webpack_require__(6),objects_1=__webpack_require__(30);let StyleSnippetSelector=class{constructor(styleSnippetService,mediaPermalinkResolver,styleGroups){this.styleSnippetService=styleSnippetService,this.mediaPermalinkResolver=mediaPermalinkResolver,this.styleGroups=styleGroups,this.snippetStyleCompiler=new defaultStyleCompiler_1.DefaultStyleCompiler(void 0,this.mediaPermalinkResolver),this.loadSnippets=this.loadSnippets.bind(this),this.selectSnippet=this.selectSnippet.bind(this),this.snippets=ko.observableArray(),this.existingSnippetKeys=[],this.selectedSnippet=ko.observable(),this.working=ko.observable(!0)}loadSnippets(){return __awaiter(this,void 0,void 0,(function*(){if(!this.snippetType)return;this.working(!0),this.isThemeSelected||(yield this.initSnippetService());const snippetsByType=yield this.styleSnippetService.getStyleByKey(this.snippetType);this.itemTemplate=this.getSnippetTypeTemplate(this.snippetType);const loadedSnippets=[];for(const it of Object.values(snippetsByType)){const item=it,subTheme=yield this.loadThemeForItem(item),styleItem=new styleItem_1.StyleItem(item,subTheme,this.snippetType),compiller=this.getStyleCompiler(subTheme);styleItem.stylesContent=yield compiller.compileCss(),styleItem.classNames=yield compiller.getClassNameByStyleKeyAsync(item.key),loadedSnippets.push(styleItem)}this.snippets(loadedSnippets),this.working(!1)}))}getSnippetTypeTemplate(snippetType){const group=this.styleGroups.find(item=>item.name===snippetType.replaceAll("/","_"));return group?group.selectorTemplate:""}initSnippetService(){return __awaiter(this,void 0,void 0,(function*(){if(!this.styleSnippetService.getSelectedThemeName()){const items=yield this.styleSnippetService.getThemesNames();this.isThemeSelected=yield this.styleSnippetService.selectCurrentTheme(items[0])}}))}loadThemeForItem(item){return __awaiter(this,void 0,void 0,(function*(){const parts=item.key.split("/"),isComponent="components"===parts[0];let stylesKeys=this.getAllStyleKeys(item);if(isComponent&&"default"!==parts[2]){const defaultKey=`${parts[0]}/${parts[1]}/default`,defaultItem=yield this.styleSnippetService.getStyleByKey(defaultKey),defaultKeys=this.getAllStyleKeys(defaultItem);stylesKeys.push(...defaultKeys)}const subTheme={};stylesKeys=stylesKeys.filter((item,index,source)=>source.indexOf(item)===index);for(const stylesKey of stylesKeys){const styleValue=yield this.styleSnippetService.getStyleByKey(stylesKey);styleValue?this.mergeNestedObj(subTheme,stylesKey,styleValue):console.warn("styleKey not found: ",stylesKey)}return subTheme}))}mergeNestedObj(source,path,value){const keys=path.split("/"),lastKey=keys.pop();keys.reduce((source,key)=>source[key]=source[key]||{},source)[lastKey]=value}getStyleCompiler(stylesConfig){return this.snippetStyleCompiler.setStyles(stylesConfig),this.snippetStyleCompiler}getAllStyleKeys(source){const result=[];if(Array.isArray(source))source.every(x=>result.push(...this.getAllStyleKeys(x)));else if("object"==typeof source){const propertyNames=Object.keys(source);for(const propertyName of propertyNames){const propertyValue=source[propertyName];propertyName.toLowerCase().endsWith("key")?result.push(propertyValue):"object"==typeof propertyValue&&result.push(...this.getAllStyleKeys(propertyValue))}}return result}selectSnippet(snippet){return __awaiter(this,void 0,void 0,(function*(){const current=this.selectedSnippet();current&&current.hasFocus(!1),snippet.hasFocus(!0),this.selectedSnippet(snippet)}))}addSnippet(){if(!this.onSelect)return;const selectedItem=_.cloneDeep(this.selectedSnippet()),source=selectedItem.stylesConfig;selectedItem.stylesConfig=source;const allKeys=this.getAllStyleKeys(source).filter((item,index,source)=>source.indexOf(item)===index),refKeys={};for(const path of allKeys){const newKey=utils_1.identifier(),oldValue=objects_1.getObjectAt(path,source),keys=path.split("/"),lastKey=keys.pop(),lastObj=keys.reduce((source,key)=>source[key]=source[key]||{},source);oldValue.key=oldValue.key.replace(lastKey,newKey),oldValue.displayName=oldValue.displayName+" - "+newKey,lastObj[newKey]=oldValue,delete lastObj[lastKey],refKeys[path]=keys.join("/")+"/"+newKey}this.syncStyleKeys(source,refKeys),selectedItem.key=refKeys[selectedItem.key],selectedItem.itemConfig=objects_1.getObjectAt(selectedItem.key,source);const selectedItemKeys=selectedItem.key.split("/");delete selectedItem.stylesConfig[selectedItemKeys[0]],this.onSelect(selectedItem)}syncStyleKeys(source,changeTable){if(Array.isArray(source))source.every(x=>this.syncStyleKeys(x,changeTable));else if("object"==typeof source){const propertyNames=Object.keys(source);for(const propertyName of propertyNames){const propertyValue=source[propertyName];if(propertyName.toLowerCase().endsWith("key")){const newValue=changeTable[propertyValue];newValue&&(source[propertyName]=newValue)}else"object"==typeof propertyValue&&this.syncStyleKeys(propertyValue,changeTable)}}}};__decorate([decorators_1.Param(),__metadata("design:type",String)],StyleSnippetSelector.prototype,"snippetType",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],StyleSnippetSelector.prototype,"onSelect",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],StyleSnippetSelector.prototype,"loadSnippets",null),StyleSnippetSelector=__decorate([decorators_1.Component({selector:"style-snippet-selector",template:styleSnippetSelector_html_1.default}),__metadata("design:paramtypes",[styleSnippetService_1.StyleSnippetService,Object,Array])],StyleSnippetSelector),exports.StyleSnippetSelector=StyleSnippetSelector},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="editor">\r\n    <h1>Snippets</h1>\r\n    <hr>\r\n    \r\n    <div class="flex flex-column list">\r\n        \x3c!--ko if: $component.working()--\x3e\r\n        <spinner></spinner>\r\n        \x3c!--/ko--\x3e\r\n        <ul class="flex-item flex-item-grow list" data-bind="foreach: { data: snippets, as: \'snippet\' }, scrollable: {}">\r\n            <li class="list-item" data-bind="css: { selected: snippet.hasFocus }, click: $component.selectSnippet, event: { keydown: $component.keydown }, attr: { title: snippet.displayName }">\r\n                <style-snippet data-bind="itemTemplate: $parent.itemTemplate" params="{ snippetItem: snippet }"></style-snippet>\r\n            </li>\r\n        </ul>\r\n\r\n        <div class="flex-item btn-group">\r\n            <button class="btn" data-bind="click: addSnippet, enable: !!selectedSnippet()">\r\n                <i class="paperbits-icon paperbits-simple-add"></i> Add\r\n            </button>\r\n        </div>\r\n    </div>\r\n</div>'},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.StyleSnippet=void 0;const styleSnippet_html_1=__webpack_require__(972),decorators_1=__webpack_require__(2),styleItem_1=__webpack_require__(154);let StyleSnippet=class{loadSnippet(){return __awaiter(this,void 0,void 0,(function*(){this.snippetItem&&(this.classNames=this.snippetItem.classNames,this.stylesContent=this.snippetItem.stylesContent)}))}};__decorate([decorators_1.Param(),__metadata("design:type",styleItem_1.StyleItem)],StyleSnippet.prototype,"snippetItem",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],StyleSnippet.prototype,"loadSnippet",null),StyleSnippet=__decorate([decorators_1.Component({selector:"style-snippet",template:styleSnippet_html_1.default,encapsulation:decorators_1.Encapsulation.shadowDom})],StyleSnippet),exports.StyleSnippet=StyleSnippet},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div>\r\n    <style data-bind="html: snippetItem.stylesContent"></style>\r\n    \x3c!-- ko template: { nodes: $componentTemplateNodes, data: snippetItem } --\x3e\x3c!-- /ko --\x3e\r\n</div>'},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.StyleVariationSelector=void 0;const ko=__webpack_require__(0),styleVariationSelector_html_1=__webpack_require__(974),decorators_1=__webpack_require__(2),styleItem_1=__webpack_require__(154),defaultStyleCompiler_1=__webpack_require__(97),styleService_1=__webpack_require__(20);let StyleVariationSelector=class{constructor(styleService,mediaPermalinkResolver,styleGroups){this.styleService=styleService,this.mediaPermalinkResolver=mediaPermalinkResolver,this.styleGroups=styleGroups,this.snippetStyleCompiler=new defaultStyleCompiler_1.DefaultStyleCompiler(void 0,this.mediaPermalinkResolver),this.loadSnippets=this.loadSnippets.bind(this),this.selectSnippet=this.selectSnippet.bind(this),this.snippets=ko.observableArray(),this.selectedSnippet=ko.observable(),this.working=ko.observable(!0)}loadSnippets(){return __awaiter(this,void 0,void 0,(function*(){if(!this.snippetType)return;this.working(!0);const snippetsByType=yield this.styleService.getStyleByKey(this.snippetType);this.itemTemplate=this.getSnippetTypeTemplate(this.snippetType);const loadedSnippets=[];for(const it of Object.values(snippetsByType)){const item=it,subTheme=yield this.loadThemeForItem(item),styleItem=new styleItem_1.StyleItem(item,subTheme,this.snippetType),compiller=this.getStyleCompiler(subTheme);styleItem.stylesContent=yield compiller.compileCss(),styleItem.classNames=yield compiller.getClassNameByStyleKeyAsync(item.key),loadedSnippets.push(styleItem)}this.snippets(loadedSnippets),this.working(!1)}))}getSnippetTypeTemplate(snippetType){const group=this.styleGroups.find(item=>item.name===snippetType.replaceAll("/","_"));return group?group.selectorTemplate:""}loadThemeForItem(item){return __awaiter(this,void 0,void 0,(function*(){const parts=item.key.split("/"),isComponent="components"===parts[0];let styleKeys=this.getAllStyleKeys(item);if(isComponent&&"default"!==parts[2]){const defaultKey=`${parts[0]}/${parts[1]}/default`;try{const defaultItem=yield this.styleService.getStyleByKey(defaultKey),defaultKeys=this.getAllStyleKeys(defaultItem);styleKeys.push(...defaultKeys)}catch(ex){}}const itemTheme={};styleKeys=styleKeys.filter((item,index,source)=>source.indexOf(item)===index);for(const styleKey of styleKeys)try{const styleValue=yield this.styleService.getStyleByKey(styleKey);styleValue?this.mergeNestedObj(itemTheme,styleKey,styleValue):console.warn(`Style with key "${styleKey}" not found: `)}catch(ex){}return itemTheme}))}mergeNestedObj(source,path,value){const keys=path.split("/"),lastKey=keys.pop();keys.reduce((source,key)=>source[key]=source[key]||{},source)[lastKey]=value}getStyleCompiler(stylesConfig){return this.snippetStyleCompiler.setStyles(stylesConfig),this.snippetStyleCompiler}getAllStyleKeys(source){const result=[];if(Array.isArray(source))source.every(x=>result.push(...this.getAllStyleKeys(x)));else if("object"==typeof source){const propertyNames=Object.keys(source);for(const propertyName of propertyNames){const propertyValue=source[propertyName];propertyName.toLowerCase().endsWith("key")?result.push(propertyValue):"object"==typeof propertyValue&&result.push(...this.getAllStyleKeys(propertyValue))}}return result}selectSnippet(snippet){return __awaiter(this,void 0,void 0,(function*(){const current=this.selectedSnippet();current&&current.hasFocus(!1),snippet.hasFocus(!0),this.selectedSnippet(snippet),this.onSelect&&this.onSelect(snippet)}))}};__decorate([decorators_1.Param(),__metadata("design:type",String)],StyleVariationSelector.prototype,"snippetType",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],StyleVariationSelector.prototype,"onSelect",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],StyleVariationSelector.prototype,"loadSnippets",null),StyleVariationSelector=__decorate([decorators_1.Component({selector:"style-variation-selector",template:styleVariationSelector_html_1.default}),__metadata("design:paramtypes",[styleService_1.StyleService,Object,Array])],StyleVariationSelector),exports.StyleVariationSelector=StyleVariationSelector},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="editor">    \r\n    <div class="flex flex-column list">\r\n        \x3c!--ko if: $component.working()--\x3e\r\n        <spinner></spinner>\r\n        \x3c!--/ko--\x3e\r\n        <ul class="flex-item flex-item-grow list" data-bind="foreach: { data: snippets, as: \'snippet\' }, scrollable: {}">\r\n            <li class="list-item" data-bind="css: { selected: snippet.hasFocus }, click: $component.selectSnippet, event: { keydown: $component.keydown }, attr: { title: snippet.displayName }">\r\n                <style-snippet data-bind="itemTemplate: $parent.itemTemplate" params="{ snippetItem: snippet }"></style-snippet>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</div>'},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(301),exports),__exportStar(__webpack_require__(299),exports),__exportStar(__webpack_require__(300),exports),__exportStar(__webpack_require__(298),exports)},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.OptionSelectorEditor=void 0;const ko=__webpack_require__(0),optionSelectorEditor_html_1=__webpack_require__(977),decorators_1=__webpack_require__(2),consts_1=__webpack_require__(17);let OptionSelectorEditor=class{constructor(){this.optionItems=[],this.optionsItems=ko.observable(),this.initialValue=ko.observable(),this.selectedValue=ko.observable(),this.enteredValue=ko.observable(0),this.selected=ko.observable()}initialize(){return __awaiter(this,void 0,void 0,(function*(){this.optionsItems()&&this.optionItems.push(...this.optionsItems().split(","));const initValue=this.initialValue();0===initValue||initValue||this.initialValue("inherit");const optionItem=this.optionItems.find(item=>item===this.initialValue());optionItem?(this.selected("options"),this.selectedValue(optionItem)):this.enteredValue(this.initialValue()),this.selected.subscribe(this.applyChanges),this.selectedValue.subscribe(this.applyChanges),this.enteredValue.extend(consts_1.ChangeRateLimit).subscribe(this.applyChanges)}))}applyChanges(){let result;result="options"===this.selected()?this.selectedValue():this.enteredValue(),this.onChange(result)}};__decorate([decorators_1.Param(),__metadata("design:type",Function)],OptionSelectorEditor.prototype,"optionsItems",void 0),__decorate([decorators_1.Param(),__metadata("design:type",Function)],OptionSelectorEditor.prototype,"initialValue",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],OptionSelectorEditor.prototype,"onChange",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],OptionSelectorEditor.prototype,"initialize",null),OptionSelectorEditor=__decorate([decorators_1.Component({selector:"option-selector-editor",template:optionSelectorEditor_html_1.default}),__metadata("design:paramtypes",[])],OptionSelectorEditor),exports.OptionSelectorEditor=OptionSelectorEditor},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="editor">\r\n    <h1>Select value</h1>\r\n    <hr>\r\n\r\n    <div class="tabs" role="tablist">\r\n        <div class="tab" data-bind="css: { \'tab-is-active\': !selected() }, attr: { \'aria-selected\': !selected() }">\r\n            <a href="#" data-bind="click: selected.bind($data,undefined), focus: true" title="Numeric value" role="tab" aria-label="enter numeric value">\r\n                Enter\r\n            </a>\r\n        </div>\r\n        <div class="tab" data-bind="css: { \'tab-is-active\': selected() === \'options\' }, attr: { \'aria-selected\': selected() === \'options\' }">\r\n            <a href="#" data-bind="click: selected.bind($data,\'options\')" title="Predefined options" role="tab" aria-label="Predefined options">\r\n                Choose\r\n            </a>\r\n        </div>\r\n    </div>\r\n\r\n    \x3c!-- ko if: !selected() --\x3e\r\n    <div class="flex flex-column">\r\n        <div class="flex-item flex-item-grow" role="tabpanel">\r\n            <div class="form-group">\r\n                <input id="enteredValue" type="number" class="form-control" placeholder="0" min="0" max="1000" data-bind="textInput: enteredValue">\r\n            </div>\r\n        </div>\r\n    </div>\r\n    \x3c!-- /ko --\x3e\r\n\r\n    \x3c!-- ko if: selected() === \'options\' --\x3e\r\n    <div class="flex-item flex-item-grow add-block-container" role="tabpanel">\r\n        <div class="form-group">\r\n            <select id="valueStyle" class="form-control" data-bind="options: optionItems, value: selectedValue"></select>\r\n        </div>\r\n    </div>\r\n    \x3c!-- /ko --\x3e\r\n</div>'},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SizeEditor=void 0;const ko=__webpack_require__(0),sizeEditor_html_1=__webpack_require__(979),decorators_1=__webpack_require__(2),consts_1=__webpack_require__(17);let SizeEditor=class{constructor(){this.sizeConfig=ko.observable(),this.features="height,minMaxHeight,width,minMaxWidth",this.heightEnabled=ko.observable(),this.itemHeight=ko.observable(),this.widthEnabled=ko.observable(),this.itemWidth=ko.observable(),this.minMaxHeightEnabled=ko.observable(),this.minHeight=ko.observable(),this.maxHeight=ko.observable(),this.minMaxWidthEnabled=ko.observable(),this.minWidth=ko.observable(),this.maxWidth=ko.observable()}init(){const features=this.features.split(",");this.heightEnabled(features.includes("height")),this.minMaxHeightEnabled(features.includes("minMaxHeight")),this.widthEnabled(features.includes("width")),this.minMaxWidthEnabled(features.includes("minMaxWidth")),this.updateObservables(),this.sizeConfig.subscribe(this.updateObservables),this.itemHeight.extend(consts_1.ChangeRateLimit).subscribe(this.applyChanges),this.minHeight.extend(consts_1.ChangeRateLimit).subscribe(this.applyChanges),this.maxHeight.extend(consts_1.ChangeRateLimit).subscribe(this.applyChanges),this.itemWidth.extend(consts_1.ChangeRateLimit).subscribe(this.applyChanges),this.minWidth.extend(consts_1.ChangeRateLimit).subscribe(this.applyChanges),this.maxWidth.extend(consts_1.ChangeRateLimit).subscribe(this.applyChanges)}updateObservables(){const pluginConfig=this.sizeConfig();this.itemHeight(null==pluginConfig?void 0:pluginConfig.height),this.minHeight(null==pluginConfig?void 0:pluginConfig.minHeight),this.maxHeight(null==pluginConfig?void 0:pluginConfig.maxHeight),this.itemWidth(null==pluginConfig?void 0:pluginConfig.width),this.minWidth(null==pluginConfig?void 0:pluginConfig.minWidth),this.maxWidth(null==pluginConfig?void 0:pluginConfig.maxWidth)}applyChanges(){if(!this.onUpdate)return;const update={height:this.itemHeight(),minHeight:this.minHeight(),maxHeight:this.maxHeight(),width:this.itemWidth(),minWidth:this.minWidth(),maxWidth:this.maxWidth()};this.onUpdate(update)}};__decorate([decorators_1.Param(),__metadata("design:type",Function)],SizeEditor.prototype,"sizeConfig",void 0),__decorate([decorators_1.Param(),__metadata("design:type",String)],SizeEditor.prototype,"features",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],SizeEditor.prototype,"onUpdate",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],SizeEditor.prototype,"init",null),SizeEditor=__decorate([decorators_1.Component({selector:"size-editor",template:sizeEditor_html_1.default}),__metadata("design:paramtypes",[])],SizeEditor),exports.SizeEditor=SizeEditor},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div class="form-group form-group-collapsible">\r\n    <label class="form-label">\r\n        <a href="#" class="form-group-toggle" title="Toggle section" data-bind="collapse: \'#sizeCollapse\'"></a>\r\n        <b>Size</b>\r\n    </label>\r\n    <div id="sizeCollapse" class="collapse form-group-collapse">\r\n        \x3c!-- ko if: widthEnabled --\x3e\r\n        <div class="form-group">\r\n            <label for="itemWidth" class="form-label">Width (px)</label>\r\n            <input type="number" min="0" id="itemWidth" class="form-control" placeholder="(Not set)" data-bind="textInput: itemWidth">\r\n        </div>\r\n        \x3c!-- /ko --\x3e\r\n        \x3c!-- ko if: minMaxWidthEnabled --\x3e\r\n        <div class="form-group">\r\n            <label for="minWidth" class="form-label">Min width (px)</label>\r\n            <input type="number" min="0" id="minWidth" class="form-control" placeholder="(Not set)" data-bind="textInput: minWidth">\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="maxWidth" class="form-label">Max width (px)</label>\r\n            <input type="number" min="0" id="maxWidth" class="form-control" placeholder="(Not set)" data-bind="textInput: maxWidth">\r\n        </div>\r\n        \x3c!-- /ko --\x3e\r\n        \x3c!-- ko if: heightEnabled --\x3e\r\n        <div class="form-group">\r\n            <label for="itemHeight" class="form-label">Height (px)</label>\r\n            <input type="number" min="0" id="itemHeight" class="form-control" placeholder="(Not set)" data-bind="textInput: itemHeight">\r\n        </div>\r\n        \x3c!-- /ko --\x3e\r\n        \x3c!-- ko if: minMaxHeightEnabled --\x3e\r\n        <div class="form-group">\r\n            <label for="minHeight" class="form-label">Min height (px)</label>\r\n            <input type="number" min="0" id="minHeight" class="form-control" placeholder="(Not set)" data-bind="textInput: minHeight">\r\n        </div>\r\n        <div class="form-group">\r\n            <label for="maxHeight" class="form-label">Max height (px)</label>\r\n            <input type="number" min="0" id="maxHeight" class="form-control" placeholder="(Not set)" data-bind="textInput: maxHeight">\r\n        </div>\r\n        \x3c!-- /ko --\x3e\r\n    </div>\r\n</div>'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ProseMirrorModule=void 0;const prosemirrorHtmlEditor_1=__webpack_require__(981);exports.ProseMirrorModule=class{register(injector){injector.bind("htmlEditor",prosemirrorHtmlEditor_1.ProseMirrorHtmlEditor);injector.bind("htmlEditorFactory",(function(){return{createHtmlEditor:()=>injector.resolve("htmlEditor")}}))}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ProseMirrorHtmlEditor=void 0;const editing_1=__webpack_require__(66),prosemirror_model_1=__webpack_require__(1),prosemirror_state_1=__webpack_require__(3),prosemirror_view_1=__webpack_require__(982),prosemirror_commands_1=__webpack_require__(303),prosemirror_schema_list_1=__webpack_require__(304),prosemirror_history_1=__webpack_require__(308),prosemirror_keymap_1=__webpack_require__(1018),lists_1=__webpack_require__(983),keymap_1=__webpack_require__(984),schema_1=__webpack_require__(986);exports.ProseMirrorHtmlEditor=class{constructor(eventManager,styleCompiler,logger){this.eventManager=eventManager,this.styleCompiler=styleCompiler,this.logger=logger,this.eventManager.addEventListener("onEscape",this.detachFromElement.bind(this));const builder=new schema_1.SchemaBuilder;this.schema=builder.build()}getState(){let content;return content=this.editorView?this.editorView.state.toJSON().doc.content:this.content.content,this.proseMirrorModelToModel(content)}setState(content){content=this.modelToProseMirrorModel(content),this.content={type:"doc",content:content},this.node=this.schema.nodeFromJSON(this.content);const fragment=prosemirror_model_1.DOMSerializer.fromSchema(this.schema).serializeFragment(this.node);this.element.appendChild(fragment)}modelToProseMirrorModel(source){let result=JSON.stringify(source);return result=result.replaceAll("ordered-list","ordered_list").replaceAll("bulleted-list","bulleted_list").replaceAll("list-item","list_item").replaceAll('"nodes":','"content":'),JSON.parse(result)}proseMirrorModelToModel(source){let result=JSON.stringify(source);return result=result.replaceAll("ordered_list","ordered-list").replaceAll("bulleted_list","bulleted-list").replaceAll("list_item","list-item").replaceAll('"content":','"nodes":'),JSON.parse(result)}getSelectionState(){const state=this.editorView.state;let from=state.selection.from;const to=state.selection.to;from===to&&(from-=1);const selectionState=new editing_1.SelectionState,cursor=state.selection.$cursor||state.selection.$from;if(cursor){const path=cursor.path.filter(x=>x.type),currentBlock=path[path.length-1],blockType=currentBlock.type,typeName=blockType.name;selectionState.block=blockType.name,selectionState.orderedList=typeName.includes("ordered_list"),selectionState.bulletedList=typeName.includes("bulleted_list"),selectionState.italic=state.doc.rangeHasMark(from,to,this.schema.marks.italic),selectionState.bold=state.doc.rangeHasMark(from,to,this.schema.marks.bold),selectionState.underlined=state.doc.rangeHasMark(from,to,this.schema.marks.underlined),selectionState.highlighted=state.doc.rangeHasMark(from,to,this.schema.marks.highlighted),selectionState.striked=state.doc.rangeHasMark(from,to,this.schema.marks.striked),selectionState.code=state.doc.rangeHasMark(from,to,this.schema.marks.code),selectionState.colorKey=this.getColor(),currentBlock.attrs&&currentBlock.attrs.styles&&(currentBlock.attrs.styles.alignment&&(selectionState.alignment=currentBlock.attrs.styles.alignment),currentBlock.attrs.styles.appearance&&(selectionState.appearance=currentBlock.attrs.styles.appearance))}return selectionState}clearFormatting(){throw new Error("Not implemented")}insertText(text){throw new Error("Not implemented")}toggleBold(){prosemirror_commands_1.toggleMark(this.schema.marks.bold)(this.editorView.state,this.editorView.dispatch),this.editorView.focus()}toggleItalic(){prosemirror_commands_1.toggleMark(this.schema.marks.italic)(this.editorView.state,this.editorView.dispatch),this.editorView.focus()}toggleUnderlined(){prosemirror_commands_1.toggleMark(this.schema.marks.underlined)(this.editorView.state,this.editorView.dispatch),this.editorView.focus()}toggleHighlighted(){prosemirror_commands_1.toggleMark(this.schema.marks.highlighted)(this.editorView.state,this.editorView.dispatch),this.editorView.focus()}toggleStriked(){prosemirror_commands_1.toggleMark(this.schema.marks.striked)(this.editorView.state,this.editorView.dispatch),this.editorView.focus()}toggleCode(){prosemirror_commands_1.toggleMark(this.schema.marks.code)(this.editorView.state,this.editorView.dispatch),this.editorView.focus()}toggleOrderedList(){lists_1.wrapInList(this.schema.nodes.ordered_list)(this.editorView.state,this.editorView.dispatch),this.editorView.focus()}toggleUnorderedList(styleKey="globals/ul/default"){return __awaiter(this,void 0,void 0,(function*(){let attrs={};if(styleKey){const className=yield this.styleCompiler.getClassNameByStyleKeyAsync(styleKey);className&&(attrs={className:className,styles:{appearance:styleKey}})}lists_1.wrapInList(this.schema.nodes.bulleted_list,attrs)(this.editorView.state,this.editorView.dispatch),this.editorView.focus()}))}toggleParagraph(){this.setBlockTypeAndNotify(this.schema.nodes.paragraph)}toggleH1(){this.setBlockTypeAndNotify(this.schema.nodes.heading1)}toggleH2(){this.setBlockTypeAndNotify(this.schema.nodes.heading2)}toggleH3(){this.setBlockTypeAndNotify(this.schema.nodes.heading3)}toggleH4(){this.setBlockTypeAndNotify(this.schema.nodes.heading4)}toggleH5(){this.setBlockTypeAndNotify(this.schema.nodes.heading5)}toggleH6(){this.setBlockTypeAndNotify(this.schema.nodes.heading6)}toggleQuote(){this.setBlockTypeAndNotify(this.schema.nodes.quote)}toggleFormatted(){this.setBlockTypeAndNotify(this.schema.nodes.formatted)}toggleSize(){}updateMark(markType,markAttrs){if(!markAttrs)return;const state=this.editorView.state,tr=state.tr,doc=tr.doc,markLocation=!state.selection.empty&&state.selection||state.selection.$cursor&&this.getMarkLocation(doc,state.selection.$cursor.pos,markType);if(!markLocation)return;if(state.selection.empty){if(!doc.rangeHasMark(markLocation.from,markLocation.to,markType))return;tr.removeMark(markLocation.from,markLocation.to,markType)}const markItem=markType.create(markAttrs);this.editorView.dispatch(tr.addMark(markLocation.from,markLocation.to,markItem))}removeMark(markType){const state=this.editorView.state,markLocation=!state.selection.empty&&state.selection||this.getMarkLocation(state.tr.doc,state.selection.$cursor.pos,markType);markLocation&&this.editorView.dispatch(state.tr.removeMark(markLocation.from,markLocation.to,markType))}setColor(colorKey){const className=this.styleCompiler.getClassNameByColorKey(colorKey);this.updateMark(this.schema.marks.color,{colorKey:colorKey,colorClass:className})}getColor(){const mark=this.editorView.state.selection.$from.marks().find(x=>"color"===x.type.name);return mark?mark.attrs.colorKey:null}removeColor(){this.removeMark(this.schema.marks.color)}removeHyperlink(){this.removeMark(this.schema.marks.hyperlink)}setHyperlink(hyperlink){(hyperlink.href||hyperlink.targetKey)&&this.updateMark(this.schema.marks.hyperlink,hyperlink)}getMarkLocation(doc,pos,markType){const $pos=doc.resolve(pos),start=$pos.parent.childAfter($pos.parentOffset);if(!start.node)return null;const mark=start.node.marks.find(mark=>mark.type===markType);if(!mark)return null;let startIndex=$pos.index(),startPos=$pos.start()+start.offset;for(;startIndex>0&&mark.isInSet($pos.parent.child(startIndex-1).marks);)startIndex-=1,startPos-=$pos.parent.child(startIndex).nodeSize;let endIndex=$pos.indexAfter(),endPos=startPos+start.node.nodeSize;for(;endIndex<$pos.parent.childCount&&mark.isInSet($pos.parent.child(endIndex).marks);)endPos+=$pos.parent.child(endIndex).nodeSize,endIndex+=1;return{from:startPos,to:endPos}}getHyperlink(){const doc=this.editorView.state.tr.doc;if(this.editorView.state.selection.$cursor){const $pos=doc.resolve(this.editorView.state.selection.$cursor.pos),start=$pos.parent.childAfter($pos.parentOffset);if(!start.node)return null;const mark=start.node.marks.find(mark=>mark.type===this.schema.marks.hyperlink);return mark?mark.attrs:null}{const $pos=doc.resolve(this.editorView.state.selection.$from.pos),start=$pos.parent.childAfter($pos.parentOffset);if(!start.node)return null;const mark=start.node.marks.find(mark=>mark.type===this.schema.marks.hyperlink);return mark?mark.attrs:null}}setAnchor(hash,anchorKey){}removeAnchor(){}getSelectionText(){throw new Error("Not implemented")}resetToNormal(){}increaseIndent(){prosemirror_schema_list_1.sinkListItem(this.schema.nodes.list_item)}decreaseIndent(){prosemirror_schema_list_1.liftListItem(this.schema.nodes.list_item)}expandSelection(to){throw new Error("Not implemented")}setTextStyle(textStyleKey,viewport){this.updateTextStyle(textStyleKey,viewport)}updateTextStyle(textStyleKey,viewport="xs"){return __awaiter(this,void 0,void 0,(function*(){const cursor=this.editorView.state.selection.$cursor||this.editorView.state.selection.$from;if(!cursor)return;const path=cursor.path.filter(x=>x.type),currentBlock=path[path.length-1],blockType=currentBlock.type,blockStyle=currentBlock.attrs.styles||{};if(blockStyle.appearance=blockStyle.appearance||{},textStyleKey?blockStyle.appearance=textStyleKey:blockStyle.appearance&&delete blockStyle.appearance,prosemirror_commands_1.setBlockType(this.schema.nodes.paragraph)(this.editorView.state,this.editorView.dispatch),Object.keys(blockStyle).length>0){const className=yield this.styleCompiler.getClassNamesForLocalStylesAsync(blockStyle);prosemirror_commands_1.setBlockType(blockType,{styles:blockStyle,className:className})(this.editorView.state,this.editorView.dispatch)}else prosemirror_commands_1.setBlockType(blockType)(this.editorView.state,this.editorView.dispatch);this.editorView.focus(),this.eventManager.dispatchEvent("onSelectionChange",this)}))}setAlignment(styleKey,viewport="xs"){return __awaiter(this,void 0,void 0,(function*(){const cursor=this.editorView.state.selection.$cursor||this.editorView.state.selection.$from;if(!cursor)return;const path=cursor.path.filter(x=>x.type),currentBlock=path[path.length-1],blockType=currentBlock.type,blockStyle=currentBlock.attrs.styles||{};blockStyle.alignment=blockStyle.alignment||{},Object.assign(blockStyle.alignment,{[viewport]:styleKey});const className=yield this.styleCompiler.getClassNamesForLocalStylesAsync(blockStyle);prosemirror_commands_1.setBlockType(this.schema.nodes.paragraph)(this.editorView.state,this.editorView.dispatch),prosemirror_commands_1.setBlockType(blockType,{styles:blockStyle,className:className})(this.editorView.state,this.editorView.dispatch),this.editorView.focus(),this.eventManager.dispatchEvent("onSelectionChange",this)}))}alignLeft(viewport="xs"){this.setAlignment(editing_1.alignmentStyleKeys.left,viewport)}alignCenter(viewport="xs"){this.setAlignment(editing_1.alignmentStyleKeys.center,viewport)}alignRight(viewport="xs"){this.setAlignment(editing_1.alignmentStyleKeys.right,viewport)}justify(viewport="xs"){this.setAlignment(editing_1.alignmentStyleKeys.justify,viewport)}setCaretAtEndOf(node){}setCaretAt(clientX,clientY){}setBlockTypeAndNotify(blockType,attrs){prosemirror_commands_1.setBlockType(blockType,attrs)(this.editorView.state,this.editorView.dispatch),this.eventManager.dispatchEvent("onSelectionChange",this)}handleUpdates(view,prevState){this.eventManager.dispatchEvent("htmlEditorChanged",this);const state=view.state;prevState&&!prevState.doc.eq(state.doc)&&this.eventManager.dispatchEvent("onContentUpdate"),prevState&&!prevState.selection.eq(state.selection)&&this.eventManager.dispatchEvent("onSelectionChange",this)}enable(){if(this.editorView)return this.editorView.dom.contentEditable=!0,void this.eventManager.dispatchEvent(editing_1.HtmlEditorEvents.onSelectionChange);const doc=this.schema.nodeFromJSON(this.content),handleUpdates=this.handleUpdates.bind(this),plugins=[new prosemirror_state_1.Plugin({view:view=>({update:handleUpdates})})];this.editorView=new prosemirror_view_1.EditorView({mount:this.element},{state:prosemirror_state_1.EditorState.create({doc:doc,plugins:plugins.concat([prosemirror_keymap_1.keymap(keymap_1.buildKeymap(this.schema,null)),prosemirror_keymap_1.keymap(prosemirror_commands_1.baseKeymap),prosemirror_history_1.history()])})}),this.eventManager.dispatchEvent("htmlEditorChanged",this),this.eventManager.dispatchEvent(editing_1.HtmlEditorEvents.onSelectionChange)}disable(){this.editorView&&(this.editorView.dom.contentEditable=!1)}attachToElement(element){this.element=element}detachFromElement(){this.disable()}addSelectionChangeListener(callback){this.eventManager.addEventListener(editing_1.HtmlEditorEvents.onSelectionChange,callback)}removeSelectionChangeListener(callback){this.eventManager.removeEventListener(editing_1.HtmlEditorEvents.onSelectionChange,callback)}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Decoration",(function(){return Decoration})),__webpack_require__.d(__webpack_exports__,"DecorationSet",(function(){return DecorationSet})),__webpack_require__.d(__webpack_exports__,"EditorView",(function(){return EditorView})),__webpack_require__.d(__webpack_exports__,"__endComposition",(function(){return endComposition})),__webpack_require__.d(__webpack_exports__,"__parseFromClipboard",(function(){return parseFromClipboard})),__webpack_require__.d(__webpack_exports__,"__serializeForClipboard",(function(){return serializeForClipboard}));var prosemirror_state__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3),prosemirror_model__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),prosemirror_transform__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5),result={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var ie_edge=/Edge\/(\d+)/.exec(navigator.userAgent),ie_upto10=/MSIE \d/.test(navigator.userAgent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);result.mac=/Mac/.test(navigator.platform);var ie=result.ie=!!(ie_upto10||ie_11up||ie_edge);result.ie_version=ie_upto10?document.documentMode||6:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:null,result.gecko=!ie&&/gecko\/(\d+)/i.test(navigator.userAgent),result.gecko_version=result.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var chrome=!ie&&/Chrome\/(\d+)/.exec(navigator.userAgent);result.chrome=!!chrome,result.chrome_version=chrome&&+chrome[1],result.ios=!ie&&/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),result.android=/Android \d/.test(navigator.userAgent),result.webkit="webkitFontSmoothing"in document.documentElement.style,result.safari=/Apple Computer/.test(navigator.vendor),result.webkit_version=result.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var domIndex=function(node){for(var index=0;;index++)if(!(node=node.previousSibling))return index},parentNode=function(node){var parent=node.parentNode;return parent&&11==parent.nodeType?parent.host:parent},reusedRange=null,textRange=function(node,from,to){var range=reusedRange||(reusedRange=document.createRange());return range.setEnd(node,null==to?node.nodeValue.length:to),range.setStart(node,from||0),range},isEquivalentPosition=function(node,off,targetNode,targetOff){return targetNode&&(scanFor(node,off,targetNode,targetOff,-1)||scanFor(node,off,targetNode,targetOff,1))},atomElements=/^(img|br|input|textarea|hr)$/i;function scanFor(node,off,targetNode,targetOff,dir){for(;;){if(node==targetNode&&off==targetOff)return!0;if(off==(dir<0?0:nodeSize(node))){var parent=node.parentNode;if(1!=parent.nodeType||hasBlockDesc(node)||atomElements.test(node.nodeName)||"false"==node.contentEditable)return!1;off=domIndex(node)+(dir<0?0:1),node=parent}else{if(1!=node.nodeType)return!1;if("false"==(node=node.childNodes[off+(dir<0?-1:0)]).contentEditable)return!1;off=dir<0?nodeSize(node):0}}}function nodeSize(node){return 3==node.nodeType?node.nodeValue.length:node.childNodes.length}function hasBlockDesc(dom){for(var desc,cur=dom;cur&&!(desc=cur.pmViewDesc);cur=cur.parentNode);return desc&&desc.node&&desc.node.isBlock&&(desc.dom==dom||desc.contentDOM==dom)}var selectionCollapsed=function(domSel){var collapsed=domSel.isCollapsed;return collapsed&&result.chrome&&domSel.rangeCount&&!domSel.getRangeAt(0).collapsed&&(collapsed=!1),collapsed};function keyEvent(keyCode,key){var event=document.createEvent("Event");return event.initEvent("keydown",!0,!0),event.keyCode=keyCode,event.key=event.code=key,event}function windowRect(doc){return{left:0,right:doc.documentElement.clientWidth,top:0,bottom:doc.documentElement.clientHeight}}function getSide(value,side){return"number"==typeof value?value:value[side]}function clientRect(node){var rect=node.getBoundingClientRect();return{left:rect.left,right:rect.left+node.clientWidth,top:rect.top,bottom:rect.top+node.clientHeight}}function scrollRectIntoView(view,rect,startDOM){for(var scrollThreshold=view.someProp("scrollThreshold")||0,scrollMargin=view.someProp("scrollMargin")||5,doc=view.dom.ownerDocument,parent=startDOM||view.dom;parent;parent=parentNode(parent))if(1==parent.nodeType){var atTop=parent==doc.body||1!=parent.nodeType,bounding=atTop?windowRect(doc):clientRect(parent),moveX=0,moveY=0;if(rect.top<bounding.top+getSide(scrollThreshold,"top")?moveY=-(bounding.top-rect.top+getSide(scrollMargin,"top")):rect.bottom>bounding.bottom-getSide(scrollThreshold,"bottom")&&(moveY=rect.bottom-bounding.bottom+getSide(scrollMargin,"bottom")),rect.left<bounding.left+getSide(scrollThreshold,"left")?moveX=-(bounding.left-rect.left+getSide(scrollMargin,"left")):rect.right>bounding.right-getSide(scrollThreshold,"right")&&(moveX=rect.right-bounding.right+getSide(scrollMargin,"right")),moveX||moveY)if(atTop)doc.defaultView.scrollBy(moveX,moveY);else{var startX=parent.scrollLeft,startY=parent.scrollTop;moveY&&(parent.scrollTop+=moveY),moveX&&(parent.scrollLeft+=moveX);var dX=parent.scrollLeft-startX,dY=parent.scrollTop-startY;rect={left:rect.left-dX,top:rect.top-dY,right:rect.right-dX,bottom:rect.bottom-dY}}if(atTop)break}}function scrollStack(dom){for(var stack=[],doc=dom.ownerDocument;dom&&(stack.push({dom:dom,top:dom.scrollTop,left:dom.scrollLeft}),dom!=doc);dom=parentNode(dom));return stack}function restoreScrollStack(stack,dTop){for(var i=0;i<stack.length;i++){var ref=stack[i],dom=ref.dom,top=ref.top,left=ref.left;dom.scrollTop!=top+dTop&&(dom.scrollTop=top+dTop),dom.scrollLeft!=left&&(dom.scrollLeft=left)}}var preventScrollSupported=null;function findOffsetInNode(node,coords){for(var closest,coordsClosest,dxClosest=2e8,offset=0,rowBot=coords.top,rowTop=coords.top,child=node.firstChild,childIndex=0;child;child=child.nextSibling,childIndex++){var rects=void 0;if(1==child.nodeType)rects=child.getClientRects();else{if(3!=child.nodeType)continue;rects=textRange(child).getClientRects()}for(var i=0;i<rects.length;i++){var rect=rects[i];if(rect.top<=rowBot&&rect.bottom>=rowTop){rowBot=Math.max(rect.bottom,rowBot),rowTop=Math.min(rect.top,rowTop);var dx=rect.left>coords.left?rect.left-coords.left:rect.right<coords.left?coords.left-rect.right:0;if(dx<dxClosest){closest=child,dxClosest=dx,coordsClosest=dx&&3==closest.nodeType?{left:rect.right<coords.left?rect.right:rect.left,top:coords.top}:coords,1==child.nodeType&&dx&&(offset=childIndex+(coords.left>=(rect.left+rect.right)/2?1:0));continue}}!closest&&(coords.left>=rect.right&&coords.top>=rect.top||coords.left>=rect.left&&coords.top>=rect.bottom)&&(offset=childIndex+1)}}return closest&&3==closest.nodeType?function(node,coords){for(var len=node.nodeValue.length,range=document.createRange(),i=0;i<len;i++){range.setEnd(node,i+1),range.setStart(node,i);var rect=singleRect(range,1);if(rect.top!=rect.bottom&&inRect(coords,rect))return{node:node,offset:i+(coords.left>=(rect.left+rect.right)/2?1:0)}}return{node:node,offset:0}}(closest,coordsClosest):!closest||dxClosest&&1==closest.nodeType?{node:node,offset:offset}:findOffsetInNode(closest,coordsClosest)}function inRect(coords,rect){return coords.left>=rect.left-1&&coords.left<=rect.right+1&&coords.top>=rect.top-1&&coords.top<=rect.bottom+1}function posAtCoords(view,coords){var assign,assign$1,node,offset,root=view.root;if(root.caretPositionFromPoint)try{var pos$1=root.caretPositionFromPoint(coords.left,coords.top);pos$1&&(node=(assign=pos$1).offsetNode,offset=assign.offset)}catch(_){}if(!node&&root.caretRangeFromPoint){var range=root.caretRangeFromPoint(coords.left,coords.top);range&&(node=(assign$1=range).startContainer,offset=assign$1.startOffset)}var pos,elt=root.elementFromPoint(coords.left,coords.top+1);if(!elt||!view.dom.contains(1!=elt.nodeType?elt.parentNode:elt)){var box=view.dom.getBoundingClientRect();if(!inRect(coords,box))return null;if(!(elt=function elementFromPoint(element,coords,box){var len=element.childNodes.length;if(len&&box.top<box.bottom)for(var startI=Math.max(0,Math.min(len-1,Math.floor(len*(coords.top-box.top)/(box.bottom-box.top))-2)),i=startI;;){var child=element.childNodes[i];if(1==child.nodeType)for(var rects=child.getClientRects(),j=0;j<rects.length;j++){var rect=rects[j];if(inRect(coords,rect))return elementFromPoint(child,coords,rect)}if((i=(i+1)%len)==startI)break}return element}(view.dom,coords,box)))return null}if(result.safari&&elt.draggable&&(node=offset=null),elt=function(dom,coords){var parent=dom.parentNode;return parent&&/^li$/i.test(parent.nodeName)&&coords.left<dom.getBoundingClientRect().left?parent:dom}(elt,coords),node){if(result.gecko&&1==node.nodeType&&(offset=Math.min(offset,node.childNodes.length))<node.childNodes.length){var box$1,next=node.childNodes[offset];"IMG"==next.nodeName&&(box$1=next.getBoundingClientRect()).right<=coords.left&&box$1.bottom>coords.top&&offset++}node==view.dom&&offset==node.childNodes.length-1&&1==node.lastChild.nodeType&&coords.top>node.lastChild.getBoundingClientRect().bottom?pos=view.state.doc.content.size:0!=offset&&1==node.nodeType&&"BR"==node.childNodes[offset-1].nodeName||(pos=function(view,node,offset,coords){for(var outside=-1,cur=node;cur!=view.dom;){var desc=view.docView.nearestDesc(cur,!0);if(!desc)return null;if(desc.node.isBlock&&desc.parent){var rect=desc.dom.getBoundingClientRect();if(rect.left>coords.left||rect.top>coords.top)outside=desc.posBefore;else{if(!(rect.right<coords.left||rect.bottom<coords.top))break;outside=desc.posAfter}}cur=desc.dom.parentNode}return outside>-1?outside:view.docView.posFromDOM(node,offset)}(view,node,offset,coords))}null==pos&&(pos=function(view,elt,coords){var ref=findOffsetInNode(elt,coords),node=ref.node,offset=ref.offset,bias=-1;if(1==node.nodeType&&!node.firstChild){var rect=node.getBoundingClientRect();bias=rect.left!=rect.right&&coords.left>(rect.left+rect.right)/2?1:-1}return view.docView.posFromDOM(node,offset,bias)}(view,elt,coords));var desc=view.docView.nearestDesc(elt,!0);return{pos:pos,inside:desc?desc.posAtStart-desc.border:-1}}function singleRect(object,bias){var rects=object.getClientRects();return rects.length?rects[bias<0?0:rects.length-1]:object.getBoundingClientRect()}var BIDI=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function coordsAtPos(view,pos,side){var ref=view.docView.domFromPos(pos),node=ref.node,offset=ref.offset,$pos=view.state.doc.resolve(pos),inline=$pos.parent.inlineContent,supportEmptyRange=result.webkit||result.gecko;if(3==node.nodeType&&supportEmptyRange&&BIDI.test(node.nodeValue)){var rect=singleRect(textRange(node,offset,offset),side);if(result.gecko&&offset&&/\s/.test(node.nodeValue[offset-1])&&offset<node.nodeValue.length){var rectBefore=singleRect(textRange(node,offset-1,offset-1),-1);if(rectBefore.top==rect.top){var rectAfter=singleRect(textRange(node,offset,offset+1),-1);if(rectAfter.top!=rect.top)return flattenV(rectAfter,rectAfter.left<rectBefore.left)}}return rect}if(inline){for(var parent=$pos.depth?view.docView.domAfterPos($pos.before()):view.dom;side<0&&!offset&&node!=parent;)offset=domIndex(node),node=node.parentNode;for(;side>=0&&offset==nodeSize(node)&&node!=parent;)offset=domIndex(node)+1,node=node.parentNode}if(3==node.nodeType)return side<0?flattenV(singleRect(textRange(node,offset-1,offset),1),!1):flattenV(singleRect(textRange(node,offset,offset+1),-1),!0);if(!inline){if(offset&&(side<0||offset==nodeSize(node))){var before=node.childNodes[offset-1];if(1==before.nodeType)return flattenH(before.getBoundingClientRect(),!1)}if(offset<nodeSize(node)){var after=node.childNodes[offset];if(1==after.nodeType)return flattenH(after.getBoundingClientRect(),!0)}return flattenH(node.getBoundingClientRect(),side>=0)}if(offset&&(side<0||offset==nodeSize(node))){var before$1=node.childNodes[offset-1],target=3==before$1.nodeType?textRange(before$1,nodeSize(before$1)-(supportEmptyRange?0:1)):1==before$1.nodeType&&"BR"!=before$1.nodeName?before$1:null;if(target)return flattenV(singleRect(target,1),!1)}if(offset<nodeSize(node)){var after$1=node.childNodes[offset],target$1=3==after$1.nodeType?textRange(after$1,0,supportEmptyRange?0:1):1==after$1.nodeType?after$1:null;if(target$1)return flattenV(singleRect(target$1,-1),!0)}return flattenV(singleRect(3==node.nodeType?textRange(node):node,-side),side>=0)}function flattenV(rect,left){if(0==rect.width)return rect;var x=left?rect.left:rect.right;return{top:rect.top,bottom:rect.bottom,left:x,right:x}}function flattenH(rect,top){if(0==rect.height)return rect;var y=top?rect.top:rect.bottom;return{top:y,bottom:y,left:rect.left,right:rect.right}}function withFlushedState(view,state,f){var viewState=view.state,active=view.root.activeElement;viewState!=state&&view.updateState(state),active!=view.dom&&view.focus();try{return f()}finally{viewState!=state&&view.updateState(viewState),active!=view.dom&&active&&active.focus()}}var maybeRTL=/[\u0590-\u08ac]/;var cachedState=null,cachedDir=null,cachedResult=!1;function endOfTextblock(view,state,dir){return cachedState==state&&cachedDir==dir?cachedResult:(cachedState=state,cachedDir=dir,cachedResult="up"==dir||"down"==dir?function(view,state,dir){var sel=state.selection,$pos="up"==dir?sel.$anchor.min(sel.$head):sel.$anchor.max(sel.$head);return withFlushedState(view,state,(function(){for(var dom=view.docView.domFromPos($pos.pos).node;;){var nearest=view.docView.nearestDesc(dom,!0);if(!nearest)break;if(nearest.node.isBlock){dom=nearest.dom;break}dom=nearest.dom.parentNode}for(var coords=coordsAtPos(view,$pos.pos,1),child=dom.firstChild;child;child=child.nextSibling){var boxes=void 0;if(1==child.nodeType)boxes=child.getClientRects();else{if(3!=child.nodeType)continue;boxes=textRange(child,0,child.nodeValue.length).getClientRects()}for(var i=0;i<boxes.length;i++){var box=boxes[i];if(box.bottom>box.top&&("up"==dir?box.bottom<coords.top+1:box.top>coords.bottom-1))return!1}}return!0}))}(view,state,dir):function(view,state,dir){var $head=state.selection.$head;if(!$head.parent.isTextblock)return!1;var offset=$head.parentOffset,atStart=!offset,atEnd=offset==$head.parent.content.size,sel=getSelection();return maybeRTL.test($head.parent.textContent)&&sel.modify?withFlushedState(view,state,(function(){var oldRange=sel.getRangeAt(0),oldNode=sel.focusNode,oldOff=sel.focusOffset,oldBidiLevel=sel.caretBidiLevel;sel.modify("move",dir,"character");var result=!($head.depth?view.docView.domAfterPos($head.before()):view.dom).contains(1==sel.focusNode.nodeType?sel.focusNode:sel.focusNode.parentNode)||oldNode==sel.focusNode&&oldOff==sel.focusOffset;return sel.removeAllRanges(),sel.addRange(oldRange),null!=oldBidiLevel&&(sel.caretBidiLevel=oldBidiLevel),result})):"left"==dir||"backward"==dir?atStart:atEnd}(view,state,dir))}var ViewDesc=function(parent,children,dom,contentDOM){this.parent=parent,this.children=children,this.dom=dom,dom.pmViewDesc=this,this.contentDOM=contentDOM,this.dirty=0},prototypeAccessors={beforePosition:{configurable:!0},size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0}};ViewDesc.prototype.matchesWidget=function(){return!1},ViewDesc.prototype.matchesMark=function(){return!1},ViewDesc.prototype.matchesNode=function(){return!1},ViewDesc.prototype.matchesHack=function(){return!1},prototypeAccessors.beforePosition.get=function(){return!1},ViewDesc.prototype.parseRule=function(){return null},ViewDesc.prototype.stopEvent=function(){return!1},prototypeAccessors.size.get=function(){for(var size=0,i=0;i<this.children.length;i++)size+=this.children[i].size;return size},prototypeAccessors.border.get=function(){return 0},ViewDesc.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var i=0;i<this.children.length;i++)this.children[i].destroy()},ViewDesc.prototype.posBeforeChild=function(child){for(var i=0,pos=this.posAtStart;i<this.children.length;i++){var cur=this.children[i];if(cur==child)return pos;pos+=cur.size}},prototypeAccessors.posBefore.get=function(){return this.parent.posBeforeChild(this)},prototypeAccessors.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},prototypeAccessors.posAfter.get=function(){return this.posBefore+this.size},prototypeAccessors.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},ViewDesc.prototype.localPosFromDOM=function(dom,offset,bias){if(this.contentDOM&&this.contentDOM.contains(1==dom.nodeType?dom:dom.parentNode)){if(bias<0){var domBefore,desc;if(dom==this.contentDOM)domBefore=dom.childNodes[offset-1];else{for(;dom.parentNode!=this.contentDOM;)dom=dom.parentNode;domBefore=dom.previousSibling}for(;domBefore&&(!(desc=domBefore.pmViewDesc)||desc.parent!=this);)domBefore=domBefore.previousSibling;return domBefore?this.posBeforeChild(desc)+desc.size:this.posAtStart}var domAfter,desc$1;if(dom==this.contentDOM)domAfter=dom.childNodes[offset];else{for(;dom.parentNode!=this.contentDOM;)dom=dom.parentNode;domAfter=dom.nextSibling}for(;domAfter&&(!(desc$1=domAfter.pmViewDesc)||desc$1.parent!=this);)domAfter=domAfter.nextSibling;return domAfter?this.posBeforeChild(desc$1):this.posAtEnd}var atEnd;if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))atEnd=2&dom.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==offset)for(var search=dom;;search=search.parentNode){if(search==this.dom){atEnd=!1;break}if(search.parentNode.firstChild!=search)break}if(null==atEnd&&offset==dom.childNodes.length)for(var search$1=dom;;search$1=search$1.parentNode){if(search$1==this.dom){atEnd=!0;break}if(search$1.parentNode.lastChild!=search$1)break}}return(null==atEnd?bias>0:atEnd)?this.posAtEnd:this.posAtStart},ViewDesc.prototype.nearestDesc=function(dom,onlyNodes){for(var first=!0,cur=dom;cur;cur=cur.parentNode){var desc=this.getDesc(cur);if(desc&&(!onlyNodes||desc.node)){if(!first||!desc.nodeDOM||(1==desc.nodeDOM.nodeType?desc.nodeDOM.contains(1==dom.nodeType?dom:dom.parentNode):desc.nodeDOM==dom))return desc;first=!1}}},ViewDesc.prototype.getDesc=function(dom){for(var desc=dom.pmViewDesc,cur=desc;cur;cur=cur.parent)if(cur==this)return desc},ViewDesc.prototype.posFromDOM=function(dom,offset,bias){for(var scan=dom;scan;scan=scan.parentNode){var desc=this.getDesc(scan);if(desc)return desc.localPosFromDOM(dom,offset,bias)}return-1},ViewDesc.prototype.descAt=function(pos){for(var i=0,offset=0;i<this.children.length;i++){var child=this.children[i],end=offset+child.size;if(offset==pos&&end!=offset){for(;!child.border&&child.children.length;)child=child.children[0];return child}if(pos<end)return child.descAt(pos-offset-child.border);offset=end}},ViewDesc.prototype.domFromPos=function(pos){if(!this.contentDOM)return{node:this.dom,offset:0};for(var offset=0,i=0;;i++){if(offset==pos){for(;i<this.children.length&&(this.children[i].beforePosition||this.children[i].dom.parentNode!=this.contentDOM);)i++;return{node:this.contentDOM,offset:i==this.children.length?this.contentDOM.childNodes.length:domIndex(this.children[i].dom)}}if(i==this.children.length)throw new Error("Invalid position "+pos);var child=this.children[i],end=offset+child.size;if(pos<end)return child.domFromPos(pos-offset-child.border);offset=end}},ViewDesc.prototype.parseRange=function(from,to,base){if(void 0===base&&(base=0),0==this.children.length)return{node:this.contentDOM,from:from,to:to,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var fromOffset=-1,toOffset=-1,offset=base,i=0;;i++){var child=this.children[i],end=offset+child.size;if(-1==fromOffset&&from<=end){var childBase=offset+child.border;if(from>=childBase&&to<=end-child.border&&child.node&&child.contentDOM&&this.contentDOM.contains(child.contentDOM))return child.parseRange(from,to,childBase);from=offset;for(var j=i;j>0;j--){var prev=this.children[j-1];if(prev.size&&prev.dom.parentNode==this.contentDOM&&!prev.emptyChildAt(1)){fromOffset=domIndex(prev.dom)+1;break}from-=prev.size}-1==fromOffset&&(fromOffset=0)}if(fromOffset>-1&&(end>to||i==this.children.length-1)){to=end;for(var j$1=i+1;j$1<this.children.length;j$1++){var next=this.children[j$1];if(next.size&&next.dom.parentNode==this.contentDOM&&!next.emptyChildAt(-1)){toOffset=domIndex(next.dom);break}to+=next.size}-1==toOffset&&(toOffset=this.contentDOM.childNodes.length);break}offset=end}return{node:this.contentDOM,from:from,to:to,fromOffset:fromOffset,toOffset:toOffset}},ViewDesc.prototype.emptyChildAt=function(side){if(this.border||!this.contentDOM||!this.children.length)return!1;var child=this.children[side<0?0:this.children.length-1];return 0==child.size||child.emptyChildAt(side)},ViewDesc.prototype.domAfterPos=function(pos){var ref=this.domFromPos(pos),node=ref.node,offset=ref.offset;if(1!=node.nodeType||offset==node.childNodes.length)throw new RangeError("No node after pos "+pos);return node.childNodes[offset]},ViewDesc.prototype.setSelection=function(anchor,head,root,force){for(var from=Math.min(anchor,head),to=Math.max(anchor,head),i=0,offset=0;i<this.children.length;i++){var child=this.children[i],end=offset+child.size;if(from>offset&&to<end)return child.setSelection(anchor-offset-child.border,head-offset-child.border,root,force);offset=end}var anchorDOM=this.domFromPos(anchor),headDOM=this.domFromPos(head),domSel=root.getSelection(),brKludge=!1;if((result.gecko||result.safari)&&anchor==head){var prev=anchorDOM.node.childNodes[anchorDOM.offset-1];brKludge=prev&&("BR"==prev.nodeName||"false"==prev.contentEditable)}if(force||brKludge&&result.safari||!isEquivalentPosition(anchorDOM.node,anchorDOM.offset,domSel.anchorNode,domSel.anchorOffset)||!isEquivalentPosition(headDOM.node,headDOM.offset,domSel.focusNode,domSel.focusOffset)){var domSelExtended=!1;if((domSel.extend||anchor==head)&&!brKludge){domSel.collapse(anchorDOM.node,anchorDOM.offset);try{anchor!=head&&domSel.extend(headDOM.node,headDOM.offset),domSelExtended=!0}catch(err){if(!(err instanceof DOMException))throw err}}if(!domSelExtended){if(anchor>head){var tmp=anchorDOM;anchorDOM=headDOM,headDOM=tmp}var range=document.createRange();range.setEnd(headDOM.node,headDOM.offset),range.setStart(anchorDOM.node,anchorDOM.offset),domSel.removeAllRanges(),domSel.addRange(range)}}},ViewDesc.prototype.ignoreMutation=function(mutation){return!this.contentDOM&&"selection"!=mutation.type},prototypeAccessors.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},ViewDesc.prototype.markDirty=function(from,to){for(var offset=0,i=0;i<this.children.length;i++){var child=this.children[i],end=offset+child.size;if(offset==end?from<=end&&to>=offset:from<end&&to>offset){var startInside=offset+child.border,endInside=end-child.border;if(from>=startInside&&to<=endInside)return this.dirty=from==offset||to==end?2:1,void(from!=startInside||to!=endInside||!child.contentLost&&child.dom.parentNode==this.contentDOM?child.markDirty(from-startInside,to-startInside):child.dirty=3);child.dirty=3}offset=end}this.dirty=2},ViewDesc.prototype.markParentsDirty=function(){for(var level=1,node=this.parent;node;node=node.parent,level++){var dirty=1==level?2:1;node.dirty<dirty&&(node.dirty=dirty)}},Object.defineProperties(ViewDesc.prototype,prototypeAccessors);var nothing=[],WidgetViewDesc=function(ViewDesc){function WidgetViewDesc(parent,widget,view,pos){var self,dom=widget.type.toDOM;if("function"==typeof dom&&(dom=dom(view,(function(){return self?self.parent?self.parent.posBeforeChild(self):void 0:pos}))),!widget.type.spec.raw){if(1!=dom.nodeType){var wrap=document.createElement("span");wrap.appendChild(dom),dom=wrap}dom.contentEditable=!1,dom.classList.add("ProseMirror-widget")}ViewDesc.call(this,parent,nothing,dom,null),this.widget=widget,self=this}ViewDesc&&(WidgetViewDesc.__proto__=ViewDesc),WidgetViewDesc.prototype=Object.create(ViewDesc&&ViewDesc.prototype),WidgetViewDesc.prototype.constructor=WidgetViewDesc;var prototypeAccessors$1={beforePosition:{configurable:!0}};return prototypeAccessors$1.beforePosition.get=function(){return this.widget.type.side<0},WidgetViewDesc.prototype.matchesWidget=function(widget){return 0==this.dirty&&widget.type.eq(this.widget.type)},WidgetViewDesc.prototype.parseRule=function(){return{ignore:!0}},WidgetViewDesc.prototype.stopEvent=function(event){var stop=this.widget.spec.stopEvent;return!!stop&&stop(event)},WidgetViewDesc.prototype.ignoreMutation=function(mutation){return"selection"!=mutation.type||this.widget.spec.ignoreSelection},Object.defineProperties(WidgetViewDesc.prototype,prototypeAccessors$1),WidgetViewDesc}(ViewDesc),CompositionViewDesc=function(ViewDesc){function CompositionViewDesc(parent,dom,textDOM,text){ViewDesc.call(this,parent,nothing,dom,null),this.textDOM=textDOM,this.text=text}ViewDesc&&(CompositionViewDesc.__proto__=ViewDesc),CompositionViewDesc.prototype=Object.create(ViewDesc&&ViewDesc.prototype),CompositionViewDesc.prototype.constructor=CompositionViewDesc;var prototypeAccessors$2={size:{configurable:!0}};return prototypeAccessors$2.size.get=function(){return this.text.length},CompositionViewDesc.prototype.localPosFromDOM=function(dom,offset){return dom!=this.textDOM?this.posAtStart+(offset?this.size:0):this.posAtStart+offset},CompositionViewDesc.prototype.domFromPos=function(pos){return{node:this.textDOM,offset:pos}},CompositionViewDesc.prototype.ignoreMutation=function(mut){return"characterData"===mut.type&&mut.target.nodeValue==mut.oldValue},Object.defineProperties(CompositionViewDesc.prototype,prototypeAccessors$2),CompositionViewDesc}(ViewDesc),MarkViewDesc=function(ViewDesc){function MarkViewDesc(parent,mark,dom,contentDOM){ViewDesc.call(this,parent,[],dom,contentDOM),this.mark=mark}return ViewDesc&&(MarkViewDesc.__proto__=ViewDesc),MarkViewDesc.prototype=Object.create(ViewDesc&&ViewDesc.prototype),MarkViewDesc.prototype.constructor=MarkViewDesc,MarkViewDesc.create=function(parent,mark,inline,view){var custom=view.nodeViews[mark.type.name],spec=custom&&custom(mark,view,inline);return spec&&spec.dom||(spec=prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.DOMSerializer.renderSpec(document,mark.type.spec.toDOM(mark,inline))),new MarkViewDesc(parent,mark,spec.dom,spec.contentDOM||spec.dom)},MarkViewDesc.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},MarkViewDesc.prototype.matchesMark=function(mark){return 3!=this.dirty&&this.mark.eq(mark)},MarkViewDesc.prototype.markDirty=function(from,to){if(ViewDesc.prototype.markDirty.call(this,from,to),0!=this.dirty){for(var parent=this.parent;!parent.node;)parent=parent.parent;parent.dirty<this.dirty&&(parent.dirty=this.dirty),this.dirty=0}},MarkViewDesc.prototype.slice=function(from,to,view){var copy=MarkViewDesc.create(this.parent,this.mark,!0,view),nodes=this.children,size=this.size;to<size&&(nodes=replaceNodes(nodes,to,size,view)),from>0&&(nodes=replaceNodes(nodes,0,from,view));for(var i=0;i<nodes.length;i++)nodes[i].parent=copy;return copy.children=nodes,copy},MarkViewDesc}(ViewDesc),NodeViewDesc=function(ViewDesc){function NodeViewDesc(parent,node,outerDeco,innerDeco,dom,contentDOM,nodeDOM,view,pos){ViewDesc.call(this,parent,node.isLeaf?nothing:[],dom,contentDOM),this.nodeDOM=nodeDOM,this.node=node,this.outerDeco=outerDeco,this.innerDeco=innerDeco,contentDOM&&this.updateChildren(view,pos)}ViewDesc&&(NodeViewDesc.__proto__=ViewDesc),NodeViewDesc.prototype=Object.create(ViewDesc&&ViewDesc.prototype),NodeViewDesc.prototype.constructor=NodeViewDesc;var prototypeAccessors$3={size:{configurable:!0},border:{configurable:!0}};return NodeViewDesc.create=function(parent,node,outerDeco,innerDeco,view,pos){var assign,descObj,custom=view.nodeViews[node.type.name],spec=custom&&custom(node,view,(function(){return descObj?descObj.parent?descObj.parent.posBeforeChild(descObj):void 0:pos}),outerDeco),dom=spec&&spec.dom,contentDOM=spec&&spec.contentDOM;if(node.isText)if(dom){if(3!=dom.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else dom=document.createTextNode(node.text);else dom||(dom=(assign=prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.DOMSerializer.renderSpec(document,node.type.spec.toDOM(node))).dom,contentDOM=assign.contentDOM);contentDOM||node.isText||"BR"==dom.nodeName||(dom.hasAttribute("contenteditable")||(dom.contentEditable=!1),node.type.spec.draggable&&(dom.draggable=!0));var nodeDOM=dom;return dom=applyOuterDeco(dom,outerDeco,node),spec?descObj=new CustomNodeViewDesc(parent,node,outerDeco,innerDeco,dom,contentDOM,nodeDOM,spec,view,pos+1):node.isText?new TextViewDesc(parent,node,outerDeco,innerDeco,dom,nodeDOM,view):new NodeViewDesc(parent,node,outerDeco,innerDeco,dom,contentDOM,nodeDOM,view,pos+1)},NodeViewDesc.prototype.parseRule=function(){var this$1=this;if(this.node.type.spec.reparseInView)return null;var rule={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(rule.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?rule.contentElement=this.contentDOM:rule.getContent=function(){return this$1.contentDOM?prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.empty:this$1.node.content},rule},NodeViewDesc.prototype.matchesNode=function(node,outerDeco,innerDeco){return 0==this.dirty&&node.eq(this.node)&&sameOuterDeco(outerDeco,this.outerDeco)&&innerDeco.eq(this.innerDeco)},prototypeAccessors$3.size.get=function(){return this.node.nodeSize},prototypeAccessors$3.border.get=function(){return this.node.isLeaf?0:1},NodeViewDesc.prototype.updateChildren=function(view,pos){var this$1=this,inline=this.node.inlineContent,off=pos,composition=inline&&view.composing&&this.localCompositionNode(view,pos),updater=new ViewTreeUpdater(this,composition&&composition.node);!function(parent,deco,onWidget,onNode){var locals=deco.locals(parent),offset=0;if(0==locals.length){for(var i=0;i<parent.childCount;i++){var child=parent.child(i);onNode(child,locals,deco.forChild(offset,child),i),offset+=child.nodeSize}return}for(var decoIndex=0,active=[],restNode=null,parentIndex=0;;){if(decoIndex<locals.length&&locals[decoIndex].to==offset){for(var widget=locals[decoIndex++],widgets=void 0;decoIndex<locals.length&&locals[decoIndex].to==offset;)(widgets||(widgets=[widget])).push(locals[decoIndex++]);if(widgets){widgets.sort(compareSide);for(var i$1=0;i$1<widgets.length;i$1++)onWidget(widgets[i$1],parentIndex,!!restNode)}else onWidget(widget,parentIndex,!!restNode)}var child$1=void 0,index=void 0;if(restNode)index=-1,child$1=restNode,restNode=null;else{if(!(parentIndex<parent.childCount))break;index=parentIndex,child$1=parent.child(parentIndex++)}for(var i$2=0;i$2<active.length;i$2++)active[i$2].to<=offset&&active.splice(i$2--,1);for(;decoIndex<locals.length&&locals[decoIndex].from<=offset&&locals[decoIndex].to>offset;)active.push(locals[decoIndex++]);var end=offset+child$1.nodeSize;if(child$1.isText){var cutAt=end;decoIndex<locals.length&&locals[decoIndex].from<cutAt&&(cutAt=locals[decoIndex].from);for(var i$3=0;i$3<active.length;i$3++)active[i$3].to<cutAt&&(cutAt=active[i$3].to);cutAt<end&&(restNode=child$1.cut(cutAt-offset),child$1=child$1.cut(0,cutAt-offset),end=cutAt,index=-1)}onNode(child$1,active.length?child$1.isInline&&!child$1.isLeaf?active.filter((function(d){return!d.inline})):active.slice():nothing,deco.forChild(offset,child$1),index),offset=end}}(this.node,this.innerDeco,(function(widget,i,insideNode){widget.spec.marks?updater.syncToMarks(widget.spec.marks,inline,view):widget.type.side>=0&&!insideNode&&updater.syncToMarks(i==this$1.node.childCount?prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Mark.none:this$1.node.child(i).marks,inline,view),updater.placeWidget(widget,view,off)}),(function(child,outerDeco,innerDeco,i){updater.syncToMarks(child.marks,inline,view),updater.findNodeMatch(child,outerDeco,innerDeco,i)||updater.updateNextNode(child,outerDeco,innerDeco,view,i)||updater.addNode(child,outerDeco,innerDeco,view,off),off+=child.nodeSize})),updater.syncToMarks(nothing,inline,view),this.node.isTextblock&&updater.addTextblockHacks(),updater.destroyRest(),(updater.changed||2==this.dirty)&&(composition&&this.protectLocalComposition(view,composition),function renderDescs(parentDOM,descs,view){for(var dom=parentDOM.firstChild,written=!1,i=0;i<descs.length;i++){var desc=descs[i],childDOM=desc.dom;if(childDOM.parentNode==parentDOM){for(;childDOM!=dom;)dom=rm(dom),written=!0;dom=dom.nextSibling}else written=!0,parentDOM.insertBefore(childDOM,dom);if(desc instanceof MarkViewDesc){var pos=dom?dom.previousSibling:parentDOM.lastChild;renderDescs(desc.contentDOM,desc.children,view),dom=pos?pos.nextSibling:parentDOM.firstChild}}for(;dom;)dom=rm(dom),written=!0;written&&view.trackWrites==parentDOM&&(view.trackWrites=null)}(this.contentDOM,this.children,view),result.ios&&function(dom){if("UL"==dom.nodeName||"OL"==dom.nodeName){var oldCSS=dom.style.cssText;dom.style.cssText=oldCSS+"; list-style: square !important",window.getComputedStyle(dom).listStyle,dom.style.cssText=oldCSS}}(this.dom))},NodeViewDesc.prototype.localCompositionNode=function(view,pos){var ref=view.state.selection,from=ref.from,to=ref.to;if(!(!(view.state.selection instanceof prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.TextSelection)||from<pos||to>pos+this.node.content.size)){var sel=view.root.getSelection(),textNode=function(node,offset){for(;;){if(3==node.nodeType)return node;if(1==node.nodeType&&offset>0){if(node.childNodes.length>offset&&3==node.childNodes[offset].nodeType)return node.childNodes[offset];offset=nodeSize(node=node.childNodes[offset-1])}else{if(!(1==node.nodeType&&offset<node.childNodes.length))return null;node=node.childNodes[offset],offset=0}}}(sel.focusNode,sel.focusOffset);if(textNode&&this.dom.contains(textNode.parentNode)){var text=textNode.nodeValue,textPos=function(frag,text,from,to){for(var i=0,pos=0;i<frag.childCount&&pos<=to;){var child=frag.child(i++),childStart=pos;if(pos+=child.nodeSize,child.isText){for(var str=child.text;i<frag.childCount;){var next=frag.child(i++);if(pos+=next.nodeSize,!next.isText)break;str+=next.text}if(pos>=from){var found=str.lastIndexOf(text,to-childStart);if(found>=0&&found+text.length+childStart>=from)return childStart+found}}}return-1}(this.node.content,text,from-pos,to-pos);return textPos<0?null:{node:textNode,pos:textPos,text:text}}}},NodeViewDesc.prototype.protectLocalComposition=function(view,ref){var node=ref.node,pos=ref.pos,text=ref.text;if(!this.getDesc(node)){for(var topNode=node;topNode.parentNode!=this.contentDOM;topNode=topNode.parentNode){for(;topNode.previousSibling;)topNode.parentNode.removeChild(topNode.previousSibling);for(;topNode.nextSibling;)topNode.parentNode.removeChild(topNode.nextSibling);topNode.pmViewDesc&&(topNode.pmViewDesc=null)}var desc=new CompositionViewDesc(this,topNode,node,text);view.compositionNodes.push(desc),this.children=replaceNodes(this.children,pos,pos+text.length,view,desc)}},NodeViewDesc.prototype.update=function(node,outerDeco,innerDeco,view){return!(3==this.dirty||!node.sameMarkup(this.node))&&(this.updateInner(node,outerDeco,innerDeco,view),!0)},NodeViewDesc.prototype.updateInner=function(node,outerDeco,innerDeco,view){this.updateOuterDeco(outerDeco),this.node=node,this.innerDeco=innerDeco,this.contentDOM&&this.updateChildren(view,this.posAtStart),this.dirty=0},NodeViewDesc.prototype.updateOuterDeco=function(outerDeco){if(!sameOuterDeco(outerDeco,this.outerDeco)){var needsWrap=1!=this.nodeDOM.nodeType,oldDOM=this.dom;this.dom=patchOuterDeco(this.dom,this.nodeDOM,computeOuterDeco(this.outerDeco,this.node,needsWrap),computeOuterDeco(outerDeco,this.node,needsWrap)),this.dom!=oldDOM&&(oldDOM.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=outerDeco}},NodeViewDesc.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},NodeViewDesc.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")},Object.defineProperties(NodeViewDesc.prototype,prototypeAccessors$3),NodeViewDesc}(ViewDesc);function docViewDesc(doc,outerDeco,innerDeco,dom,view){return applyOuterDeco(dom,outerDeco,doc),new NodeViewDesc(null,doc,outerDeco,innerDeco,dom,dom,dom,view,0)}var TextViewDesc=function(NodeViewDesc){function TextViewDesc(parent,node,outerDeco,innerDeco,dom,nodeDOM,view){NodeViewDesc.call(this,parent,node,outerDeco,innerDeco,dom,null,nodeDOM,view)}return NodeViewDesc&&(TextViewDesc.__proto__=NodeViewDesc),TextViewDesc.prototype=Object.create(NodeViewDesc&&NodeViewDesc.prototype),TextViewDesc.prototype.constructor=TextViewDesc,TextViewDesc.prototype.parseRule=function(){for(var skip=this.nodeDOM.parentNode;skip&&skip!=this.dom&&!skip.pmIsDeco;)skip=skip.parentNode;return{skip:skip||!0}},TextViewDesc.prototype.update=function(node,outerDeco,_,view){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!node.sameMarkup(this.node))&&(this.updateOuterDeco(outerDeco),0==this.dirty&&node.text==this.node.text||node.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=node.text,view.trackWrites==this.nodeDOM&&(view.trackWrites=null)),this.node=node,this.dirty=0,!0)},TextViewDesc.prototype.inParent=function(){for(var parentDOM=this.parent.contentDOM,n=this.nodeDOM;n;n=n.parentNode)if(n==parentDOM)return!0;return!1},TextViewDesc.prototype.domFromPos=function(pos){return{node:this.nodeDOM,offset:pos}},TextViewDesc.prototype.localPosFromDOM=function(dom,offset,bias){return dom==this.nodeDOM?this.posAtStart+Math.min(offset,this.node.text.length):NodeViewDesc.prototype.localPosFromDOM.call(this,dom,offset,bias)},TextViewDesc.prototype.ignoreMutation=function(mutation){return"characterData"!=mutation.type&&"selection"!=mutation.type},TextViewDesc.prototype.slice=function(from,to,view){var node=this.node.cut(from,to),dom=document.createTextNode(node.text);return new TextViewDesc(this.parent,node,this.outerDeco,this.innerDeco,dom,dom,view)},TextViewDesc}(NodeViewDesc),BRHackViewDesc=function(ViewDesc){function BRHackViewDesc(){ViewDesc.apply(this,arguments)}return ViewDesc&&(BRHackViewDesc.__proto__=ViewDesc),BRHackViewDesc.prototype=Object.create(ViewDesc&&ViewDesc.prototype),BRHackViewDesc.prototype.constructor=BRHackViewDesc,BRHackViewDesc.prototype.parseRule=function(){return{ignore:!0}},BRHackViewDesc.prototype.matchesHack=function(){return 0==this.dirty},BRHackViewDesc}(ViewDesc),CustomNodeViewDesc=function(NodeViewDesc){function CustomNodeViewDesc(parent,node,outerDeco,innerDeco,dom,contentDOM,nodeDOM,spec,view,pos){NodeViewDesc.call(this,parent,node,outerDeco,innerDeco,dom,contentDOM,nodeDOM,view,pos),this.spec=spec}return NodeViewDesc&&(CustomNodeViewDesc.__proto__=NodeViewDesc),CustomNodeViewDesc.prototype=Object.create(NodeViewDesc&&NodeViewDesc.prototype),CustomNodeViewDesc.prototype.constructor=CustomNodeViewDesc,CustomNodeViewDesc.prototype.update=function(node,outerDeco,innerDeco,view){if(3==this.dirty)return!1;if(this.spec.update){var result=this.spec.update(node,outerDeco);return result&&this.updateInner(node,outerDeco,innerDeco,view),result}return!(!this.contentDOM&&!node.isLeaf)&&NodeViewDesc.prototype.update.call(this,node,outerDeco,innerDeco,view)},CustomNodeViewDesc.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():NodeViewDesc.prototype.selectNode.call(this)},CustomNodeViewDesc.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():NodeViewDesc.prototype.deselectNode.call(this)},CustomNodeViewDesc.prototype.setSelection=function(anchor,head,root,force){this.spec.setSelection?this.spec.setSelection(anchor,head,root):NodeViewDesc.prototype.setSelection.call(this,anchor,head,root,force)},CustomNodeViewDesc.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),NodeViewDesc.prototype.destroy.call(this)},CustomNodeViewDesc.prototype.stopEvent=function(event){return!!this.spec.stopEvent&&this.spec.stopEvent(event)},CustomNodeViewDesc.prototype.ignoreMutation=function(mutation){return this.spec.ignoreMutation?this.spec.ignoreMutation(mutation):NodeViewDesc.prototype.ignoreMutation.call(this,mutation)},CustomNodeViewDesc}(NodeViewDesc);function OuterDecoLevel(nodeName){nodeName&&(this.nodeName=nodeName)}OuterDecoLevel.prototype=Object.create(null);var noDeco=[new OuterDecoLevel];function computeOuterDeco(outerDeco,node,needsWrap){if(0==outerDeco.length)return noDeco;for(var top=needsWrap?noDeco[0]:new OuterDecoLevel,result=[top],i=0;i<outerDeco.length;i++){var attrs=outerDeco[i].type.attrs,cur=top;if(attrs)for(var name in attrs.nodeName&&result.push(cur=new OuterDecoLevel(attrs.nodeName)),attrs){var val=attrs[name];null!=val&&(needsWrap&&1==result.length&&result.push(cur=top=new OuterDecoLevel(node.isInline?"span":"div")),"class"==name?cur.class=(cur.class?cur.class+" ":"")+val:"style"==name?cur.style=(cur.style?cur.style+";":"")+val:"nodeName"!=name&&(cur[name]=val))}}return result}function patchOuterDeco(outerDOM,nodeDOM,prevComputed,curComputed){if(prevComputed==noDeco&&curComputed==noDeco)return nodeDOM;for(var curDOM=nodeDOM,i=0;i<curComputed.length;i++){var deco=curComputed[i],prev=prevComputed[i];if(i){var parent=void 0;prev&&prev.nodeName==deco.nodeName&&curDOM!=outerDOM&&(parent=curDOM.parentNode)&&parent.tagName.toLowerCase()==deco.nodeName||((parent=document.createElement(deco.nodeName)).pmIsDeco=!0,parent.appendChild(curDOM),prev=noDeco[0]),curDOM=parent}patchAttributes(curDOM,prev||noDeco[0],deco)}return curDOM}function patchAttributes(dom,prev,cur){for(var name in prev)"class"==name||"style"==name||"nodeName"==name||name in cur||dom.removeAttribute(name);for(var name$1 in cur)"class"!=name$1&&"style"!=name$1&&"nodeName"!=name$1&&cur[name$1]!=prev[name$1]&&dom.setAttribute(name$1,cur[name$1]);if(prev.class!=cur.class){for(var prevList=prev.class?prev.class.split(" "):nothing,curList=cur.class?cur.class.split(" "):nothing,i=0;i<prevList.length;i++)-1==curList.indexOf(prevList[i])&&dom.classList.remove(prevList[i]);for(var i$1=0;i$1<curList.length;i$1++)-1==prevList.indexOf(curList[i$1])&&dom.classList.add(curList[i$1])}if(prev.style!=cur.style){if(prev.style)for(var m,prop=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;m=prop.exec(prev.style);)dom.style.removeProperty(m[1]);cur.style&&(dom.style.cssText+=cur.style)}}function applyOuterDeco(dom,deco,node){return patchOuterDeco(dom,dom,noDeco,computeOuterDeco(deco,node,1!=dom.nodeType))}function sameOuterDeco(a,b){if(a.length!=b.length)return!1;for(var i=0;i<a.length;i++)if(!a[i].type.eq(b[i].type))return!1;return!0}function rm(dom){var next=dom.nextSibling;return dom.parentNode.removeChild(dom),next}var ViewTreeUpdater=function(top,lockedNode){this.top=top,this.lock=lockedNode,this.index=0,this.stack=[],this.changed=!1;var pre=function(frag,descs){for(var result=[],end=frag.childCount,i=descs.length-1;end>0&&i>=0;i--){var desc=descs[i],node=desc.node;if(node){if(node!=frag.child(end-1))break;result.push(desc),--end}}return{nodes:result.reverse(),offset:end}}(top.node.content,top.children);this.preMatched=pre.nodes,this.preMatchOffset=pre.offset};function compareSide(a,b){return a.type.side-b.type.side}function replaceNodes(nodes,from,to,view,replacement){for(var result=[],i=0,off=0;i<nodes.length;i++){var child=nodes[i],start=off,end=off+=child.size;start>=to||end<=from?result.push(child):(start<from&&result.push(child.slice(0,from-start,view)),replacement&&(result.push(replacement),replacement=null),end>to&&result.push(child.slice(to-start,child.size,view)))}return result}function selectionFromDOM(view,origin){var domSel=view.root.getSelection(),doc=view.state.doc;if(!domSel.focusNode)return null;var nearestDesc=view.docView.nearestDesc(domSel.focusNode),inWidget=nearestDesc&&0==nearestDesc.size,head=view.docView.posFromDOM(domSel.focusNode,domSel.focusOffset);if(head<0)return null;var $anchor,selection,$head=doc.resolve(head);if(selectionCollapsed(domSel)){for($anchor=$head;nearestDesc&&!nearestDesc.node;)nearestDesc=nearestDesc.parent;if(nearestDesc&&nearestDesc.node.isAtom&&prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.NodeSelection.isSelectable(nearestDesc.node)&&nearestDesc.parent&&(!nearestDesc.node.isInline||!function(node,offset,parent){for(var atStart=0==offset,atEnd=offset==nodeSize(node);atStart||atEnd;){if(node==parent)return!0;var index=domIndex(node);if(!(node=node.parentNode))return!1;atStart=atStart&&0==index,atEnd=atEnd&&index==nodeSize(node)}}(domSel.focusNode,domSel.focusOffset,nearestDesc.dom))){var pos=nearestDesc.posBefore;selection=new prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.NodeSelection(head==pos?$head:doc.resolve(pos))}}else{var anchor=view.docView.posFromDOM(domSel.anchorNode,domSel.anchorOffset);if(anchor<0)return null;$anchor=doc.resolve(anchor)}selection||(selection=selectionBetween(view,$anchor,$head,"pointer"==origin||view.state.selection.head<$head.pos&&!inWidget?1:-1));return selection}function selectionToDOM(view,force){var sel=view.state.selection;if(syncNodeSelection(view,sel),view.editable?view.hasFocus():hasSelection(view)&&document.activeElement&&document.activeElement.contains(view.dom)){if(view.domObserver.disconnectSelection(),view.cursorWrapper)!function(view){var domSel=view.root.getSelection(),range=document.createRange(),node=view.cursorWrapper.dom,img="IMG"==node.nodeName;img?range.setEnd(node.parentNode,domIndex(node)+1):range.setEnd(node,0);range.collapse(!1),domSel.removeAllRanges(),domSel.addRange(range),!img&&!view.state.selection.visible&&result.ie&&result.ie_version<=11&&(node.disabled=!0,node.disabled=!1)}(view);else{var resetEditableFrom,resetEditableTo,anchor=sel.anchor,head=sel.head;!brokenSelectBetweenUneditable||sel instanceof prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.TextSelection||(sel.$from.parent.inlineContent||(resetEditableFrom=temporarilyEditableNear(view,sel.from)),sel.empty||sel.$from.parent.inlineContent||(resetEditableTo=temporarilyEditableNear(view,sel.to))),view.docView.setSelection(anchor,head,view.root,force),brokenSelectBetweenUneditable&&(resetEditableFrom&&resetEditable(resetEditableFrom),resetEditableTo&&resetEditable(resetEditableTo)),sel.visible?view.dom.classList.remove("ProseMirror-hideselection"):(view.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(view){var doc=view.dom.ownerDocument;doc.removeEventListener("selectionchange",view.hideSelectionGuard);var domSel=view.root.getSelection(),node=domSel.anchorNode,offset=domSel.anchorOffset;doc.addEventListener("selectionchange",view.hideSelectionGuard=function(){domSel.anchorNode==node&&domSel.anchorOffset==offset||(doc.removeEventListener("selectionchange",view.hideSelectionGuard),view.dom.classList.remove("ProseMirror-hideselection"))})}(view))}view.domObserver.setCurSelection(),view.domObserver.connectSelection()}}ViewTreeUpdater.prototype.getPreMatch=function(index){return index>=this.preMatchOffset?this.preMatched[index-this.preMatchOffset]:null},ViewTreeUpdater.prototype.destroyBetween=function(start,end){if(start!=end){for(var i=start;i<end;i++)this.top.children[i].destroy();this.top.children.splice(start,end-start),this.changed=!0}},ViewTreeUpdater.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},ViewTreeUpdater.prototype.syncToMarks=function(marks,inline,view){for(var keep=0,depth=this.stack.length>>1,maxKeep=Math.min(depth,marks.length);keep<maxKeep&&(keep==depth-1?this.top:this.stack[keep+1<<1]).matchesMark(marks[keep])&&!1!==marks[keep].type.spec.spanning;)keep++;for(;keep<depth;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),depth--;for(;depth<marks.length;){this.stack.push(this.top,this.index+1);for(var found=-1,i=this.index;i<Math.min(this.index+3,this.top.children.length);i++)if(this.top.children[i].matchesMark(marks[depth])){found=i;break}if(found>-1)found>this.index&&(this.changed=!0,this.destroyBetween(this.index,found)),this.top=this.top.children[this.index];else{var markDesc=MarkViewDesc.create(this.top,marks[depth],inline,view);this.top.children.splice(this.index,0,markDesc),this.top=markDesc,this.changed=!0}this.index=0,depth++}},ViewTreeUpdater.prototype.findNodeMatch=function(node,outerDeco,innerDeco,index){var found=-1,preMatch=index<0?void 0:this.getPreMatch(index),children=this.top.children;if(preMatch&&preMatch.matchesNode(node,outerDeco,innerDeco))found=children.indexOf(preMatch);else for(var i=this.index,e=Math.min(children.length,i+5);i<e;i++){var child=children[i];if(child.matchesNode(node,outerDeco,innerDeco)&&this.preMatched.indexOf(child)<0){found=i;break}}return!(found<0)&&(this.destroyBetween(this.index,found),this.index++,!0)},ViewTreeUpdater.prototype.updateNextNode=function(node,outerDeco,innerDeco,view,index){for(var i=this.index;i<this.top.children.length;i++){var next=this.top.children[i];if(next instanceof NodeViewDesc){var preMatch=this.preMatched.indexOf(next);if(preMatch>-1&&preMatch+this.preMatchOffset!=index)return!1;var nextDOM=next.dom;if(!(this.lock&&(nextDOM==this.lock||1==nextDOM.nodeType&&nextDOM.contains(this.lock.parentNode))&&!(node.isText&&next.node&&next.node.isText&&next.nodeDOM.nodeValue==node.text&&3!=next.dirty&&sameOuterDeco(outerDeco,next.outerDeco)))&&next.update(node,outerDeco,innerDeco,view))return this.destroyBetween(this.index,i),next.dom!=nextDOM&&(this.changed=!0),this.index++,!0;break}}return!1},ViewTreeUpdater.prototype.addNode=function(node,outerDeco,innerDeco,view,pos){this.top.children.splice(this.index++,0,NodeViewDesc.create(this.top,node,outerDeco,innerDeco,view,pos)),this.changed=!0},ViewTreeUpdater.prototype.placeWidget=function(widget,view,pos){var next=this.index<this.top.children.length?this.top.children[this.index]:null;if(!next||!next.matchesWidget(widget)||widget!=next.widget&&next.widget.type.toDOM.parentNode){var desc=new WidgetViewDesc(this.top,widget,view,pos);this.top.children.splice(this.index++,0,desc),this.changed=!0}else this.index++},ViewTreeUpdater.prototype.addTextblockHacks=function(){for(var lastChild=this.top.children[this.index-1];lastChild instanceof MarkViewDesc;)lastChild=lastChild.children[lastChild.children.length-1];if(!lastChild||!(lastChild instanceof TextViewDesc)||/\n$/.test(lastChild.node.text))if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack())this.index++;else{var dom=document.createElement("br");this.top.children.splice(this.index++,0,new BRHackViewDesc(this.top,nothing,dom,null)),this.changed=!0}};var brokenSelectBetweenUneditable=result.safari||result.chrome&&result.chrome_version<63;function temporarilyEditableNear(view,pos){var ref=view.docView.domFromPos(pos),node=ref.node,offset=ref.offset,after=offset<node.childNodes.length?node.childNodes[offset]:null,before=offset?node.childNodes[offset-1]:null;if(result.safari&&after&&"false"==after.contentEditable)return setEditable(after);if(!(after&&"false"!=after.contentEditable||before&&"false"!=before.contentEditable)){if(after)return setEditable(after);if(before)return setEditable(before)}}function setEditable(element){return element.contentEditable="true",result.safari&&element.draggable&&(element.draggable=!1,element.wasDraggable=!0),element}function resetEditable(element){element.contentEditable="false",element.wasDraggable&&(element.draggable=!0,element.wasDraggable=null)}function syncNodeSelection(view,sel){if(sel instanceof prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.NodeSelection){var desc=view.docView.descAt(sel.from);desc!=view.lastSelectedViewDesc&&(clearNodeSelection(view),desc&&desc.selectNode(),view.lastSelectedViewDesc=desc)}else clearNodeSelection(view)}function clearNodeSelection(view){view.lastSelectedViewDesc&&(view.lastSelectedViewDesc.parent&&view.lastSelectedViewDesc.deselectNode(),view.lastSelectedViewDesc=null)}function selectionBetween(view,$anchor,$head,bias){return view.someProp("createSelectionBetween",(function(f){return f(view,$anchor,$head)}))||prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.TextSelection.between($anchor,$head,bias)}function hasSelection(view){var sel=view.root.getSelection();if(!sel.anchorNode)return!1;try{return view.dom.contains(3==sel.anchorNode.nodeType?sel.anchorNode.parentNode:sel.anchorNode)&&(view.editable||view.dom.contains(3==sel.focusNode.nodeType?sel.focusNode.parentNode:sel.focusNode))}catch(_){return!1}}function moveSelectionBlock(state,dir){var ref=state.selection,$anchor=ref.$anchor,$head=ref.$head,$side=dir>0?$anchor.max($head):$anchor.min($head),$start=$side.parent.inlineContent?$side.depth?state.doc.resolve(dir>0?$side.after():$side.before()):null:$side;return $start&&prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.Selection.findFrom($start,dir)}function apply(view,sel){return view.dispatch(view.state.tr.setSelection(sel).scrollIntoView()),!0}function selectHorizontally(view,dir,mods){var sel=view.state.selection;if(!(sel instanceof prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.TextSelection)){if(sel instanceof prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.NodeSelection&&sel.node.isInline)return apply(view,new prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.TextSelection(dir>0?sel.$to:sel.$from));var next$1=moveSelectionBlock(view.state,dir);return!!next$1&&apply(view,next$1)}if(!sel.empty||mods.indexOf("s")>-1)return!1;if(view.endOfTextblock(dir>0?"right":"left")){var next=moveSelectionBlock(view.state,dir);return!!(next&&next instanceof prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.NodeSelection)&&apply(view,next)}if(!(result.mac&&mods.indexOf("m")>-1)){var desc,$head=sel.$head,node=$head.textOffset?null:dir<0?$head.nodeBefore:$head.nodeAfter;if(!node||node.isText)return!1;var nodePos=dir<0?$head.pos-node.nodeSize:$head.pos;return!!(node.isAtom||(desc=view.docView.descAt(nodePos))&&!desc.contentDOM)&&(prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.NodeSelection.isSelectable(node)?apply(view,new prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.NodeSelection(dir<0?view.state.doc.resolve($head.pos-node.nodeSize):$head)):!!result.webkit&&apply(view,new prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.TextSelection(view.state.doc.resolve(dir<0?nodePos:nodePos+node.nodeSize))))}}function nodeLen(node){return 3==node.nodeType?node.nodeValue.length:node.childNodes.length}function isIgnorable(dom){var desc=dom.pmViewDesc;return desc&&0==desc.size&&(dom.nextSibling||"BR"!=dom.nodeName)}function skipIgnoredNodesLeft(view){var sel=view.root.getSelection(),node=sel.focusNode,offset=sel.focusOffset;if(node){var moveNode,moveOffset,force=!1;for(result.gecko&&1==node.nodeType&&offset<nodeLen(node)&&isIgnorable(node.childNodes[offset])&&(force=!0);;)if(offset>0){if(1!=node.nodeType)break;var before=node.childNodes[offset-1];if(isIgnorable(before))moveNode=node,moveOffset=--offset;else{if(3!=before.nodeType)break;offset=(node=before).nodeValue.length}}else{if(isBlockNode(node))break;for(var prev=node.previousSibling;prev&&isIgnorable(prev);)moveNode=node.parentNode,moveOffset=domIndex(prev),prev=prev.previousSibling;if(prev)offset=nodeLen(node=prev);else{if((node=node.parentNode)==view.dom)break;offset=0}}force?setSelFocus(view,sel,node,offset):moveNode&&setSelFocus(view,sel,moveNode,moveOffset)}}function skipIgnoredNodesRight(view){var sel=view.root.getSelection(),node=sel.focusNode,offset=sel.focusOffset;if(node){for(var moveNode,moveOffset,len=nodeLen(node);;)if(offset<len){if(1!=node.nodeType)break;if(!isIgnorable(node.childNodes[offset]))break;moveNode=node,moveOffset=++offset}else{if(isBlockNode(node))break;for(var next=node.nextSibling;next&&isIgnorable(next);)moveNode=next.parentNode,moveOffset=domIndex(next)+1,next=next.nextSibling;if(next)offset=0,len=nodeLen(node=next);else{if((node=node.parentNode)==view.dom)break;offset=len=0}}moveNode&&setSelFocus(view,sel,moveNode,moveOffset)}}function isBlockNode(dom){var desc=dom.pmViewDesc;return desc&&desc.node&&desc.node.isBlock}function setSelFocus(view,sel,node,offset){if(selectionCollapsed(sel)){var range=document.createRange();range.setEnd(node,offset),range.setStart(node,offset),sel.removeAllRanges(),sel.addRange(range)}else sel.extend&&sel.extend(node,offset);view.domObserver.setCurSelection();var state=view.state;setTimeout((function(){view.state==state&&selectionToDOM(view)}),50)}function selectVertically(view,dir,mods){var sel=view.state.selection;if(sel instanceof prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.TextSelection&&!sel.empty||mods.indexOf("s")>-1)return!1;if(result.mac&&mods.indexOf("m")>-1)return!1;var $from=sel.$from,$to=sel.$to;if(!$from.parent.inlineContent||view.endOfTextblock(dir<0?"up":"down")){var next=moveSelectionBlock(view.state,dir);if(next&&next instanceof prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.NodeSelection)return apply(view,next)}if(!$from.parent.inlineContent){var beyond=prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.Selection.findFrom(dir<0?$from:$to,dir);return!beyond||apply(view,beyond)}return!1}function stopNativeHorizontalDelete(view,dir){if(!(view.state.selection instanceof prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.TextSelection))return!0;var ref=view.state.selection,$head=ref.$head,$anchor=ref.$anchor,empty=ref.empty;if(!$head.sameParent($anchor))return!0;if(!empty)return!1;if(view.endOfTextblock(dir>0?"forward":"backward"))return!0;var nextNode=!$head.textOffset&&(dir<0?$head.nodeBefore:$head.nodeAfter);if(nextNode&&!nextNode.isText){var tr=view.state.tr;return dir<0?tr.delete($head.pos-nextNode.nodeSize,$head.pos):tr.delete($head.pos,$head.pos+nextNode.nodeSize),view.dispatch(tr),!0}return!1}function switchEditable(view,node,state){view.domObserver.stop(),node.contentEditable=state,view.domObserver.start()}function captureKeyDown(view,event){var code=event.keyCode,mods=function(event){var result="";return event.ctrlKey&&(result+="c"),event.metaKey&&(result+="m"),event.altKey&&(result+="a"),event.shiftKey&&(result+="s"),result}(event);return 8==code||result.mac&&72==code&&"c"==mods?stopNativeHorizontalDelete(view,-1)||skipIgnoredNodesLeft(view):46==code||result.mac&&68==code&&"c"==mods?stopNativeHorizontalDelete(view,1)||skipIgnoredNodesRight(view):13==code||27==code||(37==code?selectHorizontally(view,-1,mods)||skipIgnoredNodesLeft(view):39==code?selectHorizontally(view,1,mods)||skipIgnoredNodesRight(view):38==code?selectVertically(view,-1,mods)||skipIgnoredNodesLeft(view):40==code?function(view){if(result.safari&&!(view.state.selection.$head.parentOffset>0)){var ref=view.root.getSelection(),focusNode=ref.focusNode,focusOffset=ref.focusOffset;if(focusNode&&1==focusNode.nodeType&&0==focusOffset&&focusNode.firstChild&&"false"==focusNode.firstChild.contentEditable){var child=focusNode.firstChild;switchEditable(view,child,!0),setTimeout((function(){return switchEditable(view,child,!1)}),20)}}}(view)||selectVertically(view,1,mods)||skipIgnoredNodesRight(view):mods==(result.mac?"m":"c")&&(66==code||73==code||89==code||90==code))}function ruleFromNode(dom){var desc=dom.pmViewDesc;if(desc)return desc.parseRule();if("BR"==dom.nodeName&&dom.parentNode){if(result.safari&&/^(ul|ol)$/i.test(dom.parentNode.nodeName)){var skip=document.createElement("div");return skip.appendChild(document.createElement("li")),{skip:skip}}if(dom.parentNode.lastChild==dom||result.safari&&/^(tr|table)$/i.test(dom.parentNode.nodeName))return{ignore:!0}}else if("IMG"==dom.nodeName&&dom.getAttribute("mark-placeholder"))return{ignore:!0}}function readDOMChange(view,from,to,typeOver,addedNodes){if(from<0){var origin=view.lastSelectionTime>Date.now()-50?view.lastSelectionOrigin:null,newSel=selectionFromDOM(view,origin);if(newSel&&!view.state.selection.eq(newSel)){var tr$1=view.state.tr.setSelection(newSel);"pointer"==origin?tr$1.setMeta("pointer",!0):"key"==origin&&tr$1.scrollIntoView(),view.dispatch(tr$1)}}else{var $before=view.state.doc.resolve(from),shared=$before.sharedDepth(to);from=$before.before(shared+1),to=view.state.doc.resolve(to).after(shared+1);var preferredPos,preferredSide,sel=view.state.selection,parse=function(view,from_,to_){var ref=view.docView.parseRange(from_,to_),parent=ref.node,fromOffset=ref.fromOffset,toOffset=ref.toOffset,from=ref.from,to=ref.to,domSel=view.root.getSelection(),find=null,anchor=domSel.anchorNode;if(anchor&&view.dom.contains(1==anchor.nodeType?anchor:anchor.parentNode)&&(find=[{node:anchor,offset:domSel.anchorOffset}],selectionCollapsed(domSel)||find.push({node:domSel.focusNode,offset:domSel.focusOffset})),result.chrome&&8===view.lastKeyCode)for(var off=toOffset;off>fromOffset;off--){var node=parent.childNodes[off-1],desc=node.pmViewDesc;if("BR"==node.nodeType&&!desc){toOffset=off;break}if(!desc||desc.size)break}var startDoc=view.state.doc,parser=view.someProp("domParser")||prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.DOMParser.fromSchema(view.state.schema),$from=startDoc.resolve(from),sel=null,doc=parser.parse(parent,{topNode:$from.parent,topMatch:$from.parent.contentMatchAt($from.index()),topOpen:!0,from:fromOffset,to:toOffset,preserveWhitespace:!$from.parent.type.spec.code||"full",editableContent:!0,findPositions:find,ruleFromNode:ruleFromNode,context:$from});if(find&&null!=find[0].pos){var anchor$1=find[0].pos,head=find[1]&&find[1].pos;null==head&&(head=anchor$1),sel={anchor:anchor$1+from,head:head+from}}return{doc:doc,sel:sel,from:from,to:to}}(view,from,to),doc=view.state.doc,compare=doc.slice(parse.from,parse.to);8===view.lastKeyCode&&Date.now()-100<view.lastKeyCodeTime?(preferredPos=view.state.selection.to,preferredSide="end"):(preferredPos=view.state.selection.from,preferredSide="start"),view.lastKeyCode=null;var change=function(a,b,pos,preferredPos,preferredSide){var start=a.findDiffStart(b,pos);if(null==start)return null;var ref=a.findDiffEnd(b,pos+a.size,pos+b.size),endA=ref.a,endB=ref.b;if("end"==preferredSide){preferredPos-=endA+Math.max(0,start-Math.min(endA,endB))-start}if(endA<start&&a.size<b.size){endB=(start-=preferredPos<=start&&preferredPos>=endA?start-preferredPos:0)+(endB-endA),endA=start}else if(endB<start){endA=(start-=preferredPos<=start&&preferredPos>=endB?start-preferredPos:0)+(endA-endB),endB=start}return{start:start,endA:endA,endB:endB}}(compare.content,parse.doc.content,parse.from,preferredPos,preferredSide);if(!change){if(!(typeOver&&sel instanceof prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.TextSelection&&!sel.empty&&sel.$head.sameParent(sel.$anchor))||view.composing||parse.sel&&parse.sel.anchor!=parse.sel.head){if(parse.sel){var sel$1=resolveSelection(view,view.state.doc,parse.sel);sel$1&&!sel$1.eq(view.state.selection)&&view.dispatch(view.state.tr.setSelection(sel$1))}return}change={start:sel.from,endA:sel.to,endB:sel.to}}view.domChangeCount++,view.state.selection.from<view.state.selection.to&&change.start==change.endB&&view.state.selection instanceof prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.TextSelection&&(change.start>view.state.selection.from&&change.start<=view.state.selection.from+2?change.start=view.state.selection.from:change.endA<view.state.selection.to&&change.endA>=view.state.selection.to-2&&(change.endB+=view.state.selection.to-change.endA,change.endA=view.state.selection.to)),result.ie&&result.ie_version<=11&&change.endB==change.start+1&&change.endA==change.start&&change.start>parse.from&&"  "==parse.doc.textBetween(change.start-parse.from-1,change.start-parse.from+1)&&(change.start--,change.endA--,change.endB--);var nextSel,$from=parse.doc.resolveNoCache(change.start-parse.from),$to=parse.doc.resolveNoCache(change.endB-parse.from),inlineChange=$from.sameParent($to)&&$from.parent.inlineContent;if((result.ios&&view.lastIOSEnter>Date.now()-225&&(!inlineChange||addedNodes.some((function(n){return"DIV"==n.nodeName||"P"==n.nodeName})))||!inlineChange&&$from.pos<parse.doc.content.size&&(nextSel=prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.Selection.findFrom(parse.doc.resolve($from.pos+1),1,!0))&&nextSel.head==$to.pos)&&view.someProp("handleKeyDown",(function(f){return f(view,keyEvent(13,"Enter"))})))view.lastIOSEnter=0;else if(view.state.selection.anchor>change.start&&function(old,start,end,$newStart,$newEnd){if(!$newStart.parent.isTextblock||end-start<=$newEnd.pos-$newStart.pos||skipClosingAndOpening($newStart,!0,!1)<$newEnd.pos)return!1;var $start=old.resolve(start);if($start.parentOffset<$start.parent.content.size||!$start.parent.isTextblock)return!1;var $next=old.resolve(skipClosingAndOpening($start,!0,!0));if(!$next.parent.isTextblock||$next.pos>end||skipClosingAndOpening($next,!0,!1)<end)return!1;return $newStart.parent.content.cut($newStart.parentOffset).eq($next.parent.content)}(doc,change.start,change.endA,$from,$to)&&view.someProp("handleKeyDown",(function(f){return f(view,keyEvent(8,"Backspace"))})))result.android&&result.chrome&&view.domObserver.suppressSelectionUpdates();else{result.android&&!inlineChange&&$from.start()!=$to.start()&&0==$to.parentOffset&&$from.depth==$to.depth&&parse.sel&&parse.sel.anchor==parse.sel.head&&parse.sel.head==change.endA&&(change.endB-=2,$to=parse.doc.resolveNoCache(change.endB-parse.from),setTimeout((function(){view.someProp("handleKeyDown",(function(f){return f(view,keyEvent(13,"Enter"))}))}),20));var tr,storedMarks,markChange,$from1,chFrom=change.start,chTo=change.endA;if(inlineChange)if($from.pos==$to.pos)result.ie&&result.ie_version<=11&&0==$from.parentOffset&&(view.domObserver.suppressSelectionUpdates(),setTimeout((function(){return selectionToDOM(view)}),20)),tr=view.state.tr.delete(chFrom,chTo),storedMarks=doc.resolve(change.start).marksAcross(doc.resolve(change.endA));else if(change.endA==change.endB&&($from1=doc.resolve(change.start))&&(markChange=function(cur,prev){for(var type,mark,update,curMarks=cur.firstChild.marks,prevMarks=prev.firstChild.marks,added=curMarks,removed=prevMarks,i=0;i<prevMarks.length;i++)added=prevMarks[i].removeFromSet(added);for(var i$1=0;i$1<curMarks.length;i$1++)removed=curMarks[i$1].removeFromSet(removed);if(1==added.length&&0==removed.length)mark=added[0],type="add",update=function(node){return node.mark(mark.addToSet(node.marks))};else{if(0!=added.length||1!=removed.length)return null;mark=removed[0],type="remove",update=function(node){return node.mark(mark.removeFromSet(node.marks))}}for(var updated=[],i$2=0;i$2<prev.childCount;i$2++)updated.push(update(prev.child(i$2)));if(prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.from(updated).eq(cur))return{mark:mark,type:type}}($from.parent.content.cut($from.parentOffset,$to.parentOffset),$from1.parent.content.cut($from1.parentOffset,change.endA-$from1.start()))))tr=view.state.tr,"add"==markChange.type?tr.addMark(chFrom,chTo,markChange.mark):tr.removeMark(chFrom,chTo,markChange.mark);else if($from.parent.child($from.index()).isText&&$from.index()==$to.index()-($to.textOffset?0:1)){var text=$from.parent.textBetween($from.parentOffset,$to.parentOffset);if(view.someProp("handleTextInput",(function(f){return f(view,chFrom,chTo,text)})))return;tr=view.state.tr.insertText(text,chFrom,chTo)}if(tr||(tr=view.state.tr.replace(chFrom,chTo,parse.doc.slice(change.start-parse.from,change.endB-parse.from))),parse.sel){var sel$2=resolveSelection(view,tr.doc,parse.sel);sel$2&&!(result.chrome&&result.android&&view.composing&&sel$2.empty&&(sel$2.head==chFrom||sel$2.head==tr.mapping.map(chTo)-1)||result.ie&&sel$2.empty&&sel$2.head==chFrom)&&tr.setSelection(sel$2)}storedMarks&&tr.ensureMarks(storedMarks),view.dispatch(tr.scrollIntoView())}}}function resolveSelection(view,doc,parsedSel){return Math.max(parsedSel.anchor,parsedSel.head)>doc.content.size?null:selectionBetween(view,doc.resolve(parsedSel.anchor),doc.resolve(parsedSel.head))}function skipClosingAndOpening($pos,fromEnd,mayOpen){for(var depth=$pos.depth,end=fromEnd?$pos.end():$pos.pos;depth>0&&(fromEnd||$pos.indexAfter(depth)==$pos.node(depth).childCount);)depth--,end++,fromEnd=!1;if(mayOpen)for(var next=$pos.node(depth).maybeChild($pos.indexAfter(depth));next&&!next.isLeaf;)next=next.firstChild,end++;return end}function serializeForClipboard(view,slice){for(var context=[],content=slice.content,openStart=slice.openStart,openEnd=slice.openEnd;openStart>1&&openEnd>1&&1==content.childCount&&1==content.firstChild.childCount;){openStart--,openEnd--;var node=content.firstChild;context.push(node.type.name,node.attrs!=node.type.defaultAttrs?node.attrs:null),content=node.content}var serializer=view.someProp("clipboardSerializer")||prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.DOMSerializer.fromSchema(view.state.schema),doc=detachedDoc(),wrap=doc.createElement("div");wrap.appendChild(serializer.serializeFragment(content,{document:doc}));for(var needsWrap,firstChild=wrap.firstChild;firstChild&&1==firstChild.nodeType&&(needsWrap=wrapMap[firstChild.nodeName.toLowerCase()]);){for(var i=needsWrap.length-1;i>=0;i--){for(var wrapper=doc.createElement(needsWrap[i]);wrap.firstChild;)wrapper.appendChild(wrap.firstChild);wrap.appendChild(wrapper)}firstChild=wrap.firstChild}return firstChild&&1==firstChild.nodeType&&firstChild.setAttribute("data-pm-slice",openStart+" "+openEnd+" "+JSON.stringify(context)),{dom:wrap,text:view.someProp("clipboardTextSerializer",(function(f){return f(slice)}))||slice.content.textBetween(0,slice.content.size,"\n\n")}}function parseFromClipboard(view,text,html,plainText,$context){var dom,slice,inCode=$context.parent.type.spec.code;if(!html&&!text)return null;var asText=text&&(plainText||inCode||!html);if(asText){if(view.someProp("transformPastedText",(function(f){text=f(text,inCode||plainText)})),inCode)return new prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Slice(prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.from(view.state.schema.text(text)),0,0);var parsed=view.someProp("clipboardTextParser",(function(f){return f(text,$context,plainText)}));parsed?slice=parsed:(dom=document.createElement("div"),text.trim().split(/(?:\r\n?|\n)+/).forEach((function(block){dom.appendChild(document.createElement("p")).textContent=block})))}else view.someProp("transformPastedHTML",(function(f){html=f(html)})),dom=function(html){var metas=/(\s*<meta [^>]*>)*/.exec(html);metas&&(html=html.slice(metas[0].length));var wrap,elt=detachedDoc().createElement("div"),firstTag=/(?:<meta [^>]*>)*<([a-z][^>\s]+)/i.exec(html),depth=0;(wrap=firstTag&&wrapMap[firstTag[1].toLowerCase()])&&(html=wrap.map((function(n){return"<"+n+">"})).join("")+html+wrap.map((function(n){return"</"+n+">"})).reverse().join(""),depth=wrap.length);elt.innerHTML=html;for(var i=0;i<depth;i++)elt=elt.firstChild;return elt}(html);var contextNode=dom&&dom.querySelector("[data-pm-slice]"),sliceData=contextNode&&/^(\d+) (\d+) (.*)/.exec(contextNode.getAttribute("data-pm-slice"));if(!slice){var parser=view.someProp("clipboardParser")||view.someProp("domParser")||prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.DOMParser.fromSchema(view.state.schema);slice=parser.parseSlice(dom,{preserveWhitespace:!(!asText&&!sliceData),context:$context})}return slice=sliceData?function(slice,context){if(!slice.size)return slice;var array,schema=slice.content.firstChild.type.schema;try{array=JSON.parse(context)}catch(e){return slice}for(var content=slice.content,openStart=slice.openStart,openEnd=slice.openEnd,i=array.length-2;i>=0;i-=2){var type=schema.nodes[array[i]];if(!type||type.hasRequiredAttrs())break;content=prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.from(type.create(array[i+1],content)),openStart++,openEnd++}return new prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Slice(content,openStart,openEnd)}(function(slice,openStart,openEnd){openStart<slice.openStart&&(slice=new prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Slice(closeRange(slice.content,-1,openStart,slice.openStart,0,slice.openEnd),openStart,slice.openEnd));openEnd<slice.openEnd&&(slice=new prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Slice(closeRange(slice.content,1,openEnd,slice.openEnd,0,0),slice.openStart,openEnd));return slice}(slice,+sliceData[1],+sliceData[2]),sliceData[3]):prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Slice.maxOpen(function(fragment,$context){if(fragment.childCount<2)return fragment;for(var loop=function(d){var match=$context.node(d).contentMatchAt($context.index(d)),lastWrap=void 0,result=[];if(fragment.forEach((function(node){if(result){var inLast,wrap=match.findWrapping(node.type);if(!wrap)return result=null;if(inLast=result.length&&lastWrap.length&&function addToSibling(wrap,lastWrap,node,sibling,depth){if(depth<wrap.length&&depth<lastWrap.length&&wrap[depth]==lastWrap[depth]){var inner=addToSibling(wrap,lastWrap,node,sibling.lastChild,depth+1);if(inner)return sibling.copy(sibling.content.replaceChild(sibling.childCount-1,inner));if(sibling.contentMatchAt(sibling.childCount).matchType(depth==wrap.length-1?node.type:wrap[depth+1]))return sibling.copy(sibling.content.append(prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.from(withWrappers(node,wrap,depth+1))))}}(wrap,lastWrap,node,result[result.length-1],0))result[result.length-1]=inLast;else{result.length&&(result[result.length-1]=function closeRight(node,depth){if(0==depth)return node;var fragment=node.content.replaceChild(node.childCount-1,closeRight(node.lastChild,depth-1)),fill=node.contentMatchAt(node.childCount).fillBefore(prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.empty,!0);return node.copy(fragment.append(fill))}(result[result.length-1],lastWrap.length));var wrapped=withWrappers(node,wrap);result.push(wrapped),match=match.matchType(wrapped.type,wrapped.attrs),lastWrap=wrap}}})),result)return{v:prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.from(result)}},d=$context.depth;d>=0;d--){var returned=loop(d);if(returned)return returned.v}return fragment}(slice.content,$context),!1),view.someProp("transformPasted",(function(f){slice=f(slice)})),slice}function withWrappers(node,wrap,from){void 0===from&&(from=0);for(var i=wrap.length-1;i>=from;i--)node=wrap[i].create(null,prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.from(node));return node}function closeRange(fragment,side,from,to,depth,openEnd){var node=side<0?fragment.firstChild:fragment.lastChild,inner=node.content;return depth<to-1&&(inner=closeRange(inner,side,from,to,depth+1,openEnd)),depth>=from&&(inner=side<0?node.contentMatchAt(0).fillBefore(inner,fragment.childCount>1||openEnd<=depth).append(inner):inner.append(node.contentMatchAt(node.childCount).fillBefore(prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.empty,!0))),fragment.replaceChild(side<0?0:fragment.childCount-1,node.copy(inner))}var wrapMap={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},_detachedDoc=null;function detachedDoc(){return _detachedDoc||(_detachedDoc=document.implementation.createHTMLDocument("title"))}var observeOptions={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},useCharData=result.ie&&result.ie_version<=11,SelectionState=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};SelectionState.prototype.set=function(sel){this.anchorNode=sel.anchorNode,this.anchorOffset=sel.anchorOffset,this.focusNode=sel.focusNode,this.focusOffset=sel.focusOffset},SelectionState.prototype.eq=function(sel){return sel.anchorNode==this.anchorNode&&sel.anchorOffset==this.anchorOffset&&sel.focusNode==this.focusNode&&sel.focusOffset==this.focusOffset};var DOMObserver=function(view,handleDOMChange){var this$1=this;this.view=view,this.handleDOMChange=handleDOMChange,this.queue=[],this.flushingSoon=-1,this.observer=window.MutationObserver&&new window.MutationObserver((function(mutations){for(var i=0;i<mutations.length;i++)this$1.queue.push(mutations[i]);result.ie&&result.ie_version<=11&&mutations.some((function(m){return"childList"==m.type&&m.removedNodes.length||"characterData"==m.type&&m.oldValue.length>m.target.nodeValue.length}))?this$1.flushSoon():this$1.flush()})),this.currentSelection=new SelectionState,useCharData&&(this.onCharData=function(e){this$1.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this$1.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};DOMObserver.prototype.flushSoon=function(){var this$1=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((function(){this$1.flushingSoon=-1,this$1.flush()}),20))},DOMObserver.prototype.forceFlush=function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())},DOMObserver.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,observeOptions),useCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},DOMObserver.prototype.stop=function(){var this$1=this;if(this.observer){var take=this.observer.takeRecords();if(take.length){for(var i=0;i<take.length;i++)this.queue.push(take[i]);window.setTimeout((function(){return this$1.flush()}),20)}this.observer.disconnect()}useCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},DOMObserver.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},DOMObserver.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},DOMObserver.prototype.suppressSelectionUpdates=function(){var this$1=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return this$1.suppressingSelectionUpdates=!1}),50)},DOMObserver.prototype.onSelectionChange=function(){if((!(view=this.view).editable||view.root.activeElement==view.dom)&&hasSelection(view)){var view;if(this.suppressingSelectionUpdates)return selectionToDOM(this.view);if(result.ie&&result.ie_version<=11&&!this.view.state.selection.empty){var sel=this.view.root.getSelection();if(sel.focusNode&&isEquivalentPosition(sel.focusNode,sel.focusOffset,sel.anchorNode,sel.anchorOffset))return this.flushSoon()}this.flush()}},DOMObserver.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())},DOMObserver.prototype.ignoreSelectionChange=function(sel){if(0==sel.rangeCount)return!0;var container=sel.getRangeAt(0).commonAncestorContainer,desc=this.view.docView.nearestDesc(container);return desc&&desc.ignoreMutation({type:"selection",target:3==container.nodeType?container.parentNode:container})?(this.setCurSelection(),!0):void 0},DOMObserver.prototype.flush=function(){if(this.view.docView&&!(this.flushingSoon>-1)){var mutations=this.observer?this.observer.takeRecords():[];this.queue.length&&(mutations=this.queue.concat(mutations),this.queue.length=0);var sel=this.view.root.getSelection(),newSel=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(sel)&&hasSelection(this.view)&&!this.ignoreSelectionChange(sel),from=-1,to=-1,typeOver=!1,added=[];if(this.view.editable)for(var i=0;i<mutations.length;i++){var result$1=this.registerMutation(mutations[i],added);result$1&&(from=from<0?result$1.from:Math.min(result$1.from,from),to=to<0?result$1.to:Math.max(result$1.to,to),result$1.typeOver&&(typeOver=!0))}if(result.gecko&&added.length>1){var brs=added.filter((function(n){return"BR"==n.nodeName}));if(2==brs.length){var a=brs[0],b=brs[1];a.parentNode&&a.parentNode.parentNode==b.parentNode?b.remove():a.remove()}}(from>-1||newSel)&&(from>-1&&(this.view.docView.markDirty(from,to),function(view){if(cssChecked)return;cssChecked=!0,"normal"==getComputedStyle(view.dom).whiteSpace&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package.")}(this.view)),this.handleDOMChange(from,to,typeOver,added),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(sel)||selectionToDOM(this.view))}},DOMObserver.prototype.registerMutation=function(mut,added){if(added.indexOf(mut.target)>-1)return null;var desc=this.view.docView.nearestDesc(mut.target);if("attributes"==mut.type&&(desc==this.view.docView||"contenteditable"==mut.attributeName||"style"==mut.attributeName&&!mut.oldValue&&!mut.target.getAttribute("style")))return null;if(!desc||desc.ignoreMutation(mut))return null;if("childList"==mut.type){var prev=mut.previousSibling,next=mut.nextSibling;if(result.ie&&result.ie_version<=11&&mut.addedNodes.length)for(var i=0;i<mut.addedNodes.length;i++){var ref=mut.addedNodes[i],previousSibling=ref.previousSibling,nextSibling=ref.nextSibling;(!previousSibling||Array.prototype.indexOf.call(mut.addedNodes,previousSibling)<0)&&(prev=previousSibling),(!nextSibling||Array.prototype.indexOf.call(mut.addedNodes,nextSibling)<0)&&(next=nextSibling)}for(var fromOffset=prev&&prev.parentNode==mut.target?domIndex(prev)+1:0,from=desc.localPosFromDOM(mut.target,fromOffset,-1),toOffset=next&&next.parentNode==mut.target?domIndex(next):mut.target.childNodes.length,i$1=0;i$1<mut.addedNodes.length;i$1++)added.push(mut.addedNodes[i$1]);return{from:from,to:desc.localPosFromDOM(mut.target,toOffset,1)}}return"attributes"==mut.type?{from:desc.posAtStart-desc.border,to:desc.posAtEnd+desc.border}:{from:desc.posAtStart,to:desc.posAtEnd,typeOver:mut.target.nodeValue==mut.oldValue}};var cssChecked=!1;var handlers={},editHandlers={};function setSelectionOrigin(view,origin){view.lastSelectionOrigin=origin,view.lastSelectionTime=Date.now()}function ensureListeners(view){view.someProp("handleDOMEvents",(function(currentHandlers){for(var type in currentHandlers)view.eventHandlers[type]||view.dom.addEventListener(type,view.eventHandlers[type]=function(event){return runCustomHandler(view,event)})}))}function runCustomHandler(view,event){return view.someProp("handleDOMEvents",(function(handlers){var handler=handlers[event.type];return!!handler&&(handler(view,event)||event.defaultPrevented)}))}function eventCoords(event){return{left:event.clientX,top:event.clientY}}function runHandlerOnContext(view,propName,pos,inside,event){if(-1==inside)return!1;for(var $pos=view.state.doc.resolve(inside),loop=function(i){if(view.someProp(propName,(function(f){return i>$pos.depth?f(view,pos,$pos.nodeAfter,$pos.before(i),event,!0):f(view,pos,$pos.node(i),$pos.before(i),event,!1)})))return{v:!0}},i=$pos.depth+1;i>0;i--){var returned=loop(i);if(returned)return returned.v}return!1}function updateSelection(view,selection,origin){view.focused||view.focus();var tr=view.state.tr.setSelection(selection);"pointer"==origin&&tr.setMeta("pointer",!0),view.dispatch(tr)}function handleSingleClick(view,pos,inside,event,selectNode){return runHandlerOnContext(view,"handleClickOn",pos,inside,event)||view.someProp("handleClick",(function(f){return f(view,pos,event)}))||(selectNode?function(view,inside){if(-1==inside)return!1;var selectedNode,selectAt,sel=view.state.selection;sel instanceof prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.NodeSelection&&(selectedNode=sel.node);for(var $pos=view.state.doc.resolve(inside),i=$pos.depth+1;i>0;i--){var node=i>$pos.depth?$pos.nodeAfter:$pos.node(i);if(prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.NodeSelection.isSelectable(node)){selectAt=selectedNode&&sel.$from.depth>0&&i>=sel.$from.depth&&$pos.before(sel.$from.depth+1)==sel.$from.pos?$pos.before(sel.$from.depth):$pos.before(i);break}}return null!=selectAt&&(updateSelection(view,prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.NodeSelection.create(view.state.doc,selectAt),"pointer"),!0)}(view,inside):function(view,inside){if(-1==inside)return!1;var $pos=view.state.doc.resolve(inside),node=$pos.nodeAfter;return!!(node&&node.isAtom&&prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.NodeSelection.isSelectable(node))&&(updateSelection(view,new prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.NodeSelection($pos),"pointer"),!0)}(view,inside))}function handleDoubleClick(view,pos,inside,event){return runHandlerOnContext(view,"handleDoubleClickOn",pos,inside,event)||view.someProp("handleDoubleClick",(function(f){return f(view,pos,event)}))}function handleTripleClick(view,pos,inside,event){return runHandlerOnContext(view,"handleTripleClickOn",pos,inside,event)||view.someProp("handleTripleClick",(function(f){return f(view,pos,event)}))||function(view,inside){var doc=view.state.doc;if(-1==inside)return!!doc.inlineContent&&(updateSelection(view,prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.TextSelection.create(doc,0,doc.content.size),"pointer"),!0);for(var $pos=doc.resolve(inside),i=$pos.depth+1;i>0;i--){var node=i>$pos.depth?$pos.nodeAfter:$pos.node(i),nodePos=$pos.before(i);if(node.inlineContent)updateSelection(view,prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.TextSelection.create(doc,nodePos+1,nodePos+1+node.content.size),"pointer");else{if(!prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.NodeSelection.isSelectable(node))continue;updateSelection(view,prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.NodeSelection.create(doc,nodePos),"pointer")}return!0}}(view,inside)}function forceDOMFlush(view){return endComposition(view)}editHandlers.keydown=function(view,event){if(view.shiftKey=16==event.keyCode||event.shiftKey,!inOrNearComposition(view,event))if(view.domObserver.forceFlush(),view.lastKeyCode=event.keyCode,view.lastKeyCodeTime=Date.now(),!result.ios||13!=event.keyCode||event.ctrlKey||event.altKey||event.metaKey)view.someProp("handleKeyDown",(function(f){return f(view,event)}))||captureKeyDown(view,event)?event.preventDefault():setSelectionOrigin(view,"key");else{var now=Date.now();view.lastIOSEnter=now,view.lastIOSEnterFallbackTimeout=setTimeout((function(){view.lastIOSEnter==now&&(view.someProp("handleKeyDown",(function(f){return f(view,keyEvent(13,"Enter"))})),view.lastIOSEnter=0)}),200)}},editHandlers.keyup=function(view,e){16==e.keyCode&&(view.shiftKey=!1)},editHandlers.keypress=function(view,event){if(!(inOrNearComposition(view,event)||!event.charCode||event.ctrlKey&&!event.altKey||result.mac&&event.metaKey))if(view.someProp("handleKeyPress",(function(f){return f(view,event)})))event.preventDefault();else{var sel=view.state.selection;if(!(sel instanceof prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.TextSelection&&sel.$from.sameParent(sel.$to))){var text=String.fromCharCode(event.charCode);view.someProp("handleTextInput",(function(f){return f(view,sel.$from.pos,sel.$to.pos,text)}))||view.dispatch(view.state.tr.insertText(text).scrollIntoView()),event.preventDefault()}}};var selectNodeModifier=result.mac?"metaKey":"ctrlKey";handlers.mousedown=function(view,event){view.shiftKey=event.shiftKey;var flushed=forceDOMFlush(view),now=Date.now(),type="singleClick";now-view.lastClick.time<500&&function(event,click){var dx=click.x-event.clientX,dy=click.y-event.clientY;return dx*dx+dy*dy<100}(event,view.lastClick)&&!event[selectNodeModifier]&&("singleClick"==view.lastClick.type?type="doubleClick":"doubleClick"==view.lastClick.type&&(type="tripleClick")),view.lastClick={time:now,x:event.clientX,y:event.clientY,type:type};var pos=view.posAtCoords(eventCoords(event));pos&&("singleClick"==type?view.mouseDown=new MouseDown(view,pos,event,flushed):("doubleClick"==type?handleDoubleClick:handleTripleClick)(view,pos.pos,pos.inside,event)?event.preventDefault():setSelectionOrigin(view,"pointer"))};var MouseDown=function(view,pos,event,flushed){var targetNode,targetPos,this$1=this;if(this.view=view,this.startDoc=view.state.doc,this.pos=pos,this.event=event,this.flushed=flushed,this.selectNode=event[selectNodeModifier],this.allowDefault=event.shiftKey,pos.inside>-1)targetNode=view.state.doc.nodeAt(pos.inside),targetPos=pos.inside;else{var $pos=view.state.doc.resolve(pos.pos);targetNode=$pos.parent,targetPos=$pos.depth?$pos.before():0}this.mightDrag=null;var target=flushed?null:event.target,targetDesc=target?view.docView.nearestDesc(target,!0):null;this.target=targetDesc?targetDesc.dom:null,(targetNode.type.spec.draggable&&!1!==targetNode.type.spec.selectable||view.state.selection instanceof prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.NodeSelection&&targetPos==view.state.selection.from)&&(this.mightDrag={node:targetNode,pos:targetPos,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&result.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){return this$1.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),view.root.addEventListener("mouseup",this.up=this.up.bind(this)),view.root.addEventListener("mousemove",this.move=this.move.bind(this)),setSelectionOrigin(view,"pointer")};function inOrNearComposition(view,event){return!!view.composing||!!(result.safari&&Math.abs(event.timeStamp-view.compositionEndedAt)<500)&&(view.compositionEndedAt=-2e8,!0)}MouseDown.prototype.done=function(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.view.mouseDown=null},MouseDown.prototype.up=function(event){if(this.done(),this.view.dom.contains(3==event.target.nodeType?event.target.parentNode:event.target)){var pos=this.pos;this.view.state.doc!=this.startDoc&&(pos=this.view.posAtCoords(eventCoords(event))),this.allowDefault||!pos?setSelectionOrigin(this.view,"pointer"):handleSingleClick(this.view,pos.pos,pos.inside,event,this.selectNode)?event.preventDefault():this.flushed||result.safari&&this.mightDrag&&!this.mightDrag.node.isAtom||result.chrome&&!(this.view.state.selection instanceof prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.TextSelection)&&(pos.pos==this.view.state.selection.from||pos.pos==this.view.state.selection.to)?(updateSelection(this.view,prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.Selection.near(this.view.state.doc.resolve(pos.pos)),"pointer"),event.preventDefault()):setSelectionOrigin(this.view,"pointer")}},MouseDown.prototype.move=function(event){!this.allowDefault&&(Math.abs(this.event.x-event.clientX)>4||Math.abs(this.event.y-event.clientY)>4)&&(this.allowDefault=!0),setSelectionOrigin(this.view,"pointer")},handlers.touchdown=function(view){forceDOMFlush(view),setSelectionOrigin(view,"pointer")},handlers.contextmenu=function(view){return forceDOMFlush(view)};var timeoutComposition=result.android?5e3:-1;function scheduleComposeEnd(view,delay){clearTimeout(view.composingTimeout),delay>-1&&(view.composingTimeout=setTimeout((function(){return endComposition(view)}),delay))}function clearComposition(view){for(view.composing=!1;view.compositionNodes.length>0;)view.compositionNodes.pop().markParentsDirty()}function endComposition(view,forceUpdate){if(view.domObserver.forceFlush(),clearComposition(view),forceUpdate||view.docView.dirty){var sel=selectionFromDOM(view);return sel&&!sel.eq(view.state.selection)?view.dispatch(view.state.tr.setSelection(sel)):view.updateState(view.state),!0}return!1}editHandlers.compositionstart=editHandlers.compositionupdate=function(view){if(!view.composing){view.domObserver.flush();var state=view.state,$pos=state.selection.$from;if(state.selection.empty&&(state.storedMarks||!$pos.textOffset&&$pos.parentOffset&&$pos.nodeBefore.marks.some((function(m){return!1===m.type.spec.inclusive}))))view.markCursor=view.state.storedMarks||$pos.marks(),endComposition(view,!0),view.markCursor=null;else if(endComposition(view),result.gecko&&state.selection.empty&&$pos.parentOffset&&!$pos.textOffset&&$pos.nodeBefore.marks.length)for(var sel=view.root.getSelection(),node=sel.focusNode,offset=sel.focusOffset;node&&1==node.nodeType&&0!=offset;){var before=offset<0?node.lastChild:node.childNodes[offset-1];if(!before)break;if(3==before.nodeType){sel.collapse(before,before.nodeValue.length);break}node=before,offset=-1}view.composing=!0}scheduleComposeEnd(view,timeoutComposition)},editHandlers.compositionend=function(view,event){view.composing&&(view.composing=!1,view.compositionEndedAt=event.timeStamp,scheduleComposeEnd(view,20))};var brokenClipboardAPI=result.ie&&result.ie_version<15||result.ios&&result.webkit_version<604;function doPaste(view,text,html,e){var slice=parseFromClipboard(view,text,html,view.shiftKey,view.state.selection.$from);if(!view.someProp("handlePaste",(function(f){return f(view,e,slice||prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Slice.empty)}))&&slice){var singleNode=function(slice){return 0==slice.openStart&&0==slice.openEnd&&1==slice.content.childCount?slice.content.firstChild:null}(slice),tr=singleNode?view.state.tr.replaceSelectionWith(singleNode,view.shiftKey):view.state.tr.replaceSelection(slice);view.dispatch(tr.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste"))}}handlers.copy=editHandlers.cut=function(view,e){var sel=view.state.selection,cut="cut"==e.type;if(!sel.empty){var data=brokenClipboardAPI?null:e.clipboardData,ref=serializeForClipboard(view,sel.content()),dom=ref.dom,text=ref.text;data?(e.preventDefault(),data.clearData(),data.setData("text/html",dom.innerHTML),data.setData("text/plain",text)):function(view,dom){if(view.dom.parentNode){var wrap=view.dom.parentNode.appendChild(document.createElement("div"));wrap.appendChild(dom),wrap.style.cssText="position: fixed; left: -10000px; top: 10px";var sel=getSelection(),range=document.createRange();range.selectNodeContents(dom),view.dom.blur(),sel.removeAllRanges(),sel.addRange(range),setTimeout((function(){wrap.parentNode&&wrap.parentNode.removeChild(wrap),view.focus()}),50)}}(view,dom),cut&&view.dispatch(view.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},editHandlers.paste=function(view,e){var data=brokenClipboardAPI?null:e.clipboardData,html=data&&data.getData("text/html"),text=data&&data.getData("text/plain");data&&(html||text||data.files.length)?(doPaste(view,text,html,e),e.preventDefault()):function(view,e){if(view.dom.parentNode){var plainText=view.shiftKey||view.state.selection.$from.parent.type.spec.code,target=view.dom.parentNode.appendChild(document.createElement(plainText?"textarea":"div"));plainText||(target.contentEditable="true"),target.style.cssText="position: fixed; left: -10000px; top: 10px",target.focus(),setTimeout((function(){view.focus(),target.parentNode&&target.parentNode.removeChild(target),plainText?doPaste(view,target.value,null,e):doPaste(view,target.textContent,target.innerHTML,e)}),50)}}(view,e)};var Dragging=function(slice,move){this.slice=slice,this.move=move},dragCopyModifier=result.mac?"altKey":"ctrlKey";for(var prop in handlers.dragstart=function(view,e){var mouseDown=view.mouseDown;if(mouseDown&&mouseDown.done(),e.dataTransfer){var sel=view.state.selection,pos=sel.empty?null:view.posAtCoords(eventCoords(e));if(pos&&pos.pos>=sel.from&&pos.pos<=(sel instanceof prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.NodeSelection?sel.to-1:sel.to));else if(mouseDown&&mouseDown.mightDrag)view.dispatch(view.state.tr.setSelection(prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.NodeSelection.create(view.state.doc,mouseDown.mightDrag.pos)));else if(e.target&&1==e.target.nodeType){var desc=view.docView.nearestDesc(e.target,!0);if(!desc||!desc.node.type.spec.draggable||desc==view.docView)return;view.dispatch(view.state.tr.setSelection(prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.NodeSelection.create(view.state.doc,desc.posBefore)))}var slice=view.state.selection.content(),ref=serializeForClipboard(view,slice),dom=ref.dom,text=ref.text;e.dataTransfer.clearData(),e.dataTransfer.setData(brokenClipboardAPI?"Text":"text/html",dom.innerHTML),brokenClipboardAPI||e.dataTransfer.setData("text/plain",text),view.dragging=new Dragging(slice,!e[dragCopyModifier])}},handlers.dragend=function(view){var dragging=view.dragging;window.setTimeout((function(){view.dragging==dragging&&(view.dragging=null)}),50)},editHandlers.dragover=editHandlers.dragenter=function(_,e){return e.preventDefault()},editHandlers.drop=function(view,e){var dragging=view.dragging;if(view.dragging=null,e.dataTransfer){var eventPos=view.posAtCoords(eventCoords(e));if(eventPos){var $mouse=view.state.doc.resolve(eventPos.pos);if($mouse){var slice=dragging&&dragging.slice||parseFromClipboard(view,e.dataTransfer.getData(brokenClipboardAPI?"Text":"text/plain"),brokenClipboardAPI?null:e.dataTransfer.getData("text/html"),!1,$mouse),move=dragging&&!e[dragCopyModifier];if(view.someProp("handleDrop",(function(f){return f(view,e,slice||prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Slice.empty,move)})))e.preventDefault();else if(slice){e.preventDefault();var insertPos=slice?Object(prosemirror_transform__WEBPACK_IMPORTED_MODULE_2__.dropPoint)(view.state.doc,$mouse.pos,slice):$mouse.pos;null==insertPos&&(insertPos=$mouse.pos);var tr=view.state.tr;move&&tr.deleteSelection();var pos=tr.mapping.map(insertPos),isNode=0==slice.openStart&&0==slice.openEnd&&1==slice.content.childCount,beforeInsert=tr.doc;if(isNode?tr.replaceRangeWith(pos,pos,slice.content.firstChild):tr.replaceRange(pos,pos,slice),!tr.doc.eq(beforeInsert)){var $pos=tr.doc.resolve(pos);if(isNode&&prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.NodeSelection.isSelectable(slice.content.firstChild)&&$pos.nodeAfter&&$pos.nodeAfter.sameMarkup(slice.content.firstChild))tr.setSelection(new prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.NodeSelection($pos));else{var end=tr.mapping.map(insertPos);tr.mapping.maps[tr.mapping.maps.length-1].forEach((function(_from,_to,_newFrom,newTo){return end=newTo})),tr.setSelection(selectionBetween(view,$pos,tr.doc.resolve(end)))}view.focus(),view.dispatch(tr.setMeta("uiEvent","drop"))}}}}}},handlers.focus=function(view){view.focused||(view.domObserver.stop(),view.dom.classList.add("ProseMirror-focused"),view.domObserver.start(),view.focused=!0,setTimeout((function(){view.docView&&view.hasFocus()&&!view.domObserver.currentSelection.eq(view.root.getSelection())&&selectionToDOM(view)}),20))},handlers.blur=function(view){view.focused&&(view.domObserver.stop(),view.dom.classList.remove("ProseMirror-focused"),view.domObserver.start(),view.domObserver.currentSelection.set({}),view.focused=!1)},handlers.beforeinput=function(view,event){if(result.chrome&&result.android&&"deleteContentBackward"==event.inputType){var domChangeCount=view.domChangeCount;setTimeout((function(){if(view.domChangeCount==domChangeCount&&(view.dom.blur(),view.focus(),!view.someProp("handleKeyDown",(function(f){return f(view,keyEvent(8,"Backspace"))})))){var $cursor=view.state.selection.$cursor;$cursor&&$cursor.pos>0&&view.dispatch(view.state.tr.delete($cursor.pos-1,$cursor.pos).scrollIntoView())}}),50)}},editHandlers)handlers[prop]=editHandlers[prop];function compareObjs(a,b){if(a==b)return!0;for(var p in a)if(a[p]!==b[p])return!1;for(var p$1 in b)if(!(p$1 in a))return!1;return!0}var WidgetType=function(toDOM,spec){this.spec=spec||noSpec,this.side=this.spec.side||0,this.toDOM=toDOM};WidgetType.prototype.map=function(mapping,span,offset,oldOffset){var ref=mapping.mapResult(span.from+oldOffset,this.side<0?-1:1),pos=ref.pos;return ref.deleted?null:new Decoration(pos-offset,pos-offset,this)},WidgetType.prototype.valid=function(){return!0},WidgetType.prototype.eq=function(other){return this==other||other instanceof WidgetType&&(this.spec.key&&this.spec.key==other.spec.key||this.toDOM==other.toDOM&&compareObjs(this.spec,other.spec))};var InlineType=function(attrs,spec){this.spec=spec||noSpec,this.attrs=attrs};InlineType.prototype.map=function(mapping,span,offset,oldOffset){var from=mapping.map(span.from+oldOffset,this.spec.inclusiveStart?-1:1)-offset,to=mapping.map(span.to+oldOffset,this.spec.inclusiveEnd?1:-1)-offset;return from>=to?null:new Decoration(from,to,this)},InlineType.prototype.valid=function(_,span){return span.from<span.to},InlineType.prototype.eq=function(other){return this==other||other instanceof InlineType&&compareObjs(this.attrs,other.attrs)&&compareObjs(this.spec,other.spec)},InlineType.is=function(span){return span.type instanceof InlineType};var NodeType=function(attrs,spec){this.spec=spec||noSpec,this.attrs=attrs};NodeType.prototype.map=function(mapping,span,offset,oldOffset){var from=mapping.mapResult(span.from+oldOffset,1);if(from.deleted)return null;var to=mapping.mapResult(span.to+oldOffset,-1);return to.deleted||to.pos<=from.pos?null:new Decoration(from.pos-offset,to.pos-offset,this)},NodeType.prototype.valid=function(node,span){var ref=node.content.findIndex(span.from),index=ref.index,offset=ref.offset;return offset==span.from&&offset+node.child(index).nodeSize==span.to},NodeType.prototype.eq=function(other){return this==other||other instanceof NodeType&&compareObjs(this.attrs,other.attrs)&&compareObjs(this.spec,other.spec)};var Decoration=function(from,to,type){this.from=from,this.to=to,this.type=type},prototypeAccessors$1={spec:{configurable:!0},inline:{configurable:!0}};Decoration.prototype.copy=function(from,to){return new Decoration(from,to,this.type)},Decoration.prototype.eq=function(other,offset){return void 0===offset&&(offset=0),this.type.eq(other.type)&&this.from+offset==other.from&&this.to+offset==other.to},Decoration.prototype.map=function(mapping,offset,oldOffset){return this.type.map(mapping,this,offset,oldOffset)},Decoration.widget=function(pos,toDOM,spec){return new Decoration(pos,pos,new WidgetType(toDOM,spec))},Decoration.inline=function(from,to,attrs,spec){return new Decoration(from,to,new InlineType(attrs,spec))},Decoration.node=function(from,to,attrs,spec){return new Decoration(from,to,new NodeType(attrs,spec))},prototypeAccessors$1.spec.get=function(){return this.type.spec},prototypeAccessors$1.inline.get=function(){return this.type instanceof InlineType},Object.defineProperties(Decoration.prototype,prototypeAccessors$1);var none=[],noSpec={},DecorationSet=function(local,children){this.local=local&&local.length?local:none,this.children=children&&children.length?children:none};DecorationSet.create=function(doc,decorations){return decorations.length?buildTree(decorations,doc,0,noSpec):empty},DecorationSet.prototype.find=function(start,end,predicate){var result=[];return this.findInner(null==start?0:start,null==end?1e9:end,result,0,predicate),result},DecorationSet.prototype.findInner=function(start,end,result,offset,predicate){for(var i=0;i<this.local.length;i++){var span=this.local[i];span.from<=end&&span.to>=start&&(!predicate||predicate(span.spec))&&result.push(span.copy(span.from+offset,span.to+offset))}for(var i$1=0;i$1<this.children.length;i$1+=3)if(this.children[i$1]<end&&this.children[i$1+1]>start){var childOff=this.children[i$1]+1;this.children[i$1+2].findInner(start-childOff,end-childOff,result,offset+childOff,predicate)}},DecorationSet.prototype.map=function(mapping,doc,options){return this==empty||0==mapping.maps.length?this:this.mapInner(mapping,doc,0,0,options||noSpec)},DecorationSet.prototype.mapInner=function(mapping,node,offset,oldOffset,options){for(var newLocal,i=0;i<this.local.length;i++){var mapped=this.local[i].map(mapping,offset,oldOffset);mapped&&mapped.type.valid(node,mapped)?(newLocal||(newLocal=[])).push(mapped):options.onRemove&&options.onRemove(this.local[i].spec)}return this.children.length?function(oldChildren,newLocal,mapping,node,offset,oldOffset,options){for(var children=oldChildren.slice(),shift=function(oldStart,oldEnd,newStart,newEnd){for(var i=0;i<children.length;i+=3){var end=children[i+1],dSize=void 0;-1==end||oldStart>end+oldOffset||(oldEnd>=children[i]+oldOffset?children[i+1]=-1:newStart>=offset&&(dSize=newEnd-newStart-(oldEnd-oldStart))&&(children[i]+=dSize,children[i+1]+=dSize))}},i=0;i<mapping.maps.length;i++)mapping.maps[i].forEach(shift);for(var mustRebuild=!1,i$1=0;i$1<children.length;i$1+=3)if(-1==children[i$1+1]){var from=mapping.map(oldChildren[i$1]+oldOffset),fromLocal=from-offset;if(fromLocal<0||fromLocal>=node.content.size){mustRebuild=!0;continue}var toLocal=mapping.map(oldChildren[i$1+1]+oldOffset,-1)-offset,ref=node.content.findIndex(fromLocal),index=ref.index,childOffset=ref.offset,childNode=node.maybeChild(index);if(childNode&&childOffset==fromLocal&&childOffset+childNode.nodeSize==toLocal){var mapped=children[i$1+2].mapInner(mapping,childNode,from+1,oldChildren[i$1]+oldOffset+1,options);mapped!=empty?(children[i$1]=fromLocal,children[i$1+1]=toLocal,children[i$1+2]=mapped):(children[i$1+1]=-2,mustRebuild=!0)}else mustRebuild=!0}if(mustRebuild){var built=buildTree(function(children,oldChildren,decorations,mapping,offset,oldOffset,options){function gather(set,oldOffset){for(var i=0;i<set.local.length;i++){var mapped=set.local[i].map(mapping,offset,oldOffset);mapped?decorations.push(mapped):options.onRemove&&options.onRemove(set.local[i].spec)}for(var i$1=0;i$1<set.children.length;i$1+=3)gather(set.children[i$1+2],set.children[i$1]+oldOffset+1)}for(var i=0;i<children.length;i+=3)-1==children[i+1]&&gather(children[i+2],oldChildren[i]+oldOffset+1);return decorations}(children,oldChildren,newLocal||[],mapping,offset,oldOffset,options),node,0,options);newLocal=built.local;for(var i$2=0;i$2<children.length;i$2+=3)children[i$2+1]<0&&(children.splice(i$2,3),i$2-=3);for(var i$3=0,j=0;i$3<built.children.length;i$3+=3){for(var from$1=built.children[i$3];j<children.length&&children[j]<from$1;)j+=3;children.splice(j,0,built.children[i$3],built.children[i$3+1],built.children[i$3+2])}}return new DecorationSet(newLocal&&newLocal.sort(byPos),children)}(this.children,newLocal,mapping,node,offset,oldOffset,options):newLocal?new DecorationSet(newLocal.sort(byPos)):empty},DecorationSet.prototype.add=function(doc,decorations){return decorations.length?this==empty?DecorationSet.create(doc,decorations):this.addInner(doc,decorations,0):this},DecorationSet.prototype.addInner=function(doc,decorations,offset){var children,this$1=this,childIndex=0;doc.forEach((function(childNode,childOffset){var found,baseOffset=childOffset+offset;if(found=takeSpansForNode(decorations,childNode,baseOffset)){for(children||(children=this$1.children.slice());childIndex<children.length&&children[childIndex]<childOffset;)childIndex+=3;children[childIndex]==childOffset?children[childIndex+2]=children[childIndex+2].addInner(childNode,found,baseOffset+1):children.splice(childIndex,0,childOffset,childOffset+childNode.nodeSize,buildTree(found,childNode,baseOffset+1,noSpec)),childIndex+=3}}));var local=moveSpans(childIndex?withoutNulls(decorations):decorations,-offset);return new DecorationSet(local.length?this.local.concat(local).sort(byPos):this.local,children||this.children)},DecorationSet.prototype.remove=function(decorations){return 0==decorations.length||this==empty?this:this.removeInner(decorations,0)},DecorationSet.prototype.removeInner=function(decorations,offset){for(var children=this.children,local=this.local,i=0;i<children.length;i+=3){for(var found=void 0,from=children[i]+offset,to=children[i+1]+offset,j=0,span=void 0;j<decorations.length;j++)(span=decorations[j])&&span.from>from&&span.to<to&&(decorations[j]=null,(found||(found=[])).push(span));if(found){children==this.children&&(children=this.children.slice());var removed=children[i+2].removeInner(found,from+1);removed!=empty?children[i+2]=removed:(children.splice(i,3),i-=3)}}if(local.length)for(var i$1=0,span$1=void 0;i$1<decorations.length;i$1++)if(span$1=decorations[i$1])for(var j$1=0;j$1<local.length;j$1++)local[j$1].eq(span$1,offset)&&(local==this.local&&(local=this.local.slice()),local.splice(j$1--,1));return children==this.children&&local==this.local?this:local.length||children.length?new DecorationSet(local,children):empty},DecorationSet.prototype.forChild=function(offset,node){if(this==empty)return this;if(node.isLeaf)return DecorationSet.empty;for(var child,local,i=0;i<this.children.length;i+=3)if(this.children[i]>=offset){this.children[i]==offset&&(child=this.children[i+2]);break}for(var start=offset+1,end=start+node.content.size,i$1=0;i$1<this.local.length;i$1++){var dec=this.local[i$1];if(dec.from<end&&dec.to>start&&dec.type instanceof InlineType){var from=Math.max(start,dec.from)-start,to=Math.min(end,dec.to)-start;from<to&&(local||(local=[])).push(dec.copy(from,to))}}if(local){var localSet=new DecorationSet(local.sort(byPos));return child?new DecorationGroup([localSet,child]):localSet}return child||empty},DecorationSet.prototype.eq=function(other){if(this==other)return!0;if(!(other instanceof DecorationSet)||this.local.length!=other.local.length||this.children.length!=other.children.length)return!1;for(var i=0;i<this.local.length;i++)if(!this.local[i].eq(other.local[i]))return!1;for(var i$1=0;i$1<this.children.length;i$1+=3)if(this.children[i$1]!=other.children[i$1]||this.children[i$1+1]!=other.children[i$1+1]||!this.children[i$1+2].eq(other.children[i$1+2]))return!1;return!0},DecorationSet.prototype.locals=function(node){return removeOverlap(this.localsInner(node))},DecorationSet.prototype.localsInner=function(node){if(this==empty)return none;if(node.inlineContent||!this.local.some(InlineType.is))return this.local;for(var result=[],i=0;i<this.local.length;i++)this.local[i].type instanceof InlineType||result.push(this.local[i]);return result};var empty=new DecorationSet;DecorationSet.empty=empty,DecorationSet.removeOverlap=removeOverlap;var DecorationGroup=function(members){this.members=members};function moveSpans(spans,offset){if(!offset||!spans.length)return spans;for(var result=[],i=0;i<spans.length;i++){var span=spans[i];result.push(new Decoration(span.from+offset,span.to+offset,span.type))}return result}function takeSpansForNode(spans,node,offset){if(node.isLeaf)return null;for(var end=offset+node.nodeSize,found=null,i=0,span=void 0;i<spans.length;i++)(span=spans[i])&&span.from>offset&&span.to<end&&((found||(found=[])).push(span),spans[i]=null);return found}function withoutNulls(array){for(var result=[],i=0;i<array.length;i++)null!=array[i]&&result.push(array[i]);return result}function buildTree(spans,node,offset,options){var children=[],hasNulls=!1;node.forEach((function(childNode,localStart){var found=takeSpansForNode(spans,childNode,localStart+offset);if(found){hasNulls=!0;var subtree=buildTree(found,childNode,offset+localStart+1,options);subtree!=empty&&children.push(localStart,localStart+childNode.nodeSize,subtree)}}));for(var locals=moveSpans(hasNulls?withoutNulls(spans):spans,-offset).sort(byPos),i=0;i<locals.length;i++)locals[i].type.valid(node,locals[i])||(options.onRemove&&options.onRemove(locals[i].spec),locals.splice(i--,1));return locals.length||children.length?new DecorationSet(locals,children):empty}function byPos(a,b){return a.from-b.from||a.to-b.to}function removeOverlap(spans){for(var working=spans,i=0;i<working.length-1;i++){var span=working[i];if(span.from!=span.to)for(var j=i+1;j<working.length;j++){var next=working[j];if(next.from!=span.from){next.from<span.to&&(working==spans&&(working=spans.slice()),working[i]=span.copy(span.from,next.from),insertAhead(working,j,span.copy(next.from,span.to)));break}next.to!=span.to&&(working==spans&&(working=spans.slice()),working[j]=next.copy(next.from,span.to),insertAhead(working,j+1,next.copy(span.to,next.to)))}}return working}function insertAhead(array,i,deco){for(;i<array.length&&byPos(deco,array[i])>0;)i++;array.splice(i,0,deco)}function viewDecorations(view){var found=[];return view.someProp("decorations",(function(f){var result=f(view.state);result&&result!=empty&&found.push(result)})),view.cursorWrapper&&found.push(DecorationSet.create(view.state.doc,[view.cursorWrapper.deco])),DecorationGroup.from(found)}DecorationGroup.prototype.forChild=function(offset,child){if(child.isLeaf)return DecorationSet.empty;for(var found=[],i=0;i<this.members.length;i++){var result=this.members[i].forChild(offset,child);result!=empty&&(result instanceof DecorationGroup?found=found.concat(result.members):found.push(result))}return DecorationGroup.from(found)},DecorationGroup.prototype.eq=function(other){if(!(other instanceof DecorationGroup)||other.members.length!=this.members.length)return!1;for(var i=0;i<this.members.length;i++)if(!this.members[i].eq(other.members[i]))return!1;return!0},DecorationGroup.prototype.locals=function(node){for(var result,sorted=!0,i=0;i<this.members.length;i++){var locals=this.members[i].localsInner(node);if(locals.length)if(result){sorted&&(result=result.slice(),sorted=!1);for(var j=0;j<locals.length;j++)result.push(locals[j])}else result=locals}return result?removeOverlap(sorted?result:result.sort(byPos)):none},DecorationGroup.from=function(members){switch(members.length){case 0:return empty;case 1:return members[0];default:return new DecorationGroup(members)}};var EditorView=function(place,props){this._props=props,this.state=props.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.trackWrites=null,this.dom=place&&place.mount||document.createElement("div"),place&&(place.appendChild?place.appendChild(this.dom):place.apply?place(this.dom):place.mount&&(this.mounted=!0)),this.editable=getEditable(this),this.markCursor=null,this.cursorWrapper=null,updateCursorWrapper(this),this.nodeViews=buildNodeViews(this),this.docView=docViewDesc(this.state.doc,computeDocDeco(this),viewDecorations(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,function(view){view.shiftKey=!1,view.mouseDown=null,view.lastKeyCode=null,view.lastKeyCodeTime=0,view.lastClick={time:0,x:0,y:0,type:""},view.lastSelectionOrigin=null,view.lastSelectionTime=0,view.lastIOSEnter=0,view.lastIOSEnterFallbackTimeout=null,view.composing=!1,view.composingTimeout=null,view.compositionNodes=[],view.compositionEndedAt=-2e8,view.domObserver=new DOMObserver(view,(function(from,to,typeOver,added){return readDOMChange(view,from,to,typeOver,added)})),view.domObserver.start(),view.domChangeCount=0,view.eventHandlers=Object.create(null);var loop=function(event){var handler=handlers[event];view.dom.addEventListener(event,view.eventHandlers[event]=function(event){!function(view,event){if(!event.bubbles)return!0;if(event.defaultPrevented)return!1;for(var node=event.target;node!=view.dom;node=node.parentNode)if(!node||11==node.nodeType||node.pmViewDesc&&node.pmViewDesc.stopEvent(event))return!1;return!0}(view,event)||runCustomHandler(view,event)||!view.editable&&event.type in editHandlers||handler(view,event)})};for(var event in handlers)loop(event);result.safari&&view.dom.addEventListener("input",(function(){return null})),ensureListeners(view)}(this),this.pluginViews=[],this.updatePluginViews()},prototypeAccessors$2={props:{configurable:!0},root:{configurable:!0}};function computeDocDeco(view){var attrs=Object.create(null);return attrs.class="ProseMirror",attrs.contenteditable=String(view.editable),view.someProp("attributes",(function(value){if("function"==typeof value&&(value=value(view.state)),value)for(var attr in value)"class"==attr?attrs.class+=" "+value[attr]:attrs[attr]||"contenteditable"==attr||"nodeName"==attr||(attrs[attr]=String(value[attr]))})),[Decoration.node(0,view.state.doc.content.size,attrs)]}function updateCursorWrapper(view){if(view.markCursor){var dom=document.createElement("img");dom.setAttribute("mark-placeholder","true"),view.cursorWrapper={dom:dom,deco:Decoration.widget(view.state.selection.head,dom,{raw:!0,marks:view.markCursor})}}else view.cursorWrapper=null}function getEditable(view){return!view.someProp("editable",(function(value){return!1===value(view.state)}))}function buildNodeViews(view){var result={};return view.someProp("nodeViews",(function(obj){for(var prop in obj)Object.prototype.hasOwnProperty.call(result,prop)||(result[prop]=obj[prop])})),result}prototypeAccessors$2.props.get=function(){if(this._props.state!=this.state){var prev=this._props;for(var name in this._props={},prev)this._props[name]=prev[name];this._props.state=this.state}return this._props},EditorView.prototype.update=function(props){props.handleDOMEvents!=this._props.handleDOMEvents&&ensureListeners(this),this._props=props,this.updateStateInner(props.state,!0)},EditorView.prototype.setProps=function(props){var updated={};for(var name in this._props)updated[name]=this._props[name];for(var name$1 in updated.state=this.state,props)updated[name$1]=props[name$1];this.update(updated)},EditorView.prototype.updateState=function(state){this.updateStateInner(state,this.state.plugins!=state.plugins)},EditorView.prototype.updateStateInner=function(state,reconfigured){var this$1=this,prev=this.state,redraw=!1,updateSel=!1;if(state.storedMarks&&this.composing&&(clearComposition(this),updateSel=!0),this.state=state,reconfigured){var nodeViews=buildNodeViews(this);(function(a,b){var nA=0,nB=0;for(var prop in a){if(a[prop]!=b[prop])return!0;nA++}for(var _ in b)nB++;return nA!=nB})(nodeViews,this.nodeViews)&&(this.nodeViews=nodeViews,redraw=!0),ensureListeners(this)}this.editable=getEditable(this),updateCursorWrapper(this);var innerDeco=viewDecorations(this),outerDeco=computeDocDeco(this),scroll=reconfigured?"reset":state.scrollToSelection>prev.scrollToSelection?"to selection":"preserve",updateDoc=redraw||!this.docView.matchesNode(state.doc,outerDeco,innerDeco);!updateDoc&&state.selection.eq(prev.selection)||(updateSel=!0);var view,anchorDOM,domSel,sel1,sel2,depth,ref,refDOM,refTop,stack,newRefTop,oldScrollPos="preserve"==scroll&&updateSel&&null==this.dom.style.overflowAnchor&&function(view){for(var refDOM,refTop,rect=view.dom.getBoundingClientRect(),startY=Math.max(0,rect.top),x=(rect.left+rect.right)/2,y=startY+1;y<Math.min(innerHeight,rect.bottom);y+=5){var dom=view.root.elementFromPoint(x,y);if(dom!=view.dom&&view.dom.contains(dom)){var localRect=dom.getBoundingClientRect();if(localRect.top>=startY-20){refDOM=dom,refTop=localRect.top;break}}}return{refDOM:refDOM,refTop:refTop,stack:scrollStack(view.dom)}}(this);if(updateSel){this.domObserver.stop();var forceSelUpdate=updateDoc&&(result.ie||result.chrome)&&!this.composing&&!prev.selection.empty&&!state.selection.empty&&(sel1=prev.selection,sel2=state.selection,depth=Math.min(sel1.$anchor.sharedDepth(sel1.head),sel2.$anchor.sharedDepth(sel2.head)),sel1.$anchor.start(depth)!=sel2.$anchor.start(depth));if(updateDoc){var chromeKludge=result.chrome?this.trackWrites=this.root.getSelection().focusNode:null;!redraw&&this.docView.update(state.doc,outerDeco,innerDeco,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=docViewDesc(state.doc,outerDeco,innerDeco,this.dom,this)),chromeKludge&&!this.trackWrites&&(forceSelUpdate=!0)}forceSelUpdate||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&(view=this,anchorDOM=view.docView.domFromPos(view.state.selection.anchor),domSel=view.root.getSelection(),isEquivalentPosition(anchorDOM.node,anchorDOM.offset,domSel.anchorNode,domSel.anchorOffset)))?selectionToDOM(this,forceSelUpdate):(syncNodeSelection(this,state.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(prev),"reset"==scroll)this.dom.scrollTop=0;else if("to selection"==scroll){var startDOM=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",(function(f){return f(this$1)}))||(state.selection instanceof prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.NodeSelection?scrollRectIntoView(this,this.docView.domAfterPos(state.selection.from).getBoundingClientRect(),startDOM):scrollRectIntoView(this,this.coordsAtPos(state.selection.head,1),startDOM))}else oldScrollPos&&(refDOM=(ref=oldScrollPos).refDOM,refTop=ref.refTop,stack=ref.stack,newRefTop=refDOM?refDOM.getBoundingClientRect().top:0,restoreScrollStack(stack,0==newRefTop?0:newRefTop-refTop))},EditorView.prototype.destroyPluginViews=function(){for(var view;view=this.pluginViews.pop();)view.destroy&&view.destroy()},EditorView.prototype.updatePluginViews=function(prevState){if(prevState&&prevState.plugins==this.state.plugins)for(var i$1=0;i$1<this.pluginViews.length;i$1++){var pluginView=this.pluginViews[i$1];pluginView.update&&pluginView.update(this,prevState)}else{this.destroyPluginViews();for(var i=0;i<this.state.plugins.length;i++){var plugin=this.state.plugins[i];plugin.spec.view&&this.pluginViews.push(plugin.spec.view(this))}}},EditorView.prototype.someProp=function(propName,f){var value,prop=this._props&&this._props[propName];if(null!=prop&&(value=f?f(prop):prop))return value;var plugins=this.state.plugins;if(plugins)for(var i=0;i<plugins.length;i++){var prop$1=plugins[i].props[propName];if(null!=prop$1&&(value=f?f(prop$1):prop$1))return value}},EditorView.prototype.hasFocus=function(){return this.root.activeElement==this.dom},EditorView.prototype.focus=function(){this.domObserver.stop(),this.editable&&function(dom){if(dom.setActive)return dom.setActive();if(preventScrollSupported)return dom.focus(preventScrollSupported);var stored=scrollStack(dom);dom.focus(null==preventScrollSupported?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),preventScrollSupported||(preventScrollSupported=!1,restoreScrollStack(stored,0))}(this.dom),selectionToDOM(this),this.domObserver.start()},prototypeAccessors$2.root.get=function(){var cached=this._root;if(null==cached)for(var search=this.dom.parentNode;search;search=search.parentNode)if(9==search.nodeType||11==search.nodeType&&search.host)return search.getSelection||(Object.getPrototypeOf(search).getSelection=function(){return document.getSelection()}),this._root=search;return cached||document},EditorView.prototype.posAtCoords=function(coords){return posAtCoords(this,coords)},EditorView.prototype.coordsAtPos=function(pos,side){return void 0===side&&(side=1),coordsAtPos(this,pos,side)},EditorView.prototype.domAtPos=function(pos){return this.docView.domFromPos(pos)},EditorView.prototype.nodeDOM=function(pos){var desc=this.docView.descAt(pos);return desc?desc.nodeDOM:null},EditorView.prototype.posAtDOM=function(node,offset,bias){void 0===bias&&(bias=-1);var pos=this.docView.posFromDOM(node,offset,bias);if(null==pos)throw new RangeError("DOM position not inside the editor");return pos},EditorView.prototype.endOfTextblock=function(dir,state){return endOfTextblock(this,state||this.state,dir)},EditorView.prototype.destroy=function(){this.docView&&(!function(view){for(var type in view.domObserver.stop(),view.eventHandlers)view.dom.removeEventListener(type,view.eventHandlers[type]);clearTimeout(view.composingTimeout),clearTimeout(view.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],viewDecorations(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},EditorView.prototype.dispatchEvent=function(event){return function(view,event){runCustomHandler(view,event)||!handlers[event.type]||!view.editable&&event.type in editHandlers||handlers[event.type](view,event)}(this,event)},EditorView.prototype.dispatch=function(tr){var dispatchTransaction=this._props.dispatchTransaction;dispatchTransaction?dispatchTransaction.call(this,tr):this.updateState(this.state.apply(tr))},Object.defineProperties(EditorView.prototype,prototypeAccessors$2)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sinkListItem=exports.liftListItem=exports.splitListItem=exports.wrapInList=void 0;const prosemirror_transform_1=__webpack_require__(5),prosemirror_model_1=__webpack_require__(1);exports.wrapInList=function(listType,attrs){return(state,dispatch)=>{const{$from:$from,$to:$to}=state.selection;let range=$from.blockRange($to),doJoin=!1,outerRange=range;if(!range)return!1;if(range.depth>=2&&$from.node(range.depth-1).type.compatibleContent(listType)&&0===range.startIndex){if(0===$from.index(range.depth-1))return!1;const $insert=state.doc.resolve(range.start-2);outerRange=new prosemirror_model_1.NodeRange($insert,$insert,range.depth),range.endIndex<range.parent.childCount&&(range=new prosemirror_model_1.NodeRange($from,state.doc.resolve($to.end(range.depth)),range.depth)),doJoin=!0}const wrap=prosemirror_transform_1.findWrapping(outerRange,listType,attrs,range);return!!wrap&&(dispatch&&dispatch(function(tr,range,wrappers,joinBefore,listType){let content=prosemirror_model_1.Fragment.empty;for(let i=wrappers.length-1;i>=0;i--)content=prosemirror_model_1.Fragment.from(wrappers[i].type.create(wrappers[i].attrs,content));tr.step(new prosemirror_transform_1.ReplaceAroundStep(range.start-(joinBefore?2:0),range.end,range.start,range.end,new prosemirror_model_1.Slice(content,0,0),wrappers.length,!0));let found=0;for(let i=0;i<wrappers.length;i++)wrappers[i].type===listType&&(found=i+1);const splitDepth=wrappers.length-found;let splitPos=range.start+wrappers.length-(joinBefore?2:0),parent=range.parent;for(let i=range.startIndex,e=range.endIndex,first=!0;i<e;i++,first=!1)!first&&prosemirror_transform_1.canSplit(tr.doc,splitPos,splitDepth)&&(tr.split(splitPos,splitDepth),splitPos+=2*splitDepth),splitPos+=parent.child(i).nodeSize;return tr}(state.tr,range,wrap,doJoin,listType).scrollIntoView()),!0)}},exports.splitListItem=function(itemType){return(state,dispatch)=>{const{$from:$from,$to:$to,node:node}=state.selection;if(node&&node.isBlock||$from.depth<2||!$from.sameParent($to))return!1;const grandParent=$from.node(-1);if(grandParent.type!==itemType)return!1;if(0===$from.parent.content.size){if(2===$from.depth||$from.node(-3).type!==itemType||$from.index(-2)!==$from.node(-2).childCount-1)return!1;if(dispatch){let wrap=prosemirror_model_1.Fragment.empty,keepItem=$from.index(-1)>0;for(let d=$from.depth-(keepItem?1:2);d>=$from.depth-3;d--)wrap=prosemirror_model_1.Fragment.from($from.node(d).copy(wrap));wrap=wrap.append(prosemirror_model_1.Fragment.from(itemType.createAndFill()));const tr=state.tr.replace($from.before(keepItem?null:-1),$from.after(-3),new prosemirror_model_1.Slice(wrap,keepItem?3:2,2));tr.setSelection(state.selection.constructor.near(tr.doc.resolve($from.pos+(keepItem?3:2)))),dispatch(tr.scrollIntoView())}return!0}const nextType=$to.pos===$from.end()?grandParent.contentMatchAt($from.indexAfter(-1)).defaultType:null,tr=state.tr.delete($from.pos,$to.pos),types=nextType&&[null,{type:nextType}];return!!prosemirror_transform_1.canSplit(tr.doc,$from.pos,2,types)&&(dispatch&&dispatch(tr.split($from.pos,2,types).scrollIntoView()),!0)}},exports.liftListItem=function(itemType){return(state,dispatch)=>{const{$from:$from,$to:$to}=state.selection,range=$from.blockRange($to,node=>node.childCount&&node.firstChild.type===itemType);return!!range&&(!dispatch||($from.node(range.depth-1).type===itemType?function(state,dispatch,itemType,range){const tr=state.tr,end=range.end,endOfList=range.$to.end(range.depth);end<endOfList&&(tr.step(new prosemirror_transform_1.ReplaceAroundStep(end-1,endOfList,end,endOfList,new prosemirror_model_1.Slice(prosemirror_model_1.Fragment.from(itemType.create(null,range.parent.copy())),1,0),1,!0)),range=new prosemirror_model_1.NodeRange(tr.doc.resolve(range.$from.pos),tr.doc.resolve(endOfList),range.depth));return dispatch(tr.lift(range,prosemirror_transform_1.liftTarget(range)).scrollIntoView()),!0}(state,dispatch,itemType,range):function(state,dispatch,range){const tr=state.tr,list=range.parent;for(let pos=range.end,i=range.endIndex-1,e=range.startIndex;i>e;i--)pos-=list.child(i).nodeSize,tr.delete(pos-1,pos+1);const $start=tr.doc.resolve(range.start),item=$start.nodeAfter,atStart=0===range.startIndex,atEnd=range.endIndex===list.childCount,parent=$start.node(-1),indexBefore=$start.index(-1);if(!parent.canReplace(indexBefore+(atStart?0:1),indexBefore+1,item.content.append(atEnd?prosemirror_model_1.Fragment.empty:prosemirror_model_1.Fragment.from(list))))return!1;const start=$start.pos,end=start+item.nodeSize;return tr.step(new prosemirror_transform_1.ReplaceAroundStep(start-(atStart?1:0),end+(atEnd?1:0),start+1,end-1,new prosemirror_model_1.Slice((atStart?prosemirror_model_1.Fragment.empty:prosemirror_model_1.Fragment.from(list.copy(prosemirror_model_1.Fragment.empty))).append(atEnd?prosemirror_model_1.Fragment.empty:prosemirror_model_1.Fragment.from(list.copy(prosemirror_model_1.Fragment.empty))),atStart?0:1,atEnd?0:1),atStart?0:1)),dispatch(tr.scrollIntoView()),!0}(state,dispatch,range)))}},exports.sinkListItem=function(itemType){return function(state,dispatch){const{$from:$from,$to:$to}=state.selection,range=$from.blockRange($to,node=>node.childCount&&node.firstChild.type===itemType);if(!range)return!1;const startIndex=range.startIndex;if(0===startIndex)return!1;const parent=range.parent,nodeBefore=parent.child(startIndex-1);if(nodeBefore.type!==itemType)return!1;if(dispatch){const nestedBefore=nodeBefore.lastChild&&nodeBefore.lastChild.type===parent.type,inner=prosemirror_model_1.Fragment.from(nestedBefore?itemType.create():null),slice=new prosemirror_model_1.Slice(prosemirror_model_1.Fragment.from(itemType.create(null,prosemirror_model_1.Fragment.from(parent.copy(inner)))),nestedBefore?3:1,0),before=range.start,after=range.end;dispatch(state.tr.step(new prosemirror_transform_1.ReplaceAroundStep(before-(nestedBefore?3:1),after,before,after,slice,1,!0)).scrollIntoView())}return!0}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.buildKeymap=void 0;const prosemirror_commands_1=__webpack_require__(303),prosemirror_schema_list_1=__webpack_require__(304),prosemirror_history_1=__webpack_require__(308),prosemirror_inputrules_1=__webpack_require__(985),mac="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);exports.buildKeymap=function(schema,mapKeys){let type,keys={};function bind(key,cmd){if(mapKeys){const mapped=mapKeys[key];if(!1===mapped)return;mapped&&(key=mapped)}keys[key]=cmd}if(bind("Mod-z",prosemirror_history_1.undo),bind("Shift-Mod-z",prosemirror_history_1.redo),bind("Backspace",prosemirror_inputrules_1.undoInputRule),mac||bind("Mod-y",prosemirror_history_1.redo),bind("Alt-ArrowUp",prosemirror_commands_1.joinUp),bind("Alt-ArrowDown",prosemirror_commands_1.joinDown),bind("Mod-BracketLeft",prosemirror_commands_1.lift),bind("Escape",prosemirror_commands_1.selectParentNode),(type=schema.marks.bold)&&bind("Mod-b",prosemirror_commands_1.toggleMark(type)),(type=schema.marks.italic)&&bind("Mod-i",prosemirror_commands_1.toggleMark(type)),(type=schema.marks.code)&&bind("Mod-`",prosemirror_commands_1.toggleMark(type)),(type=schema.nodes.bullet_list)&&bind("Shift-Ctrl-8",prosemirror_schema_list_1.wrapInList(type)),(type=schema.nodes.ordered_list)&&bind("Shift-Ctrl-9",prosemirror_schema_list_1.wrapInList(type)),(type=schema.nodes.blockquote)&&bind("Ctrl->",prosemirror_commands_1.wrapIn(type)),type=schema.nodes.break){const br=type,cmd=prosemirror_commands_1.chainCommands(prosemirror_commands_1.exitCode,(state,dispatch)=>{const{$cursor:$cursor}=state.selection;if($cursor)return $cursor.nodeBefore&&"break"===$cursor.nodeBefore.type.name?dispatch(state.tr.delete($cursor.pos-1,$cursor.pos).replaceSelectionWith(schema.nodes.paragraph.create()).scrollIntoView()):dispatch(state.tr.replaceSelectionWith(br.create()).scrollIntoView()),!0});bind("Mod-Enter",cmd),bind("Shift-Enter",cmd),bind("Ctrl-Enter",cmd)}if((type=schema.nodes.list_item)&&(bind("Enter",prosemirror_schema_list_1.splitListItem(type)),bind("Mod-[",prosemirror_schema_list_1.liftListItem(type)),bind("Mod-]",prosemirror_schema_list_1.sinkListItem(type))),(type=schema.nodes.paragraph)&&bind("Shift-Ctrl-0",prosemirror_commands_1.setBlockType(type)),(type=schema.nodes.code_block)&&bind("Shift-Ctrl-\\",prosemirror_commands_1.setBlockType(type)),type=schema.nodes.heading)for(let i=1;i<=6;i++)bind("Shift-Ctrl-"+i,prosemirror_commands_1.setBlockType(type,{level:i}));if(type=schema.nodes.horizontal_rule){const hr=type;bind("Mod-_",(state,dispatch)=>(dispatch(state.tr.replaceSelectionWith(hr.create()).scrollIntoView()),!0))}return keys}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"InputRule",(function(){return InputRule})),__webpack_require__.d(__webpack_exports__,"closeDoubleQuote",(function(){return closeDoubleQuote})),__webpack_require__.d(__webpack_exports__,"closeSingleQuote",(function(){return closeSingleQuote})),__webpack_require__.d(__webpack_exports__,"ellipsis",(function(){return ellipsis})),__webpack_require__.d(__webpack_exports__,"emDash",(function(){return emDash})),__webpack_require__.d(__webpack_exports__,"inputRules",(function(){return inputRules})),__webpack_require__.d(__webpack_exports__,"openDoubleQuote",(function(){return openDoubleQuote})),__webpack_require__.d(__webpack_exports__,"openSingleQuote",(function(){return openSingleQuote})),__webpack_require__.d(__webpack_exports__,"smartQuotes",(function(){return smartQuotes})),__webpack_require__.d(__webpack_exports__,"textblockTypeInputRule",(function(){return textblockTypeInputRule})),__webpack_require__.d(__webpack_exports__,"undoInputRule",(function(){return undoInputRule})),__webpack_require__.d(__webpack_exports__,"wrappingInputRule",(function(){return wrappingInputRule}));var prosemirror_state__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3),prosemirror_transform__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5),InputRule=function(match,handler){var string;this.match=match,this.handler="string"==typeof handler?(string=handler,function(state,match,start,end){var insert=string;if(match[1]){var offset=match[0].lastIndexOf(match[1]);insert+=match[0].slice(offset+match[1].length);var cutOff=(start+=offset)-end;cutOff>0&&(insert=match[0].slice(offset-cutOff,offset)+insert,start=end)}return state.tr.insertText(insert,start,end)}):handler};function inputRules(ref){var rules=ref.rules,plugin=new prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.Plugin({state:{init:function(){return null},apply:function(tr,prev){var stored=tr.getMeta(this);return stored||(tr.selectionSet||tr.docChanged?null:prev)}},props:{handleTextInput:function(view,from,to,text){return run(view,from,to,text,rules,plugin)},handleDOMEvents:{compositionend:function(view){setTimeout((function(){var $cursor=view.state.selection.$cursor;$cursor&&run(view,$cursor.pos,$cursor.pos,"",rules,plugin)}))}}},isInputRules:!0});return plugin}function run(view,from,to,text,rules,plugin){if(view.composing)return!1;var state=view.state,$from=state.doc.resolve(from);if($from.parent.type.spec.code)return!1;for(var textBefore=$from.parent.textBetween(Math.max(0,$from.parentOffset-500),$from.parentOffset,null,"￼")+text,i=0;i<rules.length;i++){var match=rules[i].match.exec(textBefore),tr=match&&rules[i].handler(state,match,from-(match[0].length-text.length),to);if(tr)return view.dispatch(tr.setMeta(plugin,{transform:tr,from:from,to:to,text:text})),!0}return!1}function undoInputRule(state,dispatch){for(var plugins=state.plugins,i=0;i<plugins.length;i++){var plugin=plugins[i],undoable=void 0;if(plugin.spec.isInputRules&&(undoable=plugin.getState(state))){if(dispatch){for(var tr=state.tr,toUndo=undoable.transform,j=toUndo.steps.length-1;j>=0;j--)tr.step(toUndo.steps[j].invert(toUndo.docs[j]));if(undoable.text){var marks=tr.doc.resolve(undoable.from).marks();tr.replaceWith(undoable.from,undoable.to,state.schema.text(undoable.text,marks))}else tr.delete(undoable.from,undoable.to);dispatch(tr)}return!0}}return!1}var emDash=new InputRule(/--$/,"—"),ellipsis=new InputRule(/\.\.\.$/,"…"),openDoubleQuote=new InputRule(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"“"),closeDoubleQuote=new InputRule(/"$/,"”"),openSingleQuote=new InputRule(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"‘"),closeSingleQuote=new InputRule(/'$/,"’"),smartQuotes=[openDoubleQuote,closeDoubleQuote,openSingleQuote,closeSingleQuote];function wrappingInputRule(regexp,nodeType,getAttrs,joinPredicate){return new InputRule(regexp,(function(state,match,start,end){var attrs=getAttrs instanceof Function?getAttrs(match):getAttrs,tr=state.tr.delete(start,end),range=tr.doc.resolve(start).blockRange(),wrapping=range&&Object(prosemirror_transform__WEBPACK_IMPORTED_MODULE_1__.findWrapping)(range,nodeType,attrs);if(!wrapping)return null;tr.wrap(range,wrapping);var before=tr.doc.resolve(start-1).nodeBefore;return before&&before.type==nodeType&&Object(prosemirror_transform__WEBPACK_IMPORTED_MODULE_1__.canJoin)(tr.doc,start-1)&&(!joinPredicate||joinPredicate(match,before))&&tr.join(start-1),tr}))}function textblockTypeInputRule(regexp,nodeType,getAttrs){return new InputRule(regexp,(function(state,match,start,end){var $start=state.doc.resolve(start),attrs=getAttrs instanceof Function?getAttrs(match):getAttrs;return $start.node(-1).canReplaceWith($start.index(-1),$start.indexAfter(-1),nodeType)?state.tr.delete(start,end).setBlockType(start,start,nodeType,attrs):null}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SchemaBuilder=void 0;const prosemirror_model_1=__webpack_require__(1);exports.SchemaBuilder=class{setupBlock(tag){return{group:"block",content:"inline*",attrs:{id:{default:null},className:{default:null},styles:{default:null}},toDOM:node=>{var _a,_b;const properties={};return(null===(_a=node.attrs)||void 0===_a?void 0:_a.id)&&(properties.id=node.attrs.id),(null===(_b=node.attrs)||void 0===_b?void 0:_b.className)&&(properties.class=node.attrs.className),[tag,properties,0]},parseDOM:[{tag:tag}]}}setupHeading(tag){const block=this.setupBlock(tag);return block.parseDOM=[{tag:tag,getAttrs:dom=>({id:dom.hasAttribute("id")?dom.getAttribute("id"):null})}],block}build(){const nodes={text:{group:"inline"},paragraph:this.setupBlock("p"),formatted:this.setupBlock("pre"),ordered_list:{content:"list_item+",group:"block",attrs:{order:{default:1}},parseDOM:[{tag:"ol",getAttrs:dom=>({order:dom.hasAttribute("start")?+dom.getAttribute("start"):1})}],toDOM:node=>1===node.attrs.order?["ol",0]:["ol",{start:node.attrs.order},0]},bulleted_list:{content:"list_item+",group:"block",attrs:{className:{default:null},styles:{default:null}},parseDOM:[{tag:"ul"}],toDOM:node=>{const properties={};return node.attrs.className&&(properties.class=node.attrs.className),["ul",properties,0]}},list_item:{content:"paragraph block*",parseDOM:[{tag:"li"}],toDOM:()=>["li",0],defining:!0},heading1:this.setupHeading("h1"),heading2:this.setupHeading("h2"),heading3:this.setupHeading("h3"),heading4:this.setupHeading("h4"),heading5:this.setupHeading("h5"),heading6:this.setupHeading("h6"),quote:this.setupBlock("blockquote"),break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:()=>["br"]},doc:{content:"block+"}},marks={bold:{toDOM:()=>["b"],parseDOM:[{tag:"b"}]},italic:{toDOM:()=>["i"],parseDOM:[{tag:"i"}]},underlined:{toDOM:()=>["u"],parseDOM:[{tag:"u"}]},highlighted:{toDOM:()=>["mark"],parseDOM:[{tag:"mark"}]},striked:{toDOM:()=>["strike"],parseDOM:[{tag:"strike"}]},code:{toDOM:()=>["code"],parseDOM:[{tag:"code"}]},color:{attrs:{colorKey:{},colorClass:{}},toDOM:node=>["span",{class:node.attrs.colorClass}]},hyperlink:{attrs:{href:{default:void 0},anchor:{default:void 0},anchorName:{default:void 0},targetKey:{default:void 0},target:{default:void 0},download:{default:void 0}},toDOM:node=>["a",{href:`${node.attrs.href}${node.attrs.anchor?"#"+node.attrs.anchor:""}`,target:node.attrs.target,download:node.attrs.download}],parseDOM:[{tag:"a",getAttrs:dom=>({href:dom.href})}],inclusive:!1}};return new prosemirror_model_1.Schema({nodes:nodes,marks:marks})}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.OfflineModule=void 0;const persistence_1=__webpack_require__(23),undoToolButton_1=__webpack_require__(988),redoToolButton_1=__webpack_require__(989),saveChangesToolbutton_1=__webpack_require__(990);exports.OfflineModule=class{constructor(options){this.options=options,this.register=this.register.bind(this)}register(injector){var _a;(null===(_a=this.options)||void 0===_a?void 0:_a.autosave)||injector.bindToCollection("trayCommands",saveChangesToolbutton_1.SaveChangesToolButton),injector.bindToCollection("trayCommands",undoToolButton_1.UndoToolButton),injector.bindToCollection("trayCommands",redoToolButton_1.RedoToolButton),injector.bindSingleton("offlineObjectStorage",persistence_1.OfflineObjectStorage);const underlyingObjectStorage=injector.resolve("objectStorage");injector.bindSingletonFactory("objectStorage",ctx=>{var _a;const offlineObjectStorage=ctx.resolve("offlineObjectStorage");return offlineObjectStorage.setRemoteObjectStorage(underlyingObjectStorage),offlineObjectStorage.autosave=!!(null===(_a=this.options)||void 0===_a?void 0:_a.autosave),offlineObjectStorage}),injector.bindToCollection("autostart",persistence_1.SavingHandler),injector.bindToCollection("autostart",persistence_1.LoadingHandler)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UndoToolButton=void 0;const ko=__webpack_require__(0);exports.UndoToolButton=class{constructor(eventManager,offlineObjectStorage){this.eventManager=eventManager,this.offlineObjectStorage=offlineObjectStorage,this.iconClass="paperbits-icon paperbits-undo-25",this.title="Undo",this.tooltip='<h1>Undo</h1><p>Undo last action.</p><div class="subtle">(Ctrl+Z)</div>',this.disabled=ko.observable(!0),this.eventManager.addEventListener("onDataChange",this.onDataChange.bind(this))}onDataChange(){this.disabled(!this.offlineObjectStorage.canUndo())}onActivate(){this.eventManager.dispatchEvent("onUndo")}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RedoToolButton=void 0;const ko=__webpack_require__(0);exports.RedoToolButton=class{constructor(eventManager,offlineObjectStorage){this.eventManager=eventManager,this.offlineObjectStorage=offlineObjectStorage,this.iconClass="paperbits-icon paperbits-redo-26",this.title="Redo",this.tooltip='<h1>Redo</h1><p>Redo last undone action.</p><div class="subtle">(Ctrl+Y)</div>',this.disabled=ko.observable(!0),this.eventManager.addEventListener("onDataChange",this.onDataChange.bind(this))}onDataChange(){this.disabled(!this.offlineObjectStorage.canRedo())}onActivate(){this.eventManager.dispatchEvent("onRedo")}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SaveChangesToolButton=void 0;const ko=__webpack_require__(0);exports.SaveChangesToolButton=class{constructor(eventManager,offlineObjectStorage,logger){this.eventManager=eventManager,this.offlineObjectStorage=offlineObjectStorage,this.logger=logger,this.iconClass="paperbits-icon paperbits-floppy-disk",this.title="Save changes",this.tooltip='<h1>Save changes</h1><p>Push your changes to the storage.</p><div class="subtle">(Ctrl+S)</div>',this.disabled=ko.observable(!0),this.eventManager.addEventListener("onDataChange",this.updateState.bind(this)),this.updateState()}updateState(){return __awaiter(this,void 0,void 0,(function*(){const hasUnsavedChanges=yield this.offlineObjectStorage.hasUnsavedChanges();this.disabled(!hasUnsavedChanges)}))}onActivate(){this.logger.trackEvent("Click: Save changes"),this.eventManager.dispatchEvent("onSaveChanges")}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DemoDesignModule=void 0;const app_1=__webpack_require__(992),logging_1=__webpack_require__(994),search_design_module_1=__webpack_require__(997),staticObjectStorage_1=__webpack_require__(1004),staticBlobStorage_1=__webpack_require__(1005),staticRoleService_1=__webpack_require__(1006),clickCounterEditor_module_1=__webpack_require__(1007),routing_1=__webpack_require__(136);exports.DemoDesignModule=class{register(injector){injector.bindSingleton("app",app_1.App),injector.bindSingleton("blobStorage",staticBlobStorage_1.StaticBlobStorage),injector.bindSingleton("roleService",staticRoleService_1.StaticRoleService),injector.bindSingleton("objectStorage",staticObjectStorage_1.StaticObjectStorage),injector.bindToCollection("autostart",routing_1.HistoryRouteHandler),injector.bindSingleton("logger",logging_1.ConsoleLogger),injector.bindModule(new search_design_module_1.SearchDesignModule),injector.bindModule(new clickCounterEditor_module_1.ClickCounterEditorModule)}}},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.App=void 0;const app_html_1=__webpack_require__(993),decorators_1=__webpack_require__(2);let App=class{constructor(logger,viewManager){this.logger=logger,this.viewManager=viewManager}initialize(){return __awaiter(this,void 0,void 0,(function*(){this.viewManager.setHost({name:"page-host"}),this.viewManager.showToolboxes(),this.logger.trackEvent("Startup",{message:"App started."})}))}};__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],App.prototype,"initialize",null),App=__decorate([decorators_1.Component({selector:"app",template:app_html_1.default}),__metadata("design:paramtypes",[Object,Object])],App),exports.App=App},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default="<view-manager></view-manager>"},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(995),exports),__exportStar(__webpack_require__(996),exports)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConsoleLogger=void 0;exports.ConsoleLogger=class{trackSession(properties){return __awaiter(this,void 0,void 0,(function*(){this.trackEvent("Session started.",properties)}))}trackEvent(eventName,properties){return __awaiter(this,void 0,void 0,(function*(){console.info(""+eventName,properties?JSON.stringify(properties):void 0)}))}trackError(error){return __awaiter(this,void 0,void 0,(function*(){console.error(null==error?void 0:error.message)}))}trackView(viewName,properties){return __awaiter(this,void 0,void 0,(function*(){console.info("View: "+viewName,properties?JSON.stringify(properties):void 0)}))}trackMetric(metricName,properties){return __awaiter(this,void 0,void 0,(function*(){console.info("Metric: "+metricName,properties?JSON.stringify(properties):void 0)}))}trackDependency(dependencyName,properties){return __awaiter(this,void 0,void 0,(function*(){console.info("Invoking dependency: "+dependencyName,properties?JSON.stringify(properties):void 0)}))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SearchDesignModule=void 0;const searchHandlers_1=__webpack_require__(305),ko_1=__webpack_require__(998),_1=__webpack_require__(1001);exports.SearchDesignModule=class{register(injector){injector.bind("search",ko_1.SearchViewModel),injector.bindToCollection("modelBinders",_1.SearchModelBinder),injector.bindToCollection("viewModelBinders",ko_1.SearchViewModelBinder),injector.bindToCollection("widgetHandlers",searchHandlers_1.SearchHandlers)}}},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(306),exports),__exportStar(__webpack_require__(1e3),exports)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<search-runtime class="block"></search-runtime>'},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SearchViewModelBinder=void 0;const searchViewModel_1=__webpack_require__(306),searchModel_1=__webpack_require__(108);exports.SearchViewModelBinder=class{constructor(eventManager){this.eventManager=eventManager}modelToViewModel(model,viewModel,bindingContext){return __awaiter(this,void 0,void 0,(function*(){if(!viewModel){viewModel=new searchViewModel_1.SearchViewModel;const binding={name:"search",displayName:"Search website",readonly:!!bindingContext&&bindingContext.readonly,model:model,draggable:!0,applyChanges:changes=>__awaiter(this,void 0,void 0,(function*(){yield this.modelToViewModel(model,viewModel,bindingContext),this.eventManager.dispatchEvent("onContentUpdate")}))};viewModel.widgetBinding=binding}return viewModel}))}canHandleModel(model){return model instanceof searchModel_1.SearchModel}}},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(1002),exports),__exportStar(__webpack_require__(305),exports),__exportStar(__webpack_require__(108),exports),__exportStar(__webpack_require__(1003),exports)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SearchModelBinder=void 0;const searchModel_1=__webpack_require__(108);exports.SearchModelBinder=class{constructor(){this.contractToModel=this.contractToModel.bind(this)}canHandleContract(contract){return"search"===contract.type}canHandleModel(model){return model instanceof searchModel_1.SearchModel}contractToModel(searchContract){return __awaiter(this,void 0,void 0,(function*(){return new searchModel_1.SearchModel}))}modelToContract(searchModel){return{type:"search"}}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.StaticObjectStorage=void 0;const _=__webpack_require__(85),FileSaver=__webpack_require__(282),Objects=__webpack_require__(30),persistence_1=__webpack_require__(23);exports.StaticObjectStorage=class{constructor(httpClient){this.httpClient=httpClient,this.splitter="/"}getData(){return __awaiter(this,void 0,void 0,(function*(){return this.loadDataPromise||(this.loadDataPromise=new Promise(resolve=>__awaiter(this,void 0,void 0,(function*(){const response=yield this.httpClient.send({url:"/data/demo.json",method:"GET"});this.storageDataObject=response.toObject(),resolve(this.storageDataObject)})))),this.loadDataPromise}))}addObject(path,dataObject){return __awaiter(this,void 0,void 0,(function*(){if(path){const pathParts=path.split(this.splitter),mainNode=pathParts[0];1===pathParts.length||2===pathParts.length&&!pathParts[1]?this.storageDataObject[mainNode]=dataObject:(_.has(this.storageDataObject,mainNode)||(this.storageDataObject[mainNode]={}),this.storageDataObject[mainNode][pathParts[1]]=dataObject)}else Object.keys(dataObject).forEach(prop=>{const obj=dataObject[prop],pathParts=prop.split(this.splitter),mainNode=pathParts[0];1===pathParts.length||2===pathParts.length&&!pathParts[1]?this.storageDataObject[mainNode]=obj:(_.has(this.storageDataObject,mainNode)||(this.storageDataObject[mainNode]={}),this.storageDataObject[mainNode][pathParts[1]]=obj)})}))}getObject(path){return __awaiter(this,void 0,void 0,(function*(){const data=yield this.getData();return Objects.getObjectAt(path,Objects.clone(data))}))}deleteObject(path){return __awaiter(this,void 0,void 0,(function*(){path&&Objects.deleteNodeAt(path,this.storageDataObject)}))}updateObject(path,dataObject){return __awaiter(this,void 0,void 0,(function*(){if(!path)return;const clone=Objects.clone(dataObject);Objects.setValue(path,this.storageDataObject,clone),Objects.cleanupObject(clone)}))}searchObjects(path,query){return __awaiter(this,void 0,void 0,(function*(){const data=yield this.getData();if(!data)return{value:[]};const searchObj=Objects.getObjectAt(path,data);if(!searchObj)return{value:[]};let collection=Object.values(searchObj);if(query&&(query.filters.length>0&&(collection=collection.filter(x=>{let meetsCriteria=!0;for(const filter of query.filters){let left=Objects.getObjectAt(filter.left,x),right=filter.right;if(void 0===left){meetsCriteria=!1;continue}"string"==typeof left&&(left=left.toUpperCase()),"string"==typeof right&&(right=right.toUpperCase());switch(filter.operator){case persistence_1.Operator.contains:left&&!left.includes(right)&&(meetsCriteria=!1);break;case persistence_1.Operator.equals:left!==right&&(meetsCriteria=!1);break;default:throw new Error("Cannot translate operator into Firebase Realtime Database query.")}}return meetsCriteria})),query.orderingBy)){const property=query.orderingBy;collection=collection.sort((x,y)=>{const a=Objects.getObjectAt(property,x),b=Objects.getObjectAt(property,y),modifier=query.orderDirection===persistence_1.OrderDirection.accending?1:-1;return a>b?modifier:a<b?-modifier:0})}const value=collection.slice(0,20);return new StaticPage(value,collection,20)}))}saveChanges(delta){return __awaiter(this,void 0,void 0,(function*(){const saveTasks=[],keys=[];Object.keys(delta).map(key=>{const firstLevelObject=delta[key];Object.keys(firstLevelObject).forEach(subkey=>{keys.push(`${key}/${subkey}`)})}),keys.forEach(key=>{const changeObject=Objects.getObjectAt(key,delta);changeObject?saveTasks.push(this.updateObject(key,changeObject)):saveTasks.push(this.deleteObject(key))}),yield Promise.all(saveTasks);const state=JSON.stringify(this.storageDataObject),stateBlob=new Blob([state],{type:"text/plain;charset=utf-8"});FileSaver.saveAs(stateBlob,"demo.json")}))}loadData(){return __awaiter(this,void 0,void 0,(function*(){return new Promise((resolve,reject)=>{const input=document.createElement("input");input.type="file",input.onchange=e=>{const file=e.target.files[0];file||resolve(void 0);const reader=new FileReader;reader.readAsText(file,"UTF-8"),reader.onload=readerEvent=>{const contentString=readerEvent.target.result.toString(),dataObject=contentString?JSON.parse(contentString):void 0;this.storageDataObject=dataObject||this.storageDataObject,this.loadDataPromise=new Promise(resolve=>resolve(this.storageDataObject)),resolve(dataObject)}},input.click()})}))}};class StaticPage{constructor(value,collection,skip){this.value=value,this.collection=collection,this.skip=skip,skip>this.collection.length&&(this.takeNext=null)}takePrev(){return __awaiter(this,void 0,void 0,(function*(){throw new Error("Not implemented")}))}takeNext(){return __awaiter(this,void 0,void 0,(function*(){const value=this.collection.slice(this.skip,this.skip+20),skipNext=this.skip+20;return new StaticPage(value,this.collection,skipNext)}))}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.StaticBlobStorage=void 0;const Utils=__webpack_require__(6);exports.StaticBlobStorage=class{constructor(){this.storageDataObject={}}uploadBlob(blobKey,content,contentType){return __awaiter(this,void 0,void 0,(function*(){this.storageDataObject[blobKey]={contentType:contentType,content:content}}))}getDownloadUrl(blobKey){return __awaiter(this,void 0,void 0,(function*(){const blobRecord=this.storageDataObject[blobKey];return blobRecord?`data:${blobRecord.contentType};base64,${Utils.arrayBufferToBase64(blobRecord.content)}`:null}))}deleteBlob(blobKey){return __awaiter(this,void 0,void 0,(function*(){delete this.storageDataObject[blobKey]}))}downloadBlob(blobKey){return __awaiter(this,void 0,void 0,(function*(){const blobRecord=this.storageDataObject[blobKey];return blobRecord?blobRecord.content:null}))}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.StaticRoleService=void 0;const user_1=__webpack_require__(58);exports.StaticRoleService=class{getRoles(){return __awaiter(this,void 0,void 0,(function*(){return[user_1.BuiltInRoles.everyone,user_1.BuiltInRoles.anonymous,user_1.BuiltInRoles.authenticated]}))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ClickCounterEditorModule=void 0;const clickCounter_module_1=__webpack_require__(1008),clickCounterEditor_1=__webpack_require__(1012),clickCounterHandlers_1=__webpack_require__(1014);exports.ClickCounterEditorModule=class{register(injector){injector.bindModule(new clickCounter_module_1.ClickCounterModule),injector.bind("clickCounterEditor",clickCounterEditor_1.ClickCounterEditor),injector.bindToCollection("widgetHandlers",clickCounterHandlers_1.ClickCounterHandlers)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ClickCounterModule=void 0;const clickCounterViewModel_1=__webpack_require__(307),clickCounterModelBinder_1=__webpack_require__(1010),clickCounterViewModelBinder_1=__webpack_require__(1011);exports.ClickCounterModule=class{register(injector){injector.bind("clickCounter",clickCounterViewModel_1.ClickCounterViewModel),injector.bindToCollection("modelBinders",clickCounterModelBinder_1.ClickCounterModelBinder),injector.bindToCollection("viewModelBinders",clickCounterViewModelBinder_1.ClickCounterViewModelBinder)}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<div>\n    <p class="not-configured">\n        This is an example widget that is yet to be implemented. You can use it as a scaffold for your own widget.\n    </p>\n    <p class="not-configured">\n        Please refer to documentation to learn about <a href="https://paperbits.io/wiki/widget-anatomy">\n            widget anatomy</a>.\n    </p>\n\n    <click-counter-runtime class="w-100"></click-counter-runtime> \n</div>'},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ClickCounterModelBinder=void 0;const clickCounterModel_1=__webpack_require__(109);exports.ClickCounterModelBinder=class{canHandleContract(contract){return"click-counter"===contract.type}canHandleModel(model){return model instanceof clickCounterModel_1.ClickCounterModel}contractToModel(contract){return __awaiter(this,void 0,void 0,(function*(){return new clickCounterModel_1.ClickCounterModel}))}modelToContract(model){return{type:"click-counter"}}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ClickCounterViewModelBinder=void 0;const clickCounterViewModel_1=__webpack_require__(307),clickCounterModel_1=__webpack_require__(109);exports.ClickCounterViewModelBinder=class{constructor(eventManager){this.eventManager=eventManager}modelToViewModel(model,viewModel,bindingContext){return __awaiter(this,void 0,void 0,(function*(){viewModel||(viewModel=new clickCounterViewModel_1.ClickCounterViewModel);const binding={name:"click-counter",displayName:"Click counter",readonly:!!bindingContext&&bindingContext.readonly,model:model,draggable:!0,editor:"click-counter-editor",applyChanges:()=>__awaiter(this,void 0,void 0,(function*(){yield this.modelToViewModel(model,viewModel,bindingContext),this.eventManager.dispatchEvent("onContentUpdate")}))};return viewModel.widgetBinding=binding,viewModel}))}canHandleModel(model){return model instanceof clickCounterModel_1.ClickCounterModel}}},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ClickCounterEditor=void 0;const ko=__webpack_require__(0),clickCounterEditor_html_1=__webpack_require__(1013),clickCounterModel_1=__webpack_require__(109),decorators_1=__webpack_require__(2);let ClickCounterEditor=class{constructor(){this.initialCount=ko.observable("0")}initialize(){return __awaiter(this,void 0,void 0,(function*(){this.initialCount.subscribe(this.applyChanges)}))}applyChanges(){this.onChange(this.model)}};__decorate([decorators_1.Param(),__metadata("design:type",clickCounterModel_1.ClickCounterModel)],ClickCounterEditor.prototype,"model",void 0),__decorate([decorators_1.Event(),__metadata("design:type",Function)],ClickCounterEditor.prototype,"onChange",void 0),__decorate([decorators_1.OnMounted(),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],ClickCounterEditor.prototype,"initialize",null),ClickCounterEditor=__decorate([decorators_1.Component({selector:"click-counter-editor",template:clickCounterEditor_html_1.default}),__metadata("design:paramtypes",[])],ClickCounterEditor),exports.ClickCounterEditor=ClickCounterEditor},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__.default='<fieldset class="form" data-bind="scrollable: true">\n    <p>This is your widget editor that is yet to be implemented.</p>\n</fieldset>'},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ClickCounterHandlers=void 0;const clickCounterModel_1=__webpack_require__(109);exports.ClickCounterHandlers=class{getWidgetOrder(){return __awaiter(this,void 0,void 0,(function*(){return{name:"clickCounter",displayName:"Click counter",iconClass:"paperbits-puzzle-10",requires:["html","js"],createModel:()=>__awaiter(this,void 0,void 0,(function*(){return new clickCounterModel_1.ClickCounterModel}))}}))}}},,,function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var jss_esm=__webpack_require__(27),now=Date.now(),fnValuesNs="fnValues"+now,fnRuleNs="fnStyle"+ ++now;var jss_plugin_rule_value_function_esm=function(){return{onCreateRule:function(name,decl,options){if("function"!=typeof decl)return null;var rule=Object(jss_esm.createRule)(name,{},options);return rule[fnRuleNs]=decl,rule},onProcessStyle:function(style,rule){if(fnValuesNs in rule||fnRuleNs in rule)return style;var fnValues={};for(var prop in style){var value=style[prop];"function"==typeof value&&(delete style[prop],fnValues[prop]=value)}return rule[fnValuesNs]=fnValues,style},onUpdate:function(data,rule,sheet,options){var styleRule=rule,fnRule=styleRule[fnRuleNs];fnRule&&(styleRule.style=fnRule(data)||{});var fnValues=styleRule[fnValuesNs];if(fnValues)for(var _prop in fnValues)styleRule.prop(_prop,fnValues[_prop](data),options)}}},es=__webpack_require__(155),jss_plugin_rule_value_observable_esm_isObservable=function(value){return value&&value[es.a]&&value===value[es.a]()};var jss_plugin_rule_value_observable_esm=function(updateOptions){return{onCreateRule:function(name,decl,options){if(!jss_plugin_rule_value_observable_esm_isObservable(decl))return null;var style$=decl,rule=Object(jss_esm.createRule)(name,{},options);return style$.subscribe((function(style){for(var prop in style)rule.prop(prop,style[prop],updateOptions)})),rule},onProcessRule:function(rule){if(!rule||"style"===rule.type){var styleRule=rule,style=styleRule.style,_loop=function(prop){var value=style[prop];if(!jss_plugin_rule_value_observable_esm_isObservable(value))return"continue";delete style[prop],value.subscribe({next:function(nextValue){styleRule.prop(prop,nextValue,updateOptions)}})};for(var prop in style)_loop(prop)}}}},semiWithNl=/;\n/,jss_plugin_template_esm_onProcessRule=function(rule){"string"==typeof rule.style&&(rule.style=function(cssText){for(var style={},split=cssText.split(semiWithNl),i=0;i<split.length;i++){var decl=(split[i]||"").trim();if(decl){var colonIndex=decl.indexOf(":");if(-1!==colonIndex){var prop=decl.substr(0,colonIndex).trim(),value=decl.substr(colonIndex+1).trim();style[prop]=value}}}return style}(rule.style))};var jss_plugin_template_esm=function(){return{onProcessRule:jss_plugin_template_esm_onProcessRule}},esm_extends=__webpack_require__(11),at="@global",jss_plugin_global_esm_GlobalContainerRule=function(){function GlobalContainerRule(key,styles,options){for(var selector in this.type="global",this.at=at,this.rules=void 0,this.options=void 0,this.key=void 0,this.isProcessed=!1,this.key=key,this.options=options,this.rules=new jss_esm.RuleList(Object(esm_extends.a)({},options,{parent:this})),styles)this.rules.add(selector,styles[selector]);this.rules.process()}var _proto=GlobalContainerRule.prototype;return _proto.getRule=function(name){return this.rules.get(name)},_proto.addRule=function(name,style,options){var rule=this.rules.add(name,style,options);return this.options.jss.plugins.onProcessRule(rule),rule},_proto.indexOf=function(rule){return this.rules.indexOf(rule)},_proto.toString=function(){return this.rules.toString()},GlobalContainerRule}(),jss_plugin_global_esm_GlobalPrefixedRule=function(){function GlobalPrefixedRule(key,style,options){this.type="global",this.at=at,this.options=void 0,this.rule=void 0,this.isProcessed=!1,this.key=void 0,this.key=key,this.options=options;var selector=key.substr("@global ".length);this.rule=options.jss.createRule(selector,style,Object(esm_extends.a)({},options,{parent:this}))}return GlobalPrefixedRule.prototype.toString=function(options){return this.rule?this.rule.toString(options):""},GlobalPrefixedRule}(),separatorRegExp=/\s*,\s*/g;function addScope(selector,scope){for(var parts=selector.split(separatorRegExp),scoped="",i=0;i<parts.length;i++)scoped+=scope+" "+parts[i].trim(),parts[i+1]&&(scoped+=", ");return scoped}var jss_plugin_global_esm=function(){return{onCreateRule:function(name,styles,options){if(!name)return null;if(name===at)return new jss_plugin_global_esm_GlobalContainerRule(name,styles,options);if("@"===name[0]&&"@global "===name.substr(0,"@global ".length))return new jss_plugin_global_esm_GlobalPrefixedRule(name,styles,options);var parent=options.parent;return parent&&("global"===parent.type||parent.options.parent&&"global"===parent.options.parent.type)&&(options.scoped=!1),!1===options.scoped&&(options.selector=name),null},onProcessRule:function(rule){"style"===rule.type&&(function(rule){var options=rule.options,style=rule.style,rules=style?style[at]:null;if(rules){for(var name in rules)options.sheet.addRule(name,rules[name],Object(esm_extends.a)({},options,{selector:addScope(name,rule.selector)}));delete style[at]}}(rule),function(rule){var options=rule.options,style=rule.style;for(var prop in style)if("@"===prop[0]&&prop.substr(0,at.length)===at){var selector=addScope(prop.substr(at.length),rule.selector);options.sheet.addRule(selector,style[prop],Object(esm_extends.a)({},options,{selector:selector})),delete style[prop]}}(rule))}}},isObject=function(obj){return obj&&"object"==typeof obj&&!Array.isArray(obj)},valueNs="extendCurrValue"+Date.now();function extend(style,rule,sheet,newStyle){return void 0===newStyle&&(newStyle={}),function(style,rule,sheet,newStyle){if("string"!=typeof style.extend)if(Array.isArray(style.extend))for(var index=0;index<style.extend.length;index++){var singleExtend=style.extend[index];extend("string"==typeof singleExtend?Object(esm_extends.a)({},style,{extend:singleExtend}):style.extend[index],rule,sheet,newStyle)}else for(var prop in style.extend)"extend"!==prop?isObject(style.extend[prop])?(prop in newStyle||(newStyle[prop]={}),extend(style.extend[prop],rule,sheet,newStyle[prop])):newStyle[prop]=style.extend[prop]:extend(style.extend.extend,rule,sheet,newStyle);else{if(!sheet)return;var refRule=sheet.getRule(style.extend);if(!refRule)return;if(refRule===rule)return;var parent=refRule.options.parent;parent&&extend(parent.rules.raw[style.extend],rule,sheet,newStyle)}}(style,rule,sheet,newStyle),function(style,rule,sheet,newStyle){for(var prop in style)"extend"!==prop&&(isObject(newStyle[prop])&&isObject(style[prop])?extend(style[prop],rule,sheet,newStyle[prop]):isObject(style[prop])?newStyle[prop]=extend(style[prop],rule,sheet):newStyle[prop]=style[prop])}(style,rule,sheet,newStyle),newStyle}var jss_plugin_extend_esm=function(){return{onProcessStyle:function(style,rule,sheet){return"extend"in style?extend(style,rule,sheet):style},onChangeValue:function(value,prop,rule){if("extend"!==prop)return value;if(null==value||!1===value){for(var key in rule[valueNs])rule.prop(key,null);return rule[valueNs]=null,null}if("object"==typeof value){for(var _key in value)rule.prop(_key,value[_key]);rule[valueNs]=value}return null}}},jss_plugin_nested_esm_separatorRegExp=/\s*,\s*/g,parentRegExp=/&/g,refRegExp=/\$([\w-]+)/g;var jss_plugin_nested_esm=function(){function getReplaceRef(container,sheet){return function(match,key){var rule=container.getRule(key)||sheet&&sheet.getRule(key);return rule?(rule=rule).selector:key}}function replaceParentRefs(nestedProp,parentProp){for(var parentSelectors=parentProp.split(jss_plugin_nested_esm_separatorRegExp),nestedSelectors=nestedProp.split(jss_plugin_nested_esm_separatorRegExp),result="",i=0;i<parentSelectors.length;i++)for(var parent=parentSelectors[i],j=0;j<nestedSelectors.length;j++){var nested=nestedSelectors[j];result&&(result+=", "),result+=-1!==nested.indexOf("&")?nested.replace(parentRegExp,parent):parent+" "+nested}return result}function getOptions(rule,container,prevOptions){if(prevOptions)return Object(esm_extends.a)({},prevOptions,{index:prevOptions.index+1});var nestingLevel=rule.options.nestingLevel;nestingLevel=void 0===nestingLevel?1:nestingLevel+1;var options=Object(esm_extends.a)({},rule.options,{nestingLevel:nestingLevel,index:container.indexOf(rule)+1});return delete options.name,options}return{onProcessStyle:function(style,rule,sheet){if("style"!==rule.type)return style;var options,replaceRef,styleRule=rule,container=styleRule.options.parent;for(var prop in style){var isNested=-1!==prop.indexOf("&"),isNestedConditional="@"===prop[0];if(isNested||isNestedConditional){if(options=getOptions(styleRule,container,options),isNested){var selector=replaceParentRefs(prop,styleRule.selector);replaceRef||(replaceRef=getReplaceRef(container,sheet)),selector=selector.replace(refRegExp,replaceRef),container.addRule(selector,style[prop],Object(esm_extends.a)({},options,{selector:selector}))}else isNestedConditional&&container.addRule(prop,{},options).addRule(styleRule.key,style[prop],{selector:styleRule.selector});delete style[prop]}}return style}}};var jss_plugin_compose_esm=function(){return{onProcessStyle:function(style,rule){return"composes"in style?(function registerClass(rule,className){if(!className)return!0;if(Array.isArray(className)){for(var index=0;index<className.length;index++)if(!registerClass(rule,className[index]))return!1;return!0}if(className.indexOf(" ")>-1)return registerClass(rule,className.split(" "));var parent=rule.options.parent;if("$"===className[0]){var refRule=parent.getRule(className.substr(1));return!!refRule&&refRule!==rule&&(parent.classes[rule.key]+=" "+parent.classes[refRule.key],!0)}return parent.classes[rule.key]+=" "+className,!0}(rule,style.composes),delete style.composes,style):style}}},uppercasePattern=/[A-Z]/g,msPattern=/^ms-/,cache={};function toHyphenLower(match){return"-"+match.toLowerCase()}var hyphenate_style_name=function(name){if(cache.hasOwnProperty(name))return cache[name];var hName=name.replace(uppercasePattern,toHyphenLower);return cache[name]=msPattern.test(hName)?"-"+hName:hName};function convertCase(style){var converted={};for(var prop in style){converted[0===prop.indexOf("--")?prop:hyphenate_style_name(prop)]=style[prop]}return style.fallbacks&&(Array.isArray(style.fallbacks)?converted.fallbacks=style.fallbacks.map(convertCase):converted.fallbacks=convertCase(style.fallbacks)),converted}var jss_plugin_camel_case_esm=function(){return{onProcessStyle:function(style){if(Array.isArray(style)){for(var index=0;index<style.length;index++)style[index]=convertCase(style[index]);return style}return convertCase(style)},onChangeValue:function(value,prop,rule){if(0===prop.indexOf("--"))return value;var hyphenatedProp=hyphenate_style_name(prop);return prop===hyphenatedProp?value:(rule.prop(hyphenatedProp,value),null)}}},px=jss_esm.hasCSSTOMSupport&&CSS?CSS.px:"px",ms=jss_esm.hasCSSTOMSupport&&CSS?CSS.ms:"ms",percent=jss_esm.hasCSSTOMSupport&&CSS?CSS.percent:"%";function addCamelCasedVersion(obj){var regExp=/(-[a-z])/g,replace=function(str){return str[1].toUpperCase()},newObj={};for(var _key in obj)newObj[_key]=obj[_key],newObj[_key.replace(regExp,replace)]=obj[_key];return newObj}var units=addCamelCasedVersion({"animation-delay":ms,"animation-duration":ms,"background-position":px,"background-position-x":px,"background-position-y":px,"background-size":px,border:px,"border-bottom":px,"border-bottom-left-radius":px,"border-bottom-right-radius":px,"border-bottom-width":px,"border-left":px,"border-left-width":px,"border-radius":px,"border-right":px,"border-right-width":px,"border-top":px,"border-top-left-radius":px,"border-top-right-radius":px,"border-top-width":px,"border-width":px,margin:px,"margin-bottom":px,"margin-left":px,"margin-right":px,"margin-top":px,padding:px,"padding-bottom":px,"padding-left":px,"padding-right":px,"padding-top":px,"mask-position-x":px,"mask-position-y":px,"mask-size":px,height:px,width:px,"min-height":px,"max-height":px,"min-width":px,"max-width":px,bottom:px,left:px,top:px,right:px,"box-shadow":px,"text-shadow":px,"column-gap":px,"column-rule":px,"column-rule-width":px,"column-width":px,"font-size":px,"font-size-delta":px,"letter-spacing":px,"text-indent":px,"text-stroke":px,"text-stroke-width":px,"word-spacing":px,motion:px,"motion-offset":px,outline:px,"outline-offset":px,"outline-width":px,perspective:px,"perspective-origin-x":percent,"perspective-origin-y":percent,"transform-origin":percent,"transform-origin-x":percent,"transform-origin-y":percent,"transform-origin-z":percent,"transition-delay":ms,"transition-duration":ms,"vertical-align":px,"flex-basis":px,"shape-margin":px,size:px,grid:px,"grid-gap":px,"grid-row-gap":px,"grid-column-gap":px,"grid-template-rows":px,"grid-template-columns":px,"grid-auto-rows":px,"grid-auto-columns":px,"box-shadow-x":px,"box-shadow-y":px,"box-shadow-blur":px,"box-shadow-spread":px,"font-line-height":px,"text-shadow-x":px,"text-shadow-y":px,"text-shadow-blur":px});function iterate(prop,value,options){if(!value)return value;if(Array.isArray(value))for(var i=0;i<value.length;i++)value[i]=iterate(prop,value[i],options);else if("object"==typeof value)if("fallbacks"===prop)for(var innerProp in value)value[innerProp]=iterate(innerProp,value[innerProp],options);else for(var _innerProp in value)value[_innerProp]=iterate(prop+"-"+_innerProp,value[_innerProp],options);else if("number"==typeof value){var unit=options[prop]||units[prop];return unit?"function"==typeof unit?unit(value).toString():""+value+unit:value.toString()}return value}var jss_plugin_default_unit_esm=function(options){void 0===options&&(options={});var camelCasedOptions=addCamelCasedVersion(options);return{onProcessStyle:function(style,rule){if("style"!==rule.type)return style;for(var prop in style)style[prop]=iterate(prop,style[prop],camelCasedOptions);return style},onChangeValue:function(value,prop){return iterate(prop,value,camelCasedOptions)}}},propArray={"background-size":!0,"background-position":!0,border:!0,"border-bottom":!0,"border-left":!0,"border-top":!0,"border-right":!0,"border-radius":!0,"border-image":!0,"border-width":!0,"border-style":!0,"border-color":!0,"box-shadow":!0,flex:!0,margin:!0,padding:!0,outline:!0,"transform-origin":!0,transform:!0,transition:!0},propArrayInObj={position:!0,size:!0},propObj={padding:{top:0,right:0,bottom:0,left:0},margin:{top:0,right:0,bottom:0,left:0},background:{attachment:null,color:null,image:null,position:null,repeat:null},border:{width:null,style:null,color:null},"border-top":{width:null,style:null,color:null},"border-right":{width:null,style:null,color:null},"border-bottom":{width:null,style:null,color:null},"border-left":{width:null,style:null,color:null},outline:{width:null,style:null,color:null},"list-style":{type:null,position:null,image:null},transition:{property:null,duration:null,"timing-function":null,timingFunction:null,delay:null},animation:{name:null,duration:null,"timing-function":null,timingFunction:null,delay:null,"iteration-count":null,iterationCount:null,direction:null,"fill-mode":null,fillMode:null,"play-state":null,playState:null},"box-shadow":{x:0,y:0,blur:0,spread:0,color:null,inset:null},"text-shadow":{x:0,y:0,blur:null,color:null}},customPropObj={border:{radius:"border-radius",image:"border-image",width:"border-width",style:"border-style",color:"border-color"},"border-bottom":{width:"border-bottom-width",style:"border-bottom-style",color:"border-bottom-color"},"border-top":{width:"border-top-width",style:"border-top-style",color:"border-top-color"},"border-left":{width:"border-left-width",style:"border-left-style",color:"border-left-color"},"border-right":{width:"border-right-width",style:"border-right-style",color:"border-right-color"},background:{size:"background-size",image:"background-image"},font:{style:"font-style",variant:"font-variant",weight:"font-weight",stretch:"font-stretch",size:"font-size",family:"font-family",lineHeight:"line-height","line-height":"line-height"},flex:{grow:"flex-grow",basis:"flex-basis",direction:"flex-direction",wrap:"flex-wrap",flow:"flex-flow",shrink:"flex-shrink"},align:{self:"align-self",items:"align-items",content:"align-content"},grid:{"template-columns":"grid-template-columns",templateColumns:"grid-template-columns","template-rows":"grid-template-rows",templateRows:"grid-template-rows","template-areas":"grid-template-areas",templateAreas:"grid-template-areas",template:"grid-template","auto-columns":"grid-auto-columns",autoColumns:"grid-auto-columns","auto-rows":"grid-auto-rows",autoRows:"grid-auto-rows","auto-flow":"grid-auto-flow",autoFlow:"grid-auto-flow",row:"grid-row",column:"grid-column","row-start":"grid-row-start",rowStart:"grid-row-start","row-end":"grid-row-end",rowEnd:"grid-row-end","column-start":"grid-column-start",columnStart:"grid-column-start","column-end":"grid-column-end",columnEnd:"grid-column-end",area:"grid-area",gap:"grid-gap","row-gap":"grid-row-gap",rowGap:"grid-row-gap","column-gap":"grid-column-gap",columnGap:"grid-column-gap"}};function processArray(value,prop,scheme,rule){return null==scheme[prop]?value:0===value.length?[]:Array.isArray(value[0])?processArray(value[0],prop,scheme,rule):"object"==typeof value[0]?function(value,prop,rule){return value.map((function(item){return objectToArray(item,prop,rule,!1,!0)}))}(value,prop,rule):[value]}function objectToArray(value,prop,rule,isFallback,isInArray){if(!propObj[prop]&&!customPropObj[prop])return[];var result=[];if(customPropObj[prop]&&(value=function(value,rule,customProps,isFallback){for(var prop in customProps){var propName=customProps[prop];if(void 0!==value[prop]&&(isFallback||!rule.prop(propName))){var _styleDetector,appendedValue=styleDetector((_styleDetector={},_styleDetector[propName]=value[prop],_styleDetector),rule)[propName];isFallback?rule.style.fallbacks[propName]=appendedValue:rule.style[propName]=appendedValue}delete value[prop]}return value}(value,rule,customPropObj[prop],isFallback)),Object.keys(value).length)for(var baseProp in propObj[prop])value[baseProp]?Array.isArray(value[baseProp])?result.push(null===propArrayInObj[baseProp]?value[baseProp]:value[baseProp].join(" ")):result.push(value[baseProp]):null!=propObj[prop][baseProp]&&result.push(propObj[prop][baseProp]);return!result.length||isInArray?result:[result]}function styleDetector(style,rule,isFallback){for(var prop in style){var value=style[prop];if(Array.isArray(value)){if(!Array.isArray(value[0])){if("fallbacks"===prop){for(var index=0;index<style.fallbacks.length;index++)style.fallbacks[index]=styleDetector(style.fallbacks[index],rule,!0);continue}style[prop]=processArray(value,prop,propArray,rule),style[prop].length||delete style[prop]}}else if("object"==typeof value){if("fallbacks"===prop){style.fallbacks=styleDetector(style.fallbacks,rule,!0);continue}style[prop]=objectToArray(value,prop,rule,isFallback),style[prop].length||delete style[prop]}else""===style[prop]&&delete style[prop]}return style}var jss_plugin_expand_esm=function(){return{onProcessStyle:function(style,rule){if(!style||"style"!==rule.type)return style;if(Array.isArray(style)){for(var index=0;index<style.length;index++)style[index]=styleDetector(style[index],rule);return style}return styleDetector(style,rule)}}},dist_module=__webpack_require__(59);function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _toConsumableArray(arr){return function(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function(iter){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(iter))return Array.from(iter)}(arr)||function(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var js="",css="",vendor="",browser="",isTouch=dist_module.a&&"ontouchstart"in document.documentElement;if(dist_module.a){var jsCssMap={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},css_vendor_esm_style=document.createElement("p").style;for(var css_vendor_esm_key in jsCssMap)if(css_vendor_esm_key+"Transform"in css_vendor_esm_style){js=css_vendor_esm_key,css=jsCssMap[css_vendor_esm_key];break}"Webkit"===js&&"msHyphens"in css_vendor_esm_style&&(js="ms",css=jsCssMap.ms,browser="edge"),"Webkit"===js&&"-apple-trailing-word"in css_vendor_esm_style&&(vendor="apple")}var prefix_js=js,prefix_css=css,prefix_vendor=vendor,prefix_browser=browser,prefix_isTouch=isTouch;var appearence={noPrefill:["appearance"],supportedProperty:function(prop){return"appearance"===prop&&("ms"===prefix_js?"-webkit-"+prop:prefix_css+prop)}},colorAdjust={noPrefill:["color-adjust"],supportedProperty:function(prop){return"color-adjust"===prop&&("Webkit"===prefix_js?prefix_css+"print-"+prop:prop)}},regExp=/[-\s]+(.)?/g;function toUpper(match,c){return c?c.toUpperCase():""}function camelize(str){return str.replace(regExp,toUpper)}function pascalize(str){return camelize("-"+str)}var el,mask={noPrefill:["mask"],supportedProperty:function(prop,style){if(!/^mask/.test(prop))return!1;if("Webkit"===prefix_js){if(camelize("mask-image")in style)return prop;if(prefix_js+pascalize("mask-image")in style)return prefix_css+prop}return prop}},textOrientation={noPrefill:["text-orientation"],supportedProperty:function(prop){return"text-orientation"===prop&&("apple"!==prefix_vendor||prefix_isTouch?prop:prefix_css+prop)}},transform={noPrefill:["transform"],supportedProperty:function(prop,style,options){return"transform"===prop&&(options.transform?prop:prefix_css+prop)}},transition={noPrefill:["transition"],supportedProperty:function(prop,style,options){return"transition"===prop&&(options.transition?prop:prefix_css+prop)}},writingMode={noPrefill:["writing-mode"],supportedProperty:function(prop){return"writing-mode"===prop&&("Webkit"===prefix_js||"ms"===prefix_js&&"edge"!==prefix_browser?prefix_css+prop:prop)}},userSelect={noPrefill:["user-select"],supportedProperty:function(prop){return"user-select"===prop&&("Moz"===prefix_js||"ms"===prefix_js||"apple"===prefix_vendor?prefix_css+prop:prop)}},breakPropsOld={supportedProperty:function(prop,style){return!!/^break-/.test(prop)&&("Webkit"===prefix_js?"WebkitColumn"+pascalize(prop)in style&&prefix_css+"column-"+prop:"Moz"===prefix_js&&("page"+pascalize(prop)in style&&"page-"+prop))}},inlineLogicalOld={supportedProperty:function(prop,style){if(!/^(border|margin|padding)-inline/.test(prop))return!1;if("Moz"===prefix_js)return prop;var newProp=prop.replace("-inline","");return prefix_js+pascalize(newProp)in style&&prefix_css+newProp}},unprefixed={supportedProperty:function(prop,style){return camelize(prop)in style&&prop}},prefixed={supportedProperty:function(prop,style){var pascalized=pascalize(prop);return"-"===prop[0]||"-"===prop[0]&&"-"===prop[1]?prop:prefix_js+pascalized in style?prefix_css+prop:"Webkit"!==prefix_js&&"Webkit"+pascalized in style&&"-webkit-"+prop}},scrollSnap={supportedProperty:function(prop){return"scroll-snap"===prop.substring(0,11)&&("ms"===prefix_js?""+prefix_css+prop:prop)}},overscrollBehavior={supportedProperty:function(prop){return"overscroll-behavior"===prop&&("ms"===prefix_js?prefix_css+"scroll-chaining":prop)}},propMap={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},flex2012={supportedProperty:function(prop,style){var newProp=propMap[prop];return!!newProp&&(prefix_js+pascalize(newProp)in style&&prefix_css+newProp)}},propMap$1={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},propKeys=Object.keys(propMap$1),prefixCss=function(p){return prefix_css+p},plugins=[appearence,colorAdjust,mask,textOrientation,transform,transition,writingMode,userSelect,breakPropsOld,inlineLogicalOld,unprefixed,prefixed,scrollSnap,overscrollBehavior,flex2012,{supportedProperty:function(prop,style,_ref){var multiple=_ref.multiple;if(propKeys.indexOf(prop)>-1){var newProp=propMap$1[prop];if(!Array.isArray(newProp))return prefix_js+pascalize(newProp)in style&&prefix_css+newProp;if(!multiple)return!1;for(var i=0;i<newProp.length;i++)if(!(prefix_js+pascalize(newProp[0])in style))return!1;return newProp.map(prefixCss)}return!1}}],propertyDetectors=plugins.filter((function(p){return p.supportedProperty})).map((function(p){return p.supportedProperty})),noPrefill=plugins.filter((function(p){return p.noPrefill})).reduce((function(a,p){return a.push.apply(a,_toConsumableArray(p.noPrefill)),a}),[]),css_vendor_esm_cache={};if(dist_module.a){el=document.createElement("p");var computed=window.getComputedStyle(document.documentElement,"");for(var key$1 in computed)isNaN(key$1)||(css_vendor_esm_cache[computed[key$1]]=computed[key$1]);noPrefill.forEach((function(x){return delete css_vendor_esm_cache[x]}))}function supportedProperty(prop,options){if(void 0===options&&(options={}),!el)return prop;if(null!=css_vendor_esm_cache[prop])return css_vendor_esm_cache[prop];"transition"!==prop&&"transform"!==prop||(options[prop]=prop in el.style);for(var i=0;i<propertyDetectors.length&&(css_vendor_esm_cache[prop]=propertyDetectors[i](prop,el.style,options),!css_vendor_esm_cache[prop]);i++);try{el.style[prop]=""}catch(err){return!1}return css_vendor_esm_cache[prop]}var el$1,cache$1={},transitionProperties={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},transPropsRegExp=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g;function prefixTransitionCallback(match,p1,p2){if("var"===p1)return"var";if("all"===p1)return"all";if("all"===p2)return", all";var prefixedValue=p1?supportedProperty(p1):", "+supportedProperty(p2);return prefixedValue||(p1||p2)}function supportedValue(property,value){var prefixedValue=value;if(!el$1||"content"===property)return value;if("string"!=typeof prefixedValue||!isNaN(parseInt(prefixedValue,10)))return prefixedValue;var cacheKey=property+prefixedValue;if(null!=cache$1[cacheKey])return cache$1[cacheKey];try{el$1.style[property]=prefixedValue}catch(err){return cache$1[cacheKey]=!1,!1}if(transitionProperties[property])prefixedValue=prefixedValue.replace(transPropsRegExp,prefixTransitionCallback);else if(""===el$1.style[property]&&("-ms-flex"===(prefixedValue=prefix_css+prefixedValue)&&(el$1.style[property]="-ms-flexbox"),el$1.style[property]=prefixedValue,""===el$1.style[property]))return cache$1[cacheKey]=!1,!1;return el$1.style[property]="",cache$1[cacheKey]=prefixedValue,cache$1[cacheKey]}dist_module.a&&(el$1=document.createElement("p"));var jss_plugin_vendor_prefixer_esm=function(){function prefixStyle(style){for(var prop in style){var value=style[prop];if("fallbacks"===prop&&Array.isArray(value))style[prop]=value.map(prefixStyle);else{var changeProp=!1,supportedProp=supportedProperty(prop);supportedProp&&supportedProp!==prop&&(changeProp=!0);var changeValue=!1,supportedValue$1=supportedValue(supportedProp,Object(jss_esm.toCssValue)(value));supportedValue$1&&supportedValue$1!==value&&(changeValue=!0),(changeProp||changeValue)&&(changeProp&&delete style[prop],style[supportedProp||prop]=supportedValue$1||value)}}return style}return{onProcessRule:function(rule){if("keyframes"===rule.type){var atRule=rule;atRule.at="-"===(key=atRule.at)[1]||"ms"===prefix_js?key:"@"+prefix_css+"keyframes"+key.substr(10)}var key},onProcessStyle:function(style,rule){return"style"!==rule.type?style:prefixStyle(style)},onChangeValue:function(value,prop){return supportedValue(prop,Object(jss_esm.toCssValue)(value))||value}}};var jss_plugin_props_sort_esm=function(){var sort=function(prop0,prop1){return prop0.length===prop1.length?prop0>prop1?1:-1:prop0.length-prop1.length};return{onProcessStyle:function(style,rule){if("style"!==rule.type)return style;for(var newStyle={},props=Object.keys(style).sort(sort),i=0;i<props.length;i++)newStyle[props[i]]=style[props[i]];return newStyle}}};__webpack_exports__.default=function(options){return void 0===options&&(options={}),{plugins:[jss_plugin_rule_value_function_esm(),jss_plugin_rule_value_observable_esm(options.observable),jss_plugin_template_esm(),jss_plugin_global_esm(),jss_plugin_extend_esm(),jss_plugin_nested_esm(),jss_plugin_compose_esm(),jss_plugin_camel_case_esm(),jss_plugin_default_unit_esm(options.defaultUnit),jss_plugin_expand_esm(),jss_plugin_vendor_prefixer_esm(),jss_plugin_props_sort_esm()]}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"keydownHandler",(function(){return keydownHandler})),__webpack_require__.d(__webpack_exports__,"keymap",(function(){return keymap}));for(var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},chrome="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),safari="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),gecko="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),mac="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),ie="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),brokenModifierNames=chrome&&(mac||+chrome[1]<57)||gecko&&mac,i=0;i<10;i++)base[48+i]=base[96+i]=String(i);for(i=1;i<=24;i++)base[i+111]="F"+i;for(i=65;i<=90;i++)base[i]=String.fromCharCode(i+32),shift[i]=String.fromCharCode(i);for(var code in base)shift.hasOwnProperty(code)||(shift[code]=base[code]);var index_es=__webpack_require__(3),index_es_mac="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function normalizeKeyName(name){var alt,ctrl,shift,meta,parts=name.split(/-(?!$)/),result=parts[parts.length-1];"Space"==result&&(result=" ");for(var i=0;i<parts.length-1;i++){var mod=parts[i];if(/^(cmd|meta|m)$/i.test(mod))meta=!0;else if(/^a(lt)?$/i.test(mod))alt=!0;else if(/^(c|ctrl|control)$/i.test(mod))ctrl=!0;else if(/^s(hift)?$/i.test(mod))shift=!0;else{if(!/^mod$/i.test(mod))throw new Error("Unrecognized modifier name: "+mod);index_es_mac?meta=!0:ctrl=!0}}return alt&&(result="Alt-"+result),ctrl&&(result="Ctrl-"+result),meta&&(result="Meta-"+result),shift&&(result="Shift-"+result),result}function modifiers(name,event,shift){return event.altKey&&(name="Alt-"+name),event.ctrlKey&&(name="Ctrl-"+name),event.metaKey&&(name="Meta-"+name),!1!==shift&&event.shiftKey&&(name="Shift-"+name),name}function keymap(bindings){return new index_es.Plugin({props:{handleKeyDown:keydownHandler(bindings)}})}function keydownHandler(bindings){var map=function(map){var copy=Object.create(null);for(var prop in map)copy[normalizeKeyName(prop)]=map[prop];return copy}(bindings);return function(view,event){var baseName,name=function(event){var name=!(brokenModifierNames&&(event.ctrlKey||event.altKey||event.metaKey)||(safari||ie)&&event.shiftKey&&event.key&&1==event.key.length)&&event.key||(event.shiftKey?shift:base)[event.keyCode]||event.key||"Unidentified";return"Esc"==name&&(name="Escape"),"Del"==name&&(name="Delete"),"Left"==name&&(name="ArrowLeft"),"Up"==name&&(name="ArrowUp"),"Right"==name&&(name="ArrowRight"),"Down"==name&&(name="ArrowDown"),name}(event),isChar=1==name.length&&" "!=name,direct=map[modifiers(name,event,!isChar)];if(direct&&direct(view.state,view.dispatch,view))return!0;if(isChar&&(event.shiftKey||event.altKey||event.metaKey||name.charCodeAt(0)>127)&&(baseName=base[event.keyCode])&&baseName!=name){var fromCode=map[modifiers(baseName,event,!0)];if(fromCode&&fromCode(view.state,view.dispatch,view))return!0}else if(isChar&&event.shiftKey){var withShift=map[modifiers(name,event,!0)];if(withShift&&withShift(view.state,view.dispatch,view))return!0}return!1}}}]);