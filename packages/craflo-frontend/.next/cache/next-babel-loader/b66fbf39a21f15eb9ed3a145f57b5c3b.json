{"ast":null,"code":"var _jsxFileName = \"/usr/local/src/app/packages/craflo-frontend/src/features/authentication-form/index.tsx\";\nvar __jsx = React.createElement;\nimport React, { useContext } from 'react';\nimport SignInForm from './login';\nimport SignOutForm from './register';\nimport ForgotPassForm from './forgot-password';\nimport { AuthContext } from 'contexts/auth/auth.context';\nimport PageLoading from \"components/PageLoading/PageLoading\";\nlet CANONICAL_URL = process.env.CANONICAL_URL;\nexport default function AuthenticationForm() {\n  const {\n    authState,\n    authDispatch\n  } = useContext(AuthContext);\n  const [state, setState] = React.useState({\n    pageLoaded: false\n  });\n  React.useEffect(function mount() {\n    let eventMethod = window.addEventListener ? \"addEventListener\" : \"attachEvent\";\n    let eventer = window[eventMethod];\n    let messageEvent = eventMethod == \"attachEvent\" ? \"onmessage\" : \"message\"; //let messageEvent = eventMethod == \"attachEvent\" ? \"onGuestAuthPageLoad\" : \"GuestAuthPageLoad\";\n    // Listen to message from child window\n\n    eventer(messageEvent, function (e) {\n      console.log(\"catched hahahhah\");\n      console.log('parent received message!:  ', e.data);\n\n      if (e.data == 'GuestAuthPageLoad') {\n        setState({\n          pageLoaded: true\n        });\n      }\n\n      if (e.data == 'GuestAuthSuccess') {\n        authDispatch({\n          type: 'SIGNIN_SUCCESS'\n        });\n      }\n    }, false);\n  });\n  let RenderForm;\n\n  if (authState.currentForm === 'signIn') {\n    RenderForm = SignInForm;\n  }\n\n  if (authState.currentForm === 'signUp') {\n    RenderForm = SignOutForm;\n  }\n\n  if (authState.currentForm === 'forgotPass') {\n    RenderForm = ForgotPassForm;\n  }\n\n  console.log(CANONICAL_URL, \"sdfadafasdasdfasdfasdf.asd.f.asdf.\");\n  return /*#__PURE__*/React.createElement(React.Fragment, null, !state.pageLoaded ? /*#__PURE__*/React.createElement(PageLoading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 27\n    }\n  }) : /*#__PURE__*/React.createElement(React.Fragment, null), /*#__PURE__*/React.createElement(\"iframe\", {\n    id: \"myIframe\",\n    style: {\n      display: !state.pageLoaded ? 'none' : 'initial',\n      maxWidth: '410px',\n      width: '100%',\n      minHeight: '642px',\n      height: '100%',\n      overflow: 'visible'\n    },\n    src: CANONICAL_URL + \"/signin\",\n    width: \"100%\",\n    height: \"100%\",\n    scrolling: \"no\",\n    frameBorder: \"0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  }));\n}","map":{"version":3,"sources":["/usr/local/src/app/packages/craflo-frontend/src/features/authentication-form/index.tsx"],"names":["React","useContext","SignInForm","SignOutForm","ForgotPassForm","AuthContext","PageLoading","CANONICAL_URL","process","env","AuthenticationForm","authState","authDispatch","state","setState","useState","pageLoaded","useEffect","mount","eventMethod","window","addEventListener","eventer","messageEvent","e","console","log","data","type","RenderForm","currentForm","display","maxWidth","width","minHeight","height","overflow"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,QAAkC,OAAlC;AAEA,OAAOC,UAAP,MAAuB,SAAvB;AACA,OAAOC,WAAP,MAAwB,YAAxB;AACA,OAAOC,cAAP,MAA2B,mBAA3B;AACA,SAASC,WAAT,QAA4B,4BAA5B;AAGA,OAAOC,WAAP,MAAwB,oCAAxB;AAEA,IAAIC,aAAa,GAAGC,OAAO,CAACC,GAAR,CAAYF,aAAhC;AAEA,eAAe,SAASG,kBAAT,GAA8B;AAC3C,QAAM;AAAEC,IAAAA,SAAF;AAAaC,IAAAA;AAAb,MAA8BX,UAAU,CAAMI,WAAN,CAA9C;AACA,QAAM,CAACQ,KAAD,EAAQC,QAAR,IAAoBd,KAAK,CAACe,QAAN,CAAe;AACvCC,IAAAA,UAAU,EAAE;AAD2B,GAAf,CAA1B;AAIAhB,EAAAA,KAAK,CAACiB,SAAN,CAAgB,SAASC,KAAT,GAAiB;AAC/B,QAAIC,WAAW,GAAGC,MAAM,CAACC,gBAAP,GAA0B,kBAA1B,GAA+C,aAAjE;AACA,QAAIC,OAAO,GAAGF,MAAM,CAACD,WAAD,CAApB;AACA,QAAII,YAAY,GAAGJ,WAAW,IAAI,aAAf,GAA+B,WAA/B,GAA6C,SAAhE,CAH+B,CAI/B;AAGA;;AACAG,IAAAA,OAAO,CAACC,YAAD,EAAc,UAASC,CAAT,EAAY;AAC/BC,MAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAY,6BAAZ,EAA0CF,CAAC,CAACG,IAA5C;;AACA,UAAGH,CAAC,CAACG,IAAF,IAAU,mBAAb,EAAiC;AAC/Bb,QAAAA,QAAQ,CAAC;AAACE,UAAAA,UAAU,EAAE;AAAb,SAAD,CAAR;AACD;;AACD,UAAGQ,CAAC,CAACG,IAAF,IAAU,kBAAb,EAAgC;AAC9Bf,QAAAA,YAAY,CAAC;AACXgB,UAAAA,IAAI,EAAE;AADK,SAAD,CAAZ;AAGD;AAEF,KAZM,EAYL,KAZK,CAAP;AAaD,GArBD;AAuBA,MAAIC,UAAJ;;AAEA,MAAIlB,SAAS,CAACmB,WAAV,KAA0B,QAA9B,EAAwC;AACtCD,IAAAA,UAAU,GAAG3B,UAAb;AACD;;AAED,MAAIS,SAAS,CAACmB,WAAV,KAA0B,QAA9B,EAAwC;AACtCD,IAAAA,UAAU,GAAG1B,WAAb;AACD;;AAED,MAAIQ,SAAS,CAACmB,WAAV,KAA0B,YAA9B,EAA4C;AAC1CD,IAAAA,UAAU,GAAGzB,cAAb;AACD;;AAECqB,EAAAA,OAAO,CAACC,GAAR,CAAYnB,aAAZ,EAA2B,oCAA3B;AAIF,sBAAS,0CACJ,CAACM,KAAK,CAACG,UAAP,gBAAmB,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAnB,gBAAqC,yCADjC,eAEH;AAAQ,IAAA,EAAE,EAAC,UAAX;AACS,IAAA,KAAK,EAAE;AAAEe,MAAAA,OAAO,EAAE,CAAClB,KAAK,CAACG,UAAP,GAAmB,MAAnB,GAA2B,SAAtC;AAAiDgB,MAAAA,QAAQ,EAAC,OAA1D;AAAmEC,MAAAA,KAAK,EAAC,MAAzE;AAAiFC,MAAAA,SAAS,EAAE,OAA5F;AAAqGC,MAAAA,MAAM,EAAE,MAA7G;AAAqHC,MAAAA,QAAQ,EAAC;AAA9H,KADhB;AAES,IAAA,GAAG,EAAG7B,aAAa,GAAG,SAF/B;AAGS,IAAA,KAAK,EAAC,MAHf;AAIS,IAAA,MAAM,EAAC,MAJhB;AAKS,IAAA,SAAS,EAAC,IALnB;AAMS,IAAA,WAAW,EAAC,GANrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFG,CAAT;AAWD","sourcesContent":["import React, { useContext } from 'react';\nimport ReactDOM from 'react-dom';\nimport SignInForm from './login';\nimport SignOutForm from './register';\nimport ForgotPassForm from './forgot-password';\nimport { AuthContext } from 'contexts/auth/auth.context';\nimport Iframe from 'react-iframe'\nimport { openModal, closeModal } from '@redq/reuse-modal';\nimport PageLoading from \"components/PageLoading/PageLoading\";\n\nlet CANONICAL_URL = process.env.CANONICAL_URL\n\nexport default function AuthenticationForm() {\n  const { authState, authDispatch } = useContext<any>(AuthContext);\n  const [state, setState] = React.useState({\n    pageLoaded: false\n  })\n\n  React.useEffect(function mount() {\n    let eventMethod = window.addEventListener ? \"addEventListener\" : \"attachEvent\";\n    let eventer = window[eventMethod];\n    let messageEvent = eventMethod == \"attachEvent\" ? \"onmessage\" : \"message\";\n    //let messageEvent = eventMethod == \"attachEvent\" ? \"onGuestAuthPageLoad\" : \"GuestAuthPageLoad\";\n\n\n    // Listen to message from child window\n    eventer(messageEvent,function(e) {\n      console.log(\"catched hahahhah\")\n      console.log('parent received message!:  ',e.data);\n      if(e.data == 'GuestAuthPageLoad'){\n        setState({pageLoaded: true})\n      }\n      if(e.data == 'GuestAuthSuccess'){\n        authDispatch({\n          type: 'SIGNIN_SUCCESS',\n        });\n      }\n\n    },false);\n  });\n\n  let RenderForm;\n\n  if (authState.currentForm === 'signIn') {\n    RenderForm = SignInForm;\n  }\n\n  if (authState.currentForm === 'signUp') {\n    RenderForm = SignOutForm;\n  }\n\n  if (authState.currentForm === 'forgotPass') {\n    RenderForm = ForgotPassForm;\n  }\n\n    console.log(CANONICAL_URL, \"sdfadafasdasdfasdfasdf.asd.f.asdf.\")\n\n\n\n  return  (<>\n      {!state.pageLoaded? <PageLoading /> : <></>}\n        <iframe id=\"myIframe\"\n                 style={{ display: !state.pageLoaded? 'none': 'initial', maxWidth:'410px', width:'100%', minHeight: '642px', height: '100%', overflow:'visible'}}\n                 src={ CANONICAL_URL + \"/signin\"}\n                 width=\"100%\"\n                 height=\"100%\"\n                 scrolling=\"no\"\n                 frameBorder=\"0\"\n        />\n    </>)\n}\n"]},"metadata":{},"sourceType":"module"}