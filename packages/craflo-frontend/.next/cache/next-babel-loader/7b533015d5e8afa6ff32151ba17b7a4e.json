{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/usr/local/src/app/packages/craflo-frontend/src/layouts/header/header.tsx\";\nimport React from 'react';\nimport Router, { useRouter } from 'next/router';\nimport { openModal } from '@redq/reuse-modal';\nimport { AuthContext } from 'contexts/auth/auth.context';\nimport AuthenticationForm from 'features/authentication-form';\nimport { RightMenu } from './menu/right-menu/right-menu';\nimport { LeftMenu } from './menu/left-menu/left-menu';\nimport HeaderWrapper from './header.style';\nimport LogoImage from 'assets/images/logo.png';\nimport UserImage from 'assets/images/user.jpg'; // import { isCategoryPage } from '../is-home-page';\n\nimport Search from 'features/search/search';\nimport useAuthStore from \"hooks/globalStores/useAuthStore\"; // import LanguageSwitcher from \"./menu/language-switcher/language-switcher\";\n// import GeoSwitcher from \"./menu/geo-switcher/geo-switcher\";\n\nimport { useAppState } from 'contexts/app/app.provider';\nimport useMiniProfile from \"hooks/viewer/useMiniProfile\";\nimport { withApollo } from \"lib/apollo/withApollo\"; // import UpdateContact from \"../../components/contact-card/contact-card\";\n\nimport { StyledProfileButton } from \"../../components/button/button\";\nimport { Filter } from 'assets/icons/Filter';\nimport useStores from \"hooks/useStores\";\nimport { SelectedFilters } from '@appbaseio/reactivesearch';\nimport Headroom from 'react-headroom';\nconst CANONICAL_URL = process.env.CANONICAL_URL;\n\nconst Header = ({\n  className\n}) => {\n  const {\n    authDispatch\n  } = React.useContext(AuthContext);\n  const {\n    isAuthenticated,\n    account\n  } = useAuthStore();\n  const {\n    miniProfile\n  } = useMiniProfile();\n  const {\n    pathname,\n    query\n  } = useRouter();\n\n  const handleLogout = () => {\n    // if (typeof window !== 'undefined') {\n    //   localStorage.removeItem('access_token');\n    //   authDispatch({ type: 'SIGN_OUT' });\n    //   Router.push('/');\n    // }\n    Router.push('/logout'); // fetch(CANONICAL_URL + \"/logout\").then((res)=>res.json()).then((res)=>{\n    //   console.log(res)\n    // },\n    //   (err)=>{\n    //     console.log(err)\n    //   })\n  };\n\n  const handleJoin = () => {\n    authDispatch({\n      type: 'SIGNIN'\n    });\n    openModal({\n      show: true,\n      overlayClassName: 'quick-view-overlay',\n      closeOnClickOutside: true,\n      component: AuthenticationForm,\n      closeComponent: '',\n      config: {\n        enableResizing: false,\n        disableDragging: true,\n        className: 'quick-view-modal',\n        width: 410,\n        height: 'auto',\n        animationFrom: {\n          transform: 'scale(0.9) translate(0px, 10px)'\n        },\n        // react-spring <Spring from={}> props value\n        animationTo: {\n          transform: 'scale(1) translate(0px, 0px)'\n        },\n        //  react-spring <Spring to={}> props value\n        transition: {\n          mass: 1,\n          tension: 200,\n          friction: 26\n        } // react-spring config props\n\n      }\n    });\n  };\n\n  const isSticky = useAppState('isSticky');\n  const showSearch = isSticky;\n  const {\n    uiStore\n  } = useStores();\n  console.log(miniProfile, \"randi\");\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(HeaderWrapper, {\n    className: className,\n    id: \"layout-header\",\n    style: {\n      background: pathname == '/[lang]' ? 'none' : \"#fff !important\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 5\n    },\n    __self: this\n  }, /*#__PURE__*/React.createElement(LeftMenu, {\n    logo: LogoImage,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    },\n    __self: this\n  }), showSearch && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(StyledProfileButton, {\n    onClick: () => {\n      uiStore.toggleFilterDrawerOpen();\n      uiStore.closeMenuDrawer();\n    },\n    variant: 'iconFilter',\n    style: {\n      marginLeft: \"4rem\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 11\n    },\n    __self: this\n  }, /*#__PURE__*/React.createElement(Filter, {\n    color: \"#000\",\n    width: 28,\n    height: 28,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    },\n    __self: this\n  })), /*#__PURE__*/React.createElement(Search, {\n    minimal: true,\n    className: \"headerSearch\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 11\n    },\n    __self: this\n  })), /*#__PURE__*/React.createElement(RightMenu, {\n    isAuthenticated: isAuthenticated,\n    onJoin: handleJoin,\n    onLogout: handleLogout,\n    avatar: (miniProfile === null || miniProfile === void 0 ? void 0 : miniProfile.picture) || UserImage,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    },\n    __self: this\n  })), showSearch && /*#__PURE__*/React.createElement(Headroom, {\n    pinStart: 70,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 22\n    },\n    __self: this\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      background: \"#fff\",\n      paddingRight: 284,\n      paddingLeft: 284,\n      // paddingTop: 8,\n      paddingBottom: 0,\n      // borderTop: \"#ddd 1px dashed\",\n      // borderBottom: \"#ddd 1px solid\",\n      zIndex: 999,\n      top: 70,\n      position: \"relative\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 9\n    },\n    __self: this\n  }, /*#__PURE__*/React.createElement(SelectedFilters, {\n    showClearAll: false,\n    clearAllLabel: \"Clear\",\n    innerClass: {\n      button: 'sfilter-button'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 11\n    },\n    __self: this\n  }))));\n};\n\nexport default withApollo()(Header);","map":{"version":3,"sources":["/usr/local/src/app/packages/craflo-frontend/src/layouts/header/header.tsx"],"names":["React","Router","useRouter","openModal","AuthContext","AuthenticationForm","RightMenu","LeftMenu","HeaderWrapper","LogoImage","UserImage","Search","useAuthStore","useAppState","useMiniProfile","withApollo","StyledProfileButton","Filter","useStores","SelectedFilters","Headroom","CANONICAL_URL","process","env","Header","className","authDispatch","useContext","isAuthenticated","account","miniProfile","pathname","query","handleLogout","push","handleJoin","type","show","overlayClassName","closeOnClickOutside","component","closeComponent","config","enableResizing","disableDragging","width","height","animationFrom","transform","animationTo","transition","mass","tension","friction","isSticky","showSearch","uiStore","console","log","background","toggleFilterDrawerOpen","closeMenuDrawer","marginLeft","picture","paddingRight","paddingLeft","paddingBottom","zIndex","top","position","button"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Router, { useRouter } from 'next/router';\nimport { openModal, closeModal } from '@redq/reuse-modal';\nimport { AuthContext } from 'contexts/auth/auth.context';\nimport AuthenticationForm from 'features/authentication-form';\nimport { RightMenu } from './menu/right-menu/right-menu';\nimport { LeftMenu } from './menu/left-menu/left-menu';\nimport HeaderWrapper from './header.style';\nimport LogoImage from 'assets/images/logo.png';\nimport UserImage from 'assets/images/user.jpg';\n// import { isCategoryPage } from '../is-home-page';\nimport Search from 'features/search/search';\nimport useAuthStore from \"hooks/globalStores/useAuthStore\";\n// import LanguageSwitcher from \"./menu/language-switcher/language-switcher\";\n// import GeoSwitcher from \"./menu/geo-switcher/geo-switcher\";\nimport { useAppState, useAppDispatch } from 'contexts/app/app.provider';\nimport useMiniProfile from \"hooks/viewer/useMiniProfile\";\nimport {withApollo} from \"lib/apollo/withApollo\";\n// import UpdateContact from \"../../components/contact-card/contact-card\";\nimport {Button, StyledProfileButton} from \"../../components/button/button\";\nimport { Filter } from 'assets/icons/Filter';\nimport useStores from \"hooks/useStores\";\nimport {LayoutWrapper} from \"../layout.style\";\nimport {SelectedFilters} from '@appbaseio/reactivesearch';\nimport Headroom from 'react-headroom'\nimport {Chat} from \"../../assets/icons/Chat\";\n\ntype Props = {\n  className?: string;\n};\n\nconst CANONICAL_URL = process.env.CANONICAL_URL\n\nconst Header: React.FC<Props> = ({ className }) => {\n  const {\n    authDispatch,\n  } = React.useContext<any>(AuthContext);\n\n  const {isAuthenticated, account} = useAuthStore()\n  const {miniProfile} = useMiniProfile()\n  const { pathname, query } = useRouter();\n\n  const handleLogout = () => {\n    // if (typeof window !== 'undefined') {\n    //   localStorage.removeItem('access_token');\n    //   authDispatch({ type: 'SIGN_OUT' });\n    //   Router.push('/');\n    // }\n    Router.push('/logout');\n    // fetch(CANONICAL_URL + \"/logout\").then((res)=>res.json()).then((res)=>{\n    //   console.log(res)\n    // },\n    //   (err)=>{\n    //     console.log(err)\n    //   })\n  };\n\n  const handleJoin = () => {\n    authDispatch({\n      type: 'SIGNIN',\n    });\n\n    openModal({\n      show: true,\n      overlayClassName: 'quick-view-overlay',\n      closeOnClickOutside: true,\n      component: AuthenticationForm,\n      closeComponent: '',\n      config: {\n        enableResizing: false,\n        disableDragging: true,\n        className: 'quick-view-modal',\n        width: 410,\n        height: 'auto',\n        animationFrom: { transform: 'scale(0.9) translate(0px, 10px)' }, // react-spring <Spring from={}> props value\n        animationTo: { transform: 'scale(1) translate(0px, 0px)' }, //  react-spring <Spring to={}> props value\n        transition: {\n          mass: 1,\n          tension: 200,\n          friction: 26\n        }, // react-spring config props\n      },\n    });\n  };\n\n  const isSticky = useAppState('isSticky');\n  const showSearch =  isSticky\n  const { uiStore } = useStores();\n\n  console.log(miniProfile, \"randi\")\n  return (\n    <>\n    <HeaderWrapper className={className} id=\"layout-header\" style={{background: pathname == '/[lang]'? 'none' :  \"#fff !important\"}}>\n      <LeftMenu logo={LogoImage} />\n      {showSearch && (\n        <>\n          {/*<GeoSwitcher />*/}\n          <StyledProfileButton\n            onClick={()=> {\n              uiStore.toggleFilterDrawerOpen()\n              uiStore.closeMenuDrawer()\n            }}\n            variant={'iconFilter'}\n            style={{ marginLeft:\"4rem\"}}\n          >\n            <Filter color={\"#000\"} width={28} height={28}/>\n          </StyledProfileButton>\n\n\n          {/*<Button*/}\n          {/*  size=\"big\"*/}\n          {/*  variant=\"outlined\"*/}\n          {/*  type=\"button\"*/}\n          {/*  className=\"add-button\"*/}\n          {/*  */}\n          {/*  style={{background:\"rgb(247, 247, 247)\", padding: \" 0 1rem  0 1rem\",  marginRight: \"0.5rem\", marginLeft:\"4rem\"}}*/}\n          {/*>*/}\n          {/*</Button>*/}\n          <Search minimal={true} className=\"headerSearch\" /></>\n      )}\n      <RightMenu\n        isAuthenticated={isAuthenticated}\n        onJoin={handleJoin}\n        onLogout={handleLogout}\n        avatar={ miniProfile?.picture || UserImage}\n      />\n\n    </HeaderWrapper>\n      {showSearch && <Headroom\n        pinStart={70}\n\n      >\n        <div style={{\n          background: \"#fff\",\n          paddingRight: 284,\n          paddingLeft: 284,\n          // paddingTop: 8,\n          paddingBottom: 0,\n          // borderTop: \"#ddd 1px dashed\",\n          // borderBottom: \"#ddd 1px solid\",\n          zIndex: 999,\n          top: 70,\n          position: \"relative\"\n        }}>\n          <SelectedFilters\n            showClearAll={false}\n            clearAllLabel={\"Clear\"}\n            innerClass={{\n              button: 'sfilter-button'\n            }}/>\n        </div>\n      </Headroom>}\n  </>\n\n  );\n};\n\nexport default withApollo()(Header);\n\n\n"]},"metadata":{},"sourceType":"module"}