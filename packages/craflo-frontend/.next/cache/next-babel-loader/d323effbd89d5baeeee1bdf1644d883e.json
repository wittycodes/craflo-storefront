{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect } from \"react\";\nimport { useQuery } from \"@apollo/client\";\nimport useStores from \"hooks/useStores\";\nimport miniProfileQuery from \"./miniProfile.gql\";\n/**\n * Gets current viewer's data\n *\n * @returns {Array} the viewer's data\n */\n\nexport default function useMiniProfile() {\n  _s();\n\n  var _useStores = useStores(),\n      authStore = _useStores.authStore;\n\n  var accessToken = authStore.accessToken;\n\n  var _useQuery = useQuery(miniProfileQuery, {\n    skip: !accessToken\n  }),\n      loading = _useQuery.loading,\n      data = _useQuery.data,\n      refetch = _useQuery.refetch;\n\n  var viewer = data && data.viewer;\n  useEffect(function () {\n    if (!viewer && accessToken) {\n      refetch();\n    }\n  }, [accessToken, viewer]);\n  return {\n    miniProfile: data === null || data === void 0 ? void 0 : data.viewer,\n    loading: loading,\n    refetch: refetch\n  };\n}\n\n_s(useMiniProfile, \"AwQBdK2HW0Nwhn4O8XSGJM/2hl4=\", false, function () {\n  return [useStores, useQuery];\n});","map":{"version":3,"sources":["/usr/local/src/app/packages/craflo-frontend/src/reaction/hooks/viewer/useMiniProfile.tsx"],"names":["useEffect","useQuery","useStores","miniProfileQuery","useMiniProfile","authStore","accessToken","skip","loading","data","refetch","viewer","miniProfile"],"mappings":";;AAAA,SAASA,SAAT,QAA0B,OAA1B;AACA,SAASC,QAAT,QAAyB,gBAAzB;AACA,OAAOC,SAAP,MAAsB,iBAAtB;AACA,OAAOC,gBAAP,MAA6B,mBAA7B;AAEA;AACA;AACA;AACA;AACA;;AACA,eAAe,SAASC,cAAT,GAA0B;AAAA;;AAAA,mBACjBF,SAAS,EADQ;AAAA,MAC/BG,SAD+B,cAC/BA,SAD+B;;AAAA,MAEhCC,WAFgC,GAEhBD,SAFgB,CAEhCC,WAFgC;;AAAA,kBAIJL,QAAQ,CAACE,gBAAD,EAAmB;AAC5DI,IAAAA,IAAI,EAAE,CAACD;AADqD,GAAnB,CAJJ;AAAA,MAI/BE,OAJ+B,aAI/BA,OAJ+B;AAAA,MAItBC,IAJsB,aAItBA,IAJsB;AAAA,MAIhBC,OAJgB,aAIhBA,OAJgB;;AAQvC,MAAMC,MAAM,GAAGF,IAAI,IAAIA,IAAI,CAACE,MAA5B;AAEAX,EAAAA,SAAS,CAAC,YAAM;AACd,QAAI,CAACW,MAAD,IAAWL,WAAf,EAA4B;AAC1BI,MAAAA,OAAO;AACR;AACF,GAJQ,EAIN,CAACJ,WAAD,EAAcK,MAAd,CAJM,CAAT;AAMA,SAAO;AACLC,IAAAA,WAAW,EAAEH,IAAF,aAAEA,IAAF,uBAAEA,IAAI,CAAEE,MADd;AAELH,IAAAA,OAAO,EAAPA,OAFK;AAGLE,IAAAA,OAAO,EAAPA;AAHK,GAAP;AAKD;;GArBuBN,c;UACAF,S,EAGaD,Q","sourcesContent":["import { useEffect } from \"react\";\nimport { useQuery } from \"@apollo/client\";\nimport useStores from \"hooks/useStores\";\nimport miniProfileQuery from \"./miniProfile.gql\";\n\n/**\n * Gets current viewer's data\n *\n * @returns {Array} the viewer's data\n */\nexport default function useMiniProfile() {\n  const { authStore } = useStores();\n  const {accessToken } = authStore;\n\n  const { loading, data, refetch } = useQuery(miniProfileQuery, {\n    skip: !accessToken\n  });\n\n  const viewer = data && data.viewer;\n\n  useEffect(() => {\n    if (!viewer && accessToken) {\n      refetch();\n    }\n  }, [accessToken, viewer]);\n\n  return {\n    miniProfile: data?.viewer,\n    loading,\n    refetch\n  };\n}\n"]},"metadata":{},"sourceType":"module"}