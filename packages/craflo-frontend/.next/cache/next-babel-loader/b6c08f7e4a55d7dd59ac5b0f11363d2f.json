{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/usr/local/src/app/packages/craflo-frontend/src/reaction/containers/catalog/withCatalogItems.tsx\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport inject from \"hocs/inject\";\nimport { Query } from \"@apollo/react-components\";\nimport hoistNonReactStatic from \"hoist-non-react-statics\";\nimport { pagination, paginationVariablesFromUrlParams } from \"lib/utils/pagination\";\nimport catalogItemsQuery from \"./catalogItems.gql\";\n//import ll from \"@reactioncommerce/api-utils/lib/encodeOpaqueId\";\n//console.log(ll)\n\n/**\n * withCatalogItems higher order query component for fetching primaryShopId and catalog data\n * @name withCatalogItems\n * @param {React.Component} Component to decorate and apply\n * @returns {React.Component} - component decorated with primaryShopId and catalog as props\n */\nexport default function withCatalogItems(Component) {\n  var CatalogItems = /*#__PURE__*/function (_React$Component) {\n    _inherits(CatalogItems, _React$Component);\n\n    var _super = _createSuper(CatalogItems);\n\n    function CatalogItems() {\n      _classCallCheck(this, CatalogItems);\n\n      return _super.apply(this, arguments);\n    }\n\n    _createClass(CatalogItems, [{\n      key: \"render\",\n      value: function render() {\n        var _this = this;\n\n        var _this$props = this.props,\n            primaryShopId = _this$props.primaryShopId,\n            routingStore = _this$props.routingStore,\n            uiStore = _this$props.uiStore,\n            tag = _this$props.tag;\n\n        var _uiStore$sortBy$split = uiStore.sortBy.split(\"-\"),\n            _uiStore$sortBy$split2 = _slicedToArray(_uiStore$sortBy$split, 2),\n            sortBy = _uiStore$sortBy$split2[0],\n            sortOrder = _uiStore$sortBy$split2[1];\n\n        var tagIds = tag && [tag._id]; //tagIds = [ll(\"reaction/tag\", \"wPSzobjkrtk8z95XH\")]\n        // if (!primaryShopId) {\n        //   return (\n        //      <Component\n        //       {...this.props}\n        //     />\n        //   );\n        // }\n\n        var variables = _objectSpread(_objectSpread({\n          shopId: \"oEsrnc9mqBDvt52TW\"\n        }, paginationVariablesFromUrlParams(routingStore.query, {\n          defaultPageLimit: uiStore.pageSize\n        })), {}, {\n          tagIds: tagIds,\n          sortBy: sortBy,\n          sortByPriceCurrencyCode: uiStore.sortByCurrencyCode,\n          sortOrder: sortOrder\n        }); // console.log(variables, \"rishbah\")\n\n\n        return /*#__PURE__*/React.createElement(Query, {\n          query: catalogItemsQuery,\n          variables: variables,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 9\n          }\n        }, function (_ref) {\n          var data = _ref.data,\n              fetchMore = _ref.fetchMore,\n              loading = _ref.loading;\n\n          var _ref2 = data || {},\n              catalogItems = _ref2.catalogItems; // console.log(catalogItems, \"items piasdpofij\")\n\n\n          return /*#__PURE__*/React.createElement(Component, _extends({}, _this.props, {\n            catalogItemsPageInfo: pagination({\n              fetchMore: fetchMore,\n              routingStore: routingStore,\n              data: data,\n              queryName: \"catalogItems\",\n              limit: uiStore.pageSize\n            }),\n            catalogItems: catalogItems && catalogItems.edges || [],\n            isLoadingCatalogItems: loading,\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 60,\n              columnNumber: 15\n            }\n          }));\n        });\n      }\n    }]);\n\n    return CatalogItems;\n  }(React.Component);\n\n  _defineProperty(CatalogItems, \"propTypes\", {\n    primaryShopId: PropTypes.string,\n    routingStore: PropTypes.object.isRequired,\n    tag: PropTypes.shape({\n      _id: PropTypes.string.isRequired\n    }),\n    uiStore: PropTypes.object.isRequired\n  });\n\n  hoistNonReactStatic(CatalogItems, Component);\n  return inject(\"primaryShopId\", \"routingStore\", \"uiStore\")(CatalogItems);\n}","map":{"version":3,"sources":["/usr/local/src/app/packages/craflo-frontend/src/reaction/containers/catalog/withCatalogItems.tsx"],"names":["React","PropTypes","inject","Query","hoistNonReactStatic","pagination","paginationVariablesFromUrlParams","catalogItemsQuery","withCatalogItems","Component","CatalogItems","props","primaryShopId","routingStore","uiStore","tag","sortBy","split","sortOrder","tagIds","_id","variables","shopId","query","defaultPageLimit","pageSize","sortByPriceCurrencyCode","sortByCurrencyCode","data","fetchMore","loading","catalogItems","queryName","limit","edges","string","object","isRequired","shape"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,SAASC,KAAT,QAAsB,0BAAtB;AACA,OAAOC,mBAAP,MAAgC,yBAAhC;AACA,SAASC,UAAT,EAAqBC,gCAArB,QAA6D,sBAA7D;AACA,OAAOC,iBAAP,MAA8B,oBAA9B;AAEA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,SAASC,gBAAT,CAA0BC,SAA1B,EAAqC;AAAA,MAC5CC,YAD4C;AAAA;;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA,+BAWvC;AAAA;;AAAA,0BAC+C,KAAKC,KADpD;AAAA,YACCC,aADD,eACCA,aADD;AAAA,YACgBC,YADhB,eACgBA,YADhB;AAAA,YAC8BC,OAD9B,eAC8BA,OAD9B;AAAA,YACuCC,GADvC,eACuCA,GADvC;;AAAA,oCAEqBD,OAAO,CAACE,MAAR,CAAeC,KAAf,CAAqB,GAArB,CAFrB;AAAA;AAAA,YAEAD,MAFA;AAAA,YAEQE,SAFR;;AAGP,YAAIC,MAAM,GAAGJ,GAAG,IAAI,CAACA,GAAG,CAACK,GAAL,CAApB,CAHO,CAIP;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,YAAMC,SAAS;AACbC,UAAAA,MAAM,EAAE;AADK,WAEVhB,gCAAgC,CAACO,YAAY,CAACU,KAAd,EAAqB;AAAEC,UAAAA,gBAAgB,EAAEV,OAAO,CAACW;AAA5B,SAArB,CAFtB;AAGbN,UAAAA,MAAM,EAANA,MAHa;AAIbH,UAAAA,MAAM,EAANA,MAJa;AAKbU,UAAAA,uBAAuB,EAAEZ,OAAO,CAACa,kBALpB;AAMbT,UAAAA,SAAS,EAATA;AANa,UAAf,CAdO,CAuBP;;;AAEA,4BACE,oBAAC,KAAD;AAAQ,UAAA,KAAK,EAAEX,iBAAf;AAAkC,UAAA,SAAS,EAAEc,SAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACG,gBAAkC;AAAA,cAA/BO,IAA+B,QAA/BA,IAA+B;AAAA,cAAzBC,SAAyB,QAAzBA,SAAyB;AAAA,cAAdC,OAAc,QAAdA,OAAc;;AAAA,sBACRF,IAAI,IAAI,EADA;AAAA,cACzBG,YADyB,SACzBA,YADyB,EAEjC;;;AAEA,8BACE,oBAAC,SAAD,eACM,KAAI,CAACpB,KADX;AAEE,YAAA,oBAAoB,EAAEN,UAAU,CAAC;AAC/BwB,cAAAA,SAAS,EAATA,SAD+B;AAE/BhB,cAAAA,YAAY,EAAZA,YAF+B;AAG/Be,cAAAA,IAAI,EAAJA,IAH+B;AAI/BI,cAAAA,SAAS,EAAE,cAJoB;AAK/BC,cAAAA,KAAK,EAAEnB,OAAO,CAACW;AALgB,aAAD,CAFlC;AASE,YAAA,YAAY,EAAGM,YAAY,IAAIA,YAAY,CAACG,KAA9B,IAAwC,EATxD;AAUE,YAAA,qBAAqB,EAAEJ,OAVzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF;AAcD,SAnBH,CADF;AAuBD;AA3D+C;;AAAA;AAAA,IACvB9B,KAAK,CAACS,SADiB;;AAAA,kBAC5CC,YAD4C,eAE7B;AACjBE,IAAAA,aAAa,EAAEX,SAAS,CAACkC,MADR;AAEjBtB,IAAAA,YAAY,EAAEZ,SAAS,CAACmC,MAAV,CAAiBC,UAFd;AAGjBtB,IAAAA,GAAG,EAAEd,SAAS,CAACqC,KAAV,CAAgB;AACnBlB,MAAAA,GAAG,EAAEnB,SAAS,CAACkC,MAAV,CAAiBE;AADH,KAAhB,CAHY;AAMjBvB,IAAAA,OAAO,EAAEb,SAAS,CAACmC,MAAV,CAAiBC;AANT,GAF6B;;AA8DlDjC,EAAAA,mBAAmB,CAACM,YAAD,EAAeD,SAAf,CAAnB;AACA,SAAOP,MAAM,CAAC,eAAD,EAAkB,cAAlB,EAAkC,SAAlC,CAAN,CAAmDQ,YAAnD,CAAP;AACD","sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport inject from \"hocs/inject\";\nimport { Query } from \"@apollo/react-components\";\nimport hoistNonReactStatic from \"hoist-non-react-statics\";\nimport { pagination, paginationVariablesFromUrlParams } from \"lib/utils/pagination\";\nimport catalogItemsQuery from \"./catalogItems.gql\";\nimport { decodeOpaqueId } from \"lib/utils/decoding\";\n//import ll from \"@reactioncommerce/api-utils/lib/encodeOpaqueId\";\n//console.log(ll)\n/**\n * withCatalogItems higher order query component for fetching primaryShopId and catalog data\n * @name withCatalogItems\n * @param {React.Component} Component to decorate and apply\n * @returns {React.Component} - component decorated with primaryShopId and catalog as props\n */\nexport default function withCatalogItems(Component) {\n  class CatalogItems extends React.Component {\n    static propTypes = {\n      primaryShopId: PropTypes.string,\n      routingStore: PropTypes.object.isRequired,\n      tag: PropTypes.shape({\n        _id: PropTypes.string.isRequired\n      }),\n      uiStore: PropTypes.object.isRequired\n    };\n\n    render() {\n      const { primaryShopId, routingStore, uiStore, tag } = this.props;\n      const [sortBy, sortOrder] = uiStore.sortBy.split(\"-\");\n      let tagIds = tag && [tag._id];\n      //tagIds = [ll(\"reaction/tag\", \"wPSzobjkrtk8z95XH\")]\n\n      // if (!primaryShopId) {\n      //   return (\n      //      <Component\n      //       {...this.props}\n      //     />\n      //   );\n      // }\n\n      const variables = {\n        shopId: \"oEsrnc9mqBDvt52TW\",\n        ...paginationVariablesFromUrlParams(routingStore.query, { defaultPageLimit: uiStore.pageSize }),\n        tagIds,\n        sortBy,\n        sortByPriceCurrencyCode: uiStore.sortByCurrencyCode,\n        sortOrder\n      };\n\n      // console.log(variables, \"rishbah\")\n\n      return (\n        <Query  query={catalogItemsQuery} variables={variables}>\n          {({ data, fetchMore, loading }) => {\n            const { catalogItems } = data || {};\n            // console.log(catalogItems, \"items piasdpofij\")\n\n            return (\n              <Component\n                {...this.props}\n                catalogItemsPageInfo={pagination({\n                  fetchMore,\n                  routingStore,\n                  data,\n                  queryName: \"catalogItems\",\n                  limit: uiStore.pageSize\n                })}\n                catalogItems={(catalogItems && catalogItems.edges) || []}\n                isLoadingCatalogItems={loading}\n              />\n            );\n          }}\n        </Query>\n      );\n    }\n  }\n\n  hoistNonReactStatic(CatalogItems, Component);\n  return inject(\"primaryShopId\", \"routingStore\", \"uiStore\")(CatalogItems);\n}\n"]},"metadata":{},"sourceType":"module"}